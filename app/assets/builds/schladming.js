(()=>{var tT=Object.create;var uh=Object.defineProperty;var eT=Object.getOwnPropertyDescriptor;var nT=Object.getOwnPropertyNames;var iT=Object.getPrototypeOf,rT=Object.prototype.hasOwnProperty;var a=(n,t)=>uh(n,"name",{value:t,configurable:!0});var Yr=(n,t)=>()=>(n&&(t=n(n=0)),t);var pr=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),lp=(n,t)=>{for(var e in t)uh(n,e,{get:t[e],enumerable:!0})},sT=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of nT(t))!rT.call(n,s)&&s!==e&&uh(n,s,{get:()=>t[s],enumerable:!(i=eT(t,s))||i.enumerable});return n};var $n=(n,t,e)=>(e=n!=null?tT(iT(n)):{},sT(t||!n||!n.__esModule?uh(e,"default",{value:n,enumerable:!0}):e,n));var eo,Ah=Yr(()=>{eo={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var je,Wa=Yr(()=>{Ah();je={log(...n){this.enabled&&(n.push(Date.now()),eo.logger.log("[ActionCable]",...n))}}});var Ec,Lh,Tc,Ch,zp=Yr(()=>{Wa();Ec=a(()=>new Date().getTime(),"now"),Lh=a(n=>(Ec()-n)/1e3,"secondsSince"),Tc=class{static{a(this,"ConnectionMonitor")}constructor(t){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=t,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=Ec(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),je.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=Ec(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),je.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=Ec()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,je.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=Ec(),je.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:t,reconnectionBackoffRate:e}=this.constructor,i=Math.pow(1+e,Math.min(this.reconnectAttempts,10)),c=(this.reconnectAttempts===0?1:e)*Math.random();return t*1e3*i*(1+c)}reconnectIfStale(){this.connectionIsStale()&&(je.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Lh(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?je.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Lh(this.disconnectedAt)} s`):(je.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Lh(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Lh(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(je.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Tc.staleThreshold=6;Tc.reconnectionBackoffRate=.15;Ch=Tc});var Sc,Up=Yr(()=>{Sc={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var Ac,Vp,gS,Wb,Lc,Nh,Wp=Yr(()=>{Ah();zp();Up();Wa();({message_types:Ac,protocols:Vp}=Sc),gS=Vp.slice(0,Vp.length-1),Wb=[].indexOf,Lc=class{static{a(this,"Connection")}constructor(t){this.open=this.open.bind(this),this.consumer=t,this.subscriptions=this.consumer.subscriptions,this.monitor=new Ch(this),this.disconnected=!0}send(t){return this.isOpen()?(this.webSocket.send(JSON.stringify(t)),!0):!1}open(){if(this.isActive())return je.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let t=[...Vp,...this.consumer.subprotocols||[]];return je.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${t}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new eo.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:t}={allowReconnect:!0}){if(t||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(je.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(t){je.log("Failed to reopen WebSocket",t)}finally{je.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return Wb.call(gS,this.getProtocol())>=0}isState(...t){return Wb.call(t,this.getState())>=0}getState(){if(this.webSocket){for(let t in eo.WebSocket)if(eo.WebSocket[t]===this.webSocket.readyState)return t.toLowerCase()}return null}installEventHandlers(){for(let t in this.events){let e=this.events[t].bind(this);this.webSocket[`on${t}`]=e}}uninstallEventHandlers(){for(let t in this.events)this.webSocket[`on${t}`]=function(){}}};Lc.reopenDelay=500;Lc.prototype.events={message(n){if(!this.isProtocolSupported())return;let{identifier:t,message:e,reason:i,reconnect:s,type:c}=JSON.parse(n.data);switch(c){case Ac.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Ac.disconnect:return je.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:s});case Ac.ping:return this.monitor.recordPing();case Ac.confirmation:return this.subscriptions.confirmSubscription(t),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(t,"connected",{reconnected:!0})):this.subscriptions.notify(t,"connected",{reconnected:!1});case Ac.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",e)}},open(){if(je.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return je.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(n){if(je.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){je.log("WebSocket onerror event")}};Nh=Lc});var vS,na,Zp=Yr(()=>{vS=a(function(n,t){if(t!=null)for(let e in t){let i=t[e];n[e]=i}return n},"extend"),na=class{static{a(this,"Subscription")}constructor(t,e={},i){this.consumer=t,this.identifier=JSON.stringify(e),vS(this,i)}perform(t,e={}){return e.action=t,this.send(e)}send(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var $p,Oh,Kp=Yr(()=>{Wa();$p=class{static{a(this,"SubscriptionGuarantor")}constructor(t){this.subscriptions=t,this.pendingSubscriptions=[]}guarantee(t){this.pendingSubscriptions.indexOf(t)==-1?(je.log(`SubscriptionGuarantor guaranteeing ${t.identifier}`),this.pendingSubscriptions.push(t)):je.log(`SubscriptionGuarantor already guaranteeing ${t.identifier}`),this.startGuaranteeing()}forget(t){je.log(`SubscriptionGuarantor forgetting ${t.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(e=>e!==t)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(t=>{je.log(`SubscriptionGuarantor resubscribing ${t.identifier}`),this.subscriptions.subscribe(t)})},500)}},Oh=$p});var ia,Gp=Yr(()=>{Zp();Kp();Wa();ia=class{static{a(this,"Subscriptions")}constructor(t){this.consumer=t,this.guarantor=new Oh(this),this.subscriptions=[]}create(t,e){let i=t,s=typeof i=="object"?i:{channel:i},c=new na(this.consumer,s,e);return this.add(c)}add(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.subscribe(t),t}remove(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t}reject(t){return this.findAll(t).map(e=>(this.forget(e),this.notify(e,"rejected"),e))}forget(t){return this.guarantor.forget(t),this.subscriptions=this.subscriptions.filter(e=>e!==t),t}findAll(t){return this.subscriptions.filter(e=>e.identifier===t)}reload(){return this.subscriptions.map(t=>this.subscribe(t))}notifyAll(t,...e){return this.subscriptions.map(i=>this.notify(i,t,...e))}notify(t,e,...i){let s;return typeof t=="string"?s=this.findAll(t):s=[t],s.map(c=>typeof c[e]=="function"?c[e](...i):void 0)}subscribe(t){this.sendCommand(t,"subscribe")&&this.guarantor.guarantee(t)}confirmSubscription(t){je.log(`Subscription confirmed ${t}`),this.findAll(t).map(e=>this.guarantor.forget(e))}sendCommand(t,e){let{identifier:i}=t;return this.consumer.send({command:e,identifier:i})}}});function Yp(n){if(typeof n=="function"&&(n=n()),n&&!/^wss?:/i.test(n)){let t=document.createElement("a");return t.href=n,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}else return n}var Za,Zb=Yr(()=>{Wp();Gp();Za=class{static{a(this,"Consumer")}constructor(t){this._url=t,this.subscriptions=new ia(this),this.connection=new Nh(this),this.subprotocols=[]}get url(){return Yp(this._url)}send(t){return this.connection.send(t)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(t){this.subprotocols=[...this.subprotocols,t]}};a(Yp,"createWebSocketURL")});var Kb={};lp(Kb,{Connection:()=>Nh,ConnectionMonitor:()=>Ch,Consumer:()=>Za,INTERNAL:()=>Sc,Subscription:()=>na,SubscriptionGuarantor:()=>Oh,Subscriptions:()=>ia,adapters:()=>eo,createConsumer:()=>bS,createWebSocketURL:()=>Yp,getConfig:()=>$b,logger:()=>je});function bS(n=$b("url")||Sc.default_mount_path){return new Za(n)}function $b(n){let t=document.head.querySelector(`meta[name='action-cable-${n}']`);if(t)return t.getAttribute("content")}var Gb=Yr(()=>{Wp();zp();Zb();Up();Zp();Gp();Kp();Ah();Wa();a(bS,"createConsumer");a($b,"getConfig")});var hm=pr((CR,um)=>{function ky(n,t=100,e={}){if(typeof n!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof n}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");let{immediate:i}=typeof e=="boolean"?{immediate:e}:e,s,c,d,m,v;function y(){let E=Date.now()-m;if(E<t&&E>=0)d=setTimeout(y,t-E);else if(d=void 0,!i){let A=s,C=c;s=void 0,c=void 0,v=n.apply(A,C)}}a(y,"later");let x=a(function(...E){if(s&&this!==s)throw new Error("Debounced method called with different contexts.");s=this,c=E,m=Date.now();let A=i&&!d;if(d||(d=setTimeout(y,t)),A){let C=s,k=c;s=void 0,c=void 0,v=n.apply(C,k)}return v},"debounced");return x.clear=()=>{d&&(clearTimeout(d),d=void 0)},x.flush=()=>{if(!d)return;let E=s,A=c;s=void 0,c=void 0,v=n.apply(E,A),clearTimeout(d),d=void 0},x}a(ky,"debounce");um.exports.debounce=ky;um.exports=ky});var Dy=pr((IR,Iy)=>{function dm(n,t,e){var i,s,c,d,m;t==null&&(t=100);function v(){var x=Date.now()-d;x<t&&x>=0?i=setTimeout(v,t-x):(i=null,e||(m=n.apply(c,s),c=s=null))}a(v,"later");var y=a(function(){c=this,s=arguments,d=Date.now();var x=e&&!i;return i||(i=setTimeout(v,t)),x&&(m=n.apply(c,s),c=s=null),m},"debounced");return y.clear=function(){i&&(clearTimeout(i),i=null)},y.flush=function(){i&&(m=n.apply(c,s),c=s=null,clearTimeout(i),i=null)},y}a(dm,"debounce");dm.debounce=dm;Iy.exports=dm});var Uy=pr((id,zy)=>{(function(n,t){typeof id=="object"&&typeof zy<"u"?t(id):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.leaflet={}))})(id,function(n){"use strict";var t="1.9.4";function e(r){var l,f,g,_;for(f=1,g=arguments.length;f<g;f++){_=arguments[f];for(l in _)r[l]=_[l]}return r}a(e,"extend");var i=Object.create||function(){function r(){}return a(r,"F"),function(l){return r.prototype=l,new r}}();function s(r,l){var f=Array.prototype.slice;if(r.bind)return r.bind.apply(r,f.call(arguments,1));var g=f.call(arguments,2);return function(){return r.apply(l,g.length?g.concat(f.call(arguments)):arguments)}}a(s,"bind");var c=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++c),r._leaflet_id}a(d,"stamp");function m(r,l,f){var g,_,S,B;return B=a(function(){g=!1,_&&(S.apply(f,_),_=!1)},"later"),S=a(function(){g?_=arguments:(r.apply(f,arguments),setTimeout(B,l),g=!0)},"wrapperFn"),S}a(m,"throttle");function v(r,l,f){var g=l[1],_=l[0],S=g-_;return r===g&&f?r:((r-_)%S+S)%S+_}a(v,"wrapNum");function y(){return!1}a(y,"falseFn");function x(r,l){if(l===!1)return r;var f=Math.pow(10,l===void 0?6:l);return Math.round(r*f)/f}a(x,"formatNum");function E(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}a(E,"trim");function A(r){return E(r).split(/\s+/)}a(A,"splitWords");function C(r,l){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?i(r.options):{});for(var f in l)r.options[f]=l[f];return r.options}a(C,"setOptions");function k(r,l,f){var g=[];for(var _ in r)g.push(encodeURIComponent(f?_.toUpperCase():_)+"="+encodeURIComponent(r[_]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}a(k,"getParamString");var H=/\{ *([\w_ -]+) *\}/g;function M(r,l){return r.replace(H,function(f,g){var _=l[g];if(_===void 0)throw new Error("No value provided for variable "+f);return typeof _=="function"&&(_=_(l)),_})}a(M,"template");var q=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function V(r,l){for(var f=0;f<r.length;f++)if(r[f]===l)return f;return-1}a(V,"indexOf");var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}a(Y,"getPrefixed");var ot=0;function gt(r){var l=+new Date,f=Math.max(0,16-(l-ot));return ot=l+f,window.setTimeout(r,f)}a(gt,"timeoutDefer");var ht=window.requestAnimationFrame||Y("RequestAnimationFrame")||gt,j=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function it(r,l,f){if(f&&ht===gt)r.call(l);else return ht.call(window,s(r,l))}a(it,"requestAnimFrame");function xt(r){r&&j.call(window,r)}a(xt,"cancelAnimFrame");var z={__proto__:null,extend:e,create:i,bind:s,get lastId(){return c},stamp:d,throttle:m,wrapNum:v,falseFn:y,formatNum:x,trim:E,splitWords:A,setOptions:C,getParamString:k,template:M,isArray:q,indexOf:V,emptyImageUrl:$,requestFn:ht,cancelFn:j,requestAnimFrame:it,cancelAnimFrame:xt};function X(){}a(X,"Class"),X.extend=function(r){var l=a(function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},"NewClass"),f=l.__super__=this.prototype,g=i(f);g.constructor=l,l.prototype=g;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return r.statics&&e(l,r.statics),r.includes&&(ft(r.includes),e.apply(null,[g].concat(r.includes))),e(g,r),delete g.statics,delete g.includes,g.options&&(g.options=f.options?i(f.options):{},e(g.options,r.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,B=g._initHooks.length;S<B;S++)g._initHooks[S].call(this)}},l},X.include=function(r){var l=this.prototype.options;return e(this.prototype,r),r.options&&(this.prototype.options=l,this.mergeOptions(r.options)),this},X.mergeOptions=function(r){return e(this.prototype.options,r),this},X.addInitHook=function(r){var l=Array.prototype.slice.call(arguments,1),f=typeof r=="function"?r:function(){this[r].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function ft(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=q(r)?r:[r];for(var l=0;l<r.length;l++)r[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}a(ft,"checkDeprecatedMixinEvents");var st={on:function(r,l,f){if(typeof r=="object")for(var g in r)this._on(g,r[g],l);else{r=A(r);for(var _=0,S=r.length;_<S;_++)this._on(r[_],l,f)}return this},off:function(r,l,f){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var g in r)this._off(g,r[g],l);else{r=A(r);for(var _=arguments.length===1,S=0,B=r.length;S<B;S++)_?this._off(r[S]):this._off(r[S],l,f)}return this},_on:function(r,l,f,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(r,l,f)===!1){f===this&&(f=void 0);var _={fn:l,ctx:f};g&&(_.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(_)}},_off:function(r,l,f){var g,_,S;if(this._events&&(g=this._events[r],!!g)){if(arguments.length===1){if(this._firingCount)for(_=0,S=g.length;_<S;_++)g[_].fn=y;delete this._events[r];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var B=this._listens(r,l,f);if(B!==!1){var K=g[B];this._firingCount&&(K.fn=y,this._events[r]=g=g.slice()),g.splice(B,1)}}},fire:function(r,l,f){if(!this.listens(r,f))return this;var g=e({},l,{type:r,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[r];if(_){this._firingCount=this._firingCount+1||1;for(var S=0,B=_.length;S<B;S++){var K=_[S],tt=K.fn;K.once&&this.off(r,tt,K.ctx),tt.call(K.ctx||this,g)}this._firingCount--}}return f&&this._propagateEvent(g),this},listens:function(r,l,f,g){typeof r!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(g=!!l,_=void 0,f=void 0);var S=this._events&&this._events[r];if(S&&S.length&&this._listens(r,_,f)!==!1)return!0;if(g){for(var B in this._eventParents)if(this._eventParents[B].listens(r,l,f,g))return!0}return!1},_listens:function(r,l,f){if(!this._events)return!1;var g=this._events[r]||[];if(!l)return!!g.length;f===this&&(f=void 0);for(var _=0,S=g.length;_<S;_++)if(g[_].fn===l&&g[_].ctx===f)return _;return!1},once:function(r,l,f){if(typeof r=="object")for(var g in r)this._on(g,r[g],l,!0);else{r=A(r);for(var _=0,S=r.length;_<S;_++)this._on(r[_],l,f,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var l in this._eventParents)this._eventParents[l].fire(r.type,e({layer:r.target,propagatedFrom:r.target},r),!0)}};st.addEventListener=st.on,st.removeEventListener=st.clearAllEventListeners=st.off,st.addOneTimeEventListener=st.once,st.fireEvent=st.fire,st.hasEventListeners=st.listens;var wt=X.extend(st);function P(r,l,f){this.x=f?Math.round(r):r,this.y=f?Math.round(l):l}a(P,"Point");var U=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};P.prototype={clone:function(){return new P(this.x,this.y)},add:function(r){return this.clone()._add(I(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(I(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new P(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new P(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=U(this.x),this.y=U(this.y),this},distanceTo:function(r){r=I(r);var l=r.x-this.x,f=r.y-this.y;return Math.sqrt(l*l+f*f)},equals:function(r){return r=I(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=I(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function I(r,l,f){return r instanceof P?r:q(r)?new P(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new P(r.x,r.y):new P(r,l,f)}a(I,"toPoint");function Q(r,l){if(r)for(var f=l?[r,l]:r,g=0,_=f.length;g<_;g++)this.extend(f[g])}a(Q,"Bounds"),Q.prototype={extend:function(r){var l,f;if(!r)return this;if(r instanceof P||typeof r[0]=="number"||"x"in r)l=f=I(r);else if(r=et(r),l=r.min,f=r.max,!l||!f)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=f.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(r){return I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return I(this.min.x,this.max.y)},getTopRight:function(){return I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var l,f;return typeof r[0]=="number"||r instanceof P?r=I(r):r=et(r),r instanceof Q?(l=r.min,f=r.max):l=f=r,l.x>=this.min.x&&f.x<=this.max.x&&l.y>=this.min.y&&f.y<=this.max.y},intersects:function(r){r=et(r);var l=this.min,f=this.max,g=r.min,_=r.max,S=_.x>=l.x&&g.x<=f.x,B=_.y>=l.y&&g.y<=f.y;return S&&B},overlaps:function(r){r=et(r);var l=this.min,f=this.max,g=r.min,_=r.max,S=_.x>l.x&&g.x<f.x,B=_.y>l.y&&g.y<f.y;return S&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var l=this.min,f=this.max,g=Math.abs(l.x-f.x)*r,_=Math.abs(l.y-f.y)*r;return et(I(l.x-g,l.y-_),I(f.x+g,f.y+_))},equals:function(r){return r?(r=et(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function et(r,l){return!r||r instanceof Q?r:new Q(r,l)}a(et,"toBounds");function ct(r,l){if(r)for(var f=l?[r,l]:r,g=0,_=f.length;g<_;g++)this.extend(f[g])}a(ct,"LatLngBounds"),ct.prototype={extend:function(r){var l=this._southWest,f=this._northEast,g,_;if(r instanceof mt)g=r,_=r;else if(r instanceof ct){if(g=r._southWest,_=r._northEast,!g||!_)return this}else return r?this.extend(Nt(r)||Et(r)):this;return!l&&!f?(this._southWest=new mt(g.lat,g.lng),this._northEast=new mt(_.lat,_.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),f.lat=Math.max(_.lat,f.lat),f.lng=Math.max(_.lng,f.lng)),this},pad:function(r){var l=this._southWest,f=this._northEast,g=Math.abs(l.lat-f.lat)*r,_=Math.abs(l.lng-f.lng)*r;return new ct(new mt(l.lat-g,l.lng-_),new mt(f.lat+g,f.lng+_))},getCenter:function(){return new mt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new mt(this.getNorth(),this.getWest())},getSouthEast:function(){return new mt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof mt||"lat"in r?r=Nt(r):r=Et(r);var l=this._southWest,f=this._northEast,g,_;return r instanceof ct?(g=r.getSouthWest(),_=r.getNorthEast()):g=_=r,g.lat>=l.lat&&_.lat<=f.lat&&g.lng>=l.lng&&_.lng<=f.lng},intersects:function(r){r=Et(r);var l=this._southWest,f=this._northEast,g=r.getSouthWest(),_=r.getNorthEast(),S=_.lat>=l.lat&&g.lat<=f.lat,B=_.lng>=l.lng&&g.lng<=f.lng;return S&&B},overlaps:function(r){r=Et(r);var l=this._southWest,f=this._northEast,g=r.getSouthWest(),_=r.getNorthEast(),S=_.lat>l.lat&&g.lat<f.lat,B=_.lng>l.lng&&g.lng<f.lng;return S&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,l){return r?(r=Et(r),this._southWest.equals(r.getSouthWest(),l)&&this._northEast.equals(r.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Et(r,l){return r instanceof ct?r:new ct(r,l)}a(Et,"toLatLngBounds");function mt(r,l,f){if(isNaN(r)||isNaN(l))throw new Error("Invalid LatLng object: ("+r+", "+l+")");this.lat=+r,this.lng=+l,f!==void 0&&(this.alt=+f)}a(mt,"LatLng"),mt.prototype={equals:function(r,l){if(!r)return!1;r=Nt(r);var f=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return f<=(l===void 0?1e-9:l)},toString:function(r){return"LatLng("+x(this.lat,r)+", "+x(this.lng,r)+")"},distanceTo:function(r){return Vt.distance(this,Nt(r))},wrap:function(){return Vt.wrapLatLng(this)},toBounds:function(r){var l=180*r/40075017,f=l/Math.cos(Math.PI/180*this.lat);return Et([this.lat-l,this.lng-f],[this.lat+l,this.lng+f])},clone:function(){return new mt(this.lat,this.lng,this.alt)}};function Nt(r,l,f){return r instanceof mt?r:q(r)&&typeof r[0]!="object"?r.length===3?new mt(r[0],r[1],r[2]):r.length===2?new mt(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new mt(r.lat,"lng"in r?r.lng:r.lon,r.alt):l===void 0?null:new mt(r,l,f)}a(Nt,"toLatLng");var $t={latLngToPoint:function(r,l){var f=this.projection.project(r),g=this.scale(l);return this.transformation._transform(f,g)},pointToLatLng:function(r,l){var f=this.scale(l),g=this.transformation.untransform(r,f);return this.projection.unproject(g)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var l=this.projection.bounds,f=this.scale(r),g=this.transformation.transform(l.min,f),_=this.transformation.transform(l.max,f);return new Q(g,_)},infinite:!1,wrapLatLng:function(r){var l=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,f=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,g=r.alt;return new mt(f,l,g)},wrapLatLngBounds:function(r){var l=r.getCenter(),f=this.wrapLatLng(l),g=l.lat-f.lat,_=l.lng-f.lng;if(g===0&&_===0)return r;var S=r.getSouthWest(),B=r.getNorthEast(),K=new mt(S.lat-g,S.lng-_),tt=new mt(B.lat-g,B.lng-_);return new ct(K,tt)}},Vt=e({},$t,{wrapLng:[-180,180],R:6371e3,distance:function(r,l){var f=Math.PI/180,g=r.lat*f,_=l.lat*f,S=Math.sin((l.lat-r.lat)*f/2),B=Math.sin((l.lng-r.lng)*f/2),K=S*S+Math.cos(g)*Math.cos(_)*B*B,tt=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*tt}}),te=6378137,se={R:te,MAX_LATITUDE:85.0511287798,project:function(r){var l=Math.PI/180,f=this.MAX_LATITUDE,g=Math.max(Math.min(f,r.lat),-f),_=Math.sin(g*l);return new P(this.R*r.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(r){var l=180/Math.PI;return new mt((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*l,r.x*l/this.R)},bounds:function(){var r=te*Math.PI;return new Q([-r,-r],[r,r])}()};function he(r,l,f,g){if(q(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=l,this._c=f,this._d=g}a(he,"Transformation"),he.prototype={transform:function(r,l){return this._transform(r.clone(),l)},_transform:function(r,l){return l=l||1,r.x=l*(this._a*r.x+this._b),r.y=l*(this._c*r.y+this._d),r},untransform:function(r,l){return l=l||1,new P((r.x/l-this._b)/this._a,(r.y/l-this._d)/this._c)}};function Te(r,l,f,g){return new he(r,l,f,g)}a(Te,"toTransformation");var fe=e({},Vt,{code:"EPSG:3857",projection:se,transformation:function(){var r=.5/(Math.PI*se.R);return Te(r,.5,-r,.5)}()}),Gt=e({},fe,{code:"EPSG:900913"});function ye(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}a(ye,"svgCreate");function zt(r,l){var f="",g,_,S,B,K,tt;for(g=0,S=r.length;g<S;g++){for(K=r[g],_=0,B=K.length;_<B;_++)tt=K[_],f+=(_?"L":"M")+tt.x+" "+tt.y;f+=l?rt.svg?"z":"x":""}return f||"M0 0"}a(zt,"pointsToPath");var ie=document.documentElement.style,Yt="ActiveXObject"in window,Jt=Yt&&!document.addEventListener,Se="msLaunchUri"in navigator&&!("documentMode"in document),ce=Ht("webkit"),Oe=Ht("android"),De=Ht("android 2")||Ht("android 3"),ze=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),hn=Oe&&Ht("Google")&&ze<537&&!("AudioNode"in window),Be=!!window.opera,Ae=!Se&&Ht("chrome"),Ue=Ht("gecko")&&!ce&&!Be&&!Yt,an=!Ae&&Ht("safari"),me=Ht("phantom"),Ve="OTransition"in ie,Ye=navigator.platform.indexOf("Win")===0,Xe=Yt&&"transition"in ie,He="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!De,oe="MozPerspective"in ie,Le=!window.L_DISABLE_3D&&(Xe||He||oe)&&!Ve&&!me,Zt=typeof orientation<"u"||Ht("mobile"),de=Zt&&ce,yn=Zt&&He,fi=!window.PointerEvent&&window.MSPointerEvent,In=!!(window.PointerEvent||fi),Li="ontouchstart"in window||!!window.TouchEvent,Gn=!window.L_NO_TOUCH&&(Li||In),zr=Zt&&Be,Er=Zt&&Ue,O=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,D=function(){var r=!1;try{var l=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return r}(),W=function(){return!!document.createElement("canvas").getContext}(),J=!!(document.createElementNS&&ye("svg").createSVGRect),vt=!!J&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Tt=!J&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var l=r.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Wt=navigator.platform.indexOf("Mac")===0,Mt=navigator.platform.indexOf("Linux")===0;function Ht(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}a(Ht,"userAgentContains");var rt={ie:Yt,ielt9:Jt,edge:Se,webkit:ce,android:Oe,android23:De,androidStock:hn,opera:Be,chrome:Ae,gecko:Ue,safari:an,phantom:me,opera12:Ve,win:Ye,ie3d:Xe,webkit3d:He,gecko3d:oe,any3d:Le,mobile:Zt,mobileWebkit:de,mobileWebkit3d:yn,msPointer:fi,pointer:In,touch:Gn,touchNative:Li,mobileOpera:zr,mobileGecko:Er,retina:O,passiveEvents:D,canvas:W,svg:J,vml:Tt,inlineSvg:vt,mac:Wt,linux:Mt},Ft=rt.msPointer?"MSPointerDown":"pointerdown",_e=rt.msPointer?"MSPointerMove":"pointermove",dn=rt.msPointer?"MSPointerUp":"pointerup",nn=rt.msPointer?"MSPointerCancel":"pointercancel",We={touchstart:Ft,touchmove:_e,touchend:dn,touchcancel:nn},ln={touchstart:or,touchmove:Ci,touchend:Ci,touchcancel:Ci},_n={},Hn=!1;function ei(r,l,f){return l==="touchstart"&&$i(),ln[l]?(f=ln[l].bind(this,f),r.addEventListener(We[l],f,!1),f):(console.warn("wrong event specified:",l),y)}a(ei,"addPointerListener");function rr(r,l,f){if(!We[l]){console.warn("wrong event specified:",l);return}r.removeEventListener(We[l],f,!1)}a(rr,"removePointerListener");function Ze(r){_n[r.pointerId]=r}a(Ze,"_globalPointerDown");function sr(r){_n[r.pointerId]&&(_n[r.pointerId]=r)}a(sr,"_globalPointerMove");function pi(r){delete _n[r.pointerId]}a(pi,"_globalPointerUp");function $i(){Hn||(document.addEventListener(Ft,Ze,!0),document.addEventListener(_e,sr,!0),document.addEventListener(dn,pi,!0),document.addEventListener(nn,pi,!0),Hn=!0)}a($i,"_addPointerDocListener");function Ci(r,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var f in _n)l.touches.push(_n[f]);l.changedTouches=[l],r(l)}}a(Ci,"_handlePointer");function or(r,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Tn(l),Ci(r,l)}a(or,"_onPointerStart");function ar(r){var l={},f,g;for(g in r)f=r[g],l[g]=f&&f.bind?f.bind(r):f;return r=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}a(ar,"makeDblclick");var Tr=200;function Z(r,l){r.addEventListener("dblclick",l);var f=0,g;function _(S){if(S.detail!==1){g=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var B=jl(S);if(!(B.some(function(tt){return tt instanceof HTMLLabelElement&&tt.attributes.for})&&!B.some(function(tt){return tt instanceof HTMLInputElement||tt instanceof HTMLSelectElement}))){var K=Date.now();K-f<=Tr?(g++,g===2&&l(ar(S))):g=1,f=K}}}return a(_,"simDblclick"),r.addEventListener("click",_),{dblclick:l,simDblclick:_}}a(Z,"addDoubleTapListener");function lt(r,l){r.removeEventListener("dblclick",l.dblclick),r.removeEventListener("click",l.simDblclick)}a(lt,"removeDoubleTapListener");var Lt=ae(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),R=ae(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),G=R==="webkitTransition"||R==="OTransition"?R+"End":"transitionend";function yt(r){return typeof r=="string"?document.getElementById(r):r}a(yt,"get");function St(r,l){var f=r.style[l]||r.currentStyle&&r.currentStyle[l];if((!f||f==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(r,null);f=g?g[l]:null}return f==="auto"?null:f}a(St,"getStyle");function bt(r,l,f){var g=document.createElement(r);return g.className=l||"",f&&f.appendChild(g),g}a(bt,"create$1");function It(r){var l=r.parentNode;l&&l.removeChild(r)}a(It,"remove");function ue(r){for(;r.firstChild;)r.removeChild(r.firstChild)}a(ue,"empty");function xe(r){var l=r.parentNode;l&&l.lastChild!==r&&l.appendChild(r)}a(xe,"toFront");function $e(r){var l=r.parentNode;l&&l.firstChild!==r&&l.insertBefore(r,l.firstChild)}a($e,"toBack");function Pe(r,l){if(r.classList!==void 0)return r.classList.contains(l);var f=we(r);return f.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(f)}a(Pe,"hasClass");function dt(r,l){if(r.classList!==void 0)for(var f=A(l),g=0,_=f.length;g<_;g++)r.classList.add(f[g]);else if(!Pe(r,l)){var S=we(r);ge(r,(S?S+" ":"")+l)}}a(dt,"addClass");function Bt(r,l){r.classList!==void 0?r.classList.remove(l):ge(r,E((" "+we(r)+" ").replace(" "+l+" "," ")))}a(Bt,"removeClass");function ge(r,l){r.className.baseVal===void 0?r.className=l:r.className.baseVal=l}a(ge,"setClass");function we(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}a(we,"getClass");function qe(r,l){"opacity"in r.style?r.style.opacity=l:"filter"in r.style&&zn(r,l)}a(qe,"setOpacity");function zn(r,l){var f=!1,g="DXImageTransform.Microsoft.Alpha";try{f=r.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),f?(f.Enabled=l!==100,f.Opacity=l):r.style.filter+=" progid:"+g+"(opacity="+l+")"}a(zn,"_setOpacityIE");function ae(r){for(var l=document.documentElement.style,f=0;f<r.length;f++)if(r[f]in l)return r[f];return!1}a(ae,"testProp");function ke(r,l,f){var g=l||new P(0,0);r.style[Lt]=(rt.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(f?" scale("+f+")":"")}a(ke,"setTransform");function pe(r,l){r._leaflet_pos=l,rt.any3d?ke(r,l):(r.style.left=l.x+"px",r.style.top=l.y+"px")}a(pe,"setPosition");function Dn(r){return r._leaflet_pos||new P(0,0)}a(Dn,"getPosition");var os,Ur,Ee;if("onselectstart"in document)os=a(function(){Xt(window,"selectstart",Tn)},"disableTextSelection"),Ur=a(function(){Me(window,"selectstart",Tn)},"enableTextSelection");else{var ve=ae(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);os=a(function(){if(ve){var r=document.documentElement.style;Ee=r[ve],r[ve]="none"}},"disableTextSelection"),Ur=a(function(){ve&&(document.documentElement.style[ve]=Ee,Ee=void 0)},"enableTextSelection")}function Vr(){Xt(window,"dragstart",Tn)}a(Vr,"disableImageDrag");function Un(){Me(window,"dragstart",Tn)}a(Un,"enableImageDrag");var Wr,Vn;function mi(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(ni(),Wr=r,Vn=r.style.outlineStyle,r.style.outlineStyle="none",Xt(window,"keydown",ni))}a(mi,"preventOutline");function ni(){Wr&&(Wr.style.outlineStyle=Vn,Wr=void 0,Vn=void 0,Me(window,"keydown",ni))}a(ni,"restoreOutline");function Zr(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}a(Zr,"getSizedParentNode");function Sr(r){var l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}a(Sr,"getScale");var No={__proto__:null,TRANSFORM:Lt,TRANSITION:R,TRANSITION_END:G,get:yt,getStyle:St,create:bt,remove:It,empty:ue,toFront:xe,toBack:$e,hasClass:Pe,addClass:dt,removeClass:Bt,setClass:ge,getClass:we,setOpacity:qe,testProp:ae,setTransform:ke,setPosition:pe,getPosition:Dn,get disableTextSelection(){return os},get enableTextSelection(){return Ur},disableImageDrag:Vr,enableImageDrag:Un,preventOutline:mi,restoreOutline:ni,getSizedParentNode:Zr,getScale:Sr};function Xt(r,l,f,g){if(l&&typeof l=="object")for(var _ in l)$r(r,_,l[_],f);else{l=A(l);for(var S=0,B=l.length;S<B;S++)$r(r,l[S],f,g)}return this}a(Xt,"on");var En="_leaflet_events";function Me(r,l,f,g){if(arguments.length===1)as(r),delete r[En];else if(l&&typeof l=="object")for(var _ in l)Yn(r,_,l[_],f);else if(l=A(l),arguments.length===2)as(r,function(K){return V(l,K)!==-1});else for(var S=0,B=l.length;S<B;S++)Yn(r,l[S],f,g);return this}a(Me,"off");function as(r,l){for(var f in r[En]){var g=f.split(/\d/)[0];(!l||l(g))&&Yn(r,g,null,null,f)}}a(as,"batchRemove");var ls={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $r(r,l,f,g){var _=l+d(f)+(g?"_"+d(g):"");if(r[En]&&r[En][_])return this;var S=a(function(K){return f.call(g||r,K||window.event)},"handler"),B=S;!rt.touchNative&&rt.pointer&&l.indexOf("touch")===0?S=ei(r,l,S):rt.touch&&l==="dblclick"?S=Z(r,S):"addEventListener"in r?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?r.addEventListener(ls[l]||l,S,rt.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(S=a(function(K){K=K||window.event,Rs(r,K)&&B(K)},"handler"),r.addEventListener(ls[l],S,!1)):r.addEventListener(l,B,!1):r.attachEvent("on"+l,S),r[En]=r[En]||{},r[En][_]=S}a($r,"addOne");function Yn(r,l,f,g,_){_=_||l+d(f)+(g?"_"+d(g):"");var S=r[En]&&r[En][_];if(!S)return this;!rt.touchNative&&rt.pointer&&l.indexOf("touch")===0?rr(r,l,S):rt.touch&&l==="dblclick"?lt(r,S):"removeEventListener"in r?r.removeEventListener(ls[l]||l,S,!1):r.detachEvent("on"+l,S),r[En][_]=null}a(Yn,"removeOne");function qt(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}a(qt,"stopPropagation");function Pn(r){return $r(r,"wheel",qt),this}a(Pn,"disableScrollPropagation");function Xn(r){return Xt(r,"mousedown touchstart dblclick contextmenu",qt),r._leaflet_disable_click=!0,this}a(Xn,"disableClickPropagation");function Tn(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}a(Tn,"preventDefault");function Ni(r){return Tn(r),qt(r),this}a(Ni,"stop");function jl(r){if(r.composedPath)return r.composedPath();for(var l=[],f=r.target;f;)l.push(f),f=f.parentNode;return l}a(jl,"getPropagationPath");function Oi(r,l){if(!l)return new P(r.clientX,r.clientY);var f=Sr(l),g=f.boundingClientRect;return new P((r.clientX-g.left)/f.x-l.clientLeft,(r.clientY-g.top)/f.y-l.clientTop)}a(Oi,"getMousePosition");var Fl=rt.linux&&rt.chrome?window.devicePixelRatio:rt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ar(r){return rt.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Fl:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}a(Ar,"getWheelDelta");function Rs(r,l){var f=l.relatedTarget;if(!f)return!0;try{for(;f&&f!==r;)f=f.parentNode}catch{return!1}return f!==r}a(Rs,"isExternalTarget");var Hu={__proto__:null,on:Xt,off:Me,stopPropagation:qt,disableScrollPropagation:Pn,disableClickPropagation:Xn,preventDefault:Tn,stop:Ni,getPropagationPath:jl,getMousePosition:Oi,getWheelDelta:Ar,isExternalTarget:Rs,addListener:Xt,removeListener:Me},Hl=wt.extend({run:function(r,l,f,g){this.stop(),this._el=r,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=Dn(r),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=it(this._animate,this),this._step()},_step:function(r){var l=+new Date-this._startTime,f=this._duration*1e3;l<f?this._runFrame(this._easeOut(l/f),r):(this._runFrame(1),this._complete())},_runFrame:function(r,l){var f=this._startPos.add(this._offset.multiplyBy(r));l&&f._round(),pe(this._el,f),this.fire("step")},_complete:function(){xt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),be=wt.extend({options:{crs:fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,l){l=C(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Nt(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=R&&rt.any3d&&!rt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xt(this._proxy,G,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,l,f){if(l=l===void 0?this._zoom:this._limitZoom(l),r=this._limitCenter(Nt(r),l,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=e({animate:f.animate},f.zoom),f.pan=e({animate:f.animate,duration:f.duration},f.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,l,f.zoom):this._tryAnimatedPan(r,f.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(r,l,f.pan&&f.pan.noMoveStart),this},setZoom:function(r,l){return this._loaded?this.setView(this.getCenter(),r,{zoom:l}):(this._zoom=r,this)},zoomIn:function(r,l){return r=r||(rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,l)},zoomOut:function(r,l){return r=r||(rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,l)},setZoomAround:function(r,l,f){var g=this.getZoomScale(l),_=this.getSize().divideBy(2),S=r instanceof P?r:this.latLngToContainerPoint(r),B=S.subtract(_).multiplyBy(1-1/g),K=this.containerPointToLatLng(_.add(B));return this.setView(K,l,{zoom:f})},_getBoundsCenterZoom:function(r,l){l=l||{},r=r.getBounds?r.getBounds():Et(r);var f=I(l.paddingTopLeft||l.padding||[0,0]),g=I(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(r,!1,f.add(g));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:r.getCenter(),zoom:_};var S=g.subtract(f).divideBy(2),B=this.project(r.getSouthWest(),_),K=this.project(r.getNorthEast(),_),tt=this.unproject(B.add(K).divideBy(2).add(S),_);return{center:tt,zoom:_}},fitBounds:function(r,l){if(r=Et(r),!r.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(r,l);return this.setView(f.center,f.zoom,l)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,l){return this.setView(r,this._zoom,{pan:l})},panBy:function(r,l){if(r=I(r).round(),l=l||{},!r.x&&!r.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Hl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){dt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,f,l.duration||.25,l.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,l,f){if(f=f||{},f.animate===!1||!rt.any3d)return this.setView(r,l,f);this._stop();var g=this.project(this.getCenter()),_=this.project(r),S=this.getSize(),B=this._zoom;r=Nt(r),l=l===void 0?B:l;var K=Math.max(S.x,S.y),tt=K*this.getZoomScale(B,l),pt=_.distanceTo(g)||1,Ot=1.42,Kt=Ot*Ot;function le(fn){var Pa=fn?-1:1,Uf=fn?tt:K,Vf=tt*tt-K*K+Pa*Kt*Kt*pt*pt,Ws=2*Uf*Kt*pt,Zs=Vf/Ws,ut=Math.sqrt(Zs*Zs+1)-Zs,ih=ut<1e-9?-18:Math.log(ut);return ih}a(le,"r");function Zn(fn){return(Math.exp(fn)-Math.exp(-fn))/2}a(Zn,"sinh");function wn(fn){return(Math.exp(fn)+Math.exp(-fn))/2}a(wn,"cosh");function Di(fn){return Zn(fn)/wn(fn)}a(Di,"tanh");var Je=le(0);function Mr(fn){return K*(wn(Je)/wn(Je+Ot*fn))}a(Mr,"w");function ac(fn){return K*(wn(Je)*Di(Je+Ot*fn)-Zn(Je))/Kt}a(ac,"u");function Hf(fn){return 1-Math.pow(1-fn,1.5)}a(Hf,"easeOut");var lc=Date.now(),Wo=(le(1)-Je)/Ot,zf=f.duration?1e3*f.duration:1e3*Wo*.8;function Zo(){var fn=(Date.now()-lc)/zf,Pa=Hf(fn)*Wo;fn<=1?(this._flyToFrame=it(Zo,this),this._move(this.unproject(g.add(_.subtract(g).multiplyBy(ac(Pa)/pt)),B),this.getScaleZoom(K/Mr(Pa),B),{flyTo:!0})):this._move(r,l)._moveEnd(!0)}return a(Zo,"frame"),this._moveStart(!0,f.noMoveStart),Zo.call(this),this},flyToBounds:function(r,l){var f=this._getBoundsCenterZoom(r,l);return this.flyTo(f.center,f.zoom,l)},setMaxBounds:function(r){return r=Et(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var l=this.options.minZoom;return this.options.minZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var l=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,l){this._enforcingBounds=!0;var f=this.getCenter(),g=this._limitCenter(f,this._zoom,Et(r));return f.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(r,l){l=l||{};var f=I(l.paddingTopLeft||l.padding||[0,0]),g=I(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),S=this.project(r),B=this.getPixelBounds(),K=et([B.min.add(f),B.max.subtract(g)]),tt=K.getSize();if(!K.contains(S)){this._enforcingBounds=!0;var pt=S.subtract(K.getCenter()),Ot=K.extend(S).getSize().subtract(tt);_.x+=pt.x<0?-Ot.x:Ot.x,_.y+=pt.y<0?-Ot.y:Ot.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=e({animate:!1,pan:!0},r===!0?{animate:!0}:r);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),g=l.divideBy(2).round(),_=f.divideBy(2).round(),S=g.subtract(_);return!S.x&&!S.y?this:(r.animate&&r.pan?this.panBy(S):(r.pan&&this._rawPanBy(S),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=e({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=s(this._handleGeolocationResponse,this),f=s(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,f,r):navigator.geolocation.getCurrentPosition(l,f,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var l=r.code,f=r.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var l=r.coords.latitude,f=r.coords.longitude,g=new mt(l,f),_=g.toBounds(r.coords.accuracy*2),S=this._locateOptions;if(S.setView){var B=this.getBoundsZoom(_);this.setView(g,S.maxZoom?Math.min(B,S.maxZoom):B)}var K={latlng:g,bounds:_,timestamp:r.timestamp};for(var tt in r.coords)typeof r.coords[tt]=="number"&&(K[tt]=r.coords[tt]);this.fire("locationfound",K)}},addHandler:function(r,l){if(!l)return this;var f=this[r]=new l(this);return this._handlers.push(f),this.options[r]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),It(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(xt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)It(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,l){var f="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),g=bt("div",f,l||this._mapPane);return r&&(this._panes[r]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),l=this.unproject(r.getBottomLeft()),f=this.unproject(r.getTopRight());return new ct(l,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,l,f){r=Et(r),f=I(f||[0,0]);var g=this.getZoom()||0,_=this.getMinZoom(),S=this.getMaxZoom(),B=r.getNorthWest(),K=r.getSouthEast(),tt=this.getSize().subtract(f),pt=et(this.project(K,g),this.project(B,g)).getSize(),Ot=rt.any3d?this.options.zoomSnap:1,Kt=tt.x/pt.x,le=tt.y/pt.y,Zn=l?Math.max(Kt,le):Math.min(Kt,le);return g=this.getScaleZoom(Zn,g),Ot&&(g=Math.round(g/(Ot/100))*(Ot/100),g=l?Math.ceil(g/Ot)*Ot:Math.floor(g/Ot)*Ot),Math.max(_,Math.min(S,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,l){var f=this._getTopLeftPoint(r,l);return new Q(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,l){var f=this.options.crs;return l=l===void 0?this._zoom:l,f.scale(r)/f.scale(l)},getScaleZoom:function(r,l){var f=this.options.crs;l=l===void 0?this._zoom:l;var g=f.zoom(r*f.scale(l));return isNaN(g)?1/0:g},project:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Nt(r),l)},unproject:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(I(r),l)},layerPointToLatLng:function(r){var l=I(r).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(r){var l=this.project(Nt(r))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(Nt(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Et(r))},distance:function(r,l){return this.options.crs.distance(Nt(r),Nt(l))},containerPointToLayerPoint:function(r){return I(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return I(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var l=this.containerPointToLayerPoint(I(r));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Nt(r)))},mouseEventToContainerPoint:function(r){return Oi(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var l=this._container=yt(r);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xt(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&rt.any3d,dt(r,"leaflet-container"+(rt.touch?" leaflet-touch":"")+(rt.retina?" leaflet-retina":"")+(rt.ielt9?" leaflet-oldie":"")+(rt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=St(r,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(dt(r.markerPane,"leaflet-zoom-hide"),dt(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,l,f){pe(this._mapPane,new P(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,f)._move(r,l)._moveEnd(_),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(r,l){return r&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(r,l,f,g){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),g?f&&f.pinch&&this.fire("zoom",f):((_||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return xt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){pe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var l=r?Me:Xt;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),rt.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){xt(this._resizeRequest),this._resizeRequest=it(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,l){for(var f=[],g,_=l==="mouseout"||l==="mouseover",S=r.target||r.srcElement,B=!1;S;){if(g=this._targets[d(S)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){B=!0;break}if(g&&g.listens(l,!0)&&(_&&!Rs(S,r)||(f.push(g),_))||S===this._container)break;S=S.parentNode}return!f.length&&!B&&!_&&this.listens(l,!0)&&(f=[this]),f},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var l=r.target||r.srcElement;if(!(!this._loaded||l._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(l))){var f=r.type;f==="mousedown"&&mi(l),this._fireDOMEvent(r,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,l,f){if(r.type==="click"){var g=e({},r);g.type="preclick",this._fireDOMEvent(g,g.type,f)}var _=this._findEventTargets(r,l);if(f){for(var S=[],B=0;B<f.length;B++)f[B].listens(l,!0)&&S.push(f[B]);_=S.concat(_)}if(_.length){l==="contextmenu"&&Tn(r);var K=_[0],tt={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var pt=K.getLatLng&&(!K._radius||K._radius<=10);tt.containerPoint=pt?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(r),tt.layerPoint=this.containerPointToLayerPoint(tt.containerPoint),tt.latlng=pt?K.getLatLng():this.layerPointToLatLng(tt.layerPoint)}for(B=0;B<_.length;B++)if(_[B].fire(l,tt,!0),tt.originalEvent._stopped||_[B].options.bubblingMouseEvents===!1&&V(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,l=this._handlers.length;r<l;r++)this._handlers[r].disable()},whenReady:function(r,l){return this._loaded?r.call(l||this,{target:this}):this.on("load",r,l),this},_getMapPanePos:function(){return Dn(this._mapPane)||new P(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,l){var f=r&&l!==void 0?this._getNewPixelOrigin(r,l):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,l){var f=this.getSize()._divideBy(2);return this.project(r,l)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,l,f){var g=this._getNewPixelOrigin(f,l);return this.project(r,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(r,l,f){var g=this._getNewPixelOrigin(f,l);return et([this.project(r.getSouthWest(),l)._subtract(g),this.project(r.getNorthWest(),l)._subtract(g),this.project(r.getSouthEast(),l)._subtract(g),this.project(r.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,l,f){if(!f)return r;var g=this.project(r,l),_=this.getSize().divideBy(2),S=new Q(g.subtract(_),g.add(_)),B=this._getBoundsOffset(S,f,l);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?r:this.unproject(g.add(B),l)},_limitOffset:function(r,l){if(!l)return r;var f=this.getPixelBounds(),g=new Q(f.min.add(r),f.max.add(r));return r.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(r,l,f){var g=et(this.project(l.getNorthEast(),f),this.project(l.getSouthWest(),f)),_=g.min.subtract(r.min),S=g.max.subtract(r.max),B=this._rebound(_.x,-S.x),K=this._rebound(_.y,-S.y);return new P(B,K)},_rebound:function(r,l){return r+l>0?Math.round(r-l)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(l))},_limitZoom:function(r){var l=this.getMinZoom(),f=this.getMaxZoom(),g=rt.any3d?this.options.zoomSnap:1;return g&&(r=Math.round(r/g)*g),Math.max(l,Math.min(f,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,l){var f=this._getCenterOffset(r)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,l),!0)},_createAnimProxy:function(){var r=this._proxy=bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(l){var f=Lt,g=this._proxy.style[f];ke(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){It(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),l=this.getZoom();ke(this._proxy,this.project(r,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,l,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),_=this._getCenterOffset(r)._divideBy(1-1/g);return f.animate!==!0&&!this.getSize().contains(_)?!1:(it(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(r,l,!0)},this),!0)},_animateZoom:function(r,l,f,g){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=l,dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Wn(r,l){return new be(r,l)}a(Wn,"createMap");var Ki=X.extend({options:{position:"topright"},initialize:function(r){C(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var l=this._map;return l&&l.removeControl(this),this.options.position=r,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var l=this._container=this.onAdd(r),f=this.getPosition(),g=r._controlCorners[f];return dt(l,"leaflet-control"),f.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(It(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Bs=a(function(r){return new Ki(r)},"control");be.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},l="leaflet-",f=this._controlContainer=bt("div",l+"control-container",this._container);function g(_,S){var B=l+_+" "+l+S;r[_+S]=bt("div",B,f)}a(g,"createCorner"),g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)It(this._controlCorners[r]);It(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zl=Ki.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,l,f,g){return f<g?-1:g<f?1:0}},initialize:function(r,l,f){C(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in r)this._addLayer(r[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Ki.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,l){return this._addLayer(r,l),this._map?this._update():this},addOverlay:function(r,l){return this._addLayer(r,l,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(r));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",l=this._container=bt("div",r),f=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Xn(l),Pn(l);var g=this._section=bt("section",r+"-list");f&&(this._map.on("click",this.collapse,this),Xt(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=bt("a",r+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),Xt(_,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){Tn(S),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=bt("div",r+"-base",g),this._separator=bt("div",r+"-separator",g),this._overlaysList=bt("div",r+"-overlays",g),l.appendChild(g)},_getLayer:function(r){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===r)return this._layers[l]},_addLayer:function(r,l,f){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:l,overlay:f}),this.options.sortLayers&&this._layers.sort(s(function(g,_){return this.options.sortFunction(g.layer,_.layer,g.name,_.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ue(this._baseLayersList),ue(this._overlaysList),this._layerControlInputs=[];var r,l,f,g,_=0;for(f=0;f<this._layers.length;f++)g=this._layers[f],this._addItem(g),l=l||g.overlay,r=r||!g.overlay,_+=g.overlay?0:1;return this.options.hideSingleBase&&(r=r&&_>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=l&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var l=this._getLayer(d(r.target)),f=l.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;f&&this._map.fire(f,l)},_createRadioElement:function(r,l){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=f,g.firstChild},_addItem:function(r){var l=document.createElement("label"),f=this._map.hasLayer(r.layer),g;r.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=f):g=this._createRadioElement("leaflet-base-layers_"+d(this),f),this._layerControlInputs.push(g),g.layerId=d(r.layer),Xt(g,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+r.name;var S=document.createElement("span");l.appendChild(S),S.appendChild(g),S.appendChild(_);var B=r.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,l,f,g=[],_=[];this._handlingClick=!0;for(var S=r.length-1;S>=0;S--)l=r[S],f=this._getLayer(l.layerId).layer,l.checked?g.push(f):l.checked||_.push(f);for(S=0;S<_.length;S++)this._map.hasLayer(_[S])&&this._map.removeLayer(_[S]);for(S=0;S<g.length;S++)this._map.hasLayer(g[S])||this._map.addLayer(g[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,l,f,g=this._map.getZoom(),_=r.length-1;_>=0;_--)l=r[_],f=this._getLayer(l.layerId).layer,l.disabled=f.options.minZoom!==void 0&&g<f.options.minZoom||f.options.maxZoom!==void 0&&g>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Xt(r,"click",Tn),this.expand();var l=this;setTimeout(function(){Me(r,"click",Tn),l._preventClick=!1})}}),Gi=a(function(r,l,f){return new zl(r,l,f)},"layers"),Kr=Ki.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var l="leaflet-control-zoom",f=bt("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",f,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,l,f,g,_){var S=bt("a",f,g);return S.innerHTML=r,S.href="#",S.title=l,S.setAttribute("role","button"),S.setAttribute("aria-label",l),Xn(S),Xt(S,"click",Ni),Xt(S,"click",_,this),Xt(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var r=this._map,l="leaflet-disabled";Bt(this._zoomInButton,l),Bt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(dt(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(dt(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kr,this.addControl(this.zoomControl))});var Ul=a(function(r){return new Kr(r)},"zoom"),cs=Ki.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var l="leaflet-control-scale",f=bt("div",l),g=this.options;return this._addScales(g,l+"-line",f),r.on(g.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),f},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,l,f){r.metric&&(this._mScale=bt("div",l,f)),r.imperial&&(this._iScale=bt("div",l,f))},_update:function(){var r=this._map,l=r.getSize().y/2,f=r.distance(r.containerPointToLatLng([0,l]),r.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(f)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var l=this._getRoundNum(r),f=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,f,l/r)},_updateImperial:function(r){var l=r*3.2808399,f,g,_;l>5280?(f=l/5280,g=this._getRoundNum(f),this._updateScale(this._iScale,g+" mi",g/f)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(r,l,f){r.style.width=Math.round(this.options.maxWidth*f)+"px",r.innerHTML=l},_getRoundNum:function(r){var l=Math.pow(10,(Math.floor(r)+"").length-1),f=r/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,l*f}}),Oo=a(function(r){return new cs(r)},"scale"),Vl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',js=Ki.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(rt.inlineSvg?Vl+" ":"")+"Leaflet</a>"},initialize:function(r){C(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=bt("div","leaflet-control-attribution"),Xn(this._container);for(var l in r._layers)r._layers[l].getAttribution&&this.addAttribution(r._layers[l].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var l in this._attributions)this._attributions[l]&&r.push(l);var f=[];this.options.prefix&&f.push(this.options.prefix),r.length&&f.push(r.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&new js().addTo(this)});var gi=a(function(r){return new js(r)},"attribution");Ki.Layers=zl,Ki.Zoom=Kr,Ki.Scale=cs,Ki.Attribution=js,Bs.layers=Gi,Bs.zoom=Ul,Bs.scale=Oo,Bs.attribution=gi;var lr=X.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});lr.addTo=function(r,l){return r.addHandler(l,this),this};var Fs={Events:st},Aa=rt.touch?"touchstart mousedown":"mousedown",cr=wt.extend({options:{clickTolerance:3},initialize:function(r,l,f,g){C(this,g),this._element=r,this._dragStartTarget=l||r,this._preventOutline=f},enable:function(){this._enabled||(Xt(this._dragStartTarget,Aa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cr._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,Aa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Pe(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){cr._dragging===this&&this.finishDrag();return}if(!(cr._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(cr._dragging=this,this._preventOutline&&mi(this._element),Vr(),os(),!this._moving)){this.fire("down");var l=r.touches?r.touches[0]:r,f=Zr(this._element);this._startPoint=new P(l.clientX,l.clientY),this._startPos=Dn(this._element),this._parentScale=Sr(f);var g=r.type==="mousedown";Xt(document,g?"mousemove":"touchmove",this._onMove,this),Xt(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var l=r.touches&&r.touches.length===1?r.touches[0]:r,f=new P(l.clientX,l.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Tn(r),this._moved||(this.fire("dragstart"),this._moved=!0,dt(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),pe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Bt(document.body,"leaflet-dragging"),this._lastTarget&&(Bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),Un(),Ur();var l=this._moved&&this._moving;this._moving=!1,cr._dragging=!1,l&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function ko(r,l,f){var g,_=[1,4,2,8],S,B,K,tt,pt,Ot,Kt,le;for(S=0,Ot=r.length;S<Ot;S++)r[S]._code=Lr(r[S],l);for(K=0;K<4;K++){for(Kt=_[K],g=[],S=0,Ot=r.length,B=Ot-1;S<Ot;B=S++)tt=r[S],pt=r[B],tt._code&Kt?pt._code&Kt||(le=Mo(pt,tt,Kt,l,f),le._code=Lr(le,l),g.push(le)):(pt._code&Kt&&(le=Mo(pt,tt,Kt,l,f),le._code=Lr(le,l),g.push(le)),g.push(tt));r=g}return r}a(ko,"clipPolygon");function kt(r,l){var f,g,_,S,B,K,tt,pt,Ot;if(!r||r.length===0)throw new Error("latlngs not passed");vi(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Kt=Nt([0,0]),le=Et(r),Zn=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());Zn<1700&&(Kt=Wl(r));var wn=r.length,Di=[];for(f=0;f<wn;f++){var Je=Nt(r[f]);Di.push(l.project(Nt([Je.lat-Kt.lat,Je.lng-Kt.lng])))}for(K=tt=pt=0,f=0,g=wn-1;f<wn;g=f++)_=Di[f],S=Di[g],B=_.y*S.x-S.y*_.x,tt+=(_.x+S.x)*B,pt+=(_.y+S.y)*B,K+=B*3;K===0?Ot=Di[0]:Ot=[tt/K,pt/K];var Mr=l.unproject(I(Ot));return Nt([Mr.lat+Kt.lat,Mr.lng+Kt.lng])}a(kt,"polygonCenter");function Wl(r){for(var l=0,f=0,g=0,_=0;_<r.length;_++){var S=Nt(r[_]);l+=S.lat,f+=S.lng,g++}return Nt([l/g,f/g])}a(Wl,"centroid");var Af={__proto__:null,clipPolygon:ko,polygonCenter:kt,centroid:Wl};function zu(r,l){if(!l||!r.length)return r.slice();var f=l*l;return r=Cf(r,f),r=Lf(r,f),r}a(zu,"simplify");function Uu(r,l,f){return Math.sqrt(Hs(r,l,f,!0))}a(Uu,"pointToSegmentDistance");function Zl(r,l,f){return Hs(r,l,f)}a(Zl,"closestPointOnSegment");function Lf(r,l){var f=r.length,g=typeof Uint8Array<"u"?Uint8Array:Array,_=new g(f);_[0]=_[f-1]=1,$l(r,_,l,0,f-1);var S,B=[];for(S=0;S<f;S++)_[S]&&B.push(r[S]);return B}a(Lf,"_simplifyDP");function $l(r,l,f,g,_){var S=0,B,K,tt;for(K=g+1;K<=_-1;K++)tt=Hs(r[K],r[g],r[_],!0),tt>S&&(B=K,S=tt);S>f&&(l[B]=1,$l(r,l,f,g,B),$l(r,l,f,B,_))}a($l,"_simplifyDPStep");function Cf(r,l){for(var f=[r[0]],g=1,_=0,S=r.length;g<S;g++)Nf(r[g],r[_])>l&&(f.push(r[g]),_=g);return _<S-1&&f.push(r[S-1]),f}a(Cf,"_reducePoints");var Kl;function Vu(r,l,f,g,_){var S=g?Kl:Lr(r,f),B=Lr(l,f),K,tt,pt;for(Kl=B;;){if(!(S|B))return[r,l];if(S&B)return!1;K=S||B,tt=Mo(r,l,K,f,_),pt=Lr(tt,f),K===S?(r=tt,S=pt):(l=tt,B=pt)}}a(Vu,"clipSegment");function Mo(r,l,f,g,_){var S=l.x-r.x,B=l.y-r.y,K=g.min,tt=g.max,pt,Ot;return f&8?(pt=r.x+S*(tt.y-r.y)/B,Ot=tt.y):f&4?(pt=r.x+S*(K.y-r.y)/B,Ot=K.y):f&2?(pt=tt.x,Ot=r.y+B*(tt.x-r.x)/S):f&1&&(pt=K.x,Ot=r.y+B*(K.x-r.x)/S),new P(pt,Ot,_)}a(Mo,"_getEdgeIntersection");function Lr(r,l){var f=0;return r.x<l.min.x?f|=1:r.x>l.max.x&&(f|=2),r.y<l.min.y?f|=4:r.y>l.max.y&&(f|=8),f}a(Lr,"_getBitCode");function Nf(r,l){var f=l.x-r.x,g=l.y-r.y;return f*f+g*g}a(Nf,"_sqDist");function Hs(r,l,f,g){var _=l.x,S=l.y,B=f.x-_,K=f.y-S,tt=B*B+K*K,pt;return tt>0&&(pt=((r.x-_)*B+(r.y-S)*K)/tt,pt>1?(_=f.x,S=f.y):pt>0&&(_+=B*pt,S+=K*pt)),B=r.x-_,K=r.y-S,g?B*B+K*K:new P(_,S)}a(Hs,"_sqClosestPointOnSegment");function vi(r){return!q(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}a(vi,"isFlat");function Wu(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vi(r)}a(Wu,"_flat");function Gl(r,l){var f,g,_,S,B,K,tt,pt;if(!r||r.length===0)throw new Error("latlngs not passed");vi(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Ot=Nt([0,0]),Kt=Et(r),le=Kt.getNorthWest().distanceTo(Kt.getSouthWest())*Kt.getNorthEast().distanceTo(Kt.getNorthWest());le<1700&&(Ot=Wl(r));var Zn=r.length,wn=[];for(f=0;f<Zn;f++){var Di=Nt(r[f]);wn.push(l.project(Nt([Di.lat-Ot.lat,Di.lng-Ot.lng])))}for(f=0,g=0;f<Zn-1;f++)g+=wn[f].distanceTo(wn[f+1])/2;if(g===0)pt=wn[0];else for(f=0,S=0;f<Zn-1;f++)if(B=wn[f],K=wn[f+1],_=B.distanceTo(K),S+=_,S>g){tt=(S-g)/_,pt=[K.x-tt*(K.x-B.x),K.y-tt*(K.y-B.y)];break}var Je=l.unproject(I(pt));return Nt([Je.lat+Ot.lat,Je.lng+Ot.lng])}a(Gl,"polylineCenter");var Yl={__proto__:null,simplify:zu,pointToSegmentDistance:Uu,closestPointOnSegment:Zl,clipSegment:Vu,_getEdgeIntersection:Mo,_getBitCode:Lr,_sqClosestPointOnSegment:Hs,isFlat:vi,_flat:Wu,polylineCenter:Gl},Xl={project:function(r){return new P(r.lng,r.lat)},unproject:function(r){return new mt(r.y,r.x)},bounds:new Q([-180,-90],[180,90])},Io={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var l=Math.PI/180,f=this.R,g=r.lat*l,_=this.R_MINOR/f,S=Math.sqrt(1-_*_),B=S*Math.sin(g),K=Math.tan(Math.PI/4-g/2)/Math.pow((1-B)/(1+B),S/2);return g=-f*Math.log(Math.max(K,1e-10)),new P(r.lng*l*f,g)},unproject:function(r){for(var l=180/Math.PI,f=this.R,g=this.R_MINOR/f,_=Math.sqrt(1-g*g),S=Math.exp(-r.y/f),B=Math.PI/2-2*Math.atan(S),K=0,tt=.1,pt;K<15&&Math.abs(tt)>1e-7;K++)pt=_*Math.sin(B),pt=Math.pow((1-pt)/(1+pt),_/2),tt=Math.PI/2-2*Math.atan(S*pt)-B,B+=tt;return new mt(B*l,r.x*l/f)}},Jl={__proto__:null,LonLat:Xl,Mercator:Io,SphericalMercator:se},Ql=e({},Vt,{code:"EPSG:3395",projection:Io,transformation:function(){var r=.5/(Math.PI*Io.R);return Te(r,.5,-r,.5)}()}),La=e({},Vt,{code:"EPSG:4326",projection:Xl,transformation:Te(1/180,1,-1/180,.5)}),Zu=e({},$t,{projection:Xl,transformation:Te(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,l){var f=l.lng-r.lng,g=l.lat-r.lat;return Math.sqrt(f*f+g*g)},infinite:!0});$t.Earth=Vt,$t.EPSG3395=Ql,$t.EPSG3857=fe,$t.EPSG900913=Gt,$t.EPSG4326=La,$t.Simple=Zu;var ki=wt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var l=r.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var f=this.getEvents();l.on(f,this),this.once("remove",function(){l.off(f,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});be.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(r);return this._layers[l]?this:(this._layers[l]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var l=d(r);return this._layers[l]?(this._loaded&&r.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,l){for(var f in this._layers)r.call(l,this._layers[f]);return this},_addLayers:function(r){r=r?q(r)?r:[r]:[];for(var l=0,f=r.length;l<f;l++)this.addLayer(r[l])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var l=d(r);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,l=-1/0,f=this._getZoomSpan();for(var g in this._zoomBoundLayers){var _=this._zoomBoundLayers[g].options;r=_.minZoom===void 0?r:Math.min(r,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=r===1/0?void 0:r,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var us=ki.extend({initialize:function(r,l){C(this,l),this._layers={};var f,g;if(r)for(f=0,g=r.length;f<g;f++)this.addLayer(r[f])},addLayer:function(r){var l=this.getLayerId(r);return this._layers[l]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var l=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(r){var l=typeof r=="number"?r:this.getLayerId(r);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var l=Array.prototype.slice.call(arguments,1),f,g;for(f in this._layers)g=this._layers[f],g[r]&&g[r].apply(g,l);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,l){for(var f in this._layers)r.call(l,this._layers[f]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),$u=a(function(r,l){return new us(r,l)},"layerGroup"),ur=us.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),us.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),us.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new ct;for(var l in this._layers){var f=this._layers[l];r.extend(f.getBounds?f.getBounds():f.getLatLng())}return r}}),Of=a(function(r,l){return new ur(r,l)},"featureGroup"),zs=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){C(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,l){var f=this._getIconUrl(r);if(!f){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(f,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(r,l){var f=this.options,g=f[l+"Size"];typeof g=="number"&&(g=[g,g]);var _=I(g),S=I(l==="shadow"&&f.shadowAnchor||f.iconAnchor||_&&_.divideBy(2,!0));r.className="leaflet-marker-"+l+" "+(f.className||""),S&&(r.style.marginLeft=-S.x+"px",r.style.marginTop=-S.y+"px"),_&&(r.style.width=_.x+"px",r.style.height=_.y+"px")},_createImg:function(r,l){return l=l||document.createElement("img"),l.src=r,l},_getIconUrl:function(r){return rt.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function kf(r){return new zs(r)}a(kf,"icon");var Do=zs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Do.imagePath!="string"&&(Do.imagePath=this._detectIconPath()),(this.options.imagePath||Do.imagePath)+zs.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var l=a(function(f,g,_){var S=g.exec(f);return S&&S[_]},"strip");return r=l(r,/^url\((['"])?(.+)\1\)$/,2),r&&l(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=bt("div","leaflet-default-icon-path",document.body),l=St(r,"background-image")||St(r,"backgroundImage");if(document.body.removeChild(r),l=this._stripUrl(l),l)return l;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Ku=lr.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new cr(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),dt(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var l=this._marker,f=l._map,g=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,S=Dn(l._icon),B=f.getPixelBounds(),K=f.getPixelOrigin(),tt=et(B.min._subtract(K).add(_),B.max._subtract(K).subtract(_));if(!tt.contains(S)){var pt=I((Math.max(tt.max.x,S.x)-tt.max.x)/(B.max.x-tt.max.x)-(Math.min(tt.min.x,S.x)-tt.min.x)/(B.min.x-tt.min.x),(Math.max(tt.max.y,S.y)-tt.max.y)/(B.max.y-tt.max.y)-(Math.min(tt.min.y,S.y)-tt.min.y)/(B.min.y-tt.min.y)).multiplyBy(g);f.panBy(pt,{animate:!1}),this._draggable._newPos._add(pt),this._draggable._startPos._add(pt),pe(l._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=it(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(xt(this._panRequest),this._panRequest=it(this._adjustPan.bind(this,r)))},_onDrag:function(r){var l=this._marker,f=l._shadow,g=Dn(l._icon),_=l._map.layerPointToLatLng(g);f&&pe(f,g),l._latlng=_,r.latlng=_,r.oldLatLng=this._oldLatLng,l.fire("move",r).fire("drag",r)},_onDragEnd:function(r){xt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),hr=ki.extend({options:{icon:new Do,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,l){C(this,l),this._latlng=Nt(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var l=this._latlng;return this._latlng=Nt(r),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=r.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,r.title&&(f.title=r.title),f.tagName==="IMG"&&(f.alt=r.alt||"")),dt(f,l),r.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xt(f,"focus",this._panOnFocus,this);var _=r.icon.createShadow(this._shadow),S=!1;_!==this._shadow&&(this._removeShadow(),S=!0),_&&(dt(_,l),_.alt=""),this._shadow=_,r.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&S&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),It(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&It(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&pe(this._icon,r),this._shadow&&pe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ku)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ku(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&qe(this._icon,r),this._shadow&&qe(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var l=this.options.icon.options,f=l.iconSize?I(l.iconSize):I(0,0),g=l.iconAnchor?I(l.iconAnchor):I(0,0);r.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:f.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Po(r,l){return new hr(r,l)}a(Po,"marker");var Gr=ki.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return C(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ca=Gr.extend({options:{fill:!0,radius:10},initialize:function(r,l){C(this,l),this._latlng=Nt(r),this._radius=this.options.radius},setLatLng:function(r){var l=this._latlng;return this._latlng=Nt(r),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var l=r&&r.radius||this._radius;return Gr.prototype.setStyle.call(this,r),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,l=this._radiusY||r,f=this._clickTolerance(),g=[r+f,l+f];this._pxBounds=new Q(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Mf(r,l){return new Ca(r,l)}a(Mf,"circleMarker");var tc=Ca.extend({initialize:function(r,l,f){if(typeof l=="number"&&(l=e({},f,{radius:l})),C(this,l),this._latlng=Nt(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ct(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Gr.prototype.setStyle,_project:function(){var r=this._latlng.lng,l=this._latlng.lat,f=this._map,g=f.options.crs;if(g.distance===Vt.distance){var _=Math.PI/180,S=this._mRadius/Vt.R/_,B=f.project([l+S,r]),K=f.project([l-S,r]),tt=B.add(K).divideBy(2),pt=f.unproject(tt).lat,Ot=Math.acos((Math.cos(S*_)-Math.sin(l*_)*Math.sin(pt*_))/(Math.cos(l*_)*Math.cos(pt*_)))/_;(isNaN(Ot)||Ot===0)&&(Ot=S/Math.cos(Math.PI/180*l)),this._point=tt.subtract(f.getPixelOrigin()),this._radius=isNaN(Ot)?0:tt.x-f.project([pt,r-Ot]).x,this._radiusY=tt.y-B.y}else{var Kt=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Kt).x}this._updateBounds()}});function If(r,l,f){return new tc(r,l,f)}a(If,"circle");var dr=Gr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,l){C(this,l),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var l=1/0,f=null,g=Hs,_,S,B=0,K=this._parts.length;B<K;B++)for(var tt=this._parts[B],pt=1,Ot=tt.length;pt<Ot;pt++){_=tt[pt-1],S=tt[pt];var Kt=g(r,_,S,!0);Kt<l&&(l=Kt,f=g(r,_,S))}return f&&(f.distance=Math.sqrt(l)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,l){return l=l||this._defaultShape(),r=Nt(r),l.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ct,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return vi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var l=[],f=vi(r),g=0,_=r.length;g<_;g++)f?(l[g]=Nt(r[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(r[g]);return l},_project:function(){var r=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),l=new P(r,r);this._rawPxBounds&&(this._pxBounds=new Q([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(r,l,f){var g=r[0]instanceof mt,_=r.length,S,B;if(g){for(B=[],S=0;S<_;S++)B[S]=this._map.latLngToLayerPoint(r[S]),f.extend(B[S]);l.push(B)}else for(S=0;S<_;S++)this._projectLatlngs(r[S],l,f)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,f,g,_,S,B,K,tt;for(f=0,_=0,S=this._rings.length;f<S;f++)for(tt=this._rings[f],g=0,B=tt.length;g<B-1;g++)K=Vu(tt[g],tt[g+1],r,g,!0),K&&(l[_]=l[_]||[],l[_].push(K[0]),(K[1]!==tt[g+1]||g===B-2)&&(l[_].push(K[1]),_++))}},_simplifyPoints:function(){for(var r=this._parts,l=this.options.smoothFactor,f=0,g=r.length;f<g;f++)r[f]=zu(r[f],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,l){var f,g,_,S,B,K,tt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(f=0,S=this._parts.length;f<S;f++)for(K=this._parts[f],g=0,B=K.length,_=B-1;g<B;_=g++)if(!(!l&&g===0)&&Uu(r,K[_],K[g])<=tt)return!0;return!1}});function Gu(r,l){return new dr(r,l)}a(Gu,"polyline"),dr._flat=Wu;var Us=dr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var l=dr.prototype._convertLatLngs.call(this,r),f=l.length;return f>=2&&l[0]instanceof mt&&l[0].equals(l[f-1])&&l.pop(),l},_setLatLngs:function(r){dr.prototype._setLatLngs.call(this,r),vi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,l=this.options.weight,f=new P(l,l);if(r=new Q(r.min.subtract(f),r.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,_=this._rings.length,S;g<_;g++)S=ko(this._rings[g],r,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var l=!1,f,g,_,S,B,K,tt,pt;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(S=0,tt=this._parts.length;S<tt;S++)for(f=this._parts[S],B=0,pt=f.length,K=pt-1;B<pt;K=B++)g=f[B],_=f[K],g.y>r.y!=_.y>r.y&&r.x<(_.x-g.x)*(r.y-g.y)/(_.y-g.y)+g.x&&(l=!l);return l||dr.prototype._containsPoint.call(this,r,!0)}});function Df(r,l){return new Us(r,l)}a(Df,"polygon");var Cr=ur.extend({initialize:function(r,l){C(this,l),this._layers={},r&&this.addData(r)},addData:function(r){var l=q(r)?r:r.features,f,g,_;if(l){for(f=0,g=l.length;f<g;f++)_=l[f],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var S=this.options;if(S.filter&&!S.filter(r))return this;var B=qo(r,S);return B?(B.feature=jo(r),B.defaultOptions=B.options,this.resetStyle(B),S.onEachFeature&&S.onEachFeature(r,B),this.addLayer(B)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=e({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(l){this._setLayerStyle(l,r)},this)},_setLayerStyle:function(r,l){r.setStyle&&(typeof l=="function"&&(l=l(r.feature)),r.setStyle(l))}});function qo(r,l){var f=r.type==="Feature"?r.geometry:r,g=f?f.coordinates:null,_=[],S=l&&l.pointToLayer,B=l&&l.coordsToLatLng||ec,K,tt,pt,Ot;if(!g&&!f)return null;switch(f.type){case"Point":return K=B(g),Yu(S,r,K,l);case"MultiPoint":for(pt=0,Ot=g.length;pt<Ot;pt++)K=B(g[pt]),_.push(Yu(S,r,K,l));return new ur(_);case"LineString":case"MultiLineString":return tt=Ro(g,f.type==="LineString"?0:1,B),new dr(tt,l);case"Polygon":case"MultiPolygon":return tt=Ro(g,f.type==="Polygon"?1:2,B),new Us(tt,l);case"GeometryCollection":for(pt=0,Ot=f.geometries.length;pt<Ot;pt++){var Kt=qo({geometry:f.geometries[pt],type:"Feature",properties:r.properties},l);Kt&&_.push(Kt)}return new ur(_);case"FeatureCollection":for(pt=0,Ot=f.features.length;pt<Ot;pt++){var le=qo(f.features[pt],l);le&&_.push(le)}return new ur(_);default:throw new Error("Invalid GeoJSON object.")}}a(qo,"geometryToLayer");function Yu(r,l,f,g){return r?r(l,f):new hr(f,g&&g.markersInheritOptions&&g)}a(Yu,"_pointToLayer");function ec(r){return new mt(r[1],r[0],r[2])}a(ec,"coordsToLatLng");function Ro(r,l,f){for(var g=[],_=0,S=r.length,B;_<S;_++)B=l?Ro(r[_],l-1,f):(f||ec)(r[_]),g.push(B);return g}a(Ro,"coordsToLatLngs");function nc(r,l){return r=Nt(r),r.alt!==void 0?[x(r.lng,l),x(r.lat,l),x(r.alt,l)]:[x(r.lng,l),x(r.lat,l)]}a(nc,"latLngToCoords");function Bo(r,l,f,g){for(var _=[],S=0,B=r.length;S<B;S++)_.push(l?Bo(r[S],vi(r[S])?0:l-1,f,g):nc(r[S],g));return!l&&f&&_.length>0&&_.push(_[0].slice()),_}a(Bo,"latLngsToCoords");function hs(r,l){return r.feature?e({},r.feature,{geometry:l}):jo(l)}a(hs,"getFeature");function jo(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}a(jo,"asFeature");var Re={toGeoJSON:function(r){return hs(this,{type:"Point",coordinates:nc(this.getLatLng(),r)})}};hr.include(Re),tc.include(Re),Ca.include(Re),dr.include({toGeoJSON:function(r){var l=!vi(this._latlngs),f=Bo(this._latlngs,l?1:0,!1,r);return hs(this,{type:(l?"Multi":"")+"LineString",coordinates:f})}}),Us.include({toGeoJSON:function(r){var l=!vi(this._latlngs),f=l&&!vi(this._latlngs[0]),g=Bo(this._latlngs,f?2:l?1:0,!0,r);return l||(g=[g]),hs(this,{type:(f?"Multi":"")+"Polygon",coordinates:g})}}),us.include({toMultiPoint:function(r){var l=[];return this.eachLayer(function(f){l.push(f.toGeoJSON(r).geometry.coordinates)}),hs(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(r){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(r);var f=l==="GeometryCollection",g=[];return this.eachLayer(function(_){if(_.toGeoJSON){var S=_.toGeoJSON(r);if(f)g.push(S.geometry);else{var B=jo(S);B.type==="FeatureCollection"?g.push.apply(g,B.features):g.push(B)}}}),f?hs(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function Xu(r,l){return new Cr(r,l)}a(Xu,"geoJSON");var Vs=Xu,Na=ki.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,l,f){this._url=r,this._bounds=Et(l),C(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){It(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&xe(this._image),this},bringToBack:function(){return this._map&&$e(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Et(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",l=this._image=r?this._url:bt("img");if(dt(l,"leaflet-image-layer"),this._zoomAnimated&&dt(l,"leaflet-zoom-animated"),this.options.className&&dt(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=s(this.fire,this,"load"),l.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(r){var l=this._map.getZoomScale(r.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ke(this._image,f,l)},_reset:function(){var r=this._image,l=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=l.getSize();pe(r,l.min),r.style.width=f.x+"px",r.style.height=f.y+"px"},_updateOpacity:function(){qe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Pf=a(function(r,l,f){return new Na(r,l,f)},"imageOverlay"),Fo=Na.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",l=this._image=r?this._url:bt("video");if(dt(l,"leaflet-image-layer"),this._zoomAnimated&&dt(l,"leaflet-zoom-animated"),this.options.className&&dt(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=s(this.fire,this,"load"),r){for(var f=l.getElementsByTagName("source"),g=[],_=0;_<f.length;_++)g.push(f[_].src);this._url=f.length>0?g:[l.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var B=bt("source");B.src=this._url[S],l.appendChild(B)}}});function qf(r,l,f){return new Fo(r,l,f)}a(qf,"videoOverlay");var Ju=Na.extend({_initImage:function(){var r=this._image=this._url;dt(r,"leaflet-image-layer"),this._zoomAnimated&&dt(r,"leaflet-zoom-animated"),this.options.className&&dt(r,this.options.className),r.onselectstart=y,r.onmousemove=y}});function Rf(r,l,f){return new Ju(r,l,f)}a(Rf,"svgOverlay");var Yi=ki.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,l){r&&(r instanceof mt||q(r))?(this._latlng=Nt(r),C(this,l)):(C(this,r),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&qe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&qe(this._container,1),this.bringToFront(),this.options.interactive&&(dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(qe(this._container,0),this._removeTimeout=setTimeout(s(It,void 0,this._container),200)):It(this._container),this.options.interactive&&(Bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=Nt(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&xe(this._container),this},bringToBack:function(){return this._map&&$e(this._container),this},_prepareOpen:function(r){var l=this._source;if(!l._map)return!1;if(l instanceof ur){l=null;var f=this._source._layers;for(var g in f)if(f[g]._map){l=f[g];break}if(!l)return!1;this._source=l}if(!r)if(l.getCenter)r=l.getCenter();else if(l.getLatLng)r=l.getLatLng();else if(l.getBounds)r=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")r.innerHTML=l;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),l=I(this.options.offset),f=this._getAnchor();this._zoomAnimated?pe(this._container,r.add(f)):l=l.add(r).add(f);var g=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});be.include({_initOverlay:function(r,l,f,g){var _=l;return _ instanceof r||(_=new r(g).setContent(l)),f&&_.setLatLng(f),_}}),ki.include({_initOverlay:function(r,l,f,g){var _=f;return _ instanceof r?(C(_,g),_._source=this):(_=l&&!g?l:new r(g,this),_.setContent(f)),_}});var Oa=Yi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Yi.prototype.openOn.call(this,r)},onAdd:function(r){Yi.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gr||this._source.on("preclick",qt))},onRemove:function(r){Yi.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gr||this._source.off("preclick",qt))},getEvents:function(){var r=Yi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",l=this._container=bt("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=bt("div",r+"-content-wrapper",l);if(this._contentNode=bt("div",r+"-content",f),Xn(l),Pn(this._contentNode),Xt(l,"contextmenu",qt),this._tipContainer=bt("div",r+"-tip-container",l),this._tip=bt("div",r+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=bt("a",r+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Xt(g,"click",function(_){Tn(_),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,l=r.style;l.width="",l.whiteSpace="nowrap";var f=r.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),l.width=f+1+"px",l.whiteSpace="",l.height="";var g=r.offsetHeight,_=this.options.maxHeight,S="leaflet-popup-scrolled";_&&g>_?(l.height=_+"px",dt(r,S)):Bt(r,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),f=this._getAnchor();pe(this._container,l.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,l=parseInt(St(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+l,g=this._containerWidth,_=new P(this._containerLeft,-f-this._containerBottom);_._add(Dn(this._container));var S=r.layerPointToContainerPoint(_),B=I(this.options.autoPanPadding),K=I(this.options.autoPanPaddingTopLeft||B),tt=I(this.options.autoPanPaddingBottomRight||B),pt=r.getSize(),Ot=0,Kt=0;S.x+g+tt.x>pt.x&&(Ot=S.x+g-pt.x+tt.x),S.x-Ot-K.x<0&&(Ot=S.x-K.x),S.y+f+tt.y>pt.y&&(Kt=S.y+f-pt.y+tt.y),S.y-Kt-K.y<0&&(Kt=S.y-K.y),(Ot||Kt)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([Ot,Kt]))}},_getAnchor:function(){return I(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bf=a(function(r,l){return new Oa(r,l)},"popup");be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(r,l,f){return this._initOverlay(Oa,r,l,f).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),ki.include({bindPopup:function(r,l){return this._popup=this._initOverlay(Oa,this._popup,r,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof ur||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Ni(r);var l=r.layer||r.target;if(this._popup._source===l&&!(l instanceof Gr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=l,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ho=Yi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Yi.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Yi.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Yi.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",l=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=bt("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var l,f,g=this._map,_=this._container,S=g.latLngToContainerPoint(g.getCenter()),B=g.layerPointToContainerPoint(r),K=this.options.direction,tt=_.offsetWidth,pt=_.offsetHeight,Ot=I(this.options.offset),Kt=this._getAnchor();K==="top"?(l=tt/2,f=pt):K==="bottom"?(l=tt/2,f=0):K==="center"?(l=tt/2,f=pt/2):K==="right"?(l=0,f=pt/2):K==="left"?(l=tt,f=pt/2):B.x<S.x?(K="right",l=0,f=pt/2):(K="left",l=tt+(Ot.x+Kt.x)*2,f=pt/2),r=r.subtract(I(l,f,!0)).add(Ot).add(Kt),Bt(_,"leaflet-tooltip-right"),Bt(_,"leaflet-tooltip-left"),Bt(_,"leaflet-tooltip-top"),Bt(_,"leaflet-tooltip-bottom"),dt(_,"leaflet-tooltip-"+K),pe(_,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&qe(this._container,r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(l)},_getAnchor:function(){return I(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ic=a(function(r,l){return new Ho(r,l)},"tooltip");be.include({openTooltip:function(r,l,f){return this._initOverlay(Ho,r,l,f).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),ki.include({bindTooltip:function(r,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ho,this._tooltip,r,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var l=r?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[l](f),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof ur||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&(Xt(l,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Xt(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var l=r.latlng,f,g;this._tooltip.options.sticky&&r.originalEvent&&(f=this._map.mouseEventToContainerPoint(r.originalEvent),g=this._map.containerPointToLayerPoint(f),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var Qu=zs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var l=r&&r.tagName==="DIV"?r:document.createElement("div"),f=this.options;if(f.html instanceof Element?(ue(l),l.appendChild(f.html)):l.innerHTML=f.html!==!1?f.html:"",f.bgPos){var g=I(f.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function jf(r){return new Qu(r)}a(jf,"divIcon"),zs.Default=Do;var zo=ki.extend({options:{tileSize:256,opacity:1,updateWhenIdle:rt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){C(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),It(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(xe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($e(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof P?r:new P(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var l=this.getPane().children,f=-r(-1/0,1/0),g=0,_=l.length,S;g<_;g++)S=l[g].style.zIndex,l[g]!==this._container&&S&&(f=r(f,+S));isFinite(f)&&(this.options.zIndex=f+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!rt.ielt9){qe(this._container,this.options.opacity);var r=+new Date,l=!1,f=!1;for(var g in this._tiles){var _=this._tiles[g];if(!(!_.current||!_.loaded)){var S=Math.min(1,(r-_.loaded)/200);qe(_.el,S),S<1?l=!0:(_.active?f=!0:this._onOpaqueTile(_),_.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),l&&(xt(this._fadeFrame),this._fadeFrame=it(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,l=this.options.maxZoom;if(r!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===r?(this._levels[f].el.style.zIndex=l-Math.abs(r-f),this._onUpdateLevel(f)):(It(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var g=this._levels[r],_=this._map;return g||(g=this._levels[r]={},g.el=bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=_.project(_.unproject(_.getPixelOrigin()),r).round(),g.zoom=r,this._setZoomTransform(g,_.getCenter(),_.getZoom()),y(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var r,l,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)l=this._tiles[r],l.retain=l.current;for(r in this._tiles)if(l=this._tiles[r],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var l in this._tiles)this._tiles[l].coords.z===r&&this._removeTile(l)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)It(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,l,f,g){var _=Math.floor(r/2),S=Math.floor(l/2),B=f-1,K=new P(+_,+S);K.z=+B;var tt=this._tileCoordsToKey(K),pt=this._tiles[tt];return pt&&pt.active?(pt.retain=!0,!0):(pt&&pt.loaded&&(pt.retain=!0),B>g?this._retainParent(_,S,B,g):!1)},_retainChildren:function(r,l,f,g){for(var _=2*r;_<2*r+2;_++)for(var S=2*l;S<2*l+2;S++){var B=new P(_,S);B.z=f+1;var K=this._tileCoordsToKey(B),tt=this._tiles[K];if(tt&&tt.active){tt.retain=!0;continue}else tt&&tt.loaded&&(tt.retain=!0);f+1<g&&this._retainChildren(_,S,f+1,g)}},_resetView:function(r){var l=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var l=this.options;return l.minNativeZoom!==void 0&&r<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<r?l.maxNativeZoom:r},_setView:function(r,l,f,g){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var S=this.options.updateWhenZooming&&_!==this._tileZoom;(!g||S)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(r),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(r,l)},_setZoomTransforms:function(r,l){for(var f in this._levels)this._setZoomTransform(this._levels[f],r,l)},_setZoomTransform:function(r,l,f){var g=this._map.getZoomScale(f,r.zoom),_=r.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,f)).round();rt.any3d?ke(r.el,_,g):pe(r.el,_)},_resetGrid:function(){var r=this._map,l=r.options.crs,f=this._tileSize=this.getTileSize(),g=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,l.wrapLng[0]],g).x/f.x),Math.ceil(r.project([0,l.wrapLng[1]],g).x/f.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([l.wrapLat[0],0],g).y/f.x),Math.ceil(r.project([l.wrapLat[1],0],g).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var l=this._map,f=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(f,this._tileZoom),_=l.project(r,this._tileZoom).floor(),S=l.getSize().divideBy(g*2);return new Q(_.subtract(S),_.add(S))},_update:function(r){var l=this._map;if(l){var f=this._clampZoom(l.getZoom());if(r===void 0&&(r=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(r),_=this._pxBoundsToTileRange(g),S=_.getCenter(),B=[],K=this.options.keepBuffer,tt=new Q(_.getBottomLeft().subtract([K,-K]),_.getTopRight().add([K,-K]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pt in this._tiles){var Ot=this._tiles[pt].coords;(Ot.z!==this._tileZoom||!tt.contains(new P(Ot.x,Ot.y)))&&(this._tiles[pt].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(r,f);return}for(var Kt=_.min.y;Kt<=_.max.y;Kt++)for(var le=_.min.x;le<=_.max.x;le++){var Zn=new P(le,Kt);if(Zn.z=this._tileZoom,!!this._isValidTile(Zn)){var wn=this._tiles[this._tileCoordsToKey(Zn)];wn?wn.current=!0:B.push(Zn)}}if(B.sort(function(Je,Mr){return Je.distanceTo(S)-Mr.distanceTo(S)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Di=document.createDocumentFragment();for(le=0;le<B.length;le++)this._addTile(B[le],Di);this._level.el.appendChild(Di)}}}},_isValidTile:function(r){var l=this._map.options.crs;if(!l.infinite){var f=this._globalTileRange;if(!l.wrapLng&&(r.x<f.min.x||r.x>f.max.x)||!l.wrapLat&&(r.y<f.min.y||r.y>f.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(r);return Et(this.options.bounds).overlaps(g)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var l=this._map,f=this.getTileSize(),g=r.scaleBy(f),_=g.add(f),S=l.unproject(g,r.z),B=l.unproject(_,r.z);return[S,B]},_tileCoordsToBounds:function(r){var l=this._tileCoordsToNwSe(r),f=new ct(l[0],l[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var l=r.split(":"),f=new P(+l[0],+l[1]);return f.z=+l[2],f},_removeTile:function(r){var l=this._tiles[r];l&&(It(l.el),delete this._tiles[r],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){dt(r,"leaflet-tile");var l=this.getTileSize();r.style.width=l.x+"px",r.style.height=l.y+"px",r.onselectstart=y,r.onmousemove=y,rt.ielt9&&this.options.opacity<1&&qe(r,this.options.opacity)},_addTile:function(r,l){var f=this._getTilePos(r),g=this._tileCoordsToKey(r),_=this.createTile(this._wrapCoords(r),s(this._tileReady,this,r));this._initTile(_),this.createTile.length<2&&it(s(this._tileReady,this,r,null,_)),pe(_,f),this._tiles[g]={el:_,coords:r,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:r})},_tileReady:function(r,l,f){l&&this.fire("tileerror",{error:l,tile:f,coords:r});var g=this._tileCoordsToKey(r);f=this._tiles[g],f&&(f.loaded=+new Date,this._map._fadeAnimated?(qe(f.el,0),xt(this._fadeFrame),this._fadeFrame=it(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),l||(dt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),rt.ielt9||!this._map._fadeAnimated?it(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var l=new P(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return l.z=r.z,l},_pxBoundsToTileRange:function(r){var l=this.getTileSize();return new Q(r.min.unscaleBy(l).floor(),r.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function th(r){return new zo(r)}a(th,"gridLayer");var ds=zo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,l){this._url=r,l=C(this,l),l.detectRetina&&rt.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,l){return this._url===r&&l===void 0&&(l=!0),this._url=r,l||this.redraw(),this},createTile:function(r,l){var f=document.createElement("img");return Xt(f,"load",s(this._tileOnLoad,this,l,f)),Xt(f,"error",s(this._tileOnError,this,l,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(r),f},getTileUrl:function(r){var l={r:rt.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-r.y;this.options.tms&&(l.y=f),l["-y"]=f}return M(this._url,e(l,this.options))},_tileOnLoad:function(r,l){rt.ielt9?setTimeout(s(r,this,null,l),0):r(null,l)},_tileOnError:function(r,l,f){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),r(f,l)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,l=this.options.maxZoom,f=this.options.zoomReverse,g=this.options.zoomOffset;return f&&(r=l-r),r+g},_getSubdomain:function(r){var l=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var r,l;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(l=this._tiles[r].el,l.onload=y,l.onerror=y,!l.complete)){l.src=$;var f=this._tiles[r].coords;It(l),delete this._tiles[r],this.fire("tileabort",{tile:l,coords:f})}},_removeTile:function(r){var l=this._tiles[r];if(l)return l.el.setAttribute("src",$),zo.prototype._removeTile.call(this,r)},_tileReady:function(r,l,f){if(!(!this._map||f&&f.getAttribute("src")===$))return zo.prototype._tileReady.call(this,r,l,f)}});function Uo(r,l){return new ds(r,l)}a(Uo,"tileLayer");var rc=ds.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,l){this._url=r;var f=e({},this.defaultWmsParams);for(var g in l)g in this.options||(f[g]=l[g]);l=C(this,l);var _=l.detectRetina&&rt.retina?2:1,S=this.getTileSize();f.width=S.x*_,f.height=S.y*_,this.wmsParams=f},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ds.prototype.onAdd.call(this,r)},getTileUrl:function(r){var l=this._tileCoordsToNwSe(r),f=this._crs,g=et(f.project(l[0]),f.project(l[1])),_=g.min,S=g.max,B=(this._wmsVersion>=1.3&&this._crs===La?[_.y,_.x,S.y,S.x]:[_.x,_.y,S.x,S.y]).join(","),K=ds.prototype.getTileUrl.call(this,r);return K+k(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(r,l){return e(this.wmsParams,r),l||this.redraw(),this}});function Ff(r,l){return new rc(r,l)}a(Ff,"tileLayerWMS"),ds.WMS=rc,Uo.wms=Ff;var Nr=ki.extend({options:{padding:.1},initialize:function(r){C(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,l){var f=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),S=g.multiplyBy(-f).add(_).subtract(this._map._getNewPixelOrigin(r,l));rt.any3d?ke(this._container,S,f):pe(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,l=this._map.getSize(),f=this._map.containerPointToLayerPoint(l.multiplyBy(-r)).round();this._bounds=new Q(f,f.add(l.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ka=Nr.extend({options:{tolerance:0},getEvents:function(){var r=Nr.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Xt(r,"mousemove",this._onMouseMove,this),Xt(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xt(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){xt(this._redrawRequest),delete this._ctx,It(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var l in this._layers)r=this._layers[l],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var r=this._bounds,l=this._container,f=r.getSize(),g=rt.retina?2:1;pe(l,r.min),l.width=g*f.x,l.height=g*f.y,l.style.width=f.x+"px",l.style.height=f.y+"px",rt.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Nr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var l=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var l=r._order,f=l.next,g=l.prev;f?f.prev=g:this._drawLast=g,g?g.next=f:this._drawFirst=f,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var l=r.options.dashArray.split(/[, ]+/),f=[],g,_;for(_=0;_<l.length;_++){if(g=Number(l[_]),isNaN(g))return;f.push(g)}r.options._dashArray=f}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||it(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var l=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(r._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(r._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var l=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,l=this._redrawBounds;if(this._ctx.save(),l){var f=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)r=g.layer,(!l||r._pxBounds&&r._pxBounds.intersects(l))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,l){if(this._drawing){var f,g,_,S,B=r._parts,K=B.length,tt=this._ctx;if(K){for(tt.beginPath(),f=0;f<K;f++){for(g=0,_=B[f].length;g<_;g++)S=B[f][g],tt[g?"lineTo":"moveTo"](S.x,S.y);l&&tt.closePath()}this._fillStroke(tt,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var l=r._point,f=this._ctx,g=Math.max(Math.round(r._radius),1),_=(Math.max(Math.round(r._radiusY),1)||g)/g;_!==1&&(f.save(),f.scale(1,_)),f.beginPath(),f.arc(l.x,l.y/_,g,0,Math.PI*2,!1),_!==1&&f.restore(),this._fillStroke(f,r)}},_fillStroke:function(r,l){var f=l.options;f.fill&&(r.globalAlpha=f.fillOpacity,r.fillStyle=f.fillColor||f.color,r.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(r.setLineDash&&r.setLineDash(l.options&&l.options._dashArray||[]),r.globalAlpha=f.opacity,r.lineWidth=f.weight,r.strokeStyle=f.color,r.lineCap=f.lineCap,r.lineJoin=f.lineJoin,r.stroke())},_onClick:function(r){for(var l=this._map.mouseEventToLayerPoint(r),f,g,_=this._drawFirst;_;_=_.next)f=_.layer,f.options.interactive&&f._containsPoint(l)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(f))&&(g=f);this._fireEvent(g?[g]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,l)}},_handleMouseOut:function(r){var l=this._hoveredLayer;l&&(Bt(this._container,"leaflet-interactive"),this._fireEvent([l],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,l){if(!this._mouseHoverThrottled){for(var f,g,_=this._drawFirst;_;_=_.next)f=_.layer,f.options.interactive&&f._containsPoint(l)&&(g=f);g!==this._hoveredLayer&&(this._handleMouseOut(r),g&&(dt(this._container,"leaflet-interactive"),this._fireEvent([g],r,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,l,f){this._map._fireDOMEvent(l,f||l.type,r)},_bringToFront:function(r){var l=r._order;if(l){var f=l.next,g=l.prev;if(f)f.prev=g;else return;g?g.next=f:f&&(this._drawFirst=f),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(r)}},_bringToBack:function(r){var l=r._order;if(l){var f=l.next,g=l.prev;if(g)g.next=f;else return;f?f.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(r)}}});function Ma(r){return rt.canvas?new ka(r):null}a(Ma,"canvas");var bi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Xi={_initContainer:function(){this._container=bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nr.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var l=r._container=bi("shape");dt(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",r._path=bi("path"),l.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var l=r._container;this._container.appendChild(l),r.options.interactive&&r.addInteractiveTarget(l)},_removePath:function(r){var l=r._container;It(l),r.removeInteractiveTarget(l),delete this._layers[d(r)]},_updateStyle:function(r){var l=r._stroke,f=r._fill,g=r.options,_=r._container;_.stroked=!!g.stroke,_.filled=!!g.fill,g.stroke?(l||(l=r._stroke=bi("stroke")),_.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=q(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(_.removeChild(l),r._stroke=null),g.fill?(f||(f=r._fill=bi("fill")),_.appendChild(f),f.color=g.fillColor||g.color,f.opacity=g.fillOpacity):f&&(_.removeChild(f),r._fill=null)},_updateCircle:function(r){var l=r._point.round(),f=Math.round(r._radius),g=Math.round(r._radiusY||f);this._setPath(r,r._empty()?"M0 0":"AL "+l.x+","+l.y+" "+f+","+g+" 0,"+65535*360)},_setPath:function(r,l){r._path.v=l},_bringToFront:function(r){xe(r._container)},_bringToBack:function(r){$e(r._container)}},fs=rt.vml?bi:ye,Mi=Nr.extend({_initContainer:function(){this._container=fs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){It(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var r=this._bounds,l=r.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,f.setAttribute("width",l.x),f.setAttribute("height",l.y)),pe(f,r.min),f.setAttribute("viewBox",[r.min.x,r.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(r){var l=r._path=fs("path");r.options.className&&dt(l,r.options.className),r.options.interactive&&dt(l,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){It(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var l=r._path,f=r.options;l&&(f.stroke?(l.setAttribute("stroke",f.color),l.setAttribute("stroke-opacity",f.opacity),l.setAttribute("stroke-width",f.weight),l.setAttribute("stroke-linecap",f.lineCap),l.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?l.setAttribute("stroke-dasharray",f.dashArray):l.removeAttribute("stroke-dasharray"),f.dashOffset?l.setAttribute("stroke-dashoffset",f.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),f.fill?(l.setAttribute("fill",f.fillColor||f.color),l.setAttribute("fill-opacity",f.fillOpacity),l.setAttribute("fill-rule",f.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(r,l){this._setPath(r,zt(r._parts,l))},_updateCircle:function(r){var l=r._point,f=Math.max(Math.round(r._radius),1),g=Math.max(Math.round(r._radiusY),1)||f,_="a"+f+","+g+" 0 1,0 ",S=r._empty()?"M0 0":"M"+(l.x-f)+","+l.y+_+f*2+",0 "+_+-f*2+",0 ";this._setPath(r,S)},_setPath:function(r,l){r._path.setAttribute("d",l)},_bringToFront:function(r){xe(r._path)},_bringToBack:function(r){$e(r._path)}});rt.vml&&Mi.include(Xi);function Or(r){return rt.svg||rt.vml?new Mi(r):null}a(Or,"svg"),be.include({getRenderer:function(r){var l=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var l=this._paneRenderers[r];return l===void 0&&(l=this._createRenderer({pane:r}),this._paneRenderers[r]=l),l},_createRenderer:function(r){return this.options.preferCanvas&&Ma(r)||Or(r)}});var Sn=Us.extend({initialize:function(r,l){Us.prototype.initialize.call(this,this._boundsToLatLngs(r),l)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Et(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Ii(r,l){return new Sn(r,l)}a(Ii,"rectangle"),Mi.create=fs,Mi.pointsToPath=zt,Cr.geometryToLayer=qo,Cr.coordsToLatLng=ec,Cr.coordsToLatLngs=Ro,Cr.latLngToCoords=nc,Cr.latLngsToCoords=Bo,Cr.getFeature=hs,Cr.asFeature=jo,be.mergeOptions({boxZoom:!0});var sc=lr.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){It(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),os(),Vr(),this._startPoint=this._map.mouseEventToContainerPoint(r),Xt(document,{contextmenu:Ni,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=bt("div","leaflet-zoom-box",this._container),dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var l=new Q(this._point,this._startPoint),f=l.getSize();pe(this._box,l.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(It(this._box),Bt(this._container,"leaflet-crosshair")),Ur(),Un(),Me(document,{contextmenu:Ni,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var l=new ct(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});be.addInitHook("addHandler","boxZoom",sc),be.mergeOptions({doubleClickZoom:!0});var yi=lr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var l=this._map,f=l.getZoom(),g=l.options.zoomDelta,_=r.originalEvent.shiftKey?f-g:f+g;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(r.containerPoint,_)}});be.addInitHook("addHandler","doubleClickZoom",yi),be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var kr=lr.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new cr(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Bt(this._map._container,"leaflet-grab"),Bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Et(this._map.options.maxBounds);this._offsetLimit=et(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var l=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(l),this._prunePositions(l)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,l){return r-(r-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;r.x<l.min.x&&(r.x=this._viscousLimit(r.x,l.min.x)),r.y<l.min.y&&(r.y=this._viscousLimit(r.y,l.min.y)),r.x>l.max.x&&(r.x=this._viscousLimit(r.x,l.max.x)),r.y>l.max.y&&(r.y=this._viscousLimit(r.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,l=Math.round(r/2),f=this._initialWorldOffset,g=this._draggable._newPos.x,_=(g-l+f)%r+l-f,S=(g+l+f)%r-l-f,B=Math.abs(_+f)<Math.abs(S+f)?_:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(r){var l=this._map,f=l.options,g=!f.inertia||r.noInertia||this._times.length<2;if(l.fire("dragend",r),g)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,B=f.easeLinearity,K=_.multiplyBy(B/S),tt=K.distanceTo([0,0]),pt=Math.min(f.inertiaMaxSpeed,tt),Ot=K.multiplyBy(pt/tt),Kt=pt/(f.inertiaDeceleration*B),le=Ot.multiplyBy(-Kt/2).round();!le.x&&!le.y?l.fire("moveend"):(le=l._limitOffset(le,l.options.maxBounds),it(function(){l.panBy(le,{duration:Kt,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});be.addInitHook("addHandler","dragging",kr),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vo=lr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Xt(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,l=document.documentElement,f=r.scrollTop||l.scrollTop,g=r.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var l=this._panKeys={},f=this.keyCodes,g,_;for(g=0,_=f.left.length;g<_;g++)l[f.left[g]]=[-1*r,0];for(g=0,_=f.right.length;g<_;g++)l[f.right[g]]=[r,0];for(g=0,_=f.down.length;g<_;g++)l[f.down[g]]=[0,r];for(g=0,_=f.up.length;g<_;g++)l[f.up[g]]=[0,-1*r]},_setZoomDelta:function(r){var l=this._zoomKeys={},f=this.keyCodes,g,_;for(g=0,_=f.zoomIn.length;g<_;g++)l[f.zoomIn[g]]=r;for(g=0,_=f.zoomOut.length;g<_;g++)l[f.zoomOut[g]]=-r},_addHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var l=r.keyCode,f=this._map,g;if(l in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(g=this._panKeys[l],r.shiftKey&&(g=I(g).multiplyBy(3)),f.options.maxBounds&&(g=f._limitOffset(I(g),f.options.maxBounds)),f.options.worldCopyJump){var _=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(g)));f.panTo(_)}else f.panBy(g)}else if(l in this._zoomKeys)f.setZoom(f.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Ni(r)}}});be.addInitHook("addHandler","keyboard",Vo),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var eh=lr.extend({addHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var l=Ar(r),f=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var g=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),g),Ni(r)},_performZoom:function(){var r=this._map,l=r.getZoom(),f=this._map.options.zoomSnap||0;r._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,S=f?Math.ceil(_/f)*f:_,B=r._limitZoom(l+(this._delta>0?S:-S))-l;this._delta=0,this._startTime=null,B&&(r.options.scrollWheelZoom==="center"?r.setZoom(l+B):r.setZoomAround(this._lastMousePos,l+B))}});be.addInitHook("addHandler","scrollWheelZoom",eh);var oc=600;be.mergeOptions({tapHold:rt.touchNative&&rt.safari&&rt.mobile,tapTolerance:15});var Ia=lr.extend({addHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var l=r.touches[0];this._startPos=this._newPos=new P(l.clientX,l.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(Xt(document,"touchend",Tn),Xt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),oc),Xt(document,"touchend touchcancel contextmenu",this._cancel,this),Xt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:a(function r(){Me(document,"touchend",Tn),Me(document,"touchend touchcancel",r)},"cancelClickPrevent"),_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(r){var l=r.touches[0];this._newPos=new P(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,l){var f=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});f._simulated=!0,l.target.dispatchEvent(f)}});be.addInitHook("addHandler","tapHold",Ia),be.mergeOptions({touchZoom:rt.touch,bounceAtZoomLimits:!0});var Da=lr.extend({addHooks:function(){dt(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Bt(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var l=this._map;if(!(!r.touches||r.touches.length!==2||l._animatingZoom||this._zooming)){var f=l.mouseEventToContainerPoint(r.touches[0]),g=l.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(f.add(g)._divideBy(2))),this._startDist=f.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend touchcancel",this._onTouchEnd,this),Tn(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var l=this._map,f=l.mouseEventToContainerPoint(r.touches[0]),g=l.mouseEventToContainerPoint(r.touches[1]),_=f.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var S=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(_===1&&S.x===0&&S.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),xt(this._animRequest);var B=s(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=it(B,this,!0),Tn(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,xt(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});be.addInitHook("addHandler","touchZoom",Da),be.BoxZoom=sc,be.DoubleClickZoom=yi,be.Drag=kr,be.Keyboard=Vo,be.ScrollWheelZoom=eh,be.TapHold=Ia,be.TouchZoom=Da,n.Bounds=Q,n.Browser=rt,n.CRS=$t,n.Canvas=ka,n.Circle=tc,n.CircleMarker=Ca,n.Class=X,n.Control=Ki,n.DivIcon=Qu,n.DivOverlay=Yi,n.DomEvent=Hu,n.DomUtil=No,n.Draggable=cr,n.Evented=wt,n.FeatureGroup=ur,n.GeoJSON=Cr,n.GridLayer=zo,n.Handler=lr,n.Icon=zs,n.ImageOverlay=Na,n.LatLng=mt,n.LatLngBounds=ct,n.Layer=ki,n.LayerGroup=us,n.LineUtil=Yl,n.Map=be,n.Marker=hr,n.Mixin=Fs,n.Path=Gr,n.Point=P,n.PolyUtil=Af,n.Polygon=Us,n.Polyline=dr,n.Popup=Oa,n.PosAnimation=Hl,n.Projection=Jl,n.Rectangle=Sn,n.Renderer=Nr,n.SVG=Mi,n.SVGOverlay=Ju,n.TileLayer=ds,n.Tooltip=Ho,n.Transformation=he,n.Util=z,n.VideoOverlay=Fo,n.bind=s,n.bounds=et,n.canvas=Ma,n.circle=If,n.circleMarker=Mf,n.control=Bs,n.divIcon=jf,n.extend=e,n.featureGroup=Of,n.geoJSON=Xu,n.geoJson=Vs,n.gridLayer=th,n.icon=kf,n.imageOverlay=Pf,n.latLng=Nt,n.latLngBounds=Et,n.layerGroup=$u,n.map=Wn,n.marker=Po,n.point=I,n.polygon=Df,n.polyline=Gu,n.popup=Bf,n.rectangle=Ii,n.setOptions=C,n.stamp=d,n.svg=Or,n.svgOverlay=Rf,n.tileLayer=Uo,n.tooltip=ic,n.transformation=Te,n.version=t,n.videoOverlay=qf;var nh=window.L;n.noConflict=function(){return window.L=nh,this},window.L=n})});var p_=pr((bH,f_)=>{var er=-1,Ei=1,Bn=0;function uu(n,t,e,i,s){if(n===t)return n?[[Bn,n]]:[];if(e!=null){var c=Hk(n,t,e);if(c)return c}var d=Mm(n,t),m=n.substring(0,d);n=n.substring(d),t=t.substring(d),d=kd(n,t);var v=n.substring(n.length-d);n=n.substring(0,n.length-d),t=t.substring(0,t.length-d);var y=Ik(n,t);return m&&y.unshift([Bn,m]),v&&y.push([Bn,v]),Im(y,s),i&&qk(y),y}a(uu,"diff_main");function Ik(n,t){var e;if(!n)return[[Ei,t]];if(!t)return[[er,n]];var i=n.length>t.length?n:t,s=n.length>t.length?t:n,c=i.indexOf(s);if(c!==-1)return e=[[Ei,i.substring(0,c)],[Bn,s],[Ei,i.substring(c+s.length)]],n.length>t.length&&(e[0][0]=e[2][0]=er),e;if(s.length===1)return[[er,n],[Ei,t]];var d=Pk(n,t);if(d){var m=d[0],v=d[1],y=d[2],x=d[3],E=d[4],A=uu(m,y),C=uu(v,x);return A.concat([[Bn,E]],C)}return Dk(n,t)}a(Ik,"diff_compute_");function Dk(n,t){for(var e=n.length,i=t.length,s=Math.ceil((e+i)/2),c=s,d=2*s,m=new Array(d),v=new Array(d),y=0;y<d;y++)m[y]=-1,v[y]=-1;m[c+1]=0,v[c+1]=0;for(var x=e-i,E=x%2!==0,A=0,C=0,k=0,H=0,M=0;M<s;M++){for(var q=-M+A;q<=M-C;q+=2){var V=c+q,$;q===-M||q!==M&&m[V-1]<m[V+1]?$=m[V+1]:$=m[V-1]+1;for(var Y=$-q;$<e&&Y<i&&n.charAt($)===t.charAt(Y);)$++,Y++;if(m[V]=$,$>e)C+=2;else if(Y>i)A+=2;else if(E){var ot=c+x-q;if(ot>=0&&ot<d&&v[ot]!==-1){var gt=e-v[ot];if($>=gt)return r_(n,t,$,Y)}}}for(var ht=-M+k;ht<=M-H;ht+=2){var ot=c+ht,gt;ht===-M||ht!==M&&v[ot-1]<v[ot+1]?gt=v[ot+1]:gt=v[ot-1]+1;for(var j=gt-ht;gt<e&&j<i&&n.charAt(e-gt-1)===t.charAt(i-j-1);)gt++,j++;if(v[ot]=gt,gt>e)H+=2;else if(j>i)k+=2;else if(!E){var V=c+x-ht;if(V>=0&&V<d&&m[V]!==-1){var $=m[V],Y=c+$-V;if(gt=e-gt,$>=gt)return r_(n,t,$,Y)}}}}return[[er,n],[Ei,t]]}a(Dk,"diff_bisect_");function r_(n,t,e,i){var s=n.substring(0,e),c=t.substring(0,i),d=n.substring(e),m=t.substring(i),v=uu(s,c),y=uu(d,m);return v.concat(y)}a(r_,"diff_bisectSplit_");function Mm(n,t){if(!n||!t||n.charAt(0)!==t.charAt(0))return 0;for(var e=0,i=Math.min(n.length,t.length),s=i,c=0;e<s;)n.substring(c,s)==t.substring(c,s)?(e=s,c=e):i=s,s=Math.floor((i-e)/2+e);return c_(n.charCodeAt(s-1))&&s--,s}a(Mm,"diff_commonPrefix");function s_(n,t){var e=n.length,i=t.length;if(e==0||i==0)return 0;e>i?n=n.substring(e-i):e<i&&(t=t.substring(0,e));var s=Math.min(e,i);if(n==t)return s;for(var c=0,d=1;;){var m=n.substring(s-d),v=t.indexOf(m);if(v==-1)return c;d+=v,(v==0||n.substring(s-d)==t.substring(0,d))&&(c=d,d++)}}a(s_,"diff_commonOverlap_");function kd(n,t){if(!n||!t||n.slice(-1)!==t.slice(-1))return 0;for(var e=0,i=Math.min(n.length,t.length),s=i,c=0;e<s;)n.substring(n.length-s,n.length-c)==t.substring(t.length-s,t.length-c)?(e=s,c=e):i=s,s=Math.floor((i-e)/2+e);return u_(n.charCodeAt(n.length-s))&&s--,s}a(kd,"diff_commonSuffix");function Pk(n,t){var e=n.length>t.length?n:t,i=n.length>t.length?t:n;if(e.length<4||i.length*2<e.length)return null;function s(C,k,H){for(var M=C.substring(H,H+Math.floor(C.length/4)),q=-1,V="",$,Y,ot,gt;(q=k.indexOf(M,q+1))!==-1;){var ht=Mm(C.substring(H),k.substring(q)),j=kd(C.substring(0,H),k.substring(0,q));V.length<j+ht&&(V=k.substring(q-j,q)+k.substring(q,q+ht),$=C.substring(0,H-j),Y=C.substring(H+ht),ot=k.substring(0,q-j),gt=k.substring(q+ht))}return V.length*2>=C.length?[$,Y,ot,gt,V]:null}a(s,"diff_halfMatchI_");var c=s(e,i,Math.ceil(e.length/4)),d=s(e,i,Math.ceil(e.length/2)),m;if(!c&&!d)return null;d?c?m=c[4].length>d[4].length?c:d:m=d:m=c;var v,y,x,E;n.length>t.length?(v=m[0],y=m[1],x=m[2],E=m[3]):(x=m[0],E=m[1],v=m[2],y=m[3]);var A=m[4];return[v,y,x,E,A]}a(Pk,"diff_halfMatch_");function qk(n){for(var t=!1,e=[],i=0,s=null,c=0,d=0,m=0,v=0,y=0;c<n.length;)n[c][0]==Bn?(e[i++]=c,d=v,m=y,v=0,y=0,s=n[c][1]):(n[c][0]==Ei?v+=n[c][1].length:y+=n[c][1].length,s&&s.length<=Math.max(d,m)&&s.length<=Math.max(v,y)&&(n.splice(e[i-1],0,[er,s]),n[e[i-1]+1][0]=Ei,i--,i--,c=i>0?e[i-1]:-1,d=0,m=0,v=0,y=0,s=null,t=!0)),c++;for(t&&Im(n),jk(n),c=1;c<n.length;){if(n[c-1][0]==er&&n[c][0]==Ei){var x=n[c-1][1],E=n[c][1],A=s_(x,E),C=s_(E,x);A>=C?(A>=x.length/2||A>=E.length/2)&&(n.splice(c,0,[Bn,E.substring(0,A)]),n[c-1][1]=x.substring(0,x.length-A),n[c+1][1]=E.substring(A),c++):(C>=x.length/2||C>=E.length/2)&&(n.splice(c,0,[Bn,x.substring(0,C)]),n[c-1][0]=Ei,n[c-1][1]=E.substring(0,E.length-C),n[c+1][0]=er,n[c+1][1]=x.substring(C),c++),c++}c++}}a(qk,"diff_cleanupSemantic");var o_=/[^a-zA-Z0-9]/,a_=/\s/,l_=/[\r\n]/,Rk=/\n\r?\n$/,Bk=/^\r?\n\r?\n/;function jk(n){function t(C,k){if(!C||!k)return 6;var H=C.charAt(C.length-1),M=k.charAt(0),q=H.match(o_),V=M.match(o_),$=q&&H.match(a_),Y=V&&M.match(a_),ot=$&&H.match(l_),gt=Y&&M.match(l_),ht=ot&&C.match(Rk),j=gt&&k.match(Bk);return ht||j?5:ot||gt?4:q&&!$&&Y?3:$||Y?2:q||V?1:0}a(t,"diff_cleanupSemanticScore_");for(var e=1;e<n.length-1;){if(n[e-1][0]==Bn&&n[e+1][0]==Bn){var i=n[e-1][1],s=n[e][1],c=n[e+1][1],d=kd(i,s);if(d){var m=s.substring(s.length-d);i=i.substring(0,i.length-d),s=m+s.substring(0,s.length-d),c=m+c}for(var v=i,y=s,x=c,E=t(i,s)+t(s,c);s.charAt(0)===c.charAt(0);){i+=s.charAt(0),s=s.substring(1)+c.charAt(0),c=c.substring(1);var A=t(i,s)+t(s,c);A>=E&&(E=A,v=i,y=s,x=c)}n[e-1][1]!=v&&(v?n[e-1][1]=v:(n.splice(e-1,1),e--),n[e][1]=y,x?n[e+1][1]=x:(n.splice(e+1,1),e--))}e++}}a(jk,"diff_cleanupSemanticLossless");function Im(n,t){n.push([Bn,""]);for(var e=0,i=0,s=0,c="",d="",m;e<n.length;){if(e<n.length-1&&!n[e][1]){n.splice(e,1);continue}switch(n[e][0]){case Ei:s++,d+=n[e][1],e++;break;case er:i++,c+=n[e][1],e++;break;case Bn:var v=e-s-i-1;if(t){if(v>=0&&d_(n[v][1])){var y=n[v][1].slice(-1);if(n[v][1]=n[v][1].slice(0,-1),c=y+c,d=y+d,!n[v][1]){n.splice(v,1),e--;var x=v-1;n[x]&&n[x][0]===Ei&&(s++,d=n[x][1]+d,x--),n[x]&&n[x][0]===er&&(i++,c=n[x][1]+c,x--),v=x}}if(h_(n[e][1])){var y=n[e][1].charAt(0);n[e][1]=n[e][1].slice(1),c+=y,d+=y}}if(e<n.length-1&&!n[e][1]){n.splice(e,1);break}if(c.length>0||d.length>0){c.length>0&&d.length>0&&(m=Mm(d,c),m!==0&&(v>=0?n[v][1]+=d.substring(0,m):(n.splice(0,0,[Bn,d.substring(0,m)]),e++),d=d.substring(m),c=c.substring(m)),m=kd(d,c),m!==0&&(n[e][1]=d.substring(d.length-m)+n[e][1],d=d.substring(0,d.length-m),c=c.substring(0,c.length-m)));var E=s+i;c.length===0&&d.length===0?(n.splice(e-E,E),e=e-E):c.length===0?(n.splice(e-E,E,[Ei,d]),e=e-E+1):d.length===0?(n.splice(e-E,E,[er,c]),e=e-E+1):(n.splice(e-E,E,[er,c],[Ei,d]),e=e-E+2)}e!==0&&n[e-1][0]===Bn?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,s=0,i=0,c="",d="";break}}n[n.length-1][1]===""&&n.pop();var A=!1;for(e=1;e<n.length-1;)n[e-1][0]===Bn&&n[e+1][0]===Bn&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)===n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),A=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),A=!0)),e++;A&&Im(n,t)}a(Im,"diff_cleanupMerge");function c_(n){return n>=55296&&n<=56319}a(c_,"is_surrogate_pair_start");function u_(n){return n>=56320&&n<=57343}a(u_,"is_surrogate_pair_end");function h_(n){return u_(n.charCodeAt(0))}a(h_,"starts_with_pair_end");function d_(n){return c_(n.charCodeAt(n.length-1))}a(d_,"ends_with_pair_start");function Fk(n){for(var t=[],e=0;e<n.length;e++)n[e][1].length>0&&t.push(n[e]);return t}a(Fk,"remove_empty_tuples");function km(n,t,e,i){return d_(n)||h_(i)?null:Fk([[Bn,n],[er,t],[Ei,e],[Bn,i]])}a(km,"make_edit_splice");function Hk(n,t,e){var i=typeof e=="number"?{index:e,length:0}:e.oldRange,s=typeof e=="number"?null:e.newRange,c=n.length,d=t.length;if(i.length===0&&(s===null||s.length===0)){var m=i.index,v=n.slice(0,m),y=n.slice(m),x=s?s.index:null;t:{var E=m+d-c;if(x!==null&&x!==E||E<0||E>d)break t;var A=t.slice(0,E),C=t.slice(E);if(C!==y)break t;var k=Math.min(m,E),H=v.slice(0,k),M=A.slice(0,k);if(H!==M)break t;var q=v.slice(k),V=A.slice(k);return km(H,q,V,y)}t:{if(x!==null&&x!==m)break t;var $=m,A=t.slice(0,$),C=t.slice($);if(A!==v)break t;var Y=Math.min(c-$,d-$),ot=y.slice(y.length-Y),gt=C.slice(C.length-Y);if(ot!==gt)break t;var q=y.slice(0,y.length-Y),V=C.slice(0,C.length-Y);return km(v,q,V,ot)}}if(i.length>0&&s&&s.length===0)t:{var H=n.slice(0,i.index),ot=n.slice(i.index+i.length),k=H.length,Y=ot.length;if(d<k+Y)break t;var M=t.slice(0,k),gt=t.slice(d-Y);if(H!==M||ot!==gt)break t;var q=n.slice(k,c-Y),V=t.slice(k,d-Y);return km(H,q,V,ot)}return null}a(Hk,"find_cursor_edit_diff");function Md(n,t,e,i){return uu(n,t,e,i,!0)}a(Md,"diff");Md.INSERT=Ei;Md.DELETE=er;Md.EQUAL=Bn;f_.exports=Md});var Km=pr((hu,xl)=>{var zk=200,A_="__lodash_hash_undefined__",L_=9007199254740991,Hm="[object Arguments]",Uk="[object Array]",C_="[object Boolean]",N_="[object Date]",Vk="[object Error]",zm="[object Function]",O_="[object GeneratorFunction]",Id="[object Map]",k_="[object Number]",Um="[object Object]",m_="[object Promise]",M_="[object RegExp]",Dd="[object Set]",I_="[object String]",D_="[object Symbol]",Pm="[object WeakMap]",P_="[object ArrayBuffer]",Pd="[object DataView]",q_="[object Float32Array]",R_="[object Float64Array]",B_="[object Int8Array]",j_="[object Int16Array]",F_="[object Int32Array]",H_="[object Uint8Array]",z_="[object Uint8ClampedArray]",U_="[object Uint16Array]",V_="[object Uint32Array]",Wk=/[\\^$.*+?()[\]{}|]/g,Zk=/\w*$/,$k=/^\[object .+?Constructor\]$/,Kk=/^(?:0|[1-9]\d*)$/,tn={};tn[Hm]=tn[Uk]=tn[P_]=tn[Pd]=tn[C_]=tn[N_]=tn[q_]=tn[R_]=tn[B_]=tn[j_]=tn[F_]=tn[Id]=tn[k_]=tn[Um]=tn[M_]=tn[Dd]=tn[I_]=tn[D_]=tn[H_]=tn[z_]=tn[U_]=tn[V_]=!0;tn[Vk]=tn[zm]=tn[Pm]=!1;var Gk=typeof global=="object"&&global&&global.Object===Object&&global,Yk=typeof self=="object"&&self&&self.Object===Object&&self,Ss=Gk||Yk||Function("return this")(),W_=typeof hu=="object"&&hu&&!hu.nodeType&&hu,g_=W_&&typeof xl=="object"&&xl&&!xl.nodeType&&xl,Xk=g_&&g_.exports===W_;function Jk(n,t){return n.set(t[0],t[1]),n}a(Jk,"addMapEntry");function Qk(n,t){return n.add(t),n}a(Qk,"addSetEntry");function tM(n,t){for(var e=-1,i=n?n.length:0;++e<i&&t(n[e],e,n)!==!1;);return n}a(tM,"arrayEach");function eM(n,t){for(var e=-1,i=t.length,s=n.length;++e<i;)n[s+e]=t[e];return n}a(eM,"arrayPush");function Z_(n,t,e,i){var s=-1,c=n?n.length:0;for(i&&c&&(e=n[++s]);++s<c;)e=t(e,n[s],s,n);return e}a(Z_,"arrayReduce");function nM(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}a(nM,"baseTimes");function iM(n,t){return n?.[t]}a(iM,"getValue");function $_(n){var t=!1;if(n!=null&&typeof n.toString!="function")try{t=!!(n+"")}catch{}return t}a($_,"isHostObject");function v_(n){var t=-1,e=Array(n.size);return n.forEach(function(i,s){e[++t]=[s,i]}),e}a(v_,"mapToArray");function Vm(n,t){return function(e){return n(t(e))}}a(Vm,"overArg");function b_(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}a(b_,"setToArray");var rM=Array.prototype,sM=Function.prototype,qd=Object.prototype,Dm=Ss["__core-js_shared__"],y_=function(){var n=/[^.]+$/.exec(Dm&&Dm.keys&&Dm.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),K_=sM.toString,vo=qd.hasOwnProperty,Rd=qd.toString,oM=RegExp("^"+K_.call(vo).replace(Wk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),__=Xk?Ss.Buffer:void 0,w_=Ss.Symbol,x_=Ss.Uint8Array,aM=Vm(Object.getPrototypeOf,Object),lM=Object.create,cM=qd.propertyIsEnumerable,uM=rM.splice,E_=Object.getOwnPropertySymbols,hM=__?__.isBuffer:void 0,dM=Vm(Object.keys,Object),qm=Sl(Ss,"DataView"),du=Sl(Ss,"Map"),Rm=Sl(Ss,"Promise"),Bm=Sl(Ss,"Set"),jm=Sl(Ss,"WeakMap"),fu=Sl(Object,"create"),fM=da(qm),pM=da(du),mM=da(Rm),gM=da(Bm),vM=da(jm),T_=w_?w_.prototype:void 0,S_=T_?T_.valueOf:void 0;function ha(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(ha,"Hash");function bM(){this.__data__=fu?fu(null):{}}a(bM,"hashClear");function yM(n){return this.has(n)&&delete this.__data__[n]}a(yM,"hashDelete");function _M(n){var t=this.__data__;if(fu){var e=t[n];return e===A_?void 0:e}return vo.call(t,n)?t[n]:void 0}a(_M,"hashGet");function wM(n){var t=this.__data__;return fu?t[n]!==void 0:vo.call(t,n)}a(wM,"hashHas");function xM(n,t){var e=this.__data__;return e[n]=fu&&t===void 0?A_:t,this}a(xM,"hashSet");ha.prototype.clear=bM;ha.prototype.delete=yM;ha.prototype.get=_M;ha.prototype.has=wM;ha.prototype.set=xM;function As(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(As,"ListCache");function EM(){this.__data__=[]}a(EM,"listCacheClear");function TM(n){var t=this.__data__,e=Bd(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():uM.call(t,e,1),!0}a(TM,"listCacheDelete");function SM(n){var t=this.__data__,e=Bd(t,n);return e<0?void 0:t[e][1]}a(SM,"listCacheGet");function AM(n){return Bd(this.__data__,n)>-1}a(AM,"listCacheHas");function LM(n,t){var e=this.__data__,i=Bd(e,n);return i<0?e.push([n,t]):e[i][1]=t,this}a(LM,"listCacheSet");As.prototype.clear=EM;As.prototype.delete=TM;As.prototype.get=SM;As.prototype.has=AM;As.prototype.set=LM;function El(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(El,"MapCache");function CM(){this.__data__={hash:new ha,map:new(du||As),string:new ha}}a(CM,"mapCacheClear");function NM(n){return jd(this,n).delete(n)}a(NM,"mapCacheDelete");function OM(n){return jd(this,n).get(n)}a(OM,"mapCacheGet");function kM(n){return jd(this,n).has(n)}a(kM,"mapCacheHas");function MM(n,t){return jd(this,n).set(n,t),this}a(MM,"mapCacheSet");El.prototype.clear=CM;El.prototype.delete=NM;El.prototype.get=OM;El.prototype.has=kM;El.prototype.set=MM;function Tl(n){this.__data__=new As(n)}a(Tl,"Stack");function IM(){this.__data__=new As}a(IM,"stackClear");function DM(n){return this.__data__.delete(n)}a(DM,"stackDelete");function PM(n){return this.__data__.get(n)}a(PM,"stackGet");function qM(n){return this.__data__.has(n)}a(qM,"stackHas");function RM(n,t){var e=this.__data__;if(e instanceof As){var i=e.__data__;if(!du||i.length<zk-1)return i.push([n,t]),this;e=this.__data__=new El(i)}return e.set(n,t),this}a(RM,"stackSet");Tl.prototype.clear=IM;Tl.prototype.delete=DM;Tl.prototype.get=PM;Tl.prototype.has=qM;Tl.prototype.set=RM;function BM(n,t){var e=Zm(n)||lI(n)?nM(n.length,String):[],i=e.length,s=!!i;for(var c in n)(t||vo.call(n,c))&&!(s&&(c=="length"||rI(c,i)))&&e.push(c);return e}a(BM,"arrayLikeKeys");function G_(n,t,e){var i=n[t];(!(vo.call(n,t)&&Q_(i,e))||e===void 0&&!(t in n))&&(n[t]=e)}a(G_,"assignValue");function Bd(n,t){for(var e=n.length;e--;)if(Q_(n[e][0],t))return e;return-1}a(Bd,"assocIndexOf");function jM(n,t){return n&&Y_(t,$m(t),n)}a(jM,"baseAssign");function Fm(n,t,e,i,s,c,d){var m;if(i&&(m=c?i(n,s,c,d):i(n)),m!==void 0)return m;if(!Fd(n))return n;var v=Zm(n);if(v){if(m=eI(n),!t)return JM(n,m)}else{var y=ua(n),x=y==zm||y==O_;if(uI(n))return WM(n,t);if(y==Um||y==Hm||x&&!c){if($_(n))return c?n:{};if(m=nI(x?{}:n),!t)return QM(n,jM(m,n))}else{if(!tn[y])return c?n:{};m=iI(n,y,Fm,t)}}d||(d=new Tl);var E=d.get(n);if(E)return E;if(d.set(n,m),!v)var A=e?tI(n):$m(n);return tM(A||n,function(C,k){A&&(k=C,C=n[k]),G_(m,k,Fm(C,t,e,i,k,n,d))}),m}a(Fm,"baseClone");function FM(n){return Fd(n)?lM(n):{}}a(FM,"baseCreate");function HM(n,t,e){var i=t(n);return Zm(n)?i:eM(i,e(n))}a(HM,"baseGetAllKeys");function zM(n){return Rd.call(n)}a(zM,"baseGetTag");function UM(n){if(!Fd(n)||oI(n))return!1;var t=ew(n)||$_(n)?oM:$k;return t.test(da(n))}a(UM,"baseIsNative");function VM(n){if(!J_(n))return dM(n);var t=[];for(var e in Object(n))vo.call(n,e)&&e!="constructor"&&t.push(e);return t}a(VM,"baseKeys");function WM(n,t){if(t)return n.slice();var e=new n.constructor(n.length);return n.copy(e),e}a(WM,"cloneBuffer");function Wm(n){var t=new n.constructor(n.byteLength);return new x_(t).set(new x_(n)),t}a(Wm,"cloneArrayBuffer");function ZM(n,t){var e=t?Wm(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}a(ZM,"cloneDataView");function $M(n,t,e){var i=t?e(v_(n),!0):v_(n);return Z_(i,Jk,new n.constructor)}a($M,"cloneMap");function KM(n){var t=new n.constructor(n.source,Zk.exec(n));return t.lastIndex=n.lastIndex,t}a(KM,"cloneRegExp");function GM(n,t,e){var i=t?e(b_(n),!0):b_(n);return Z_(i,Qk,new n.constructor)}a(GM,"cloneSet");function YM(n){return S_?Object(S_.call(n)):{}}a(YM,"cloneSymbol");function XM(n,t){var e=t?Wm(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}a(XM,"cloneTypedArray");function JM(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}a(JM,"copyArray");function Y_(n,t,e,i){e||(e={});for(var s=-1,c=t.length;++s<c;){var d=t[s],m=i?i(e[d],n[d],d,e,n):void 0;G_(e,d,m===void 0?n[d]:m)}return e}a(Y_,"copyObject");function QM(n,t){return Y_(n,X_(n),t)}a(QM,"copySymbols");function tI(n){return HM(n,$m,X_)}a(tI,"getAllKeys");function jd(n,t){var e=n.__data__;return sI(t)?e[typeof t=="string"?"string":"hash"]:e.map}a(jd,"getMapData");function Sl(n,t){var e=iM(n,t);return UM(e)?e:void 0}a(Sl,"getNative");var X_=E_?Vm(E_,Object):fI,ua=zM;(qm&&ua(new qm(new ArrayBuffer(1)))!=Pd||du&&ua(new du)!=Id||Rm&&ua(Rm.resolve())!=m_||Bm&&ua(new Bm)!=Dd||jm&&ua(new jm)!=Pm)&&(ua=a(function(n){var t=Rd.call(n),e=t==Um?n.constructor:void 0,i=e?da(e):void 0;if(i)switch(i){case fM:return Pd;case pM:return Id;case mM:return m_;case gM:return Dd;case vM:return Pm}return t},"getTag"));function eI(n){var t=n.length,e=n.constructor(t);return t&&typeof n[0]=="string"&&vo.call(n,"index")&&(e.index=n.index,e.input=n.input),e}a(eI,"initCloneArray");function nI(n){return typeof n.constructor=="function"&&!J_(n)?FM(aM(n)):{}}a(nI,"initCloneObject");function iI(n,t,e,i){var s=n.constructor;switch(t){case P_:return Wm(n);case C_:case N_:return new s(+n);case Pd:return ZM(n,i);case q_:case R_:case B_:case j_:case F_:case H_:case z_:case U_:case V_:return XM(n,i);case Id:return $M(n,i,e);case k_:case I_:return new s(n);case M_:return KM(n);case Dd:return GM(n,i,e);case D_:return YM(n)}}a(iI,"initCloneByTag");function rI(n,t){return t=t??L_,!!t&&(typeof n=="number"||Kk.test(n))&&n>-1&&n%1==0&&n<t}a(rI,"isIndex");function sI(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}a(sI,"isKeyable");function oI(n){return!!y_&&y_ in n}a(oI,"isMasked");function J_(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||qd;return n===e}a(J_,"isPrototype");function da(n){if(n!=null){try{return K_.call(n)}catch{}try{return n+""}catch{}}return""}a(da,"toSource");function aI(n){return Fm(n,!0,!0)}a(aI,"cloneDeep");function Q_(n,t){return n===t||n!==n&&t!==t}a(Q_,"eq");function lI(n){return cI(n)&&vo.call(n,"callee")&&(!cM.call(n,"callee")||Rd.call(n)==Hm)}a(lI,"isArguments");var Zm=Array.isArray;function tw(n){return n!=null&&hI(n.length)&&!ew(n)}a(tw,"isArrayLike");function cI(n){return dI(n)&&tw(n)}a(cI,"isArrayLikeObject");var uI=hM||pI;function ew(n){var t=Fd(n)?Rd.call(n):"";return t==zm||t==O_}a(ew,"isFunction");function hI(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=L_}a(hI,"isLength");function Fd(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}a(Fd,"isObject");function dI(n){return!!n&&typeof n=="object"}a(dI,"isObjectLike");function $m(n){return tw(n)?BM(n):VM(n)}a($m,"keys");function fI(){return[]}a(fI,"stubArray");function pI(){return!1}a(pI,"stubFalse");xl.exports=aI});var og=pr((pu,Ll)=>{var mI=200,sg="__lodash_hash_undefined__",Kd=1,fw=2,pw=9007199254740991,Hd="[object Arguments]",Jm="[object Array]",gI="[object AsyncFunction]",mw="[object Boolean]",gw="[object Date]",vw="[object Error]",bw="[object Function]",vI="[object GeneratorFunction]",zd="[object Map]",yw="[object Number]",bI="[object Null]",Al="[object Object]",nw="[object Promise]",yI="[object Proxy]",_w="[object RegExp]",Ud="[object Set]",ww="[object String]",_I="[object Symbol]",wI="[object Undefined]",Qm="[object WeakMap]",xw="[object ArrayBuffer]",Vd="[object DataView]",xI="[object Float32Array]",EI="[object Float64Array]",TI="[object Int8Array]",SI="[object Int16Array]",AI="[object Int32Array]",LI="[object Uint8Array]",CI="[object Uint8ClampedArray]",NI="[object Uint16Array]",OI="[object Uint32Array]",kI=/[\\^$.*+?()[\]{}|]/g,MI=/^\[object .+?Constructor\]$/,II=/^(?:0|[1-9]\d*)$/,on={};on[xI]=on[EI]=on[TI]=on[SI]=on[AI]=on[LI]=on[CI]=on[NI]=on[OI]=!0;on[Hd]=on[Jm]=on[xw]=on[mw]=on[Vd]=on[gw]=on[vw]=on[bw]=on[zd]=on[yw]=on[Al]=on[_w]=on[Ud]=on[ww]=on[Qm]=!1;var Ew=typeof global=="object"&&global&&global.Object===Object&&global,DI=typeof self=="object"&&self&&self.Object===Object&&self,Ls=Ew||DI||Function("return this")(),Tw=typeof pu=="object"&&pu&&!pu.nodeType&&pu,iw=Tw&&typeof Ll=="object"&&Ll&&!Ll.nodeType&&Ll,Sw=iw&&iw.exports===Tw,Gm=Sw&&Ew.process,rw=function(){try{return Gm&&Gm.binding&&Gm.binding("util")}catch{}}(),sw=rw&&rw.isTypedArray;function PI(n,t){for(var e=-1,i=n==null?0:n.length,s=0,c=[];++e<i;){var d=n[e];t(d,e,n)&&(c[s++]=d)}return c}a(PI,"arrayFilter");function qI(n,t){for(var e=-1,i=t.length,s=n.length;++e<i;)n[s+e]=t[e];return n}a(qI,"arrayPush");function RI(n,t){for(var e=-1,i=n==null?0:n.length;++e<i;)if(t(n[e],e,n))return!0;return!1}a(RI,"arraySome");function BI(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}a(BI,"baseTimes");function jI(n){return function(t){return n(t)}}a(jI,"baseUnary");function FI(n,t){return n.has(t)}a(FI,"cacheHas");function HI(n,t){return n?.[t]}a(HI,"getValue");function zI(n){var t=-1,e=Array(n.size);return n.forEach(function(i,s){e[++t]=[s,i]}),e}a(zI,"mapToArray");function UI(n,t){return function(e){return n(t(e))}}a(UI,"overArg");function VI(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}a(VI,"setToArray");var WI=Array.prototype,ZI=Function.prototype,Gd=Object.prototype,Ym=Ls["__core-js_shared__"],Aw=ZI.toString,ns=Gd.hasOwnProperty,ow=function(){var n=/[^.]+$/.exec(Ym&&Ym.keys&&Ym.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Lw=Gd.toString,$I=RegExp("^"+Aw.call(ns).replace(kI,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aw=Sw?Ls.Buffer:void 0,Wd=Ls.Symbol,lw=Ls.Uint8Array,Cw=Gd.propertyIsEnumerable,KI=WI.splice,fa=Wd?Wd.toStringTag:void 0,cw=Object.getOwnPropertySymbols,GI=aw?aw.isBuffer:void 0,YI=UI(Object.keys,Object),tg=Cl(Ls,"DataView"),mu=Cl(Ls,"Map"),eg=Cl(Ls,"Promise"),ng=Cl(Ls,"Set"),ig=Cl(Ls,"WeakMap"),gu=Cl(Object,"create"),XI=ga(tg),JI=ga(mu),QI=ga(eg),tD=ga(ng),eD=ga(ig),uw=Wd?Wd.prototype:void 0,Xm=uw?uw.valueOf:void 0;function pa(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(pa,"Hash");function nD(){this.__data__=gu?gu(null):{},this.size=0}a(nD,"hashClear");function iD(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}a(iD,"hashDelete");function rD(n){var t=this.__data__;if(gu){var e=t[n];return e===sg?void 0:e}return ns.call(t,n)?t[n]:void 0}a(rD,"hashGet");function sD(n){var t=this.__data__;return gu?t[n]!==void 0:ns.call(t,n)}a(sD,"hashHas");function oD(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=gu&&t===void 0?sg:t,this}a(oD,"hashSet");pa.prototype.clear=nD;pa.prototype.delete=iD;pa.prototype.get=rD;pa.prototype.has=sD;pa.prototype.set=oD;function Cs(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(Cs,"ListCache");function aD(){this.__data__=[],this.size=0}a(aD,"listCacheClear");function lD(n){var t=this.__data__,e=Yd(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():KI.call(t,e,1),--this.size,!0}a(lD,"listCacheDelete");function cD(n){var t=this.__data__,e=Yd(t,n);return e<0?void 0:t[e][1]}a(cD,"listCacheGet");function uD(n){return Yd(this.__data__,n)>-1}a(uD,"listCacheHas");function hD(n,t){var e=this.__data__,i=Yd(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}a(hD,"listCacheSet");Cs.prototype.clear=aD;Cs.prototype.delete=lD;Cs.prototype.get=cD;Cs.prototype.has=uD;Cs.prototype.set=hD;function ma(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(ma,"MapCache");function dD(){this.size=0,this.__data__={hash:new pa,map:new(mu||Cs),string:new pa}}a(dD,"mapCacheClear");function fD(n){var t=Xd(this,n).delete(n);return this.size-=t?1:0,t}a(fD,"mapCacheDelete");function pD(n){return Xd(this,n).get(n)}a(pD,"mapCacheGet");function mD(n){return Xd(this,n).has(n)}a(mD,"mapCacheHas");function gD(n,t){var e=Xd(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}a(gD,"mapCacheSet");ma.prototype.clear=dD;ma.prototype.delete=fD;ma.prototype.get=pD;ma.prototype.has=mD;ma.prototype.set=gD;function Zd(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new ma;++t<e;)this.add(n[t])}a(Zd,"SetCache");function vD(n){return this.__data__.set(n,sg),this}a(vD,"setCacheAdd");function bD(n){return this.__data__.has(n)}a(bD,"setCacheHas");Zd.prototype.add=Zd.prototype.push=vD;Zd.prototype.has=bD;function yo(n){var t=this.__data__=new Cs(n);this.size=t.size}a(yo,"Stack");function yD(){this.__data__=new Cs,this.size=0}a(yD,"stackClear");function _D(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}a(_D,"stackDelete");function wD(n){return this.__data__.get(n)}a(wD,"stackGet");function xD(n){return this.__data__.has(n)}a(xD,"stackHas");function ED(n,t){var e=this.__data__;if(e instanceof Cs){var i=e.__data__;if(!mu||i.length<mI-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new ma(i)}return e.set(n,t),this.size=e.size,this}a(ED,"stackSet");yo.prototype.clear=yD;yo.prototype.delete=_D;yo.prototype.get=wD;yo.prototype.has=xD;yo.prototype.set=ED;function TD(n,t){var e=$d(n),i=!e&&jD(n),s=!e&&!i&&rg(n),c=!e&&!i&&!s&&Pw(n),d=e||i||s||c,m=d?BI(n.length,String):[],v=m.length;for(var y in n)(t||ns.call(n,y))&&!(d&&(y=="length"||s&&(y=="offset"||y=="parent")||c&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||DD(y,v)))&&m.push(y);return m}a(TD,"arrayLikeKeys");function Yd(n,t){for(var e=n.length;e--;)if(kw(n[e][0],t))return e;return-1}a(Yd,"assocIndexOf");function SD(n,t,e){var i=t(n);return $d(n)?i:qI(i,e(n))}a(SD,"baseGetAllKeys");function bu(n){return n==null?n===void 0?wI:bI:fa&&fa in Object(n)?MD(n):BD(n)}a(bu,"baseGetTag");function hw(n){return vu(n)&&bu(n)==Hd}a(hw,"baseIsArguments");function Nw(n,t,e,i,s){return n===t?!0:n==null||t==null||!vu(n)&&!vu(t)?n!==n&&t!==t:AD(n,t,e,i,Nw,s)}a(Nw,"baseIsEqual");function AD(n,t,e,i,s,c){var d=$d(n),m=$d(t),v=d?Jm:bo(n),y=m?Jm:bo(t);v=v==Hd?Al:v,y=y==Hd?Al:y;var x=v==Al,E=y==Al,A=v==y;if(A&&rg(n)){if(!rg(t))return!1;d=!0,x=!1}if(A&&!x)return c||(c=new yo),d||Pw(n)?Ow(n,t,e,i,s,c):OD(n,t,v,e,i,s,c);if(!(e&Kd)){var C=x&&ns.call(n,"__wrapped__"),k=E&&ns.call(t,"__wrapped__");if(C||k){var H=C?n.value():n,M=k?t.value():t;return c||(c=new yo),s(H,M,e,i,c)}}return A?(c||(c=new yo),kD(n,t,e,i,s,c)):!1}a(AD,"baseIsEqualDeep");function LD(n){if(!Dw(n)||qD(n))return!1;var t=Mw(n)?$I:MI;return t.test(ga(n))}a(LD,"baseIsNative");function CD(n){return vu(n)&&Iw(n.length)&&!!on[bu(n)]}a(CD,"baseIsTypedArray");function ND(n){if(!RD(n))return YI(n);var t=[];for(var e in Object(n))ns.call(n,e)&&e!="constructor"&&t.push(e);return t}a(ND,"baseKeys");function Ow(n,t,e,i,s,c){var d=e&Kd,m=n.length,v=t.length;if(m!=v&&!(d&&v>m))return!1;var y=c.get(n);if(y&&c.get(t))return y==t;var x=-1,E=!0,A=e&fw?new Zd:void 0;for(c.set(n,t),c.set(t,n);++x<m;){var C=n[x],k=t[x];if(i)var H=d?i(k,C,x,t,n,c):i(C,k,x,n,t,c);if(H!==void 0){if(H)continue;E=!1;break}if(A){if(!RI(t,function(M,q){if(!FI(A,q)&&(C===M||s(C,M,e,i,c)))return A.push(q)})){E=!1;break}}else if(!(C===k||s(C,k,e,i,c))){E=!1;break}}return c.delete(n),c.delete(t),E}a(Ow,"equalArrays");function OD(n,t,e,i,s,c,d){switch(e){case Vd:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case xw:return!(n.byteLength!=t.byteLength||!c(new lw(n),new lw(t)));case mw:case gw:case yw:return kw(+n,+t);case vw:return n.name==t.name&&n.message==t.message;case _w:case ww:return n==t+"";case zd:var m=zI;case Ud:var v=i&Kd;if(m||(m=VI),n.size!=t.size&&!v)return!1;var y=d.get(n);if(y)return y==t;i|=fw,d.set(n,t);var x=Ow(m(n),m(t),i,s,c,d);return d.delete(n),x;case _I:if(Xm)return Xm.call(n)==Xm.call(t)}return!1}a(OD,"equalByTag");function kD(n,t,e,i,s,c){var d=e&Kd,m=dw(n),v=m.length,y=dw(t),x=y.length;if(v!=x&&!d)return!1;for(var E=v;E--;){var A=m[E];if(!(d?A in t:ns.call(t,A)))return!1}var C=c.get(n);if(C&&c.get(t))return C==t;var k=!0;c.set(n,t),c.set(t,n);for(var H=d;++E<v;){A=m[E];var M=n[A],q=t[A];if(i)var V=d?i(q,M,A,t,n,c):i(M,q,A,n,t,c);if(!(V===void 0?M===q||s(M,q,e,i,c):V)){k=!1;break}H||(H=A=="constructor")}if(k&&!H){var $=n.constructor,Y=t.constructor;$!=Y&&"constructor"in n&&"constructor"in t&&!(typeof $=="function"&&$ instanceof $&&typeof Y=="function"&&Y instanceof Y)&&(k=!1)}return c.delete(n),c.delete(t),k}a(kD,"equalObjects");function dw(n){return SD(n,zD,ID)}a(dw,"getAllKeys");function Xd(n,t){var e=n.__data__;return PD(t)?e[typeof t=="string"?"string":"hash"]:e.map}a(Xd,"getMapData");function Cl(n,t){var e=HI(n,t);return LD(e)?e:void 0}a(Cl,"getNative");function MD(n){var t=ns.call(n,fa),e=n[fa];try{n[fa]=void 0;var i=!0}catch{}var s=Lw.call(n);return i&&(t?n[fa]=e:delete n[fa]),s}a(MD,"getRawTag");var ID=cw?function(n){return n==null?[]:(n=Object(n),PI(cw(n),function(t){return Cw.call(n,t)}))}:UD,bo=bu;(tg&&bo(new tg(new ArrayBuffer(1)))!=Vd||mu&&bo(new mu)!=zd||eg&&bo(eg.resolve())!=nw||ng&&bo(new ng)!=Ud||ig&&bo(new ig)!=Qm)&&(bo=a(function(n){var t=bu(n),e=t==Al?n.constructor:void 0,i=e?ga(e):"";if(i)switch(i){case XI:return Vd;case JI:return zd;case QI:return nw;case tD:return Ud;case eD:return Qm}return t},"getTag"));function DD(n,t){return t=t??pw,!!t&&(typeof n=="number"||II.test(n))&&n>-1&&n%1==0&&n<t}a(DD,"isIndex");function PD(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}a(PD,"isKeyable");function qD(n){return!!ow&&ow in n}a(qD,"isMasked");function RD(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Gd;return n===e}a(RD,"isPrototype");function BD(n){return Lw.call(n)}a(BD,"objectToString");function ga(n){if(n!=null){try{return Aw.call(n)}catch{}try{return n+""}catch{}}return""}a(ga,"toSource");function kw(n,t){return n===t||n!==n&&t!==t}a(kw,"eq");var jD=hw(function(){return arguments}())?hw:function(n){return vu(n)&&ns.call(n,"callee")&&!Cw.call(n,"callee")},$d=Array.isArray;function FD(n){return n!=null&&Iw(n.length)&&!Mw(n)}a(FD,"isArrayLike");var rg=GI||VD;function HD(n,t){return Nw(n,t)}a(HD,"isEqual");function Mw(n){if(!Dw(n))return!1;var t=bu(n);return t==bw||t==vI||t==gI||t==yI}a(Mw,"isFunction");function Iw(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=pw}a(Iw,"isLength");function Dw(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}a(Dw,"isObject");function vu(n){return n!=null&&typeof n=="object"}a(vu,"isObjectLike");var Pw=sw?jI(sw):CD;function zD(n){return FD(n)?TD(n):ND(n)}a(zD,"keys");function UD(){return[]}a(UD,"stubArray");function VD(){return!1}a(VD,"stubFalse");Ll.exports=HD});var qw=pr(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});var WD=Km(),ZD=og(),ag;(function(n){function t(c={},d={},m=!1){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});let v=WD(d);m||(v=Object.keys(v).reduce((y,x)=>(v[x]!=null&&(y[x]=v[x]),y),{}));for(let y in c)c[y]!==void 0&&d[y]===void 0&&(v[y]=c[y]);return Object.keys(v).length>0?v:void 0}a(t,"compose"),n.compose=t;function e(c={},d={}){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});let m=Object.keys(c).concat(Object.keys(d)).reduce((v,y)=>(ZD(c[y],d[y])||(v[y]=d[y]===void 0?null:d[y]),v),{});return Object.keys(m).length>0?m:void 0}a(e,"diff"),n.diff=e;function i(c={},d={}){c=c||{};let m=Object.keys(d).reduce((v,y)=>(d[y]!==c[y]&&c[y]!==void 0&&(v[y]=d[y]),v),{});return Object.keys(c).reduce((v,y)=>(c[y]!==d[y]&&d[y]===void 0&&(v[y]=null),v),m)}a(i,"invert"),n.invert=i;function s(c,d,m=!1){if(typeof c!="object")return d;if(typeof d!="object")return;if(!m)return d;let v=Object.keys(d).reduce((y,x)=>(c[x]===void 0&&(y[x]=d[x]),y),{});return Object.keys(v).length>0?v:void 0}a(s,"transform"),n.transform=s})(ag||(ag={}));lg.default=ag});var hg=pr(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});var cg;(function(n){function t(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}a(t,"length"),n.length=t})(cg||(cg={}));ug.default=cg});var Bw=pr(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});var Rw=hg(),dg=class{static{a(this,"Iterator")}constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);let e=this.ops[this.index];if(e){let i=this.offset,s=Rw.default.length(e);if(t>=s-i?(t=s-i,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};{let c={};return e.attributes&&(c.attributes=e.attributes),typeof e.retain=="number"?c.retain=t:typeof e.retain=="object"&&e.retain!==null?c.retain=e.retain:typeof e.insert=="string"?c.insert=e.insert.substr(i,t):c.insert=e.insert,c}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Rw.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let t=this.offset,e=this.index,i=this.next(),s=this.ops.slice(this.index);return this.offset=t,this.index=e,[i].concat(s)}}else return[]}};fg.default=dg});var nr=pr((Os,Qd)=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.AttributeMap=Os.OpIterator=Os.Op=void 0;var Jd=p_(),$D=Km(),pg=og(),va=qw();Os.AttributeMap=va.default;var Ns=hg();Os.Op=Ns.default;var yr=Bw();Os.OpIterator=yr.default;var KD="\0",jw=a((n,t)=>{if(typeof n!="object"||n===null)throw new Error(`cannot retain a ${typeof n}`);if(typeof t!="object"||t===null)throw new Error(`cannot retain a ${typeof t}`);let e=Object.keys(n)[0];if(!e||e!==Object.keys(t)[0])throw new Error(`embed types not matched: ${e} != ${Object.keys(t)[0]}`);return[e,n[e],t[e]]},"getEmbedTypeAndData"),ks=class n{static{a(this,"Delta")}constructor(t){Array.isArray(t)?this.ops=t:t!=null&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){let e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){let i={};return typeof t=="string"&&t.length===0?this:(i.insert=t,e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if(typeof t=="number"&&t<=0)return this;let i={retain:t};return e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)}push(t){let e=this.ops.length,i=this.ops[e-1];if(t=$D(t),typeof i=="object"){if(typeof t.delete=="number"&&typeof i.delete=="number")return this.ops[e-1]={delete:i.delete+t.delete},this;if(typeof i.delete=="number"&&t.insert!=null&&(e-=1,i=this.ops[e-1],typeof i!="object"))return this.ops.unshift(t),this;if(pg(t.attributes,i.attributes)){if(typeof t.insert=="string"&&typeof i.insert=="string")return this.ops[e-1]={insert:i.insert+t.insert},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this;if(typeof t.retain=="number"&&typeof i.retain=="number")return this.ops[e-1]={retain:i.retain+t.retain},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){let t=this.ops[this.ops.length-1];return t&&typeof t.retain=="number"&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){let e=[],i=[];return this.forEach(s=>{(t(s)?e:i).push(s)}),[e,i]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce((t,e)=>e.insert?t+Ns.default.length(e):e.delete?t-e.delete:t,0)}length(){return this.reduce((t,e)=>t+Ns.default.length(e),0)}slice(t=0,e=1/0){let i=[],s=new yr.default(this.ops),c=0;for(;c<e&&s.hasNext();){let d;c<t?d=s.next(t-c):(d=s.next(e-c),i.push(d)),c+=Ns.default.length(d)}return new n(i)}compose(t){let e=new yr.default(this.ops),i=new yr.default(t.ops),s=[],c=i.peek();if(c!=null&&typeof c.retain=="number"&&c.attributes==null){let m=c.retain;for(;e.peekType()==="insert"&&e.peekLength()<=m;)m-=e.peekLength(),s.push(e.next());c.retain-m>0&&i.next(c.retain-m)}let d=new n(s);for(;e.hasNext()||i.hasNext();)if(i.peekType()==="insert")d.push(i.next());else if(e.peekType()==="delete")d.push(e.next());else{let m=Math.min(e.peekLength(),i.peekLength()),v=e.next(m),y=i.next(m);if(y.retain){let x={};if(typeof v.retain=="number")x.retain=typeof y.retain=="number"?m:y.retain;else if(typeof y.retain=="number")v.retain==null?x.insert=v.insert:x.retain=v.retain;else{let A=v.retain==null?"insert":"retain",[C,k,H]=jw(v[A],y.retain),M=n.getHandler(C);x[A]={[C]:M.compose(k,H,A==="retain")}}let E=va.default.compose(v.attributes,y.attributes,typeof v.retain=="number");if(E&&(x.attributes=E),d.push(x),!i.hasNext()&&pg(d.ops[d.ops.length-1],x)){let A=new n(e.rest());return d.concat(A).chop()}}else typeof y.delete=="number"&&(typeof v.retain=="number"||typeof v.retain=="object"&&v.retain!==null)&&d.push(y)}return d.chop()}concat(t){let e=new n(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new n;let i=[this,t].map(v=>v.map(y=>{if(y.insert!=null)return typeof y.insert=="string"?y.insert:KD;let x=v===t?"on":"with";throw new Error("diff() called "+x+" non-document")}).join("")),s=new n,c=Jd(i[0],i[1],e,!0),d=new yr.default(this.ops),m=new yr.default(t.ops);return c.forEach(v=>{let y=v[1].length;for(;y>0;){let x=0;switch(v[0]){case Jd.INSERT:x=Math.min(m.peekLength(),y),s.push(m.next(x));break;case Jd.DELETE:x=Math.min(y,d.peekLength()),d.next(x),s.delete(x);break;case Jd.EQUAL:x=Math.min(d.peekLength(),m.peekLength(),y);let E=d.next(x),A=m.next(x);pg(E.insert,A.insert)?s.retain(x,va.default.diff(E.attributes,A.attributes)):s.push(A).delete(x);break}y-=x}}),s.chop()}eachLine(t,e=`
`){let i=new yr.default(this.ops),s=new n,c=0;for(;i.hasNext();){if(i.peekType()!=="insert")return;let d=i.peek(),m=Ns.default.length(d)-i.peekLength(),v=typeof d.insert=="string"?d.insert.indexOf(e,m)-m:-1;if(v<0)s.push(i.next());else if(v>0)s.push(i.next(v));else{if(t(s,i.next(1).attributes||{},c)===!1)return;c+=1,s=new n}}s.length()>0&&t(s,{},c)}invert(t){let e=new n;return this.reduce((i,s)=>{if(s.insert)e.delete(Ns.default.length(s));else{if(typeof s.retain=="number"&&s.attributes==null)return e.retain(s.retain),i+s.retain;if(s.delete||typeof s.retain=="number"){let c=s.delete||s.retain;return t.slice(i,i+c).forEach(m=>{s.delete?e.push(m):s.retain&&s.attributes&&e.retain(Ns.default.length(m),va.default.invert(s.attributes,m.attributes))}),i+c}else if(typeof s.retain=="object"&&s.retain!==null){let c=t.slice(i,i+1),d=new yr.default(c.ops).next(),[m,v,y]=jw(s.retain,d.insert),x=n.getHandler(m);return e.retain({[m]:x.invert(v,y)},va.default.invert(s.attributes,d.attributes)),i+1}}return i},0),e.chop()}transform(t,e=!1){if(e=!!e,typeof t=="number")return this.transformPosition(t,e);let i=t,s=new yr.default(this.ops),c=new yr.default(i.ops),d=new n;for(;s.hasNext()||c.hasNext();)if(s.peekType()==="insert"&&(e||c.peekType()!=="insert"))d.retain(Ns.default.length(s.next()));else if(c.peekType()==="insert")d.push(c.next());else{let m=Math.min(s.peekLength(),c.peekLength()),v=s.next(m),y=c.next(m);if(v.delete)continue;if(y.delete)d.push(y);else{let x=v.retain,E=y.retain,A=typeof E=="object"&&E!==null?E:m;if(typeof x=="object"&&x!==null&&typeof E=="object"&&E!==null){let C=Object.keys(x)[0];if(C===Object.keys(E)[0]){let k=n.getHandler(C);k&&(A={[C]:k.transform(x[C],E[C],e)})}}d.retain(A,va.default.transform(v.attributes,y.attributes,e))}}return d.chop()}transformPosition(t,e=!1){e=!!e;let i=new yr.default(this.ops),s=0;for(;i.hasNext()&&s<=t;){let c=i.peekLength(),d=i.peekType();if(i.next(),d==="delete"){t-=Math.min(c,t-s);continue}else d==="insert"&&(s<t||!e)&&(t+=c);s+=c}return t}};ks.Op=Ns.default;ks.OpIterator=yr.default;ks.AttributeMap=va.default;ks.handlers={};Os.default=ks;typeof Qd=="object"&&(Qd.exports=ks,Qd.exports.default=ks)});var zw=pr((YH,yg)=>{"use strict";var GD=Object.prototype.hasOwnProperty,Ti="~";function _u(){}a(_u,"Events");Object.create&&(_u.prototype=Object.create(null),new _u().__proto__||(Ti=!1));function YD(n,t,e){this.fn=n,this.context=t,this.once=e||!1}a(YD,"EE");function Hw(n,t,e,i,s){if(typeof e!="function")throw new TypeError("The listener must be a function");var c=new YD(e,i||n,s),d=Ti?Ti+t:t;return n._events[d]?n._events[d].fn?n._events[d]=[n._events[d],c]:n._events[d].push(c):(n._events[d]=c,n._eventsCount++),n}a(Hw,"addListener");function tf(n,t){--n._eventsCount===0?n._events=new _u:delete n._events[t]}a(tf,"clearEvent");function ui(){this._events=new _u,this._eventsCount=0}a(ui,"EventEmitter");ui.prototype.eventNames=a(function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)GD.call(e,i)&&t.push(Ti?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t},"eventNames");ui.prototype.listeners=a(function(t){var e=Ti?Ti+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,c=i.length,d=new Array(c);s<c;s++)d[s]=i[s].fn;return d},"listeners");ui.prototype.listenerCount=a(function(t){var e=Ti?Ti+t:t,i=this._events[e];return i?i.fn?1:i.length:0},"listenerCount");ui.prototype.emit=a(function(t,e,i,s,c,d){var m=Ti?Ti+t:t;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,x,E;if(v.fn){switch(v.once&&this.removeListener(t,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,e),!0;case 3:return v.fn.call(v.context,e,i),!0;case 4:return v.fn.call(v.context,e,i,s),!0;case 5:return v.fn.call(v.context,e,i,s,c),!0;case 6:return v.fn.call(v.context,e,i,s,c,d),!0}for(E=1,x=new Array(y-1);E<y;E++)x[E-1]=arguments[E];v.fn.apply(v.context,x)}else{var A=v.length,C;for(E=0;E<A;E++)switch(v[E].once&&this.removeListener(t,v[E].fn,void 0,!0),y){case 1:v[E].fn.call(v[E].context);break;case 2:v[E].fn.call(v[E].context,e);break;case 3:v[E].fn.call(v[E].context,e,i);break;case 4:v[E].fn.call(v[E].context,e,i,s);break;default:if(!x)for(C=1,x=new Array(y-1);C<y;C++)x[C-1]=arguments[C];v[E].fn.apply(v[E].context,x)}}return!0},"emit");ui.prototype.on=a(function(t,e,i){return Hw(this,t,e,i,!1)},"on");ui.prototype.once=a(function(t,e,i){return Hw(this,t,e,i,!0)},"once");ui.prototype.removeListener=a(function(t,e,i,s){var c=Ti?Ti+t:t;if(!this._events[c])return this;if(!e)return tf(this,c),this;var d=this._events[c];if(d.fn)d.fn===e&&(!s||d.once)&&(!i||d.context===i)&&tf(this,c);else{for(var m=0,v=[],y=d.length;m<y;m++)(d[m].fn!==e||s&&!d[m].once||i&&d[m].context!==i)&&v.push(d[m]);v.length?this._events[c]=v.length===1?v[0]:v:tf(this,c)}return this},"removeListener");ui.prototype.removeAllListeners=a(function(t){var e;return t?(e=Ti?Ti+t:t,this._events[e]&&tf(this,e)):(this._events=new _u,this._eventsCount=0),this},"removeAllListeners");ui.prototype.off=ui.prototype.removeListener;ui.prototype.addListener=ui.prototype.on;ui.prefixed=Ti;ui.EventEmitter=ui;typeof yg<"u"&&(yg.exports=ui)});var Ux=pr((di,Ai)=>{(function(n,t){if(typeof di=="object"&&typeof Ai=="object")Ai.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e=t();for(var i in e)(typeof di=="object"?di:n)[i]=e[i]}})(self,()=>(()=>{var n={64:(i,s,c)=>{(i.exports=c(765)(!1)).push([i.id,`.ql-html-overlayContainer {
  background: #0000007d;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
}

.ql-html-popupContainer {
  background: #ddd;
  position: absolute;
  top: 5%;
  left: 5%;
  right: 5%;
  bottom: 5%;
  border-radius: 10px;
}

.ql-html-textContainer {
  position: relative;
  height: calc(100% - 40px);
  padding: 20px;
}

.ql-html-textArea {
  background: #fff;
  position: absolute;
  left: 15px;
  width: calc(100% - 30px);
  height: calc(100% - 60px) !important;
}

.ql-html-textArea .ql-syntax {
  word-break: break-all;
  white-space: pre-wrap;
}

.ql-html-buttonCancel {
  margin-right: 20px;
}

.ql-html-popupTitle {
  margin: 0;
  display: block;
  font-style: italic;
}

.ql-html-buttonGroup {
  position: absolute;
  bottom: 20px;
  transform: scale(1.5);
  left: calc(50% - 60px);
}
`,""])},765:i=>{i.exports=function(s){var c=[];return c.toString=function(){return this.map(function(d){var m=function(v,y){var x=v[1]||"",E=v[3];if(!E)return x;if(y&&typeof btoa=="function"){var A=(k=E,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(k))))+" */"),C=E.sources.map(function(H){return"/*# sourceURL="+E.sourceRoot+H+" */"});return[x].concat(C).concat([A]).join(`
`)}var k;return[x].join(`
`)}(d,s);return d[2]?"@media "+d[2]+"{"+m+"}":m}).join("")},c.i=function(d,m){typeof d=="string"&&(d=[[null,d,""]]);for(var v={},y=0;y<this.length;y++){var x=this[y][0];typeof x=="number"&&(v[x]=!0)}for(y=0;y<d.length;y++){var E=d[y];typeof E[0]=="number"&&v[E[0]]||(m&&!E[2]?E[2]=m:m&&(E[2]="("+E[2]+") and ("+m+")"),c.push(E))}},c}},228:i=>{"use strict";var s=Object.prototype.hasOwnProperty,c="~";function d(){}a(d,"r");function m(E,A,C){this.fn=E,this.context=A,this.once=C||!1}a(m,"s");function v(E,A,C,k,H){if(typeof C!="function")throw new TypeError("The listener must be a function");var M=new m(C,k||E,H),q=c?c+A:A;return E._events[q]?E._events[q].fn?E._events[q]=[E._events[q],M]:E._events[q].push(M):(E._events[q]=M,E._eventsCount++),E}a(v,"i");function y(E,A){--E._eventsCount==0?E._events=new d:delete E._events[A]}a(y,"o");function x(){this._events=new d,this._eventsCount=0}a(x,"l"),Object.create&&(d.prototype=Object.create(null),new d().__proto__||(c=!1)),x.prototype.eventNames=function(){var E,A,C=[];if(this._eventsCount===0)return C;for(A in E=this._events)s.call(E,A)&&C.push(c?A.slice(1):A);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(E)):C},x.prototype.listeners=function(E){var A=c?c+E:E,C=this._events[A];if(!C)return[];if(C.fn)return[C.fn];for(var k=0,H=C.length,M=new Array(H);k<H;k++)M[k]=C[k].fn;return M},x.prototype.listenerCount=function(E){var A=c?c+E:E,C=this._events[A];return C?C.fn?1:C.length:0},x.prototype.emit=function(E,A,C,k,H,M){var q=c?c+E:E;if(!this._events[q])return!1;var V,$,Y=this._events[q],ot=arguments.length;if(Y.fn){switch(Y.once&&this.removeListener(E,Y.fn,void 0,!0),ot){case 1:return Y.fn.call(Y.context),!0;case 2:return Y.fn.call(Y.context,A),!0;case 3:return Y.fn.call(Y.context,A,C),!0;case 4:return Y.fn.call(Y.context,A,C,k),!0;case 5:return Y.fn.call(Y.context,A,C,k,H),!0;case 6:return Y.fn.call(Y.context,A,C,k,H,M),!0}for($=1,V=new Array(ot-1);$<ot;$++)V[$-1]=arguments[$];Y.fn.apply(Y.context,V)}else{var gt,ht=Y.length;for($=0;$<ht;$++)switch(Y[$].once&&this.removeListener(E,Y[$].fn,void 0,!0),ot){case 1:Y[$].fn.call(Y[$].context);break;case 2:Y[$].fn.call(Y[$].context,A);break;case 3:Y[$].fn.call(Y[$].context,A,C);break;case 4:Y[$].fn.call(Y[$].context,A,C,k);break;default:if(!V)for(gt=1,V=new Array(ot-1);gt<ot;gt++)V[gt-1]=arguments[gt];Y[$].fn.apply(Y[$].context,V)}}return!0},x.prototype.on=function(E,A,C){return v(this,E,A,C,!1)},x.prototype.once=function(E,A,C){return v(this,E,A,C,!0)},x.prototype.removeListener=function(E,A,C,k){var H=c?c+E:E;if(!this._events[H])return this;if(!A)return y(this,H),this;var M=this._events[H];if(M.fn)M.fn!==A||k&&!M.once||C&&M.context!==C||y(this,H);else{for(var q=0,V=[],$=M.length;q<$;q++)(M[q].fn!==A||k&&!M[q].once||C&&M[q].context!==C)&&V.push(M[q]);V.length?this._events[H]=V.length===1?V[0]:V:y(this,H)}return this},x.prototype.removeAllListeners=function(E){var A;return E?(A=c?c+E:E,this._events[A]&&y(this,A)):(this._events=new d,this._eventsCount=0),this},x.prototype.off=x.prototype.removeListener,x.prototype.addListener=x.prototype.on,x.prefixed=c,x.EventEmitter=x,i.exports=x},606:i=>{var s=-1,c=1,d=0;function m(j,it,xt,z,X){if(j===it)return j?[[d,j]]:[];if(xt!=null){var ft=function(I,Q,et){var ct=typeof et=="number"?{index:et,length:0}:et.oldRange,Et=typeof et=="number"?null:et.newRange,mt=I.length,Nt=Q.length;if(ct.length===0&&(Et===null||Et.length===0)){var $t=ct.index,Vt=I.slice(0,$t),te=I.slice($t),se=Et?Et.index:null,he=$t+Nt-mt;if((se===null||se===he)&&!(he<0||he>Nt)){var Te=Q.slice(0,he);if((ye=Q.slice(he))===te){var fe=Math.min($t,he);if((ie=Vt.slice(0,fe))===(Jt=Te.slice(0,fe)))return gt(ie,Vt.slice(fe),Te.slice(fe),te)}}if(se===null||se===$t){var Gt=$t,ye=(Te=Q.slice(0,Gt),Q.slice(Gt));if(Te===Vt){var zt=Math.min(mt-Gt,Nt-Gt);if((Yt=te.slice(te.length-zt))===(Se=ye.slice(ye.length-zt)))return gt(Vt,te.slice(0,te.length-zt),ye.slice(0,ye.length-zt),Yt)}}}if(ct.length>0&&Et&&Et.length===0){var ie=I.slice(0,ct.index),Yt=I.slice(ct.index+ct.length);if(!(Nt<(fe=ie.length)+(zt=Yt.length))){var Jt=Q.slice(0,fe),Se=Q.slice(Nt-zt);if(ie===Jt&&Yt===Se)return gt(ie,I.slice(fe,mt-zt),Q.slice(fe,Nt-zt),Yt)}}return null}(j,it,xt);if(ft)return ft}var st=y(j,it),wt=j.substring(0,st);st=E(j=j.substring(st),it=it.substring(st));var P=j.substring(j.length-st),U=function(I,Q){var et;if(!I)return[[c,Q]];if(!Q)return[[s,I]];var ct=I.length>Q.length?I:Q,Et=I.length>Q.length?Q:I,mt=ct.indexOf(Et);if(mt!==-1)return et=[[c,ct.substring(0,mt)],[d,Et],[c,ct.substring(mt+Et.length)]],I.length>Q.length&&(et[0][0]=et[2][0]=s),et;if(Et.length===1)return[[s,I],[c,Q]];var Nt=function(Gt,ye){var zt=Gt.length>ye.length?Gt:ye,ie=Gt.length>ye.length?ye:Gt;if(zt.length<4||2*ie.length<zt.length)return null;function Yt(Ae,Ue,an){for(var me,Ve,Ye,Xe,He=Ae.substring(an,an+Math.floor(Ae.length/4)),oe=-1,Le="";(oe=Ue.indexOf(He,oe+1))!==-1;){var Zt=y(Ae.substring(an),Ue.substring(oe)),de=E(Ae.substring(0,an),Ue.substring(0,oe));Le.length<de+Zt&&(Le=Ue.substring(oe-de,oe)+Ue.substring(oe,oe+Zt),me=Ae.substring(0,an-de),Ve=Ae.substring(an+Zt),Ye=Ue.substring(0,oe-de),Xe=Ue.substring(oe+Zt))}return 2*Le.length>=Ae.length?[me,Ve,Ye,Xe,Le]:null}a(Yt,"s");var Jt,Se,ce,Oe,De,ze=Yt(zt,ie,Math.ceil(zt.length/4)),hn=Yt(zt,ie,Math.ceil(zt.length/2));if(!ze&&!hn)return null;Jt=hn?ze&&ze[4].length>hn[4].length?ze:hn:ze,Gt.length>ye.length?(Se=Jt[0],ce=Jt[1],Oe=Jt[2],De=Jt[3]):(Oe=Jt[0],De=Jt[1],Se=Jt[2],ce=Jt[3]);var Be=Jt[4];return[Se,ce,Oe,De,Be]}(I,Q);if(Nt){var $t=Nt[0],Vt=Nt[1],te=Nt[2],se=Nt[3],he=Nt[4],Te=m($t,te),fe=m(Vt,se);return Te.concat([[d,he]],fe)}return function(Gt,ye){for(var zt=Gt.length,ie=ye.length,Yt=Math.ceil((zt+ie)/2),Jt=Yt,Se=2*Yt,ce=new Array(Se),Oe=new Array(Se),De=0;De<Se;De++)ce[De]=-1,Oe[De]=-1;ce[Jt+1]=0,Oe[Jt+1]=0;for(var ze=zt-ie,hn=ze%2!=0,Be=0,Ae=0,Ue=0,an=0,me=0;me<Yt;me++){for(var Ve=-me+Be;Ve<=me-Ae;Ve+=2){for(var Ye=Jt+Ve,Xe=(de=Ve===-me||Ve!==me&&ce[Ye-1]<ce[Ye+1]?ce[Ye+1]:ce[Ye-1]+1)-Ve;de<zt&&Xe<ie&&Gt.charAt(de)===ye.charAt(Xe);)de++,Xe++;if(ce[Ye]=de,de>zt)Ae+=2;else if(Xe>ie)Be+=2;else if(hn&&(Le=Jt+ze-Ve)>=0&&Le<Se&&Oe[Le]!==-1&&de>=(oe=zt-Oe[Le]))return v(Gt,ye,de,Xe)}for(var He=-me+Ue;He<=me-an;He+=2){for(var oe,Le=Jt+He,Zt=(oe=He===-me||He!==me&&Oe[Le-1]<Oe[Le+1]?Oe[Le+1]:Oe[Le-1]+1)-He;oe<zt&&Zt<ie&&Gt.charAt(zt-oe-1)===ye.charAt(ie-Zt-1);)oe++,Zt++;if(Oe[Le]=oe,oe>zt)an+=2;else if(Zt>ie)Ue+=2;else if(!hn&&(Ye=Jt+ze-He)>=0&&Ye<Se&&ce[Ye]!==-1){var de;if(Xe=Jt+(de=ce[Ye])-Ye,de>=(oe=zt-oe))return v(Gt,ye,de,Xe)}}}return[[s,Gt],[c,ye]]}(I,Q)}(j=j.substring(0,j.length-st),it=it.substring(0,it.length-st));return wt&&U.unshift([d,wt]),P&&U.push([d,P]),q(U,X),z&&function(I){for(var Q=!1,et=[],ct=0,Et=null,mt=0,Nt=0,$t=0,Vt=0,te=0;mt<I.length;)I[mt][0]==d?(et[ct++]=mt,Nt=Vt,$t=te,Vt=0,te=0,Et=I[mt][1]):(I[mt][0]==c?Vt+=I[mt][1].length:te+=I[mt][1].length,Et&&Et.length<=Math.max(Nt,$t)&&Et.length<=Math.max(Vt,te)&&(I.splice(et[ct-1],0,[s,Et]),I[et[ct-1]+1][0]=c,ct--,mt=--ct>0?et[ct-1]:-1,Nt=0,$t=0,Vt=0,te=0,Et=null,Q=!0)),mt++;for(Q&&q(I),function(Gt){function ye(Ae,Ue){if(!Ae||!Ue)return 6;var an=Ae.charAt(Ae.length-1),me=Ue.charAt(0),Ve=an.match(A),Ye=me.match(A),Xe=Ve&&an.match(C),He=Ye&&me.match(C),oe=Xe&&an.match(k),Le=He&&me.match(k),Zt=oe&&Ae.match(H),de=Le&&Ue.match(M);return Zt||de?5:oe||Le?4:Ve&&!Xe&&He?3:Xe||He?2:Ve||Ye?1:0}a(ye,"e");for(var zt=1;zt<Gt.length-1;){if(Gt[zt-1][0]==d&&Gt[zt+1][0]==d){var ie=Gt[zt-1][1],Yt=Gt[zt][1],Jt=Gt[zt+1][1],Se=E(ie,Yt);if(Se){var ce=Yt.substring(Yt.length-Se);ie=ie.substring(0,ie.length-Se),Yt=ce+Yt.substring(0,Yt.length-Se),Jt=ce+Jt}for(var Oe=ie,De=Yt,ze=Jt,hn=ye(ie,Yt)+ye(Yt,Jt);Yt.charAt(0)===Jt.charAt(0);){ie+=Yt.charAt(0),Yt=Yt.substring(1)+Jt.charAt(0),Jt=Jt.substring(1);var Be=ye(ie,Yt)+ye(Yt,Jt);Be>=hn&&(hn=Be,Oe=ie,De=Yt,ze=Jt)}Gt[zt-1][1]!=Oe&&(Oe?Gt[zt-1][1]=Oe:(Gt.splice(zt-1,1),zt--),Gt[zt][1]=De,ze?Gt[zt+1][1]=ze:(Gt.splice(zt+1,1),zt--))}zt++}}(I),mt=1;mt<I.length;){if(I[mt-1][0]==s&&I[mt][0]==c){var se=I[mt-1][1],he=I[mt][1],Te=x(se,he),fe=x(he,se);Te>=fe?(Te>=se.length/2||Te>=he.length/2)&&(I.splice(mt,0,[d,he.substring(0,Te)]),I[mt-1][1]=se.substring(0,se.length-Te),I[mt+1][1]=he.substring(Te),mt++):(fe>=se.length/2||fe>=he.length/2)&&(I.splice(mt,0,[d,se.substring(0,fe)]),I[mt-1][0]=c,I[mt-1][1]=he.substring(0,he.length-fe),I[mt+1][0]=s,I[mt+1][1]=se.substring(fe),mt++),mt++}mt++}}(U),U}a(m,"s");function v(j,it,xt,z){var X=j.substring(0,xt),ft=it.substring(0,z),st=j.substring(xt),wt=it.substring(z),P=m(X,ft),U=m(st,wt);return P.concat(U)}a(v,"i");function y(j,it){if(!j||!it||j.charAt(0)!==it.charAt(0))return 0;for(var xt=0,z=Math.min(j.length,it.length),X=z,ft=0;xt<X;)j.substring(ft,X)==it.substring(ft,X)?ft=xt=X:z=X,X=Math.floor((z-xt)/2+xt);return V(j.charCodeAt(X-1))&&X--,X}a(y,"o");function x(j,it){var xt=j.length,z=it.length;if(xt==0||z==0)return 0;xt>z?j=j.substring(xt-z):xt<z&&(it=it.substring(0,xt));var X=Math.min(xt,z);if(j==it)return X;for(var ft=0,st=1;;){var wt=j.substring(X-st),P=it.indexOf(wt);if(P==-1)return ft;st+=P,P!=0&&j.substring(X-st)!=it.substring(0,st)||(ft=st,st++)}}a(x,"l");function E(j,it){if(!j||!it||j.slice(-1)!==it.slice(-1))return 0;for(var xt=0,z=Math.min(j.length,it.length),X=z,ft=0;xt<X;)j.substring(j.length-X,j.length-ft)==it.substring(it.length-X,it.length-ft)?ft=xt=X:z=X,X=Math.floor((z-xt)/2+xt);return $(j.charCodeAt(j.length-X))&&X--,X}a(E,"a");var A=/[^a-zA-Z0-9]/,C=/\s/,k=/[\r\n]/,H=/\n\r?\n$/,M=/^\r?\n\r?\n/;function q(j,it){j.push([d,""]);for(var xt,z=0,X=0,ft=0,st="",wt="";z<j.length;)if(z<j.length-1&&!j[z][1])j.splice(z,1);else switch(j[z][0]){case c:ft++,wt+=j[z][1],z++;break;case s:X++,st+=j[z][1],z++;break;case d:var P=z-ft-X-1;if(it){if(P>=0&&ot(j[P][1])){var U=j[P][1].slice(-1);if(j[P][1]=j[P][1].slice(0,-1),st=U+st,wt=U+wt,!j[P][1]){j.splice(P,1),z--;var I=P-1;j[I]&&j[I][0]===c&&(ft++,wt=j[I][1]+wt,I--),j[I]&&j[I][0]===s&&(X++,st=j[I][1]+st,I--),P=I}}Y(j[z][1])&&(U=j[z][1].charAt(0),j[z][1]=j[z][1].slice(1),st+=U,wt+=U)}if(z<j.length-1&&!j[z][1]){j.splice(z,1);break}if(st.length>0||wt.length>0){st.length>0&&wt.length>0&&((xt=y(wt,st))!==0&&(P>=0?j[P][1]+=wt.substring(0,xt):(j.splice(0,0,[d,wt.substring(0,xt)]),z++),wt=wt.substring(xt),st=st.substring(xt)),(xt=E(wt,st))!==0&&(j[z][1]=wt.substring(wt.length-xt)+j[z][1],wt=wt.substring(0,wt.length-xt),st=st.substring(0,st.length-xt)));var Q=ft+X;st.length===0&&wt.length===0?(j.splice(z-Q,Q),z-=Q):st.length===0?(j.splice(z-Q,Q,[c,wt]),z=z-Q+1):wt.length===0?(j.splice(z-Q,Q,[s,st]),z=z-Q+1):(j.splice(z-Q,Q,[s,st],[c,wt]),z=z-Q+2)}z!==0&&j[z-1][0]===d?(j[z-1][1]+=j[z][1],j.splice(z,1)):z++,ft=0,X=0,st="",wt=""}j[j.length-1][1]===""&&j.pop();var et=!1;for(z=1;z<j.length-1;)j[z-1][0]===d&&j[z+1][0]===d&&(j[z][1].substring(j[z][1].length-j[z-1][1].length)===j[z-1][1]?(j[z][1]=j[z-1][1]+j[z][1].substring(0,j[z][1].length-j[z-1][1].length),j[z+1][1]=j[z-1][1]+j[z+1][1],j.splice(z-1,1),et=!0):j[z][1].substring(0,j[z+1][1].length)==j[z+1][1]&&(j[z-1][1]+=j[z+1][1],j[z][1]=j[z][1].substring(j[z+1][1].length)+j[z+1][1],j.splice(z+1,1),et=!0)),z++;et&&q(j,it)}a(q,"p");function V(j){return j>=55296&&j<=56319}a(V,"g");function $(j){return j>=56320&&j<=57343}a($,"m");function Y(j){return $(j.charCodeAt(0))}a(Y,"b");function ot(j){return V(j.charCodeAt(j.length-1))}a(ot,"y");function gt(j,it,xt,z){return ot(j)||Y(z)?null:function(X){for(var ft=[],st=0;st<X.length;st++)X[st][1].length>0&&ft.push(X[st]);return ft}([[d,j],[s,it],[c,xt],[d,z]])}a(gt,"v");function ht(j,it,xt,z){return m(j,it,xt,z,!0)}a(ht,"x"),ht.INSERT=c,ht.DELETE=s,ht.EQUAL=d,i.exports=ht},193:(i,s,c)=>{i=c.nmd(i);var d="__lodash_hash_undefined__",m=9007199254740991,v="[object Arguments]",y="[object Boolean]",x="[object Date]",E="[object Function]",A="[object GeneratorFunction]",C="[object Map]",k="[object Number]",H="[object Object]",M="[object Promise]",q="[object RegExp]",V="[object Set]",$="[object String]",Y="[object Symbol]",ot="[object WeakMap]",gt="[object ArrayBuffer]",ht="[object DataView]",j="[object Float32Array]",it="[object Float64Array]",xt="[object Int8Array]",z="[object Int16Array]",X="[object Int32Array]",ft="[object Uint8Array]",st="[object Uint8ClampedArray]",wt="[object Uint16Array]",P="[object Uint32Array]",U=/\w*$/,I=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,et={};et[v]=et["[object Array]"]=et[gt]=et[ht]=et[y]=et[x]=et[j]=et[it]=et[xt]=et[z]=et[X]=et[C]=et[k]=et[H]=et[q]=et[V]=et[$]=et[Y]=et[ft]=et[st]=et[wt]=et[P]=!0,et["[object Error]"]=et[E]=et[ot]=!1;var ct=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,Et=typeof self=="object"&&self&&self.Object===Object&&self,mt=ct||Et||Function("return this")(),Nt=s&&!s.nodeType&&s,$t=Nt&&i&&!i.nodeType&&i,Vt=$t&&$t.exports===Nt;function te(Z,lt){return Z.set(lt[0],lt[1]),Z}a(te,"P");function se(Z,lt){return Z.add(lt),Z}a(se,"z");function he(Z,lt,Lt,R){var G=-1,yt=Z?Z.length:0;for(R&&yt&&(Lt=Z[++G]);++G<yt;)Lt=lt(Lt,Z[G],G,Z);return Lt}a(he,"H");function Te(Z){var lt=!1;if(Z!=null&&typeof Z.toString!="function")try{lt=!!(Z+"")}catch{}return lt}a(Te,"F");function fe(Z){var lt=-1,Lt=Array(Z.size);return Z.forEach(function(R,G){Lt[++lt]=[G,R]}),Lt}a(fe,"$");function Gt(Z,lt){return function(Lt){return Z(lt(Lt))}}a(Gt,"V");function ye(Z){var lt=-1,Lt=Array(Z.size);return Z.forEach(function(R){Lt[++lt]=R}),Lt}a(ye,"K");var zt,ie=Array.prototype,Yt=Function.prototype,Jt=Object.prototype,Se=mt["__core-js_shared__"],ce=(zt=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+zt:"",Oe=Yt.toString,De=Jt.hasOwnProperty,ze=Jt.toString,hn=RegExp("^"+Oe.call(De).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=Vt?mt.Buffer:void 0,Ae=mt.Symbol,Ue=mt.Uint8Array,an=Gt(Object.getPrototypeOf,Object),me=Object.create,Ve=Jt.propertyIsEnumerable,Ye=ie.splice,Xe=Object.getOwnPropertySymbols,He=Be?Be.isBuffer:void 0,oe=Gt(Object.keys,Object),Le=ln(mt,"DataView"),Zt=ln(mt,"Map"),de=ln(mt,"Promise"),yn=ln(mt,"Set"),fi=ln(mt,"WeakMap"),In=ln(Object,"create"),Li=Ze(Le),Gn=Ze(Zt),zr=Ze(de),Er=Ze(yn),O=Ze(fi),D=Ae?Ae.prototype:void 0,W=D?D.valueOf:void 0;function J(Z){var lt=-1,Lt=Z?Z.length:0;for(this.clear();++lt<Lt;){var R=Z[lt];this.set(R[0],R[1])}}a(J,"kt");function vt(Z){var lt=-1,Lt=Z?Z.length:0;for(this.clear();++lt<Lt;){var R=Z[lt];this.set(R[0],R[1])}}a(vt,"_t");function Tt(Z){var lt=-1,Lt=Z?Z.length:0;for(this.clear();++lt<Lt;){var R=Z[lt];this.set(R[0],R[1])}}a(Tt,"Lt");function Wt(Z){this.__data__=new vt(Z)}a(Wt,"Ot");function Mt(Z,lt){var Lt=pi(Z)||function(St){return function(bt){return function(It){return!!It&&typeof It=="object"}(bt)&&$i(bt)}(St)&&De.call(St,"callee")&&(!Ve.call(St,"callee")||ze.call(St)==v)}(Z)?function(St,bt){for(var It=-1,ue=Array(St);++It<St;)ue[It]=bt(It);return ue}(Z.length,String):[],R=Lt.length,G=!!R;for(var yt in Z)!lt&&!De.call(Z,yt)||G&&(yt=="length"||ei(yt,R))||Lt.push(yt);return Lt}a(Mt,"Tt");function Ht(Z,lt,Lt){var R=Z[lt];De.call(Z,lt)&&sr(R,Lt)&&(Lt!==void 0||lt in Z)||(Z[lt]=Lt)}a(Ht,"St");function rt(Z,lt){for(var Lt=Z.length;Lt--;)if(sr(Z[Lt][0],lt))return Lt;return-1}a(rt,"Ct");function Ft(Z,lt,Lt,R,G,yt,St){var bt;if(R&&(bt=yt?R(Z,G,yt,St):R(Z)),bt!==void 0)return bt;if(!ar(Z))return Z;var It=pi(Z);if(It){if(bt=function(dt){var Bt=dt.length,ge=dt.constructor(Bt);return Bt&&typeof dt[0]=="string"&&De.call(dt,"index")&&(ge.index=dt.index,ge.input=dt.input),ge}(Z),!lt)return function(dt,Bt){var ge=-1,we=dt.length;for(Bt||(Bt=Array(we));++ge<we;)Bt[ge]=dt[ge];return Bt}(Z,bt)}else{var ue=Hn(Z),xe=ue==E||ue==A;if(Ci(Z))return function(dt,Bt){if(Bt)return dt.slice();var ge=new dt.constructor(dt.length);return dt.copy(ge),ge}(Z,lt);if(ue==H||ue==v||xe&&!yt){if(Te(Z))return yt?Z:{};if(bt=function(dt){return typeof dt.constructor!="function"||rr(dt)?{}:(Bt=an(dt),ar(Bt)?me(Bt):{});var Bt}(xe?{}:Z),!lt)return function(dt,Bt){return nn(dt,_n(dt),Bt)}(Z,function(dt,Bt){return dt&&nn(Bt,Tr(Bt),dt)}(bt,Z))}else{if(!et[ue])return yt?Z:{};bt=function(dt,Bt,ge,we){var qe=dt.constructor;switch(Bt){case gt:return dn(dt);case y:case x:return new qe(+dt);case ht:return function(ae,ke){var pe=ke?dn(ae.buffer):ae.buffer;return new ae.constructor(pe,ae.byteOffset,ae.byteLength)}(dt,we);case j:case it:case xt:case z:case X:case ft:case st:case wt:case P:return function(ae,ke){var pe=ke?dn(ae.buffer):ae.buffer;return new ae.constructor(pe,ae.byteOffset,ae.length)}(dt,we);case C:return function(ae,ke,pe){var Dn=ke?pe(fe(ae),!0):fe(ae);return he(Dn,te,new ae.constructor)}(dt,we,ge);case k:case $:return new qe(dt);case q:return function(ae){var ke=new ae.constructor(ae.source,U.exec(ae));return ke.lastIndex=ae.lastIndex,ke}(dt);case V:return function(ae,ke,pe){var Dn=ke?pe(ye(ae),!0):ye(ae);return he(Dn,se,new ae.constructor)}(dt,we,ge);case Y:return zn=dt,W?Object(W.call(zn)):{}}var zn}(Z,ue,Ft,lt)}}St||(St=new Wt);var $e=St.get(Z);if($e)return $e;if(St.set(Z,bt),!It)var Pe=Lt?function(dt){return function(Bt,ge,we){var qe=ge(Bt);return pi(Bt)?qe:function(zn,ae){for(var ke=-1,pe=ae.length,Dn=zn.length;++ke<pe;)zn[Dn+ke]=ae[ke];return zn}(qe,we(Bt))}(dt,Tr,_n)}(Z):Tr(Z);return function(dt,Bt){for(var ge=-1,we=dt?dt.length:0;++ge<we&&Bt(dt[ge],ge,dt)!==!1;);}(Pe||Z,function(dt,Bt){Pe&&(dt=Z[Bt=dt]),Ht(bt,Bt,Ft(dt,lt,Lt,R,Bt,Z,St))}),bt}a(Ft,"jt");function _e(Z){return!(!ar(Z)||(lt=Z,ce&&ce in lt))&&(or(Z)||Te(Z)?hn:I).test(Ze(Z));var lt}a(_e,"Rt");function dn(Z){var lt=new Z.constructor(Z.byteLength);return new Ue(lt).set(new Ue(Z)),lt}a(dn,"It");function nn(Z,lt,Lt,R){Lt||(Lt={});for(var G=-1,yt=lt.length;++G<yt;){var St=lt[G],bt=R?R(Lt[St],Z[St],St,Lt,Z):void 0;Ht(Lt,St,bt===void 0?Z[St]:bt)}return Lt}a(nn,"Mt");function We(Z,lt){var Lt,R,G=Z.__data__;return((R=typeof(Lt=lt))=="string"||R=="number"||R=="symbol"||R=="boolean"?Lt!=="__proto__":Lt===null)?G[typeof lt=="string"?"string":"hash"]:G.map}a(We,"Bt");function ln(Z,lt){var Lt=function(R,G){return R?.[G]}(Z,lt);return _e(Lt)?Lt:void 0}a(ln,"Ut"),J.prototype.clear=function(){this.__data__=In?In(null):{}},J.prototype.delete=function(Z){return this.has(Z)&&delete this.__data__[Z]},J.prototype.get=function(Z){var lt=this.__data__;if(In){var Lt=lt[Z];return Lt===d?void 0:Lt}return De.call(lt,Z)?lt[Z]:void 0},J.prototype.has=function(Z){var lt=this.__data__;return In?lt[Z]!==void 0:De.call(lt,Z)},J.prototype.set=function(Z,lt){return this.__data__[Z]=In&&lt===void 0?d:lt,this},vt.prototype.clear=function(){this.__data__=[]},vt.prototype.delete=function(Z){var lt=this.__data__,Lt=rt(lt,Z);return!(Lt<0)&&(Lt==lt.length-1?lt.pop():Ye.call(lt,Lt,1),!0)},vt.prototype.get=function(Z){var lt=this.__data__,Lt=rt(lt,Z);return Lt<0?void 0:lt[Lt][1]},vt.prototype.has=function(Z){return rt(this.__data__,Z)>-1},vt.prototype.set=function(Z,lt){var Lt=this.__data__,R=rt(Lt,Z);return R<0?Lt.push([Z,lt]):Lt[R][1]=lt,this},Tt.prototype.clear=function(){this.__data__={hash:new J,map:new(Zt||vt),string:new J}},Tt.prototype.delete=function(Z){return We(this,Z).delete(Z)},Tt.prototype.get=function(Z){return We(this,Z).get(Z)},Tt.prototype.has=function(Z){return We(this,Z).has(Z)},Tt.prototype.set=function(Z,lt){return We(this,Z).set(Z,lt),this},Wt.prototype.clear=function(){this.__data__=new vt},Wt.prototype.delete=function(Z){return this.__data__.delete(Z)},Wt.prototype.get=function(Z){return this.__data__.get(Z)},Wt.prototype.has=function(Z){return this.__data__.has(Z)},Wt.prototype.set=function(Z,lt){var Lt=this.__data__;if(Lt instanceof vt){var R=Lt.__data__;if(!Zt||R.length<199)return R.push([Z,lt]),this;Lt=this.__data__=new Tt(R)}return Lt.set(Z,lt),this};var _n=Xe?Gt(Xe,Object):function(){return[]},Hn=a(function(Z){return ze.call(Z)},"Pt");function ei(Z,lt){return!!(lt=lt??m)&&(typeof Z=="number"||Q.test(Z))&&Z>-1&&Z%1==0&&Z<lt}a(ei,"zt");function rr(Z){var lt=Z&&Z.constructor;return Z===(typeof lt=="function"&&lt.prototype||Jt)}a(rr,"Ht");function Ze(Z){if(Z!=null){try{return Oe.call(Z)}catch{}try{return Z+""}catch{}}return""}a(Ze,"Ft");function sr(Z,lt){return Z===lt||Z!=Z&&lt!=lt}a(sr,"$t"),(Le&&Hn(new Le(new ArrayBuffer(1)))!=ht||Zt&&Hn(new Zt)!=C||de&&Hn(de.resolve())!=M||yn&&Hn(new yn)!=V||fi&&Hn(new fi)!=ot)&&(Hn=a(function(Z){var lt=ze.call(Z),Lt=lt==H?Z.constructor:void 0,R=Lt?Ze(Lt):void 0;if(R)switch(R){case Li:return ht;case Gn:return C;case zr:return M;case Er:return V;case O:return ot}return lt},"Pt"));var pi=Array.isArray;function $i(Z){return Z!=null&&function(lt){return typeof lt=="number"&&lt>-1&&lt%1==0&&lt<=m}(Z.length)&&!or(Z)}a($i,"Kt");var Ci=He||function(){return!1};function or(Z){var lt=ar(Z)?ze.call(Z):"";return lt==E||lt==A}a(or,"Zt");function ar(Z){var lt=typeof Z;return!!Z&&(lt=="object"||lt=="function")}a(ar,"Gt");function Tr(Z){return $i(Z)?Mt(Z):function(lt){if(!rr(lt))return oe(lt);var Lt=[];for(var R in Object(lt))De.call(lt,R)&&R!="constructor"&&Lt.push(R);return Lt}(Z)}a(Tr,"Xt"),i.exports=function(Z){return Ft(Z,!0,!0)}},142:(i,s,c)=>{i=c.nmd(i);var d="__lodash_hash_undefined__",m=1,v=2,y=9007199254740991,x="[object Arguments]",E="[object Array]",A="[object AsyncFunction]",C="[object Boolean]",k="[object Date]",H="[object Error]",M="[object Function]",q="[object GeneratorFunction]",V="[object Map]",$="[object Number]",Y="[object Null]",ot="[object Object]",gt="[object Promise]",ht="[object Proxy]",j="[object RegExp]",it="[object Set]",xt="[object String]",z="[object Symbol]",X="[object Undefined]",ft="[object WeakMap]",st="[object ArrayBuffer]",wt="[object DataView]",P=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[x]=I[E]=I[st]=I[C]=I[wt]=I[k]=I[H]=I[M]=I[V]=I[$]=I[ot]=I[j]=I[it]=I[xt]=I[ft]=!1;var Q=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,et=typeof self=="object"&&self&&self.Object===Object&&self,ct=Q||et||Function("return this")(),Et=s&&!s.nodeType&&s,mt=Et&&i&&!i.nodeType&&i,Nt=mt&&mt.exports===Et,$t=Nt&&Q.process,Vt=function(){try{return $t&&$t.binding&&$t.binding("util")}catch{}}(),te=Vt&&Vt.isTypedArray;function se(R,G){for(var yt=-1,St=R==null?0:R.length;++yt<St;)if(G(R[yt],yt,R))return!0;return!1}a(se,"z");function he(R){var G=-1,yt=Array(R.size);return R.forEach(function(St,bt){yt[++G]=[bt,St]}),yt}a(he,"H");function Te(R){var G=-1,yt=Array(R.size);return R.forEach(function(St){yt[++G]=St}),yt}a(Te,"F");var fe,Gt,ye,zt=Array.prototype,ie=Function.prototype,Yt=Object.prototype,Jt=ct["__core-js_shared__"],Se=ie.toString,ce=Yt.hasOwnProperty,Oe=(fe=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||""))?"Symbol(src)_1."+fe:"",De=Yt.toString,ze=RegExp("^"+Se.call(ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hn=Nt?ct.Buffer:void 0,Be=ct.Symbol,Ae=ct.Uint8Array,Ue=Yt.propertyIsEnumerable,an=zt.splice,me=Be?Be.toStringTag:void 0,Ve=Object.getOwnPropertySymbols,Ye=hn?hn.isBuffer:void 0,Xe=(Gt=Object.keys,ye=Object,function(R){return Gt(ye(R))}),He=_n(ct,"DataView"),oe=_n(ct,"Map"),Le=_n(ct,"Promise"),Zt=_n(ct,"Set"),de=_n(ct,"WeakMap"),yn=_n(Object,"create"),fi=Ze(He),In=Ze(oe),Li=Ze(Le),Gn=Ze(Zt),zr=Ze(de),Er=Be?Be.prototype:void 0,O=Er?Er.valueOf:void 0;function D(R){var G=-1,yt=R==null?0:R.length;for(this.clear();++G<yt;){var St=R[G];this.set(St[0],St[1])}}a(D,"At");function W(R){var G=-1,yt=R==null?0:R.length;for(this.clear();++G<yt;){var St=R[G];this.set(St[0],St[1])}}a(W,"qt");function J(R){var G=-1,yt=R==null?0:R.length;for(this.clear();++G<yt;){var St=R[G];this.set(St[0],St[1])}}a(J,"kt");function vt(R){var G=-1,yt=R==null?0:R.length;for(this.__data__=new J;++G<yt;)this.add(R[G])}a(vt,"_t");function Tt(R){var G=this.__data__=new W(R);this.size=G.size}a(Tt,"Lt");function Wt(R,G){var yt=$i(R),St=!yt&&pi(R),bt=!yt&&!St&&Ci(R),It=!yt&&!St&&!bt&&lt(R),ue=yt||St||bt||It,xe=ue?function(dt,Bt){for(var ge=-1,we=Array(dt);++ge<dt;)we[ge]=Bt(ge);return we}(R.length,String):[],$e=xe.length;for(var Pe in R)!G&&!ce.call(R,Pe)||ue&&(Pe=="length"||bt&&(Pe=="offset"||Pe=="parent")||It&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||rr(Pe,$e))||xe.push(Pe);return xe}a(Wt,"Ot");function Mt(R,G){for(var yt=R.length;yt--;)if(sr(R[yt][0],G))return yt;return-1}a(Mt,"Tt");function Ht(R){return R==null?R===void 0?X:Y:me&&me in Object(R)?function(G){var yt=ce.call(G,me),St=G[me];try{G[me]=void 0;var bt=!0}catch{}var It=De.call(G);return bt&&(yt?G[me]=St:delete G[me]),It}(R):function(G){return De.call(G)}(R)}a(Ht,"St");function rt(R){return Z(R)&&Ht(R)==x}a(rt,"Ct");function Ft(R,G,yt,St,bt){return R===G||(R==null||G==null||!Z(R)&&!Z(G)?R!=R&&G!=G:function(It,ue,xe,$e,Pe,dt){var Bt=$i(It),ge=$i(ue),we=Bt?E:ei(It),qe=ge?E:ei(ue),zn=(we=we==x?ot:we)==ot,ae=(qe=qe==x?ot:qe)==ot,ke=we==qe;if(ke&&Ci(It)){if(!Ci(ue))return!1;Bt=!0,zn=!1}if(ke&&!zn)return dt||(dt=new Tt),Bt||lt(It)?nn(It,ue,xe,$e,Pe,dt):function(Ee,ve,Vr,Un,Wr,Vn,mi){switch(Vr){case wt:if(Ee.byteLength!=ve.byteLength||Ee.byteOffset!=ve.byteOffset)return!1;Ee=Ee.buffer,ve=ve.buffer;case st:return!(Ee.byteLength!=ve.byteLength||!Vn(new Ae(Ee),new Ae(ve)));case C:case k:case $:return sr(+Ee,+ve);case H:return Ee.name==ve.name&&Ee.message==ve.message;case j:case xt:return Ee==ve+"";case V:var ni=he;case it:var Zr=Un&m;if(ni||(ni=Te),Ee.size!=ve.size&&!Zr)return!1;var Sr=mi.get(Ee);if(Sr)return Sr==ve;Un|=v,mi.set(Ee,ve);var No=nn(ni(Ee),ni(ve),Un,Wr,Vn,mi);return mi.delete(Ee),No;case z:if(O)return O.call(Ee)==O.call(ve)}return!1}(It,ue,we,xe,$e,Pe,dt);if(!(xe&m)){var pe=zn&&ce.call(It,"__wrapped__"),Dn=ae&&ce.call(ue,"__wrapped__");if(pe||Dn){var os=pe?It.value():It,Ur=Dn?ue.value():ue;return dt||(dt=new Tt),Pe(os,Ur,xe,$e,dt)}}return ke?(dt||(dt=new Tt),function(Ee,ve,Vr,Un,Wr,Vn){var mi=Vr&m,ni=We(Ee),Zr=ni.length,Sr=We(ve),No=Sr.length;if(Zr!=No&&!mi)return!1;for(var Xt=Zr;Xt--;){var En=ni[Xt];if(!(mi?En in ve:ce.call(ve,En)))return!1}var Me=Vn.get(Ee);if(Me&&Vn.get(ve))return Me==ve;var as=!0;Vn.set(Ee,ve),Vn.set(ve,Ee);for(var ls=mi;++Xt<Zr;){var $r=Ee[En=ni[Xt]],Yn=ve[En];if(Un)var qt=mi?Un(Yn,$r,En,ve,Ee,Vn):Un($r,Yn,En,Ee,ve,Vn);if(!(qt===void 0?$r===Yn||Wr($r,Yn,Vr,Un,Vn):qt)){as=!1;break}ls||(ls=En=="constructor")}if(as&&!ls){var Pn=Ee.constructor,Xn=ve.constructor;Pn==Xn||!("constructor"in Ee)||!("constructor"in ve)||typeof Pn=="function"&&Pn instanceof Pn&&typeof Xn=="function"&&Xn instanceof Xn||(as=!1)}return Vn.delete(Ee),Vn.delete(ve),as}(It,ue,xe,$e,Pe,dt)):!1}(R,G,yt,St,Ft,bt))}a(Ft,"jt");function _e(R){return!(!Tr(R)||function(G){return!!Oe&&Oe in G}(R))&&(or(R)?ze:P).test(Ze(R))}a(_e,"Rt");function dn(R){if(yt=(G=R)&&G.constructor,St=typeof yt=="function"&&yt.prototype||Yt,G!==St)return Xe(R);var G,yt,St,bt=[];for(var It in Object(R))ce.call(R,It)&&It!="constructor"&&bt.push(It);return bt}a(dn,"It");function nn(R,G,yt,St,bt,It){var ue=yt&m,xe=R.length,$e=G.length;if(xe!=$e&&!(ue&&$e>xe))return!1;var Pe=It.get(R);if(Pe&&It.get(G))return Pe==G;var dt=-1,Bt=!0,ge=yt&v?new vt:void 0;for(It.set(R,G),It.set(G,R);++dt<xe;){var we=R[dt],qe=G[dt];if(St)var zn=ue?St(qe,we,dt,G,R,It):St(we,qe,dt,R,G,It);if(zn!==void 0){if(zn)continue;Bt=!1;break}if(ge){if(!se(G,function(ae,ke){if(pe=ke,!ge.has(pe)&&(we===ae||bt(we,ae,yt,St,It)))return ge.push(ke);var pe})){Bt=!1;break}}else if(we!==qe&&!bt(we,qe,yt,St,It)){Bt=!1;break}}return It.delete(R),It.delete(G),Bt}a(nn,"Mt");function We(R){return function(G,yt,St){var bt=yt(G);return $i(G)?bt:function(It,ue){for(var xe=-1,$e=ue.length,Pe=It.length;++xe<$e;)It[Pe+xe]=ue[xe];return It}(bt,St(G))}(R,Lt,Hn)}a(We,"Bt");function ln(R,G){var yt,St,bt=R.__data__;return((St=typeof(yt=G))=="string"||St=="number"||St=="symbol"||St=="boolean"?yt!=="__proto__":yt===null)?bt[typeof G=="string"?"string":"hash"]:bt.map}a(ln,"Ut");function _n(R,G){var yt=function(St,bt){return St?.[bt]}(R,G);return _e(yt)?yt:void 0}a(_n,"Dt"),D.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},D.prototype.delete=function(R){var G=this.has(R)&&delete this.__data__[R];return this.size-=G?1:0,G},D.prototype.get=function(R){var G=this.__data__;if(yn){var yt=G[R];return yt===d?void 0:yt}return ce.call(G,R)?G[R]:void 0},D.prototype.has=function(R){var G=this.__data__;return yn?G[R]!==void 0:ce.call(G,R)},D.prototype.set=function(R,G){var yt=this.__data__;return this.size+=this.has(R)?0:1,yt[R]=yn&&G===void 0?d:G,this},W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(R){var G=this.__data__,yt=Mt(G,R);return!(yt<0)&&(yt==G.length-1?G.pop():an.call(G,yt,1),--this.size,!0)},W.prototype.get=function(R){var G=this.__data__,yt=Mt(G,R);return yt<0?void 0:G[yt][1]},W.prototype.has=function(R){return Mt(this.__data__,R)>-1},W.prototype.set=function(R,G){var yt=this.__data__,St=Mt(yt,R);return St<0?(++this.size,yt.push([R,G])):yt[St][1]=G,this},J.prototype.clear=function(){this.size=0,this.__data__={hash:new D,map:new(oe||W),string:new D}},J.prototype.delete=function(R){var G=ln(this,R).delete(R);return this.size-=G?1:0,G},J.prototype.get=function(R){return ln(this,R).get(R)},J.prototype.has=function(R){return ln(this,R).has(R)},J.prototype.set=function(R,G){var yt=ln(this,R),St=yt.size;return yt.set(R,G),this.size+=yt.size==St?0:1,this},vt.prototype.add=vt.prototype.push=function(R){return this.__data__.set(R,d),this},vt.prototype.has=function(R){return this.__data__.has(R)},Tt.prototype.clear=function(){this.__data__=new W,this.size=0},Tt.prototype.delete=function(R){var G=this.__data__,yt=G.delete(R);return this.size=G.size,yt},Tt.prototype.get=function(R){return this.__data__.get(R)},Tt.prototype.has=function(R){return this.__data__.has(R)},Tt.prototype.set=function(R,G){var yt=this.__data__;if(yt instanceof W){var St=yt.__data__;if(!oe||St.length<199)return St.push([R,G]),this.size=++yt.size,this;yt=this.__data__=new J(St)}return yt.set(R,G),this.size=yt.size,this};var Hn=Ve?function(R){return R==null?[]:(R=Object(R),function(G,yt){for(var St=-1,bt=G==null?0:G.length,It=0,ue=[];++St<bt;){var xe=G[St];yt(xe,St,G)&&(ue[It++]=xe)}return ue}(Ve(R),function(G){return Ue.call(R,G)}))}:function(){return[]},ei=Ht;function rr(R,G){return!!(G=G??y)&&(typeof R=="number"||U.test(R))&&R>-1&&R%1==0&&R<G}a(rr,"Ht");function Ze(R){if(R!=null){try{return Se.call(R)}catch{}try{return R+""}catch{}}return""}a(Ze,"Ft");function sr(R,G){return R===G||R!=R&&G!=G}a(sr,"$t"),(He&&ei(new He(new ArrayBuffer(1)))!=wt||oe&&ei(new oe)!=V||Le&&ei(Le.resolve())!=gt||Zt&&ei(new Zt)!=it||de&&ei(new de)!=ft)&&(ei=a(function(R){var G=Ht(R),yt=G==ot?R.constructor:void 0,St=yt?Ze(yt):"";if(St)switch(St){case fi:return wt;case In:return V;case Li:return gt;case Gn:return it;case zr:return ft}return G},"zt"));var pi=rt(function(){return arguments}())?rt:function(R){return Z(R)&&ce.call(R,"callee")&&!Ue.call(R,"callee")},$i=Array.isArray,Ci=Ye||function(){return!1};function or(R){if(!Tr(R))return!1;var G=Ht(R);return G==M||G==q||G==A||G==ht}a(or,"Zt");function ar(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=y}a(ar,"Gt");function Tr(R){var G=typeof R;return R!=null&&(G=="object"||G=="function")}a(Tr,"Xt");function Z(R){return R!=null&&typeof R=="object"}a(Z,"Qt");var lt=te?function(R){return function(G){return R(G)}}(te):function(R){return Z(R)&&ar(R.length)&&!!I[Ht(R)]};function Lt(R){return(G=R)!=null&&ar(G.length)&&!or(G)?Wt(R):dn(R);var G}a(Lt,"Jt"),i.exports=function(R,G){return Ft(R,G)}},106:(i,s,c)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});let d=c(193),m=c(142);var v;(function(y){y.compose=function(x={},E={},A=!1){typeof x!="object"&&(x={}),typeof E!="object"&&(E={});let C=d(E);A||(C=Object.keys(C).reduce((k,H)=>(C[H]!=null&&(k[H]=C[H]),k),{}));for(let k in x)x[k]!==void 0&&E[k]===void 0&&(C[k]=x[k]);return Object.keys(C).length>0?C:void 0},y.diff=function(x={},E={}){typeof x!="object"&&(x={}),typeof E!="object"&&(E={});let A=Object.keys(x).concat(Object.keys(E)).reduce((C,k)=>(m(x[k],E[k])||(C[k]=E[k]===void 0?null:E[k]),C),{});return Object.keys(A).length>0?A:void 0},y.invert=function(x={},E={}){x=x||{};let A=Object.keys(E).reduce((C,k)=>(E[k]!==x[k]&&x[k]!==void 0&&(C[k]=E[k]),C),{});return Object.keys(x).reduce((C,k)=>(x[k]!==E[k]&&E[k]===void 0&&(C[k]=null),C),A)},y.transform=function(x,E,A=!1){if(typeof x!="object")return E;if(typeof E!="object")return;if(!A)return E;let C=Object.keys(E).reduce((k,H)=>(x[H]===void 0&&(k[H]=E[H]),k),{});return Object.keys(C).length>0?C:void 0}})(v||(v={})),s.default=v},660:(i,s,c)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AttributeMap=s.OpIterator=s.Op=void 0;let d=c(606),m=c(193),v=c(142),y=c(106);s.AttributeMap=y.default;let x=c(759);s.Op=x.default;let E=c(317);s.OpIterator=E.default;let A="\0",C=a((H,M)=>{if(typeof H!="object"||H===null)throw new Error("cannot retain a "+typeof H);if(typeof M!="object"||M===null)throw new Error("cannot retain a "+typeof M);let q=Object.keys(H)[0];if(!q||q!==Object.keys(M)[0])throw new Error(`embed types not matched: ${q} != ${Object.keys(M)[0]}`);return[q,H[q],M[q]]},"u");class k{static{a(this,"h")}constructor(M){Array.isArray(M)?this.ops=M:M!=null&&Array.isArray(M.ops)?this.ops=M.ops:this.ops=[]}static registerEmbed(M,q){this.handlers[M]=q}static unregisterEmbed(M){delete this.handlers[M]}static getHandler(M){let q=this.handlers[M];if(!q)throw new Error(`no handlers for embed type "${M}"`);return q}insert(M,q){let V={};return typeof M=="string"&&M.length===0?this:(V.insert=M,q!=null&&typeof q=="object"&&Object.keys(q).length>0&&(V.attributes=q),this.push(V))}delete(M){return M<=0?this:this.push({delete:M})}retain(M,q){if(typeof M=="number"&&M<=0)return this;let V={retain:M};return q!=null&&typeof q=="object"&&Object.keys(q).length>0&&(V.attributes=q),this.push(V)}push(M){let q=this.ops.length,V=this.ops[q-1];if(M=m(M),typeof V=="object"){if(typeof M.delete=="number"&&typeof V.delete=="number")return this.ops[q-1]={delete:V.delete+M.delete},this;if(typeof V.delete=="number"&&M.insert!=null&&(q-=1,V=this.ops[q-1],typeof V!="object"))return this.ops.unshift(M),this;if(v(M.attributes,V.attributes)){if(typeof M.insert=="string"&&typeof V.insert=="string")return this.ops[q-1]={insert:V.insert+M.insert},typeof M.attributes=="object"&&(this.ops[q-1].attributes=M.attributes),this;if(typeof M.retain=="number"&&typeof V.retain=="number")return this.ops[q-1]={retain:V.retain+M.retain},typeof M.attributes=="object"&&(this.ops[q-1].attributes=M.attributes),this}}return q===this.ops.length?this.ops.push(M):this.ops.splice(q,0,M),this}chop(){let M=this.ops[this.ops.length-1];return M&&typeof M.retain=="number"&&!M.attributes&&this.ops.pop(),this}filter(M){return this.ops.filter(M)}forEach(M){this.ops.forEach(M)}map(M){return this.ops.map(M)}partition(M){let q=[],V=[];return this.forEach($=>{(M($)?q:V).push($)}),[q,V]}reduce(M,q){return this.ops.reduce(M,q)}changeLength(){return this.reduce((M,q)=>q.insert?M+x.default.length(q):q.delete?M-q.delete:M,0)}length(){return this.reduce((M,q)=>M+x.default.length(q),0)}slice(M=0,q=1/0){let V=[],$=new E.default(this.ops),Y=0;for(;Y<q&&$.hasNext();){let ot;Y<M?ot=$.next(M-Y):(ot=$.next(q-Y),V.push(ot)),Y+=x.default.length(ot)}return new k(V)}compose(M){let q=new E.default(this.ops),V=new E.default(M.ops),$=[],Y=V.peek();if(Y!=null&&typeof Y.retain=="number"&&Y.attributes==null){let gt=Y.retain;for(;q.peekType()==="insert"&&q.peekLength()<=gt;)gt-=q.peekLength(),$.push(q.next());Y.retain-gt>0&&V.next(Y.retain-gt)}let ot=new k($);for(;q.hasNext()||V.hasNext();)if(V.peekType()==="insert")ot.push(V.next());else if(q.peekType()==="delete")ot.push(q.next());else{let gt=Math.min(q.peekLength(),V.peekLength()),ht=q.next(gt),j=V.next(gt);if(j.retain){let it={};if(typeof ht.retain=="number")it.retain=typeof j.retain=="number"?gt:j.retain;else if(typeof j.retain=="number")ht.retain==null?it.insert=ht.insert:it.retain=ht.retain;else{let z=ht.retain==null?"insert":"retain",[X,ft,st]=C(ht[z],j.retain),wt=k.getHandler(X);it[z]={[X]:wt.compose(ft,st,z==="retain")}}let xt=y.default.compose(ht.attributes,j.attributes,typeof ht.retain=="number");if(xt&&(it.attributes=xt),ot.push(it),!V.hasNext()&&v(ot.ops[ot.ops.length-1],it)){let z=new k(q.rest());return ot.concat(z).chop()}}else typeof j.delete=="number"&&(typeof ht.retain=="number"||typeof ht.retain=="object"&&ht.retain!==null)&&ot.push(j)}return ot.chop()}concat(M){let q=new k(this.ops.slice());return M.ops.length>0&&(q.push(M.ops[0]),q.ops=q.ops.concat(M.ops.slice(1))),q}diff(M,q){if(this.ops===M.ops)return new k;let V=[this,M].map(ht=>ht.map(j=>{if(j.insert!=null)return typeof j.insert=="string"?j.insert:A;throw new Error("diff() called "+(ht===M?"on":"with")+" non-document")}).join("")),$=new k,Y=d(V[0],V[1],q,!0),ot=new E.default(this.ops),gt=new E.default(M.ops);return Y.forEach(ht=>{let j=ht[1].length;for(;j>0;){let it=0;switch(ht[0]){case d.INSERT:it=Math.min(gt.peekLength(),j),$.push(gt.next(it));break;case d.DELETE:it=Math.min(j,ot.peekLength()),ot.next(it),$.delete(it);break;case d.EQUAL:it=Math.min(ot.peekLength(),gt.peekLength(),j);let xt=ot.next(it),z=gt.next(it);v(xt.insert,z.insert)?$.retain(it,y.default.diff(xt.attributes,z.attributes)):$.push(z).delete(it)}j-=it}}),$.chop()}eachLine(M,q=`
`){let V=new E.default(this.ops),$=new k,Y=0;for(;V.hasNext();){if(V.peekType()!=="insert")return;let ot=V.peek(),gt=x.default.length(ot)-V.peekLength(),ht=typeof ot.insert=="string"?ot.insert.indexOf(q,gt)-gt:-1;if(ht<0)$.push(V.next());else if(ht>0)$.push(V.next(ht));else{if(M($,V.next(1).attributes||{},Y)===!1)return;Y+=1,$=new k}}$.length()>0&&M($,{},Y)}invert(M){let q=new k;return this.reduce((V,$)=>{if($.insert)q.delete(x.default.length($));else{if(typeof $.retain=="number"&&$.attributes==null)return q.retain($.retain),V+$.retain;if($.delete||typeof $.retain=="number"){let Y=$.delete||$.retain;return M.slice(V,V+Y).forEach(ot=>{$.delete?q.push(ot):$.retain&&$.attributes&&q.retain(x.default.length(ot),y.default.invert($.attributes,ot.attributes))}),V+Y}if(typeof $.retain=="object"&&$.retain!==null){let Y=M.slice(V,V+1),ot=new E.default(Y.ops).next(),[gt,ht,j]=C($.retain,ot.insert),it=k.getHandler(gt);return q.retain({[gt]:it.invert(ht,j)},y.default.invert($.attributes,ot.attributes)),V+1}}return V},0),q.chop()}transform(M,q=!1){if(q=!!q,typeof M=="number")return this.transformPosition(M,q);let V=M,$=new E.default(this.ops),Y=new E.default(V.ops),ot=new k;for(;$.hasNext()||Y.hasNext();)if($.peekType()!=="insert"||!q&&Y.peekType()==="insert")if(Y.peekType()==="insert")ot.push(Y.next());else{let gt=Math.min($.peekLength(),Y.peekLength()),ht=$.next(gt),j=Y.next(gt);if(ht.delete)continue;if(j.delete)ot.push(j);else{let it=ht.retain,xt=j.retain,z=typeof xt=="object"&&xt!==null?xt:gt;if(typeof it=="object"&&it!==null&&typeof xt=="object"&&xt!==null){let X=Object.keys(it)[0];if(X===Object.keys(xt)[0]){let ft=k.getHandler(X);ft&&(z={[X]:ft.transform(it[X],xt[X],q)})}}ot.retain(z,y.default.transform(ht.attributes,j.attributes,q))}}else ot.retain(x.default.length($.next()));return ot.chop()}transformPosition(M,q=!1){q=!!q;let V=new E.default(this.ops),$=0;for(;V.hasNext()&&$<=M;){let Y=V.peekLength(),ot=V.peekType();V.next(),ot!=="delete"?(ot==="insert"&&($<M||!q)&&(M+=Y),$+=Y):M-=Math.min(Y,M-$)}return M}}k.Op=x.default,k.OpIterator=E.default,k.AttributeMap=y.default,k.handlers={},s.default=k,i.exports=k,i.exports.default=k},759:(i,s)=>{"use strict";var c;Object.defineProperty(s,"__esModule",{value:!0}),function(d){d.length=function(m){return typeof m.delete=="number"?m.delete:typeof m.retain=="number"?m.retain:typeof m.retain=="object"&&m.retain!==null?1:typeof m.insert=="string"?m.insert.length:1}}(c||(c={})),s.default=c},317:(i,s,c)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});let d=c(759);s.default=class{constructor(m){this.ops=m,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(m){m||(m=1/0);let v=this.ops[this.index];if(v){let y=this.offset,x=d.default.length(v);if(m>=x-y?(m=x-y,this.index+=1,this.offset=0):this.offset+=m,typeof v.delete=="number")return{delete:m};{let E={};return v.attributes&&(E.attributes=v.attributes),typeof v.retain=="number"?E.retain=m:typeof v.retain=="object"&&v.retain!==null?E.retain=v.retain:typeof v.insert=="string"?E.insert=v.insert.substr(y,m):E.insert=v.insert,E}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?d.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let m=this.ops[this.index];return m?typeof m.delete=="number"?"delete":typeof m.retain=="number"||typeof m.retain=="object"&&m.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let m=this.offset,v=this.index,y=this.next(),x=this.ops.slice(this.index);return this.offset=m,this.index=v,[y].concat(x)}}return[]}}},968:(i,s,c)=>{var d=c(64);typeof d=="string"&&(d=[[i.id,d,""]]);var m={hmr:!0,transform:void 0};c(27)(d,m),d.locals&&(i.exports=d.locals)},27:(i,s,c)=>{var d,m,v={},y=(d=a(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return m===void 0&&(m=d.apply(this,arguments)),m}),x=function(z){var X={};return function(ft){if(X[ft]===void 0){var st=z.call(this,ft);if(st instanceof window.HTMLIFrameElement)try{st=st.contentDocument.head}catch{st=null}X[ft]=st}return X[ft]}}(function(z){return document.querySelector(z)}),E=null,A=0,C=[],k=c(874);function H(z,X){for(var ft=0;ft<z.length;ft++){var st=z[ft],wt=v[st.id];if(wt){wt.refs++;for(var P=0;P<wt.parts.length;P++)wt.parts[P](st.parts[P]);for(;P<st.parts.length;P++)wt.parts.push(ot(st.parts[P],X))}else{var U=[];for(P=0;P<st.parts.length;P++)U.push(ot(st.parts[P],X));v[st.id]={id:st.id,refs:1,parts:U}}}}a(H,"d");function M(z,X){for(var ft=[],st={},wt=0;wt<z.length;wt++){var P=z[wt],U=X.base?P[0]+X.base:P[0],I={css:P[1],media:P[2],sourceMap:P[3]};st[U]?st[U].parts.push(I):ft.push(st[U]={id:U,parts:[I]})}return ft}a(M,"f");function q(z,X){var ft=x(z.insertInto);if(!ft)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var st=C[C.length-1];if(z.insertAt==="top")st?st.nextSibling?ft.insertBefore(X,st.nextSibling):ft.appendChild(X):ft.insertBefore(X,ft.firstChild),C.push(X);else if(z.insertAt==="bottom")ft.appendChild(X);else{if(typeof z.insertAt!="object"||!z.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var wt=x(z.insertInto+" "+z.insertAt.before);ft.insertBefore(X,wt)}}a(q,"p");function V(z){if(z.parentNode===null)return!1;z.parentNode.removeChild(z);var X=C.indexOf(z);X>=0&&C.splice(X,1)}a(V,"g");function $(z){var X=document.createElement("style");return z.attrs.type="text/css",Y(X,z.attrs),q(z,X),X}a($,"m");function Y(z,X){Object.keys(X).forEach(function(ft){z.setAttribute(ft,X[ft])})}a(Y,"b");function ot(z,X){var ft,st,wt,P;if(X.transform&&z.css){if(!(P=X.transform(z.css)))return function(){};z.css=P}if(X.singleton){var U=A++;ft=E||(E=$(X)),st=j.bind(null,ft,U,!1),wt=j.bind(null,ft,U,!0)}else z.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(ft=function(I){var Q=document.createElement("link");return I.attrs.type="text/css",I.attrs.rel="stylesheet",Y(Q,I.attrs),q(I,Q),Q}(X),st=xt.bind(null,ft,X),wt=a(function(){V(ft),ft.href&&URL.revokeObjectURL(ft.href)},"s")):(ft=$(X),st=it.bind(null,ft),wt=a(function(){V(ft)},"s"));return st(z),function(I){if(I){if(I.css===z.css&&I.media===z.media&&I.sourceMap===z.sourceMap)return;st(z=I)}else wt()}}a(ot,"y"),i.exports=function(z,X){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(X=X||{}).attrs=typeof X.attrs=="object"?X.attrs:{},X.singleton||typeof X.singleton=="boolean"||(X.singleton=y()),X.insertInto||(X.insertInto="head"),X.insertAt||(X.insertAt="bottom");var ft=M(z,X);return H(ft,X),function(st){for(var wt=[],P=0;P<ft.length;P++){var U=ft[P];(I=v[U.id]).refs--,wt.push(I)}for(st&&H(M(st,X),X),P=0;P<wt.length;P++){var I;if((I=wt[P]).refs===0){for(var Q=0;Q<I.parts.length;Q++)I.parts[Q]();delete v[I.id]}}}};var gt,ht=(gt=[],function(z,X){return gt[z]=X,gt.filter(Boolean).join(`
`)});function j(z,X,ft,st){var wt=ft?"":st.css;if(z.styleSheet)z.styleSheet.cssText=ht(X,wt);else{var P=document.createTextNode(wt),U=z.childNodes;U[X]&&z.removeChild(U[X]),U.length?z.insertBefore(P,U[X]):z.appendChild(P)}}a(j,"N");function it(z,X){var ft=X.css,st=X.media;if(st&&z.setAttribute("media",st),z.styleSheet)z.styleSheet.cssText=ft;else{for(;z.firstChild;)z.removeChild(z.firstChild);z.appendChild(document.createTextNode(ft))}}a(it,"w");function xt(z,X,ft){var st=ft.css,wt=ft.sourceMap,P=X.convertToAbsoluteUrls===void 0&&wt;(X.convertToAbsoluteUrls||P)&&(st=k(st)),wt&&(st+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(wt))))+" */");var U=new Blob([st],{type:"text/css"}),I=z.href;z.href=URL.createObjectURL(U),I&&URL.revokeObjectURL(I)}a(xt,"E")},874:i=>{i.exports=function(s){var c=typeof window<"u"&&window.location;if(!c)throw new Error("fixUrls requires window.location");if(!s||typeof s!="string")return s;var d=c.protocol+"//"+c.host,m=d+c.pathname.replace(/\/[^\/]*$/,"/");return s.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(v,y){var x,E=y.trim().replace(/^"(.*)"$/,function(A,C){return C}).replace(/^'(.*)'$/,function(A,C){return C});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(E)?v:(x=E.indexOf("//")===0?E:E.indexOf("/")===0?d+E:m+E.replace(/^\.\//,""),"url("+JSON.stringify(x)+")")})}},676:(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.FormatHTMLStringIndentation=function(c,d){for(var m=" ".repeat(2),v=0,y=`
`,x=null,E=null,A=null,C="",k=0;k<=c.length;k++){x=E,E=c.substr(k,1),A=c.substr(k+1,1);var H=c.substr(k,4)==="<br>",M=E==="<"&&A!=="/"&&!H,q=E==="<"&&A==="/"&&!H,V=x===">"&&E!=="<"&&v>0,$=!H&&!M&&!q&&V&&c.substr(k,c.substr(k).indexOf("<")).trim()==="";H&&(C+=y,v--,k+=4),M?(C+=y+m.repeat(v),v++):q?(--v<0&&(v=0),C+=y+m.repeat(v)):(E===" "&&A===" "||E===y&&c.substr(k,c.substr(k).indexOf("<")).trim()==="")&&(E=""),V&&!$&&(C+=y+m.repeat(v)),C+=E}return d.log("formatHTML",{before:c,after:C}),C}},795:(i,s)=>{"use strict";function c(E){return E.replace(/\s+/g," ").trim()}a(c,"n");function d(E){return E.replace(/<br([\s]*[\/]?>)/g,"<p> </p>")}a(d,"r");function m(E){return E.replace(/<p><\/p>/g,"<p> </p>")}a(m,"s");function v(E){return E.replace(/(<(?!\/)[\w=\."'\s]*>) /g,"$1")}a(v,"i");function y(E){return E.replace(/ (<\/[\w]+>)/g,"$1")}a(y,"o");function x(E,A){return E.reduce(function(C,k){return k(C)},A)}a(x,"l"),Object.defineProperty(s,"__esModule",{value:!0}),s.OutputHTMLParser=function(E){return x([c,v,y,d,m],E)},s.ConvertMultipleSpacesToSingle=c,s.PreserveNewlinesBr=d,s.PreserveNewlinesPTags=m,s.FixTagSpaceOpenTag=v,s.FixTagSpaceCloseTag=y,s.Compose=x},614:(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.QuillHtmlLogger=void 0;var c=function(){function d(){this.debug=!1}return a(d,"t"),d.prototype.setDebug=function(m){this.debug=m},d.prototype.prefixString=function(){return"</> quill-html-edit-button: "},Object.defineProperty(d.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v]}},enumerable:!1,configurable:!0}),d}();s.QuillHtmlLogger=c},190:function(i,s,c){"use strict";var d=this&&this.__assign||function(){return d=Object.assign||function(M){for(var q,V=1,$=arguments.length;V<$;V++)for(var Y in q=arguments[V])Object.prototype.hasOwnProperty.call(q,Y)&&(M[Y]=q[Y]);return M},d.apply(this,arguments)},m=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(s,"__esModule",{value:!0}),s.htmlEditButton=void 0;var v=c(614);c(968);var y=m(c(429)),x=c(795),E=c(676);function A(M){return document.createElement(M)}a(A,"c");function C(M,q,V){return M.setAttribute(q,V)}a(C,"u");var k=new v.QuillHtmlLogger,H=a(function(M,q){var V=q||{},$=!(!V||!V.debug);k.setDebug($),k.log("logging enabled");var Y=M.getModule("toolbar");if(!Y)throw new Error('quill.htmlEditButton requires the "toolbar" module to be included too');var ot=Y.container,gt=A("span");C(gt,"class","ql-formats");var ht=A("button");ht.innerHTML=V.buttonHTML||"&lt;&gt;",ht.title=V.buttonTitle||"Show HTML source",ht.type="button";var j=a(function(it){M.clipboard.dangerouslyPasteHTML(it)},"g");ht.onclick=function(it){it.preventDefault(),function(xt,z,X){var ft=xt.container.querySelector(".ql-editor").innerHTML,st=A("div"),wt=A("div"),P=z.msg||`Edit HTML here, when you click "OK" the quill editor's contents will be replaced`,U=z.cancelText||"Cancel",I=z.okText||"Ok",Q=z.closeOnClickOverlay!==!1;C(wt,"class","ql-html-overlayContainer"),C(st,"class","ql-html-popupContainer");var et=A("span");C(et,"class","ql-html-popupTitle"),et.innerText=P;var ct=A("div");ct.appendChild(et),C(ct,"class","ql-html-textContainer");var Et=A("pre");C(Et,"data-language","xml"),Et.innerText=(0,E.FormatHTMLStringIndentation)(ft,k);var mt=A("div");C(mt,"class","ql-html-textArea");var Nt=A("button");Nt.innerHTML=U,C(Nt,"class","ql-html-buttonCancel");var $t=A("button");$t.innerHTML=I,C($t,"class","ql-html-buttonOk");var Vt=A("div");C(Vt,"class","ql-html-buttonGroup");var te=document.querySelector(z.prependSelector);Vt.appendChild(Nt),Vt.appendChild($t),mt.appendChild(Et),ct.appendChild(mt),ct.appendChild(Vt),st.appendChild(ct),wt.appendChild(st),te?te.prepend(wt):document.body.appendChild(wt);var se=z&&z.editorModules,he=se&&Object.keys(se).length?se:{},Te=new y.default(mt,{modules:d({syntax:z.syntax},he)});Nt.onclick=function(){te?te.removeChild(wt):document.body.removeChild(wt)},Q&&(wt.onclick=Nt.onclick),st.onclick=function(fe){fe.preventDefault(),fe.stopPropagation()},$t.onclick=function(){var fe=Te.container.querySelector(".ql-editor").innerText,Gt=(0,x.OutputHTMLParser)(fe);k.log("OutputHTMLParser",{htmlInputFromPopup:fe,htmlOutputFormatted:Gt}),X(Gt),te?te.removeChild(wt):document.body.removeChild(wt)}}(M,V,j)},gt.appendChild(ht),ot?.appendChild(gt)},"d");s.htmlEditButton=H,window.htmlEditButton=H,s.default=H},429:(i,s,c)=>{"use strict";c.r(s),c.d(s,{Module:()=>Je,Parchment:()=>d,Range:()=>S,default:()=>JE});var d={};c.r(d),c.d(d,{Attributor:()=>Pn,AttributorStore:()=>Rs,BlockBlot:()=>Oo,ClassAttributor:()=>Oi,ContainerBlot:()=>js,EmbedBlot:()=>gi,InlineBlot:()=>Ul,LeafBlot:()=>Wn,ParentBlot:()=>Gi,Registry:()=>Ni,Scope:()=>qt,ScrollBlot:()=>Aa,StyleAttributor:()=>Ar,TextBlot:()=>ko});let m=a(function(){this.__data__=[],this.size=0},"s"),v=a(function(u,o){return u===o||u!=u&&o!=o},"i"),y=a(function(u,o){for(var h=u.length;h--;)if(v(u[h][0],o))return h;return-1},"o");var x=Array.prototype.splice;let E=a(function(u){var o=this.__data__,h=y(o,u);return!(h<0)&&(h==o.length-1?o.pop():x.call(o,h,1),--this.size,!0)},"a"),A=a(function(u){var o=this.__data__,h=y(o,u);return h<0?void 0:o[h][1]},"c"),C=a(function(u){return y(this.__data__,u)>-1},"u"),k=a(function(u,o){var h=this.__data__,p=y(h,u);return p<0?(++this.size,h.push([u,o])):h[p][1]=o,this},"h");function H(u){var o=-1,h=u==null?0:u.length;for(this.clear();++o<h;){var p=u[o];this.set(p[0],p[1])}}a(H,"d"),H.prototype.clear=m,H.prototype.delete=E,H.prototype.get=A,H.prototype.has=C,H.prototype.set=k;let M=H,q=a(function(){this.__data__=new M,this.size=0},"p"),V=a(function(u){var o=this.__data__,h=o.delete(u);return this.size=o.size,h},"g"),$=a(function(u){return this.__data__.get(u)},"m"),Y=a(function(u){return this.__data__.has(u)},"b"),ot=typeof global=="object"&&global&&global.Object===Object&&global;var gt=typeof self=="object"&&self&&self.Object===Object&&self;let ht=ot||gt||Function("return this")(),j=ht.Symbol;var it=Object.prototype,xt=it.hasOwnProperty,z=it.toString,X=j?j.toStringTag:void 0;let ft=a(function(u){var o=xt.call(u,X),h=u[X];try{u[X]=void 0;var p=!0}catch{}var b=z.call(u);return p&&(o?u[X]=h:delete u[X]),b},"k");var st=Object.prototype.toString;let wt=a(function(u){return st.call(u)},"L");var P=j?j.toStringTag:void 0;let U=a(function(u){return u==null?u===void 0?"[object Undefined]":"[object Null]":P&&P in Object(u)?ft(u):wt(u)},"T"),I=a(function(u){var o=typeof u;return u!=null&&(o=="object"||o=="function")},"S"),Q=a(function(u){if(!I(u))return!1;var o=U(u);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},"C"),et=ht["__core-js_shared__"];var ct,Et=(ct=/[^.]+$/.exec(et&&et.keys&&et.keys.IE_PROTO||""))?"Symbol(src)_1."+ct:"";let mt=a(function(u){return!!Et&&Et in u},"M");var Nt=Function.prototype.toString;let $t=a(function(u){if(u!=null){try{return Nt.call(u)}catch{}try{return u+""}catch{}}return""},"U");var Vt=/^\[object .+?Constructor\]$/,te=Function.prototype,se=Object.prototype,he=te.toString,Te=se.hasOwnProperty,fe=RegExp("^"+he.call(Te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let Gt=a(function(u){return!(!I(u)||mt(u))&&(Q(u)?fe:Vt).test($t(u))},"V"),ye=a(function(u,o){return u?.[o]},"K"),zt=a(function(u,o){var h=ye(u,o);return Gt(h)?h:void 0},"W"),ie=zt(ht,"Map"),Yt=zt(Object,"create"),Jt=a(function(){this.__data__=Yt?Yt(null):{},this.size=0},"X"),Se=a(function(u){var o=this.has(u)&&delete this.__data__[u];return this.size-=o?1:0,o},"Q");var ce=Object.prototype.hasOwnProperty;let Oe=a(function(u){var o=this.__data__;if(Yt){var h=o[u];return h==="__lodash_hash_undefined__"?void 0:h}return ce.call(o,u)?o[u]:void 0},"J");var De=Object.prototype.hasOwnProperty;let ze=a(function(u){var o=this.__data__;return Yt?o[u]!==void 0:De.call(o,u)},"et"),hn=a(function(u,o){var h=this.__data__;return this.size+=this.has(u)?0:1,h[u]=Yt&&o===void 0?"__lodash_hash_undefined__":o,this},"nt");function Be(u){var o=-1,h=u==null?0:u.length;for(this.clear();++o<h;){var p=u[o];this.set(p[0],p[1])}}a(Be,"rt"),Be.prototype.clear=Jt,Be.prototype.delete=Se,Be.prototype.get=Oe,Be.prototype.has=ze,Be.prototype.set=hn;let Ae=Be,Ue=a(function(){this.size=0,this.__data__={hash:new Ae,map:new(ie||M),string:new Ae}},"it"),an=a(function(u){var o=typeof u;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?u!=="__proto__":u===null},"ot"),me=a(function(u,o){var h=u.__data__;return an(o)?h[typeof o=="string"?"string":"hash"]:h.map},"lt"),Ve=a(function(u){var o=me(this,u).delete(u);return this.size-=o?1:0,o},"at"),Ye=a(function(u){return me(this,u).get(u)},"ct"),Xe=a(function(u){return me(this,u).has(u)},"ut"),He=a(function(u,o){var h=me(this,u),p=h.size;return h.set(u,o),this.size+=h.size==p?0:1,this},"ht");function oe(u){var o=-1,h=u==null?0:u.length;for(this.clear();++o<h;){var p=u[o];this.set(p[0],p[1])}}a(oe,"dt"),oe.prototype.clear=Ue,oe.prototype.delete=Ve,oe.prototype.get=Ye,oe.prototype.has=Xe,oe.prototype.set=He;let Le=oe,Zt=a(function(u,o){var h=this.__data__;if(h instanceof M){var p=h.__data__;if(!ie||p.length<199)return p.push([u,o]),this.size=++h.size,this;h=this.__data__=new Le(p)}return h.set(u,o),this.size=h.size,this},"pt");function de(u){var o=this.__data__=new M(u);this.size=o.size}a(de,"gt"),de.prototype.clear=q,de.prototype.delete=V,de.prototype.get=$,de.prototype.has=Y,de.prototype.set=Zt;let yn=de,fi=function(){try{var u=zt(Object,"defineProperty");return u({},"",{}),u}catch{}}(),In=a(function(u,o,h){o=="__proto__"&&fi?fi(u,o,{configurable:!0,enumerable:!0,value:h,writable:!0}):u[o]=h},"yt"),Li=a(function(u,o,h){(h!==void 0&&!v(u[o],h)||h===void 0&&!(o in u))&&In(u,o,h)},"vt"),Gn=function(u){return function(o,h,p){for(var b=-1,w=Object(o),T=p(o),N=T.length;N--;){var F=T[u?N:++b];if(h(w[F],F,w)===!1)break}return o}}();var zr=typeof di=="object"&&di&&!di.nodeType&&di,Er=zr&&typeof Ai=="object"&&Ai&&!Ai.nodeType&&Ai,O=Er&&Er.exports===zr?ht.Buffer:void 0,D=O?O.allocUnsafe:void 0;let W=a(function(u,o){if(o)return u.slice();var h=u.length,p=D?D(h):new u.constructor(h);return u.copy(p),p},"qt"),J=ht.Uint8Array,vt=a(function(u){var o=new u.constructor(u.byteLength);return new J(o).set(new J(u)),o},"_t"),Tt=a(function(u,o){var h=o?vt(u.buffer):u.buffer;return new u.constructor(h,u.byteOffset,u.length)},"Lt"),Wt=a(function(u,o){var h=-1,p=u.length;for(o||(o=Array(p));++h<p;)o[h]=u[h];return o},"Ot");var Mt=Object.create;let Ht=function(){function u(){}return a(u,"t"),function(o){if(!I(o))return{};if(Mt)return Mt(o);u.prototype=o;var h=new u;return u.prototype=void 0,h}}(),rt=a(function(u,o){return function(h){return u(o(h))}},"Ct"),Ft=rt(Object.getPrototypeOf,Object);var _e=Object.prototype;let dn=a(function(u){var o=u&&u.constructor;return u===(typeof o=="function"&&o.prototype||_e)},"It"),nn=a(function(u){return typeof u.constructor!="function"||dn(u)?{}:Ht(Ft(u))},"Mt"),We=a(function(u){return u!=null&&typeof u=="object"},"Bt"),ln=a(function(u){return We(u)&&U(u)=="[object Arguments]"},"Ut");var _n=Object.prototype,Hn=_n.hasOwnProperty,ei=_n.propertyIsEnumerable;let rr=ln(function(){return arguments}())?ln:function(u){return We(u)&&Hn.call(u,"callee")&&!ei.call(u,"callee")},Ze=Array.isArray,sr=a(function(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=9007199254740991},"$t"),pi=a(function(u){return u!=null&&sr(u.length)&&!Q(u)},"Vt"),$i=a(function(u){return We(u)&&pi(u)},"Kt"),Ci=a(function(){return!1},"Wt");var or=typeof di=="object"&&di&&!di.nodeType&&di,ar=or&&typeof Ai=="object"&&Ai&&!Ai.nodeType&&Ai,Tr=ar&&ar.exports===or?ht.Buffer:void 0;let Z=(Tr?Tr.isBuffer:void 0)||Ci;var lt=Function.prototype,Lt=Object.prototype,R=lt.toString,G=Lt.hasOwnProperty,yt=R.call(Object);let St=a(function(u){if(!We(u)||U(u)!="[object Object]")return!1;var o=Ft(u);if(o===null)return!0;var h=G.call(o,"constructor")&&o.constructor;return typeof h=="function"&&h instanceof h&&R.call(h)==yt},"re");var bt={};bt["[object Float32Array]"]=bt["[object Float64Array]"]=bt["[object Int8Array]"]=bt["[object Int16Array]"]=bt["[object Int32Array]"]=bt["[object Uint8Array]"]=bt["[object Uint8ClampedArray]"]=bt["[object Uint16Array]"]=bt["[object Uint32Array]"]=!0,bt["[object Arguments]"]=bt["[object Array]"]=bt["[object ArrayBuffer]"]=bt["[object Boolean]"]=bt["[object DataView]"]=bt["[object Date]"]=bt["[object Error]"]=bt["[object Function]"]=bt["[object Map]"]=bt["[object Number]"]=bt["[object Object]"]=bt["[object RegExp]"]=bt["[object Set]"]=bt["[object String]"]=bt["[object WeakMap]"]=!1;let It=a(function(u){return We(u)&&sr(u.length)&&!!bt[U(u)]},"ie"),ue=a(function(u){return function(o){return u(o)}},"oe");var xe=typeof di=="object"&&di&&!di.nodeType&&di,$e=xe&&typeof Ai=="object"&&Ai&&!Ai.nodeType&&Ai,Pe=$e&&$e.exports===xe&&ot.process;let dt=function(){try{var u=$e&&$e.require&&$e.require("util").types;return u||Pe&&Pe.binding&&Pe.binding("util")}catch{}}();var Bt=dt&&dt.isTypedArray;let ge=Bt?ue(Bt):It,we=a(function(u,o){if((o!=="constructor"||typeof u[o]!="function")&&o!="__proto__")return u[o]},"fe");var qe=Object.prototype.hasOwnProperty;let zn=a(function(u,o,h){var p=u[o];qe.call(u,o)&&v(p,h)&&(h!==void 0||o in u)||In(u,o,h)},"ge"),ae=a(function(u,o,h,p){var b=!h;h||(h={});for(var w=-1,T=o.length;++w<T;){var N=o[w],F=p?p(h[N],u[N],N,h,u):void 0;F===void 0&&(F=u[N]),b?In(h,N,F):zn(h,N,F)}return h},"me"),ke=a(function(u,o){for(var h=-1,p=Array(u);++h<u;)p[h]=o(h);return p},"be");var pe=/^(?:0|[1-9]\d*)$/;let Dn=a(function(u,o){var h=typeof u;return!!(o=o??9007199254740991)&&(h=="number"||h!="symbol"&&pe.test(u))&&u>-1&&u%1==0&&u<o},"ve");var os=Object.prototype.hasOwnProperty;let Ur=a(function(u,o){var h=Ze(u),p=!h&&rr(u),b=!h&&!p&&Z(u),w=!h&&!p&&!b&&ge(u),T=h||p||b||w,N=T?ke(u.length,String):[],F=N.length;for(var nt in u)!o&&!os.call(u,nt)||T&&(nt=="length"||b&&(nt=="offset"||nt=="parent")||w&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||Dn(nt,F))||N.push(nt);return N},"Ne"),Ee=a(function(u){var o=[];if(u!=null)for(var h in Object(u))o.push(h);return o},"we");var ve=Object.prototype.hasOwnProperty;let Vr=a(function(u){if(!I(u))return Ee(u);var o=dn(u),h=[];for(var p in u)(p!="constructor"||!o&&ve.call(u,p))&&h.push(p);return h},"Ae"),Un=a(function(u){return pi(u)?Ur(u,!0):Vr(u)},"qe"),Wr=a(function(u){return ae(u,Un(u))},"ke"),Vn=a(function(u,o,h,p,b,w,T){var N=we(u,h),F=we(o,h),nt=T.get(F);if(nt)Li(u,h,nt);else{var _t=w?w(N,F,h+"",u,o,T):void 0,Dt=_t===void 0;if(Dt){var Pt=Ze(F),Ut=!Pt&&Z(F),jt=!Pt&&!Ut&&ge(F);_t=F,Pt||Ut||jt?Ze(N)?_t=N:$i(N)?_t=Wt(N):Ut?(Dt=!1,_t=W(F,!0)):jt?(Dt=!1,_t=Tt(F,!0)):_t=[]:St(F)||rr(F)?(_t=N,rr(N)?_t=Wr(N):I(N)&&!Q(N)||(_t=nn(F))):Dt=!1}Dt&&(T.set(F,_t),b(_t,F,p,w,T),T.delete(F)),Li(u,h,_t)}},"_e"),mi=a(function u(o,h,p,b,w){o!==h&&Gn(h,function(T,N){if(w||(w=new yn),I(T))Vn(o,h,N,p,u,b,w);else{var F=b?b(we(o,N),T,N+"",o,h,w):void 0;F===void 0&&(F=T),Li(o,N,F)}},Un)},"t"),ni=a(function(u){return u},"Oe"),Zr=a(function(u,o,h){switch(h.length){case 0:return u.call(o);case 1:return u.call(o,h[0]);case 2:return u.call(o,h[0],h[1]);case 3:return u.call(o,h[0],h[1],h[2])}return u.apply(o,h)},"Te");var Sr=Math.max;let No=a(function(u,o,h){return o=Sr(o===void 0?u.length-1:o,0),function(){for(var p=arguments,b=-1,w=Sr(p.length-o,0),T=Array(w);++b<w;)T[b]=p[o+b];b=-1;for(var N=Array(o+1);++b<o;)N[b]=p[b];return N[o]=h(T),Zr(u,this,N)}},"Ce"),Xt=a(function(u){return function(){return u}},"je"),En=fi?function(u,o){return fi(u,"toString",{configurable:!0,enumerable:!1,value:Xt(o),writable:!0})}:ni;var Me=Date.now;let as=function(u){var o=0,h=0;return function(){var p=Me(),b=16-(p-h);if(h=p,b>0){if(++o>=800)return arguments[0]}else o=0;return u.apply(void 0,arguments)}}(En),ls=a(function(u,o){return as(No(u,o,ni),u+"")},"Be"),$r=a(function(u,o,h){if(!I(h))return!1;var p=typeof o;return!!(p=="number"?pi(h)&&Dn(o,h.length):p=="string"&&o in h)&&v(h[o],u)},"Ue"),Yn=function(u){return ls(function(o,h){var p=-1,b=h.length,w=b>1?h[b-1]:void 0,T=b>2?h[2]:void 0;for(w=u.length>3&&typeof w=="function"?(b--,w):void 0,T&&$r(h[0],h[1],T)&&(w=b<3?void 0:w,b=1),o=Object(o);++p<b;){var N=h[p];N&&u(o,N,p,w)}return o})}(function(u,o,h){mi(u,o,h)});var qt=(u=>(u[u.TYPE=3]="TYPE",u[u.LEVEL=12]="LEVEL",u[u.ATTRIBUTE=13]="ATTRIBUTE",u[u.BLOT=14]="BLOT",u[u.INLINE=7]="INLINE",u[u.BLOCK=11]="BLOCK",u[u.BLOCK_BLOT=10]="BLOCK_BLOT",u[u.INLINE_BLOT=6]="INLINE_BLOT",u[u.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",u[u.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",u[u.ANY=15]="ANY",u))(qt||{});class Pn{static{a(this,"ze")}constructor(o,h,p={}){this.attrName=o,this.keyName=h;let b=qt.TYPE&qt.ATTRIBUTE;this.scope=p.scope!=null?p.scope&qt.LEVEL|b:qt.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}static keys(o){return Array.from(o.attributes).map(h=>h.name)}add(o,h){return!!this.canAdd(o,h)&&(o.setAttribute(this.keyName,h),!0)}canAdd(o,h){return this.whitelist==null||(typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1)}remove(o){o.removeAttribute(this.keyName)}value(o){let h=o.getAttribute(this.keyName);return this.canAdd(o,h)&&h?h:""}}class Xn extends Error{static{a(this,"He")}constructor(o){super(o="[Parchment] "+o),this.message=o,this.name=this.constructor.name}}let Tn=class yv{static{a(this,"t")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(o,h=!1){if(o==null)return null;if(this.blots.has(o))return this.blots.get(o)||null;if(h){let p=null;try{p=o.parentNode}catch{return null}return this.find(p,h)}return null}create(o,h,p){let b=this.query(h);if(b==null)throw new Xn(`Unable to create ${h} blot`);let w=b,T=h instanceof Node||h.nodeType===Node.TEXT_NODE?h:w.create(p),N=new w(o,T,p);return yv.blots.set(N.domNode,N),N}find(o,h=!1){return yv.find(o,h)}query(o,h=qt.ANY){let p;return typeof o=="string"?p=this.types[o]||this.attributes[o]:o instanceof Text||o.nodeType===Node.TEXT_NODE?p=this.types.text:typeof o=="number"?o&qt.LEVEL&qt.BLOCK?p=this.types.block:o&qt.LEVEL&qt.INLINE&&(p=this.types.inline):o instanceof Element&&((o.getAttribute("class")||"").split(/\s+/).some(b=>(p=this.classes[b],!!p)),p=p||this.tags[o.tagName]),p==null?null:"scope"in p&&h&qt.LEVEL&p.scope&&h&qt.TYPE&p.scope?p:null}register(...o){return o.map(h=>{let p="blotName"in h,b="attrName"in h;if(!p&&!b)throw new Xn("Invalid definition");if(p&&h.blotName==="abstract")throw new Xn("Cannot register abstract class");let w=p?h.blotName:b?h.attrName:void 0;return this.types[w]=h,b?typeof h.keyName=="string"&&(this.attributes[h.keyName]=h):p&&(h.className&&(this.classes[h.className]=h),h.tagName&&(Array.isArray(h.tagName)?h.tagName=h.tagName.map(T=>T.toUpperCase()):h.tagName=h.tagName.toUpperCase(),(Array.isArray(h.tagName)?h.tagName:[h.tagName]).forEach(T=>{(this.tags[T]==null||h.className==null)&&(this.tags[T]=h)}))),h})}};Tn.blots=new WeakMap;let Ni=Tn;function jl(u,o){return(u.getAttribute("class")||"").split(/\s+/).filter(h=>h.indexOf(`${o}-`)===0)}a(jl,"Ve");let Oi=class extends Pn{static{a(this,"Ke")}static keys(u){return(u.getAttribute("class")||"").split(/\s+/).map(o=>o.split("-").slice(0,-1).join("-"))}add(u,o){return!!this.canAdd(u,o)&&(this.remove(u),u.classList.add(`${this.keyName}-${o}`),!0)}remove(u){jl(u,this.keyName).forEach(o=>{u.classList.remove(o)}),u.classList.length===0&&u.removeAttribute("class")}value(u){let o=(jl(u,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(u,o)?o:""}};function Fl(u){let o=u.split("-"),h=o.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("");return o[0]+h}a(Fl,"We");let Ar=class extends Pn{static{a(this,"Ze")}static keys(u){return(u.getAttribute("style")||"").split(";").map(o=>o.split(":")[0].trim())}add(u,o){return!!this.canAdd(u,o)&&(u.style[Fl(this.keyName)]=o,!0)}remove(u){u.style[Fl(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")}value(u){let o=u.style[Fl(this.keyName)];return this.canAdd(u,o)?o:""}},Rs=class{static{a(this,"Ge")}constructor(u){this.attributes={},this.domNode=u,this.build()}attribute(u,o){o?u.add(this.domNode,o)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])}build(){this.attributes={};let u=Ni.find(this.domNode);if(u==null)return;let o=Pn.keys(this.domNode),h=Oi.keys(this.domNode),p=Ar.keys(this.domNode);o.concat(h).concat(p).forEach(b=>{let w=u.scroll.query(b,qt.ATTRIBUTE);w instanceof Pn&&(this.attributes[w.attrName]=w)})}copy(u){Object.keys(this.attributes).forEach(o=>{let h=this.attributes[o].value(this.domNode);u.format(o,h)})}move(u){this.copy(u),Object.keys(this.attributes).forEach(o=>{this.attributes[o].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((u,o)=>(u[o]=this.attributes[o].value(this.domNode),u),{})}},Hu=class{static{a(this,"Xe")}constructor(u,o){this.scroll=u,this.domNode=o,Ni.blots.set(o,this),this.prev=null,this.next=null}static create(u){if(this.tagName==null)throw new Xn("Blot definition missing tagName");let o,h;return Array.isArray(this.tagName)?(typeof u=="string"?(h=u.toUpperCase(),parseInt(h,10).toString()===h&&(h=parseInt(h,10))):typeof u=="number"&&(h=u),o=typeof h=="number"?document.createElement(this.tagName[h-1]):h&&this.tagName.indexOf(h)>-1?document.createElement(h):document.createElement(this.tagName[0])):o=document.createElement(this.tagName),this.className&&o.classList.add(this.className),o}get statics(){return this.constructor}attach(){}clone(){let u=this.domNode.cloneNode(!1);return this.scroll.create(u)}detach(){this.parent!=null&&this.parent.removeChild(this),Ni.blots.delete(this.domNode)}deleteAt(u,o){this.isolate(u,o).remove()}formatAt(u,o,h,p){let b=this.isolate(u,o);if(this.scroll.query(h,qt.BLOT)!=null&&p)b.wrap(h,p);else if(this.scroll.query(h,qt.ATTRIBUTE)!=null){let w=this.scroll.create(this.statics.scope);b.wrap(w),w.format(h,p)}}insertAt(u,o,h){let p=h==null?this.scroll.create("text",o):this.scroll.create(o,h),b=this.split(u);this.parent.insertBefore(p,b||void 0)}isolate(u,o){let h=this.split(u);if(h==null)throw new Error("Attempt to isolate at end");return h.split(o),h}length(){return 1}offset(u=this.parent){return this.parent==null||this===u?0:this.parent.children.offset(this)+this.parent.offset(u)}optimize(u){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(u,o){let h=typeof u=="string"?this.scroll.create(u,o):u;return this.parent!=null&&(this.parent.insertBefore(h,this.next||void 0),this.remove()),h}split(u,o){return u===0?this:this.next}update(u,o){}wrap(u,o){let h=typeof u=="string"?this.scroll.create(u,o):u;if(this.parent!=null&&this.parent.insertBefore(h,this.next||void 0),typeof h.appendChild!="function")throw new Xn(`Cannot wrap ${u}`);return h.appendChild(this),h}};Hu.blotName="abstract";let Hl=Hu,be=class extends Hl{static{a(this,"Ye")}static value(u){return!0}index(u,o){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(o,1):-1}position(u,o){let h=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return u>0&&(h+=1),[this.parent.domNode,h]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};be.scope=qt.INLINE_BLOT;let Wn=be;class Ki{static{a(this,"tn")}constructor(){this.head=null,this.tail=null,this.length=0}append(...o){if(this.insertBefore(o[0],null),o.length>1){let h=o.slice(1);this.append(...h)}}at(o){let h=this.iterator(),p=h();for(;p&&o>0;)o-=1,p=h();return p}contains(o){let h=this.iterator(),p=h();for(;p;){if(p===o)return!0;p=h()}return!1}indexOf(o){let h=this.iterator(),p=h(),b=0;for(;p;){if(p===o)return b;b+=1,p=h()}return-1}insertBefore(o,h){o!=null&&(this.remove(o),o.next=h,h!=null?(o.prev=h.prev,h.prev!=null&&(h.prev.next=o),h.prev=o,h===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)}offset(o){let h=0,p=this.head;for(;p!=null;){if(p===o)return h;h+=p.length(),p=p.next}return-1}remove(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)}iterator(o=this.head){return()=>{let h=o;return o!=null&&(o=o.next),h}}find(o,h=!1){let p=this.iterator(),b=p();for(;b;){let w=b.length();if(o<w||h&&o===w&&(b.next==null||b.next.length()!==0))return[b,o];o-=w,b=p()}return[null,0]}forEach(o){let h=this.iterator(),p=h();for(;p;)o(p),p=h()}forEachAt(o,h,p){if(h<=0)return;let[b,w]=this.find(o),T=o-w,N=this.iterator(b),F=N();for(;F&&T<o+h;){let nt=F.length();o>T?p(F,o-T,Math.min(h,T+nt-o)):p(F,0,Math.min(nt,o+h-T)),T+=nt,F=N()}}map(o){return this.reduce((h,p)=>(h.push(o(p)),h),[])}reduce(o,h){let p=this.iterator(),b=p();for(;b;)h=o(h,b),b=p();return h}}function Bs(u,o){let h=o.find(u);if(h)return h;try{return o.create(u)}catch{let p=o.create(qt.INLINE);return Array.from(u.childNodes).forEach(b=>{p.domNode.appendChild(b)}),u.parentNode&&u.parentNode.replaceChild(p.domNode,u),p.attach(),p}}a(Bs,"en");let zl=class Ao extends Hl{static{a(this,"t")}constructor(o,h){super(o,h),this.uiNode=null,this.build()}appendChild(o){this.insertBefore(o)}attach(){super.attach(),this.children.forEach(o=>{o.attach()})}attachUI(o){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=o,Ao.uiClass&&this.uiNode.classList.add(Ao.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Ki,Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).reverse().forEach(o=>{try{let h=Bs(o,this.scroll);this.insertBefore(h,this.children.head||void 0)}catch(h){if(h instanceof Xn)return;throw h}})}deleteAt(o,h){if(o===0&&h===this.length())return this.remove();this.children.forEachAt(o,h,(p,b,w)=>{p.deleteAt(b,w)})}descendant(o,h=0){let[p,b]=this.children.find(h);return o.blotName==null&&o(p)||o.blotName!=null&&p instanceof o?[p,b]:p instanceof Ao?p.descendant(o,b):[null,-1]}descendants(o,h=0,p=Number.MAX_VALUE){let b=[],w=p;return this.children.forEachAt(h,p,(T,N,F)=>{(o.blotName==null&&o(T)||o.blotName!=null&&T instanceof o)&&b.push(T),T instanceof Ao&&(b=b.concat(T.descendants(o,N,w))),w-=F}),b}detach(){this.children.forEach(o=>{o.detach()}),super.detach()}enforceAllowedChildren(){let o=!1;this.children.forEach(h=>{o||this.statics.allowedChildren.some(p=>h instanceof p)||(h.statics.scope===qt.BLOCK_BLOT?(h.next!=null&&this.splitAfter(h),h.prev!=null&&this.splitAfter(h.prev),h.parent.unwrap(),o=!0):h instanceof Ao?h.unwrap():h.remove())})}formatAt(o,h,p,b){this.children.forEachAt(o,h,(w,T,N)=>{w.formatAt(T,N,p,b)})}insertAt(o,h,p){let[b,w]=this.children.find(o);if(b)b.insertAt(w,h,p);else{let T=p==null?this.scroll.create("text",h):this.scroll.create(h,p);this.appendChild(T)}}insertBefore(o,h){o.parent!=null&&o.parent.children.remove(o);let p=null;this.children.insertBefore(o,h||null),o.parent=this,h!=null&&(p=h.domNode),(this.domNode.parentNode!==o.domNode||this.domNode.nextSibling!==p)&&this.domNode.insertBefore(o.domNode,p),o.attach()}length(){return this.children.reduce((o,h)=>o+h.length(),0)}moveChildren(o,h){this.children.forEach(p=>{o.insertBefore(p,h)})}optimize(o){if(super.optimize(o),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let h=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(h)}else this.remove()}path(o,h=!1){let[p,b]=this.children.find(o,h),w=[[this,o]];return p instanceof Ao?w.concat(p.path(b,h)):(p!=null&&w.push([p,b]),w)}removeChild(o){this.children.remove(o)}replaceWith(o,h){let p=typeof o=="string"?this.scroll.create(o,h):o;return p instanceof Ao&&this.moveChildren(p),super.replaceWith(p)}split(o,h=!1){if(!h){if(o===0)return this;if(o===this.length())return this.next}let p=this.clone();return this.parent&&this.parent.insertBefore(p,this.next||void 0),this.children.forEachAt(o,this.length(),(b,w,T)=>{let N=b.split(w,h);N!=null&&p.appendChild(N)}),p}splitAfter(o){let h=this.clone();for(;o.next!=null;)h.appendChild(o.next);return this.parent&&this.parent.insertBefore(h,this.next||void 0),h}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(o,h){let p=[],b=[];o.forEach(w=>{w.target===this.domNode&&w.type==="childList"&&(p.push(...w.addedNodes),b.push(...w.removedNodes))}),b.forEach(w=>{if(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let T=this.scroll.find(w);T!=null&&(T.domNode.parentNode==null||T.domNode.parentNode===this.domNode)&&T.detach()}),p.filter(w=>w.parentNode===this.domNode&&w!==this.uiNode).sort((w,T)=>w===T?0:w.compareDocumentPosition(T)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(w=>{let T=null;w.nextSibling!=null&&(T=this.scroll.find(w.nextSibling));let N=Bs(w,this.scroll);(N.next!==T||N.next==null)&&(N.parent!=null&&N.parent.removeChild(this),this.insertBefore(N,T||void 0))}),this.enforceAllowedChildren()}};zl.uiClass="";let Gi=zl,Kr=class Rl extends Gi{static{a(this,"t")}static create(o){return super.create(o)}static formats(o,h){let p=h.query(Rl.blotName);if(p==null||o.tagName!==p.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return o.tagName.toLowerCase()}}constructor(o,h){super(o,h),this.attributes=new Rs(this.domNode)}format(o,h){if(o!==this.statics.blotName||h){let p=this.scroll.query(o,qt.INLINE);if(p==null)return;p instanceof Pn?this.attributes.attribute(p,h):h&&(o!==this.statics.blotName||this.formats()[o]!==h)&&this.replaceWith(o,h)}else this.children.forEach(p=>{p instanceof Rl||(p=p.wrap(Rl.blotName,!0)),this.attributes.copy(p)}),this.unwrap()}formats(){let o=this.attributes.values(),h=this.statics.formats(this.domNode,this.scroll);return h!=null&&(o[this.statics.blotName]=h),o}formatAt(o,h,p,b){this.formats()[p]!=null||this.scroll.query(p,qt.ATTRIBUTE)?this.isolate(o,h).format(p,b):super.formatAt(o,h,p,b)}optimize(o){super.optimize(o);let h=this.formats();if(Object.keys(h).length===0)return this.unwrap();let p=this.next;p instanceof Rl&&p.prev===this&&function(b,w){if(Object.keys(b).length!==Object.keys(w).length)return!1;for(let T in b)if(b[T]!==w[T])return!1;return!0}(h,p.formats())&&(p.moveChildren(this),p.remove())}replaceWith(o,h){let p=super.replaceWith(o,h);return this.attributes.copy(p),p}update(o,h){super.update(o,h),o.some(p=>p.target===this.domNode&&p.type==="attributes")&&this.attributes.build()}wrap(o,h){let p=super.wrap(o,h);return p instanceof Rl&&this.attributes.move(p),p}};Kr.allowedChildren=[Kr,Wn],Kr.blotName="inline",Kr.scope=qt.INLINE_BLOT,Kr.tagName="SPAN";let Ul=Kr,cs=class _v extends Gi{static{a(this,"t")}static create(o){return super.create(o)}static formats(o,h){let p=h.query(_v.blotName);if(p==null||o.tagName!==p.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return o.tagName.toLowerCase()}}constructor(o,h){super(o,h),this.attributes=new Rs(this.domNode)}format(o,h){let p=this.scroll.query(o,qt.BLOCK);p!=null&&(p instanceof Pn?this.attributes.attribute(p,h):o!==this.statics.blotName||h?h&&(o!==this.statics.blotName||this.formats()[o]!==h)&&this.replaceWith(o,h):this.replaceWith(_v.blotName))}formats(){let o=this.attributes.values(),h=this.statics.formats(this.domNode,this.scroll);return h!=null&&(o[this.statics.blotName]=h),o}formatAt(o,h,p,b){this.scroll.query(p,qt.BLOCK)!=null?this.format(p,b):super.formatAt(o,h,p,b)}insertAt(o,h,p){if(p==null||this.scroll.query(h,qt.INLINE)!=null)super.insertAt(o,h,p);else{let b=this.split(o);if(b==null)throw new Error("Attempt to insertAt after block boundaries");{let w=this.scroll.create(h,p);b.parent.insertBefore(w,b)}}}replaceWith(o,h){let p=super.replaceWith(o,h);return this.attributes.copy(p),p}update(o,h){super.update(o,h),o.some(p=>p.target===this.domNode&&p.type==="attributes")&&this.attributes.build()}};cs.blotName="block",cs.scope=qt.BLOCK_BLOT,cs.tagName="P",cs.allowedChildren=[Ul,cs,Wn];let Oo=cs,Vl=class extends Gi{static{a(this,"cn")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(u,o){super.deleteAt(u,o),this.enforceAllowedChildren()}formatAt(u,o,h,p){super.formatAt(u,o,h,p),this.enforceAllowedChildren()}insertAt(u,o,h){super.insertAt(u,o,h),this.enforceAllowedChildren()}optimize(u){super.optimize(u),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Vl.blotName="container",Vl.scope=qt.BLOCK_BLOT;let js=Vl,gi=class extends Wn{static{a(this,"hn")}static formats(u,o){}format(u,o){super.formatAt(0,this.length(),u,o)}formatAt(u,o,h,p){u===0&&o===this.length()?this.format(h,p):super.formatAt(u,o,h,p)}formats(){return this.statics.formats(this.domNode,this.scroll)}},lr={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Fs=class extends Gi{static{a(this,"fn")}constructor(u,o){super(null,o),this.registry=u,this.scroll=this,this.build(),this.observer=new MutationObserver(h=>{this.update(h)}),this.observer.observe(this.domNode,lr),this.attach()}create(u,o){return this.registry.create(this,u,o)}find(u,o=!1){let h=this.registry.find(u,o);return h?h.scroll===this?h:o?this.find(h.scroll.domNode.parentNode,!0):null:null}query(u,o=qt.ANY){return this.registry.query(u,o)}register(...u){return this.registry.register(...u)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(u,o){this.update(),u===0&&o===this.length()?this.children.forEach(h=>{h.remove()}):super.deleteAt(u,o)}formatAt(u,o,h,p){this.update(),super.formatAt(u,o,h,p)}insertAt(u,o,h){this.update(),super.insertAt(u,o,h)}optimize(u=[],o={}){super.optimize(o);let h=o.mutationsMap||new WeakMap,p=Array.from(this.observer.takeRecords());for(;p.length>0;)u.push(p.pop());let b=a((N,F=!0)=>{N==null||N===this||N.domNode.parentNode!=null&&(h.has(N.domNode)||h.set(N.domNode,[]),F&&b(N.parent))},"s"),w=a(N=>{h.has(N.domNode)&&(N instanceof Gi&&N.children.forEach(w),h.delete(N.domNode),N.optimize(o))},"i"),T=u;for(let N=0;T.length>0;N+=1){if(N>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(T.forEach(F=>{let nt=this.find(F.target,!0);nt!=null&&(nt.domNode===F.target&&(F.type==="childList"?(b(this.find(F.previousSibling,!1)),Array.from(F.addedNodes).forEach(_t=>{let Dt=this.find(_t,!1);b(Dt,!1),Dt instanceof Gi&&Dt.children.forEach(Pt=>{b(Pt,!1)})})):F.type==="attributes"&&b(nt.prev)),b(nt))}),this.children.forEach(w),T=Array.from(this.observer.takeRecords()),p=T.slice();p.length>0;)u.push(p.pop())}}update(u,o={}){u=u||this.observer.takeRecords();let h=new WeakMap;u.map(p=>{let b=this.find(p.target,!0);return b==null?null:h.has(b.domNode)?(h.get(b.domNode).push(p),null):(h.set(b.domNode,[p]),b)}).forEach(p=>{p!=null&&p!==this&&h.has(p.domNode)&&p.update(h.get(p.domNode)||[],o)}),o.mutationsMap=h,h.has(this.domNode)&&super.update(h.get(this.domNode),o),this.optimize(u,o)}};Fs.blotName="scroll",Fs.defaultChild=Oo,Fs.allowedChildren=[Oo,js],Fs.scope=qt.BLOCK_BLOT,Fs.tagName="DIV";let Aa=Fs,cr=class zx extends Wn{static{a(this,"t")}static create(o){return document.createTextNode(o)}static value(o){return o.data}constructor(o,h){super(o,h),this.text=this.statics.value(this.domNode)}deleteAt(o,h){this.domNode.data=this.text=this.text.slice(0,o)+this.text.slice(o+h)}index(o,h){return this.domNode===o?h:-1}insertAt(o,h,p){p==null?(this.text=this.text.slice(0,o)+h+this.text.slice(o),this.domNode.data=this.text):super.insertAt(o,h,p)}length(){return this.text.length}optimize(o){super.optimize(o),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof zx&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(o,h=!1){return[this.domNode,o]}split(o,h=!1){if(!h){if(o===0)return this;if(o===this.length())return this.next}let p=this.scroll.create(this.domNode.splitText(o));return this.parent.insertBefore(p,this.next||void 0),this.text=this.statics.value(this.domNode),p}update(o,h){o.some(p=>p.type==="characterData"&&p.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};cr.blotName="text",cr.scope=qt.INLINE_BLOT;let ko=cr;var kt=c(660);let Wl=a(function(u,o){for(var h=-1,p=u==null?0:u.length;++h<p&&o(u[h],h,u)!==!1;);return u},"yn"),Af=rt(Object.keys,Object);var zu=Object.prototype.hasOwnProperty;let Uu=a(function(u){if(!dn(u))return Af(u);var o=[];for(var h in Object(u))zu.call(u,h)&&h!="constructor"&&o.push(h);return o},"Nn"),Zl=a(function(u){return pi(u)?Ur(u):Uu(u)},"wn"),Lf=a(function(u,o){return u&&ae(o,Zl(o),u)},"En"),$l=a(function(u,o){return u&&ae(o,Un(o),u)},"An"),Cf=a(function(u,o){for(var h=-1,p=u==null?0:u.length,b=0,w=[];++h<p;){var T=u[h];o(T,h,u)&&(w[b++]=T)}return w},"qn"),Kl=a(function(){return[]},"kn");var Vu=Object.prototype.propertyIsEnumerable,Mo=Object.getOwnPropertySymbols;let Lr=Mo?function(u){return u==null?[]:(u=Object(u),Cf(Mo(u),function(o){return Vu.call(u,o)}))}:Kl,Nf=a(function(u,o){return ae(u,Lr(u),o)},"Tn"),Hs=a(function(u,o){for(var h=-1,p=o.length,b=u.length;++h<p;)u[b+h]=o[h];return u},"Sn"),vi=Object.getOwnPropertySymbols?function(u){for(var o=[];u;)Hs(o,Lr(u)),u=Ft(u);return o}:Kl,Wu=a(function(u,o){return ae(u,vi(u),o)},"jn"),Gl=a(function(u,o,h){var p=o(u);return Ze(u)?p:Hs(p,h(u))},"Rn"),Yl=a(function(u){return Gl(u,Zl,Lr)},"In"),Xl=a(function(u){return Gl(u,Un,vi)},"Mn"),Io=zt(ht,"DataView"),Jl=zt(ht,"Promise"),Ql=zt(ht,"Set"),La=zt(ht,"WeakMap");var Zu="[object Map]",ki="[object Promise]",us="[object Set]",$u="[object WeakMap]",ur="[object DataView]",Of=$t(Io),zs=$t(ie),kf=$t(Jl),Do=$t(Ql),Ku=$t(La),hr=U;(Io&&hr(new Io(new ArrayBuffer(1)))!=ur||ie&&hr(new ie)!=Zu||Jl&&hr(Jl.resolve())!=ki||Ql&&hr(new Ql)!=us||La&&hr(new La)!=$u)&&(hr=a(function(u){var o=U(u),h=o=="[object Object]"?u.constructor:void 0,p=h?$t(h):"";if(p)switch(p){case Of:return ur;case zs:return Zu;case kf:return ki;case Do:return us;case Ku:return $u}return o},"Qn"));let Po=hr;var Gr=Object.prototype.hasOwnProperty;let Ca=a(function(u){var o=u.length,h=new u.constructor(o);return o&&typeof u[0]=="string"&&Gr.call(u,"index")&&(h.index=u.index,h.input=u.input),h},"tr"),Mf=a(function(u,o){var h=o?vt(u.buffer):u.buffer;return new u.constructor(h,u.byteOffset,u.byteLength)},"er");var tc=/\w*$/;let If=a(function(u){var o=new u.constructor(u.source,tc.exec(u));return o.lastIndex=u.lastIndex,o},"rr");var dr=j?j.prototype:void 0,Gu=dr?dr.valueOf:void 0;let Us=a(function(u){return Gu?Object(Gu.call(u)):{}},"or"),Df=a(function(u,o,h){var p=u.constructor;switch(o){case"[object ArrayBuffer]":return vt(u);case"[object Boolean]":case"[object Date]":return new p(+u);case"[object DataView]":return Mf(u,h);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Tt(u,h);case"[object Map]":case"[object Set]":return new p;case"[object Number]":case"[object String]":return new p(u);case"[object RegExp]":return If(u);case"[object Symbol]":return Us(u)}},"lr"),Cr=a(function(u){return We(u)&&Po(u)=="[object Map]"},"ar");var qo=dt&&dt.isMap;let Yu=qo?ue(qo):Cr,ec=a(function(u){return We(u)&&Po(u)=="[object Set]"},"hr");var Ro=dt&&dt.isSet;let nc=Ro?ue(Ro):ec;var Bo="[object Arguments]",hs="[object Function]",jo="[object Object]",Re={};Re[Bo]=Re["[object Array]"]=Re["[object ArrayBuffer]"]=Re["[object DataView]"]=Re["[object Boolean]"]=Re["[object Date]"]=Re["[object Float32Array]"]=Re["[object Float64Array]"]=Re["[object Int8Array]"]=Re["[object Int16Array]"]=Re["[object Int32Array]"]=Re["[object Map]"]=Re["[object Number]"]=Re[jo]=Re["[object RegExp]"]=Re["[object Set]"]=Re["[object String]"]=Re["[object Symbol]"]=Re["[object Uint8Array]"]=Re["[object Uint8ClampedArray]"]=Re["[object Uint16Array]"]=Re["[object Uint32Array]"]=!0,Re["[object Error]"]=Re[hs]=Re["[object WeakMap]"]=!1;let Xu=a(function u(o,h,p,b,w,T){var N,F=1&h,nt=2&h,_t=4&h;if(p&&(N=w?p(o,b,w,T):p(o)),N!==void 0)return N;if(!I(o))return o;var Dt=Ze(o);if(Dt){if(N=Ca(o),!F)return Wt(o,N)}else{var Pt=Po(o),Ut=Pt==hs||Pt=="[object GeneratorFunction]";if(Z(o))return W(o,F);if(Pt==jo||Pt==Bo||Ut&&!w){if(N=nt||Ut?{}:nn(o),!F)return nt?Wu(o,$l(N,o)):Nf(o,Lf(N,o))}else{if(!Re[Pt])return w?o:{};N=Df(o,Pt,F)}}T||(T=new yn);var jt=T.get(o);if(jt)return jt;T.set(o,N),nc(o)?o.forEach(function(Ke){N.add(u(Ke,h,p,Ke,o,T))}):Yu(o)&&o.forEach(function(Ke,Jn){N.set(Jn,u(Ke,h,p,Jn,o,T))});var ne=Dt?void 0:(_t?nt?Xl:Yl:nt?Un:Zl)(o);return Wl(ne||o,function(Ke,Jn){ne&&(Ke=o[Jn=Ke]),zn(N,Jn,u(Ke,h,p,Jn,o,T))}),N},"t"),Vs=a(function(u){return Xu(u,5)},"vr"),Na=a(function(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this},"xr"),Pf=a(function(u){return this.__data__.has(u)},"Nr");function Fo(u){var o=-1,h=u==null?0:u.length;for(this.__data__=new Le;++o<h;)this.add(u[o])}a(Fo,"wr"),Fo.prototype.add=Fo.prototype.push=Na,Fo.prototype.has=Pf;let qf=Fo,Ju=a(function(u,o){for(var h=-1,p=u==null?0:u.length;++h<p;)if(o(u[h],h,u))return!0;return!1},"Ar"),Rf=a(function(u,o){return u.has(o)},"qr"),Yi=a(function(u,o,h,p,b,w){var T=1&h,N=u.length,F=o.length;if(N!=F&&!(T&&F>N))return!1;var nt=w.get(u),_t=w.get(o);if(nt&&_t)return nt==o&&_t==u;var Dt=-1,Pt=!0,Ut=2&h?new qf:void 0;for(w.set(u,o),w.set(o,u);++Dt<N;){var jt=u[Dt],ne=o[Dt];if(p)var Ke=T?p(ne,jt,Dt,o,u,w):p(jt,ne,Dt,u,o,w);if(Ke!==void 0){if(Ke)continue;Pt=!1;break}if(Ut){if(!Ju(o,function(Jn,Pr){if(!Rf(Ut,Pr)&&(jt===Jn||b(jt,Jn,h,p,w)))return Ut.push(Pr)})){Pt=!1;break}}else if(jt!==ne&&!b(jt,ne,h,p,w)){Pt=!1;break}}return w.delete(u),w.delete(o),Pt},"kr"),Oa=a(function(u){var o=-1,h=Array(u.size);return u.forEach(function(p,b){h[++o]=[b,p]}),h},"_r"),Bf=a(function(u){var o=-1,h=Array(u.size);return u.forEach(function(p){h[++o]=p}),h},"Lr");var Ho=j?j.prototype:void 0,ic=Ho?Ho.valueOf:void 0;let Qu=a(function(u,o,h,p,b,w,T){switch(h){case"[object DataView]":if(u.byteLength!=o.byteLength||u.byteOffset!=o.byteOffset)return!1;u=u.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(u.byteLength!=o.byteLength||!w(new J(u),new J(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return v(+u,+o);case"[object Error]":return u.name==o.name&&u.message==o.message;case"[object RegExp]":case"[object String]":return u==o+"";case"[object Map]":var N=Oa;case"[object Set]":var F=1&p;if(N||(N=Bf),u.size!=o.size&&!F)return!1;var nt=T.get(u);if(nt)return nt==o;p|=2,T.set(u,o);var _t=Yi(N(u),N(o),p,b,w,T);return T.delete(u),_t;case"[object Symbol]":if(ic)return ic.call(u)==ic.call(o)}return!1},"Sr");var jf=Object.prototype.hasOwnProperty;let zo=a(function(u,o,h,p,b,w){var T=1&h,N=Yl(u),F=N.length;if(F!=Yl(o).length&&!T)return!1;for(var nt=F;nt--;){var _t=N[nt];if(!(T?_t in o:jf.call(o,_t)))return!1}var Dt=w.get(u),Pt=w.get(o);if(Dt&&Pt)return Dt==o&&Pt==u;var Ut=!0;w.set(u,o),w.set(o,u);for(var jt=T;++nt<F;){var ne=u[_t=N[nt]],Ke=o[_t];if(p)var Jn=T?p(Ke,ne,_t,o,u,w):p(ne,Ke,_t,u,o,w);if(!(Jn===void 0?ne===Ke||b(ne,Ke,h,p,w):Jn)){Ut=!1;break}jt||(jt=_t=="constructor")}if(Ut&&!jt){var Pr=u.constructor,Gs=o.constructor;Pr==Gs||!("constructor"in u)||!("constructor"in o)||typeof Pr=="function"&&Pr instanceof Pr&&typeof Gs=="function"&&Gs instanceof Gs||(Ut=!1)}return w.delete(u),w.delete(o),Ut},"jr");var th="[object Arguments]",ds="[object Array]",Uo="[object Object]",rc=Object.prototype.hasOwnProperty;let Ff=a(function(u,o,h,p,b,w){var T=Ze(u),N=Ze(o),F=T?ds:Po(u),nt=N?ds:Po(o),_t=(F=F==th?Uo:F)==Uo,Dt=(nt=nt==th?Uo:nt)==Uo,Pt=F==nt;if(Pt&&Z(u)){if(!Z(o))return!1;T=!0,_t=!1}if(Pt&&!_t)return w||(w=new yn),T||ge(u)?Yi(u,o,h,p,b,w):Qu(u,o,F,h,p,b,w);if(!(1&h)){var Ut=_t&&rc.call(u,"__wrapped__"),jt=Dt&&rc.call(o,"__wrapped__");if(Ut||jt){var ne=Ut?u.value():u,Ke=jt?o.value():o;return w||(w=new yn),b(ne,Ke,h,p,w)}}return!!Pt&&(w||(w=new yn),zo(u,o,h,p,b,w))},"Ur"),Nr=a(function u(o,h,p,b,w){return o===h||(o==null||h==null||!We(o)&&!We(h)?o!=o&&h!=h:Ff(o,h,p,b,u,w))},"t"),ka=a(function(u,o){return Nr(u,o)},"Pr");class Ma extends gi{static{a(this,"zr")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ma.blotName="break",Ma.tagName="BR";let bi=Ma;class Xi extends ko{static{a(this,"Fr")}}function fs(u){return u.replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o])}a(fs,"$r");class Mi extends Ul{static{a(this,"Vr")}static allowedChildren=[Mi,bi,gi,Xi];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(o,h){let p=Mi.order.indexOf(o),b=Mi.order.indexOf(h);return p>=0||b>=0?p-b:o===h?0:o<h?-1:1}formatAt(o,h,p,b){if(Mi.compare(this.statics.blotName,p)<0&&this.scroll.query(p,qt.BLOT)){let w=this.isolate(o,h);b&&w.wrap(p,b)}else super.formatAt(o,h,p,b)}optimize(o){if(super.optimize(o),this.parent instanceof Mi&&Mi.compare(this.statics.blotName,this.parent.statics.blotName)>0){let h=this.parent.isolate(this.offset(),this.length());this.moveChildren(h),h.wrap(this)}}}let Or=Mi;class Sn extends Oo{static{a(this,"Wr")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=sc(this)),this.cache.delta}deleteAt(o,h){super.deleteAt(o,h),this.cache={}}formatAt(o,h,p,b){h<=0||(this.scroll.query(p,qt.BLOCK)?o+h===this.length()&&this.format(p,b):super.formatAt(o,Math.min(h,this.length()-o-1),p,b),this.cache={})}insertAt(o,h,p){if(p!=null)return super.insertAt(o,h,p),void(this.cache={});if(h.length===0)return;let b=h.split(`
`),w=b.shift();w.length>0&&(o<this.length()-1||this.children.tail==null?super.insertAt(Math.min(o,this.length()-1),w):this.children.tail.insertAt(this.children.tail.length(),w),this.cache={});let T=this;b.reduce((N,F)=>(T=T.split(N,!0),T.insertAt(0,F),F.length),o+w.length)}insertBefore(o,h){let{head:p}=this.children;super.insertBefore(o,h),p instanceof bi&&p.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(o,h){super.moveChildren(o,h),this.cache={}}optimize(o){super.optimize(o),this.cache={}}path(o){return super.path(o,!0)}removeChild(o){super.removeChild(o),this.cache={}}split(o){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(h&&(o===0||o>=this.length()-1)){let b=this.clone();return o===0?(this.parent.insertBefore(b,this),this):(this.parent.insertBefore(b,this.next),b)}let p=super.split(o,h);return this.cache={},p}}Sn.blotName="block",Sn.tagName="P",Sn.defaultChild=bi,Sn.allowedChildren=[bi,Or,gi,Xi];class Ii extends gi{static{a(this,"Zr")}attach(){super.attach(),this.attributes=new Rs(this.domNode)}delta(){return new kt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(o,h){let p=this.scroll.query(o,qt.BLOCK_ATTRIBUTE);p!=null&&this.attributes.attribute(p,h)}formatAt(o,h,p,b){this.format(p,b)}insertAt(o,h,p){if(p!=null)return void super.insertAt(o,h,p);let b=h.split(`
`),w=b.pop(),T=b.map(F=>{let nt=this.scroll.create(Sn.blotName);return nt.insertAt(0,F),nt}),N=this.split(o);T.forEach(F=>{this.parent.insertBefore(F,N)}),w&&this.parent.insertBefore(this.scroll.create("text",w),N)}}function sc(u){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return u.descendants(Wn).reduce((h,p)=>p.length()===0?h:h.insert(p.value(),yi(p,{},o)),new kt).insert(`
`,yi(u))}a(sc,"Gr");function yi(u){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return u==null?o:("formats"in u&&typeof u.formats=="function"&&(o={...o,...u.formats()},h&&delete o["code-token"]),u.parent==null||u.parent.statics.blotName==="scroll"||u.parent.statics.scope!==u.statics.scope?o:yi(u.parent,o,h))}a(yi,"Xr"),Ii.scope=qt.BLOCK_BLOT;class kr extends gi{static{a(this,"Qr")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(o,h,p){super(o,h),this.selection=p,this.textNode=document.createTextNode(kr.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(o,h){if(this.savedLength!==0)return void super.format(o,h);let p=this,b=0;for(;p!=null&&p.statics.scope!==qt.BLOCK_BLOT;)b+=p.offset(p.parent),p=p.parent;p!=null&&(this.savedLength=kr.CONTENTS.length,p.optimize(),p.formatAt(b,kr.CONTENTS.length,o,h),this.savedLength=0)}index(o,h){return o===this.textNode?0:super.index(o,h)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let o=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let h=this.prev instanceof Xi?this.prev:null,p=h?h.length():0,b=this.next instanceof Xi?this.next:null,w=b?b.text:"",{textNode:T}=this,N=T.data.split(kr.CONTENTS).join(""),F;if(T.data=kr.CONTENTS,h)F=h,(N||b)&&(h.insertAt(h.length(),N+w),b&&b.remove());else if(b)F=b,b.insertAt(0,N);else{let nt=document.createTextNode(N);F=this.scroll.create(nt),this.parent.insertBefore(F,this)}if(this.remove(),o){let nt=a((Pt,Ut)=>h&&Pt===h.domNode?Ut:Pt===T?p+Ut-1:b&&Pt===b.domNode?p+N.length+Ut:null,"s"),_t=nt(o.start.node,o.start.offset),Dt=nt(o.end.node,o.end.offset);if(_t!==null&&Dt!==null)return{startNode:F.domNode,startOffset:_t,endNode:F.domNode,endOffset:Dt}}return null}update(o,h){if(o.some(p=>p.type==="characterData"&&p.target===this.textNode)){let p=this.restore();p&&(h.range=p)}}optimize(o){super.optimize(o);let{parent:h}=this;for(;h;){if(h.domNode.tagName==="A"){this.savedLength=kr.CONTENTS.length,h.isolate(this.offset(h),this.length()).unwrap(),this.savedLength=0;break}h=h.parent}}value(){return""}}let Vo=kr;var eh=c(228);let oc=new WeakMap,Ia=["error","warn","log","info"],Da="warn";function nh(u){if(Da&&Ia.indexOf(u)<=Ia.indexOf(Da)){for(var o=arguments.length,h=new Array(o>1?o-1:0),p=1;p<o;p++)h[p-1]=arguments[p];console[u](...h)}}a(nh,"rs");function r(u){return Ia.reduce((o,h)=>(o[h]=nh.bind(console,h,u),o),{})}a(r,"ss"),r.level=u=>{Da=u},nh.level=r.level;let l=r,f=l("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(u=>{document.addEventListener(u,function(){for(var o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];Array.from(document.querySelectorAll(".ql-container")).forEach(b=>{let w=oc.get(b);w&&w.emitter&&w.emitter.handleDOM(...h)})})});let g=class extends eh{static{a(this,"ls")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",f.error)}emit(){for(var u=arguments.length,o=new Array(u),h=0;h<u;h++)o[h]=arguments[h];return f.log.call(f,...o),super.emit(...o)}handleDOM(u){for(var o=arguments.length,h=new Array(o>1?o-1:0),p=1;p<o;p++)h[p-1]=arguments[p];(this.domListeners[u.type]||[]).forEach(b=>{let{node:w,handler:T}=b;(u.target===w||w.contains(u.target))&&T(u,...h)})}listenDOM(u,o,h){this.domListeners[u]||(this.domListeners[u]=[]),this.domListeners[u].push({node:o,handler:h})}},_=l("quill:selection");class S{static{a(this,"cs")}constructor(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=o,this.length=h}}function B(u,o){try{o.parentNode}catch{return!1}return u.contains(o)}a(B,"us");let K=class{static{a(this,"hs")}constructor(u,o){this.emitter=o,this.scroll=u,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new S(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,g.sources.USER),1)}),this.emitter.on(g.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let h=this.getNativeRange();h!=null&&h.start.node!==this.cursor.textNode&&this.emitter.once(g.events.SCROLL_UPDATE,(p,b)=>{try{this.root.contains(h.start.node)&&this.root.contains(h.end.node)&&this.setNativeRange(h.start.node,h.start.offset,h.end.node,h.end.offset);let w=b.some(T=>T.type==="characterData"||T.type==="childList"||T.type==="attributes"&&T.target===this.root);this.update(w?g.sources.SILENT:p)}catch{}})}),this.emitter.on(g.events.SCROLL_OPTIMIZE,(h,p)=>{if(p.range){let{startNode:b,startOffset:w,endNode:T,endOffset:N}=p.range;this.setNativeRange(b,w,T,N),this.update(g.sources.SILENT)}}),this.update(g.sources.SILENT)}handleComposition(){this.emitter.on(g.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(g.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let u=this.cursor.restore();if(!u)return;setTimeout(()=>{this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(g.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(u,o){this.scroll.update();let h=this.getNativeRange();if(h!=null&&h.native.collapsed&&!this.scroll.query(u,qt.BLOCK)){if(h.start.node!==this.cursor.textNode){let p=this.scroll.find(h.start.node,!1);if(p==null)return;if(p instanceof Wn){let b=p.split(h.start.offset);p.parent.insertBefore(this.cursor,b)}else p.insertBefore(this.cursor,h.start.node);this.cursor.attach()}this.cursor.format(u,o),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(u){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=this.scroll.length(),p;u=Math.min(u,h-1),o=Math.min(u+o,h-1)-u;let[b,w]=this.scroll.leaf(u);if(b==null)return null;if(o>0&&w===b.length()){let[nt]=this.scroll.leaf(u+1);if(nt){let[_t]=this.scroll.line(u),[Dt]=this.scroll.line(u+1);_t===Dt&&(b=nt,w=0)}}[p,w]=b.position(w,!0);let T=document.createRange();if(o>0)return T.setStart(p,w),[b,w]=this.scroll.leaf(u+o),b==null?null:([p,w]=b.position(w,!0),T.setEnd(p,w),T.getBoundingClientRect());let N,F="left";if(p instanceof Text){if(!p.data.length)return null;w<p.data.length?(T.setStart(p,w),T.setEnd(p,w+1)):(T.setStart(p,w-1),T.setEnd(p,w),F="right"),N=T.getBoundingClientRect()}else{if(!(b.domNode instanceof Element))return null;N=b.domNode.getBoundingClientRect(),w>0&&(F="right")}return{bottom:N.top+N.height,height:N.height,left:N[F],right:N[F],top:N.top,width:0}}getNativeRange(){let u=document.getSelection();if(u==null||u.rangeCount<=0)return null;let o=u.getRangeAt(0);if(o==null)return null;let h=this.normalizeNative(o);return _.info("getNativeRange",h),h}getRange(){let u=this.scroll.domNode;if("isConnected"in u&&!u.isConnected)return[null,null];let o=this.getNativeRange();return o==null?[null,null]:[this.normalizedToRange(o),o]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&B(this.root,document.activeElement)}normalizedToRange(u){let o=[[u.start.node,u.start.offset]];u.native.collapsed||o.push([u.end.node,u.end.offset]);let h=o.map(w=>{let[T,N]=w,F=this.scroll.find(T,!0),nt=F.offset(this.scroll);return N===0?nt:F instanceof Wn?nt+F.index(T,N):nt+F.length()}),p=Math.min(Math.max(...h),this.scroll.length()-1),b=Math.min(p,...h);return new S(b,p-b)}normalizeNative(u){if(!B(this.root,u.startContainer)||!u.collapsed&&!B(this.root,u.endContainer))return null;let o={start:{node:u.startContainer,offset:u.startOffset},end:{node:u.endContainer,offset:u.endOffset},native:u};return[o.start,o.end].forEach(h=>{let{node:p,offset:b}=h;for(;!(p instanceof Text)&&p.childNodes.length>0;)if(p.childNodes.length>b)p=p.childNodes[b],b=0;else{if(p.childNodes.length!==b)break;p=p.lastChild,b=p instanceof Text?p.data.length:p.childNodes.length>0?p.childNodes.length:p.childNodes.length+1}h.node=p,h.offset=b}),o}rangeToNative(u){let o=this.scroll.length(),h=a((p,b)=>{p=Math.min(o-1,p);let[w,T]=this.scroll.leaf(p);return w?w.position(T,b):[null,-1]},"n");return[...h(u.index,!1),...h(u.index+u.length,!0)]}setNativeRange(u,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o,b=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(_.info("setNativeRange",u,o,h,p),u!=null&&(this.root.parentNode==null||u.parentNode==null||h.parentNode==null))return;let w=document.getSelection();if(w!=null)if(u!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:T}=this.getNativeRange()||{};if(T==null||b||u!==T.startContainer||o!==T.startOffset||h!==T.endContainer||p!==T.endOffset){u instanceof Element&&u.tagName==="BR"&&(o=Array.from(u.parentNode.childNodes).indexOf(u),u=u.parentNode),h instanceof Element&&h.tagName==="BR"&&(p=Array.from(h.parentNode.childNodes).indexOf(h),h=h.parentNode);let N=document.createRange();N.setStart(u,o),N.setEnd(h,p),w.removeAllRanges(),w.addRange(N)}}else w.removeAllRanges(),this.root.blur()}setRange(u){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.sources.API;if(typeof o=="string"&&(h=o,o=!1),_.info("setRange",u),u!=null){let p=this.rangeToNative(u);this.setNativeRange(...p,o)}else this.setNativeRange(null);this.update(h)}update(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.sources.USER,o=this.lastRange,[h,p]=this.getRange();if(this.lastRange=h,this.lastNative=p,this.lastRange!=null&&(this.savedRange=this.lastRange),!ka(o,this.lastRange)){if(!this.composing&&p!=null&&p.native.collapsed&&p.start.node!==this.cursor.textNode){let w=this.cursor.restore();w&&this.setNativeRange(w.startNode,w.startOffset,w.endNode,w.endOffset)}let b=[g.events.SELECTION_CHANGE,Vs(this.lastRange),Vs(o),u];this.emitter.emit(g.events.EDITOR_CHANGE,...b),u!==g.sources.SILENT&&this.emitter.emit(...b)}}},tt=/^[ -~]*$/;function pt(u,o,h){if(u.length===0){let[Ut]=le(h.pop());return o<=0?`</li></${Ut}>`:`</li></${Ut}>${pt([],o-1,h)}`}let[{child:p,offset:b,length:w,indent:T,type:N},...F]=u,[nt,_t]=le(N);if(T>o)return h.push(N),T===o+1?`<${nt}><li${_t}>${Ot(p,b,w)}${pt(F,T,h)}`:`<${nt}><li>${pt(u,o+1,h)}`;let Dt=h[h.length-1];if(T===o&&N===Dt)return`</li><li${_t}>${Ot(p,b,w)}${pt(F,T,h)}`;let[Pt]=le(h.pop());return`</li></${Pt}>${pt(u,o-1,h)}`}a(pt,"fs");function Ot(u,o,h){let p=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if("html"in u&&typeof u.html=="function")return u.html(o,h);if(u instanceof Xi)return fs(u.value().slice(o,o+h));if(u instanceof Gi){if(u.statics.blotName==="list-container"){let nt=[];return u.children.forEachAt(o,h,(_t,Dt,Pt)=>{let Ut="formats"in _t&&typeof _t.formats=="function"?_t.formats():{};nt.push({child:_t,offset:Dt,length:Pt,indent:Ut.indent||0,type:Ut.list})}),pt(nt,-1,[])}let b=[];if(u.children.forEachAt(o,h,(nt,_t,Dt)=>{b.push(Ot(nt,_t,Dt))}),p||u.statics.blotName==="list")return b.join("");let{outerHTML:w,innerHTML:T}=u.domNode,[N,F]=w.split(`>${T}<`);return N==="<table"?`<table style="border: 1px solid #000;">${b.join("")}<${F}`:`${N}>${b.join("")}<${F}`}return u.domNode instanceof Element?u.domNode.outerHTML:""}a(Ot,"ps");function Kt(u,o){return Object.keys(o).reduce((h,p)=>{if(u[p]==null)return h;let b=o[p];return b===u[p]?h[p]=b:Array.isArray(b)?b.indexOf(u[p])<0?h[p]=b.concat([u[p]]):h[p]=b:h[p]=[b,u[p]],h},{})}a(Kt,"gs");function le(u){let o=u==="ordered"?"ol":"ul";switch(u){case"checked":return[o,' data-list="checked"'];case"unchecked":return[o,' data-list="unchecked"'];default:return[o,""]}}a(le,"ms");function Zn(u){return u.reduce((o,h)=>{if(typeof h.insert=="string"){let p=h.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return o.insert(p,h.attributes)}return o.push(h)},new kt)}a(Zn,"bs");function wn(u,o){let{index:h,length:p}=u;return new S(h+o,p)}a(wn,"ys");let Di=class{static{a(this,"vs")}constructor(u){this.scroll=u,this.delta=this.getDelta()}applyDelta(u){this.scroll.update();let o=this.scroll.length();this.scroll.batchStart();let h=Zn(u),p=new kt;return function(b){let w=[];return b.forEach(T=>{typeof T.insert=="string"?T.insert.split(`
`).forEach((N,F)=>{F&&w.push({insert:`
`,attributes:T.attributes}),N&&w.push({insert:N,attributes:T.attributes})}):w.push(T)}),w}(h.ops.slice()).reduce((b,w)=>{let T=kt.Op.length(w),N=w.attributes||{},F=!1,nt=!1;if(w.insert!=null){if(p.retain(T),typeof w.insert=="string"){let Pt=w.insert;nt=!Pt.endsWith(`
`)&&(o<=b||!!this.scroll.descendant(Ii,b)[0]),this.scroll.insertAt(b,Pt);let[Ut,jt]=this.scroll.line(b),ne=Yn({},yi(Ut));if(Ut instanceof Sn){let[Ke]=Ut.descendant(Wn,jt);Ke&&(ne=Yn(ne,yi(Ke)))}N=kt.AttributeMap.diff(ne,N)||{}}else if(typeof w.insert=="object"){let Pt=Object.keys(w.insert)[0];if(Pt==null)return b;let Ut=this.scroll.query(Pt,qt.INLINE)!=null;if(Ut)(o<=b||this.scroll.descendant(Ii,b)[0])&&(nt=!0);else if(b>0){let[jt,ne]=this.scroll.descendant(Wn,b-1);jt instanceof Xi?jt.value()[ne]!==`
`&&(F=!0):jt instanceof gi&&jt.statics.scope===qt.INLINE_BLOT&&(F=!0)}if(this.scroll.insertAt(b,Pt,w.insert[Pt]),Ut){let[jt]=this.scroll.descendant(Wn,b);if(jt){let ne=Yn({},yi(jt));N=kt.AttributeMap.diff(ne,N)||{}}}}o+=T}else if(p.push(w),w.retain!==null&&typeof w.retain=="object"){let Pt=Object.keys(w.retain)[0];if(Pt==null)return b;this.scroll.updateEmbedAt(b,Pt,w.retain[Pt])}Object.keys(N).forEach(Pt=>{this.scroll.formatAt(b,T,Pt,N[Pt])});let _t=F?1:0,Dt=nt?1:0;return o+=_t+Dt,p.retain(_t),p.delete(Dt),b+T+_t+Dt},0),p.reduce((b,w)=>typeof w.delete=="number"?(this.scroll.deleteAt(b,w.delete),b):b+kt.Op.length(w),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(h)}deleteText(u,o){return this.scroll.deleteAt(u,o),this.update(new kt().retain(u).delete(o))}formatLine(u,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(h).forEach(b=>{this.scroll.lines(u,Math.max(o,1)).forEach(w=>{w.format(b,h[b])})}),this.scroll.optimize();let p=new kt().retain(u).retain(o,Vs(h));return this.update(p)}formatText(u,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(h).forEach(b=>{this.scroll.formatAt(u,o,b,h[b])});let p=new kt().retain(u).retain(o,Vs(h));return this.update(p)}getContents(u,o){return this.delta.slice(u,u+o)}getDelta(){return this.scroll.lines().reduce((u,o)=>u.concat(o.delta()),new kt)}getFormat(u){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=[],p=[];o===0?this.scroll.path(u).forEach(T=>{let[N]=T;N instanceof Sn?h.push(N):N instanceof Wn&&p.push(N)}):(h=this.scroll.lines(u,o),p=this.scroll.descendants(Wn,u,o));let[b,w]=[h,p].map(T=>{let N=T.shift();if(N==null)return{};let F=yi(N);for(;Object.keys(F).length>0;){let nt=T.shift();if(nt==null)return F;F=Kt(yi(nt),F)}return F});return{...b,...w}}getHTML(u,o){let[h,p]=this.scroll.line(u);if(h){let b=h.length();return!(h.length()>=p+o)||p===0&&o===b?Ot(this.scroll,u,o,!0):Ot(h,p,o,!0)}return""}getText(u,o){return this.getContents(u,o).filter(h=>typeof h.insert=="string").map(h=>h.insert).join("")}insertContents(u,o){let h=Zn(o),p=new kt().retain(u).concat(h);return this.scroll.insertContents(u,h),this.update(p)}insertEmbed(u,o,h){return this.scroll.insertAt(u,o,h),this.update(new kt().retain(u).insert({[o]:h}))}insertText(u,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o=o.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(u,o),Object.keys(h).forEach(p=>{this.scroll.formatAt(u,o.length,p,h[p])}),this.update(new kt().retain(u).insert(o,Vs(h)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let u=this.scroll.children.head;if(u?.statics.blotName!==Sn.blotName)return!1;let o=u;return!(o.children.length>1)&&o.children.head instanceof bi}removeFormat(u,o){let h=this.getText(u,o),[p,b]=this.scroll.line(u+o),w=0,T=new kt;p!=null&&(w=p.length()-b,T=p.delta().slice(b,b+w-1).insert(`
`));let N=this.getContents(u,o+w).diff(new kt().insert(h).concat(T)),F=new kt().retain(u).concat(N);return this.applyDelta(F)}update(u){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,p=this.delta;if(o.length===1&&o[0].type==="characterData"&&o[0].target.data.match(tt)&&this.scroll.find(o[0].target)){let b=this.scroll.find(o[0].target),w=yi(b),T=b.offset(this.scroll),N=o[0].oldValue.replace(Vo.CONTENTS,""),F=new kt().insert(N),nt=new kt().insert(b.value()),_t=h&&{oldRange:wn(h.oldRange,-T),newRange:wn(h.newRange,-T)};u=new kt().retain(T).concat(F.diff(nt,_t)).reduce((Dt,Pt)=>Pt.insert?Dt.insert(Pt.insert,w):Dt.push(Pt),new kt),this.delta=p.compose(u)}else this.delta=this.getDelta(),u&&ka(p.compose(u),this.delta)||(u=p.diff(this.delta,h));return u}},Je=class{static{a(this,"xs")}static DEFAULTS={};constructor(u){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=u,this.options=o}},Mr="\uFEFF",ac=class extends gi{static{a(this,"ws")}constructor(u,o){super(u,o),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(h=>{this.contentNode.appendChild(h)}),this.leftGuard=document.createTextNode(Mr),this.rightGuard=document.createTextNode(Mr),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(u,o){return u===this.leftGuard?0:u===this.rightGuard?1:super.index(u,o)}restore(u){let o,h=null,p=u.data.split(Mr).join("");if(u===this.leftGuard)if(this.prev instanceof Xi){let b=this.prev.length();this.prev.insertAt(b,p),h={startNode:this.prev.domNode,startOffset:b+p.length}}else o=document.createTextNode(p),this.parent.insertBefore(this.scroll.create(o),this),h={startNode:o,startOffset:p.length};else u===this.rightGuard&&(this.next instanceof Xi?(this.next.insertAt(0,p),h={startNode:this.next.domNode,startOffset:p.length}):(o=document.createTextNode(p),this.parent.insertBefore(this.scroll.create(o),this.next),h={startNode:o,startOffset:p.length}));return u.data=Mr,h}update(u,o){u.forEach(h=>{if(h.type==="characterData"&&(h.target===this.leftGuard||h.target===this.rightGuard)){let p=this.restore(h.target);p&&(o.range=p)}})}},Hf=class{static{a(this,"Es")}isComposing=!1;constructor(u,o){this.scroll=u,this.emitter=o,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",u=>{this.isComposing||this.handleCompositionStart(u)}),this.scroll.domNode.addEventListener("compositionend",u=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(u)})})}handleCompositionStart(u){let o=u.target instanceof Node?this.scroll.find(u.target,!0):null;!o||o instanceof ac||(this.emitter.emit(g.events.COMPOSITION_BEFORE_START,u),this.scroll.batchStart(),this.emitter.emit(g.events.COMPOSITION_START,u),this.isComposing=!0)}handleCompositionEnd(u){this.emitter.emit(g.events.COMPOSITION_BEFORE_END,u),this.scroll.batchEnd(),this.emitter.emit(g.events.COMPOSITION_END,u),this.isComposing=!1}};class lc{static{a(this,"As")}static DEFAULTS={modules:{}};static themes={default:lc};modules={};constructor(o,h){this.quill=o,this.options=h}init(){Object.keys(this.options.modules).forEach(o=>{this.modules[o]==null&&this.addModule(o)})}addModule(o){let h=this.quill.constructor.import(`modules/${o}`);return this.modules[o]=new h(this.quill,this.options.modules[o]||{}),this.modules[o]}}let Wo=lc,zf=a(u=>{let o=u.getBoundingClientRect(),h="offsetWidth"in u&&Math.abs(o.width)/u.offsetWidth||1,p="offsetHeight"in u&&Math.abs(o.height)/u.offsetHeight||1;return{top:o.top,right:o.left+u.clientWidth*h,bottom:o.top+u.clientHeight*p,left:o.left}},"ks"),Zo=a(u=>{let o=parseInt(u,10);return Number.isNaN(o)?0:o},"_s"),fn=a((u,o,h,p,b,w)=>u<h&&o>p?0:u<h?-(h-u+b):o>p?o-u>p-h?u+b-h:o-p+w:0,"Ls"),Pa=a((u,o)=>{let h=u.ownerDocument,p=o,b=u;for(;b;){let T=b===h.body,N=T?{top:0,right:window.visualViewport?.width??h.documentElement.clientWidth,bottom:window.visualViewport?.height??h.documentElement.clientHeight,left:0}:zf(b),F=getComputedStyle(b),nt=fn(p.left,p.right,N.left,N.right,Zo(F.scrollPaddingLeft),Zo(F.scrollPaddingRight)),_t=fn(p.top,p.bottom,N.top,N.bottom,Zo(F.scrollPaddingTop),Zo(F.scrollPaddingBottom));if(nt||_t)if(T)h.defaultView?.scrollBy(nt,_t);else{let{scrollLeft:Dt,scrollTop:Pt}=b;_t&&(b.scrollTop+=_t),nt&&(b.scrollLeft+=nt);let Ut=b.scrollLeft-Dt,jt=b.scrollTop-Pt;p={left:p.left-Ut,top:p.top-jt,right:p.right-Ut,bottom:p.bottom-jt}}b=T||F.position==="fixed"?null:(w=b).parentElement||w.getRootNode().host||null}var w},"Os"),Uf=["block","break","cursor","inline","scroll","text"],Vf=a((u,o,h)=>{let p=new Ni;return Uf.forEach(b=>{let w=o.query(b);w&&p.register(w)}),u.forEach(b=>{let w=o.query(b);w||h.error(`Cannot register "${b}" specified in "formats" config. Are you sure it was registered?`);let T=0;for(;w;)if(p.register(w),w="blotName"in w?w.requiredContainer??null:null,T+=1,T>100){h.error(`Cycle detected in registering blot requiredContainer: "${b}"`);break}}),p},"Ss"),Ws=l("quill"),Zs=new Ni;Gi.uiClass="ql-ui";class ut{static{a(this,"Rs")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Zs,theme:"default"};static events=g.events;static sources=g.sources;static version="2.0.2";static imports={delta:kt,parchment:d,"core/module":Je,"core/theme":Wo};static debug(o){o===!0&&(o="log"),l.level(o)}static find(o){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return oc.get(o)||Zs.find(o,h)}static import(o){return this.imports[o]==null&&Ws.error(`Cannot import ${o}. Are you sure it was registered?`),this.imports[o]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let o=arguments.length<=0?void 0:arguments[0],h=!!(!(arguments.length<=1)&&arguments[1]),p="attrName"in o?o.attrName:o.blotName;typeof p=="string"?this.register(`formats/${p}`,o,h):Object.keys(o).forEach(b=>{this.register(b,o[b],h)})}else{let o=arguments.length<=0?void 0:arguments[0],h=arguments.length<=1?void 0:arguments[1],p=!!(!(arguments.length<=2)&&arguments[2]);this.imports[o]==null||p||Ws.warn(`Overwriting ${o} with`,h),this.imports[o]=h,(o.startsWith("blots/")||o.startsWith("formats/"))&&h&&typeof h!="boolean"&&h.blotName!=="abstract"&&Zs.register(h),typeof h.register=="function"&&h.register(Zs)}}constructor(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=function(T,N){let F=ih(T);if(!F)throw new Error("Invalid Quill container");let nt=!N.theme||N.theme===ut.DEFAULTS.theme,_t=nt?Wo:ut.import(`themes/${N.theme}`);if(!_t)throw new Error(`Invalid theme ${N.theme}. Did you register it?`);let{modules:Dt,...Pt}=ut.DEFAULTS,{modules:Ut,...jt}=_t.DEFAULTS,ne=Wf(N.modules);ne!=null&&ne.toolbar&&ne.toolbar.constructor!==Object&&(ne={...ne,toolbar:{container:ne.toolbar}});let Ke=Yn({},Wf(Dt),Wf(Ut),ne),Jn={...Pt,...kv(jt),...kv(N)},Pr=N.registry;return Pr?N.formats&&Ws.warn('Ignoring "formats" option because "registry" is specified'):Pr=N.formats?Vf(N.formats,Jn.registry,Ws):Jn.registry,{...Jn,registry:Pr,container:F,theme:_t,modules:Object.entries(Ke).reduce((Gs,QE)=>{let[ap,mb]=QE;if(!mb)return Gs;let gb=ut.import(`modules/${ap}`);return gb==null?(Ws.error(`Cannot load ${ap} module. Are you sure you registered it?`),Gs):{...Gs,[ap]:Yn({},gb.DEFAULTS||{},mb)}},{}),bounds:ih(Jn.bounds)}}(o,h),this.container=this.options.container,this.container==null)return void Ws.error("Invalid Quill container",o);this.options.debug&&ut.debug(this.options.debug);let p=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",oc.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new g;let b=Aa.blotName,w=this.options.registry.query(b);if(!w||!("blotName"in w))throw new Error(`Cannot initialize Quill without "${b}" blot`);if(this.scroll=new w(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Di(this.scroll),this.selection=new K(this.scroll,this.emitter),this.composition=new Hf(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(g.events.EDITOR_CHANGE,T=>{T===g.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(g.events.SCROLL_UPDATE,(T,N)=>{let F=this.selection.lastRange,[nt]=this.selection.getRange(),_t=F&&nt?{oldRange:F,newRange:nt}:void 0;Ir.call(this,()=>this.editor.update(null,N,_t),T)}),this.emitter.on(g.events.SCROLL_EMBED_UPDATE,(T,N)=>{let F=this.selection.lastRange,[nt]=this.selection.getRange(),_t=F&&nt?{oldRange:F,newRange:nt}:void 0;Ir.call(this,()=>{let Dt=new kt().retain(T.offset(this)).retain({[T.statics.blotName]:N});return this.editor.update(Dt,[],_t)},ut.sources.USER)}),p){let T=this.clipboard.convert({html:`${p}<p><br></p>`,text:`
`});this.setContents(T)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof o=="string"){let p=o;(o=document.createElement("div")).classList.add(p)}return this.container.insertBefore(o,h),o}blur(){this.selection.setRange(null)}deleteText(o,h,p){return[o,h,,p]=ps(o,h,p),Ir.call(this,()=>this.editor.deleteText(o,h),p,o,-1*h)}disable(){this.enable(!1)}editReadOnly(o){this.allowReadOnlyEdits=!0;let h=o();return this.allowReadOnlyEdits=!1,h}enable(){let o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.scroll.enable(o),this.container.classList.toggle("ql-disabled",!o)}focus(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),o.preventScroll||this.scrollSelectionIntoView()}format(o,h){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.sources.API;return Ir.call(this,()=>{let b=this.getSelection(!0),w=new kt;if(b==null)return w;if(this.scroll.query(o,qt.BLOCK))w=this.editor.formatLine(b.index,b.length,{[o]:h});else{if(b.length===0)return this.selection.format(o,h),w;w=this.editor.formatText(b.index,b.length,{[o]:h})}return this.setSelection(b,g.sources.SILENT),w},p)}formatLine(o,h,p,b,w){let T;return[o,h,T,w]=ps(o,h,p,b,w),Ir.call(this,()=>this.editor.formatLine(o,h,T),w,o,0)}formatText(o,h,p,b,w){let T;return[o,h,T,w]=ps(o,h,p,b,w),Ir.call(this,()=>this.editor.formatText(o,h,T),w,o,0)}getBounds(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,p=null;if(p=typeof o=="number"?this.selection.getBounds(o,h):this.selection.getBounds(o.index,o.length),!p)return null;let b=this.container.getBoundingClientRect();return{bottom:p.bottom-b.top,height:p.height,left:p.left-b.left,right:p.right-b.left,top:p.top-b.top,width:p.width}}getContents(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-o;return[o,h]=ps(o,h),this.editor.getContents(o,h)}getFormat(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof o=="number"?this.editor.getFormat(o,h):this.editor.getFormat(o.index,o.length)}getIndex(o){return o.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(o){return this.scroll.leaf(o)}getLine(o){return this.scroll.line(o)}getLines(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof o!="number"?this.scroll.lines(o.index,o.length):this.scroll.lines(o,h)}getModule(o){return this.theme.modules[o]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1?arguments[1]:void 0;return typeof o=="number"&&(h=h??this.getLength()-o),[o,h]=ps(o,h),this.editor.getHTML(o,h)}getText(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1?arguments[1]:void 0;return typeof o=="number"&&(h=h??this.getLength()-o),[o,h]=ps(o,h),this.editor.getText(o,h)}hasFocus(){return this.selection.hasFocus()}insertEmbed(o,h,p){let b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ut.sources.API;return Ir.call(this,()=>this.editor.insertEmbed(o,h,p),b,o)}insertText(o,h,p,b,w){let T;return[o,,T,w]=ps(o,0,p,b,w),Ir.call(this,()=>this.editor.insertText(o,h,T),w,o,h.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(o,h,p){return[o,h,,p]=ps(o,h,p),Ir.call(this,()=>this.editor.removeFormat(o,h),p,o)}scrollRectIntoView(o){Pa(this.root,o)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let o=this.selection.lastRange,h=o&&this.selection.getBounds(o.index,o.length);h&&this.scrollRectIntoView(h)}setContents(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.sources.API;return Ir.call(this,()=>{o=new kt(o);let p=this.getLength(),b=this.editor.deleteText(0,p),w=this.editor.insertContents(0,o),T=this.editor.deleteText(this.getLength()-1,1);return b.compose(w).compose(T)},h)}setSelection(o,h,p){o==null?this.selection.setRange(null,h||ut.sources.API):([o,h,,p]=ps(o,h,p),this.selection.setRange(new S(Math.max(0,o),h),p),p!==g.sources.SILENT&&this.scrollSelectionIntoView())}setText(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.sources.API,p=new kt().insert(o);return this.setContents(p,h)}update(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.sources.USER,h=this.scroll.update(o);return this.selection.update(o),h}updateContents(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.sources.API;return Ir.call(this,()=>(o=new kt(o),this.editor.applyDelta(o)),h,!0)}}function ih(u){return typeof u=="string"?document.querySelector(u):u}a(ih,"Is");function Wf(u){return Object.entries(u??{}).reduce((o,h)=>{let[p,b]=h;return{...o,[p]:b===!0?{}:b}},{})}a(Wf,"Ms");function kv(u){return Object.fromEntries(Object.entries(u).filter(o=>o[1]!==void 0))}a(kv,"Bs");function Ir(u,o,h,p){if(!this.isEnabled()&&o===g.sources.USER&&!this.allowReadOnlyEdits)return new kt;let b=h==null?null:this.getSelection(),w=this.editor.delta,T=u();if(b!=null&&(h===!0&&(h=b.index),p==null?b=Mv(b,T,o):p!==0&&(b=Mv(b,h,p,o)),this.setSelection(b,g.sources.SILENT)),T.length()>0){let N=[g.events.TEXT_CHANGE,T,w,o];this.emitter.emit(g.events.EDITOR_CHANGE,...N),o!==g.sources.SILENT&&this.emitter.emit(...N)}return T}a(Ir,"Us");function ps(u,o,h,p,b){let w={};return typeof u.index=="number"&&typeof u.length=="number"?typeof o!="number"?(b=p,p=h,h=o,o=u.length,u=u.index):(o=u.length,u=u.index):typeof o!="number"&&(b=p,p=h,h=o,o=0),typeof h=="object"?(w=h,b=p):typeof h=="string"&&(p!=null?w[h]=p:b=h),[u,o,w,b=b||g.sources.API]}a(ps,"Ds");function Mv(u,o,h,p){let b=typeof h=="number"?h:0;if(u==null)return null;let w,T;return o&&typeof o.transformPosition=="function"?[w,T]=[u.index,u.index+u.length].map(N=>o.transformPosition(N,p!==g.sources.USER)):[w,T]=[u.index,u.index+u.length].map(N=>N<o||N===o&&p===g.sources.USER?N:b>=0?N+b:Math.max(o,N+b)),new S(w,T-w)}a(Mv,"Ps");let $o=class extends js{static{a(this,"zs")}};function Iv(u){return u instanceof Sn||u instanceof Ii}a(Iv,"Hs");function Dv(u){return typeof u.updateContent=="function"}a(Dv,"Fs");function Zf(u,o,h){h.reduce((p,b)=>{let w=kt.Op.length(b),T=b.attributes||{};if(b.insert!=null){if(typeof b.insert=="string"){let N=b.insert;u.insertAt(p,N);let[F]=u.descendant(Wn,p),nt=yi(F);T=kt.AttributeMap.diff(nt,T)||{}}else if(typeof b.insert=="object"){let N=Object.keys(b.insert)[0];if(N==null)return p;if(u.insertAt(p,N,b.insert[N]),u.scroll.query(N,qt.INLINE)!=null){let[F]=u.descendant(Wn,p),nt=yi(F);T=kt.AttributeMap.diff(nt,T)||{}}}}return Object.keys(T).forEach(N=>{u.formatAt(p,w,N,T[N])}),p+w},o)}a(Zf,"$s");let aE=class extends Aa{static{a(this,"Vs")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Sn;static allowedChildren=[Sn,Ii,$o];constructor(u,o,h){let{emitter:p}=h;super(u,o),this.emitter=p,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",b=>this.handleDragStart(b))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let u=this.batch;this.batch=!1,this.update(u)}emitMount(u){this.emitter.emit(g.events.SCROLL_BLOT_MOUNT,u)}emitUnmount(u){this.emitter.emit(g.events.SCROLL_BLOT_UNMOUNT,u)}emitEmbedUpdate(u,o){this.emitter.emit(g.events.SCROLL_EMBED_UPDATE,u,o)}deleteAt(u,o){let[h,p]=this.line(u),[b]=this.line(u+o);if(super.deleteAt(u,o),b!=null&&h!==b&&p>0){if(h instanceof Ii||b instanceof Ii)return void this.optimize();let w=b.children.head instanceof bi?null:b.children.head;h.moveChildren(b,w),h.remove()}this.optimize()}enable(){let u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.domNode.setAttribute("contenteditable",u?"true":"false")}formatAt(u,o,h,p){super.formatAt(u,o,h,p),this.optimize()}insertAt(u,o,h){if(u>=this.length())if(h==null||this.scroll.query(o,qt.BLOCK)==null){let p=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(p),h==null&&o.endsWith(`
`)?p.insertAt(0,o.slice(0,-1),h):p.insertAt(0,o,h)}else{let p=this.scroll.create(o,h);this.appendChild(p)}else super.insertAt(u,o,h);this.optimize()}insertBefore(u,o){if(u.statics.scope===qt.INLINE_BLOT){let h=this.scroll.create(this.statics.defaultChild.blotName);h.appendChild(u),super.insertBefore(h,o)}else super.insertBefore(u,o)}insertContents(u,o){let h=this.deltaToRenderBlocks(o.concat(new kt().insert(`
`))),p=h.pop();if(p==null)return;this.batchStart();let b=h.shift();if(b){let N=b.type==="block"&&(b.delta.length()===0||!this.descendant(Ii,u)[0]&&u<this.length()),F=b.type==="block"?b.delta:new kt().insert({[b.key]:b.value});Zf(this,u,F);let nt=b.type==="block"?1:0,_t=u+F.length()+nt;N&&this.insertAt(_t-1,`
`);let Dt=yi(this.line(u)[0]),Pt=kt.AttributeMap.diff(Dt,b.attributes)||{};Object.keys(Pt).forEach(Ut=>{this.formatAt(_t-1,1,Ut,Pt[Ut])}),u=_t}let[w,T]=this.children.find(u);h.length&&(w&&(w=w.split(T),T=0),h.forEach(N=>{if(N.type==="block")Zf(this.createBlock(N.attributes,w||void 0),0,N.delta);else{let F=this.create(N.key,N.value);this.insertBefore(F,w||void 0),Object.keys(N.attributes).forEach(nt=>{F.format(nt,N.attributes[nt])})}})),p.type==="block"&&p.delta.length()&&Zf(this,w?w.offset(w.scroll)+T:this.length(),p.delta),this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(u){let o=this.path(u).pop();if(!o)return[null,-1];let[h,p]=o;return h instanceof Wn?[h,p]:[null,-1]}line(u){return u===this.length()?this.line(u-1):this.descendant(Iv,u)}lines(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,h=a((p,b,w)=>{let T=[],N=w;return p.children.forEachAt(b,w,(F,nt,_t)=>{Iv(F)?T.push(F):F instanceof js&&(T=T.concat(h(F,nt,N))),N-=_t}),T},"n");return h(this,u,o)}optimize(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(u,o),u.length>0&&this.emitter.emit(g.events.SCROLL_OPTIMIZE,u,o))}path(u){return super.path(u).slice(1)}remove(){}update(u){if(this.batch)return void(Array.isArray(u)&&(this.batch=this.batch.concat(u)));let o=g.sources.USER;typeof u=="string"&&(o=u),Array.isArray(u)||(u=this.observer.takeRecords()),(u=u.filter(h=>{let{target:p}=h,b=this.find(p,!0);return b&&!Dv(b)})).length>0&&this.emitter.emit(g.events.SCROLL_BEFORE_UPDATE,o,u),super.update(u.concat([])),u.length>0&&this.emitter.emit(g.events.SCROLL_UPDATE,o,u)}updateEmbedAt(u,o,h){let[p]=this.descendant(b=>b instanceof Ii,u);p&&p.statics.blotName===o&&Dv(p)&&p.updateContent(h)}handleDragStart(u){u.preventDefault()}deltaToRenderBlocks(u){let o=[],h=new kt;return u.forEach(p=>{let b=p?.insert;if(b)if(typeof b=="string"){let w=b.split(`
`);w.slice(0,-1).forEach(N=>{h.insert(N,p.attributes),o.push({type:"block",delta:h,attributes:p.attributes??{}}),h=new kt});let T=w[w.length-1];T&&h.insert(T,p.attributes)}else{let w=Object.keys(b)[0];if(!w)return;this.query(w,qt.INLINE)?h.push(p):(h.length()&&o.push({type:"block",delta:h,attributes:{}}),h=new kt,o.push({type:"blockEmbed",key:w,value:b[w],attributes:p.attributes??{}}))}}),h.length()&&o.push({type:"block",delta:h,attributes:{}}),o}createBlock(u,o){let h,p={};Object.entries(u).forEach(T=>{let[N,F]=T;this.query(N,qt.BLOCK&qt.BLOT)!=null?h=N:p[N]=F});let b=this.create(h||this.statics.defaultChild.blotName,h?u[h]:void 0);this.insertBefore(b,o||void 0);let w=b.length();return Object.entries(p).forEach(T=>{let[N,F]=T;b.formatAt(0,w,N,F)}),b}},$f={scope:qt.BLOCK,whitelist:["right","center","justify"]},lE=new Pn("align","align",$f),Pv=new Oi("align","ql-align",$f),qv=new Ar("align","text-align",$f);class Rv extends Ar{static{a(this,"Xs")}value(o){let h=super.value(o);return h.startsWith("rgb(")?(h=h.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${h.split(",").map(p=>`00${parseInt(p,10).toString(16)}`.slice(-2)).join("")}`):h}}let cE=new Oi("color","ql-color",{scope:qt.INLINE}),Kf=new Rv("color","color",{scope:qt.INLINE}),uE=new Oi("background","ql-bg",{scope:qt.INLINE}),Gf=new Rv("background","background-color",{scope:qt.INLINE});class Ko extends $o{static{a(this,"ei")}static create(o){let h=super.create(o);return h.setAttribute("spellcheck","false"),h}code(o,h){return this.children.map(p=>p.length()<=1?"":p.domNode.innerText).join(`
`).slice(o,o+h)}html(o,h){return`<pre>
${fs(this.code(o,h))}
</pre>`}}class _i extends Sn{static{a(this,"ni")}static TAB="  ";static register(){ut.register(Ko)}}class Yf extends Or{static{a(this,"ri")}}Yf.blotName="code",Yf.tagName="CODE",_i.blotName="code-block",_i.className="ql-code-block",_i.tagName="DIV",Ko.blotName="code-block-container",Ko.className="ql-code-block-container",Ko.tagName="DIV",Ko.allowedChildren=[_i],_i.allowedChildren=[Xi,bi,Vo],_i.requiredContainer=Ko;let Xf={scope:qt.BLOCK,whitelist:["rtl"]},Bv=new Pn("direction","dir",Xf),jv=new Oi("direction","ql-direction",Xf),Fv=new Ar("direction","direction",Xf),Hv={scope:qt.INLINE,whitelist:["serif","monospace"]},zv=new Oi("font","ql-font",Hv),Uv=new class extends Ar{value(u){return super.value(u).replace(/["']/g,"")}}("font","font-family",Hv),Vv=new Oi("size","ql-size",{scope:qt.INLINE,whitelist:["small","large","huge"]}),Wv=new Ar("size","font-size",{scope:qt.INLINE,whitelist:["10px","18px","32px"]}),hE=l("quill:keyboard"),dE=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class rh extends Je{static{a(this,"gi")}static match(o,h){return!["altKey","ctrlKey","metaKey","shiftKey"].some(p=>!!h[p]!==o[p]&&h[p]!==null)&&(h.key===o.key||h.key===o.which)}constructor(o,h){super(o,h),this.bindings={},Object.keys(this.options.bindings).forEach(p=>{this.options.bindings[p]&&this.addBinding(this.options.bindings[p])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=function(w){if(typeof w=="string"||typeof w=="number")w={key:w};else{if(typeof w!="object")return null;w=Vs(w)}return w.shortKey&&(w[dE]=w.shortKey,delete w.shortKey),w}(o);if(b==null)return void hE.warn("Attempted to add invalid keyboard binding",b);typeof h=="function"&&(h={handler:h}),typeof p=="function"&&(p={handler:p}),(Array.isArray(b.key)?b.key:[b.key]).forEach(w=>{let T={...b,key:w,...h,...p};this.bindings[T.key]=this.bindings[T.key]||[],this.bindings[T.key].push(T)})}listen(){this.quill.root.addEventListener("keydown",o=>{if(o.defaultPrevented||o.isComposing||o.keyCode===229&&(o.key==="Enter"||o.key==="Backspace"))return;let h=(this.bindings[o.key]||[]).concat(this.bindings[o.which]||[]).filter(jt=>rh.match(o,jt));if(h.length===0)return;let p=ut.find(o.target,!0);if(p&&p.scroll!==this.quill.scroll)return;let b=this.quill.getSelection();if(b==null||!this.quill.hasFocus())return;let[w,T]=this.quill.getLine(b.index),[N,F]=this.quill.getLeaf(b.index),[nt,_t]=b.length===0?[N,F]:this.quill.getLeaf(b.index+b.length),Dt=N instanceof ko?N.value().slice(0,F):"",Pt=nt instanceof ko?nt.value().slice(_t):"",Ut={collapsed:b.length===0,empty:b.length===0&&w.length()<=1,format:this.quill.getFormat(b),line:w,offset:T,prefix:Dt,suffix:Pt,event:o};h.some(jt=>{if(jt.collapsed!=null&&jt.collapsed!==Ut.collapsed||jt.empty!=null&&jt.empty!==Ut.empty||jt.offset!=null&&jt.offset!==Ut.offset)return!1;if(Array.isArray(jt.format)){if(jt.format.every(ne=>Ut.format[ne]==null))return!1}else if(typeof jt.format=="object"&&!Object.keys(jt.format).every(ne=>jt.format[ne]===!0?Ut.format[ne]!=null:jt.format[ne]===!1?Ut.format[ne]==null:ka(jt.format[ne],Ut.format[ne])))return!1;return!(jt.prefix!=null&&!jt.prefix.test(Ut.prefix))&&!(jt.suffix!=null&&!jt.suffix.test(Ut.suffix))&&jt.handler.call(this,b,Ut,jt)!==!0})&&o.preventDefault()})}handleBackspace(o,h){let p=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(h.prefix)?2:1;if(o.index===0||this.quill.getLength()<=1)return;let b={},[w]=this.quill.getLine(o.index),T=new kt().retain(o.index-p).delete(p);if(h.offset===0){let[N]=this.quill.getLine(o.index-1);if(N&&!(N.statics.blotName==="block"&&N.length()<=1)){let F=w.formats(),nt=this.quill.getFormat(o.index-1,1);if(b=kt.AttributeMap.diff(F,nt)||{},Object.keys(b).length>0){let _t=new kt().retain(o.index+w.length()-2).retain(1,b);T=T.compose(_t)}}}this.quill.updateContents(T,ut.sources.USER),this.quill.focus()}handleDelete(o,h){let p=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(h.suffix)?2:1;if(o.index>=this.quill.getLength()-p)return;let b={},[w]=this.quill.getLine(o.index),T=new kt().retain(o.index).delete(p);if(h.offset>=w.length()-1){let[N]=this.quill.getLine(o.index+1);if(N){let F=w.formats(),nt=this.quill.getFormat(o.index,1);b=kt.AttributeMap.diff(F,nt)||{},Object.keys(b).length>0&&(T=T.retain(N.length()-1).retain(1,b))}}this.quill.updateContents(T,ut.sources.USER),this.quill.focus()}handleDeleteRange(o){Qf({range:o,quill:this.quill}),this.quill.focus()}handleEnter(o,h){let p=Object.keys(h.format).reduce((w,T)=>(this.quill.scroll.query(T,qt.BLOCK)&&!Array.isArray(h.format[T])&&(w[T]=h.format[T]),w),{}),b=new kt().retain(o.index).delete(o.length).insert(`
`,p);this.quill.updateContents(b,ut.sources.USER),this.quill.setSelection(o.index+1,ut.sources.SILENT),this.quill.focus()}}let fE={bindings:{bold:Jf("bold"),italic:Jf("italic"),underline:Jf("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(u,o){return!(!o.collapsed||o.offset===0)||(this.quill.format("indent","+1",ut.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(u,o){return!(!o.collapsed||o.offset===0)||(this.quill.format("indent","-1",ut.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(u,o){o.format.indent!=null?this.quill.format("indent","-1",ut.sources.USER):o.format.list!=null&&this.quill.format("list",!1,ut.sources.USER)}},"indent code-block":Zv(!0),"outdent code-block":Zv(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(u){this.quill.deleteText(u.index-1,1,ut.sources.USER)}},tab:{key:"Tab",handler(u,o){if(o.format.table)return!0;this.quill.history.cutoff();let h=new kt().retain(u.index).delete(u.length).insert("	");return this.quill.updateContents(h,ut.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(u.index+1,ut.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,ut.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(u,o){let h={list:!1};o.format.indent&&(h.indent=!1),this.quill.formatLine(u.index,u.length,h,ut.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(u){let[o,h]=this.quill.getLine(u.index),p={...o.formats(),list:"checked"},b=new kt().retain(u.index).insert(`
`,p).retain(o.length()-h-1).retain(1,{list:"unchecked"});this.quill.updateContents(b,ut.sources.USER),this.quill.setSelection(u.index+1,ut.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(u,o){let[h,p]=this.quill.getLine(u.index),b=new kt().retain(u.index).insert(`
`,o.format).retain(h.length()-p-1).retain(1,{header:null});this.quill.updateContents(b,ut.sources.USER),this.quill.setSelection(u.index+1,ut.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(u){let o=this.quill.getModule("table");if(o){let[h,p,b,w]=o.getTable(u),T=function(F,nt,_t,Dt){return nt.prev==null&&nt.next==null?_t.prev==null&&_t.next==null?Dt===0?-1:1:_t.prev==null?-1:1:nt.prev==null?-1:nt.next==null?1:null}(0,p,b,w);if(T==null)return;let N=h.offset();if(T<0){let F=new kt().retain(N).insert(`
`);this.quill.updateContents(F,ut.sources.USER),this.quill.setSelection(u.index+1,u.length,ut.sources.SILENT)}else if(T>0){N+=h.length();let F=new kt().retain(N).insert(`
`);this.quill.updateContents(F,ut.sources.USER),this.quill.setSelection(N,ut.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(u,o){let{event:h,line:p}=o,b=p.offset(this.quill.scroll);h.shiftKey?this.quill.setSelection(b-1,ut.sources.USER):this.quill.setSelection(b+p.length(),ut.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(u,o){if(this.quill.scroll.query("list")==null)return!0;let{length:h}=o.prefix,[p,b]=this.quill.getLine(u.index);if(b>h)return!0;let w;switch(o.prefix.trim()){case"[]":case"[ ]":w="unchecked";break;case"[x]":w="checked";break;case"-":case"*":w="bullet";break;default:w="ordered"}this.quill.insertText(u.index," ",ut.sources.USER),this.quill.history.cutoff();let T=new kt().retain(u.index-b).delete(h+1).retain(p.length()-2-b).retain(1,{list:w});return this.quill.updateContents(T,ut.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(u.index-h,ut.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(u){let[o,h]=this.quill.getLine(u.index),p=2,b=o;for(;b!=null&&b.length()<=1&&b.formats()["code-block"];)if(b=b.prev,p-=1,p<=0){let w=new kt().retain(u.index+o.length()-h-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(w,ut.sources.USER),this.quill.setSelection(u.index-1,ut.sources.SILENT),!1}return!0}},"embed left":sh("ArrowLeft",!1),"embed left shift":sh("ArrowLeft",!0),"embed right":sh("ArrowRight",!1),"embed right shift":sh("ArrowRight",!0),"table down":$v(!1),"table up":$v(!0)}};function Zv(u){return{key:"Tab",shiftKey:!u,format:{"code-block":!0},handler(o,h){let{event:p}=h,b=this.quill.scroll.query("code-block"),{TAB:w}=b;if(o.length===0&&!p.shiftKey)return this.quill.insertText(o.index,w,ut.sources.USER),void this.quill.setSelection(o.index+w.length,ut.sources.SILENT);let T=o.length===0?this.quill.getLines(o.index,1):this.quill.getLines(o),{index:N,length:F}=o;T.forEach((nt,_t)=>{u?(nt.insertAt(0,w),_t===0?N+=w.length:F+=w.length):nt.domNode.textContent.startsWith(w)&&(nt.deleteAt(0,w.length),_t===0?N-=w.length:F-=w.length)}),this.quill.update(ut.sources.USER),this.quill.setSelection(N,F,ut.sources.SILENT)}}}a(Zv,"bi");function sh(u,o){return{key:u,shiftKey:o,altKey:null,[u==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(p){let{index:b}=p;u==="ArrowRight"&&(b+=p.length+1);let[w]=this.quill.getLeaf(b);return!(w instanceof gi)||(u==="ArrowLeft"?o?this.quill.setSelection(p.index-1,p.length+1,ut.sources.USER):this.quill.setSelection(p.index-1,ut.sources.USER):o?this.quill.setSelection(p.index,p.length+1,ut.sources.USER):this.quill.setSelection(p.index+p.length+1,ut.sources.USER),!1)}}}a(sh,"yi");function Jf(u){return{key:u[0],shortKey:!0,handler(o,h){this.quill.format(u,!h.format[u],ut.sources.USER)}}}a(Jf,"vi");function $v(u){return{key:u?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(o,h){let p=u?"prev":"next",b=h.line,w=b.parent[p];if(w!=null){if(w.statics.blotName==="table-row"){let T=w.children.head,N=b;for(;N.prev!=null;)N=N.prev,T=T.next;let F=T.offset(this.quill.scroll)+Math.min(h.offset,T.length()-1);this.quill.setSelection(F,0,ut.sources.USER)}}else{let T=b.table()[p];T!=null&&(u?this.quill.setSelection(T.offset(this.quill.scroll)+T.length()-1,0,ut.sources.USER):this.quill.setSelection(T.offset(this.quill.scroll),0,ut.sources.USER))}return!1}}}a($v,"xi");function Qf(u){let{quill:o,range:h}=u,p=o.getLines(h),b={};if(p.length>1){let w=p[0].formats(),T=p[p.length-1].formats();b=kt.AttributeMap.diff(T,w)||{}}o.deleteText(h,ut.sources.USER),Object.keys(b).length>0&&o.formatLine(h.index,1,b,ut.sources.USER),o.setSelection(h.index,ut.sources.SILENT)}a(Qf,"Ni"),rh.DEFAULTS=fE;let pE=/font-weight:\s*normal/,mE=["P","OL","UL"],Kv=a(u=>u&&mE.includes(u.tagName),"Ai"),gE=/\bmso-list:[^;]*ignore/i,vE=/\bmso-list:[^;]*\bl(\d+)/i,bE=/\bmso-list:[^;]*\blevel(\d+)/i,yE=a(u=>{let o=Array.from(u.querySelectorAll("[style*=mso-list]")),h=[],p=[];o.forEach(T=>{(T.getAttribute("style")||"").match(gE)?h.push(T):p.push(T)}),h.forEach(T=>T.parentNode?.removeChild(T));let b=u.documentElement.innerHTML,w=p.map(T=>((N,F)=>{let nt=N.getAttribute("style"),_t=nt?.match(vE);if(!_t)return null;let Dt=Number(_t[1]),Pt=nt?.match(bE),Ut=Pt?Number(Pt[1]):1,jt=new RegExp(`@list l${Dt}:level${Ut}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),ne=F.match(jt);return{id:Dt,indent:Ut,type:ne&&ne[1]==="bullet"?"bullet":"ordered",element:N}})(T,b)).filter(T=>T);for(;w.length;){let T=[],N=w.shift();for(;N;)T.push(N),N=w.length&&w[0]?.element===N.element.nextElementSibling&&w[0].id===N.id?w.shift():null;let F=document.createElement("ul");T.forEach(Dt=>{let Pt=document.createElement("li");Pt.setAttribute("data-list",Dt.type),Dt.indent>1&&Pt.setAttribute("class","ql-indent-"+(Dt.indent-1)),Pt.innerHTML=Dt.element.innerHTML,F.appendChild(Pt)});let nt=T[0]?.element,{parentNode:_t}=nt??{};nt&&_t?.replaceChild(F,nt),T.slice(1).forEach(Dt=>{let{element:Pt}=Dt;_t?.removeChild(Pt)})}},"Li"),_E=[function(u){u.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&yE(u)},function(u){u.querySelector('[id^="docs-internal-guid-"]')&&((o=>{Array.from(o.querySelectorAll('b[style*="font-weight"]')).filter(h=>h.getAttribute("style")?.match(pE)).forEach(h=>{let p=o.createDocumentFragment();p.append(...h.childNodes),h.parentNode?.replaceChild(p,h)})})(u),(o=>{Array.from(o.querySelectorAll("br")).filter(h=>Kv(h.previousElementSibling)&&Kv(h.nextElementSibling)).forEach(h=>{h.parentNode?.removeChild(h)})})(u))}],wE=a(u=>{u.documentElement&&_E.forEach(o=>{o(u)})},"Ti"),xE=l("quill:clipboard"),EE=[[Node.TEXT_NODE,function(u,o,h){let p=u.data;if(u.parentElement?.tagName==="O:P")return o.insert(p.trim());if(!Yv(u)){if(p.trim().length===0&&p.includes(`
`)&&!function(w,T){return w.previousElementSibling&&w.nextElementSibling&&!$s(w.previousElementSibling,T)&&!$s(w.nextElementSibling,T)}(u,h))return o;let b=a((w,T)=>{let N=T.replace(/[^\u00a0]/g,"");return N.length<1&&w?" ":N},"s");p=p.replace(/\r\n/g," ").replace(/\n/g," "),p=p.replace(/\s\s+/g,b.bind(b,!0)),(u.previousSibling==null&&u.parentElement!=null&&$s(u.parentElement,h)||u.previousSibling instanceof Element&&$s(u.previousSibling,h))&&(p=p.replace(/^\s+/,b.bind(b,!1))),(u.nextSibling==null&&u.parentElement!=null&&$s(u.parentElement,h)||u.nextSibling instanceof Element&&$s(u.nextSibling,h))&&(p=p.replace(/\s+$/,b.bind(b,!1)))}return o.insert(p)}],[Node.TEXT_NODE,Xv],["br",function(u,o){return cc(o,`
`)||o.insert(`
`),o}],[Node.ELEMENT_NODE,Xv],[Node.ELEMENT_NODE,function(u,o,h){let p=h.query(u);if(p==null)return o;if(p.prototype instanceof gi){let b={},w=p.value(u);if(w!=null)return b[p.blotName]=w,new kt().insert(b,p.formats(u,h))}else if(p.prototype instanceof Oo&&!cc(o,`
`)&&o.insert(`
`),"blotName"in p&&"formats"in p&&typeof p.formats=="function")return Go(o,p.blotName,p.formats(u,h),h);return o}],[Node.ELEMENT_NODE,function(u,o,h){let p=Pn.keys(u),b=Oi.keys(u),w=Ar.keys(u),T={};return p.concat(b).concat(w).forEach(N=>{let F=h.query(N,qt.ATTRIBUTE);F!=null&&(T[F.attrName]=F.value(u),T[F.attrName])||(F=TE[N],F==null||F.attrName!==N&&F.keyName!==N||(T[F.attrName]=F.value(u)||void 0),F=Gv[N],F==null||F.attrName!==N&&F.keyName!==N||(F=Gv[N],T[F.attrName]=F.value(u)||void 0))}),Object.entries(T).reduce((N,F)=>{let[nt,_t]=F;return Go(N,nt,_t,h)},o)}],[Node.ELEMENT_NODE,function(u,o,h){let p={},b=u.style||{};return b.fontStyle==="italic"&&(p.italic=!0),b.textDecoration==="underline"&&(p.underline=!0),b.textDecoration==="line-through"&&(p.strike=!0),(b.fontWeight?.startsWith("bold")||parseInt(b.fontWeight,10)>=700)&&(p.bold=!0),o=Object.entries(p).reduce((w,T)=>{let[N,F]=T;return Go(w,N,F,h)},o),parseFloat(b.textIndent||0)>0?new kt().insert("	").concat(o):o}],["li",function(u,o,h){let p=h.query(u);if(p==null||p.blotName!=="list"||!cc(o,`
`))return o;let b=-1,w=u.parentNode;for(;w!=null;)["OL","UL"].includes(w.tagName)&&(b+=1),w=w.parentNode;return b<=0?o:o.reduce((T,N)=>N.insert?N.attributes&&typeof N.attributes.indent=="number"?T.push(N):T.insert(N.insert,{indent:b,...N.attributes||{}}):T,new kt)}],["ol, ul",function(u,o,h){let p=u,b=p.tagName==="OL"?"ordered":"bullet",w=p.getAttribute("data-checked");return w&&(b=w==="true"?"checked":"unchecked"),Go(o,"list",b,h)}],["pre",function(u,o,h){let p=h.query("code-block"),b=!p||!("formats"in p)||typeof p.formats!="function"||p.formats(u,h);return Go(o,"code-block",b,h)}],["tr",function(u,o,h){let p=u.parentElement?.tagName==="TABLE"?u.parentElement:u.parentElement?.parentElement;return p!=null?Go(o,"table",Array.from(p.querySelectorAll("tr")).indexOf(u)+1,h):o}],["b",ep("bold")],["i",ep("italic")],["strike",ep("strike")],["style",function(){return new kt}]],TE=[lE,Bv].reduce((u,o)=>(u[o.keyName]=o,u),{}),Gv=[qv,Gf,Kf,Fv,Uv,Wv].reduce((u,o)=>(u[o.keyName]=o,u),{});function Go(u,o,h,p){return p.query(o)?u.reduce((b,w)=>{if(!w.insert)return b;if(w.attributes&&w.attributes[o])return b.push(w);let T=h?{[o]:h}:{};return b.insert(w.insert,{...T,...w.attributes})},new kt):u}a(Go,"Ii");function cc(u,o){let h="";for(let p=u.ops.length-1;p>=0&&h.length<o.length;--p){let b=u.ops[p];if(typeof b.insert!="string")break;h=b.insert+h}return h.slice(-1*o.length)===o}a(cc,"Mi");function $s(u,o){if(!(u instanceof Element))return!1;let h=o.query(u);return!(h&&h.prototype instanceof gi)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(u.tagName.toLowerCase())}a($s,"Bi");let oh=new WeakMap;function Yv(u){return u!=null&&(oh.has(u)||(u.tagName==="PRE"?oh.set(u,!0):oh.set(u,Yv(u.parentNode))),oh.get(u))}a(Yv,"Di");function tp(u,o,h,p,b){return o.nodeType===o.TEXT_NODE?p.reduce((w,T)=>T(o,w,u),new kt):o.nodeType===o.ELEMENT_NODE?Array.from(o.childNodes||[]).reduce((w,T)=>{let N=tp(u,T,h,p,b);return T.nodeType===o.ELEMENT_NODE&&(N=h.reduce((F,nt)=>nt(T,F,u),N),N=(b.get(T)||[]).reduce((F,nt)=>nt(T,F,u),N)),w.concat(N)},new kt):new kt}a(tp,"Pi");function ep(u){return(o,h,p)=>Go(h,u,!0,p)}a(ep,"zi");function Xv(u,o,h){if(!cc(o,`
`)){if($s(u,h)&&(u.childNodes.length>0||u instanceof HTMLParagraphElement))return o.insert(`
`);if(o.length()>0&&u.nextSibling){let p=u.nextSibling;for(;p!=null;){if($s(p,h))return o.insert(`
`);let b=h.query(p);if(b&&b.prototype instanceof Ii)return o.insert(`
`);p=p.firstChild}}}return o}a(Xv,"Hi");function Jv(u,o){let h=o;for(let p=u.length-1;p>=0;p-=1){let b=u[p];u[p]={delta:h.transform(b.delta,!0),range:b.range&&np(b.range,h)},h=b.delta.transform(h),u[p].delta.length()===0&&u.splice(p,1)}}a(Jv,"Fi");function np(u,o){if(!u)return u;let h=o.transformPosition(u.index);return{index:h,length:o.transformPosition(u.index+u.length)-h}}a(np,"$i");class Qv extends Je{static{a(this,"Vi")}constructor(o,h){super(o,h),o.root.addEventListener("drop",p=>{p.preventDefault();let b=null;if(document.caretRangeFromPoint)b=document.caretRangeFromPoint(p.clientX,p.clientY);else if(document.caretPositionFromPoint){let T=document.caretPositionFromPoint(p.clientX,p.clientY);b=document.createRange(),b.setStart(T.offsetNode,T.offset),b.setEnd(T.offsetNode,T.offset)}let w=b&&o.selection.normalizeNative(b);if(w){let T=o.selection.normalizedToRange(w);p.dataTransfer?.files&&this.upload(T,p.dataTransfer.files)}})}upload(o,h){let p=[];Array.from(h).forEach(b=>{b&&this.options.mimetypes?.includes(b.type)&&p.push(b)}),p.length>0&&this.options.handler.call(this,o,p)}}Qv.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(u,o){if(!this.quill.scroll.query("image"))return;let h=o.map(p=>new Promise(b=>{let w=new FileReader;w.onload=()=>{b(w.result)},w.readAsDataURL(p)}));Promise.all(h).then(p=>{let b=p.reduce((w,T)=>w.insert({image:T}),new kt().retain(u.index).delete(u.length));this.quill.updateContents(b,g.sources.USER),this.quill.setSelection(u.index+p.length,g.sources.SILENT)})}};let SE=Qv,AE=["insertText","insertReplacementText"],LE=class extends Je{static{a(this,"Zi")}constructor(u,o){super(u,o),u.root.addEventListener("beforeinput",h=>{this.handleBeforeInput(h)}),/Android/i.test(navigator.userAgent)||u.on(ut.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(u){Qf({range:u,quill:this.quill})}replaceText(u){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(u.length===0)return!1;if(o){let h=this.quill.getFormat(u.index,1);this.deleteRange(u),this.quill.updateContents(new kt().retain(u.index).insert(o,h),ut.sources.USER)}else this.deleteRange(u);return this.quill.setSelection(u.index+o.length,0,ut.sources.SILENT),!0}handleBeforeInput(u){if(this.quill.composition.isComposing||u.defaultPrevented||!AE.includes(u.inputType))return;let o=u.getTargetRanges?u.getTargetRanges()[0]:null;if(!o||o.collapsed===!0)return;let h=function(w){return typeof w.data=="string"?w.data:w.dataTransfer?.types.includes("text/plain")?w.dataTransfer.getData("text/plain"):null}(u);if(h==null)return;let p=this.quill.selection.normalizeNative(o),b=p?this.quill.selection.normalizedToRange(p):null;b&&this.replaceText(b,h)&&u.preventDefault()}handleCompositionStart(){let u=this.quill.getSelection();u&&this.replaceText(u)}},CE=/Mac/i.test(navigator.platform),NE=class extends Je{static{a(this,"Xi")}isListening=!1;selectionChangeDeadline=0;constructor(u,o){super(u,o),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(u,o){let{line:h,event:p}=o;if(!(h instanceof Gi&&h.uiNode))return!0;let b=getComputedStyle(h.domNode).direction==="rtl";return!!(b&&p.key!=="ArrowRight"||!b&&p.key!=="ArrowLeft")||(this.quill.setSelection(u.index-1,u.length+(p.shiftKey?1:0),ut.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",u=>{!u.defaultPrevented&&(o=>o.key==="ArrowLeft"||o.key==="ArrowRight"||o.key==="ArrowUp"||o.key==="ArrowDown"||o.key==="Home"||!(!CE||o.key!=="a"||o.ctrlKey!==!0))(u)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,!this.isListening&&(this.isListening=!0,document.addEventListener("selectionchange",()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){let u=document.getSelection();if(!u)return;let o=u.getRangeAt(0);if(o.collapsed!==!0||o.startOffset!==0)return;let h=this.quill.scroll.find(o.startContainer);if(!(h instanceof Gi&&h.uiNode))return;let p=document.createRange();p.setStartAfter(h.uiNode),p.setEndAfter(h.uiNode),u.removeAllRanges(),u.addRange(p)}};ut.register({"blots/block":Sn,"blots/block/embed":Ii,"blots/break":bi,"blots/container":$o,"blots/cursor":Vo,"blots/embed":ac,"blots/inline":Or,"blots/scroll":aE,"blots/text":Xi,"modules/clipboard":class extends Je{static DEFAULTS={matchers:[]};constructor(u,o){super(u,o),this.quill.root.addEventListener("copy",h=>this.onCaptureCopy(h,!1)),this.quill.root.addEventListener("cut",h=>this.onCaptureCopy(h,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],EE.concat(this.options.matchers??[]).forEach(h=>{let[p,b]=h;this.addMatcher(p,b)})}addMatcher(u,o){this.matchers.push([u,o])}convert(u){let{html:o,text:h}=u,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(p[_i.blotName])return new kt().insert(h||"",{[_i.blotName]:p[_i.blotName]});if(!o)return new kt().insert(h||"",p);let b=this.convertHTML(o);return cc(b,`
`)&&(b.ops[b.ops.length-1].attributes==null||p.table)?b.compose(new kt().retain(b.length()-1).delete(1)):b}normalizeHTML(u){wE(u)}convertHTML(u){let o=new DOMParser().parseFromString(u,"text/html");this.normalizeHTML(o);let h=o.body,p=new WeakMap,[b,w]=this.prepareMatching(h,p);return tp(this.quill.scroll,h,b,w,p)}dangerouslyPasteHTML(u,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ut.sources.API;if(typeof u=="string"){let p=this.convert({html:u,text:""});this.quill.setContents(p,o),this.quill.setSelection(0,ut.sources.SILENT)}else{let p=this.convert({html:o,text:""});this.quill.updateContents(new kt().retain(u).concat(p),h),this.quill.setSelection(u+p.length(),ut.sources.SILENT)}}onCaptureCopy(u){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(u.defaultPrevented)return;u.preventDefault();let[h]=this.quill.selection.getRange();if(h==null)return;let{html:p,text:b}=this.onCopy(h,o);u.clipboardData?.setData("text/plain",b),u.clipboardData?.setData("text/html",p),o&&Qf({range:h,quill:this.quill})}normalizeURIList(u){return u.split(/\r?\n/).filter(o=>o[0]!=="#").join(`
`)}onCapturePaste(u){if(u.defaultPrevented||!this.quill.isEnabled())return;u.preventDefault();let o=this.quill.getSelection(!0);if(o==null)return;let h=u.clipboardData?.getData("text/html"),p=u.clipboardData?.getData("text/plain");if(!h&&!p){let w=u.clipboardData?.getData("text/uri-list");w&&(p=this.normalizeURIList(w))}let b=Array.from(u.clipboardData?.files||[]);if(!h&&b.length>0)this.quill.uploader.upload(o,b);else{if(h&&b.length>0){let w=new DOMParser().parseFromString(h,"text/html");if(w.body.childElementCount===1&&w.body.firstElementChild?.tagName==="IMG")return void this.quill.uploader.upload(o,b)}this.onPaste(o,{html:h,text:p})}}onCopy(u){let o=this.quill.getText(u);return{html:this.quill.getSemanticHTML(u),text:o}}onPaste(u,o){let{text:h,html:p}=o,b=this.quill.getFormat(u.index),w=this.convert({text:h,html:p},b);xE.log("onPaste",w,{text:h,html:p});let T=new kt().retain(u.index).delete(u.length).concat(w);this.quill.updateContents(T,ut.sources.USER),this.quill.setSelection(T.length()-u.length,ut.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(u,o){let h=[],p=[];return this.matchers.forEach(b=>{let[w,T]=b;switch(w){case Node.TEXT_NODE:p.push(T);break;case Node.ELEMENT_NODE:h.push(T);break;default:Array.from(u.querySelectorAll(w)).forEach(N=>{o.has(N)?o.get(N)?.push(T):o.set(N,[T])})}}),[h,p]}},"modules/history":class extends Je{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(u,o){super(u,o),this.quill.on(ut.events.EDITOR_CHANGE,(h,p,b,w)=>{h===ut.events.SELECTION_CHANGE?p&&w!==ut.sources.SILENT&&(this.currentRange=p):h===ut.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&w!==ut.sources.USER?this.transform(p):this.record(p,b)),this.currentRange=np(this.currentRange,p))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",h=>{h.inputType==="historyUndo"?(this.undo(),h.preventDefault()):h.inputType==="historyRedo"&&(this.redo(),h.preventDefault())})}change(u,o){if(this.stack[u].length===0)return;let h=this.stack[u].pop();if(!h)return;let p=this.quill.getContents(),b=h.delta.invert(p);this.stack[o].push({delta:b,range:np(h.range,b)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(h.delta,ut.sources.USER),this.ignoreChange=!1,this.restoreSelection(h)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(u,o){if(u.ops.length===0)return;this.stack.redo=[];let h=u.invert(o),p=this.currentRange,b=Date.now();if(this.lastRecorded+this.options.delay>b&&this.stack.undo.length>0){let w=this.stack.undo.pop();w&&(h=h.compose(w.delta),p=w.range)}else this.lastRecorded=b;h.length()!==0&&(this.stack.undo.push({delta:h,range:p}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(u){Jv(this.stack.undo,u),Jv(this.stack.redo,u)}undo(){this.change("undo","redo")}restoreSelection(u){if(u.range)this.quill.setSelection(u.range,ut.sources.USER);else{let o=function(h,p){let b=p.reduce((T,N)=>T+(N.delete||0),0),w=p.length()-b;return function(T,N){let F=N.ops[N.ops.length-1];return F==null?!1:F.insert!=null?typeof F.insert=="string"&&F.insert.endsWith(`
`):F.attributes!=null?Object.keys(F.attributes).some(nt=>T.query(nt,qt.BLOCK)!=null):!1}(h,p)&&(w-=1),w}(this.quill.scroll,u.delta);this.quill.setSelection(o,ut.sources.USER)}}},"modules/keyboard":rh,"modules/uploader":SE,"modules/input":LE,"modules/uiNode":NE});let ip=ut,OE=new class extends Oi{add(u,o){let h=0;if(o==="+1"||o==="-1"){let p=this.value(u)||0;h=o==="+1"?p+1:p-1}else typeof o=="number"&&(h=o);return h===0?(this.remove(u),!0):super.add(u,h.toString())}canAdd(u,o){return super.canAdd(u,o)||super.canAdd(u,parseInt(o,10))}value(u){return parseInt(super.value(u),10)||void 0}}("indent","ql-indent",{scope:qt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),kE=OE,ME=class extends Sn{static{a(this,"to")}static blotName="blockquote";static tagName="blockquote"},IE=class extends Sn{static{a(this,"eo")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(u){return this.tagName.indexOf(u.tagName)+1}};class uc extends $o{static{a(this,"no")}}uc.blotName="list-container",uc.tagName="OL";class hc extends Sn{static{a(this,"ro")}static create(o){let h=super.create();return h.setAttribute("data-list",o),h}static formats(o){return o.getAttribute("data-list")||void 0}static register(){ut.register(uc)}constructor(o,h){super(o,h);let p=h.ownerDocument.createElement("span"),b=a(w=>{if(!o.isEnabled())return;let T=this.statics.formats(h,o);T==="checked"?(this.format("list","unchecked"),w.preventDefault()):T==="unchecked"&&(this.format("list","checked"),w.preventDefault())},"r");p.addEventListener("mousedown",b),p.addEventListener("touchstart",b),this.attachUI(p)}format(o,h){o===this.statics.blotName&&h?this.domNode.setAttribute("data-list",h):super.format(o,h)}}hc.blotName="list",hc.tagName="LI",uc.allowedChildren=[hc],hc.requiredContainer=uc;let rp=class extends Or{static{a(this,"so")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(u){super.optimize(u),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},DE=class extends rp{static{a(this,"io")}static blotName="italic";static tagName=["EM","I"]};class ah extends Or{static{a(this,"oo")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(o){let h=super.create(o);return h.setAttribute("href",this.sanitize(o)),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}static formats(o){return o.getAttribute("href")}static sanitize(o){return tb(o,this.PROTOCOL_WHITELIST)?o:this.SANITIZED_URL}format(o,h){o===this.statics.blotName&&h?this.domNode.setAttribute("href",this.constructor.sanitize(h)):super.format(o,h)}}function tb(u,o){let h=document.createElement("a");h.href=u;let p=h.href.slice(0,h.href.indexOf(":"));return o.indexOf(p)>-1}a(tb,"lo");let PE=class extends Or{static{a(this,"ao")}static blotName="script";static tagName=["SUB","SUP"];static create(u){return u==="super"?document.createElement("sup"):u==="sub"?document.createElement("sub"):super.create(u)}static formats(u){return u.tagName==="SUB"?"sub":u.tagName==="SUP"?"super":void 0}},qE=class extends rp{static{a(this,"co")}static blotName="strike";static tagName=["S","STRIKE"]},RE=class extends Or{static{a(this,"uo")}static blotName="underline";static tagName="U"},BE=class extends ac{static{a(this,"ho")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(u){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let o=super.create(u);return typeof u=="string"&&(window.katex.render(u,o,{throwOnError:!1,errorColor:"#f00"}),o.setAttribute("data-value",u)),o}static value(u){return u.getAttribute("data-value")}html(){let{formula:u}=this.value();return`<span>${u}</span>`}},eb=["alt","height","width"],jE=class extends gi{static{a(this,"po")}static blotName="image";static tagName="IMG";static create(u){let o=super.create(u);return typeof u=="string"&&o.setAttribute("src",this.sanitize(u)),o}static formats(u){return eb.reduce((o,h)=>(u.hasAttribute(h)&&(o[h]=u.getAttribute(h)),o),{})}static match(u){return/\.(jpe?g|gif|png)$/.test(u)||/^data:image\/.+;base64/.test(u)}static sanitize(u){return tb(u,["http","https","data"])?u:"//:0"}static value(u){return u.getAttribute("src")}format(u,o){eb.indexOf(u)>-1?o?this.domNode.setAttribute(u,o):this.domNode.removeAttribute(u):super.format(u,o)}},nb=["height","width"],FE=class extends Ii{static{a(this,"mo")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(u){let o=super.create(u);return o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen","true"),o.setAttribute("src",this.sanitize(u)),o}static formats(u){return nb.reduce((o,h)=>(u.hasAttribute(h)&&(o[h]=u.getAttribute(h)),o),{})}static sanitize(u){return ah.sanitize(u)}static value(u){return u.getAttribute("src")}format(u,o){nb.indexOf(u)>-1?o?this.domNode.setAttribute(u,o):this.domNode.removeAttribute(u):super.format(u,o)}html(){let{video:u}=this.value();return`<a href="${u}">${u}</a>`}},dc=new Oi("code-token","hljs",{scope:qt.INLINE});class ms extends Or{static{a(this,"yo")}static formats(o,h){for(;o!=null&&o!==h.domNode;){if(o.classList&&o.classList.contains(_i.className))return super.formats(o,h);o=o.parentNode}}constructor(o,h,p){super(o,h,p),dc.add(this.domNode,p)}format(o,h){o!==ms.blotName?super.format(o,h):h?dc.add(this.domNode,h):(dc.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),dc.value(this.domNode)||this.unwrap()}}ms.blotName="code-token",ms.className="ql-token";class fr extends _i{static{a(this,"vo")}static create(o){let h=super.create(o);return typeof o=="string"&&h.setAttribute("data-language",o),h}static formats(o){return o.getAttribute("data-language")||"plain"}static register(){}format(o,h){o===this.statics.blotName&&h?this.domNode.setAttribute("data-language",h):super.format(o,h)}replaceWith(o,h){return this.formatAt(0,this.length(),ms.blotName,!1),super.replaceWith(o,h)}}class fc extends Ko{static{a(this,"xo")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(o,h){o===fr.blotName&&(this.forceNext=!0,this.children.forEach(p=>{p.format(o,h)}))}formatAt(o,h,p,b){p===fr.blotName&&(this.forceNext=!0),super.formatAt(o,h,p,b)}highlight(o){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.children.head==null)return;let p=`${Array.from(this.domNode.childNodes).filter(w=>w!==this.uiNode).map(w=>w.textContent).join(`
`)}
`,b=fr.formats(this.children.head.domNode);if(h||this.forceNext||this.cachedText!==p){if(p.trim().length>0||this.cachedText==null){let w=this.children.reduce((N,F)=>N.concat(sc(F,!1)),new kt),T=o(p,b);w.diff(T).reduce((N,F)=>{let{retain:nt,attributes:_t}=F;return nt?(_t&&Object.keys(_t).forEach(Dt=>{[fr.blotName,ms.blotName].includes(Dt)&&this.formatAt(N,nt,Dt,_t[Dt])}),N+nt):N},0)}this.cachedText=p,this.forceNext=!1}}html(o,h){let[p]=this.children.find(o);return`<pre data-language="${p?fr.formats(p.domNode):"plain"}">
${fs(this.code(o,h))}
</pre>`}optimize(o){if(super.optimize(o),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let h=fr.formats(this.children.head.domNode);h!==this.uiNode.value&&(this.uiNode.value=h)}}}fc.allowedChildren=[fr],fr.requiredContainer=fc,fr.allowedChildren=[ms,Vo,Xi,bi];class ib extends Je{static{a(this,"No")}static register(){ut.register(ms,!0),ut.register(fr,!0),ut.register(fc,!0)}constructor(o,h){if(super(o,h),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((p,b)=>{let{key:w}=b;return p[w]=!0,p},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(ut.events.SCROLL_BLOT_MOUNT,o=>{if(!(o instanceof fc))return;let h=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(p=>{let{key:b,label:w}=p,T=h.ownerDocument.createElement("option");T.textContent=w,T.setAttribute("value",b),h.appendChild(T)}),h.addEventListener("change",()=>{o.format(fr.blotName,h.value),this.quill.root.focus(),this.highlight(o,!0)}),o.uiNode==null&&(o.attachUI(h),o.children.head&&(h.value=fr.formats(o.children.head.domNode)))})}initTimer(){let o=null;this.quill.on(ut.events.SCROLL_OPTIMIZE,()=>{o&&clearTimeout(o),o=setTimeout(()=>{this.highlight(),o=null},this.options.interval)})}highlight(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(ut.sources.USER);let p=this.quill.getSelection();(o==null?this.quill.scroll.descendants(fc):[o]).forEach(b=>{b.highlight(this.highlightBlot,h)}),this.quill.update(ut.sources.SILENT),p!=null&&this.quill.setSelection(p,ut.sources.SILENT)}highlightBlot(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(h=this.languages[h]?h:"plain",h==="plain")return fs(o).split(`
`).reduce((b,w,T)=>(T!==0&&b.insert(`
`,{[_i.blotName]:h}),b.insert(w)),new kt);let p=this.quill.root.ownerDocument.createElement("div");return p.classList.add(_i.className),p.innerHTML=((b,w,T)=>{if(typeof b.versionString=="string"){let N=b.versionString.split(".")[0];if(parseInt(N,10)>=11)return b.highlight(T,{language:w}).value}return b.highlight(w,T).value})(this.options.hljs,h,o),tp(this.quill.scroll,p,[(b,w)=>{let T=dc.value(b);return T?w.compose(new kt().retain(w.length(),{[ms.blotName]:T})):w}],[(b,w)=>b.data.split(`
`).reduce((T,N,F)=>(F!==0&&T.insert(`
`,{[_i.blotName]:h}),T.insert(N)),w)],new WeakMap)}}ib.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Dr extends Sn{static{a(this,"wo")}static blotName="table";static tagName="TD";static create(o){let h=super.create();return o?h.setAttribute("data-row",o):h.setAttribute("data-row",sp()),h}static formats(o){if(o.hasAttribute("data-row"))return o.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(o,h){o===Dr.blotName&&h?this.domNode.setAttribute("data-row",h):super.format(o,h)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Yo extends $o{static{a(this,"Eo")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let o=this.children.head.formats(),h=this.children.tail.formats(),p=this.next.children.head.formats(),b=this.next.children.tail.formats();return o.table===h.table&&o.table===p.table&&o.table===b.table}return!1}optimize(o){super.optimize(o),this.children.forEach(h=>{if(h.next==null)return;let p=h.formats(),b=h.next.formats();if(p.table!==b.table){let w=this.splitAfter(h);w&&w.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Ks extends $o{static{a(this,"Ao")}static blotName="table-body";static tagName="TBODY"}class lh extends $o{static{a(this,"qo")}static blotName="table-container";static tagName="TABLE";balanceCells(){let o=this.descendants(Yo),h=o.reduce((p,b)=>Math.max(b.children.length,p),0);o.forEach(p=>{new Array(h-p.children.length).fill(0).forEach(()=>{let b;p.children.head!=null&&(b=Dr.formats(p.children.head.domNode));let w=this.scroll.create(Dr.blotName,b);p.appendChild(w),w.optimize()})})}cells(o){return this.rows().map(h=>h.children.at(o))}deleteColumn(o){let[h]=this.descendant(Ks);h!=null&&h.children.head!=null&&h.children.forEach(p=>{let b=p.children.at(o);b?.remove()})}insertColumn(o){let[h]=this.descendant(Ks);h!=null&&h.children.head!=null&&h.children.forEach(p=>{let b=p.children.at(o),w=Dr.formats(p.children.head.domNode),T=this.scroll.create(Dr.blotName,w);p.insertBefore(T,b)})}insertRow(o){let[h]=this.descendant(Ks);if(h==null||h.children.head==null)return;let p=sp(),b=this.scroll.create(Yo.blotName);h.children.head.children.forEach(()=>{let T=this.scroll.create(Dr.blotName,p);b.appendChild(T)});let w=h.children.at(o);h.insertBefore(b,w)}rows(){let o=this.children.head;return o==null?[]:o.children.map(h=>h)}}function sp(){return`row-${Math.random().toString(36).slice(2,6)}`}a(sp,"ko"),lh.allowedChildren=[Ks],Ks.requiredContainer=lh,Ks.allowedChildren=[Yo],Yo.requiredContainer=Ks,Yo.allowedChildren=[Dr],Dr.requiredContainer=Yo;let HE=class extends Je{static{a(this,"_o")}static register(){ut.register(Dr),ut.register(Yo),ut.register(Ks),ut.register(lh)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(lh).forEach(u=>{u.balanceCells()})}deleteColumn(){let[u,,o]=this.getTable();o!=null&&(u.deleteColumn(o.cellOffset()),this.quill.update(ut.sources.USER))}deleteRow(){let[,u]=this.getTable();u!=null&&(u.remove(),this.quill.update(ut.sources.USER))}deleteTable(){let[u]=this.getTable();if(u==null)return;let o=u.offset();u.remove(),this.quill.update(ut.sources.USER),this.quill.setSelection(o,ut.sources.SILENT)}getTable(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(u==null)return[null,null,null,-1];let[o,h]=this.quill.getLine(u.index);if(o==null||o.statics.blotName!==Dr.blotName)return[null,null,null,-1];let p=o.parent;return[p.parent.parent,p,o,h]}insertColumn(u){let o=this.quill.getSelection();if(!o)return;let[h,p,b]=this.getTable(o);if(b==null)return;let w=b.cellOffset();h.insertColumn(w+u),this.quill.update(ut.sources.USER);let T=p.rowOffset();u===0&&(T+=1),this.quill.setSelection(o.index+T,o.length,ut.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(u){let o=this.quill.getSelection();if(!o)return;let[h,p,b]=this.getTable(o);if(b==null)return;let w=p.rowOffset();h.insertRow(w+u),this.quill.update(ut.sources.USER),u>0?this.quill.setSelection(o,ut.sources.SILENT):this.quill.setSelection(o.index+p.children.length,o.length,ut.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(u,o){let h=this.quill.getSelection();if(h==null)return;let p=new Array(u).fill(0).reduce(b=>{let w=new Array(o).fill(`
`).join("");return b.insert(w,{table:sp()})},new kt().retain(h.index));this.quill.updateContents(p,ut.sources.USER),this.quill.setSelection(h.index,ut.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(ut.events.SCROLL_OPTIMIZE,u=>{u.some(o=>!!["TD","TR","TBODY","TABLE"].includes(o.target.tagName)&&(this.quill.once(ut.events.TEXT_CHANGE,(h,p,b)=>{b===ut.sources.USER&&this.balanceTables()}),!0))})}},rb=l("quill:toolbar");class op extends Je{static{a(this,"Oo")}constructor(o,h){if(super(o,h),Array.isArray(this.options.container)){let p=document.createElement("div");p.setAttribute("role","toolbar"),function(b,w){Array.isArray(w[0])||(w=[w]),w.forEach(T=>{let N=document.createElement("span");N.classList.add("ql-formats"),T.forEach(F=>{if(typeof F=="string")sb(N,F);else{let nt=Object.keys(F)[0],_t=F[nt];Array.isArray(_t)?function(Dt,Pt,Ut){let jt=document.createElement("select");jt.classList.add(`ql-${Pt}`),Ut.forEach(ne=>{let Ke=document.createElement("option");ne!==!1?Ke.setAttribute("value",String(ne)):Ke.setAttribute("selected","selected"),jt.appendChild(Ke)}),Dt.appendChild(jt)}(N,nt,_t):sb(N,nt,_t)}}),b.appendChild(N)})}(p,this.options.container),o.container?.parentNode?.insertBefore(p,o.container),this.container=p}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(p=>{let b=this.options.handlers?.[p];b&&this.addHandler(p,b)}),Array.from(this.container.querySelectorAll("button, select")).forEach(p=>{this.attach(p)}),this.quill.on(ut.events.EDITOR_CHANGE,()=>{let[p]=this.quill.selection.getRange();this.update(p)})):rb.error("Container required for toolbar",this.options)}addHandler(o,h){this.handlers[o]=h}attach(o){let h=Array.from(o.classList).find(b=>b.indexOf("ql-")===0);if(!h)return;if(h=h.slice(3),o.tagName==="BUTTON"&&o.setAttribute("type","button"),this.handlers[h]==null&&this.quill.scroll.query(h)==null)return void rb.warn("ignoring attaching to nonexistent format",h,o);let p=o.tagName==="SELECT"?"change":"click";o.addEventListener(p,b=>{let w;if(o.tagName==="SELECT"){if(o.selectedIndex<0)return;let N=o.options[o.selectedIndex];w=!N.hasAttribute("selected")&&(N.value||!1)}else w=!o.classList.contains("ql-active")&&(o.value||!o.hasAttribute("value")),b.preventDefault();this.quill.focus();let[T]=this.quill.selection.getRange();if(this.handlers[h]!=null)this.handlers[h].call(this,w);else if(this.quill.scroll.query(h).prototype instanceof gi){if(w=prompt(`Enter ${h}`),!w)return;this.quill.updateContents(new kt().retain(T.index).delete(T.length).insert({[h]:w}),ut.sources.USER)}else this.quill.format(h,w,ut.sources.USER);this.update(T)}),this.controls.push([h,o])}update(o){let h=o==null?{}:this.quill.getFormat(o);this.controls.forEach(p=>{let[b,w]=p;if(w.tagName==="SELECT"){let T=null;if(o==null)T=null;else if(h[b]==null)T=w.querySelector("option[selected]");else if(!Array.isArray(h[b])){let N=h[b];typeof N=="string"&&(N=N.replace(/"/g,'\\"')),T=w.querySelector(`option[value="${N}"]`)}T==null?(w.value="",w.selectedIndex=-1):T.selected=!0}else if(o==null)w.classList.remove("ql-active"),w.setAttribute("aria-pressed","false");else if(w.hasAttribute("value")){let T=h[b],N=T===w.getAttribute("value")||T!=null&&T.toString()===w.getAttribute("value")||T==null&&!w.getAttribute("value");w.classList.toggle("ql-active",N),w.setAttribute("aria-pressed",N.toString())}else{let T=h[b]!=null;w.classList.toggle("ql-active",T),w.setAttribute("aria-pressed",T.toString())}})}}function sb(u,o,h){let p=document.createElement("button");p.setAttribute("type","button"),p.classList.add(`ql-${o}`),p.setAttribute("aria-pressed","false"),h!=null?(p.value=h,p.setAttribute("aria-label",`${o}: ${h}`)):p.setAttribute("aria-label",o),u.appendChild(p)}a(sb,"To"),op.DEFAULTS={},op.DEFAULTS={container:null,handlers:{clean(){let u=this.quill.getSelection();if(u!=null)if(u.length===0){let o=this.quill.getFormat();Object.keys(o).forEach(h=>{this.quill.scroll.query(h,qt.INLINE)!=null&&this.quill.format(h,!1,ut.sources.USER)})}else this.quill.removeFormat(u.index,u.length,ut.sources.USER)},direction(u){let{align:o}=this.quill.getFormat();u==="rtl"&&o==null?this.quill.format("align","right",ut.sources.USER):u||o!=="right"||this.quill.format("align",!1,ut.sources.USER),this.quill.format("direction",u,ut.sources.USER)},indent(u){let o=this.quill.getSelection(),h=this.quill.getFormat(o),p=parseInt(h.indent||0,10);if(u==="+1"||u==="-1"){let b=u==="+1"?1:-1;h.direction==="rtl"&&(b*=-1),this.quill.format("indent",p+b,ut.sources.USER)}},link(u){u===!0&&(u=prompt("Enter link URL:")),this.quill.format("link",u,ut.sources.USER)},list(u){let o=this.quill.getSelection(),h=this.quill.getFormat(o);u==="check"?h.list==="checked"||h.list==="unchecked"?this.quill.format("list",!1,ut.sources.USER):this.quill.format("list","unchecked",ut.sources.USER):this.quill.format("list",u,ut.sources.USER)}}};let ob='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',pc={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:ob,"code-block":ob,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},ab=0;function lb(u,o){u.setAttribute(o,`${u.getAttribute(o)!=="true"}`)}a(lb,"Ro");let ch=class{static{a(this,"Io")}constructor(u){this.select=u,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",o=>{switch(o.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),o.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),lb(this.label,"aria-expanded"),lb(this.options,"aria-hidden")}buildItem(u){let o=document.createElement("span");o.tabIndex="0",o.setAttribute("role","button"),o.classList.add("ql-picker-item");let h=u.getAttribute("value");return h&&o.setAttribute("data-value",h),u.textContent&&o.setAttribute("data-label",u.textContent),o.addEventListener("click",()=>{this.selectItem(o,!0)}),o.addEventListener("keydown",p=>{switch(p.key){case"Enter":this.selectItem(o,!0),p.preventDefault();break;case"Escape":this.escape(),p.preventDefault()}}),o}buildLabel(){let u=document.createElement("span");return u.classList.add("ql-picker-label"),u.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',u.tabIndex="0",u.setAttribute("role","button"),u.setAttribute("aria-expanded","false"),this.container.appendChild(u),u}buildOptions(){let u=document.createElement("span");u.classList.add("ql-picker-options"),u.setAttribute("aria-hidden","true"),u.tabIndex="-1",u.id=`ql-picker-options-${ab}`,ab+=1,this.label.setAttribute("aria-controls",u.id),this.options=u,Array.from(this.select.options).forEach(o=>{let h=this.buildItem(o);u.appendChild(h),o.selected===!0&&this.selectItem(h)}),this.container.appendChild(u)}buildPicker(){Array.from(this.select.attributes).forEach(u=>{this.container.setAttribute(u.name,u.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(u){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],h=this.container.querySelector(".ql-selected");u!==h&&(h?.classList.remove("ql-selected"),u!=null&&(u.classList.add("ql-selected"),this.select.selectedIndex=Array.from(u.parentNode.children).indexOf(u),u.hasAttribute("data-value")?this.label.setAttribute("data-value",u.getAttribute("data-value")):this.label.removeAttribute("data-value"),u.hasAttribute("data-label")?this.label.setAttribute("data-label",u.getAttribute("data-label")):this.label.removeAttribute("data-label"),o&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let u;if(this.select.selectedIndex>-1){let h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];u=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);let o=u!=null&&u!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",o)}},cb=class extends ch{static{a(this,"Mo")}constructor(u,o){super(u),this.label.innerHTML=o,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(h=>{h.classList.add("ql-primary")})}buildItem(u){let o=super.buildItem(u);return o.style.backgroundColor=u.getAttribute("value")||"",o}selectItem(u,o){super.selectItem(u,o);let h=this.label.querySelector(".ql-color-label"),p=u&&u.getAttribute("data-value")||"";h&&(h.tagName==="line"?h.style.stroke=p:h.style.fill=p)}},ub=class extends ch{static{a(this,"Bo")}constructor(u,o){super(u),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(h=>{h.innerHTML=o[h.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(u,o){super.selectItem(u,o);let h=u||this.defaultItem;if(h!=null){if(this.label.innerHTML===h.innerHTML)return;this.label.innerHTML=h.innerHTML}}},hb=class{static{a(this,"Uo")}constructor(u,o){this.quill=u,this.boundsContainer=o||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(h=>{let{overflowY:p}=getComputedStyle(h,null);return p!=="visible"&&p!=="clip"})(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(u){let o=u.left+u.width/2-this.root.offsetWidth/2,h=u.bottom+this.quill.root.scrollTop;this.root.style.left=`${o}px`,this.root.style.top=`${h}px`,this.root.classList.remove("ql-flip");let p=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),w=0;if(b.right>p.right&&(w=p.right-b.right,this.root.style.left=`${o+w}px`),b.left<p.left&&(w=p.left-b.left,this.root.style.left=`${o+w}px`),b.bottom>p.bottom){let T=b.bottom-b.top,N=u.bottom-u.top+T;this.root.style.top=h-N+"px",this.root.classList.add("ql-flip")}return w}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},zE=[!1,"center","right","justify"],UE=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],VE=[!1,"serif","monospace"],WE=["1","2","3",!1],ZE=["small",!1,"large","huge"];class mc extends Wo{static{a(this,"$o")}constructor(o,h){super(o,h);let p=a(b=>{document.body.contains(o.root)?(this.tooltip==null||this.tooltip.root.contains(b.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(w=>{w.container.contains(b.target)||w.close()})):document.body.removeEventListener("click",p)},"n");o.emitter.listenDOM("click",document.body,p)}addModule(o){let h=super.addModule(o);return o==="toolbar"&&this.extendToolbar(h),h}buildButtons(o,h){Array.from(o).forEach(p=>{(p.getAttribute("class")||"").split(/\s+/).forEach(b=>{if(b.startsWith("ql-")&&(b=b.slice(3),h[b]!=null))if(b==="direction")p.innerHTML=h[b][""]+h[b].rtl;else if(typeof h[b]=="string")p.innerHTML=h[b];else{let w=p.value||"";w!=null&&h[b][w]&&(p.innerHTML=h[b][w])}})})}buildPickers(o,h){this.pickers=Array.from(o).map(p=>{if(p.classList.contains("ql-align")&&(p.querySelector("option")==null&&gc(p,zE),typeof h.align=="object"))return new ub(p,h.align);if(p.classList.contains("ql-background")||p.classList.contains("ql-color")){let b=p.classList.contains("ql-background")?"background":"color";return p.querySelector("option")==null&&gc(p,UE,b==="background"?"#ffffff":"#000000"),new cb(p,h[b])}return p.querySelector("option")==null&&(p.classList.contains("ql-font")?gc(p,VE):p.classList.contains("ql-header")?gc(p,WE):p.classList.contains("ql-size")&&gc(p,ZE)),new ch(p)}),this.quill.on(g.events.EDITOR_CHANGE,()=>{this.pickers.forEach(p=>{p.update()})})}}mc.DEFAULTS=Yn({},Wo.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let u=this.container.querySelector("input.ql-image[type=file]");u==null&&(u=document.createElement("input"),u.setAttribute("type","file"),u.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),u.classList.add("ql-image"),u.addEventListener("change",()=>{let o=this.quill.getSelection(!0);this.quill.uploader.upload(o,u.files),u.value=""}),this.container.appendChild(u)),u.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class db extends hb{static{a(this,"Vo")}constructor(o,h){super(o,h),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",o=>{o.key==="Enter"?(this.save(),o.preventDefault()):o.key==="Escape"&&(this.cancel(),o.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;h!=null?this.textbox.value=h:o!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let p=this.quill.getBounds(this.quill.selection.savedRange);p!=null&&this.position(p),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${o}`)||""),this.root.setAttribute("data-mode",o)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:o}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:h}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",o,g.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",o,g.sources.USER)),this.quill.root.scrollTop=h;break}case"video":o=function(h){let p=h.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||h.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return p?`${p[1]||"https"}://www.youtube.com/embed/${p[2]}?showinfo=0`:(p=h.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${p[1]||"https"}://player.vimeo.com/video/${p[2]}/`:h}(o);case"formula":{if(!o)break;let h=this.quill.getSelection(!0);if(h!=null){let p=h.index+h.length;this.quill.insertEmbed(p,this.root.getAttribute("data-mode"),o,g.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(p+1," ",g.sources.USER),this.quill.setSelection(p+2,g.sources.USER)}break}}this.textbox.value="",this.hide()}}function gc(u,o){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];o.forEach(p=>{let b=document.createElement("option");p===h?b.setAttribute("selected","selected"):b.setAttribute("value",String(p)),u.appendChild(b)})}a(gc,"Ko");let $E=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class KE extends db{static{a(this,"Zo")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(o,h){super(o,h),this.quill.on(g.events.EDITOR_CHANGE,(p,b,w,T)=>{if(p===g.events.SELECTION_CHANGE)if(b!=null&&b.length>0&&T===g.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let N=this.quill.getLines(b.index,b.length);if(N.length===1){let F=this.quill.getBounds(b);F!=null&&this.position(F)}else{let F=N[N.length-1],nt=this.quill.getIndex(F),_t=Math.min(F.length()-1,b.index+b.length-nt),Dt=this.quill.getBounds(new S(nt,_t));Dt!=null&&this.position(Dt)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(g.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let o=this.quill.getSelection();if(o!=null){let h=this.quill.getBounds(o);h!=null&&this.position(h)}},1)})}cancel(){this.show()}position(o){let h=super.position(o),p=this.root.querySelector(".ql-tooltip-arrow");return p.style.marginLeft="",h!==0&&(p.style.marginLeft=-1*h-p.offsetWidth/2+"px"),h}}class fb extends mc{static{a(this,"Go")}constructor(o,h){h.modules.toolbar!=null&&h.modules.toolbar.container==null&&(h.modules.toolbar.container=$E),super(o,h),this.quill.container.classList.add("ql-bubble")}extendToolbar(o){this.tooltip=new KE(this.quill,this.options.bounds),o.container!=null&&(this.tooltip.root.appendChild(o.container),this.buildButtons(o.container.querySelectorAll("button"),pc),this.buildPickers(o.container.querySelectorAll("select"),pc))}}fb.DEFAULTS=Yn({},mc.DEFAULTS,{modules:{toolbar:{handlers:{link(u){u?this.quill.theme.tooltip.edit():this.quill.format("link",!1,ut.sources.USER)}}}}});let GE=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class YE extends db{static{a(this,"Qo")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",o=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),o.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",o=>{if(this.linkRange!=null){let h=this.linkRange;this.restoreFocus(),this.quill.formatText(h,"link",!1,g.sources.USER),delete this.linkRange}o.preventDefault(),this.hide()}),this.quill.on(g.events.SELECTION_CHANGE,(o,h,p)=>{if(o!=null){if(o.length===0&&p===g.sources.USER){let[b,w]=this.quill.scroll.descendant(ah,o.index);if(b!=null){this.linkRange=new S(o.index-w,b.length());let T=ah.formats(b.domNode);this.preview.textContent=T,this.preview.setAttribute("href",T),this.show();let N=this.quill.getBounds(this.linkRange);return void(N!=null&&this.position(N))}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class pb extends mc{static{a(this,"Yo")}constructor(o,h){h.modules.toolbar!=null&&h.modules.toolbar.container==null&&(h.modules.toolbar.container=GE),super(o,h),this.quill.container.classList.add("ql-snow")}extendToolbar(o){o.container!=null&&(o.container.classList.add("ql-snow"),this.buildButtons(o.container.querySelectorAll("button"),pc),this.buildPickers(o.container.querySelectorAll("select"),pc),this.tooltip=new YE(this.quill,this.options.bounds),o.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(h,p)=>{o.handlers.link.call(o,!p.format.link)}))}}pb.DEFAULTS=Yn({},mc.DEFAULTS,{modules:{toolbar:{handlers:{link(u){if(u){let o=this.quill.getSelection();if(o==null||o.length===0)return;let h=this.quill.getText(o);/^\S+@\S+\.\S+$/.test(h)&&h.indexOf("mailto:")!==0&&(h=`mailto:${h}`);let{tooltip:p}=this.quill.theme;p.edit("link",h)}else this.quill.format("link",!1,ut.sources.USER)}}}}});let XE=pb;ip.register({"attributors/attribute/direction":Bv,"attributors/class/align":Pv,"attributors/class/background":uE,"attributors/class/color":cE,"attributors/class/direction":jv,"attributors/class/font":zv,"attributors/class/size":Vv,"attributors/style/align":qv,"attributors/style/background":Gf,"attributors/style/color":Kf,"attributors/style/direction":Fv,"attributors/style/font":Uv,"attributors/style/size":Wv},!0),ip.register({"formats/align":Pv,"formats/direction":jv,"formats/indent":kE,"formats/background":Gf,"formats/color":Kf,"formats/font":zv,"formats/size":Vv,"formats/blockquote":ME,"formats/code-block":_i,"formats/header":IE,"formats/list":hc,"formats/bold":rp,"formats/code":Yf,"formats/italic":DE,"formats/link":ah,"formats/script":PE,"formats/strike":qE,"formats/underline":RE,"formats/formula":BE,"formats/image":jE,"formats/video":FE,"modules/syntax":ib,"modules/table":HE,"modules/toolbar":op,"themes/bubble":fb,"themes/snow":XE,"ui/icons":pc,"ui/picker":ch,"ui/icon-picker":ub,"ui/color-picker":cb,"ui/tooltip":hb},!0);let JE=ip}},t={};function e(i){var s=t[i];if(s!==void 0)return s.exports;var c=t[i]={id:i,loaded:!1,exports:{}};return n[i].call(c.exports,c,c.exports,e),c.loaded=!0,c.exports}return a(e,"n"),e.d=(i,s)=>{for(var c in s)e.o(s,c)&&!e.o(i,c)&&Object.defineProperty(i,c,{enumerable:!0,get:s[c]})},e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),e.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),e.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.nmd=i=>(i.paths=[],i.children||(i.children=[]),i),e(190)})())});var Hp={};lp(Hp,{FetchEnctype:()=>Xs,FetchMethod:()=>Ji,FetchRequest:()=>Qs,FetchResponse:()=>Ha,FrameElement:()=>qr,FrameLoadingStyle:()=>Jo,FrameRenderer:()=>Va,PageRenderer:()=>ea,PageSnapshot:()=>mr,StreamActions:()=>Fp,StreamElement:()=>xh,StreamSourceElement:()=>Eh,cache:()=>qb,clearCache:()=>Hb,connectStreamSource:()=>wc,disconnectStreamSource:()=>xc,fetch:()=>Bp,fetchEnctypeFromString:()=>Mb,fetchMethodFromString:()=>Th,isSafe:()=>Sh,navigator:()=>Rb,registerAdapter:()=>Bb,renderStreamMessage:()=>Fb,session:()=>cn,setConfirmMethod:()=>Ub,setFormMode:()=>Vb,setProgressBarDelay:()=>zb,start:()=>jp,visit:()=>jb});(function(n){if(typeof n.requestSubmit=="function")return;n.requestSubmit=function(i){i?(t(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function t(i,s){i instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||e(TypeError,"The specified element is not a submit button"),i.form==s||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}a(t,"validateSubmitter");function e(i,s,c){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+s+".",c)}a(e,"raise")})(HTMLFormElement.prototype);var xb=new WeakMap;function oT(n){let t=n instanceof Element?n:n instanceof Node?n.parentElement:null,e=t?t.closest("input, button"):null;return e?.type=="submit"?e:null}a(oT,"findSubmitterFromClickTarget");function aT(n){let t=oT(n.target);t&&t.form&&xb.set(t.form,t)}a(aT,"clickCaptured");(function(){if("submitter"in Event.prototype)return;let n=window.Event.prototype;if("SubmitEvent"in window){let t=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in t))n=t;else return}addEventListener("click",aT,!0),Object.defineProperty(n,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return xb.get(this.target)}})})();var Jo={eager:"eager",lazy:"lazy"},qr=class n extends HTMLElement{static{a(this,"FrameElement")}static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new n.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="src"?this.delegate.sourceURLChanged():t=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(t){t?this.setAttribute("refresh",t):this.removeAttribute("refresh")}get loading(){return lT(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function lT(n){switch(n.toLowerCase()){case"lazy":return Jo.lazy;default:return Jo.eager}}a(lT,"frameLoadingStyleFromString");function Kn(n){return new URL(n.toString(),document.baseURI)}a(Kn,"expandURL");function Qo(n){let t;if(n.hash)return n.hash.slice(1);if(t=n.href.match(/#(.*)$/))return t[1]}a(Qo,"getAnchor");function qp(n,t){let e=t?.getAttribute("formaction")||n.getAttribute("action")||n.action;return Kn(e)}a(qp,"getAction$1");function cT(n){return(pT(n).match(/\.[^.]*$/)||[])[0]||""}a(cT,"getExtension");function uT(n){return!!cT(n).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}a(uT,"isHTML");function hT(n,t){let e=mT(t);return n.href===Kn(e).href||n.href.startsWith(e)}a(hT,"isPrefixedBy");function Ys(n,t){return hT(n,t)&&uT(n)}a(Ys,"locationIsVisitable");function cp(n){let t=Qo(n);return t!=null?n.href.slice(0,-(t.length+1)):n.href}a(cp,"getRequestURL");function hh(n){return cp(n)}a(hh,"toCacheKey");function dT(n,t){return Kn(n).href==Kn(t).href}a(dT,"urlsAreEqual");function fT(n){return n.pathname.split("/").slice(1)}a(fT,"getPathComponents");function pT(n){return fT(n).slice(-1)[0]}a(pT,"getLastPathComponent");function mT(n){return gT(n.origin+n.pathname)}a(mT,"getPrefix");function gT(n){return n.endsWith("/")?n:n+"/"}a(gT,"addTrailingSlash");var Ha=class{static{a(this,"FetchResponse")}constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Kn(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}};function vc(n){if(n.getAttribute("data-turbo-eval")=="false")return n;{let t=document.createElement("script"),e=za("csp-nonce");return e&&(t.nonce=e),t.textContent=n.textContent,t.async=!1,vT(t,n),t}}a(vc,"activateScriptElement");function vT(n,t){for(let{name:e,value:i}of t.attributes)n.setAttribute(e,i)}a(vT,"copyElementAttributes");function bT(n){let t=document.createElement("template");return t.innerHTML=n,t.content}a(bT,"createDocumentFragment");function pn(n,{target:t,cancelable:e,detail:i}={}){let s=new CustomEvent(n,{cancelable:e,bubbles:!0,composed:!0,detail:i});return t&&t.isConnected?t.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}a(pn,"dispatch");function Ba(){return document.visibilityState==="hidden"?Tb():Eb()}a(Ba,"nextRepaint");function Eb(){return new Promise(n=>requestAnimationFrame(()=>n()))}a(Eb,"nextAnimationFrame");function Tb(){return new Promise(n=>setTimeout(()=>n(),0))}a(Tb,"nextEventLoopTick");function yT(){return Promise.resolve()}a(yT,"nextMicrotask");function Sb(n=""){return new DOMParser().parseFromString(n,"text/html")}a(Sb,"parseHTMLDocument");function Ab(n,...t){let e=_T(n,t).replace(/^\n/,"").split(`
`),i=e[0].match(/^\s+/),s=i?i[0].length:0;return e.map(c=>c.slice(s)).join(`
`)}a(Ab,"unindent");function _T(n,t){return n.reduce((e,i,s)=>{let c=t[s]==null?"":t[s];return e+i+c},"")}a(_T,"interpolate");function Js(){return Array.from({length:36}).map((n,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}a(Js,"uuid");function fh(n,...t){for(let e of t.map(i=>i?.getAttribute(n)))if(typeof e=="string")return e;return null}a(fh,"getAttribute");function wT(n,...t){return t.some(e=>e&&e.hasAttribute(n))}a(wT,"hasAttribute");function ph(...n){for(let t of n)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}a(ph,"markAsBusy");function mh(...n){for(let t of n)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}a(mh,"clearBusyState");function xT(n,t=2e3){return new Promise(e=>{let i=a(()=>{n.removeEventListener("error",i),n.removeEventListener("load",i),e()},"onComplete");n.addEventListener("load",i,{once:!0}),n.addEventListener("error",i,{once:!0}),setTimeout(e,t)})}a(xT,"waitForLoad");function Lb(n){switch(n){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}a(Lb,"getHistoryMethodForAction");function ET(n){return n=="advance"||n=="replace"||n=="restore"}a(ET,"isAction");function ta(...n){let t=fh("data-turbo-action",...n);return ET(t)?t:null}a(ta,"getVisitAction");function Cb(n){return document.querySelector(`meta[name="${n}"]`)}a(Cb,"getMetaElement");function za(n){let t=Cb(n);return t&&t.content}a(za,"getMetaContent");function TT(n,t){let e=Cb(n);return e||(e=document.createElement("meta"),e.setAttribute("name",n),document.head.appendChild(e)),e.setAttribute("content",t),e}a(TT,"setMetaContent");function ja(n,t){if(n instanceof Element)return n.closest(t)||ja(n.assignedSlot||n.getRootNode()?.host,t)}a(ja,"findClosestRecursively");function Rp(n){return!!n&&n.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof n.focus=="function"}a(Rp,"elementIsFocusable");function Nb(n){return Array.from(n.querySelectorAll("[autofocus]")).find(Rp)}a(Nb,"queryAutofocusableElement");async function ST(n,t){let e=t();n(),await Eb();let i=t();return[e,i]}a(ST,"around");function AT(n){if(n.hasAttribute("target")){for(let t of document.getElementsByName(n.target))if(t instanceof HTMLIFrameElement)return!1}return!0}a(AT,"doesNotTargetIFrame");function LT(n){return ja(n,"a[href]:not([target^=_]):not([download])")}a(LT,"findLinkFromClickTarget");function Ob(n){return Kn(n.getAttribute("href")||"")}a(Ob,"getLocationForLink");function CT(n,t){let e=null;return(...i)=>{let s=a(()=>n.apply(this,i),"callback");clearTimeout(e),e=setTimeout(s,t)}}a(CT,"debounce");var up=class extends Set{static{a(this,"LimitedSet")}constructor(t){super(),this.maxSize=t}add(t){if(this.size>=this.maxSize){let i=this.values().next().value;this.delete(i)}super.add(t)}},kb=new up(20),NT=window.fetch;function Bp(n,t={}){let e=new Headers(t.headers||{}),i=Js();return kb.add(i),e.append("X-Turbo-Request-Id",i),NT(n,{...t,headers:e})}a(Bp,"fetchWithTurboHeaders");function Th(n){switch(n.toLowerCase()){case"get":return Ji.get;case"post":return Ji.post;case"put":return Ji.put;case"patch":return Ji.patch;case"delete":return Ji.delete}}a(Th,"fetchMethodFromString");var Ji={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Mb(n){switch(n.toLowerCase()){case Xs.multipart:return Xs.multipart;case Xs.plain:return Xs.plain;default:return Xs.urlEncoded}}a(Mb,"fetchEnctypeFromString");var Xs={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Qs=class{static{a(this,"FetchRequest")}abortController=new AbortController;#t=t=>{};constructor(t,e,i,s=new URLSearchParams,c=null,d=Xs.urlEncoded){let[m,v]=vb(Kn(i),e,s,d);this.delegate=t,this.url=m,this.target=c,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:e,headers:{...this.defaultHeaders},body:v,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=d}get method(){return this.fetchOptions.method}set method(t){let e=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=Th(t)||Ji.get;this.url.search="";let[s,c]=vb(this.url,i,e,this.enctype);this.url=s,this.fetchOptions.body=c,this.fetchOptions.method=i}get headers(){return this.fetchOptions.headers}set headers(t){this.fetchOptions.headers=t}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(t){this.fetchOptions.body=t}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:t}=this;this.delegate.prepareRequest(this);let e=await this.#e(t);try{this.delegate.requestStarted(this),e.detail.fetchRequest?this.response=e.detail.fetchRequest.response:this.response=Bp(this.url.href,t);let i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw this.#n(i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(t){let e=new Ha(t);return pn("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Sh(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async#e(t){let e=new Promise(s=>this.#t=s),i=pn("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.#t},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await e,i}#n(t){return!pn("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}};function Sh(n){return Th(n)==Ji.get}a(Sh,"isSafe");function vb(n,t,e,i){let s=Array.from(e).length>0?new URLSearchParams(Ib(e)):n.searchParams;return Sh(t)?[OT(n,s),null]:i==Xs.urlEncoded?[n,s]:[n,e]}a(vb,"buildResourceAndBody");function Ib(n){let t=[];for(let[e,i]of n)i instanceof File||t.push([e,i]);return t}a(Ib,"entriesExcludingFiles");function OT(n,t){let e=new URLSearchParams(Ib(t));return n.search=e.toString(),n}a(OT,"mergeIntoURLSearchParams");var hp=class{static{a(this,"AppearanceObserver")}started=!1;constructor(t,e){this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=t=>{t.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},to=class{static{a(this,"StreamMessage")}static contentType="text/vnd.turbo-stream.html";static wrap(t){return typeof t=="string"?new this(bT(t)):t}constructor(t){this.fragment=kT(t)}};function kT(n){for(let t of n.querySelectorAll("turbo-stream")){let e=document.importNode(t,!0);for(let i of e.templateElement.content.querySelectorAll("script"))i.replaceWith(vc(i));t.replaceWith(e)}return n}a(kT,"importStreamElements");var MT=100,dp=class{static{a(this,"PrefetchCache")}#t=null;#e=null;get(t){if(this.#e&&this.#e.url===t&&this.#e.expire>Date.now())return this.#e.request}setLater(t,e,i){this.clear(),this.#t=setTimeout(()=>{e.perform(),this.set(t,e,i),this.#t=null},MT)}set(t,e,i){this.#e={url:t,request:e,expire:new Date(new Date().getTime()+i)}}clear(){this.#t&&clearTimeout(this.#t),this.#e=null}},IT=10*1e3,Ra=new dp,qa={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},bc=class n{static{a(this,"FormSubmission")}state=qa.initialized;static confirmMethod(t,e,i){return Promise.resolve(confirm(t))}constructor(t,e,i,s=!1){let c=jT(e,i),d=BT(RT(e,i),c),m=DT(e,i),v=FT(e,i);this.delegate=t,this.formElement=e,this.submitter=i,this.fetchRequest=new Qs(this,c,d,m,e,v),this.mustRedirect=s}get method(){return this.fetchRequest.method}set method(t){this.fetchRequest.method=t}get action(){return this.fetchRequest.url.toString()}set action(t){this.fetchRequest.url=Kn(t)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:t,requesting:e}=qa,i=fh("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await n.confirmMethod(i,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){let{stopping:t,stopped:e}=qa;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){let e=PT(za("csrf-param"))||za("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(to.contentType)}requestStarted(t){this.state=qa.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),ph(this.formElement),pn("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){Ra.clear(),this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError){this.delegate.formSubmissionFailedWithResponse(this,e);return}if(Ra.clear(),this.requestMustRedirect(t)&&qT(e)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=qa.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){this.state=qa.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),mh(this.formElement),pn("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||wT("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function DT(n,t){let e=new FormData(n),i=t?.getAttribute("name"),s=t?.getAttribute("value");return i&&e.append(i,s||""),e}a(DT,"buildFormData");function PT(n){if(n!=null){let e=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(n));if(e){let i=e.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}a(PT,"getCookieValue");function qT(n){return n.statusCode==200&&!n.redirected}a(qT,"responseSucceededWithoutRedirect");function RT(n,t){let e=typeof n.action=="string"?n.action:null;return t?.hasAttribute("formaction")?t.getAttribute("formaction")||"":n.getAttribute("action")||e||""}a(RT,"getFormAction");function BT(n,t){let e=Kn(n);return Sh(t)&&(e.search=""),e}a(BT,"getAction");function jT(n,t){let e=t?.getAttribute("formmethod")||n.getAttribute("method")||"";return Th(e.toLowerCase())||Ji.get}a(jT,"getMethod");function FT(n,t){return Mb(t?.getAttribute("formenctype")||n.enctype)}a(FT,"getEnctype");var Ua=class{static{a(this,"Snapshot")}constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Nb(this.element)}get permanentElements(){return Pb(this.element)}getPermanentElementById(t){return Db(this.element,t)}getPermanentElementMapForSnapshot(t){let e={};for(let i of this.permanentElements){let{id:s}=i,c=t.getPermanentElementById(s);c&&(e[s]=[i,c])}return e}};function Db(n,t){return n.querySelector(`#${t}[data-turbo-permanent]`)}a(Db,"getPermanentElementById");function Pb(n){return n.querySelectorAll("[id][data-turbo-permanent]")}a(Pb,"queryPermanentElementsAll");var yc=class{static{a(this,"FormSubmitObserver")}started=!1;constructor(t,e){this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=t=>{if(!t.defaultPrevented){let e=t.target instanceof HTMLFormElement?t.target:void 0,i=t.submitter||void 0;e&&HT(e,i)&&zT(e,i)&&this.delegate.willSubmitForm(e,i)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,i))}}};function HT(n,t){return(t?.getAttribute("formmethod")||n.getAttribute("method"))!="dialog"}a(HT,"submissionDoesNotDismissDialog");function zT(n,t){if(t?.hasAttribute("formtarget")||n.hasAttribute("target")){let e=t?.getAttribute("formtarget")||n.target;for(let i of document.getElementsByName(e))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}a(zT,"submissionDoesNotTargetIFrame");var gh=class{static{a(this,"View")}#t=t=>{};#e=t=>{};constructor(t,e){this.delegate=t,this.element=e}scrollToAnchor(t){let e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(Qo(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){let{isPreview:e,shouldRender:i,willRender:s,newSnapshot:c}=t,d=s;if(i)try{this.renderPromise=new Promise(x=>this.#t=x),this.renderer=t,await this.prepareToRenderSnapshot(t);let m=new Promise(x=>this.#e=x),v={resume:this.#e,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(c,v)||await m,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(c,e,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.#t(void 0),delete this.renderPromise}else d&&this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(t){this.element.setAttribute("data-turbo-visit-direction",t)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}},fp=class extends gh{static{a(this,"FrameView")}missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Ua(this.element)}},vh=class{static{a(this,"LinkInterceptor")}constructor(t,e){this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=t=>{this.respondsToEventTarget(t.target)?this.clickEvent=t:delete this.clickEvent};linkClicked=t=>{this.clickEvent&&this.respondsToEventTarget(t.target)&&t.target instanceof Element&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent};willVisit=t=>{delete this.clickEvent};respondsToEventTarget(t){let e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}},bh=class{static{a(this,"LinkClickObserver")}started=!1;constructor(t,e){this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){let e=t.composedPath&&t.composedPath()[0]||t.target,i=LT(e);if(i&&AT(i)){let s=Ob(i);this.delegate.willFollowLinkToLocation(i,s,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(i,s))}}};clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}},yh=class{static{a(this,"FormLinkClickObserver")}constructor(t,e){this.delegate=t,this.linkInterceptor=new bh(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(t,e){return!1}prefetchAndCacheRequestToLocation(t,e){}willFollowLinkToLocation(t,e,i){return this.delegate.willSubmitFormLinkToLocation(t,e,i)&&(t.hasAttribute("data-turbo-method")||t.hasAttribute("data-turbo-stream"))}followedLinkToLocation(t,e){let i=document.createElement("form"),s="hidden";for(let[E,A]of e.searchParams)i.append(Object.assign(document.createElement("input"),{type:s,name:E,value:A}));let c=Object.assign(e,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",c.href),i.setAttribute("hidden","");let d=t.getAttribute("data-turbo-method");d&&i.setAttribute("method",d);let m=t.getAttribute("data-turbo-frame");m&&i.setAttribute("data-turbo-frame",m);let v=ta(t);v&&i.setAttribute("data-turbo-action",v);let y=t.getAttribute("data-turbo-confirm");y&&i.setAttribute("data-turbo-confirm",y),t.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},_h=class{static{a(this,"Bardo")}static async preservingPermanentElements(t,e,i){let s=new this(t,e);s.enter(),await i(),s.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(let t in this.permanentElementMap){let[e,i]=this.permanentElementMap[t];this.delegate.enteringBardo(e,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let t in this.permanentElementMap){let[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){let e=UT(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){let e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){this.getPlaceholderById(t.id)?.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function UT(n){let t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",n.id),t}a(UT,"createPlaceholderForPermanentElement");var _c=class{static{a(this,"Renderer")}#t=null;constructor(t,e,i,s,c=!0){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=s,this.willRender=c,this.renderElement=i,this.promise=new Promise((d,m)=>this.resolvingFunctions={resolve:d,reject:m})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await _h.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){let t=this.connectedSnapshot.firstAutofocusableElement;t&&t.focus()}enteringBardo(t){this.#t||t.contains(this.currentSnapshot.activeElement)&&(this.#t=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.#t)&&this.#t instanceof HTMLElement&&(this.#t.focus(),this.#t=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},Va=class extends _c{static{a(this,"FrameRenderer")}static renderElement(t,e){let i=document.createRange();i.selectNodeContents(t),i.deleteContents();let s=e,c=s.ownerDocument?.createRange();c&&(c.selectNodeContents(s),t.appendChild(c.extractContents()))}constructor(t,e,i,s,c,d=!0){super(e,i,s,c,d),this.delegate=t}get shouldRender(){return!0}async render(){await Ba(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Ba(),this.focusFirstAutofocusableElement(),await Ba(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let t=this.currentElement.firstElementChild,e=VT(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=WT(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:i}),!0}return!1}activateScriptElements(){for(let t of this.newScriptElements){let e=vc(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function VT(n,t){return n=="end"||n=="start"||n=="center"||n=="nearest"?n:t}a(VT,"readScrollLogicalPosition");function WT(n,t){return n=="auto"||n=="smooth"?n:t}a(WT,"readScrollBehavior");var pp=class n{static{a(this,"ProgressBar")}static animationDuration=300;static get defaultCSS(){return Ab`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${n.animationDuration}ms ease-out,
          opacity ${n.animationDuration/2}ms ${n.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,n.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,n.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let t=document.createElement("style");return t.type="text/css",t.textContent=n.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){let t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return za("csp-nonce")}},mp=class extends Ua{static{a(this,"HeadSnapshot")}detailsByOuterHTML=this.children.filter(t=>!GT(t)).map(t=>JT(t)).reduce((t,e)=>{let{outerHTML:i}=e,s=i in t?t[i]:{type:ZT(e),tracked:$T(e),elements:[]};return{...t,[i]:{...s,elements:[...s.elements,e]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in e.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==t).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,e)=>{let{type:i,tracked:s,elements:c}=this.detailsByOuterHTML[e];return i==null&&!s?[...t,...c]:c.length>1?[...t,...c.slice(1)]:t},[])}getMetaValue(t){let e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((e,i)=>{let{elements:[s]}=this.detailsByOuterHTML[i];return XT(s,t)?s:e},void 0|void 0)}};function ZT(n){if(KT(n))return"script";if(YT(n))return"stylesheet"}a(ZT,"elementType");function $T(n){return n.getAttribute("data-turbo-track")=="reload"}a($T,"elementIsTracked");function KT(n){return n.localName=="script"}a(KT,"elementIsScript");function GT(n){return n.localName=="noscript"}a(GT,"elementIsNoscript");function YT(n){let t=n.localName;return t=="style"||t=="link"&&n.getAttribute("rel")=="stylesheet"}a(YT,"elementIsStylesheet");function XT(n,t){return n.localName=="meta"&&n.getAttribute("name")==t}a(XT,"elementIsMetaElementWithName");function JT(n){return n.hasAttribute("nonce")&&n.setAttribute("nonce",""),n}a(JT,"elementWithoutNonce");var mr=class n extends Ua{static{a(this,"PageSnapshot")}static fromHTMLString(t=""){return this.fromDocument(Sb(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({documentElement:t,body:e,head:i}){return new this(t,e,new mp(i))}constructor(t,e,i){super(e),this.documentElement=t,this.headSnapshot=i}clone(){let t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),i=t.querySelectorAll("select");for(let[s,c]of e.entries()){let d=i[s];for(let m of d.selectedOptions)m.selected=!1;for(let m of c.selectedOptions)d.options[m.index].selected=!0}for(let s of t.querySelectorAll('input[type="password"]'))s.value="";return new n(this.documentElement,t,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let t=this.getSetting("root")??"/";return Kn(t)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}},gp=class{static{a(this,"ViewTransitioner")}#t=!1;#e=Promise.resolve();renderChange(t,e){return t&&this.viewTransitionsAvailable&&!this.#t?(this.#t=!0,this.#e=this.#e.then(async()=>{await document.startViewTransition(e).finished})):this.#e=this.#e.then(e),this.#e}get viewTransitionsAvailable(){return document.startViewTransition}},QT={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},dh={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},gs={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Fa={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},tS={advance:"forward",restore:"back",replace:"none"},vp=class{static{a(this,"Visit")}identifier=Js();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=gs.initialized;viewTransitioner=new gp;constructor(t,e,i,s={}){this.delegate=t,this.location=e,this.restorationIdentifier=i||Js();let{action:c,historyChanged:d,referrer:m,snapshot:v,snapshotHTML:y,response:x,visitCachedSnapshot:E,willRender:A,updateHistory:C,shouldCacheSnapshot:k,acceptsStreamResponse:H,direction:M}={...QT,...s};this.action=c,this.historyChanged=d,this.referrer=m,this.snapshot=v,this.snapshotHTML=y,this.response=x,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=E,this.willRender=A,this.updateHistory=C,this.scrolled=!A,this.shouldCacheSnapshot=k,this.acceptsStreamResponse=H,this.direction=M||tS[c]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==gs.initialized&&(this.recordTimingMetric(dh.visitStart),this.state=gs.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==gs.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=gs.canceled)}complete(){this.state==gs.started&&(this.recordTimingMetric(dh.visitEnd),this.adapter.visitCompleted(this),this.state=gs.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==gs.started&&(this.state=gs.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let t=this.location.href===this.referrer?.href?"replace":this.action,e=Lb(t);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Qs(this,Ji.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(dh.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){let{statusCode:e}=t;bb(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(dh.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,bb(t)&&e!=null){let i=mr.fromHTMLString(e);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(mr.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!Qo(this.location)||t.hasAnchor(Qo(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return mr.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let t=this.getCachedSnapshot();if(t){let e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(t,e),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(to.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){let i=await e.responseHTML,{redirected:s,statusCode:c}=e;i==null?this.recordResponse({statusCode:Fa.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:c,responseHTML:i,redirected:s}))}async requestFailedWithResponse(t,e){let i=await e.responseHTML,{redirected:s,statusCode:c}=e;i==null?this.recordResponse({statusCode:Fa.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:c,responseHTML:i,redirected:s})}requestErrored(t,e){this.recordResponse({statusCode:Fa.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){let t=Qo(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),this.frame=await Ba(),await t(),delete this.frame}async renderPageSnapshot(t,e){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(t),async()=>{await this.view.renderPage(t,e,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function bb(n){return n>=200&&n<300}a(bb,"isSuccessful");var bp=class{static{a(this,"BrowserAdapter")}progressBar=new pp;constructor(t){this.session=t}visitProposedToLocation(t,e){Ys(t,this.navigator.rootLocation)?this.navigator.startVisit(t,e?.restorationIdentifier||Js(),e):window.location.href=t.toString()}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case Fa.networkFailure:case Fa.timeoutFailure:case Fa.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){}visitCompleted(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(t){this.reload(t)}visitFailed(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(t){pn("turbo:reload",{detail:t}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},yp=class{static{a(this,"CacheObserver")}selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=t=>{for(let e of this.temporaryElements)e.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}},_p=class{static{a(this,"FrameRedirector")}constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new vh(this,e),this.formSubmitObserver=new yc(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,i){return this.#e(t)}linkClickIntercepted(t,e,i){let s=this.#n(t);s&&s.delegate.linkClickIntercepted(t,e,i)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&this.#t(t,e)&&this.#e(t,e)}formSubmitted(t,e){let i=this.#n(t,e);i&&i.delegate.formSubmitted(t,e)}#t(t,e){let i=qp(t,e),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),c=Kn(s?.content??"/");return this.#e(t,e)&&Ys(i,c)}#e(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){let s=this.#n(t,e);return s?s!=t.closest("turbo-frame"):!1}else return!1}#n(t,e){let i=e?.getAttribute("data-turbo-frame")||t.getAttribute("data-turbo-frame");if(i&&i!="_top"){let s=this.element.querySelector(`#${i}:not([disabled])`);if(s instanceof qr)return s}}},wp=class{static{a(this,"History")}location;restorationIdentifier=Js();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(t){this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,i=Js()){t===history.pushState&&++this.currentIndex;let s={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};t.call(history,s,"",e.href),this.location=e,this.restorationIdentifier=i}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){let{restorationIdentifier:e}=this,i=this.restorationData[e];this.restorationData[e]={...i,...t}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=t=>{if(this.shouldHandlePopState()){let{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);let{restorationIdentifier:i,restorationIndex:s}=e;this.restorationIdentifier=i;let c=s>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,c),this.currentIndex=s}}};onPageLoad=async t=>{await yT(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},xp=class{static{a(this,"LinkPrefetchObserver")}started=!1;#t=null;constructor(t,e){this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#e,{once:!0}):this.#e())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!1)}#e=()=>{this.eventTarget.addEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!0};#n=t=>{if(za("turbo-prefetch")==="false")return;let e=t.target;if(e.matches&&e.matches("a[href]:not([target^=_]):not([download])")&&this.#a(e)){let s=e,c=Ob(s);if(this.delegate.canPrefetchRequestToLocation(s,c)){this.#t=s;let d=new Qs(this,Ji.get,c,new URLSearchParams,e);Ra.setLater(c.toString(),d,this.#o)}}};#r=t=>{t.target===this.#t&&this.#s()};#s=()=>{Ra.clear(),this.#t=null};#i=t=>{if(t.target.tagName!=="FORM"&&t.detail.fetchOptions.method==="get"){let e=Ra.get(t.detail.url.toString());e&&(t.detail.fetchRequest=e),Ra.clear()}};prepareRequest(t){let e=t.target;t.headers["X-Sec-Purpose"]="prefetch";let i=e.closest("turbo-frame"),s=e.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;s&&s!=="_top"&&(t.headers["Turbo-Frame"]=s)}requestSucceededWithResponse(){}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}get#o(){return Number(za("turbo-prefetch-cache-time"))||IT}#a(t){return!(!t.getAttribute("href")||eS(t)||nS(t)||iS(t)||rS(t)||oS(t))}},eS=a(n=>n.origin!==document.location.origin||!["http:","https:"].includes(n.protocol)||n.hasAttribute("target"),"unfetchableLink"),nS=a(n=>n.pathname+n.search===document.location.pathname+document.location.search||n.href.startsWith("#"),"linkToTheSamePage"),iS=a(n=>{if(n.getAttribute("data-turbo-prefetch")==="false"||n.getAttribute("data-turbo")==="false")return!0;let t=ja(n,"[data-turbo-prefetch]");return!!(t&&t.getAttribute("data-turbo-prefetch")==="false")},"linkOptsOut"),rS=a(n=>{let t=n.getAttribute("data-turbo-method");return!!(t&&t.toLowerCase()!=="get"||sS(n)||n.hasAttribute("data-turbo-confirm")||n.hasAttribute("data-turbo-stream"))},"nonSafeLink"),sS=a(n=>n.hasAttribute("data-remote")||n.hasAttribute("data-behavior")||n.hasAttribute("data-confirm")||n.hasAttribute("data-method"),"isUJS"),oS=a(n=>pn("turbo:before-prefetch",{target:n,cancelable:!0}).defaultPrevented,"eventPrevented"),Ep=class{static{a(this,"Navigator")}constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&this.delegate.visitProposedToLocation(t,e)}startVisit(t,e,i={}){this.stop(),this.currentVisit=new vp(this,Kn(t),e,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new bc(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){let i=await e.responseHTML;if(i){let s=t.isSafe;s||this.view.clearSnapshotCache();let{statusCode:c,redirected:d}=e,v={action:this.#t(t,e),shouldCacheSnapshot:s,response:{statusCode:c,responseHTML:i,redirected:d}};this.proposeVisit(e.location,v)}}}async formSubmissionFailedWithResponse(t,e){let i=await e.responseHTML;if(i){let s=mr.fromHTMLString(i);e.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),s.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){let i=Qo(t),s=Qo(this.view.lastRenderedLocation),c=e==="restore"&&typeof i>"u";return e!=="replace"&&cp(t)===cp(this.view.lastRenderedLocation)&&(c||i!=null&&i!==s)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#t(t,e){let{submitter:i,formElement:s}=t;return ta(i,s)||this.#e(e)}#e(t){return t.redirected&&t.location.href===this.location?.href?"replace":"advance"}},Xo={initial:0,loading:1,interactive:2,complete:3},Tp=class{static{a(this,"PageObserver")}stage=Xo.initial;started=!1;constructor(t){this.delegate=t}start(){this.started||(this.stage==Xo.initial&&(this.stage=Xo.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:t}=this;t=="interactive"?this.pageIsInteractive():t=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==Xo.loading&&(this.stage=Xo.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Xo.interactive&&(this.stage=Xo.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Sp=class{static{a(this,"ScrollObserver")}started=!1;constructor(t){this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(t){this.delegate.scrollPositionChanged(t)}},Ap=class{static{a(this,"StreamMessageRenderer")}render({fragment:t}){_h.preservingPermanentElements(this,aS(t),()=>{lS(t,()=>{cS(()=>{document.documentElement.appendChild(t)})})})}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}};function aS(n){let t=Pb(document.documentElement),e={};for(let i of t){let{id:s}=i;for(let c of n.querySelectorAll("turbo-stream")){let d=Db(c.templateElement.content,s);d&&(e[s]=[i,d])}}return e}a(aS,"getPermanentElementMapForFragment");async function lS(n,t){let e=`turbo-stream-autofocus-${Js()}`,i=n.querySelectorAll("turbo-stream"),s=uS(i),c=null;if(s&&(s.id?c=s.id:c=e,s.id=c),t(),await Ba(),(document.activeElement==null||document.activeElement==document.body)&&c){let m=document.getElementById(c);Rp(m)&&m.focus(),m&&m.id==e&&m.removeAttribute("id")}}a(lS,"withAutofocusFromFragment");async function cS(n){let[t,e]=await ST(n,()=>document.activeElement),i=t&&t.id;if(i){let s=document.getElementById(i);Rp(s)&&s!=e&&s.focus()}}a(cS,"withPreservedFocus");function uS(n){for(let t of n){let e=Nb(t.templateElement.content);if(e)return e}return null}a(uS,"firstAutofocusableElementInStreams");var Lp=class{static{a(this,"StreamObserver")}sources=new Set;#t=!1;constructor(t){this.delegate=t}start(){this.#t||(this.#t=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#t&&(this.#t=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}inspectFetchResponse=t=>{let e=hS(t);e&&dS(e)&&(t.preventDefault(),this.receiveMessageResponse(e))};receiveMessageEvent=t=>{this.#t&&typeof t.data=="string"&&this.receiveMessageHTML(t.data)};async receiveMessageResponse(t){let e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(to.wrap(t))}};function hS(n){let t=n.detail?.fetchResponse;if(t instanceof Ha)return t}a(hS,"fetchResponseFromEvent");function dS(n){return(n.contentType??"").startsWith(to.contentType)}a(dS,"fetchResponseIsStream");var wh=class extends _c{static{a(this,"ErrorRenderer")}static renderElement(t,e){let{documentElement:i,body:s}=document;i.replaceChild(e,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let t of this.scriptElements){let e=t.parentNode;if(e){let i=vc(t);e.replaceChild(i,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},fS=function(){let n=new Set,t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:A,afterNodeAdded:A,beforeNodeMorphed:A,afterNodeMorphed:A,beforeNodeRemoved:A,afterNodeRemoved:A,beforeAttributeUpdated:A},head:{style:"merge",shouldPreserve:function(P){return P.getAttribute("im-preserve")==="true"},shouldReAppend:function(P){return P.getAttribute("im-re-append")==="true"},shouldRemove:A,afterHeadMorphed:A}};function e(P,U,I={}){P instanceof Document&&(P=P.documentElement),typeof U=="string"&&(U=Y(U));let Q=ot(U),et=k(P,Q,I);return i(P,Q,et)}a(e,"morph");function i(P,U,I){if(I.head.block){let Q=P.querySelector("head"),et=U.querySelector("head");if(Q&&et){let ct=E(et,Q,I);Promise.all(ct).then(function(){i(P,U,Object.assign(I,{head:{block:!1,ignore:!0}}))});return}}if(I.morphStyle==="innerHTML")return d(U,P,I),P.children;if(I.morphStyle==="outerHTML"||I.morphStyle==null){let Q=ht(U,P,I),et=Q?.previousSibling,ct=Q?.nextSibling,Et=c(P,Q,I);return Q?gt(et,Et,ct):[]}else throw"Do not understand how to morph style "+I.morphStyle}a(i,"morphNormalizedContent");function s(P,U){return U.ignoreActiveValue&&P===document.activeElement&&P!==document.body}a(s,"ignoreValueOfActiveElement");function c(P,U,I){if(!(I.ignoreActive&&P===document.activeElement))return U==null?I.callbacks.beforeNodeRemoved(P)===!1?P:(P.remove(),I.callbacks.afterNodeRemoved(P),null):M(P,U)?(I.callbacks.beforeNodeMorphed(P,U)===!1||(P instanceof HTMLHeadElement&&I.head.ignore||(P instanceof HTMLHeadElement&&I.head.style!=="morph"?E(U,P,I):(v(U,P,I),s(P,I)||d(U,P,I))),I.callbacks.afterNodeMorphed(P,U)),P):I.callbacks.beforeNodeRemoved(P)===!1||I.callbacks.beforeNodeAdded(U)===!1?P:(P.parentElement.replaceChild(U,P),I.callbacks.afterNodeAdded(U),I.callbacks.afterNodeRemoved(P),U)}a(c,"morphOldNodeTo");function d(P,U,I){let Q=P.firstChild,et=U.firstChild,ct;for(;Q;){if(ct=Q,Q=ct.nextSibling,et==null){if(I.callbacks.beforeNodeAdded(ct)===!1)return;U.appendChild(ct),I.callbacks.afterNodeAdded(ct),X(I,ct);continue}if(H(ct,et,I)){c(et,ct,I),et=et.nextSibling,X(I,ct);continue}let Et=V(P,U,ct,et,I);if(Et){et=q(et,Et,I),c(Et,ct,I),X(I,ct);continue}let mt=$(P,U,ct,et,I);if(mt){et=q(et,mt,I),c(mt,ct,I),X(I,ct);continue}if(I.callbacks.beforeNodeAdded(ct)===!1)return;U.insertBefore(ct,et),I.callbacks.afterNodeAdded(ct),X(I,ct)}for(;et!==null;){let Et=et;et=et.nextSibling,it(Et,I)}}a(d,"morphChildren");function m(P,U,I,Q){return P==="value"&&Q.ignoreActiveValue&&U===document.activeElement?!0:Q.callbacks.beforeAttributeUpdated(P,U,I)===!1}a(m,"ignoreAttribute");function v(P,U,I){let Q=P.nodeType;if(Q===1){let et=P.attributes,ct=U.attributes;for(let Et of et)m(Et.name,U,"update",I)||U.getAttribute(Et.name)!==Et.value&&U.setAttribute(Et.name,Et.value);for(let Et=ct.length-1;0<=Et;Et--){let mt=ct[Et];m(mt.name,U,"remove",I)||P.hasAttribute(mt.name)||U.removeAttribute(mt.name)}}(Q===8||Q===3)&&U.nodeValue!==P.nodeValue&&(U.nodeValue=P.nodeValue),s(U,I)||x(P,U,I)}a(v,"syncNodeFrom");function y(P,U,I,Q){if(P[I]!==U[I]){let et=m(I,U,"update",Q);et||(U[I]=P[I]),P[I]?et||U.setAttribute(I,P[I]):m(I,U,"remove",Q)||U.removeAttribute(I)}}a(y,"syncBooleanAttribute");function x(P,U,I){if(P instanceof HTMLInputElement&&U instanceof HTMLInputElement&&P.type!=="file"){let Q=P.value,et=U.value;y(P,U,"checked",I),y(P,U,"disabled",I),P.hasAttribute("value")?Q!==et&&(m("value",U,"update",I)||(U.setAttribute("value",Q),U.value=Q)):m("value",U,"remove",I)||(U.value="",U.removeAttribute("value"))}else if(P instanceof HTMLOptionElement)y(P,U,"selected",I);else if(P instanceof HTMLTextAreaElement&&U instanceof HTMLTextAreaElement){let Q=P.value,et=U.value;if(m("value",U,"update",I))return;Q!==et&&(U.value=Q),U.firstChild&&U.firstChild.nodeValue!==Q&&(U.firstChild.nodeValue=Q)}}a(x,"syncInputValue");function E(P,U,I){let Q=[],et=[],ct=[],Et=[],mt=I.head.style,Nt=new Map;for(let Vt of P.children)Nt.set(Vt.outerHTML,Vt);for(let Vt of U.children){let te=Nt.has(Vt.outerHTML),se=I.head.shouldReAppend(Vt),he=I.head.shouldPreserve(Vt);te||he?se?et.push(Vt):(Nt.delete(Vt.outerHTML),ct.push(Vt)):mt==="append"?se&&(et.push(Vt),Et.push(Vt)):I.head.shouldRemove(Vt)!==!1&&et.push(Vt)}Et.push(...Nt.values());let $t=[];for(let Vt of Et){let te=document.createRange().createContextualFragment(Vt.outerHTML).firstChild;if(I.callbacks.beforeNodeAdded(te)!==!1){if(te.href||te.src){let se=null,he=new Promise(function(Te){se=Te});te.addEventListener("load",function(){se()}),$t.push(he)}U.appendChild(te),I.callbacks.afterNodeAdded(te),Q.push(te)}}for(let Vt of et)I.callbacks.beforeNodeRemoved(Vt)!==!1&&(U.removeChild(Vt),I.callbacks.afterNodeRemoved(Vt));return I.head.afterHeadMorphed(U,{added:Q,kept:ct,removed:et}),$t}a(E,"handleHeadElement");function A(){}a(A,"noOp");function C(P){let U={};return Object.assign(U,t),Object.assign(U,P),U.callbacks={},Object.assign(U.callbacks,t.callbacks),Object.assign(U.callbacks,P.callbacks),U.head={},Object.assign(U.head,t.head),Object.assign(U.head,P.head),U}a(C,"mergeDefaults");function k(P,U,I){return I=C(I),{target:P,newContent:U,config:I,morphStyle:I.morphStyle,ignoreActive:I.ignoreActive,ignoreActiveValue:I.ignoreActiveValue,idMap:wt(P,U),deadIds:new Set,callbacks:I.callbacks,head:I.head}}a(k,"createMorphContext");function H(P,U,I){return P==null||U==null?!1:P.nodeType===U.nodeType&&P.tagName===U.tagName?P.id!==""&&P.id===U.id?!0:ft(I,P,U)>0:!1}a(H,"isIdSetMatch");function M(P,U){return P==null||U==null?!1:P.nodeType===U.nodeType&&P.tagName===U.tagName}a(M,"isSoftMatch");function q(P,U,I){for(;P!==U;){let Q=P;P=P.nextSibling,it(Q,I)}return X(I,U),U.nextSibling}a(q,"removeNodesBetween");function V(P,U,I,Q,et){let ct=ft(et,I,U),Et=null;if(ct>0){let mt=Q,Nt=0;for(;mt!=null;){if(H(I,mt,et))return mt;if(Nt+=ft(et,mt,P),Nt>ct)return null;mt=mt.nextSibling}}return Et}a(V,"findIdSetMatch");function $(P,U,I,Q,et){let ct=Q,Et=I.nextSibling,mt=0;for(;ct!=null;){if(ft(et,ct,P)>0)return null;if(M(I,ct))return ct;if(M(Et,ct)&&(mt++,Et=Et.nextSibling,mt>=2))return null;ct=ct.nextSibling}return ct}a($,"findSoftMatch");function Y(P){let U=new DOMParser,I=P.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(I.match(/<\/html>/)||I.match(/<\/head>/)||I.match(/<\/body>/)){let Q=U.parseFromString(P,"text/html");if(I.match(/<\/html>/))return Q.generatedByIdiomorph=!0,Q;{let et=Q.firstChild;return et?(et.generatedByIdiomorph=!0,et):null}}else{let et=U.parseFromString("<body><template>"+P+"</template></body>","text/html").body.querySelector("template").content;return et.generatedByIdiomorph=!0,et}}a(Y,"parseContent");function ot(P){if(P==null)return document.createElement("div");if(P.generatedByIdiomorph)return P;if(P instanceof Node){let U=document.createElement("div");return U.append(P),U}else{let U=document.createElement("div");for(let I of[...P])U.append(I);return U}}a(ot,"normalizeContent");function gt(P,U,I){let Q=[],et=[];for(;P!=null;)Q.push(P),P=P.previousSibling;for(;Q.length>0;){let ct=Q.pop();et.push(ct),U.parentElement.insertBefore(ct,U)}for(et.push(U);I!=null;)Q.push(I),et.push(I),I=I.nextSibling;for(;Q.length>0;)U.parentElement.insertBefore(Q.pop(),U.nextSibling);return et}a(gt,"insertSiblings");function ht(P,U,I){let Q;Q=P.firstChild;let et=Q,ct=0;for(;Q;){let Et=j(Q,U,I);Et>ct&&(et=Q,ct=Et),Q=Q.nextSibling}return et}a(ht,"findBestNodeMatch");function j(P,U,I){return M(P,U)?.5+ft(I,P,U):0}a(j,"scoreElement");function it(P,U){X(U,P),U.callbacks.beforeNodeRemoved(P)!==!1&&(P.remove(),U.callbacks.afterNodeRemoved(P))}a(it,"removeNode");function xt(P,U){return!P.deadIds.has(U)}a(xt,"isIdInConsideration");function z(P,U,I){return(P.idMap.get(I)||n).has(U)}a(z,"idIsWithinNode");function X(P,U){let I=P.idMap.get(U)||n;for(let Q of I)P.deadIds.add(Q)}a(X,"removeIdsFromConsideration");function ft(P,U,I){let Q=P.idMap.get(U)||n,et=0;for(let ct of Q)xt(P,ct)&&z(P,ct,I)&&++et;return et}a(ft,"getIdIntersectionCount");function st(P,U){let I=P.parentElement,Q=P.querySelectorAll("[id]");for(let et of Q){let ct=et;for(;ct!==I&&ct!=null;){let Et=U.get(ct);Et==null&&(Et=new Set,U.set(ct,Et)),Et.add(et.id),ct=ct.parentElement}}}a(st,"populateIdMapForNode");function wt(P,U){let I=new Map;return st(P,I),st(U,I),I}return a(wt,"createIdMap"),{morph:e,defaults:t}}(),ea=class extends _c{static{a(this,"PageRenderer")}static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#t(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#t(){let{documentElement:t}=this.currentSnapshot,{lang:e}=this.newSnapshot;e?t.setAttribute("lang",e):t.removeAttribute("lang")}async mergeHead(){let t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let t=[];for(let e of this.newHeadStylesheetElements)t.push(xT(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(let t of this.newHeadScriptElements)document.head.appendChild(vc(t))}removeUnusedDynamicStylesheetElements(){for(let t of this.unusedDynamicStylesheetElements)document.head.removeChild(t)}async mergeProvisionalElements(){let t=[...this.newHeadProvisionalElements];for(let e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(let e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(let[i,s]of e.entries()){if(t.tagName=="TITLE"){if(s.tagName!="TITLE")continue;if(t.innerHTML==s.innerHTML)return e.splice(i,1),!0}if(s.isEqualNode(t))return e.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(let t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let t of this.newBodyScriptElements){let e=vc(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(t=>t.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Cp=class extends ea{static{a(this,"MorphRenderer")}async render(){this.willRender&&await this.#t()}get renderMethod(){return"morph"}async#t(){this.#e(this.currentElement,this.newElement),this.#a(),pn("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#e(t,e,i="outerHTML"){this.isMorphingTurboFrame=this.#l(t),fS.morph(t,e,{morphStyle:i,callbacks:{beforeNodeAdded:this.#n,beforeNodeMorphed:this.#r,beforeAttributeUpdated:this.#s,beforeNodeRemoved:this.#o,afterNodeMorphed:this.#i}})}#n=t=>!(t.id&&t.hasAttribute("data-turbo-permanent")&&document.getElementById(t.id));#r=(t,e)=>{if(t instanceof HTMLElement)return!t.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#l(t))?!pn("turbo:before-morph-element",{cancelable:!0,target:t,detail:{newElement:e}}).defaultPrevented:!1};#s=(t,e,i)=>!pn("turbo:before-morph-attribute",{cancelable:!0,target:e,detail:{attributeName:t,mutationType:i}}).defaultPrevented;#i=(t,e)=>{e instanceof HTMLElement&&pn("turbo:morph-element",{target:t,detail:{newElement:e}})};#o=t=>this.#r(t);#a(){this.#d().forEach(t=>{this.#l(t)&&(this.#u(t),t.reload())})}#u(t){t.addEventListener("turbo:before-frame-render",e=>{e.detail.render=this.#h},{once:!0})}#h=(t,e)=>{pn("turbo:before-frame-morph",{target:t,detail:{currentElement:t,newElement:e}}),this.#e(t,e.children,"innerHTML")};#l(t){return t.src&&t.refresh==="morph"}#d(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(t=>!t.closest("[data-turbo-permanent]"))}},Np=class{static{a(this,"SnapshotCache")}keys=[];snapshots={};constructor(t){this.size=t}has(t){return hh(t)in this.snapshots}get(t){if(this.has(t)){let e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[hh(t)]}write(t,e){this.snapshots[hh(t)]=e}touch(t){let e=hh(t),i=this.keys.indexOf(e);i>-1&&this.keys.splice(i,1),this.keys.unshift(e),this.trim()}trim(){for(let t of this.keys.splice(this.size))delete this.snapshots[t]}},Op=class extends gh{static{a(this,"PageView")}snapshotCache=new Np(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(t){return this.snapshot.prefersViewTransitions&&t.prefersViewTransitions}renderPage(t,e=!1,i=!0,s){let d=this.isPageRefresh(s)&&this.snapshot.shouldMorphPage?Cp:ea,m=new d(this.snapshot,t,ea.renderElement,e,i);return m.shouldRender?s?.changeHistory():this.forceReloaded=!0,this.render(m)}renderError(t,e){e?.changeHistory();let i=new wh(this.snapshot,t,wh.renderElement,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:e}=this;await Tb();let i=t.clone();return this.snapshotCache.put(e,i),i}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}isPageRefresh(t){return!t||this.lastRenderedLocation.pathname===t.location.pathname&&t.action==="replace"}shouldPreserveScrollPosition(t){return this.isPageRefresh(t)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return mr.fromElement(this.element)}},kp=class{static{a(this,"Preloader")}selector="a[data-turbo-preload]";constructor(t,e){this.delegate=t,this.snapshotCache=e}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#t):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#t)}preloadOnLoadLinksForView(t){for(let e of t.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(e)&&this.preloadURL(e)}async preloadURL(t){let e=new URL(t.href);if(this.snapshotCache.has(e))return;await new Qs(this,Ji.get,e,new URLSearchParams,t).perform()}prepareRequest(t){t.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(t,e){try{let i=await e.responseHTML,s=mr.fromHTMLString(i);this.snapshotCache.put(t.url,s)}catch{}}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}#t=()=>{this.preloadOnLoadLinksForView(document.body)}},Mp=class{static{a(this,"Cache")}constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.#t("")}exemptPageFromCache(){this.#t("no-cache")}exemptPageFromPreview(){this.#t("no-preview")}#t(t){TT("turbo-cache-control",t)}},Ip=class{static{a(this,"Session")}navigator=new Ep(this);history=new wp(this);view=new Op(this,document.documentElement);adapter=new bp(this);pageObserver=new Tp(this);cacheObserver=new yp;linkPrefetchObserver=new xp(this,document);linkClickObserver=new bh(this,window);formSubmitObserver=new yc(this,document);scrollObserver=new Sp(this);streamObserver=new Lp(this);formLinkClickObserver=new yh(this,document.documentElement);frameRedirector=new _p(this,document.documentElement);streamMessageRenderer=new Ap;cache=new Mp(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#t=150;constructor(t){this.recentRequests=t,this.preloader=new kp(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){let i=e.frame?document.getElementById(e.frame):null;if(i instanceof qr){let s=e.action||ta(i);i.delegate.proposeVisitIfNavigatedWithAction(i,s),i.src=t.toString()}else this.navigator.proposeVisit(Kn(t),e)}refresh(t,e){e&&this.recentRequests.has(e)||this.visit(t,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(to.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}setFormMode(t){this.formMode=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#t}set pageRefreshDebouncePeriod(t){this.refresh=CT(this.debouncedRefresh.bind(this),t),this.#t=t}shouldPreloadLink(t){let e=t.hasAttribute("data-turbo-method"),i=t.hasAttribute("data-turbo-stream"),s=t.getAttribute("data-turbo-frame"),c=s=="_top"?null:document.getElementById(s)||ja(t,"turbo-frame:not([disabled])");if(e||i||c instanceof qr)return!1;{let d=new URL(t.href);return this.elementIsNavigatable(t)&&Ys(d,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(t,e,i){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&Ys(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(t,e){return this.elementIsNavigatable(t)&&Ys(e,this.snapshot.rootLocation)}willFollowLinkToLocation(t,e,i){return this.elementIsNavigatable(t)&&Ys(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,i)}followedLinkToLocation(t,e){let i=this.getActionForLink(t),s=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:i,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){yb(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||(ph(document.documentElement),this.view.markVisitDirection(t.direction)),yb(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){this.view.unmarkVisitDirection(),mh(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){let i=qp(t,e);return this.submissionIsNavigatable(t,e)&&Ys(Kn(i),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){let i=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:s,detail:{render:c}}=i;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!s}viewRenderedSnapshot(t,e,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,i){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,i).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,i){return pn("turbo:click",{target:t,detail:{url:e.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return pn("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return pn("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return pn("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return pn("turbo:before-render",{detail:{newBody:t,...e},cancelable:!0})}notifyApplicationAfterRender(t){return pn("turbo:render",{detail:{renderMethod:t}})}notifyApplicationAfterPageLoad(t={}){return pn("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return pn("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return pn("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(this.formMode=="off")return!1;{let i=e?this.elementIsNavigatable(e):!0;return this.formMode=="optin"?i&&t.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){let e=ja(t,"[data-turbo]"),i=ja(t,"turbo-frame");return this.drive||i?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return ta(t)||"advance"}get snapshot(){return this.view.snapshot}};function yb(n){Object.defineProperties(n,pS)}a(yb,"extendURLWithDeprecatedProperties");var pS={absoluteURL:{get(){return this.toString()}}},cn=new Ip(kb),{cache:qb,navigator:Rb}=cn;function jp(){cn.start()}a(jp,"start");function Bb(n){cn.registerAdapter(n)}a(Bb,"registerAdapter");function jb(n,t){cn.visit(n,t)}a(jb,"visit");function wc(n){cn.connectStreamSource(n)}a(wc,"connectStreamSource");function xc(n){cn.disconnectStreamSource(n)}a(xc,"disconnectStreamSource");function Fb(n){cn.renderStreamMessage(n)}a(Fb,"renderStreamMessage");function Hb(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),cn.clearCache()}a(Hb,"clearCache");function zb(n){cn.setProgressBarDelay(n)}a(zb,"setProgressBarDelay");function Ub(n){bc.confirmMethod=n}a(Ub,"setConfirmMethod");function Vb(n){cn.setFormMode(n)}a(Vb,"setFormMode");var mS=Object.freeze({__proto__:null,navigator:Rb,session:cn,cache:qb,PageRenderer:ea,PageSnapshot:mr,FrameRenderer:Va,fetch:Bp,start:jp,registerAdapter:Bb,visit:jb,connectStreamSource:wc,disconnectStreamSource:xc,renderStreamMessage:Fb,clearCache:Hb,setProgressBarDelay:zb,setConfirmMethod:Ub,setFormMode:Vb}),Dp=class extends Error{static{a(this,"TurboFrameMissingError")}},Pp=class{static{a(this,"FrameController")}fetchResponseLoaded=t=>Promise.resolve();#t=null;#e=()=>{};#n=!1;#r=!1;#s=new Set;action=null;constructor(t){this.element=t,this.view=new fp(this,this.element),this.appearanceObserver=new hp(this,this.element),this.formLinkClickObserver=new yh(this,this.element),this.linkInterceptor=new vh(this,this.element),this.restorationIdentifier=Js(),this.formSubmitObserver=new yc(this,this.element)}connect(){this.#n||(this.#n=!0,this.loadingStyle==Jo.lazy?this.appearanceObserver.start():this.#i(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#n&&(this.#n=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Jo.eager&&this.#i()}sourceURLChanged(){this.#v("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Jo.eager||this.#r)&&this.#i())}sourceURLReloaded(){let{src:t}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Jo.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#i())}async#i(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#a(Kn(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#r=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{let e=await t.responseHTML;if(e){let i=Sb(e);mr.fromDocument(i).isVisitable?await this.#o(t,i):await this.#h(t)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,ta(t)),this.#i()}willSubmitFormLinkToLocation(t){return this.#f(t)}submittedFormLinkToLocation(t,e,i){let s=this.#c(t);s&&i.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(t,e,i){return this.#f(t)}linkClickIntercepted(t,e){this.#u(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.#f(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new bc(this,t,e);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(t){t.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&t.acceptResponseType(to.contentType)}requestStarted(t){ph(this.element)}requestPreventedHandlingResponse(t,e){this.#e()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.#e()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.#e()}requestErrored(t,e){console.error(e),this.#e()}requestFinished(t){mh(this.element)}formSubmissionStarted({formElement:t}){ph(t,this.#c(t))}formSubmissionSucceededWithResponse(t,e){let i=this.#c(t.formElement,t.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,ta(t.submitter,t.formElement,i)),i.delegate.loadResponse(e),t.isSafe||cn.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),cn.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){mh(t,this.#c(t))}allowsImmediateRender({element:t},e){let i=pn("turbo:before-frame-render",{target:this.element,detail:{newFrame:t,...e},cancelable:!0}),{defaultPrevented:s,detail:{render:c}}=i;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!s}viewRenderedSnapshot(t,e,i){}preloadOnLoadLinksForView(t){cn.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}visitCachedSnapshot=({element:t})=>{let e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#o(t,e){let i=await this.extractForeignFrameElement(e.body);if(i){let s=new Ua(i),c=new Va(this,this.view.snapshot,s,Va.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(c),this.complete=!0,cn.frameRendered(t,this.element),cn.frameLoaded(this.element),await this.fetchResponseLoaded(t)}else this.#l(t)&&this.#d(t)}async#a(t){let e=new Qs(this,Ji.get,t,new URLSearchParams,this.element);return this.#t?.cancel(),this.#t=e,new Promise(i=>{this.#e=()=>{this.#e=()=>{},this.#t=null,i()},e.perform()})}#u(t,e,i){let s=this.#c(t,i);s.delegate.proposeVisitIfNavigatedWithAction(s,ta(i,t,s)),this.#y(t,()=>{s.src=e})}proposeVisitIfNavigatedWithAction(t,e=null){if(this.action=e,this.action){let i=mr.fromElement(t).clone(),{visitCachedSnapshot:s}=t.delegate;t.delegate.fetchResponseLoaded=async c=>{if(t.src){let{statusCode:d,redirected:m}=c,v=await c.responseHTML,x={response:{statusCode:d,redirected:m,responseHTML:v},visitCachedSnapshot:s,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(x.action=this.action),cn.visit(t.src,x)}}}}changeHistory(){if(this.action){let t=Lb(this.action);cn.history.update(t,Kn(this.element.src||""),this.restorationIdentifier)}}async#h(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#p(t.response)}#l(t){this.element.setAttribute("complete","");let e=t.response,i=a(async(c,d)=>{c instanceof Response?this.#p(c):cn.visit(c,d)},"visit");return!pn("turbo:frame-missing",{target:this.element,detail:{response:e,visit:i},cancelable:!0}).defaultPrevented}#d(t){this.view.missing(),this.#m(t)}#m(t){let e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Dp(e)}async#p(t){let e=new Ha(t),i=await e.responseHTML,{location:s,redirected:c,statusCode:d}=e;return cn.visit(s,{response:{redirected:c,statusCode:d,responseHTML:i}})}#c(t,e){let i=fh("data-turbo-frame",e,t)||this.element.getAttribute("target");return _b(i)??this.element}async extractForeignFrameElement(t){let e,i=CSS.escape(this.id);try{if(e=wb(t.querySelector(`turbo-frame#${i}`),this.sourceURL),e)return e;if(e=wb(t.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(s){return console.error(s),new qr}return null}#g(t,e){let i=qp(t,e);return Ys(Kn(i),this.rootLocation)}#f(t,e){let i=fh("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.#g(t,e)||!this.enabled||i=="_top")return!1;if(i){let s=_b(i);if(s)return!s.disabled}return!(!cn.elementIsNavigatable(t)||e&&!cn.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.#b("src",()=>{this.element.src=t??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#e()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#n}get rootLocation(){let e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return Kn(e)}#v(t){return this.#s.has(t)}#b(t,e){this.#s.add(t),e(),this.#s.delete(t)}#y(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}};function _b(n){if(n!=null){let t=document.getElementById(n);if(t instanceof qr)return t}}a(_b,"getFrameElementById");function wb(n,t){if(n){let e=n.getAttribute("src");if(e!=null&&t!=null&&dT(e,t))throw new Error(`Matching <turbo-frame id="${n.id}"> element has a source URL which references itself`);if(n.ownerDocument!==document&&(n=document.importNode(n,!0)),n instanceof qr)return n.connectedCallback(),n.disconnectedCallback(),n}}a(wb,"activateElement");var Fp={after(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.append(this.templateContent))},before(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.prepend(this.templateContent))},remove(){this.targetElements.forEach(n=>n.remove())},replace(){this.targetElements.forEach(n=>n.replaceWith(this.templateContent))},update(){this.targetElements.forEach(n=>{n.innerHTML="",n.append(this.templateContent)})},refresh(){cn.refresh(this.baseURI,this.requestId)}},xh=class n extends HTMLElement{static{a(this,"StreamElement")}static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await Ba(),await t.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){let t=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.id),e=[...this.templateContent?.children||[]].filter(i=>!!i.id).map(i=>i.id);return t.filter(i=>e.includes(i.id))}get performAction(){if(this.action){let t=Fp[this.action];if(t)return t;this.#t("unknown action")}this.#t("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#t("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#t("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#t(t){throw new Error(`${this.description}: ${t}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:n.renderElement}})}get targetElementsById(){let t=this.ownerDocument?.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){let t=this.ownerDocument?.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}},Eh=class extends HTMLElement{static{a(this,"StreamSourceElement")}streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),wc(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),xc(this.streamSource))}get src(){return this.getAttribute("src")||""}};qr.delegateConstructor=Pp;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",qr);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",xh);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Eh);(()=>{let n=document.currentScript;if(n&&!n.hasAttribute("data-turbo-suppress-warning"))for(n=n.parentElement;n;){if(n==document.body)return console.warn(Ab`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,n.outerHTML);n=n.parentElement}})();window.Turbo={...mS,StreamActions:Fp};jp();var Xb;async function yS(){return Xb||Yb(_S().then(Yb))}a(yS,"getConsumer");function Yb(n){return Xb=n}a(Yb,"setConsumer");async function _S(){let{createConsumer:n}=await Promise.resolve().then(()=>(Gb(),Kb));return n()}a(_S,"createConsumer");async function Jb(n,t){let{subscriptions:e}=await yS();return e.create(n,t)}a(Jb,"subscribeTo");function Cc(n){return!n||typeof n!="object"||n instanceof Date||n instanceof RegExp?n:Array.isArray(n)?n.map(Cc):Object.keys(n).reduce(function(t,e){var i=e[0].toLowerCase()+e.slice(1).replace(/([A-Z]+)/g,function(s,c){return"_"+c.toLowerCase()});return t[i]=Cc(n[e]),t},{})}a(Cc,"walk");var Xp=class extends HTMLElement{static{a(this,"TurboCableStreamSourceElement")}async connectedCallback(){wc(this),this.subscription=await Jb(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){xc(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(t){let e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let t=this.getAttribute("channel"),e=this.getAttribute("signed-stream-name");return{channel:t,signed_stream_name:e,...Cc({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",Xp);function Qb(n){if(n.target instanceof HTMLFormElement){let{target:t,detail:{fetchOptions:e}}=n;t.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let s=TS(e.body)?e.body:new URLSearchParams,c=xS(i,s,t);/get/i.test(c)||(/post/i.test(c)?s.delete("_method"):s.set("_method",c),e.method="post")},{once:!0})}}a(Qb,"encodeMethodIntoRequestBody");function xS(n,t,e){let i=ES(n),s=t.get("_method"),c=e.getAttribute("method")||"get";return typeof i=="string"?i:typeof s=="string"?s:c}a(xS,"determineFetchMethod");function ES(n){return n instanceof HTMLButtonElement||n instanceof HTMLInputElement?n.name==="_method"?n.value:n.hasAttribute("formmethod")?n.formMethod:null:null}a(ES,"determineFormMethod");function TS(n){return n instanceof FormData||n instanceof URLSearchParams}a(TS,"isBodyInit");window.Turbo=Hp;addEventListener("turbo:before-fetch-request",Qb);var ty={camelize:function(n){return n.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())},dasherize:function(n){let t=n.replace(/([A-Z])/g,(e,i)=>`-${i.toLowerCase()}`);return t.startsWith("-")?t.substr(1):t}},ey=class{static{a(this,"Application")}constructor(){this.controllers={}}start(n){this.window=window,this.document=document,this.connect()}connect(){for(let n in this.controllers)this.window.customElements.define(n,this.controllers[n])}register(n){let t=this.dasherize(n.name.replace("Default",""));this.controllers[t]=n}};Object.assign(ey.prototype,ty);var rn=new ey,Fe=class extends window.HTMLElement{static{a(this,"Controller")}constructor(){super(),this.element=this,this.descriptorPattern=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/}bindAction(n){n.identifier==this.name&&(n.boundFn=this[n.methodName].bind(this),n.listener=n.eventTarget.addEventListener(n.eventName||this.defaultEventName(n.eventTarget),n.boundFn,!1))}parseAction(n){return n.dataset.action.split(" ").map(this.parseActionDescriptorString(n).bind(this))}parseActionDescriptorString(n){return function(t){let i=t.trim().match(this.descriptorPattern)||[],s=i[1],c=i[2];return c&&!["keydown","keyup","keypress"].includes(s)&&(s+=`.${c}`,c=""),{eventTarget:this.parseEventTarget(i[3])||n,eventName:s,eventOptions:i[6]?this.parseEventOptions(i[6]):{},identifier:i[4],methodName:i[5],keyFilter:c}}}parseEventTarget(n){if(n=="window")return window;if(n=="document")return document}parseEventOptions(n){return n.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}defineTargets(){this.constructor.targets!=null&&this.constructor.targets.forEach(this.mapTargets.bind(this))}mapTargets(n){let t=this.querySelectorAll(`[data-${this.name}-target="${n}"]`);this[n+"Targets"]=Array.from(t),this[n+"Target"]=t[0]}defineValues(){if(this.constructor.values==null)return;Object.keys(this.constructor.values).forEach(this.mapValues(this.constructor.values).bind(this))}mapValues(n){return function(t){this[t+"Value"]=this.parseValue(t,n[t])}}parseValue(n,t){let e=this.camelize(`${this.name}-${n}-value`),i=this.dataset[e];if(i!=null)switch(t){case Array:return JSON.parse(i);case Boolean:return!(i=="0"||i=="false");case Number:return Number(i);case Object:return JSON.parse(i);default:return i}}attachActions(){let n=Array.from(this.querySelectorAll("[data-action]"));this.dataset.action&&n.push(this),this.actions=n.flatMap(this.parseAction.bind(this)),this.actions.forEach(this.bindAction.bind(this))}connectedCallback(){this.name=this.dasherize(this.constructor.name).replace("-controller-default","").replace("-controller",""),this.attachActions(),this.defineValues(),this.defineTargets(),this.connect&&this.connect()}disconnectedCallback(){this.disconnect&&this.disconnect()}dasherize(n){let t=n.replace(/([A-Z])/g,(e,i)=>`-${i.toLowerCase()}`);return t.startsWith("-")?t.substr(1):t}defaultEventName(n){switch(n.nodeName){case"DETAILS":return"toggle";case"FORM":return"submit";case"INPUT":return n.type.toLowerCase()=="submit"?"click":"input";case"SELECT":return"change";case"TEXTAREA":return"change";default:return"click"}}};Object.assign(Fe.prototype,ty);var Nc=class extends Fe{static{a(this,"AdminCleaveController")}connect(){let t=this.querySelector("input");t.autocomplete=="cc-number"?this.cc({target:t}):this.cleave({target:t})}cleave(t){let e=parseInt(t.target.value.replaceAll(" ",""));isNaN(e)||(t.target.value=parseInt(e).toLocaleString("en").replaceAll(","," "))}cc(t){let e=t.target.value.replaceAll(" ",""),i=[];for(let s=0;s<e.length;s+=4)i.push(e.slice(s,s+4));t.target.value=i.join(" ")}};var Oc=class extends Fe{static{a(this,"AdminTabController")}connect(){document.querySelectorAll("admin-tab-controller label").forEach(this.setCurrent.bind(this))}mark(t){document.querySelectorAll("admin-tab-controller label").forEach(this.unselect),this.select(t.target)}setCurrent(t){document.getElementById(t.getAttribute("for")).checked?this.select(t):this.unselect(t)}unselect(t){t.classList.add("bg-neutral-200","hover:bg-neutral-300"),t.classList.remove("bg-cyan-200")}select(t){t.classList.remove("bg-neutral-200","hover:bg-neutral-300"),t.classList.add("bg-cyan-200")}};function kh(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)n[i]=e[i]}return n}a(kh,"assign");var SS={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Jp(n,t){function e(s,c,d){if(!(typeof document>"u")){d=kh({},t,d),typeof d.expires=="number"&&(d.expires=new Date(Date.now()+d.expires*864e5)),d.expires&&(d.expires=d.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var m="";for(var v in d)d[v]&&(m+="; "+v,d[v]!==!0&&(m+="="+d[v].split(";")[0]));return document.cookie=s+"="+n.write(c,s)+m}}a(e,"set");function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var c=document.cookie?document.cookie.split("; "):[],d={},m=0;m<c.length;m++){var v=c[m].split("="),y=v.slice(1).join("=");try{var x=decodeURIComponent(v[0]);if(d[x]=n.read(y,x),s===x)break}catch{}}return s?d[s]:d}}return a(i,"get"),Object.create({set:e,get:i,remove:function(s,c){e(s,"",kh({},c,{expires:-1}))},withAttributes:function(s){return Jp(this.converter,kh({},this.attributes,s))},withConverter:function(s){return Jp(kh({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(n)}})}a(Jp,"init");var ny=Jp(SS,{path:"/"});var kc=class extends Fe{static{a(this,"BackToScopeController")}click(t){let e=this.dataset.resource,i=ny.get(`return_to_${e}_tab`);i&&(t.preventDefault(),window.Turbo.visit(t.target.href+"?scope="+i))}};var Mc=class extends Fe{static{a(this,"BatchActionController")}static targets=["actionbar","all","checkbox"];checkbox(t){this.checkboxTargets.some(this.isChecked)?this.showActions():this.hideActions()}isChecked(t){return t.checked}showActions(){this.actionbarTarget.classList.remove("hidden"),this.allTarget.checked=!0}hideActions(){this.actionbarTarget.classList.add("hidden"),this.allTarget.checked=!1}};var Ic=class extends Fe{static{a(this,"ClickableRowController")}connect(){this.querySelectorAll("[data-link]").forEach(this.addHoverClasses)}addHoverClasses(t){t.classList.add("cursor-pointer","hover:bg-neutral-200")}click(t){if(t.target.tagName=="A"||t.target.tagName=="INPUT")return!0;let e=t.target.closest("tr").dataset.link;t.which==2||t.which==4||t.metaKey||t.ctrlKey?window.open(e,"_blank"):(t.preventDefault(),window.Turbo.visit(e))}};var iy={camelize:function(n){return n.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())},dasherize:function(n){let t=n.replace(/([A-Z])/g,(e,i)=>`-${i.toLowerCase()}`);return t.startsWith("-")?t.substr(1):t}},ry=class{static{a(this,"Application")}constructor(){this.controllers={}}start(n){this.window=window,this.document=document,this.connect()}connect(){for(let n in this.controllers)this.window.customElements.define(n,this.controllers[n])}register(n){let t=this.dasherize(n.name.replace("Default",""));this.controllers[t]=n}};Object.assign(ry.prototype,iy);var uR=new ry,qn=class extends window.HTMLElement{static{a(this,"Controller")}constructor(){super(),this.element=this,this.descriptorPattern=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/}bindAction(n){n.identifier==this.name&&(n.boundFn=this[n.methodName].bind(this),n.listener=n.eventTarget.addEventListener(n.eventName||this.defaultEventName(n.eventTarget),n.boundFn,!1))}parseAction(n){return n.dataset.action.split(" ").map(this.parseActionDescriptorString(n).bind(this))}parseActionDescriptorString(n){return function(t){let i=t.trim().match(this.descriptorPattern)||[],s=i[1],c=i[2];return c&&!["keydown","keyup","keypress"].includes(s)&&(s+=`.${c}`,c=""),{eventTarget:this.parseEventTarget(i[3])||n,eventName:s,eventOptions:i[6]?this.parseEventOptions(i[6]):{},identifier:i[4],methodName:i[5],keyFilter:c}}}parseEventTarget(n){if(n=="window")return window;if(n=="document")return document}parseEventOptions(n){return n.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}defineTargets(){this.constructor.targets!=null&&this.constructor.targets.forEach(this.mapTargets.bind(this))}mapTargets(n){let t=this.querySelectorAll(`[data-${this.name}-target="${n}"]`);this[n+"Targets"]=Array.from(t),this[n+"Target"]=t[0]}defineValues(){if(this.constructor.values==null)return;Object.keys(this.constructor.values).forEach(this.mapValues(this.constructor.values).bind(this))}mapValues(n){return function(t){this[t+"Value"]=this.parseValue(t,n[t])}}parseValue(n,t){let e=this.camelize(`${this.name}-${n}-value`),i=this.dataset[e];if(i!=null)switch(t){case Array:return JSON.parse(i);case Boolean:return!(i=="0"||i=="false");case Number:return Number(i);case Object:return JSON.parse(i);default:return i}}attachActions(){let n=Array.from(this.querySelectorAll("[data-action]"));this.dataset.action&&n.push(this),this.actions=n.flatMap(this.parseAction.bind(this)),this.actions.forEach(this.bindAction.bind(this))}connectedCallback(){this.name=this.dasherize(this.constructor.name).replace("-controller-default","").replace("-controller",""),this.attachActions(),this.defineValues(),this.defineTargets(),this.connect&&this.connect()}disconnectedCallback(){this.disconnect&&this.disconnect()}dasherize(n){let t=n.replace(/([A-Z])/g,(e,i)=>`-${i.toLowerCase()}`);return t.startsWith("-")?t.substr(1):t}defaultEventName(n){switch(n.nodeName){case"DETAILS":return"toggle";case"FORM":return"submit";case"INPUT":return n.type.toLowerCase()=="submit"?"click":"input";case"SELECT":return"change";case"TEXTAREA":return"change";default:return"click"}}};Object.assign(qn.prototype,iy);var Dc=class extends qn{static{a(this,"CommissionCalculatorController")}static targets=["salePrice","commission","vat","totalCommission"];priceChanged(t){let e=this.parseInt(this.salePriceTarget.value),i=Math.round(e*.06);this.commissionTarget.value=this.clamp(i,4e3,6e4),this.updateTotalCommission()}updateTotalCommission(t){let e=this.parseInt(this.commissionTarget.value),i=this.parseFloat(this.vatTarget.value);this.totalCommissionTarget.value=e*i}updateVat(t){let e=this.parseInt(this.totalCommissionTarget.value),i=this.parseFloat(this.vatTarget.value);this.commissionTarget.value=e/i}clamp(t,e,i){return Math.min(Math.max(t,e),i)}parseInt(t){return parseInt(t.replaceAll(" ",""))}parseFloat(t){return parseFloat(t.replaceAll(" ",""))}};var Pc=class extends Fe{static{a(this,"HamburgerMenuController")}connect(){this.classList.add("cursor-pointer")}toggle(t){document.getElementById("left-menu").classList.toggle("-translate-x-full"),document.getElementById("main").classList.toggle("blur-sm")}};function sy(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}a(sy,"ownKeys");function Xr(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?sy(Object(e),!0).forEach(function(i){AS(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):sy(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}a(Xr,"_objectSpread2");function Rh(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rh=a(function(t){return typeof t},"_typeof"):Rh=a(function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},"_typeof"),Rh(n)}a(Rh,"_typeof");function AS(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}a(AS,"_defineProperty");function ro(){return ro=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ro.apply(this,arguments)}a(ro,"_extends");function LS(n,t){if(n==null)return{};var e={},i=Object.keys(n),s,c;for(c=0;c<i.length;c++)s=i[c],!(t.indexOf(s)>=0)&&(e[s]=n[s]);return e}a(LS,"_objectWithoutPropertiesLoose");function CS(n,t){if(n==null)return{};var e=LS(n,t),i,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(s=0;s<c.length;s++)i=c[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}a(CS,"_objectWithoutProperties");var NS="1.15.6";function vs(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}a(vs,"userAgent");var so=vs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),$h=vs(/Edge/i),oy=vs(/firefox/i),Bh=vs(/safari/i)&&!vs(/chrome/i)&&!vs(/android/i),lm=vs(/iP(ad|od|hone)/i),my=vs(/chrome/i)&&vs(/android/i),gy={capture:!1,passive:!1};function Ie(n,t,e){n.addEventListener(t,e,!so&&gy)}a(Ie,"on");function Ce(n,t,e){n.removeEventListener(t,e,!so&&gy)}a(Ce,"off");function zh(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}a(zh,"matches");function vy(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}a(vy,"getParentOrHost");function Br(n,t,e,i){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&zh(n,t):zh(n,t))||i&&n===e)return n;if(n===e)break}while(n=vy(n))}return null}a(Br,"closest");var ay=/\s+/g;function Qi(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var i=(" "+n.className+" ").replace(ay," ").replace(" "+t+" "," ");n.className=(i+(e?" "+t:"")).replace(ay," ")}}a(Qi,"toggleClass");function Qt(n,t,e){var i=n&&n.style;if(i){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=e+(typeof e=="string"?"":"px")}}a(Qt,"css");function Xa(n,t){var e="";if(typeof n=="string")e=n;else do{var i=Qt(n,"transform");i&&i!=="none"&&(e=i+" "+e)}while(!t&&(n=n.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(e)}a(Xa,"matrix");function by(n,t,e){if(n){var i=n.getElementsByTagName(t),s=0,c=i.length;if(e)for(;s<c;s++)e(i[s],s);return i}return[]}a(by,"find");function bs(){var n=document.scrollingElement;return n||document.documentElement}a(bs,"getWindowScrollingElement");function An(n,t,e,i,s){if(!(!n.getBoundingClientRect&&n!==window)){var c,d,m,v,y,x,E;if(n!==window&&n.parentNode&&n!==bs()?(c=n.getBoundingClientRect(),d=c.top,m=c.left,v=c.bottom,y=c.right,x=c.height,E=c.width):(d=0,m=0,v=window.innerHeight,y=window.innerWidth,x=window.innerHeight,E=window.innerWidth),(t||e)&&n!==window&&(s=s||n.parentNode,!so))do if(s&&s.getBoundingClientRect&&(Qt(s,"transform")!=="none"||e&&Qt(s,"position")!=="static")){var A=s.getBoundingClientRect();d-=A.top+parseInt(Qt(s,"border-top-width")),m-=A.left+parseInt(Qt(s,"border-left-width")),v=d+c.height,y=m+c.width;break}while(s=s.parentNode);if(i&&n!==window){var C=Xa(s||n),k=C&&C.a,H=C&&C.d;C&&(d/=H,m/=k,E/=k,x/=H,v=d+x,y=m+E)}return{top:d,left:m,bottom:v,right:y,width:E,height:x}}}a(An,"getRect");function ly(n,t,e){for(var i=Uh(n,!0),s=An(n)[t];i;){var c=An(i)[e],d=void 0;if(e==="top"||e==="left"?d=s>=c:d=s<=c,!d)return i;if(i===bs())break;i=Uh(i,!1)}return!1}a(ly,"isScrolledPast");function Ja(n,t,e,i){for(var s=0,c=0,d=n.children;c<d.length;){if(d[c].style.display!=="none"&&d[c]!==ee.ghost&&(i||d[c]!==ee.dragged)&&Br(d[c],e.draggable,n,!1)){if(s===t)return d[c];s++}c++}return null}a(Ja,"getChild");function cm(n,t){for(var e=n.lastElementChild;e&&(e===ee.ghost||Qt(e,"display")==="none"||t&&!zh(e,t));)e=e.previousElementSibling;return e||null}a(cm,"lastChild");function gr(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==ee.clone&&(!t||zh(n,t))&&e++;return e}a(gr,"index");function cy(n){var t=0,e=0,i=bs();if(n)do{var s=Xa(n),c=s.a,d=s.d;t+=n.scrollLeft*c,e+=n.scrollTop*d}while(n!==i&&(n=n.parentNode));return[t,e]}a(cy,"getRelativeScrollOffset");function OS(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n[e][i])return Number(e)}return-1}a(OS,"indexOfObject");function Uh(n,t){if(!n||!n.getBoundingClientRect)return bs();var e=n,i=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var s=Qt(e);if(e.clientWidth<e.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return bs();if(i||t)return e;i=!0}}while(e=e.parentNode);return bs()}a(Uh,"getParentAutoScrollElement");function kS(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}a(kS,"extend");function Qp(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}a(Qp,"isRectEqual");var tm;function yy(n,t){return function(){if(!tm){var e=arguments,i=this;e.length===1?n.call(i,e[0]):n.apply(i,e),tm=setTimeout(function(){tm=void 0},t)}}}a(yy,"throttle");function _y(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}a(_y,"scrollBy");function wy(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}a(wy,"clone");function xy(n,t,e){var i={};return Array.from(n.children).forEach(function(s){var c,d,m,v;if(!(!Br(s,t.draggable,n,!1)||s.animated||s===e)){var y=An(s);i.left=Math.min((c=i.left)!==null&&c!==void 0?c:1/0,y.left),i.top=Math.min((d=i.top)!==null&&d!==void 0?d:1/0,y.top),i.right=Math.max((m=i.right)!==null&&m!==void 0?m:-1/0,y.right),i.bottom=Math.max((v=i.bottom)!==null&&v!==void 0?v:-1/0,y.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}a(xy,"getChildContainingRectFromElement");var qi="Sortable"+new Date().getTime();function MS(){var n=[],t;return{captureAnimationState:a(function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(s){if(!(Qt(s,"display")==="none"||s===ee.ghost)){n.push({target:s,rect:An(s)});var c=Xr({},n[n.length-1].rect);if(s.thisAnimationDuration){var d=Xa(s,!0);d&&(c.top-=d.f,c.left-=d.e)}s.fromRect=c}})}},"captureAnimationState"),addAnimationState:a(function(i){n.push(i)},"addAnimationState"),removeAnimationState:a(function(i){n.splice(OS(n,{target:i}),1)},"removeAnimationState"),animateAll:a(function(i){var s=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var c=!1,d=0;n.forEach(function(m){var v=0,y=m.target,x=y.fromRect,E=An(y),A=y.prevFromRect,C=y.prevToRect,k=m.rect,H=Xa(y,!0);H&&(E.top-=H.f,E.left-=H.e),y.toRect=E,y.thisAnimationDuration&&Qp(A,E)&&!Qp(x,E)&&(k.top-E.top)/(k.left-E.left)===(x.top-E.top)/(x.left-E.left)&&(v=DS(k,A,C,s.options)),Qp(E,x)||(y.prevFromRect=x,y.prevToRect=E,v||(v=s.options.animation),s.animate(y,k,E,v)),v&&(c=!0,d=Math.max(d,v),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0,y.prevFromRect=null,y.fromRect=null,y.prevToRect=null,y.thisAnimationDuration=null},v),y.thisAnimationDuration=v)}),clearTimeout(t),c?t=setTimeout(function(){typeof i=="function"&&i()},d):typeof i=="function"&&i(),n=[]},"animateAll"),animate:a(function(i,s,c,d){if(d){Qt(i,"transition",""),Qt(i,"transform","");var m=Xa(this.el),v=m&&m.a,y=m&&m.d,x=(s.left-c.left)/(v||1),E=(s.top-c.top)/(y||1);i.animatingX=!!x,i.animatingY=!!E,Qt(i,"transform","translate3d("+x+"px,"+E+"px,0)"),this.forRepaintDummy=IS(i),Qt(i,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),Qt(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Qt(i,"transition",""),Qt(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},d)}},"animate")}}a(MS,"AnimationStateManager");function IS(n){return n.offsetWidth}a(IS,"repaint");function DS(n,t,e,i){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*i.animation}a(DS,"calculateRealTime");var $a=[],em={initializeByDefault:!0},Fc={mount:a(function(t){for(var e in em)em.hasOwnProperty(e)&&!(e in t)&&(t[e]=em[e]);$a.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),$a.push(t)},"mount"),pluginEvent:a(function(t,e,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var c=t+"Global";$a.forEach(function(d){e[d.pluginName]&&(e[d.pluginName][c]&&e[d.pluginName][c](Xr({sortable:e},i)),e.options[d.pluginName]&&e[d.pluginName][t]&&e[d.pluginName][t](Xr({sortable:e},i)))})},"pluginEvent"),initializePlugins:a(function(t,e,i,s){$a.forEach(function(m){var v=m.pluginName;if(!(!t.options[v]&&!m.initializeByDefault)){var y=new m(t,e,t.options);y.sortable=t,y.options=t.options,t[v]=y,ro(i,y.defaults)}});for(var c in t.options)if(t.options.hasOwnProperty(c)){var d=this.modifyOption(t,c,t.options[c]);typeof d<"u"&&(t.options[c]=d)}},"initializePlugins"),getEventProperties:a(function(t,e){var i={};return $a.forEach(function(s){typeof s.eventProperties=="function"&&ro(i,s.eventProperties.call(e[s.pluginName],t))}),i},"getEventProperties"),modifyOption:a(function(t,e,i){var s;return $a.forEach(function(c){t[c.pluginName]&&c.optionListeners&&typeof c.optionListeners[e]=="function"&&(s=c.optionListeners[e].call(t[c.pluginName],i))}),s},"modifyOption")};function PS(n){var t=n.sortable,e=n.rootEl,i=n.name,s=n.targetEl,c=n.cloneEl,d=n.toEl,m=n.fromEl,v=n.oldIndex,y=n.newIndex,x=n.oldDraggableIndex,E=n.newDraggableIndex,A=n.originalEvent,C=n.putSortable,k=n.extraEventProperties;if(t=t||e&&e[qi],!!t){var H,M=t.options,q="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!so&&!$h?H=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(H=document.createEvent("Event"),H.initEvent(i,!0,!0)),H.to=d||e,H.from=m||e,H.item=s||e,H.clone=c,H.oldIndex=v,H.newIndex=y,H.oldDraggableIndex=x,H.newDraggableIndex=E,H.originalEvent=A,H.pullMode=C?C.lastPutMode:void 0;var V=Xr(Xr({},k),Fc.getEventProperties(i,t));for(var $ in V)H[$]=V[$];e&&e.dispatchEvent(H),M[q]&&M[q].call(t,H)}}a(PS,"dispatchEvent");var qS=["evt"],Pi=a(function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.evt,c=CS(i,qS);Fc.pluginEvent.bind(ee)(t,e,Xr({dragEl:At,parentEl:bn,ghostEl:re,rootEl:un,nextEl:oa,lastDownEl:jh,cloneEl:mn,cloneHidden:io,dragStarted:qc,putSortable:Qn,activeSortable:ee.active,originalEvent:s,oldIndex:Ya,oldDraggableIndex:Rc,newIndex:tr,newDraggableIndex:no,hideGhostForTarget:Ay,unhideGhostForTarget:Ly,cloneNowHidden:a(function(){io=!0},"cloneNowHidden"),cloneNowShown:a(function(){io=!1},"cloneNowShown"),dispatchSortableEvent:a(function(m){wi({sortable:e,name:m,originalEvent:s})},"dispatchSortableEvent")},c))},"pluginEvent");function wi(n){PS(Xr({putSortable:Qn,cloneEl:mn,targetEl:At,rootEl:un,oldIndex:Ya,oldDraggableIndex:Rc,newIndex:tr,newDraggableIndex:no},n))}a(wi,"_dispatchEvent");var At,bn,re,un,oa,jh,mn,io,Ya,tr,Rc,no,Mh,Qn,Ga=!1,Vh=!1,Wh=[],ra,Rr,nm,im,uy,hy,qc,Ka,Bc,jc=!1,Ih=!1,Fh,ii,rm=[],om=!1,Zh=[],Kh=typeof document<"u",Dh=lm,dy=$h||so?"cssFloat":"float",RS=Kh&&!my&&!lm&&"draggable"in document.createElement("div"),Ey=function(){if(Kh){if(so)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Ty=a(function(t,e){var i=Qt(t),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),c=Ja(t,0,e),d=Ja(t,1,e),m=c&&Qt(c),v=d&&Qt(d),y=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+An(c).width,x=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+An(d).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(c&&m.float&&m.float!=="none"){var E=m.float==="left"?"left":"right";return d&&(v.clear==="both"||v.clear===E)?"vertical":"horizontal"}return c&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||y>=s&&i[dy]==="none"||d&&i[dy]==="none"&&y+x>s)?"vertical":"horizontal"},"_detectDirection"),BS=a(function(t,e,i){var s=i?t.left:t.top,c=i?t.right:t.bottom,d=i?t.width:t.height,m=i?e.left:e.top,v=i?e.right:e.bottom,y=i?e.width:e.height;return s===m||c===v||s+d/2===m+y/2},"_dragElInRowColumn"),jS=a(function(t,e){var i;return Wh.some(function(s){var c=s[qi].options.emptyInsertThreshold;if(!(!c||cm(s))){var d=An(s),m=t>=d.left-c&&t<=d.right+c,v=e>=d.top-c&&e<=d.bottom+c;if(m&&v)return i=s}}),i},"_detectNearestEmptySortable"),Sy=a(function(t){function e(c,d){return function(m,v,y,x){var E=m.options.group.name&&v.options.group.name&&m.options.group.name===v.options.group.name;if(c==null&&(d||E))return!0;if(c==null||c===!1)return!1;if(d&&c==="clone")return c;if(typeof c=="function")return e(c(m,v,y,x),d)(m,v,y,x);var A=(d?m:v).options.group.name;return c===!0||typeof c=="string"&&c===A||c.join&&c.indexOf(A)>-1}}a(e,"toFn");var i={},s=t.group;(!s||Rh(s)!="object")&&(s={name:s}),i.name=s.name,i.checkPull=e(s.pull,!0),i.checkPut=e(s.put),i.revertClone=s.revertClone,t.group=i},"_prepareGroup"),Ay=a(function(){!Ey&&re&&Qt(re,"display","none")},"_hideGhostForTarget"),Ly=a(function(){!Ey&&re&&Qt(re,"display","")},"_unhideGhostForTarget");Kh&&!my&&document.addEventListener("click",function(n){if(Vh)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Vh=!1,!1},!0);var sa=a(function(t){if(At){t=t.touches?t.touches[0]:t;var e=jS(t.clientX,t.clientY);if(e){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[qi]._onDragOver(i)}}},"nearestEmptyInsertDetectEvent"),FS=a(function(t){At&&At.parentNode[qi]._isOutsideThisEl(t.target)},"_checkOutsideTargetEl");function ee(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=ro({},t),n[qi]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:a(function(){return Ty(n,this.options)},"direction"),ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:a(function(d,m){d.setData("Text",m.textContent)},"setData"),dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ee.supportPointer!==!1&&"PointerEvent"in window&&(!Bh||lm),emptyInsertThreshold:5};Fc.initializePlugins(this,n,e);for(var i in e)!(i in t)&&(t[i]=e[i]);Sy(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:RS,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ie(n,"pointerdown",this._onTapStart):(Ie(n,"mousedown",this._onTapStart),Ie(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ie(n,"dragover",this),Ie(n,"dragenter",this)),Wh.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ro(this,MS())}a(ee,"Sortable");ee.prototype={constructor:ee,_isOutsideThisEl:a(function(t){!this.el.contains(t)&&t!==this.el&&(Ka=null)},"_isOutsideThisEl"),_getDirection:a(function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,At):this.options.direction},"_getDirection"),_onTapStart:a(function(t){if(t.cancelable){var e=this,i=this.el,s=this.options,c=s.preventOnFilter,d=t.type,m=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,v=(m||t).target,y=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||v,x=s.filter;if(KS(i),!At&&!(/mousedown|pointerdown/.test(d)&&t.button!==0||s.disabled)&&!y.isContentEditable&&!(!this.nativeDraggable&&Bh&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=Br(v,s.draggable,i,!1),!(v&&v.animated)&&jh!==v)){if(Ya=gr(v),Rc=gr(v,s.draggable),typeof x=="function"){if(x.call(this,t,v,this)){wi({sortable:e,rootEl:y,name:"filter",targetEl:v,toEl:i,fromEl:i}),Pi("filter",e,{evt:t}),c&&t.preventDefault();return}}else if(x&&(x=x.split(",").some(function(E){if(E=Br(y,E.trim(),i,!1),E)return wi({sortable:e,rootEl:E,name:"filter",targetEl:v,fromEl:i,toEl:i}),Pi("filter",e,{evt:t}),!0}),x)){c&&t.preventDefault();return}s.handle&&!Br(y,s.handle,i,!1)||this._prepareDragStart(t,m,v)}}},"_onTapStart"),_prepareDragStart:a(function(t,e,i){var s=this,c=s.el,d=s.options,m=c.ownerDocument,v;if(i&&!At&&i.parentNode===c){var y=An(i);if(un=c,At=i,bn=At.parentNode,oa=At.nextSibling,jh=i,Mh=d.group,ee.dragged=At,ra={target:At,clientX:(e||t).clientX,clientY:(e||t).clientY},uy=ra.clientX-y.left,hy=ra.clientY-y.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,At.style["will-change"]="all",v=a(function(){if(Pi("delayEnded",s,{evt:t}),ee.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!oy&&s.nativeDraggable&&(At.draggable=!0),s._triggerDragStart(t,e),wi({sortable:s,name:"choose",originalEvent:t}),Qi(At,d.chosenClass,!0)},"dragStartFn"),d.ignore.split(",").forEach(function(x){by(At,x.trim(),sm)}),Ie(m,"dragover",sa),Ie(m,"mousemove",sa),Ie(m,"touchmove",sa),d.supportPointer?(Ie(m,"pointerup",s._onDrop),!this.nativeDraggable&&Ie(m,"pointercancel",s._onDrop)):(Ie(m,"mouseup",s._onDrop),Ie(m,"touchend",s._onDrop),Ie(m,"touchcancel",s._onDrop)),oy&&this.nativeDraggable&&(this.options.touchStartThreshold=4,At.draggable=!0),Pi("delayStart",this,{evt:t}),d.delay&&(!d.delayOnTouchOnly||e)&&(!this.nativeDraggable||!($h||so))){if(ee.eventCanceled){this._onDrop();return}d.supportPointer?(Ie(m,"pointerup",s._disableDelayedDrag),Ie(m,"pointercancel",s._disableDelayedDrag)):(Ie(m,"mouseup",s._disableDelayedDrag),Ie(m,"touchend",s._disableDelayedDrag),Ie(m,"touchcancel",s._disableDelayedDrag)),Ie(m,"mousemove",s._delayedDragTouchMoveHandler),Ie(m,"touchmove",s._delayedDragTouchMoveHandler),d.supportPointer&&Ie(m,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(v,d.delay)}else v()}},"_prepareDragStart"),_delayedDragTouchMoveHandler:a(function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},"_delayedDragTouchMoveHandler"),_disableDelayedDrag:a(function(){At&&sm(At),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},"_disableDelayedDrag"),_disableDelayedDragEvents:a(function(){var t=this.el.ownerDocument;Ce(t,"mouseup",this._disableDelayedDrag),Ce(t,"touchend",this._disableDelayedDrag),Ce(t,"touchcancel",this._disableDelayedDrag),Ce(t,"pointerup",this._disableDelayedDrag),Ce(t,"pointercancel",this._disableDelayedDrag),Ce(t,"mousemove",this._delayedDragTouchMoveHandler),Ce(t,"touchmove",this._delayedDragTouchMoveHandler),Ce(t,"pointermove",this._delayedDragTouchMoveHandler)},"_disableDelayedDragEvents"),_triggerDragStart:a(function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?Ie(document,"pointermove",this._onTouchMove):e?Ie(document,"touchmove",this._onTouchMove):Ie(document,"mousemove",this._onTouchMove):(Ie(At,"dragend",this),Ie(un,"dragstart",this._onDragStart));try{document.selection?Hh(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},"_triggerDragStart"),_dragStarted:a(function(t,e){if(Ga=!1,un&&At){Pi("dragStarted",this,{evt:e}),this.nativeDraggable&&Ie(document,"dragover",FS);var i=this.options;!t&&Qi(At,i.dragClass,!1),Qi(At,i.ghostClass,!0),ee.active=this,t&&this._appendGhost(),wi({sortable:this,name:"start",originalEvent:e})}else this._nulling()},"_dragStarted"),_emulateDragOver:a(function(){if(Rr){this._lastX=Rr.clientX,this._lastY=Rr.clientY,Ay();for(var t=document.elementFromPoint(Rr.clientX,Rr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Rr.clientX,Rr.clientY),t!==e);)e=t;if(At.parentNode[qi]._isOutsideThisEl(t),e)do{if(e[qi]){var i=void 0;if(i=e[qi]._onDragOver({clientX:Rr.clientX,clientY:Rr.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=vy(e));Ly()}},"_emulateDragOver"),_onTouchMove:a(function(t){if(ra){var e=this.options,i=e.fallbackTolerance,s=e.fallbackOffset,c=t.touches?t.touches[0]:t,d=re&&Xa(re,!0),m=re&&d&&d.a,v=re&&d&&d.d,y=Dh&&ii&&cy(ii),x=(c.clientX-ra.clientX+s.x)/(m||1)+(y?y[0]-rm[0]:0)/(m||1),E=(c.clientY-ra.clientY+s.y)/(v||1)+(y?y[1]-rm[1]:0)/(v||1);if(!ee.active&&!Ga){if(i&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(re){d?(d.e+=x-(nm||0),d.f+=E-(im||0)):d={a:1,b:0,c:0,d:1,e:x,f:E};var A="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");Qt(re,"webkitTransform",A),Qt(re,"mozTransform",A),Qt(re,"msTransform",A),Qt(re,"transform",A),nm=x,im=E,Rr=c}t.cancelable&&t.preventDefault()}},"_onTouchMove"),_appendGhost:a(function(){if(!re){var t=this.options.fallbackOnBody?document.body:un,e=An(At,!0,Dh,!0,t),i=this.options;if(Dh){for(ii=t;Qt(ii,"position")==="static"&&Qt(ii,"transform")==="none"&&ii!==document;)ii=ii.parentNode;ii!==document.body&&ii!==document.documentElement?(ii===document&&(ii=bs()),e.top+=ii.scrollTop,e.left+=ii.scrollLeft):ii=bs(),rm=cy(ii)}re=At.cloneNode(!0),Qi(re,i.ghostClass,!1),Qi(re,i.fallbackClass,!0),Qi(re,i.dragClass,!0),Qt(re,"transition",""),Qt(re,"transform",""),Qt(re,"box-sizing","border-box"),Qt(re,"margin",0),Qt(re,"top",e.top),Qt(re,"left",e.left),Qt(re,"width",e.width),Qt(re,"height",e.height),Qt(re,"opacity","0.8"),Qt(re,"position",Dh?"absolute":"fixed"),Qt(re,"zIndex","100000"),Qt(re,"pointerEvents","none"),ee.ghost=re,t.appendChild(re),Qt(re,"transform-origin",uy/parseInt(re.style.width)*100+"% "+hy/parseInt(re.style.height)*100+"%")}},"_appendGhost"),_onDragStart:a(function(t,e){var i=this,s=t.dataTransfer,c=i.options;if(Pi("dragStart",this,{evt:t}),ee.eventCanceled){this._onDrop();return}Pi("setupClone",this),ee.eventCanceled||(mn=wy(At),mn.removeAttribute("id"),mn.draggable=!1,mn.style["will-change"]="",this._hideClone(),Qi(mn,this.options.chosenClass,!1),ee.clone=mn),i.cloneId=Hh(function(){Pi("clone",i),!ee.eventCanceled&&(i.options.removeCloneOnHide||un.insertBefore(mn,At),i._hideClone(),wi({sortable:i,name:"clone"}))}),!e&&Qi(At,c.dragClass,!0),e?(Vh=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Ce(document,"mouseup",i._onDrop),Ce(document,"touchend",i._onDrop),Ce(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",c.setData&&c.setData.call(i,s,At)),Ie(document,"drop",i),Qt(At,"transform","translateZ(0)")),Ga=!0,i._dragStartId=Hh(i._dragStarted.bind(i,e,t)),Ie(document,"selectstart",i),qc=!0,window.getSelection().removeAllRanges(),Bh&&Qt(document.body,"user-select","none")},"_onDragStart"),_onDragOver:a(function(t){var e=this.el,i=t.target,s,c,d,m=this.options,v=m.group,y=ee.active,x=Mh===v,E=m.sort,A=Qn||y,C,k=this,H=!1;if(om)return;function M(I,Q){Pi(I,k,Xr({evt:t,isOwner:x,axis:C?"vertical":"horizontal",revert:d,dragRect:s,targetRect:c,canSort:E,fromSortable:A,target:i,completed:V,onMove:a(function(ct,Et){return Ph(un,e,At,s,ct,An(ct),t,Et)},"onMove"),changed:$},Q))}a(M,"dragOverEvent");function q(){M("dragOverAnimationCapture"),k.captureAnimationState(),k!==A&&A.captureAnimationState()}a(q,"capture");function V(I){return M("dragOverCompleted",{insertion:I}),I&&(x?y._hideClone():y._showClone(k),k!==A&&(Qi(At,Qn?Qn.options.ghostClass:y.options.ghostClass,!1),Qi(At,m.ghostClass,!0)),Qn!==k&&k!==ee.active?Qn=k:k===ee.active&&Qn&&(Qn=null),A===k&&(k._ignoreWhileAnimating=i),k.animateAll(function(){M("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==A&&(A.animateAll(),A._ignoreWhileAnimating=null)),(i===At&&!At.animated||i===e&&!i.animated)&&(Ka=null),!m.dragoverBubble&&!t.rootEl&&i!==document&&(At.parentNode[qi]._isOutsideThisEl(t.target),!I&&sa(t)),!m.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),H=!0}a(V,"completed");function $(){tr=gr(At),no=gr(At,m.draggable),wi({sortable:k,name:"change",toEl:e,newIndex:tr,newDraggableIndex:no,originalEvent:t})}if(a($,"changed"),t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=Br(i,m.draggable,e,!0),M("dragOver"),ee.eventCanceled)return H;if(At.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||k._ignoreWhileAnimating===i)return V(!1);if(Vh=!1,y&&!m.disabled&&(x?E||(d=bn!==un):Qn===this||(this.lastPutMode=Mh.checkPull(this,y,At,t))&&v.checkPut(this,y,At,t))){if(C=this._getDirection(t,i)==="vertical",s=An(At),M("dragOverValid"),ee.eventCanceled)return H;if(d)return bn=un,q(),this._hideClone(),M("revert"),ee.eventCanceled||(oa?un.insertBefore(At,oa):un.appendChild(At)),V(!0);var Y=cm(e,m.draggable);if(!Y||VS(t,C,this)&&!Y.animated){if(Y===At)return V(!1);if(Y&&e===t.target&&(i=Y),i&&(c=An(i)),Ph(un,e,At,s,i,c,t,!!i)!==!1)return q(),Y&&Y.nextSibling?e.insertBefore(At,Y.nextSibling):e.appendChild(At),bn=e,$(),V(!0)}else if(Y&&US(t,C,this)){var ot=Ja(e,0,m,!0);if(ot===At)return V(!1);if(i=ot,c=An(i),Ph(un,e,At,s,i,c,t,!1)!==!1)return q(),e.insertBefore(At,ot),bn=e,$(),V(!0)}else if(i.parentNode===e){c=An(i);var gt=0,ht,j=At.parentNode!==e,it=!BS(At.animated&&At.toRect||s,i.animated&&i.toRect||c,C),xt=C?"top":"left",z=ly(i,"top","top")||ly(At,"top","top"),X=z?z.scrollTop:void 0;Ka!==i&&(ht=c[xt],jc=!1,Ih=!it&&m.invertSwap||j),gt=WS(t,i,c,C,it?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,Ih,Ka===i);var ft;if(gt!==0){var st=gr(At);do st-=gt,ft=bn.children[st];while(ft&&(Qt(ft,"display")==="none"||ft===re))}if(gt===0||ft===i)return V(!1);Ka=i,Bc=gt;var wt=i.nextElementSibling,P=!1;P=gt===1;var U=Ph(un,e,At,s,i,c,t,P);if(U!==!1)return(U===1||U===-1)&&(P=U===1),om=!0,setTimeout(zS,30),q(),P&&!wt?e.appendChild(At):i.parentNode.insertBefore(At,P?wt:i),z&&_y(z,0,X-z.scrollTop),bn=At.parentNode,ht!==void 0&&!Ih&&(Fh=Math.abs(ht-An(i)[xt])),$(),V(!0)}if(e.contains(At))return V(!1)}return!1},"_onDragOver"),_ignoreWhileAnimating:null,_offMoveEvents:a(function(){Ce(document,"mousemove",this._onTouchMove),Ce(document,"touchmove",this._onTouchMove),Ce(document,"pointermove",this._onTouchMove),Ce(document,"dragover",sa),Ce(document,"mousemove",sa),Ce(document,"touchmove",sa)},"_offMoveEvents"),_offUpEvents:a(function(){var t=this.el.ownerDocument;Ce(t,"mouseup",this._onDrop),Ce(t,"touchend",this._onDrop),Ce(t,"pointerup",this._onDrop),Ce(t,"pointercancel",this._onDrop),Ce(t,"touchcancel",this._onDrop),Ce(document,"selectstart",this)},"_offUpEvents"),_onDrop:a(function(t){var e=this.el,i=this.options;if(tr=gr(At),no=gr(At,i.draggable),Pi("drop",this,{evt:t}),bn=At&&At.parentNode,tr=gr(At),no=gr(At,i.draggable),ee.eventCanceled){this._nulling();return}Ga=!1,Ih=!1,jc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),am(this.cloneId),am(this._dragStartId),this.nativeDraggable&&(Ce(document,"drop",this),Ce(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Bh&&Qt(document.body,"user-select",""),Qt(At,"transform",""),t&&(qc&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),re&&re.parentNode&&re.parentNode.removeChild(re),(un===bn||Qn&&Qn.lastPutMode!=="clone")&&mn&&mn.parentNode&&mn.parentNode.removeChild(mn),At&&(this.nativeDraggable&&Ce(At,"dragend",this),sm(At),At.style["will-change"]="",qc&&!Ga&&Qi(At,Qn?Qn.options.ghostClass:this.options.ghostClass,!1),Qi(At,this.options.chosenClass,!1),wi({sortable:this,name:"unchoose",toEl:bn,newIndex:null,newDraggableIndex:null,originalEvent:t}),un!==bn?(tr>=0&&(wi({rootEl:bn,name:"add",toEl:bn,fromEl:un,originalEvent:t}),wi({sortable:this,name:"remove",toEl:bn,originalEvent:t}),wi({rootEl:bn,name:"sort",toEl:bn,fromEl:un,originalEvent:t}),wi({sortable:this,name:"sort",toEl:bn,originalEvent:t})),Qn&&Qn.save()):tr!==Ya&&tr>=0&&(wi({sortable:this,name:"update",toEl:bn,originalEvent:t}),wi({sortable:this,name:"sort",toEl:bn,originalEvent:t})),ee.active&&((tr==null||tr===-1)&&(tr=Ya,no=Rc),wi({sortable:this,name:"end",toEl:bn,originalEvent:t}),this.save()))),this._nulling()},"_onDrop"),_nulling:a(function(){Pi("nulling",this),un=At=bn=re=oa=mn=jh=io=ra=Rr=qc=tr=no=Ya=Rc=Ka=Bc=Qn=Mh=ee.dragged=ee.ghost=ee.clone=ee.active=null,Zh.forEach(function(t){t.checked=!0}),Zh.length=nm=im=0},"_nulling"),handleEvent:a(function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":At&&(this._onDragOver(t),HS(t));break;case"selectstart":t.preventDefault();break}},"handleEvent"),toArray:a(function(){for(var t=[],e,i=this.el.children,s=0,c=i.length,d=this.options;s<c;s++)e=i[s],Br(e,d.draggable,this.el,!1)&&t.push(e.getAttribute(d.dataIdAttr)||$S(e));return t},"toArray"),sort:a(function(t,e){var i={},s=this.el;this.toArray().forEach(function(c,d){var m=s.children[d];Br(m,this.options.draggable,s,!1)&&(i[c]=m)},this),e&&this.captureAnimationState(),t.forEach(function(c){i[c]&&(s.removeChild(i[c]),s.appendChild(i[c]))}),e&&this.animateAll()},"sort"),save:a(function(){var t=this.options.store;t&&t.set&&t.set(this)},"save"),closest:a(function(t,e){return Br(t,e||this.options.draggable,this.el,!1)},"closest$1"),option:a(function(t,e){var i=this.options;if(e===void 0)return i[t];var s=Fc.modifyOption(this,t,e);typeof s<"u"?i[t]=s:i[t]=e,t==="group"&&Sy(i)},"option"),destroy:a(function(){Pi("destroy",this);var t=this.el;t[qi]=null,Ce(t,"mousedown",this._onTapStart),Ce(t,"touchstart",this._onTapStart),Ce(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ce(t,"dragover",this),Ce(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Wh.splice(Wh.indexOf(this.el),1),this.el=t=null},"destroy"),_hideClone:a(function(){if(!io){if(Pi("hideClone",this),ee.eventCanceled)return;Qt(mn,"display","none"),this.options.removeCloneOnHide&&mn.parentNode&&mn.parentNode.removeChild(mn),io=!0}},"_hideClone"),_showClone:a(function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(io){if(Pi("showClone",this),ee.eventCanceled)return;At.parentNode==un&&!this.options.group.revertClone?un.insertBefore(mn,At):oa?un.insertBefore(mn,oa):un.appendChild(mn),this.options.group.revertClone&&this.animate(At,mn),Qt(mn,"display",""),io=!1}},"_showClone")};function HS(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}a(HS,"_globalDragOver");function Ph(n,t,e,i,s,c,d,m){var v,y=n[qi],x=y.options.onMove,E;return window.CustomEvent&&!so&&!$h?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=t,v.from=n,v.dragged=e,v.draggedRect=i,v.related=s||t,v.relatedRect=c||An(t),v.willInsertAfter=m,v.originalEvent=d,n.dispatchEvent(v),x&&(E=x.call(y,v,d)),E}a(Ph,"_onMove");function sm(n){n.draggable=!1}a(sm,"_disableDraggable");function zS(){om=!1}a(zS,"_unsilent");function US(n,t,e){var i=An(Ja(e.el,0,e.options,!0)),s=xy(e.el,e.options,re),c=10;return t?n.clientX<s.left-c||n.clientY<i.top&&n.clientX<i.right:n.clientY<s.top-c||n.clientY<i.bottom&&n.clientX<i.left}a(US,"_ghostIsFirst");function VS(n,t,e){var i=An(cm(e.el,e.options.draggable)),s=xy(e.el,e.options,re),c=10;return t?n.clientX>s.right+c||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>s.bottom+c||n.clientX>i.right&&n.clientY>i.top}a(VS,"_ghostIsLast");function WS(n,t,e,i,s,c,d,m){var v=i?n.clientY:n.clientX,y=i?e.height:e.width,x=i?e.top:e.left,E=i?e.bottom:e.right,A=!1;if(!d){if(m&&Fh<y*s){if(!jc&&(Bc===1?v>x+y*c/2:v<E-y*c/2)&&(jc=!0),jc)A=!0;else if(Bc===1?v<x+Fh:v>E-Fh)return-Bc}else if(v>x+y*(1-s)/2&&v<E-y*(1-s)/2)return ZS(t)}return A=A||d,A&&(v<x+y*c/2||v>E-y*c/2)?v>x+y/2?1:-1:0}a(WS,"_getSwapDirection");function ZS(n){return gr(At)<gr(n)?1:-1}a(ZS,"_getInsertDirection");function $S(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,i=0;e--;)i+=t.charCodeAt(e);return i.toString(36)}a($S,"_generateId");function KS(n){Zh.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var i=t[e];i.checked&&Zh.push(i)}}a(KS,"_saveInputCheckedState");function Hh(n){return setTimeout(n,0)}a(Hh,"_nextTick");function am(n){return clearTimeout(n)}a(am,"_cancelNextTick");Kh&&Ie(document,"touchmove",function(n){(ee.active||Ga)&&n.cancelable&&n.preventDefault()});ee.utils={on:Ie,off:Ce,css:Qt,find:by,is:a(function(t,e){return!!Br(t,e,t,!1)},"is"),extend:kS,throttle:yy,closest:Br,toggleClass:Qi,clone:wy,index:gr,nextTick:Hh,cancelNextTick:am,detectDirection:Ty,getChild:Ja,expando:qi};ee.get=function(n){return n[qi]};ee.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ee.utils=Xr(Xr({},ee.utils),i.utils)),Fc.mount(i)})};ee.create=function(n,t){return new ee(n,t)};ee.version=NS;var Rn=[],qh,fy,GS=!1;var py;function YS(){Rn.forEach(function(n){clearInterval(n.pid)}),Rn=[]}a(YS,"clearAutoScrolls");var wR=yy(function(n,t,e,i){if(t.scroll){var s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,d=t.scrollSensitivity,m=t.scrollSpeed,v=bs(),y=!1,x;fy!==e&&(fy=e,YS(),qh=t.scroll,x=t.scrollFn,qh===!0&&(qh=Uh(e,!0)));var E=0,A=qh;do{var C=A,k=An(C),H=k.top,M=k.bottom,q=k.left,V=k.right,$=k.width,Y=k.height,ot=void 0,gt=void 0,ht=C.scrollWidth,j=C.scrollHeight,it=Qt(C),xt=C.scrollLeft,z=C.scrollTop;C===v?(ot=$<ht&&(it.overflowX==="auto"||it.overflowX==="scroll"||it.overflowX==="visible"),gt=Y<j&&(it.overflowY==="auto"||it.overflowY==="scroll"||it.overflowY==="visible")):(ot=$<ht&&(it.overflowX==="auto"||it.overflowX==="scroll"),gt=Y<j&&(it.overflowY==="auto"||it.overflowY==="scroll"));var X=ot&&(Math.abs(V-s)<=d&&xt+$<ht)-(Math.abs(q-s)<=d&&!!xt),ft=gt&&(Math.abs(M-c)<=d&&z+Y<j)-(Math.abs(H-c)<=d&&!!z);if(!Rn[E])for(var st=0;st<=E;st++)Rn[st]||(Rn[st]={});(Rn[E].vx!=X||Rn[E].vy!=ft||Rn[E].el!==C)&&(Rn[E].el=C,Rn[E].vx=X,Rn[E].vy=ft,clearInterval(Rn[E].pid),(X!=0||ft!=0)&&(y=!0,Rn[E].pid=setInterval(function(){i&&this.layer===0&&ee.active._onTouchMove(py);var wt=Rn[this.layer].vy?Rn[this.layer].vy*m:0,P=Rn[this.layer].vx?Rn[this.layer].vx*m:0;typeof x=="function"&&x.call(ee.dragged.parentNode[qi],P,wt,n,py,Rn[this.layer].el)!=="continue"||_y(Rn[this.layer].el,P,wt)}.bind({layer:E}),24))),E++}while(t.bubbleScroll&&A!==v&&(A=Uh(A,!1)));GS=y}},30),Cy=a(function(t){var e=t.originalEvent,i=t.putSortable,s=t.dragEl,c=t.activeSortable,d=t.dispatchSortableEvent,m=t.hideGhostForTarget,v=t.unhideGhostForTarget;if(e){var y=i||c;m();var x=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,E=document.elementFromPoint(x.clientX,x.clientY);v(),y&&!y.el.contains(E)&&(d("spill"),this.onSpill({dragEl:s,putSortable:i}))}},"drop");function Ny(){}a(Ny,"Revert");Ny.prototype={startIndex:null,dragStart:a(function(t){var e=t.oldDraggableIndex;this.startIndex=e},"dragStart"),onSpill:a(function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=Ja(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(e,s):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},"onSpill"),drop:Cy};ro(Ny,{pluginName:"revertOnSpill"});function Oy(){}a(Oy,"Remove");Oy.prototype={onSpill:a(function(t){var e=t.dragEl,i=t.putSortable,s=i||this.sortable;s.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),s.animateAll()},"onSpill"),drop:Cy};ro(Oy,{pluginName:"removeOnSpill"});var Gh=ee;var Hc=class extends qn{static{a(this,"DraggableController")}connect(){this.sortable=Gh.create(this,{animation:150,draggable:".js-draggable-item",handle:".js-handle",onEnd:this.onReorder.bind(this)})}onReorder(t){document.querySelectorAll(".js-draggable-item").forEach(function(e,i){let s=e.querySelector(".js-position");s.value=i+1})}};var My=$n(hm());var zc=class extends Fe{static{a(this,"GeoSearchController")}static targets=["lat","lng","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,My.default)(this.fetchData.bind(this),500)}change(t){this.debouncedFetchData(t.target.value)}fetchData(t,e){fetch("https://nominatim.openstreetmap.org/search?"+new URLSearchParams({q:t,format:"jsonv2"})).then(i=>i.json()).then(i=>this.display(i))}buildMarkup(t){return t.map(function(e){return`
        <div>
          <span
            class="block p-2 cursor-pointer hover:bg-neutral-100"
            data-info='${JSON.stringify(e)}'
            data-action="click->geo-search#select"
          >${e.display_name}</span>
        </div>`}).join("")}display(t){this.resultsTarget.innerHTML=this.buildMarkup(t),this.bindNewActions(this.resultsTarget)}bindNewActions(t){Array.from(t.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(t){let e=JSON.parse(t.currentTarget.dataset.info);this.visibleFieldTarget.value=e.name||e.display_name,this.latTarget.value=e.lat,this.lngTarget.value=e.lon,this.resultsTarget.innerHTML=""}};var Py=$n(Dy());var Uc=class extends qn{static{a(this,"GlobalSearchController")}connect(){this.selectedResult=-1,this.debouncedSubmit=(0,Py.default)(this.submit,500),this.form=this.querySelector("form")}resultsTarget(){return this.querySelector("#global-results")}items(){return this.resultsTarget().querySelectorAll("a")}closeList(){this.selectedResult=-1,this.resultsTarget().innerHTML=""}prevItem(){this.selectedResult=Math.max(this.selectedResult-1,0)}nextItem(){this.selectedResult=Math.min(this.selectedResult+1,this.items().length-1)}markSelectedResult(){this.resultsTarget().innerHTML!=""&&this.items().forEach(this.markAsSelected.bind(this))}markAsSelected(t,e){e==this.selectedResult?(t.classList.add("bg-neutral-100"),t.scrollIntoView({block:"end"})):t.classList.remove("bg-neutral-100")}submit(){this.form.requestSubmit()}selectedLink(){return this.items()[this.selectedResult].href}keydown(t){switch(t.keyCode){case 13:location.href=this.selectedLink();break;case 38:t.preventDefault(),this.prevItem(),this.markSelectedResult();break;case 40:t.preventDefault(),this.nextItem(),this.markSelectedResult();break;case 27:t.preventDefault(),this.closeList();break;default:String.fromCharCode(t.keyCode).match(/(\w|\s)/g)&&this.debouncedSubmit()}}};var Yh=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],oo={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Xh={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Jh=Xh;var ri=a(function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},"pad"),Ri=a(function(n){return n===!0?1:0},"int");function fm(n,t){var e;return function(){var i=this,s=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,s)},t)}}a(fm,"debounce");var Qh=a(function(n){return n instanceof Array?n:[n]},"arrayify");function si(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}a(si,"toggleClass");function Ne(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}a(Ne,"createElement");function Vc(n){for(;n.firstChild;)n.removeChild(n.firstChild)}a(Vc,"clearNode");function pm(n,t){if(t(n))return n;if(n.parentNode)return pm(n.parentNode,t)}a(pm,"findParent");function Wc(n,t){var e=Ne("div","numInputWrapper"),i=Ne("input","numInput "+n),s=Ne("span","arrowUp"),c=Ne("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var d in t)i.setAttribute(d,t[d]);return e.appendChild(i),e.appendChild(s),e.appendChild(c),e}a(Wc,"createNumberInput");function Bi(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}a(Bi,"getEventTarget");var mm=a(function(){},"doNothing"),Zc=a(function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},"monthToStr"),qy={D:mm,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*Ri(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),s=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+e.firstDayOfWeek),s},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:mm,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:mm,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},ys={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Qa={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[Qa.w(n,t,e)]},F:function(n,t,e){return Zc(Qa.n(n,t,e)-1,!1,t)},G:function(n,t,e){return ri(Qa.h(n,t,e))},H:function(n){return ri(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[Ri(n.getHours()>11)]},M:function(n,t){return Zc(n.getMonth(),!0,t)},S:function(n){return ri(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return ri(n.getFullYear(),4)},d:function(n){return ri(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ri(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return ri(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}};var gm=a(function(n){var t=n.config,e=t===void 0?oo:t,i=n.l10n,s=i===void 0?Xh:i,c=n.isMobile,d=c===void 0?!1:c;return function(m,v,y){var x=y||s;return e.formatDate!==void 0&&!d?e.formatDate(m,v,x):v.split("").map(function(E,A,C){return Qa[E]&&C[A-1]!=="\\"?Qa[E](m,x,e):E!=="\\"?E:""}).join("")}},"createDateFormatter"),td=a(function(n){var t=n.config,e=t===void 0?oo:t,i=n.l10n,s=i===void 0?Xh:i;return function(c,d,m,v){if(!(c!==0&&!c)){var y=v||s,x,E=c;if(c instanceof Date)x=new Date(c.getTime());else if(typeof c!="string"&&c.toFixed!==void 0)x=new Date(c);else if(typeof c=="string"){var A=d||(e||oo).dateFormat,C=String(c).trim();if(C==="today")x=new Date,m=!0;else if(e&&e.parseDate)x=e.parseDate(c,A);else if(/Z$/.test(C)||/GMT$/.test(C))x=new Date(c);else{for(var k=void 0,H=[],M=0,q=0,V="";M<A.length;M++){var $=A[M],Y=$==="\\",ot=A[M-1]==="\\"||Y;if(ys[$]&&!ot){V+=ys[$];var gt=new RegExp(V).exec(c);gt&&(k=!0)&&H[$!=="Y"?"push":"unshift"]({fn:qy[$],val:gt[++q]})}else Y||(V+=".")}x=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),H.forEach(function(ht){var j=ht.fn,it=ht.val;return x=j(x,it,y)||x}),x=k?x:void 0}}if(!(x instanceof Date&&!isNaN(x.getTime()))){e.errorHandler(new Error("Invalid date provided: "+E));return}return m===!0&&x.setHours(0,0,0,0),x}}},"createDateParser");function ji(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}a(ji,"compareDates");var Ry=a(function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},"isBetween"),ed=a(function(n,t,e){return n*3600+t*60+e},"calculateSecondsSinceMidnight"),By=a(function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},"parseSeconds"),jy={DAY:864e5};function nd(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var s=n.minDate.getHours(),c=n.minDate.getMinutes(),d=n.minDate.getSeconds();t<s&&(t=s),t===s&&e<c&&(e=c),t===s&&e===c&&i<d&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var m=n.maxDate.getHours(),v=n.maxDate.getMinutes();t=Math.min(t,m),t===m&&(e=Math.min(v,e)),t===m&&e===v&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}a(nd,"getDefaultHours");typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=a(function(m){m&&Object.keys(m).forEach(function(v){return n[v]=m[v]})},"_loop_1"),s=0,c=t;s<c.length;s++){var d=c[s];i(d)}return n});var oi=function(){return oi=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},oi.apply(this,arguments)},Fy=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),s=0,t=0;t<e;t++)for(var c=arguments[t],d=0,m=c.length;d<m;d++,s++)i[s]=c[d];return i},XS=300;function JS(n,t){var e={config:oi(oi({},oo),Ln.defaultConfig),l10n:Jh};e.parseDate=td({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=H,e._setHoursFromDate=A,e._positionCalendar=ce,e.changeMonth=ct,e.changeYear=te,e.clear=Et,e.close=mt,e.onMouseOver=Gt,e._createElement=Ne,e.createDay=gt,e.destroy=Nt,e.isEnabled=se,e.jumpToDate=V,e.updateValue=Gn,e.open=zt,e.redraw=ze,e.set=Ue,e.setDate=me,e.toggle=Le;function i(){e.utils={getDaysInMonth:function(O,D){return O===void 0&&(O=e.currentMonth),D===void 0&&(D=e.currentYear),O===1&&(D%4===0&&D%100!==0||D%400===0)?29:e.l10n.daysInMonth[O]}}}a(i,"setupHelperFunctions");function s(){e.element=e.input=n,e.isOpen=!1,Yt(),Se(),Xe(),Ye(),i(),e.isMobile||ot(),q(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&A(e.config.noCalendar?e.latestSelectedDateObj:void 0),Gn(!1)),m();var O=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&O&&ce(),Zt("onReady")}a(s,"init");function c(){var O;return((O=e.calendarContainer)===null||O===void 0?void 0:O.getRootNode()).activeElement||document.activeElement}a(c,"getClosestActiveElement");function d(O){return O.bind(e)}a(d,"bindToInstance");function m(){var O=e.config;O.weekNumbers===!1&&O.showMonths===1||O.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var D=(e.days.offsetWidth+1)*O.showMonths;e.daysContainer.style.width=D+"px",e.calendarContainer.style.width=D+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}a(m,"setCalendarWidth");function v(O){if(e.selectedDates.length===0){var D=e.config.minDate===void 0||ji(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),W=nd(e.config);D.setHours(W.hours,W.minutes,W.seconds,D.getMilliseconds()),e.selectedDates=[D],e.latestSelectedDateObj=D}O!==void 0&&O.type!=="blur"&&Er(O);var J=e._input.value;E(),Gn(),e._input.value!==J&&e._debouncedChange()}a(v,"updateTime");function y(O,D){return O%12+12*Ri(D===e.l10n.amPM[1])}a(y,"ampm2military");function x(O){switch(O%24){case 0:case 12:return 12;default:return O%12}}a(x,"military2ampm");function E(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var O=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,D=(parseInt(e.minuteElement.value,10)||0)%60,W=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(O=y(O,e.amPM.textContent));var J=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&ji(e.latestSelectedDateObj,e.config.minDate,!0)===0,vt=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&ji(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var Tt=ed(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),Wt=ed(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),Mt=ed(O,D,W);if(Mt>Wt&&Mt<Tt){var Ht=By(Tt);O=Ht[0],D=Ht[1],W=Ht[2]}}else{if(vt){var rt=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;O=Math.min(O,rt.getHours()),O===rt.getHours()&&(D=Math.min(D,rt.getMinutes())),D===rt.getMinutes()&&(W=Math.min(W,rt.getSeconds()))}if(J){var Ft=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;O=Math.max(O,Ft.getHours()),O===Ft.getHours()&&D<Ft.getMinutes()&&(D=Ft.getMinutes()),D===Ft.getMinutes()&&(W=Math.max(W,Ft.getSeconds()))}}C(O,D,W)}}a(E,"setHoursFromInputs");function A(O){var D=O||e.latestSelectedDateObj;D&&D instanceof Date&&C(D.getHours(),D.getMinutes(),D.getSeconds())}a(A,"setHoursFromDate");function C(O,D,W){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(O%24,D,W||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ri(e.config.time_24hr?O:(12+O)%12+12*Ri(O%12===0)),e.minuteElement.value=ri(D),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[Ri(O>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ri(W)))}a(C,"setHours");function k(O){var D=Bi(O),W=parseInt(D.value)+(O.delta||0);(W/1e3>1||O.key==="Enter"&&!/[^\d]/.test(W.toString()))&&te(W)}a(k,"onYearInput");function H(O,D,W,J){if(D instanceof Array)return D.forEach(function(vt){return H(O,vt,W,J)});if(O instanceof Array)return O.forEach(function(vt){return H(vt,D,W,J)});O.addEventListener(D,W,J),e._handlers.push({remove:function(){return O.removeEventListener(D,W,J)}})}a(H,"bind");function M(){Zt("onChange")}a(M,"triggerChange");function q(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(W){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+W+"]"),function(J){return H(J,"click",e[W])})}),e.isMobile){oe();return}var O=fm(ye,50);if(e._debouncedChange=fm(M,XS),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&H(e.daysContainer,"mouseover",function(W){e.config.mode==="range"&&Gt(Bi(W))}),H(e._input,"keydown",fe),e.calendarContainer!==void 0&&H(e.calendarContainer,"keydown",fe),!e.config.inline&&!e.config.static&&H(window,"resize",O),window.ontouchstart!==void 0?H(window.document,"touchstart",Vt):H(window.document,"mousedown",Vt),H(window.document,"focus",Vt,{capture:!0}),e.config.clickOpens===!0&&(H(e._input,"focus",e.open),H(e._input,"click",e.open)),e.daysContainer!==void 0&&(H(e.monthNav,"click",zr),H(e.monthNav,["keyup","increment"],k),H(e.daysContainer,"click",Be)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var D=a(function(W){return Bi(W).select()},"selText");H(e.timeContainer,["increment"],v),H(e.timeContainer,"blur",v,{capture:!0}),H(e.timeContainer,"click",$),H([e.hourElement,e.minuteElement],["focus","click"],D),e.secondElement!==void 0&&H(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&H(e.amPM,"click",function(W){v(W)})}e.config.allowInput&&H(e._input,"blur",Te)}a(q,"bindEvents");function V(O,D){var W=O!==void 0?e.parseDate(O):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),J=e.currentYear,vt=e.currentMonth;try{W!==void 0&&(e.currentYear=W.getFullYear(),e.currentMonth=W.getMonth())}catch(Tt){Tt.message="Invalid date supplied: "+W,e.config.errorHandler(Tt)}D&&e.currentYear!==J&&(Zt("onYearChange"),ft()),D&&(e.currentYear!==J||e.currentMonth!==vt)&&Zt("onMonthChange"),e.redraw()}a(V,"jumpToDate");function $(O){var D=Bi(O);~D.className.indexOf("arrow")&&Y(O,D.classList.contains("arrowUp")?1:-1)}a($,"timeIncrement");function Y(O,D,W){var J=O&&Bi(O),vt=W||J&&J.parentNode&&J.parentNode.firstChild,Tt=de("increment");Tt.delta=D,vt&&vt.dispatchEvent(Tt)}a(Y,"incrementNumInput");function ot(){var O=window.document.createDocumentFragment();if(e.calendarContainer=Ne("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(O.appendChild(P()),e.innerContainer=Ne("div","flatpickr-innerContainer"),e.config.weekNumbers){var D=et(),W=D.weekWrapper,J=D.weekNumbers;e.innerContainer.appendChild(W),e.weekNumbers=J,e.weekWrapper=W}e.rContainer=Ne("div","flatpickr-rContainer"),e.rContainer.appendChild(I()),e.daysContainer||(e.daysContainer=Ne("div","flatpickr-days"),e.daysContainer.tabIndex=-1),X(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),O.appendChild(e.innerContainer)}e.config.enableTime&&O.appendChild(U()),si(e.calendarContainer,"rangeMode",e.config.mode==="range"),si(e.calendarContainer,"animate",e.config.animate===!0),si(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(O);var vt=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!vt&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var Tt=Ne("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(Tt,e.element),Tt.appendChild(e.element),e.altInput&&Tt.appendChild(e.altInput),Tt.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}a(ot,"build");function gt(O,D,W,J){var vt=se(D,!0),Tt=Ne("span",O,D.getDate().toString());return Tt.dateObj=D,Tt.$i=J,Tt.setAttribute("aria-label",e.formatDate(D,e.config.ariaDateFormat)),O.indexOf("hidden")===-1&&ji(D,e.now)===0&&(e.todayDateElem=Tt,Tt.classList.add("today"),Tt.setAttribute("aria-current","date")),vt?(Tt.tabIndex=-1,yn(D)&&(Tt.classList.add("selected"),e.selectedDateElem=Tt,e.config.mode==="range"&&(si(Tt,"startRange",e.selectedDates[0]&&ji(D,e.selectedDates[0],!0)===0),si(Tt,"endRange",e.selectedDates[1]&&ji(D,e.selectedDates[1],!0)===0),O==="nextMonthDay"&&Tt.classList.add("inRange")))):Tt.classList.add("flatpickr-disabled"),e.config.mode==="range"&&fi(D)&&!yn(D)&&Tt.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&O!=="prevMonthDay"&&J%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(D)+"</span>"),Zt("onDayCreate",Tt),Tt}a(gt,"createDay");function ht(O){O.focus(),e.config.mode==="range"&&Gt(O)}a(ht,"focusOnDayElem");function j(O){for(var D=O>0?0:e.config.showMonths-1,W=O>0?e.config.showMonths:-1,J=D;J!=W;J+=O)for(var vt=e.daysContainer.children[J],Tt=O>0?0:vt.children.length-1,Wt=O>0?vt.children.length:-1,Mt=Tt;Mt!=Wt;Mt+=O){var Ht=vt.children[Mt];if(Ht.className.indexOf("hidden")===-1&&se(Ht.dateObj))return Ht}}a(j,"getFirstAvailableDay");function it(O,D){for(var W=O.className.indexOf("Month")===-1?O.dateObj.getMonth():e.currentMonth,J=D>0?e.config.showMonths:-1,vt=D>0?1:-1,Tt=W-e.currentMonth;Tt!=J;Tt+=vt)for(var Wt=e.daysContainer.children[Tt],Mt=W-e.currentMonth===Tt?O.$i+D:D<0?Wt.children.length-1:0,Ht=Wt.children.length,rt=Mt;rt>=0&&rt<Ht&&rt!=(D>0?Ht:-1);rt+=vt){var Ft=Wt.children[rt];if(Ft.className.indexOf("hidden")===-1&&se(Ft.dateObj)&&Math.abs(O.$i-rt)>=Math.abs(D))return ht(Ft)}e.changeMonth(vt),xt(j(vt),0)}a(it,"getNextAvailableDay");function xt(O,D){var W=c(),J=he(W||document.body),vt=O!==void 0?O:J?W:e.selectedDateElem!==void 0&&he(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&he(e.todayDateElem)?e.todayDateElem:j(D>0?1:-1);vt===void 0?e._input.focus():J?it(vt,D):ht(vt)}a(xt,"focusOnDay");function z(O,D){for(var W=(new Date(O,D,1).getDay()-e.l10n.firstDayOfWeek+7)%7,J=e.utils.getDaysInMonth((D-1+12)%12,O),vt=e.utils.getDaysInMonth(D,O),Tt=window.document.createDocumentFragment(),Wt=e.config.showMonths>1,Mt=Wt?"prevMonthDay hidden":"prevMonthDay",Ht=Wt?"nextMonthDay hidden":"nextMonthDay",rt=J+1-W,Ft=0;rt<=J;rt++,Ft++)Tt.appendChild(gt("flatpickr-day "+Mt,new Date(O,D-1,rt),rt,Ft));for(rt=1;rt<=vt;rt++,Ft++)Tt.appendChild(gt("flatpickr-day",new Date(O,D,rt),rt,Ft));for(var _e=vt+1;_e<=42-W&&(e.config.showMonths===1||Ft%7!==0);_e++,Ft++)Tt.appendChild(gt("flatpickr-day "+Ht,new Date(O,D+1,_e%vt),_e,Ft));var dn=Ne("div","dayContainer");return dn.appendChild(Tt),dn}a(z,"buildMonthDays");function X(){if(e.daysContainer!==void 0){Vc(e.daysContainer),e.weekNumbers&&Vc(e.weekNumbers);for(var O=document.createDocumentFragment(),D=0;D<e.config.showMonths;D++){var W=new Date(e.currentYear,e.currentMonth,1);W.setMonth(e.currentMonth+D),O.appendChild(z(W.getFullYear(),W.getMonth()))}e.daysContainer.appendChild(O),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Gt()}}a(X,"buildDays");function ft(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var O=a(function(J){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&J<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&J>e.config.maxDate.getMonth())},"shouldBuildMonth");e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var D=0;D<12;D++)if(O(D)){var W=Ne("option","flatpickr-monthDropdown-month");W.value=new Date(e.currentYear,D).getMonth().toString(),W.textContent=Zc(D,e.config.shorthandCurrentMonth,e.l10n),W.tabIndex=-1,e.currentMonth===D&&(W.selected=!0),e.monthsDropdownContainer.appendChild(W)}}}a(ft,"buildMonthSwitch");function st(){var O=Ne("div","flatpickr-month"),D=window.document.createDocumentFragment(),W;e.config.showMonths>1||e.config.monthSelectorType==="static"?W=Ne("span","cur-month"):(e.monthsDropdownContainer=Ne("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),H(e.monthsDropdownContainer,"change",function(Wt){var Mt=Bi(Wt),Ht=parseInt(Mt.value,10);e.changeMonth(Ht-e.currentMonth),Zt("onMonthChange")}),ft(),W=e.monthsDropdownContainer);var J=Wc("cur-year",{tabindex:"-1"}),vt=J.getElementsByTagName("input")[0];vt.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&vt.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(vt.setAttribute("max",e.config.maxDate.getFullYear().toString()),vt.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var Tt=Ne("div","flatpickr-current-month");return Tt.appendChild(W),Tt.appendChild(J),D.appendChild(Tt),O.appendChild(D),{container:O,yearElement:vt,monthElement:W}}a(st,"buildMonth");function wt(){Vc(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var O=e.config.showMonths;O--;){var D=st();e.yearElements.push(D.yearElement),e.monthElements.push(D.monthElement),e.monthNav.appendChild(D.container)}e.monthNav.appendChild(e.nextMonthNav)}a(wt,"buildMonths");function P(){return e.monthNav=Ne("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Ne("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Ne("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,wt(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(O){e.__hidePrevMonthArrow!==O&&(si(e.prevMonthNav,"flatpickr-disabled",O),e.__hidePrevMonthArrow=O)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(O){e.__hideNextMonthArrow!==O&&(si(e.nextMonthNav,"flatpickr-disabled",O),e.__hideNextMonthArrow=O)}}),e.currentYearElement=e.yearElements[0],In(),e.monthNav}a(P,"buildMonthNav");function U(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var O=nd(e.config);e.timeContainer=Ne("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var D=Ne("span","flatpickr-time-separator",":"),W=Wc("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=W.getElementsByTagName("input")[0];var J=Wc("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=J.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ri(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?O.hours:x(O.hours)),e.minuteElement.value=ri(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():O.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(W),e.timeContainer.appendChild(D),e.timeContainer.appendChild(J),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var vt=Wc("flatpickr-second");e.secondElement=vt.getElementsByTagName("input")[0],e.secondElement.value=ri(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():O.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Ne("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(vt)}return e.config.time_24hr||(e.amPM=Ne("span","flatpickr-am-pm",e.l10n.amPM[Ri((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}a(U,"buildTime");function I(){e.weekdayContainer?Vc(e.weekdayContainer):e.weekdayContainer=Ne("div","flatpickr-weekdays");for(var O=e.config.showMonths;O--;){var D=Ne("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(D)}return Q(),e.weekdayContainer}a(I,"buildWeekdays");function Q(){if(e.weekdayContainer){var O=e.l10n.firstDayOfWeek,D=Fy(e.l10n.weekdays.shorthand);O>0&&O<D.length&&(D=Fy(D.splice(O,D.length),D.splice(0,O)));for(var W=e.config.showMonths;W--;)e.weekdayContainer.children[W].innerHTML=`
      <span class='flatpickr-weekday'>
        `+D.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}a(Q,"updateWeekdays");function et(){e.calendarContainer.classList.add("hasWeeks");var O=Ne("div","flatpickr-weekwrapper");O.appendChild(Ne("span","flatpickr-weekday",e.l10n.weekAbbreviation));var D=Ne("div","flatpickr-weeks");return O.appendChild(D),{weekWrapper:O,weekNumbers:D}}a(et,"buildWeeks");function ct(O,D){D===void 0&&(D=!0);var W=D?O:O-e.currentMonth;W<0&&e._hidePrevMonthArrow===!0||W>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=W,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Zt("onYearChange"),ft()),X(),Zt("onMonthChange"),In())}a(ct,"changeMonth");function Et(O,D){if(O===void 0&&(O=!0),D===void 0&&(D=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,D===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var W=nd(e.config),J=W.hours,vt=W.minutes,Tt=W.seconds;C(J,vt,Tt)}e.redraw(),O&&Zt("onChange")}a(Et,"clear");function mt(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),Zt("onClose")}a(mt,"close");function Nt(){e.config!==void 0&&Zt("onDestroy");for(var O=e._handlers.length;O--;)e._handlers[O].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var D=e.calendarContainer.parentNode;if(D.lastChild&&D.removeChild(D.lastChild),D.parentNode){for(;D.firstChild;)D.parentNode.insertBefore(D.firstChild,D);D.parentNode.removeChild(D)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(W){try{delete e[W]}catch{}})}a(Nt,"destroy");function $t(O){return e.calendarContainer.contains(O)}a($t,"isCalendarElem");function Vt(O){if(e.isOpen&&!e.config.inline){var D=Bi(O),W=$t(D),J=D===e.input||D===e.altInput||e.element.contains(D)||O.path&&O.path.indexOf&&(~O.path.indexOf(e.input)||~O.path.indexOf(e.altInput)),vt=!J&&!W&&!$t(O.relatedTarget),Tt=!e.config.ignoredFocusElements.some(function(Wt){return Wt.contains(D)});vt&&Tt&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&v(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}a(Vt,"documentClick");function te(O){if(!(!O||e.config.minDate&&O<e.config.minDate.getFullYear()||e.config.maxDate&&O>e.config.maxDate.getFullYear())){var D=O,W=e.currentYear!==D;e.currentYear=D||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),W&&(e.redraw(),Zt("onYearChange"),ft())}}a(te,"changeYear");function se(O,D){var W;D===void 0&&(D=!0);var J=e.parseDate(O,void 0,D);if(e.config.minDate&&J&&ji(J,e.config.minDate,D!==void 0?D:!e.minDateHasTime)<0||e.config.maxDate&&J&&ji(J,e.config.maxDate,D!==void 0?D:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(J===void 0)return!1;for(var vt=!!e.config.enable,Tt=(W=e.config.enable)!==null&&W!==void 0?W:e.config.disable,Wt=0,Mt=void 0;Wt<Tt.length;Wt++){if(Mt=Tt[Wt],typeof Mt=="function"&&Mt(J))return vt;if(Mt instanceof Date&&J!==void 0&&Mt.getTime()===J.getTime())return vt;if(typeof Mt=="string"){var Ht=e.parseDate(Mt,void 0,!0);return Ht&&Ht.getTime()===J.getTime()?vt:!vt}else if(typeof Mt=="object"&&J!==void 0&&Mt.from&&Mt.to&&J.getTime()>=Mt.from.getTime()&&J.getTime()<=Mt.to.getTime())return vt}return!vt}a(se,"isEnabled");function he(O){return e.daysContainer!==void 0?O.className.indexOf("hidden")===-1&&O.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(O):!1}a(he,"isInView");function Te(O){var D=O.target===e._input,W=e._input.value.trimEnd()!==Li();D&&W&&!(O.relatedTarget&&$t(O.relatedTarget))&&e.setDate(e._input.value,!0,O.target===e.altInput?e.config.altFormat:e.config.dateFormat)}a(Te,"onBlur");function fe(O){var D=Bi(O),W=e.config.wrap?n.contains(D):D===e._input,J=e.config.allowInput,vt=e.isOpen&&(!J||!W),Tt=e.config.inline&&W&&!J;if(O.keyCode===13&&W){if(J)return e.setDate(e._input.value,!0,D===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),D.blur();e.open()}else if($t(D)||vt||Tt){var Wt=!!e.timeContainer&&e.timeContainer.contains(D);switch(O.keyCode){case 13:Wt?(O.preventDefault(),v(),hn()):Be(O);break;case 27:O.preventDefault(),hn();break;case 8:case 46:W&&!e.config.allowInput&&(O.preventDefault(),e.clear());break;case 37:case 39:if(!Wt&&!W){O.preventDefault();var Mt=c();if(e.daysContainer!==void 0&&(J===!1||Mt&&he(Mt))){var Ht=O.keyCode===39?1:-1;O.ctrlKey?(O.stopPropagation(),ct(Ht),xt(j(1),0)):xt(void 0,Ht)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:O.preventDefault();var rt=O.keyCode===40?1:-1;e.daysContainer&&D.$i!==void 0||D===e.input||D===e.altInput?O.ctrlKey?(O.stopPropagation(),te(e.currentYear-rt),xt(j(1),0)):Wt||xt(void 0,rt*7):D===e.currentYearElement?te(e.currentYear-rt):e.config.enableTime&&(!Wt&&e.hourElement&&e.hourElement.focus(),v(O),e._debouncedChange());break;case 9:if(Wt){var Ft=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(nn){return nn}),_e=Ft.indexOf(D);if(_e!==-1){var dn=Ft[_e+(O.shiftKey?-1:1)];O.preventDefault(),(dn||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(D)&&O.shiftKey&&(O.preventDefault(),e._input.focus());break;default:break}}if(e.amPM!==void 0&&D===e.amPM)switch(O.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],E(),Gn();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],E(),Gn();break}(W||$t(D))&&Zt("onKeyDown",O)}a(fe,"onKeyDown");function Gt(O,D){if(D===void 0&&(D="flatpickr-day"),!(e.selectedDates.length!==1||O&&(!O.classList.contains(D)||O.classList.contains("flatpickr-disabled")))){for(var W=O?O.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),J=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),vt=Math.min(W,e.selectedDates[0].getTime()),Tt=Math.max(W,e.selectedDates[0].getTime()),Wt=!1,Mt=0,Ht=0,rt=vt;rt<Tt;rt+=jy.DAY)se(new Date(rt),!0)||(Wt=Wt||rt>vt&&rt<Tt,rt<J&&(!Mt||rt>Mt)?Mt=rt:rt>J&&(!Ht||rt<Ht)&&(Ht=rt));var Ft=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+D));Ft.forEach(function(_e){var dn=_e.dateObj,nn=dn.getTime(),We=Mt>0&&nn<Mt||Ht>0&&nn>Ht;if(We){_e.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(ln){_e.classList.remove(ln)});return}else if(Wt&&!We)return;["startRange","inRange","endRange","notAllowed"].forEach(function(ln){_e.classList.remove(ln)}),O!==void 0&&(O.classList.add(W<=e.selectedDates[0].getTime()?"startRange":"endRange"),J<W&&nn===J?_e.classList.add("startRange"):J>W&&nn===J&&_e.classList.add("endRange"),nn>=Mt&&(Ht===0||nn<=Ht)&&Ry(nn,J,W)&&_e.classList.add("inRange"))})}}a(Gt,"onMouseOver");function ye(){e.isOpen&&!e.config.static&&!e.config.inline&&ce()}a(ye,"onResize");function zt(O,D){if(D===void 0&&(D=e._positionElement),e.isMobile===!0){if(O){O.preventDefault();var W=Bi(O);W&&W.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),Zt("onOpen");return}else if(e._input.disabled||e.config.inline)return;var J=e.isOpen;e.isOpen=!0,J||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Zt("onOpen"),ce(D)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(O===void 0||!e.timeContainer.contains(O.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}a(zt,"open");function ie(O){return function(D){var W=e.config["_"+O+"Date"]=e.parseDate(D,e.config.dateFormat),J=e.config["_"+(O==="min"?"max":"min")+"Date"];W!==void 0&&(e[O==="min"?"minDateHasTime":"maxDateHasTime"]=W.getHours()>0||W.getMinutes()>0||W.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(vt){return se(vt)}),!e.selectedDates.length&&O==="min"&&A(W),Gn()),e.daysContainer&&(ze(),W!==void 0?e.currentYearElement[O]=W.getFullYear().toString():e.currentYearElement.removeAttribute(O),e.currentYearElement.disabled=!!J&&W!==void 0&&J.getFullYear()===W.getFullYear())}}a(ie,"minMaxDateSetter");function Yt(){var O=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],D=oi(oi({},JSON.parse(JSON.stringify(n.dataset||{}))),t),W={};e.config.parseDate=D.parseDate,e.config.formatDate=D.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(Ft){e.config._enable=Ve(Ft)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(Ft){e.config._disable=Ve(Ft)}});var J=D.mode==="time";if(!D.dateFormat&&(D.enableTime||J)){var vt=Ln.defaultConfig.dateFormat||oo.dateFormat;W.dateFormat=D.noCalendar||J?"H:i"+(D.enableSeconds?":S":""):vt+" H:i"+(D.enableSeconds?":S":"")}if(D.altInput&&(D.enableTime||J)&&!D.altFormat){var Tt=Ln.defaultConfig.altFormat||oo.altFormat;W.altFormat=D.noCalendar||J?"h:i"+(D.enableSeconds?":S K":" K"):Tt+(" h:i"+(D.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:ie("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:ie("max")});var Wt=a(function(Ft){return function(_e){e.config[Ft==="min"?"_minTime":"_maxTime"]=e.parseDate(_e,"H:i:S")}},"minMaxTimeSetter");Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:Wt("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:Wt("max")}),D.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,W,D);for(var Mt=0;Mt<O.length;Mt++)e.config[O[Mt]]=e.config[O[Mt]]===!0||e.config[O[Mt]]==="true";Yh.filter(function(Ft){return e.config[Ft]!==void 0}).forEach(function(Ft){e.config[Ft]=Qh(e.config[Ft]||[]).map(d)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Mt=0;Mt<e.config.plugins.length;Mt++){var Ht=e.config.plugins[Mt](e)||{};for(var rt in Ht)Yh.indexOf(rt)>-1?e.config[rt]=Qh(Ht[rt]).map(d).concat(e.config[rt]):typeof D[rt]>"u"&&(e.config[rt]=Ht[rt])}D.altInputClass||(e.config.altInputClass=Jt().className+" "+e.config.altInputClass),Zt("onParseConfig")}a(Yt,"parseConfig");function Jt(){return e.config.wrap?n.querySelector("[data-input]"):n}a(Jt,"getInputElem");function Se(){typeof e.config.locale!="object"&&typeof Ln.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=oi(oi({},Ln.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?Ln.l10ns[e.config.locale]:void 0),ys.D="("+e.l10n.weekdays.shorthand.join("|")+")",ys.l="("+e.l10n.weekdays.longhand.join("|")+")",ys.M="("+e.l10n.months.shorthand.join("|")+")",ys.F="("+e.l10n.months.longhand.join("|")+")",ys.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var O=oi(oi({},t),JSON.parse(JSON.stringify(n.dataset||{})));O.time_24hr===void 0&&Ln.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=gm(e),e.parseDate=td({config:e.config,l10n:e.l10n})}a(Se,"setupLocale");function ce(O){if(typeof e.config.position=="function")return void e.config.position(e,O);if(e.calendarContainer!==void 0){Zt("onPreCalendarPosition");var D=O||e._positionElement,W=Array.prototype.reduce.call(e.calendarContainer.children,function(Ci,or){return Ci+or.offsetHeight},0),J=e.calendarContainer.offsetWidth,vt=e.config.position.split(" "),Tt=vt[0],Wt=vt.length>1?vt[1]:null,Mt=D.getBoundingClientRect(),Ht=window.innerHeight-Mt.bottom,rt=Tt==="above"||Tt!=="below"&&Ht<W&&Mt.top>W,Ft=window.pageYOffset+Mt.top+(rt?-W-2:D.offsetHeight+2);if(si(e.calendarContainer,"arrowTop",!rt),si(e.calendarContainer,"arrowBottom",rt),!e.config.inline){var _e=window.pageXOffset+Mt.left,dn=!1,nn=!1;Wt==="center"?(_e-=(J-Mt.width)/2,dn=!0):Wt==="right"&&(_e-=J-Mt.width,nn=!0),si(e.calendarContainer,"arrowLeft",!dn&&!nn),si(e.calendarContainer,"arrowCenter",dn),si(e.calendarContainer,"arrowRight",nn);var We=window.document.body.offsetWidth-(window.pageXOffset+Mt.right),ln=_e+J>window.document.body.offsetWidth,_n=We+J>window.document.body.offsetWidth;if(si(e.calendarContainer,"rightMost",ln),!e.config.static)if(e.calendarContainer.style.top=Ft+"px",!ln)e.calendarContainer.style.left=_e+"px",e.calendarContainer.style.right="auto";else if(!_n)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=We+"px";else{var Hn=Oe();if(Hn===void 0)return;var ei=window.document.body.offsetWidth,rr=Math.max(0,ei/2-J/2),Ze=".flatpickr-calendar.centerMost:before",sr=".flatpickr-calendar.centerMost:after",pi=Hn.cssRules.length,$i="{left:"+Mt.left+"px;right:auto;}";si(e.calendarContainer,"rightMost",!1),si(e.calendarContainer,"centerMost",!0),Hn.insertRule(Ze+","+sr+$i,pi),e.calendarContainer.style.left=rr+"px",e.calendarContainer.style.right="auto"}}}}a(ce,"positionCalendar");function Oe(){for(var O=null,D=0;D<document.styleSheets.length;D++){var W=document.styleSheets[D];if(W.cssRules){try{W.cssRules}catch{continue}O=W;break}}return O??De()}a(Oe,"getDocumentStyleSheet");function De(){var O=document.createElement("style");return document.head.appendChild(O),O.sheet}a(De,"createStyleSheet");function ze(){e.config.noCalendar||e.isMobile||(ft(),In(),X())}a(ze,"redraw");function hn(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}a(hn,"focusAndClose");function Be(O){O.preventDefault(),O.stopPropagation();var D=a(function(Ft){return Ft.classList&&Ft.classList.contains("flatpickr-day")&&!Ft.classList.contains("flatpickr-disabled")&&!Ft.classList.contains("notAllowed")},"isSelectable"),W=pm(Bi(O),D);if(W!==void 0){var J=W,vt=e.latestSelectedDateObj=new Date(J.dateObj.getTime()),Tt=(vt.getMonth()<e.currentMonth||vt.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=J,e.config.mode==="single")e.selectedDates=[vt];else if(e.config.mode==="multiple"){var Wt=yn(vt);Wt?e.selectedDates.splice(parseInt(Wt),1):e.selectedDates.push(vt)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=vt,e.selectedDates.push(vt),ji(vt,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(Ft,_e){return Ft.getTime()-_e.getTime()}));if(E(),Tt){var Mt=e.currentYear!==vt.getFullYear();e.currentYear=vt.getFullYear(),e.currentMonth=vt.getMonth(),Mt&&(Zt("onYearChange"),ft()),Zt("onMonthChange")}if(In(),X(),Gn(),!Tt&&e.config.mode!=="range"&&e.config.showMonths===1?ht(J):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var Ht=e.config.mode==="single"&&!e.config.enableTime,rt=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(Ht||rt)&&hn()}M()}}a(Be,"selectDate");var Ae={locale:[Se,Q],showMonths:[wt,m,I],minDate:[V],maxDate:[V],positionElement:[He],clickOpens:[function(){e.config.clickOpens===!0?(H(e._input,"focus",e.open),H(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Ue(O,D){if(O!==null&&typeof O=="object"){Object.assign(e.config,O);for(var W in O)Ae[W]!==void 0&&Ae[W].forEach(function(J){return J()})}else e.config[O]=D,Ae[O]!==void 0?Ae[O].forEach(function(J){return J()}):Yh.indexOf(O)>-1&&(e.config[O]=Qh(D));e.redraw(),Gn(!0)}a(Ue,"set");function an(O,D){var W=[];if(O instanceof Array)W=O.map(function(J){return e.parseDate(J,D)});else if(O instanceof Date||typeof O=="number")W=[e.parseDate(O,D)];else if(typeof O=="string")switch(e.config.mode){case"single":case"time":W=[e.parseDate(O,D)];break;case"multiple":W=O.split(e.config.conjunction).map(function(J){return e.parseDate(J,D)});break;case"range":W=O.split(e.l10n.rangeSeparator).map(function(J){return e.parseDate(J,D)});break;default:break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(O)));e.selectedDates=e.config.allowInvalidPreload?W:W.filter(function(J){return J instanceof Date&&se(J,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(J,vt){return J.getTime()-vt.getTime()})}a(an,"setSelectedDate");function me(O,D,W){if(D===void 0&&(D=!1),W===void 0&&(W=e.config.dateFormat),O!==0&&!O||O instanceof Array&&O.length===0)return e.clear(D);an(O,W),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),V(void 0,D),A(),e.selectedDates.length===0&&e.clear(!1),Gn(D),D&&Zt("onChange")}a(me,"setDate");function Ve(O){return O.slice().map(function(D){return typeof D=="string"||typeof D=="number"||D instanceof Date?e.parseDate(D,void 0,!0):D&&typeof D=="object"&&D.from&&D.to?{from:e.parseDate(D.from,void 0),to:e.parseDate(D.to,void 0)}:D}).filter(function(D){return D})}a(Ve,"parseDateRules");function Ye(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var O=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);O&&an(O,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}a(Ye,"setupDates");function Xe(){if(e.input=Jt(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Ne(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),He()}a(Xe,"setupInputs");function He(){e._positionElement=e.config.positionElement||e._input}a(He,"updatePositionElement");function oe(){var O=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Ne("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=O,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=O==="datetime-local"?"Y-m-d\\TH:i:S":O==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}H(e.mobileInput,"change",function(D){e.setDate(Bi(D).value,!1,e.mobileFormatStr),Zt("onChange"),Zt("onClose")})}a(oe,"setupMobile");function Le(O){if(e.isOpen===!0)return e.close();e.open(O)}a(Le,"toggle");function Zt(O,D){if(e.config!==void 0){var W=e.config[O];if(W!==void 0&&W.length>0)for(var J=0;W[J]&&J<W.length;J++)W[J](e.selectedDates,e.input.value,e,D);O==="onChange"&&(e.input.dispatchEvent(de("change")),e.input.dispatchEvent(de("input")))}}a(Zt,"triggerEvent");function de(O){var D=document.createEvent("Event");return D.initEvent(O,!0,!0),D}a(de,"createEvent");function yn(O){for(var D=0;D<e.selectedDates.length;D++){var W=e.selectedDates[D];if(W instanceof Date&&ji(W,O)===0)return""+D}return!1}a(yn,"isDateSelected");function fi(O){return e.config.mode!=="range"||e.selectedDates.length<2?!1:ji(O,e.selectedDates[0])>=0&&ji(O,e.selectedDates[1])<=0}a(fi,"isDateInRange");function In(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(O,D){var W=new Date(e.currentYear,e.currentMonth,1);W.setMonth(e.currentMonth+D),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[D].textContent=Zc(W.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=W.getMonth().toString(),O.value=W.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}a(In,"updateNavigationCurrentMonth");function Li(O){var D=O||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(W){return e.formatDate(W,D)}).filter(function(W,J,vt){return e.config.mode!=="range"||e.config.enableTime||vt.indexOf(W)===J}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}a(Li,"getDateStr");function Gn(O){O===void 0&&(O=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Li(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Li(e.config.altFormat)),O!==!1&&Zt("onValueUpdate")}a(Gn,"updateValue");function zr(O){var D=Bi(O),W=e.prevMonthNav.contains(D),J=e.nextMonthNav.contains(D);W||J?ct(W?-1:1):e.yearElements.indexOf(D)>=0?D.select():D.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):D.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}a(zr,"onMonthNavClick");function Er(O){O.preventDefault();var D=O.type==="keydown",W=Bi(O),J=W;e.amPM!==void 0&&W===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Ri(e.amPM.textContent===e.l10n.amPM[0])]);var vt=parseFloat(J.getAttribute("min")),Tt=parseFloat(J.getAttribute("max")),Wt=parseFloat(J.getAttribute("step")),Mt=parseInt(J.value,10),Ht=O.delta||(D?O.which===38?1:-1:0),rt=Mt+Wt*Ht;if(typeof J.value<"u"&&J.value.length===2){var Ft=J===e.hourElement,_e=J===e.minuteElement;rt<vt?(rt=Tt+rt+Ri(!Ft)+(Ri(Ft)&&Ri(!e.amPM)),_e&&Y(void 0,-1,e.hourElement)):rt>Tt&&(rt=J===e.hourElement?rt-Tt-Ri(!e.amPM):vt,_e&&Y(void 0,1,e.hourElement)),e.amPM&&Ft&&(Wt===1?rt+Mt===23:Math.abs(rt-Mt)>Wt)&&(e.amPM.textContent=e.l10n.amPM[Ri(e.amPM.textContent===e.l10n.amPM[0])]),J.value=ri(rt)}}return a(Er,"timeWrapper"),s(),e}a(JS,"FlatpickrInstance");function tl(n,t){for(var e=Array.prototype.slice.call(n).filter(function(d){return d instanceof HTMLElement}),i=[],s=0;s<e.length;s++){var c=e[s];try{if(c.getAttribute("data-fp-omit")!==null)continue;c._flatpickr!==void 0&&(c._flatpickr.destroy(),c._flatpickr=void 0),c._flatpickr=JS(c,t||{}),i.push(c._flatpickr)}catch(d){console.error(d)}}return i.length===1?i[0]:i}a(tl,"_flatpickr");typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return tl(this,n)},HTMLElement.prototype.flatpickr=function(n){return tl([this],n)});var Ln=a(function(n,t){return typeof n=="string"?tl(window.document.querySelectorAll(n),t):n instanceof Node?tl([n],t):tl(n,t)},"flatpickr");Ln.defaultConfig={};Ln.l10ns={en:oi({},Jh),default:oi({},Jh)};Ln.localize=function(n){Ln.l10ns.default=oi(oi({},Ln.l10ns.default),n)};Ln.setDefaults=function(n){Ln.defaultConfig=oi(oi({},Ln.defaultConfig),n)};Ln.parseDate=td({});Ln.formatDate=gm({});Ln.compareDates=ji;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return tl(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=Ln);var Hy=Ln;var $c=class extends Fe{static{a(this,"DatetimeSelectController")}connect(){let t={enableTime:!0,time_24hr:!0,defaultMinute:0},e=Hy(this.querySelector("input"),Object.assign(t,this.appendage()))}appendage(){return this.dataset.inline?{inline:!0}:{}}};var Kc=class extends Fe{static{a(this,"ImagePreviewController")}static targets=["container"];preview(t){let e=t.currentTarget.files[0];if(!e.type.startsWith("image/"))return;let i=this.imageElement(e);this.containerTarget.innerHTML="",this.containerTarget.appendChild(i),this.generatePreview(e,i)}generatePreview(t,e){let i=new FileReader;i.onload=function(s){return function(c){s.src=c.target.result}}(e),i.readAsDataURL(t)}imageElement(t){let e=document.createElement("img");return e.file=t,e}};var Gc=class extends qn{static{a(this,"LeadFiltersController")}static targets=["filter"];connect(){console.log(this.filterTargets)}};var Yc=class extends qn{static{a(this,"LeadGroupController")}connect(){this.sortable=Gh.create(this,{animation:150,group:"lead_groups",onEnd:this.onReorder.bind(this)})}createPatchForm(t){let e="";for(var i in t)e+=`<input type="hidden" name="lead[${i}]" value="${t[i]}">`;let s=`<form><input type="hidden" name="_method" value="PATCH" />${e}</form>`;return new DOMParser().parseFromString(s,"text/html").querySelector("form")}getCookieValue(t){if(t!=null){let i=(document.cookie?document.cookie.split("; "):[]).find(s=>s.startsWith(t));if(i){let s=i.split("=").slice(1).join("=");return s?decodeURIComponent(s):void 0}}}getMetaContent(t){let e=document.querySelector(`meta[name="${t}"]`);return e&&e.content}async performSubmit(t,e){let i=this.getCookieValue(this.getMetaContent("csrf-param"))||this.getMetaContent("csrf-token"),s=new FormData(t),c=e.replace("lead_","");return fetch(`/admin/my_leads/${c}`,{method:"POST",headers:{Accept:"application/json","X-CSRF-Token":i},body:s})}alertErrorResponse(t){return async function(e){if(e.status==200)window.Turbo.renderStreamMessage(await e.text());else{let i=await e.json();alert(`Ett fel uppstod!
`+i.errors)}}}async onReorder(t){let e=this.createPatchForm({status:t.to.dataset.groupName,position:t.newIndex+1});await this.performSubmit(e,t.item.id).then(this.alertErrorResponse(t.item))}};var rd=$n(Uy());var Xc=class extends qn{static{a(this,"LeafletController")}connect(){this.markers=JSON.parse(this.dataset.markers),this.markers.length&&(this.initializeMap(),this.addMarkers(),this.setZoomLevel())}initializeMap(){this.map=rd.default.map(this.firstElementChild),rd.default.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map)}addMarkers(){this.markers.forEach(this.addMarker.bind(this))}addMarker(t){rd.default.marker(t).addTo(this.map)}setZoomLevel(){this.markers.length>1?this.map.fitBounds(this.markers):this.map.setView(this.markers[0],7)}};var Jc=class extends qn{static{a(this,"PastClosedAtController")}onSubmit(t){this.closedAtDate()-Date.now()<=0&&confirm("Vill du verkligen spara auktionen med ett st\xE4ngningsdatum som passerats?")==!1&&t.preventDefault()}closedAtDate(){return Date.parse(document.getElementById("auction_closed_at").value)}};var Vy=$n(hm());var Qc=class extends Fe{static{a(this,"RelationSearchController")}static targets=["field","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,Vy.default)(this.fetchData.bind(this),500)}change(t){this.debouncedFetchData(t.target.value)}fetchData(t,e){fetch("/admin/relations?"+new URLSearchParams({m:this.modelValue,q:t})).then(i=>i.text()).then(i=>this.display(i))}display(t){this.resultsTarget.innerHTML=t,this.bindNewActions(this.resultsTarget)}bindNewActions(t){Array.from(t.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(t){let e=t.currentTarget;this.visibleFieldTarget.value=e.getAttribute("name"),this.fieldTarget.value=e.id,this.resultsTarget.innerHTML=""}};var tu=class extends qn{static{a(this,"ReserveGuardController")}onSubmit(t){let e=document.getElementById("auction_reserve_price_without_cents");parseInt(e.value.replace(" ",""))<1e5&&confirm("Reserv f\xF6r den h\xE4r auktionen \xE4r l\xE4gre \xE4n 100.000SEK. Vill du fortfarande spara?")==!1&&t.preventDefault()}};var QS=typeof global=="object"&&global&&global.Object===Object&&global,sd=QS;var tA=typeof self=="object"&&self&&self.Object===Object&&self,eA=sd||tA||Function("return this")(),Cn=eA;var nA=Cn.Symbol,vr=nA;var Wy=Object.prototype,iA=Wy.hasOwnProperty,rA=Wy.toString,eu=vr?vr.toStringTag:void 0;function sA(n){var t=iA.call(n,eu),e=n[eu];try{n[eu]=void 0;var i=!0}catch{}var s=rA.call(n);return i&&(t?n[eu]=e:delete n[eu]),s}a(sA,"getRawTag");var Zy=sA;var oA=Object.prototype,aA=oA.toString;function lA(n){return aA.call(n)}a(lA,"objectToString");var $y=lA;var cA="[object Null]",uA="[object Undefined]",Ky=vr?vr.toStringTag:void 0;function hA(n){return n==null?n===void 0?uA:cA:Ky&&Ky in Object(n)?Zy(n):$y(n)}a(hA,"baseGetTag");var jr=hA;function dA(n){return n!=null&&typeof n=="object"}a(dA,"isObjectLike");var ti=dA;var fA=Array.isArray,br=fA;function pA(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}a(pA,"isObject");var ai=pA;function mA(n){return n}a(mA,"identity");var od=mA;var gA="[object AsyncFunction]",vA="[object Function]",bA="[object GeneratorFunction]",yA="[object Proxy]";function _A(n){if(!ai(n))return!1;var t=jr(n);return t==vA||t==bA||t==gA||t==yA}a(_A,"isFunction");var el=_A;var wA=Cn["__core-js_shared__"],ad=wA;var Gy=function(){var n=/[^.]+$/.exec(ad&&ad.keys&&ad.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function xA(n){return!!Gy&&Gy in n}a(xA,"isMasked");var Yy=xA;var EA=Function.prototype,TA=EA.toString;function SA(n){if(n!=null){try{return TA.call(n)}catch{}try{return n+""}catch{}}return""}a(SA,"toSource");var _s=SA;var AA=/[\\^$.*+?()[\]{}|]/g,LA=/^\[object .+?Constructor\]$/,CA=Function.prototype,NA=Object.prototype,OA=CA.toString,kA=NA.hasOwnProperty,MA=RegExp("^"+OA.call(kA).replace(AA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IA(n){if(!ai(n)||Yy(n))return!1;var t=el(n)?MA:LA;return t.test(_s(n))}a(IA,"baseIsNative");var Xy=IA;function DA(n,t){return n?.[t]}a(DA,"getValue");var Jy=DA;function PA(n,t){var e=Jy(n,t);return Xy(e)?e:void 0}a(PA,"getNative");var Fi=PA;var qA=Fi(Cn,"WeakMap"),ld=qA;var Qy=Object.create,RA=function(){function n(){}return a(n,"object"),function(t){if(!ai(t))return{};if(Qy)return Qy(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),t0=RA;function BA(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}a(BA,"apply");var e0=BA;function jA(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}a(jA,"copyArray");var cd=jA;var FA=800,HA=16,zA=Date.now;function UA(n){var t=0,e=0;return function(){var i=zA(),s=HA-(i-e);if(e=i,s>0){if(++t>=FA)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}a(UA,"shortOut");var n0=UA;function VA(n){return function(){return n}}a(VA,"constant");var i0=VA;var WA=function(){try{var n=Fi(Object,"defineProperty");return n({},"",{}),n}catch{}}(),nl=WA;var ZA=nl?function(n,t){return nl(n,"toString",{configurable:!0,enumerable:!1,value:i0(t),writable:!0})}:od,r0=ZA;var $A=n0(r0),s0=$A;function KA(n,t){for(var e=-1,i=n==null?0:n.length;++e<i&&t(n[e],e,n)!==!1;);return n}a(KA,"arrayEach");var o0=KA;var GA=9007199254740991,YA=/^(?:0|[1-9]\d*)$/;function XA(n,t){var e=typeof n;return t=t??GA,!!t&&(e=="number"||e!="symbol"&&YA.test(n))&&n>-1&&n%1==0&&n<t}a(XA,"isIndex");var ud=XA;function JA(n,t,e){t=="__proto__"&&nl?nl(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}a(JA,"baseAssignValue");var il=JA;function QA(n,t){return n===t||n!==n&&t!==t}a(QA,"eq");var Jr=QA;var tL=Object.prototype,eL=tL.hasOwnProperty;function nL(n,t,e){var i=n[t];(!(eL.call(n,t)&&Jr(i,e))||e===void 0&&!(t in n))&&il(n,t,e)}a(nL,"assignValue");var hd=nL;function iL(n,t,e,i){var s=!e;e||(e={});for(var c=-1,d=t.length;++c<d;){var m=t[c],v=i?i(e[m],n[m],m,e,n):void 0;v===void 0&&(v=n[m]),s?il(e,m,v):hd(e,m,v)}return e}a(iL,"copyObject");var Qr=iL;var a0=Math.max;function rL(n,t,e){return t=a0(t===void 0?n.length-1:t,0),function(){for(var i=arguments,s=-1,c=a0(i.length-t,0),d=Array(c);++s<c;)d[s]=i[t+s];s=-1;for(var m=Array(t+1);++s<t;)m[s]=i[s];return m[t]=e(d),e0(n,this,m)}}a(rL,"overRest");var l0=rL;function sL(n,t){return s0(l0(n,t,od),n+"")}a(sL,"baseRest");var c0=sL;var oL=9007199254740991;function aL(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=oL}a(aL,"isLength");var dd=aL;function lL(n){return n!=null&&dd(n.length)&&!el(n)}a(lL,"isArrayLike");var ao=lL;function cL(n,t,e){if(!ai(e))return!1;var i=typeof t;return(i=="number"?ao(e)&&ud(t,e.length):i=="string"&&t in e)?Jr(e[t],n):!1}a(cL,"isIterateeCall");var u0=cL;function uL(n){return c0(function(t,e){var i=-1,s=e.length,c=s>1?e[s-1]:void 0,d=s>2?e[2]:void 0;for(c=n.length>3&&typeof c=="function"?(s--,c):void 0,d&&u0(e[0],e[1],d)&&(c=s<3?void 0:c,s=1),t=Object(t);++i<s;){var m=e[i];m&&n(t,m,i,c)}return t})}a(uL,"createAssigner");var h0=uL;var hL=Object.prototype;function dL(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||hL;return n===e}a(dL,"isPrototype");var rl=dL;function fL(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}a(fL,"baseTimes");var d0=fL;var pL="[object Arguments]";function mL(n){return ti(n)&&jr(n)==pL}a(mL,"baseIsArguments");var vm=mL;var f0=Object.prototype,gL=f0.hasOwnProperty,vL=f0.propertyIsEnumerable,bL=vm(function(){return arguments}())?vm:function(n){return ti(n)&&gL.call(n,"callee")&&!vL.call(n,"callee")},nu=bL;function yL(){return!1}a(yL,"stubFalse");var p0=yL;var v0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,m0=v0&&typeof module=="object"&&module&&!module.nodeType&&module,_L=m0&&m0.exports===v0,g0=_L?Cn.Buffer:void 0,wL=g0?g0.isBuffer:void 0,xL=wL||p0,ws=xL;var EL="[object Arguments]",TL="[object Array]",SL="[object Boolean]",AL="[object Date]",LL="[object Error]",CL="[object Function]",NL="[object Map]",OL="[object Number]",kL="[object Object]",ML="[object RegExp]",IL="[object Set]",DL="[object String]",PL="[object WeakMap]",qL="[object ArrayBuffer]",RL="[object DataView]",BL="[object Float32Array]",jL="[object Float64Array]",FL="[object Int8Array]",HL="[object Int16Array]",zL="[object Int32Array]",UL="[object Uint8Array]",VL="[object Uint8ClampedArray]",WL="[object Uint16Array]",ZL="[object Uint32Array]",sn={};sn[BL]=sn[jL]=sn[FL]=sn[HL]=sn[zL]=sn[UL]=sn[VL]=sn[WL]=sn[ZL]=!0;sn[EL]=sn[TL]=sn[qL]=sn[SL]=sn[RL]=sn[AL]=sn[LL]=sn[CL]=sn[NL]=sn[OL]=sn[kL]=sn[ML]=sn[IL]=sn[DL]=sn[PL]=!1;function $L(n){return ti(n)&&dd(n.length)&&!!sn[jr(n)]}a($L,"baseIsTypedArray");var b0=$L;function KL(n){return function(t){return n(t)}}a(KL,"baseUnary");var sl=KL;var y0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,iu=y0&&typeof module=="object"&&module&&!module.nodeType&&module,GL=iu&&iu.exports===y0,bm=GL&&sd.process,YL=function(){try{var n=iu&&iu.require&&iu.require("util").types;return n||bm&&bm.binding&&bm.binding("util")}catch{}}(),xs=YL;var _0=xs&&xs.isTypedArray,XL=_0?sl(_0):b0,ol=XL;var JL=Object.prototype,QL=JL.hasOwnProperty;function tC(n,t){var e=br(n),i=!e&&nu(n),s=!e&&!i&&ws(n),c=!e&&!i&&!s&&ol(n),d=e||i||s||c,m=d?d0(n.length,String):[],v=m.length;for(var y in n)(t||QL.call(n,y))&&!(d&&(y=="length"||s&&(y=="offset"||y=="parent")||c&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||ud(y,v)))&&m.push(y);return m}a(tC,"arrayLikeKeys");var fd=tC;function eC(n,t){return function(e){return n(t(e))}}a(eC,"overArg");var pd=eC;var nC=pd(Object.keys,Object),w0=nC;var iC=Object.prototype,rC=iC.hasOwnProperty;function sC(n){if(!rl(n))return w0(n);var t=[];for(var e in Object(n))rC.call(n,e)&&e!="constructor"&&t.push(e);return t}a(sC,"baseKeys");var x0=sC;function oC(n){return ao(n)?fd(n):x0(n)}a(oC,"keys");var al=oC;function aC(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}a(aC,"nativeKeysIn");var E0=aC;var lC=Object.prototype,cC=lC.hasOwnProperty;function uC(n){if(!ai(n))return E0(n);var t=rl(n),e=[];for(var i in n)i=="constructor"&&(t||!cC.call(n,i))||e.push(i);return e}a(uC,"baseKeysIn");var T0=uC;function hC(n){return ao(n)?fd(n,!0):T0(n)}a(hC,"keysIn");var ts=hC;var dC=Fi(Object,"create"),Es=dC;function fC(){this.__data__=Es?Es(null):{},this.size=0}a(fC,"hashClear");var S0=fC;function pC(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}a(pC,"hashDelete");var A0=pC;var mC="__lodash_hash_undefined__",gC=Object.prototype,vC=gC.hasOwnProperty;function bC(n){var t=this.__data__;if(Es){var e=t[n];return e===mC?void 0:e}return vC.call(t,n)?t[n]:void 0}a(bC,"hashGet");var L0=bC;var yC=Object.prototype,_C=yC.hasOwnProperty;function wC(n){var t=this.__data__;return Es?t[n]!==void 0:_C.call(t,n)}a(wC,"hashHas");var C0=wC;var xC="__lodash_hash_undefined__";function EC(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Es&&t===void 0?xC:t,this}a(EC,"hashSet");var N0=EC;function ll(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(ll,"Hash");ll.prototype.clear=S0;ll.prototype.delete=A0;ll.prototype.get=L0;ll.prototype.has=C0;ll.prototype.set=N0;var ym=ll;function TC(){this.__data__=[],this.size=0}a(TC,"listCacheClear");var O0=TC;function SC(n,t){for(var e=n.length;e--;)if(Jr(n[e][0],t))return e;return-1}a(SC,"assocIndexOf");var lo=SC;var AC=Array.prototype,LC=AC.splice;function CC(n){var t=this.__data__,e=lo(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():LC.call(t,e,1),--this.size,!0}a(CC,"listCacheDelete");var k0=CC;function NC(n){var t=this.__data__,e=lo(t,n);return e<0?void 0:t[e][1]}a(NC,"listCacheGet");var M0=NC;function OC(n){return lo(this.__data__,n)>-1}a(OC,"listCacheHas");var I0=OC;function kC(n,t){var e=this.__data__,i=lo(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}a(kC,"listCacheSet");var D0=kC;function cl(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(cl,"ListCache");cl.prototype.clear=O0;cl.prototype.delete=k0;cl.prototype.get=M0;cl.prototype.has=I0;cl.prototype.set=D0;var co=cl;var MC=Fi(Cn,"Map"),uo=MC;function IC(){this.size=0,this.__data__={hash:new ym,map:new(uo||co),string:new ym}}a(IC,"mapCacheClear");var P0=IC;function DC(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}a(DC,"isKeyable");var q0=DC;function PC(n,t){var e=n.__data__;return q0(t)?e[typeof t=="string"?"string":"hash"]:e.map}a(PC,"getMapData");var ho=PC;function qC(n){var t=ho(this,n).delete(n);return this.size-=t?1:0,t}a(qC,"mapCacheDelete");var R0=qC;function RC(n){return ho(this,n).get(n)}a(RC,"mapCacheGet");var B0=RC;function BC(n){return ho(this,n).has(n)}a(BC,"mapCacheHas");var j0=BC;function jC(n,t){var e=ho(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}a(jC,"mapCacheSet");var F0=jC;function ul(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}a(ul,"MapCache");ul.prototype.clear=P0;ul.prototype.delete=R0;ul.prototype.get=B0;ul.prototype.has=j0;ul.prototype.set=F0;var md=ul;function FC(n,t){for(var e=-1,i=t.length,s=n.length;++e<i;)n[s+e]=t[e];return n}a(FC,"arrayPush");var gd=FC;var HC=pd(Object.getPrototypeOf,Object),hl=HC;var zC="[object Object]",UC=Function.prototype,VC=Object.prototype,H0=UC.toString,WC=VC.hasOwnProperty,ZC=H0.call(Object);function $C(n){if(!ti(n)||jr(n)!=zC)return!1;var t=hl(n);if(t===null)return!0;var e=WC.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&H0.call(e)==ZC}a($C,"isPlainObject");var z0=$C;function KC(){this.__data__=new co,this.size=0}a(KC,"stackClear");var U0=KC;function GC(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}a(GC,"stackDelete");var V0=GC;function YC(n){return this.__data__.get(n)}a(YC,"stackGet");var W0=YC;function XC(n){return this.__data__.has(n)}a(XC,"stackHas");var Z0=XC;var JC=200;function QC(n,t){var e=this.__data__;if(e instanceof co){var i=e.__data__;if(!uo||i.length<JC-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new md(i)}return e.set(n,t),this.size=e.size,this}a(QC,"stackSet");var $0=QC;function dl(n){var t=this.__data__=new co(n);this.size=t.size}a(dl,"Stack");dl.prototype.clear=U0;dl.prototype.delete=V0;dl.prototype.get=W0;dl.prototype.has=Z0;dl.prototype.set=$0;var fo=dl;function tN(n,t){return n&&Qr(t,al(t),n)}a(tN,"baseAssign");var K0=tN;function eN(n,t){return n&&Qr(t,ts(t),n)}a(eN,"baseAssignIn");var G0=eN;var Q0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Y0=Q0&&typeof module=="object"&&module&&!module.nodeType&&module,nN=Y0&&Y0.exports===Q0,X0=nN?Cn.Buffer:void 0,J0=X0?X0.allocUnsafe:void 0;function iN(n,t){if(t)return n.slice();var e=n.length,i=J0?J0(e):new n.constructor(e);return n.copy(i),i}a(iN,"cloneBuffer");var vd=iN;function rN(n,t){for(var e=-1,i=n==null?0:n.length,s=0,c=[];++e<i;){var d=n[e];t(d,e,n)&&(c[s++]=d)}return c}a(rN,"arrayFilter");var t1=rN;function sN(){return[]}a(sN,"stubArray");var bd=sN;var oN=Object.prototype,aN=oN.propertyIsEnumerable,e1=Object.getOwnPropertySymbols,lN=e1?function(n){return n==null?[]:(n=Object(n),t1(e1(n),function(t){return aN.call(n,t)}))}:bd,fl=lN;function cN(n,t){return Qr(n,fl(n),t)}a(cN,"copySymbols");var n1=cN;var uN=Object.getOwnPropertySymbols,hN=uN?function(n){for(var t=[];n;)gd(t,fl(n)),n=hl(n);return t}:bd,yd=hN;function dN(n,t){return Qr(n,yd(n),t)}a(dN,"copySymbolsIn");var i1=dN;function fN(n,t,e){var i=t(n);return br(n)?i:gd(i,e(n))}a(fN,"baseGetAllKeys");var _d=fN;function pN(n){return _d(n,al,fl)}a(pN,"getAllKeys");var ru=pN;function mN(n){return _d(n,ts,yd)}a(mN,"getAllKeysIn");var r1=mN;var gN=Fi(Cn,"DataView"),wd=gN;var vN=Fi(Cn,"Promise"),xd=vN;var bN=Fi(Cn,"Set"),Ed=bN;var s1="[object Map]",yN="[object Object]",o1="[object Promise]",a1="[object Set]",l1="[object WeakMap]",c1="[object DataView]",_N=_s(wd),wN=_s(uo),xN=_s(xd),EN=_s(Ed),TN=_s(ld),aa=jr;(wd&&aa(new wd(new ArrayBuffer(1)))!=c1||uo&&aa(new uo)!=s1||xd&&aa(xd.resolve())!=o1||Ed&&aa(new Ed)!=a1||ld&&aa(new ld)!=l1)&&(aa=a(function(n){var t=jr(n),e=t==yN?n.constructor:void 0,i=e?_s(e):"";if(i)switch(i){case _N:return c1;case wN:return s1;case xN:return o1;case EN:return a1;case TN:return l1}return t},"getTag"));var Ts=aa;var SN=Object.prototype,AN=SN.hasOwnProperty;function LN(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&AN.call(n,"index")&&(e.index=n.index,e.input=n.input),e}a(LN,"initCloneArray");var u1=LN;var CN=Cn.Uint8Array,pl=CN;function NN(n){var t=new n.constructor(n.byteLength);return new pl(t).set(new pl(n)),t}a(NN,"cloneArrayBuffer");var ml=NN;function ON(n,t){var e=t?ml(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}a(ON,"cloneDataView");var h1=ON;var kN=/\w*$/;function MN(n){var t=new n.constructor(n.source,kN.exec(n));return t.lastIndex=n.lastIndex,t}a(MN,"cloneRegExp");var d1=MN;var f1=vr?vr.prototype:void 0,p1=f1?f1.valueOf:void 0;function IN(n){return p1?Object(p1.call(n)):{}}a(IN,"cloneSymbol");var m1=IN;function DN(n,t){var e=t?ml(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}a(DN,"cloneTypedArray");var Td=DN;var PN="[object Boolean]",qN="[object Date]",RN="[object Map]",BN="[object Number]",jN="[object RegExp]",FN="[object Set]",HN="[object String]",zN="[object Symbol]",UN="[object ArrayBuffer]",VN="[object DataView]",WN="[object Float32Array]",ZN="[object Float64Array]",$N="[object Int8Array]",KN="[object Int16Array]",GN="[object Int32Array]",YN="[object Uint8Array]",XN="[object Uint8ClampedArray]",JN="[object Uint16Array]",QN="[object Uint32Array]";function tO(n,t,e){var i=n.constructor;switch(t){case UN:return ml(n);case PN:case qN:return new i(+n);case VN:return h1(n,e);case WN:case ZN:case $N:case KN:case GN:case YN:case XN:case JN:case QN:return Td(n,e);case RN:return new i;case BN:case HN:return new i(n);case jN:return d1(n);case FN:return new i;case zN:return m1(n)}}a(tO,"initCloneByTag");var g1=tO;function eO(n){return typeof n.constructor=="function"&&!rl(n)?t0(hl(n)):{}}a(eO,"initCloneObject");var Sd=eO;var nO="[object Map]";function iO(n){return ti(n)&&Ts(n)==nO}a(iO,"baseIsMap");var v1=iO;var b1=xs&&xs.isMap,rO=b1?sl(b1):v1,y1=rO;var sO="[object Set]";function oO(n){return ti(n)&&Ts(n)==sO}a(oO,"baseIsSet");var _1=oO;var w1=xs&&xs.isSet,aO=w1?sl(w1):_1,x1=aO;var lO=1,cO=2,uO=4,E1="[object Arguments]",hO="[object Array]",dO="[object Boolean]",fO="[object Date]",pO="[object Error]",T1="[object Function]",mO="[object GeneratorFunction]",gO="[object Map]",vO="[object Number]",S1="[object Object]",bO="[object RegExp]",yO="[object Set]",_O="[object String]",wO="[object Symbol]",xO="[object WeakMap]",EO="[object ArrayBuffer]",TO="[object DataView]",SO="[object Float32Array]",AO="[object Float64Array]",LO="[object Int8Array]",CO="[object Int16Array]",NO="[object Int32Array]",OO="[object Uint8Array]",kO="[object Uint8ClampedArray]",MO="[object Uint16Array]",IO="[object Uint32Array]",Qe={};Qe[E1]=Qe[hO]=Qe[EO]=Qe[TO]=Qe[dO]=Qe[fO]=Qe[SO]=Qe[AO]=Qe[LO]=Qe[CO]=Qe[NO]=Qe[gO]=Qe[vO]=Qe[S1]=Qe[bO]=Qe[yO]=Qe[_O]=Qe[wO]=Qe[OO]=Qe[kO]=Qe[MO]=Qe[IO]=!0;Qe[pO]=Qe[T1]=Qe[xO]=!1;function Ad(n,t,e,i,s,c){var d,m=t&lO,v=t&cO,y=t&uO;if(e&&(d=s?e(n,i,s,c):e(n)),d!==void 0)return d;if(!ai(n))return n;var x=br(n);if(x){if(d=u1(n),!m)return cd(n,d)}else{var E=Ts(n),A=E==T1||E==mO;if(ws(n))return vd(n,m);if(E==S1||E==E1||A&&!s){if(d=v||A?{}:Sd(n),!m)return v?i1(n,G0(d,n)):n1(n,K0(d,n))}else{if(!Qe[E])return s?n:{};d=g1(n,E,m)}}c||(c=new fo);var C=c.get(n);if(C)return C;c.set(n,d),x1(n)?n.forEach(function(M){d.add(Ad(M,t,e,M,n,c))}):y1(n)&&n.forEach(function(M,q){d.set(q,Ad(M,t,e,q,n,c))});var k=y?v?r1:ru:v?ts:al,H=x?void 0:k(n);return o0(H||n,function(M,q){H&&(q=M,M=n[q]),hd(d,q,Ad(M,t,e,q,n,c))}),d}a(Ad,"baseClone");var A1=Ad;var DO=1,PO=4;function qO(n){return A1(n,DO|PO)}a(qO,"cloneDeep");var es=qO;var RO="__lodash_hash_undefined__";function BO(n){return this.__data__.set(n,RO),this}a(BO,"setCacheAdd");var L1=BO;function jO(n){return this.__data__.has(n)}a(jO,"setCacheHas");var C1=jO;function Ld(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new md;++t<e;)this.add(n[t])}a(Ld,"SetCache");Ld.prototype.add=Ld.prototype.push=L1;Ld.prototype.has=C1;var N1=Ld;function FO(n,t){for(var e=-1,i=n==null?0:n.length;++e<i;)if(t(n[e],e,n))return!0;return!1}a(FO,"arraySome");var O1=FO;function HO(n,t){return n.has(t)}a(HO,"cacheHas");var k1=HO;var zO=1,UO=2;function VO(n,t,e,i,s,c){var d=e&zO,m=n.length,v=t.length;if(m!=v&&!(d&&v>m))return!1;var y=c.get(n),x=c.get(t);if(y&&x)return y==t&&x==n;var E=-1,A=!0,C=e&UO?new N1:void 0;for(c.set(n,t),c.set(t,n);++E<m;){var k=n[E],H=t[E];if(i)var M=d?i(H,k,E,t,n,c):i(k,H,E,n,t,c);if(M!==void 0){if(M)continue;A=!1;break}if(C){if(!O1(t,function(q,V){if(!k1(C,V)&&(k===q||s(k,q,e,i,c)))return C.push(V)})){A=!1;break}}else if(!(k===H||s(k,H,e,i,c))){A=!1;break}}return c.delete(n),c.delete(t),A}a(VO,"equalArrays");var Cd=VO;function WO(n){var t=-1,e=Array(n.size);return n.forEach(function(i,s){e[++t]=[s,i]}),e}a(WO,"mapToArray");var M1=WO;function ZO(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}a(ZO,"setToArray");var I1=ZO;var $O=1,KO=2,GO="[object Boolean]",YO="[object Date]",XO="[object Error]",JO="[object Map]",QO="[object Number]",tk="[object RegExp]",ek="[object Set]",nk="[object String]",ik="[object Symbol]",rk="[object ArrayBuffer]",sk="[object DataView]",D1=vr?vr.prototype:void 0,_m=D1?D1.valueOf:void 0;function ok(n,t,e,i,s,c,d){switch(e){case sk:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case rk:return!(n.byteLength!=t.byteLength||!c(new pl(n),new pl(t)));case GO:case YO:case QO:return Jr(+n,+t);case XO:return n.name==t.name&&n.message==t.message;case tk:case nk:return n==t+"";case JO:var m=M1;case ek:var v=i&$O;if(m||(m=I1),n.size!=t.size&&!v)return!1;var y=d.get(n);if(y)return y==t;i|=KO,d.set(n,t);var x=Cd(m(n),m(t),i,s,c,d);return d.delete(n),x;case ik:if(_m)return _m.call(n)==_m.call(t)}return!1}a(ok,"equalByTag");var P1=ok;var ak=1,lk=Object.prototype,ck=lk.hasOwnProperty;function uk(n,t,e,i,s,c){var d=e&ak,m=ru(n),v=m.length,y=ru(t),x=y.length;if(v!=x&&!d)return!1;for(var E=v;E--;){var A=m[E];if(!(d?A in t:ck.call(t,A)))return!1}var C=c.get(n),k=c.get(t);if(C&&k)return C==t&&k==n;var H=!0;c.set(n,t),c.set(t,n);for(var M=d;++E<v;){A=m[E];var q=n[A],V=t[A];if(i)var $=d?i(V,q,A,t,n,c):i(q,V,A,n,t,c);if(!($===void 0?q===V||s(q,V,e,i,c):$)){H=!1;break}M||(M=A=="constructor")}if(H&&!M){var Y=n.constructor,ot=t.constructor;Y!=ot&&"constructor"in n&&"constructor"in t&&!(typeof Y=="function"&&Y instanceof Y&&typeof ot=="function"&&ot instanceof ot)&&(H=!1)}return c.delete(n),c.delete(t),H}a(uk,"equalObjects");var q1=uk;var hk=1,R1="[object Arguments]",B1="[object Array]",Nd="[object Object]",dk=Object.prototype,j1=dk.hasOwnProperty;function fk(n,t,e,i,s,c){var d=br(n),m=br(t),v=d?B1:Ts(n),y=m?B1:Ts(t);v=v==R1?Nd:v,y=y==R1?Nd:y;var x=v==Nd,E=y==Nd,A=v==y;if(A&&ws(n)){if(!ws(t))return!1;d=!0,x=!1}if(A&&!x)return c||(c=new fo),d||ol(n)?Cd(n,t,e,i,s,c):P1(n,t,v,e,i,s,c);if(!(e&hk)){var C=x&&j1.call(n,"__wrapped__"),k=E&&j1.call(t,"__wrapped__");if(C||k){var H=C?n.value():n,M=k?t.value():t;return c||(c=new fo),s(H,M,e,i,c)}}return A?(c||(c=new fo),q1(n,t,e,i,s,c)):!1}a(fk,"baseIsEqualDeep");var F1=fk;function H1(n,t,e,i,s){return n===t?!0:n==null||t==null||!ti(n)&&!ti(t)?n!==n&&t!==t:F1(n,t,e,i,H1,s)}a(H1,"baseIsEqual");var z1=H1;function pk(n){return function(t,e,i){for(var s=-1,c=Object(t),d=i(t),m=d.length;m--;){var v=d[n?m:++s];if(e(c[v],v,c)===!1)break}return t}}a(pk,"createBaseFor");var U1=pk;var mk=U1(),V1=mk;function gk(n,t,e){(e!==void 0&&!Jr(n[t],e)||e===void 0&&!(t in n))&&il(n,t,e)}a(gk,"assignMergeValue");var su=gk;function vk(n){return ti(n)&&ao(n)}a(vk,"isArrayLikeObject");var W1=vk;function bk(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}a(bk,"safeGet");var ou=bk;function yk(n){return Qr(n,ts(n))}a(yk,"toPlainObject");var Z1=yk;function _k(n,t,e,i,s,c,d){var m=ou(n,e),v=ou(t,e),y=d.get(v);if(y){su(n,e,y);return}var x=c?c(m,v,e+"",n,t,d):void 0,E=x===void 0;if(E){var A=br(v),C=!A&&ws(v),k=!A&&!C&&ol(v);x=v,A||C||k?br(m)?x=m:W1(m)?x=cd(m):C?(E=!1,x=vd(v,!0)):k?(E=!1,x=Td(v,!0)):x=[]:z0(v)||nu(v)?(x=m,nu(m)?x=Z1(m):(!ai(m)||el(m))&&(x=Sd(v))):E=!1}E&&(d.set(v,x),s(x,v,i,c,d),d.delete(v)),su(n,e,x)}a(_k,"baseMergeDeep");var $1=_k;function K1(n,t,e,i,s){n!==t&&V1(t,function(c,d){if(s||(s=new fo),ai(c))$1(n,t,d,e,K1,i,s);else{var m=i?i(ou(n,d),c,d+"",n,t,s):void 0;m===void 0&&(m=c),su(n,d,m)}},ts)}a(K1,"baseMerge");var G1=K1;function wk(n,t){return z1(n,t)}a(wk,"isEqual");var la=wk;var xk=h0(function(n,t,e){G1(n,t,e)}),Hi=xk;var cu={};lp(cu,{Attributor:()=>xi,AttributorStore:()=>au,BlockBlot:()=>ca,ClassAttributor:()=>Nn,ContainerBlot:()=>_l,EmbedBlot:()=>gn,InlineBlot:()=>Od,LeafBlot:()=>On,ParentBlot:()=>zi,Registry:()=>go,Scope:()=>Ct,ScrollBlot:()=>lu,StyleAttributor:()=>Ui,TextBlot:()=>wl});var Ct=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Ct||{}),xi=class{static{a(this,"Attributor")}constructor(t,e,i={}){this.attrName=t,this.keyName=e;let s=Ct.TYPE&Ct.ATTRIBUTE;this.scope=i.scope!=null?i.scope&Ct.LEVEL|s:Ct.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){let e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}},mo=class extends Error{static{a(this,"ParchmentError")}constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}},J1=class xm{static{a(this,"_Registry")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let i=null;try{i=t.parentNode}catch{return null}return this.find(i,e)}return null}create(t,e,i){let s=this.query(e);if(s==null)throw new mo(`Unable to create ${e} blot`);let c=s,d=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:c.create(i),m=new c(t,d,i);return xm.blots.set(m.domNode,m),m}find(t,e=!1){return xm.find(t,e)}query(t,e=Ct.ANY){let i;return typeof t=="string"?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:typeof t=="number"?t&Ct.LEVEL&Ct.BLOCK?i=this.types.block:t&Ct.LEVEL&Ct.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(i=this.classes[s],!!i)),i=i||this.tags[t.tagName]),i==null?null:"scope"in i&&e&Ct.LEVEL&i.scope&&e&Ct.TYPE&i.scope?i:null}register(...t){return t.map(e=>{let i="blotName"in e,s="attrName"in e;if(!i&&!s)throw new mo("Invalid definition");if(i&&e.blotName==="abstract")throw new mo("Cannot register abstract class");let c=i?e.blotName:s?e.attrName:void 0;return this.types[c]=e,s?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):i&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(d=>d.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(d=>{(this.tags[d]==null||e.className==null)&&(this.tags[d]=e)}))),e})}};J1.blots=new WeakMap;var go=J1;function Y1(n,t){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}a(Y1,"match");var Em=class extends xi{static{a(this,"ClassAttributor")}static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){Y1(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){let e=(Y1(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}},Nn=Em;function wm(n){let t=n.split("-"),e=t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return t[0]+e}a(wm,"camelize");var Tm=class extends xi{static{a(this,"StyleAttributor")}static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[wm(this.keyName)]=e,!0):!1}remove(t){t.style[wm(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){let e=t.style[wm(this.keyName)];return this.canAdd(t,e)?e:""}},Ui=Tm,Sm=class{static{a(this,"AttributorStore")}constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};let t=go.find(this.domNode);if(t==null)return;let e=xi.keys(this.domNode),i=Nn.keys(this.domNode),s=Ui.keys(this.domNode);e.concat(i).concat(s).forEach(c=>{let d=t.scroll.query(c,Ct.ATTRIBUTE);d instanceof xi&&(this.attributes[d.attrName]=d)})}copy(t){Object.keys(this.attributes).forEach(e=>{let i=this.attributes[e].value(this.domNode);t.format(e,i)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}},au=Sm,Q1=class{static{a(this,"_ShadowBlot")}constructor(t,e){this.scroll=t,this.domNode=e,go.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new mo("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?(typeof t=="string"?(i=t.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof t=="number"&&(i=t),typeof i=="number"?e=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?e=document.createElement(i):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){let t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),go.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,i,s){let c=this.isolate(t,e);if(this.scroll.query(i,Ct.BLOT)!=null&&s)c.wrap(i,s);else if(this.scroll.query(i,Ct.ATTRIBUTE)!=null){let d=this.scroll.create(this.statics.scope);c.wrap(d),d.format(i,s)}}insertAt(t,e,i){let s=i==null?this.scroll.create("text",e):this.scroll.create(e,i),c=this.split(t);this.parent.insertBefore(s,c||void 0)}isolate(t,e){let i=this.split(t);if(i==null)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new mo(`Cannot wrap ${t}`);return i.appendChild(this),i}};Q1.blotName="abstract";var t_=Q1,e_=class extends t_{static{a(this,"_LeafBlot")}static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};e_.scope=Ct.INLINE_BLOT;var Ek=e_,On=Ek,Am=class{static{a(this,"LinkedList")}constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){let e=t.slice(1);this.append(...e)}}at(t){let e=this.iterator(),i=e();for(;i&&t>0;)t-=1,i=e();return i}contains(t){let e=this.iterator(),i=e();for(;i;){if(i===t)return!0;i=e()}return!1}indexOf(t){let e=this.iterator(),i=e(),s=0;for(;i;){if(i===t)return s;s+=1,i=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,i=this.head;for(;i!=null;){if(i===t)return e;e+=i.length(),i=i.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{let e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){let i=this.iterator(),s=i();for(;s;){let c=s.length();if(t<c||e&&t===c&&(s.next==null||s.next.length()!==0))return[s,t];t-=c,s=i()}return[null,0]}forEach(t){let e=this.iterator(),i=e();for(;i;)t(i),i=e()}forEachAt(t,e,i){if(e<=0)return;let[s,c]=this.find(t),d=t-c,m=this.iterator(s),v=m();for(;v&&d<t+e;){let y=v.length();t>d?i(v,t-d,Math.min(e,d+y-t)):i(v,0,Math.min(y,t+e-d)),d+=y,v=m()}}map(t){return this.reduce((e,i)=>(e.push(t(i)),e),[])}reduce(t,e){let i=this.iterator(),s=i();for(;s;)e=t(e,s),s=i();return e}};function X1(n,t){let e=t.find(n);if(e)return e;try{return t.create(n)}catch{let i=t.create(Ct.INLINE);return Array.from(n.childNodes).forEach(s=>{i.domNode.appendChild(s)}),n.parentNode&&n.parentNode.replaceChild(i.domNode,n),i.attach(),i}}a(X1,"makeAttachedBlot");var n_=class po extends t_{static{a(this,"_ParentBlot")}constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,po.uiClass&&this.uiNode.classList.add(po.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Am,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{let e=X1(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof mo)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(i,s,c)=>{i.deleteAt(s,c)})}descendant(t,e=0){let[i,s]=this.children.find(e);return t.blotName==null&&t(i)||t.blotName!=null&&i instanceof t?[i,s]:i instanceof po?i.descendant(t,s):[null,-1]}descendants(t,e=0,i=Number.MAX_VALUE){let s=[],c=i;return this.children.forEachAt(e,i,(d,m,v)=>{(t.blotName==null&&t(d)||t.blotName!=null&&d instanceof t)&&s.push(d),d instanceof po&&(s=s.concat(d.descendants(t,m,c))),c-=v}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(i=>e instanceof i)||(e.statics.scope===Ct.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof po?e.unwrap():e.remove())})}formatAt(t,e,i,s){this.children.forEachAt(t,e,(c,d,m)=>{c.formatAt(d,m,i,s)})}insertAt(t,e,i){let[s,c]=this.children.find(t);if(s)s.insertAt(c,e,i);else{let d=i==null?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(d)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let i=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(i=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(t.domNode,i),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(i=>{t.insertBefore(i,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){let[i,s]=this.children.find(t,e),c=[[this,t]];return i instanceof po?c.concat(i.path(s,e)):(i!=null&&c.push([i,s]),c)}removeChild(t){this.children.remove(t)}replaceWith(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;return i instanceof po&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),(s,c,d)=>{let m=s.split(c,e);m!=null&&i.appendChild(m)}),i}splitAfter(t){let e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){let i=[],s=[];t.forEach(c=>{c.target===this.domNode&&c.type==="childList"&&(i.push(...c.addedNodes),s.push(...c.removedNodes))}),s.forEach(c=>{if(c.parentNode!=null&&c.tagName!=="IFRAME"&&document.body.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let d=this.scroll.find(c);d!=null&&(d.domNode.parentNode==null||d.domNode.parentNode===this.domNode)&&d.detach()}),i.filter(c=>c.parentNode===this.domNode&&c!==this.uiNode).sort((c,d)=>c===d?0:c.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(c=>{let d=null;c.nextSibling!=null&&(d=this.scroll.find(c.nextSibling));let m=X1(c,this.scroll);(m.next!==d||m.next==null)&&(m.parent!=null&&m.parent.removeChild(this),this.insertBefore(m,d||void 0))}),this.enforceAllowedChildren()}};n_.uiClass="";var Tk=n_,zi=Tk;function Sk(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(let e in n)if(n[e]!==t[e])return!1;return!0}a(Sk,"isEqual");var gl=class vl extends zi{static{a(this,"_InlineBlot")}static create(t){return super.create(t)}static formats(t,e){let i=e.query(vl.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new au(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(i=>{i instanceof vl||(i=i.wrap(vl.blotName,!0)),this.attributes.copy(i)}),this.unwrap();else{let i=this.scroll.query(t,Ct.INLINE);if(i==null)return;i instanceof xi?this.attributes.attribute(i,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,s){this.formats()[i]!=null||this.scroll.query(i,Ct.ATTRIBUTE)?this.isolate(t,e).format(i,s):super.formatAt(t,e,i,s)}optimize(t){super.optimize(t);let e=this.formats();if(Object.keys(e).length===0)return this.unwrap();let i=this.next;i instanceof vl&&i.prev===this&&Sk(e,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){let i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}wrap(t,e){let i=super.wrap(t,e);return i instanceof vl&&this.attributes.move(i),i}};gl.allowedChildren=[gl,On],gl.blotName="inline",gl.scope=Ct.INLINE_BLOT,gl.tagName="SPAN";var Ak=gl,Od=Ak,bl=class Lm extends zi{static{a(this,"_BlockBlot")}static create(t){return super.create(t)}static formats(t,e){let i=e.query(Lm.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new au(this.domNode)}format(t,e){let i=this.scroll.query(t,Ct.BLOCK);i!=null&&(i instanceof xi?this.attributes.attribute(i,e):t===this.statics.blotName&&!e?this.replaceWith(Lm.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,s){this.scroll.query(i,Ct.BLOCK)!=null?this.format(i,s):super.formatAt(t,e,i,s)}insertAt(t,e,i){if(i==null||this.scroll.query(e,Ct.INLINE)!=null)super.insertAt(t,e,i);else{let s=this.split(t);if(s!=null){let c=this.scroll.create(e,i);s.parent.insertBefore(c,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){let i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}};bl.blotName="block",bl.scope=Ct.BLOCK_BLOT,bl.tagName="P",bl.allowedChildren=[Od,bl,On];var Lk=bl,ca=Lk,Cm=class extends zi{static{a(this,"_ContainerBlot")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,i,s){super.formatAt(t,e,i,s),this.enforceAllowedChildren()}insertAt(t,e,i){super.insertAt(t,e,i),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Cm.blotName="container",Cm.scope=Ct.BLOCK_BLOT;var Ck=Cm,_l=Ck,Nm=class extends On{static{a(this,"EmbedBlot")}static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,i,s){t===0&&e===this.length()?this.format(i,s):super.formatAt(t,e,i,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}},gn=Nm,Nk={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Ok=100,yl=class extends zi{static{a(this,"_ScrollBlot")}constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,Nk),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){let i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(t,e=Ct.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(t,e)}formatAt(t,e,i,s){this.update(),super.formatAt(t,e,i,s)}insertAt(t,e,i){this.update(),super.insertAt(t,e,i)}optimize(t=[],e={}){super.optimize(e);let i=e.mutationsMap||new WeakMap,s=Array.from(this.observer.takeRecords());for(;s.length>0;)t.push(s.pop());let c=a((v,y=!0)=>{v==null||v===this||v.domNode.parentNode!=null&&(i.has(v.domNode)||i.set(v.domNode,[]),y&&c(v.parent))},"mark"),d=a(v=>{i.has(v.domNode)&&(v instanceof zi&&v.children.forEach(d),i.delete(v.domNode),v.optimize(e))},"optimize"),m=t;for(let v=0;m.length>0;v+=1){if(v>=Ok)throw new Error("[Parchment] Maximum optimize iterations reached");for(m.forEach(y=>{let x=this.find(y.target,!0);x!=null&&(x.domNode===y.target&&(y.type==="childList"?(c(this.find(y.previousSibling,!1)),Array.from(y.addedNodes).forEach(E=>{let A=this.find(E,!1);c(A,!1),A instanceof zi&&A.children.forEach(C=>{c(C,!1)})})):y.type==="attributes"&&c(x.prev)),c(x))}),this.children.forEach(d),m=Array.from(this.observer.takeRecords()),s=m.slice();s.length>0;)t.push(s.pop())}}update(t,e={}){t=t||this.observer.takeRecords();let i=new WeakMap;t.map(s=>{let c=this.find(s.target,!0);return c==null?null:i.has(c.domNode)?(i.get(c.domNode).push(s),null):(i.set(c.domNode,[s]),c)}).forEach(s=>{s!=null&&s!==this&&i.has(s.domNode)&&s.update(i.get(s.domNode)||[],e)}),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(t,e)}};yl.blotName="scroll",yl.defaultChild=ca,yl.allowedChildren=[ca,_l],yl.scope=Ct.BLOCK_BLOT,yl.tagName="DIV";var kk=yl,lu=kk,Om=class i_ extends On{static{a(this,"_TextBlot")}static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,i){i==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,i)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof i_&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(t,e){t.some(i=>i.type==="characterData"&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Om.blotName="text",Om.scope=Ct.INLINE_BLOT;var Mk=Om,wl=Mk;var wo=$n(nr(),1);var vn=$n(nr(),1);var gg=$n(nr(),1);var yu=class extends gn{static{a(this,"Break")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};yu.blotName="break";yu.tagName="BR";var li=yu;var xn=class extends wl{static{a(this,"Text")}};function ba(n){return n.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}a(ba,"escapeText");var mg=class n extends Od{static{a(this,"Inline")}static allowedChildren=[n,li,gn,xn];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){let i=n.order.indexOf(t),s=n.order.indexOf(e);return i>=0||s>=0?i-s:t===e?0:t<e?-1:1}formatAt(t,e,i,s){if(n.compare(this.statics.blotName,i)<0&&this.scroll.query(i,Ct.BLOT)){let c=this.isolate(t,e);s&&c.wrap(i,s)}else super.formatAt(t,e,i,s)}optimize(t){if(super.optimize(t),this.parent instanceof n&&n.compare(this.statics.blotName,this.parent.statics.blotName)>0){let e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}},ci=mg;var Fw=1,Ge=class extends ca{static{a(this,"Block")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=vg(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,i,s){e<=0||(this.scroll.query(i,Ct.BLOCK)?t+e===this.length()&&this.format(i,s):super.formatAt(t,Math.min(e,this.length()-t-1),i,s),this.cache={})}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i),this.cache={};return}if(e.length===0)return;let s=e.split(`
`),c=s.shift();c.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),c):this.children.tail.insertAt(this.children.tail.length(),c),this.cache={});let d=this;s.reduce((m,v)=>(d=d.split(m,!0),d.insertAt(0,v),v.length),t+c.length)}insertBefore(t,e){let{head:i}=this.children;super.insertBefore(t,e),i instanceof li&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Fw),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e&&(t===0||t>=this.length()-Fw)){let s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}let i=super.split(t,e);return this.cache={},i}};Ge.blotName="block";Ge.tagName="P";Ge.defaultChild=li;Ge.allowedChildren=[li,ci,gn,xn];var jn=class extends gn{static{a(this,"BlockEmbed")}attach(){super.attach(),this.attributes=new au(this.domNode)}delta(){return new gg.default().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){let i=this.scroll.query(t,Ct.BLOCK_ATTRIBUTE);i!=null&&this.attributes.attribute(i,e)}formatAt(t,e,i,s){this.format(i,s)}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i);return}let s=e.split(`
`),c=s.pop(),d=s.map(v=>{let y=this.scroll.create(Ge.blotName);return y.insertAt(0,v),y}),m=this.split(t);d.forEach(v=>{this.parent.insertBefore(v,m)}),c&&this.parent.insertBefore(this.scroll.create("text",c),m)}};jn.scope=Ct.BLOCK_BLOT;function vg(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(On).reduce((e,i)=>i.length()===0?e:e.insert(i.value(),Vi(i,{},t)),new gg.default).insert(`
`,Vi(n))}a(vg,"blockDelta");function Vi(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(t={...t,...n.formats()},e&&delete t["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?t:Vi(n.parent,t,e)}a(Vi,"bubbleFormats");var bg=class n extends gn{static{a(this,"Cursor")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(t,e,i){super(t,e),this.selection=i,this.textNode=document.createTextNode(n.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let i=this,s=0;for(;i!=null&&i.statics.scope!==Ct.BLOCK_BLOT;)s+=i.offset(i.parent),i=i.parent;i!=null&&(this.savedLength=n.CONTENTS.length,i.optimize(),i.formatAt(s,n.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let e=this.prev instanceof xn?this.prev:null,i=e?e.length():0,s=this.next instanceof xn?this.next:null,c=s?s.text:"",{textNode:d}=this,m=d.data.split(n.CONTENTS).join("");d.data=n.CONTENTS;let v;if(e)v=e,(m||s)&&(e.insertAt(e.length(),m+c),s&&s.remove());else if(s)v=s,s.insertAt(0,m);else{let y=document.createTextNode(m);v=this.scroll.create(y),this.parent.insertBefore(v,this)}if(this.remove(),t){let y=a((A,C)=>e&&A===e.domNode?C:A===d?i+C-1:s&&A===s.domNode?i+m.length+C:null,"remapOffset"),x=y(t.start.node,t.start.offset),E=y(t.end.node,t.end.offset);if(x!==null&&E!==null)return{startNode:v.domNode,startOffset:x,endNode:v.domNode,endOffset:E}}return null}update(t,e){if(t.some(i=>i.type==="characterData"&&i.target===this.textNode)){let i=this.restore();i&&(e.range=i)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=n.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}},_o=bg;var _g=$n(zw(),1);var wu=new WeakMap;var wg=["error","warn","log","info"],xg="warn";function Uw(n){if(xg&&wg.indexOf(n)<=wg.indexOf(xg)){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];console[n](...e)}}a(Uw,"debug");function Eg(n){return wg.reduce((t,e)=>(t[e]=Uw.bind(console,e,n),t),{})}a(Eg,"namespace");Eg.level=n=>{xg=n};Uw.level=Eg.level;var ir=Eg;var Tg=ir("quill:events"),XD=["selectionchange","mousedown","mouseup","click"];XD.forEach(n=>{document.addEventListener(n,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{let c=wu.get(s);c&&c.emitter&&c.emitter.handleDOM(...e)})})});var Sg=class extends _g.default{static{a(this,"Emitter")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Tg.error)}emit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Tg.log.call(Tg,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(c=>{let{node:d,handler:m}=c;(t.target===d||d.contains(t.target))&&m(t,...i)})}listenDOM(t,e,i){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:i})}},Rt=Sg;var Ag=ir("quill:selection"),Si=class{static{a(this,"Range")}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}},Cg=class{static{a(this,"Selection")}constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Si(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Rt.sources.USER),1)}),this.emitter.on(Rt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let i=this.getNativeRange();i!=null&&i.start.node!==this.cursor.textNode&&this.emitter.once(Rt.events.SCROLL_UPDATE,(s,c)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);let d=c.some(m=>m.type==="characterData"||m.type==="childList"||m.type==="attributes"&&m.target===this.root);this.update(d?Rt.sources.SILENT:s)}catch{}})}),this.emitter.on(Rt.events.SCROLL_OPTIMIZE,(i,s)=>{if(s.range){let{startNode:c,startOffset:d,endNode:m,endOffset:v}=s.range;this.setNativeRange(c,d,m,v),this.update(Rt.sources.SILENT)}}),this.update(Rt.sources.SILENT)}handleComposition(){this.emitter.on(Rt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Rt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Rt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();let i=this.getNativeRange();if(!(i==null||!i.native.collapsed||this.scroll.query(t,Ct.BLOCK))){if(i.start.node!==this.cursor.textNode){let s=this.scroll.find(i.start.node,!1);if(s==null)return;if(s instanceof On){let c=s.split(i.start.offset);s.parent.insertBefore(this.cursor,c)}else s.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.scroll.length();t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;let s,[c,d]=this.scroll.leaf(t);if(c==null)return null;if(e>0&&d===c.length()){let[x]=this.scroll.leaf(t+1);if(x){let[E]=this.scroll.line(t),[A]=this.scroll.line(t+1);E===A&&(c=x,d=0)}}[s,d]=c.position(d,!0);let m=document.createRange();if(e>0)return m.setStart(s,d),[c,d]=this.scroll.leaf(t+e),c==null?null:([s,d]=c.position(d,!0),m.setEnd(s,d),m.getBoundingClientRect());let v="left",y;if(s instanceof Text){if(!s.data.length)return null;d<s.data.length?(m.setStart(s,d),m.setEnd(s,d+1)):(m.setStart(s,d-1),m.setEnd(s,d),v="right"),y=m.getBoundingClientRect()}else{if(!(c.domNode instanceof Element))return null;y=c.domNode.getBoundingClientRect(),d>0&&(v="right")}return{bottom:y.top+y.height,height:y.height,left:y[v],right:y[v],top:y.top,width:0}}getNativeRange(){let t=document.getSelection();if(t==null||t.rangeCount<=0)return null;let e=t.getRangeAt(0);if(e==null)return null;let i=this.normalizeNative(e);return Ag.info("getNativeRange",i),i}getRange(){let t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];let e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Lg(this.root,document.activeElement)}normalizedToRange(t){let e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);let i=e.map(d=>{let[m,v]=d,y=this.scroll.find(m,!0),x=y.offset(this.scroll);return v===0?x:y instanceof On?x+y.index(m,v):x+y.length()}),s=Math.min(Math.max(...i),this.scroll.length()-1),c=Math.min(s,...i);return new Si(c,s-c)}normalizeNative(t){if(!Lg(this.root,t.startContainer)||!t.collapsed&&!Lg(this.root,t.endContainer))return null;let e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(i=>{let{node:s,offset:c}=i;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>c)s=s.childNodes[c],c=0;else if(s.childNodes.length===c)s=s.lastChild,s instanceof Text?c=s.data.length:s.childNodes.length>0?c=s.childNodes.length:c=s.childNodes.length+1;else break;i.node=s,i.offset=c}),e}rangeToNative(t){let e=this.scroll.length(),i=a((s,c)=>{s=Math.min(e-1,s);let[d,m]=this.scroll.leaf(s);return d?d.position(m,c):[null,-1]},"getPosition");return[...i(t.index,!1),...i(t.index+t.length,!0)]}setNativeRange(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Ag.info("setNativeRange",t,e,i,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||i.parentNode==null))return;let d=document.getSelection();if(d!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:m}=this.getNativeRange()||{};if(m==null||c||t!==m.startContainer||e!==m.startOffset||i!==m.endContainer||s!==m.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),i instanceof Element&&i.tagName==="BR"&&(s=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);let v=document.createRange();v.setStart(t,e),v.setEnd(i,s),d.removeAllRanges(),d.addRange(v)}}else d.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rt.sources.API;if(typeof e=="string"&&(i=e,e=!1),Ag.info("setRange",t),t!=null){let s=this.rangeToNative(t);this.setNativeRange(...s,e)}else this.setNativeRange(null);this.update(i)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rt.sources.USER,e=this.lastRange,[i,s]=this.getRange();if(this.lastRange=i,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!la(e,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){let d=this.cursor.restore();d&&this.setNativeRange(d.startNode,d.startOffset,d.endNode,d.endOffset)}let c=[Rt.events.SELECTION_CHANGE,es(this.lastRange),es(e),t];this.emitter.emit(Rt.events.EDITOR_CHANGE,...c),t!==Rt.sources.SILENT&&this.emitter.emit(...c)}}};function Lg(n,t){try{t.parentNode}catch{return!1}return n.contains(t)}a(Lg,"contains");var Vw=Cg;var JD=/^[ -~]*$/,Og=class{static{a(this,"Editor")}constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();let i=Ww(t),s=new vn.default;return tP(i.ops.slice()).reduce((d,m)=>{let v=vn.Op.length(m),y=m.attributes||{},x=!1,E=!1;if(m.insert!=null){if(s.retain(v),typeof m.insert=="string"){let k=m.insert;E=!k.endsWith(`
`)&&(e<=d||!!this.scroll.descendant(jn,d)[0]),this.scroll.insertAt(d,k);let[H,M]=this.scroll.line(d),q=Hi({},Vi(H));if(H instanceof Ge){let[V]=H.descendant(On,M);V&&(q=Hi(q,Vi(V)))}y=vn.AttributeMap.diff(q,y)||{}}else if(typeof m.insert=="object"){let k=Object.keys(m.insert)[0];if(k==null)return d;let H=this.scroll.query(k,Ct.INLINE)!=null;if(H)(e<=d||this.scroll.descendant(jn,d)[0])&&(E=!0);else if(d>0){let[M,q]=this.scroll.descendant(On,d-1);M instanceof xn?M.value()[q]!==`
`&&(x=!0):M instanceof gn&&M.statics.scope===Ct.INLINE_BLOT&&(x=!0)}if(this.scroll.insertAt(d,k,m.insert[k]),H){let[M]=this.scroll.descendant(On,d);if(M){let q=Hi({},Vi(M));y=vn.AttributeMap.diff(q,y)||{}}}}e+=v}else if(s.push(m),m.retain!==null&&typeof m.retain=="object"){let k=Object.keys(m.retain)[0];if(k==null)return d;this.scroll.updateEmbedAt(d,k,m.retain[k])}Object.keys(y).forEach(k=>{this.scroll.formatAt(d,v,k,y[k])});let A=x?1:0,C=E?1:0;return e+=A+C,s.retain(A),s.delete(C),d+v+A+C},0),s.reduce((d,m)=>typeof m.delete=="number"?(this.scroll.deleteAt(d,m.delete),d):d+vn.Op.length(m),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new vn.default().retain(t).delete(e))}formatLine(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(c=>{this.scroll.lines(t,Math.max(e,1)).forEach(d=>{d.format(c,i[c])})}),this.scroll.optimize();let s=new vn.default().retain(t).retain(e,es(i));return this.update(s)}formatText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i).forEach(c=>{this.scroll.formatAt(t,e,c,i[c])});let s=new vn.default().retain(t).retain(e,es(i));return this.update(s)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new vn.default)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],s=[];e===0?this.scroll.path(t).forEach(m=>{let[v]=m;v instanceof Ge?i.push(v):v instanceof On&&s.push(v)}):(i=this.scroll.lines(t,e),s=this.scroll.descendants(On,t,e));let[c,d]=[i,s].map(m=>{let v=m.shift();if(v==null)return{};let y=Vi(v);for(;Object.keys(y).length>0;){let x=m.shift();if(x==null)return y;y=QD(Vi(x),y)}return y});return{...c,...d}}getHTML(t,e){let[i,s]=this.scroll.line(t);if(i){let c=i.length();return i.length()>=s+e&&!(s===0&&e===c)?xu(i,s,e,!0):xu(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(i=>typeof i.insert=="string").map(i=>i.insert).join("")}insertContents(t,e){let i=Ww(e),s=new vn.default().retain(t).concat(i);return this.scroll.insertContents(t,i),this.update(s)}insertEmbed(t,e,i){return this.scroll.insertAt(t,e,i),this.update(new vn.default().retain(t).insert({[e]:i}))}insertText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(i).forEach(s=>{this.scroll.formatAt(t,e.length,s,i[s])}),this.update(new vn.default().retain(t).insert(e,es(i)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let t=this.scroll.children.head;if(t?.statics.blotName!==Ge.blotName)return!1;let e=t;return e.children.length>1?!1:e.children.head instanceof li}removeFormat(t,e){let i=this.getText(t,e),[s,c]=this.scroll.line(t+e),d=0,m=new vn.default;s!=null&&(d=s.length()-c,m=s.delta().slice(c,c+d-1).insert(`
`));let y=this.getContents(t,e+d).diff(new vn.default().insert(i).concat(m)),x=new vn.default().retain(t).concat(y);return this.applyDelta(x)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(JD)&&this.scroll.find(e[0].target)){let c=this.scroll.find(e[0].target),d=Vi(c),m=c.offset(this.scroll),v=e[0].oldValue.replace(_o.CONTENTS,""),y=new vn.default().insert(v),x=new vn.default().insert(c.value()),E=i&&{oldRange:Zw(i.oldRange,-m),newRange:Zw(i.newRange,-m)};t=new vn.default().retain(m).concat(y.diff(x,E)).reduce((C,k)=>k.insert?C.insert(k.insert,d):C.push(k),new vn.default),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!la(s.compose(t),this.delta))&&(t=s.diff(this.delta,i));return t}};function Nl(n,t,e){if(n.length===0){let[C]=Ng(e.pop());return t<=0?`</li></${C}>`:`</li></${C}>${Nl([],t-1,e)}`}let[{child:i,offset:s,length:c,indent:d,type:m},...v]=n,[y,x]=Ng(m);if(d>t)return e.push(m),d===t+1?`<${y}><li${x}>${xu(i,s,c)}${Nl(v,d,e)}`:`<${y}><li>${Nl(n,t+1,e)}`;let E=e[e.length-1];if(d===t&&m===E)return`</li><li${x}>${xu(i,s,c)}${Nl(v,d,e)}`;let[A]=Ng(e.pop());return`</li></${A}>${Nl(n,t-1,e)}`}a(Nl,"convertListHTML");function xu(n,t,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(t,e);if(n instanceof xn)return ba(n.value().slice(t,t+e));if(n instanceof zi){if(n.statics.blotName==="list-container"){let y=[];return n.children.forEachAt(t,e,(x,E,A)=>{let C="formats"in x&&typeof x.formats=="function"?x.formats():{};y.push({child:x,offset:E,length:A,indent:C.indent||0,type:C.list})}),Nl(y,-1,[])}let s=[];if(n.children.forEachAt(t,e,(y,x,E)=>{s.push(xu(y,x,E))}),i||n.statics.blotName==="list")return s.join("");let{outerHTML:c,innerHTML:d}=n.domNode,[m,v]=c.split(`>${d}<`);return m==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${v}`:`${m}>${s.join("")}<${v}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}a(xu,"convertHTML");function QD(n,t){return Object.keys(t).reduce((e,i)=>{if(n[i]==null)return e;let s=t[i];return s===n[i]?e[i]=s:Array.isArray(s)?s.indexOf(n[i])<0?e[i]=s.concat([n[i]]):e[i]=s:e[i]=[s,n[i]],e},{})}a(QD,"combineFormats");function Ng(n){let t=n==="ordered"?"ol":"ul";switch(n){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}a(Ng,"getListType");function Ww(n){return n.reduce((t,e)=>{if(typeof e.insert=="string"){let i=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(i,e.attributes)}return t.push(e)},new vn.default)}a(Ww,"normalizeDelta");function Zw(n,t){let{index:e,length:i}=n;return new Si(e+t,i)}a(Zw,"shiftRange");function tP(n){let t=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((s,c)=>{c&&t.push({insert:`
`,attributes:e.attributes}),s&&t.push({insert:s,attributes:e.attributes})}):t.push(e)}),t}a(tP,"splitOpLines");var $w=Og;var kg=class{static{a(this,"Module")}static DEFAULTS={};constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}},kn=kg;var ef="\uFEFF",Mg=class extends gn{static{a(this,"Embed")}constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode(ef),this.rightGuard=document.createTextNode(ef),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,i,s=t.data.split(ef).join("");if(t===this.leftGuard)if(this.prev instanceof xn){let c=this.prev.length();this.prev.insertAt(c,s),e={startNode:this.prev.domNode,startOffset:c+s.length}}else i=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(i),this),e={startNode:i,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof xn?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(i=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(i),this.next),e={startNode:i,startOffset:s.length}));return t.data=ef,e}update(t,e){t.forEach(i=>{if(i.type==="characterData"&&(i.target===this.leftGuard||i.target===this.rightGuard)){let s=this.restore(i.target);s&&(e.range=s)}})}},Ol=Mg;var Ig=class{static{a(this,"Composition")}isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){let e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof Ol)&&(this.emitter.emit(Rt.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Rt.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Rt.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Rt.events.COMPOSITION_END,t),this.isComposing=!1}},Kw=Ig;var Dg=class n{static{a(this,"Theme")}static DEFAULTS={modules:{}};static themes={default:n};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){let e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}},kl=Dg;var eP=a(n=>n.parentElement||n.getRootNode().host||null,"getParentElement"),nP=a(n=>{let t=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(t.width)/n.offsetWidth||1,i="offsetHeight"in n&&Math.abs(t.height)/n.offsetHeight||1;return{top:t.top,right:t.left+n.clientWidth*e,bottom:t.top+n.clientHeight*i,left:t.left}},"getElementRect"),nf=a(n=>{let t=parseInt(n,10);return Number.isNaN(t)?0:t},"paddingValueToInt"),Gw=a((n,t,e,i,s,c)=>n<e&&t>i?0:n<e?-(e-n+s):t>i?t-n>i-e?n+s-e:t-i+c:0,"getScrollDistance"),iP=a((n,t)=>{let e=n.ownerDocument,i=t,s=n;for(;s;){let c=s===e.body,d=c?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:nP(s),m=getComputedStyle(s),v=Gw(i.left,i.right,d.left,d.right,nf(m.scrollPaddingLeft),nf(m.scrollPaddingRight)),y=Gw(i.top,i.bottom,d.top,d.bottom,nf(m.scrollPaddingTop),nf(m.scrollPaddingBottom));if(v||y)if(c)e.defaultView?.scrollBy(v,y);else{let{scrollLeft:x,scrollTop:E}=s;y&&(s.scrollTop+=y),v&&(s.scrollLeft+=v);let A=s.scrollLeft-x,C=s.scrollTop-E;i={left:i.left-A,top:i.top-C,right:i.right-A,bottom:i.bottom-C}}s=c||m.position==="fixed"?null:eP(s)}},"scrollRectIntoView"),Yw=iP;var rP=100,sP=["block","break","cursor","inline","scroll","text"],oP=a((n,t,e)=>{let i=new go;return sP.forEach(s=>{let c=t.query(s);c&&i.register(c)}),n.forEach(s=>{let c=t.query(s);c||e.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let d=0;for(;c;)if(i.register(c),c="blotName"in c?c.requiredContainer??null:null,d+=1,d>rP){e.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),i},"createRegistryWithFormats"),Xw=oP;var Ml=ir("quill"),rf=new go;zi.uiClass="ql-ui";var at=class n{static{a(this,"Quill")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:rf,theme:"default"};static events=Rt.events;static sources=Rt.sources;static version="2.0.0";static imports={delta:wo.default,parchment:cu,"core/module":kn,"core/theme":kl};static debug(t){t===!0&&(t="log"),ir.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return wu.get(t)||rf.find(t,e)}static import(t){return this.imports[t]==null&&Ml.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof t!="string"){let s="attrName"in t?t.attrName:t.blotName;typeof s=="string"?this.register(`formats/${s}`,t,e):Object.keys(t).forEach(c=>{this.register(c,t[c],e)})}else this.imports[t]!=null&&!i&&Ml.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&rf.register(e),typeof e.register=="function"&&e.register(rf)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=aP(t,e),this.container=this.options.container,this.container==null){Ml.error("Invalid Quill container",t);return}this.options.debug&&n.debug(this.options.debug);let i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",wu.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Rt;let s=lu.blotName,c=this.options.registry.query(s);if(!c||!("blotName"in c))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new c(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new $w(this.scroll),this.selection=new Vw(this.scroll,this.emitter),this.composition=new Kw(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Rt.events.EDITOR_CHANGE,d=>{d===Rt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Rt.events.SCROLL_UPDATE,(d,m)=>{let v=this.selection.lastRange,[y]=this.selection.getRange(),x=v&&y?{oldRange:v,newRange:y}:void 0;Fr.call(this,()=>this.editor.update(null,m,x),d)}),this.emitter.on(Rt.events.SCROLL_EMBED_UPDATE,(d,m)=>{let v=this.selection.lastRange,[y]=this.selection.getRange(),x=v&&y?{oldRange:v,newRange:y}:void 0;Fr.call(this,()=>{let E=new wo.default().retain(d.offset(this)).retain({[d.statics.blotName]:m});return this.editor.update(E,[],x)},n.sources.USER)}),i){let d=this.clipboard.convert({html:`${i}<p><br></p>`,text:`
`});this.setContents(d)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){let i=t;t=document.createElement("div"),t.classList.add(i)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,i){return[t,e,,i]=Ms(t,e,i),Fr.call(this,()=>this.editor.deleteText(t,e),i,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;let e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rt.sources.API;return Fr.call(this,()=>{let s=this.getSelection(!0),c=new wo.default;if(s==null)return c;if(this.scroll.query(t,Ct.BLOCK))c=this.editor.formatLine(s.index,s.length,{[t]:e});else{if(s.length===0)return this.selection.format(t,e),c;c=this.editor.formatText(s.index,s.length,{[t]:e})}return this.setSelection(s,Rt.sources.SILENT),c},i)}formatLine(t,e,i,s,c){let d;return[t,e,d,c]=Ms(t,e,i,s,c),Fr.call(this,()=>this.editor.formatLine(t,e,d),c,t,0)}formatText(t,e,i,s,c){let d;return[t,e,d,c]=Ms(t,e,i,s,c),Fr.call(this,()=>this.editor.formatText(t,e,d),c,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=null;if(typeof t=="number"?i=this.selection.getBounds(t,e):i=this.selection.getBounds(t.index,t.length),!i)return null;let s=this.container.getBoundingClientRect();return{bottom:i.bottom-s.top,height:i.height,left:i.left-s.left,right:i.right-s.left,top:i.top-s.top,width:i.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=Ms(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Ms(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Ms(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n.sources.API;return Fr.call(this,()=>this.editor.insertEmbed(t,e,i),s,t)}insertText(t,e,i,s,c){let d;return[t,,d,c]=Ms(t,0,i,s,c),Fr.call(this,()=>this.editor.insertText(t,e,d),c,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,i){return[t,e,,i]=Ms(t,e,i),Fr.call(this,()=>this.editor.removeFormat(t,e),i,t)}scrollRectIntoView(t){Yw(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rt.sources.API;return Fr.call(this,()=>{t=new wo.default(t);let i=this.getLength(),s=this.editor.deleteText(0,i),c=this.editor.insertContents(0,t),d=this.editor.deleteText(this.getLength()-1,1);return s.compose(c).compose(d)},e)}setSelection(t,e,i){t==null?this.selection.setRange(null,e||n.sources.API):([t,e,,i]=Ms(t,e,i),this.selection.setRange(new Si(Math.max(0,t),e),i),i!==Rt.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rt.sources.API,i=new wo.default().insert(t);return this.setContents(i,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rt.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rt.sources.API;return Fr.call(this,()=>(t=new wo.default(t),this.editor.applyDelta(t)),e,!0)}};function Jw(n){return typeof n=="string"?document.querySelector(n):n}a(Jw,"resolveSelector");function Pg(n){return Object.entries(n??{}).reduce((t,e)=>{let[i,s]=e;return{...t,[i]:s===!0?{}:s}},{})}a(Pg,"expandModuleConfig");function Qw(n){return Object.fromEntries(Object.entries(n).filter(t=>t[1]!==void 0))}a(Qw,"omitUndefinedValuesFromOptions");function aP(n,t){let e=Jw(n);if(!e)throw new Error("Invalid Quill container");let s=!t.theme||t.theme===at.DEFAULTS.theme?kl:at.import(`themes/${t.theme}`);if(!s)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);let{modules:c,...d}=at.DEFAULTS,{modules:m,...v}=s.DEFAULTS,y=Hi({},Pg(c),Pg(m),Pg(t.modules));y!=null&&y.toolbar&&y.toolbar.constructor!==Object&&(y.toolbar={container:y.toolbar});let x={...d,...Qw(v),...Qw(t)},E=t.registry;return E?t.formats&&Ml.warn('Ignoring "formats" option because "registry" is specified'):E=t.formats?Xw(t.formats,x.registry,Ml):x.registry,{...x,registry:E,container:e,theme:s,modules:Object.entries(y).reduce((A,C)=>{let[k,H]=C;if(!H)return A;let M=at.import(`modules/${k}`);return M==null?(Ml.error(`Cannot load ${k} module. Are you sure you registered it?`),A):{...A,[k]:Hi({},M.DEFAULTS||{},H)}},{}),bounds:Jw(x.bounds)}}a(aP,"expandConfig");function Fr(n,t,e,i){if(!this.isEnabled()&&t===Rt.sources.USER&&!this.allowReadOnlyEdits)return new wo.default;let s=e==null?null:this.getSelection(),c=this.editor.delta,d=n();if(s!=null&&(e===!0&&(e=s.index),i==null?s=tx(s,d,t):i!==0&&(s=tx(s,e,i,t)),this.setSelection(s,Rt.sources.SILENT)),d.length()>0){let m=[Rt.events.TEXT_CHANGE,d,c,t];this.emitter.emit(Rt.events.EDITOR_CHANGE,...m),t!==Rt.sources.SILENT&&this.emitter.emit(...m)}return d}a(Fr,"modify");function Ms(n,t,e,i,s){let c={};return typeof n.index=="number"&&typeof n.length=="number"?typeof t!="number"?(s=i,i=e,e=t,t=n.length,n=n.index):(t=n.length,n=n.index):typeof t!="number"&&(s=i,i=e,e=t,t=0),typeof e=="object"?(c=e,s=i):typeof e=="string"&&(i!=null?c[e]=i:s=e),s=s||Rt.sources.API,[n,t,c,s]}a(Ms,"overload");function tx(n,t,e,i){let s=typeof e=="number"?e:0;if(n==null)return null;let c,d;return t&&typeof t.transformPosition=="function"?[c,d]=[n.index,n.index+n.length].map(m=>t.transformPosition(m,i!==Rt.sources.USER)):[c,d]=[n.index,n.index+n.length].map(m=>m<t||m===t&&i===Rt.sources.USER?m:s>=0?m+s:Math.max(t,m+s)),new Si(c,d-c)}a(tx,"shiftRange");var qg=class extends _l{static{a(this,"Container")}},_r=qg;var wr=$n(nr(),1);function ex(n){return n instanceof Ge||n instanceof jn}a(ex,"isLine");function nx(n){return typeof n.updateContent=="function"}a(nx,"isUpdatable");var Bg=class extends lu{static{a(this,"Scroll")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ge;static allowedChildren=[Ge,jn,_r];constructor(t,e,i){let{emitter:s}=i;super(t,e),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",c=>this.handleDragStart(c))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Rt.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Rt.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(Rt.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){let[i,s]=this.line(t),[c]=this.line(t+e);if(super.deleteAt(t,e),c!=null&&i!==c&&s>0){if(i instanceof jn||c instanceof jn){this.optimize();return}let d=c.children.head instanceof li?null:c.children.head;i.moveChildren(c,d),i.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,i,s){super.formatAt(t,e,i,s),this.optimize()}insertAt(t,e,i){if(t>=this.length())if(i==null||this.scroll.query(e,Ct.BLOCK)==null){let s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),i==null&&e.endsWith(`
`)?s.insertAt(0,e.slice(0,-1),i):s.insertAt(0,e,i)}else{let s=this.scroll.create(e,i);this.appendChild(s)}else super.insertAt(t,e,i);this.optimize()}insertBefore(t,e){if(t.statics.scope===Ct.INLINE_BLOT){let i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),super.insertBefore(i,e)}else super.insertBefore(t,e)}insertContents(t,e){let i=this.deltaToRenderBlocks(e.concat(new wr.default().insert(`
`))),s=i.pop();if(s==null)return;this.batchStart();let c=i.shift();if(c){let v=c.type==="block"&&(c.delta.length()===0||!this.descendant(jn,t)[0]&&t<this.length()),y=c.type==="block"?c.delta:new wr.default().insert({[c.key]:c.value});Rg(this,t,y);let x=c.type==="block"?1:0,E=t+y.length()+x;v&&this.insertAt(E-1,`
`);let A=Vi(this.line(t)[0]),C=wr.AttributeMap.diff(A,c.attributes)||{};Object.keys(C).forEach(k=>{this.formatAt(E-1,1,k,C[k])}),t=E}let[d,m]=this.children.find(t);if(i.length&&(d&&(d=d.split(m),m=0),i.forEach(v=>{if(v.type==="block"){let y=this.createBlock(v.attributes,d||void 0);Rg(y,0,v.delta)}else{let y=this.create(v.key,v.value);this.insertBefore(y,d||void 0),Object.keys(v.attributes).forEach(x=>{y.format(x,v.attributes[x])})}})),s.type==="block"&&s.delta.length()){let v=d?d.offset(d.scroll)+m:this.length();Rg(this,v,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){let e=this.path(t).pop();if(!e)return[null,-1];let[i,s]=e;return i instanceof On?[i,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(ex,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=a((s,c,d)=>{let m=[],v=d;return s.children.forEachAt(c,d,(y,x,E)=>{ex(y)?m.push(y):y instanceof _l&&(m=m.concat(i(y,x,v))),v-=E}),m},"getLines");return i(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(Rt.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=Rt.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(i=>{let{target:s}=i,c=this.find(s,!0);return c&&!nx(c)}),t.length>0&&this.emitter.emit(Rt.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Rt.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,i){let[s]=this.descendant(c=>c instanceof jn,t);s&&s.statics.blotName===e&&nx(s)&&s.updateContent(i)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){let e=[],i=new wr.default;return t.forEach(s=>{let c=s?.insert;if(c)if(typeof c=="string"){let d=c.split(`
`);d.slice(0,-1).forEach(v=>{i.insert(v,s.attributes),e.push({type:"block",delta:i,attributes:s.attributes??{}}),i=new wr.default});let m=d[d.length-1];m&&i.insert(m,s.attributes)}else{let d=Object.keys(c)[0];if(!d)return;this.query(d,Ct.INLINE)?i.push(s):(i.length()&&e.push({type:"block",delta:i,attributes:{}}),i=new wr.default,e.push({type:"blockEmbed",key:d,value:c[d],attributes:s.attributes??{}}))}}),i.length()&&e.push({type:"block",delta:i,attributes:{}}),e}createBlock(t,e){let i,s={};Object.entries(t).forEach(m=>{let[v,y]=m;this.query(v,Ct.BLOCK&Ct.BLOT)!=null?i=v:s[v]=y});let c=this.create(i||this.statics.defaultChild.blotName,i?t[i]:void 0);this.insertBefore(c,e||void 0);let d=c.length();return Object.entries(s).forEach(m=>{let[v,y]=m;c.formatAt(0,d,v,y)}),c}};function Rg(n,t,e){e.reduce((i,s)=>{let c=wr.Op.length(s),d=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){let m=s.insert;n.insertAt(i,m);let[v]=n.descendant(On,i),y=Vi(v);d=wr.AttributeMap.diff(y,d)||{}}else if(typeof s.insert=="object"){let m=Object.keys(s.insert)[0];if(m==null)return i;if(n.insertAt(i,m,s.insert[m]),n.scroll.query(m,Ct.INLINE)!=null){let[y]=n.descendant(On,i),x=Vi(y);d=wr.AttributeMap.diff(x,d)||{}}}}return Object.keys(d).forEach(m=>{n.formatAt(i,c,m,d[m])}),i+c},t)}a(Rg,"insertInlineContents");var ix=Bg;var Wi=$n(nr(),1);var jg={scope:Ct.BLOCK,whitelist:["right","center","justify"]},rx=new xi("align","align",jg),Fg=new Nn("align","ql-align",jg),sf=new Ui("align","text-align",jg);var Eu=class extends Ui{static{a(this,"ColorAttributor")}value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):e}},sx=new Nn("color","ql-color",{scope:Ct.INLINE}),Tu=new Eu("color","color",{scope:Ct.INLINE});var ox=new Nn("background","ql-bg",{scope:Ct.INLINE}),Su=new Eu("background","background-color",{scope:Ct.INLINE});var is=class extends _r{static{a(this,"CodeBlockContainer")}static create(t){let e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${ba(this.code(t,e))}
</pre>`}},Mn=class extends Ge{static{a(this,"CodeBlock")}static TAB="  ";static register(){at.register(is)}},Il=class extends ci{static{a(this,"Code")}};Il.blotName="code";Il.tagName="CODE";Mn.blotName="code-block";Mn.className="ql-code-block";Mn.tagName="DIV";is.blotName="code-block-container";is.className="ql-code-block-container";is.tagName="DIV";is.allowedChildren=[Mn];Mn.allowedChildren=[xn,li,_o];Mn.requiredContainer=is;var Hg={scope:Ct.BLOCK,whitelist:["rtl"]},of=new xi("direction","dir",Hg),zg=new Nn("direction","ql-direction",Hg),af=new Ui("direction","direction",Hg);var ax={scope:Ct.INLINE,whitelist:["serif","monospace"]},Vg=new Nn("font","ql-font",ax),Ug=class extends Ui{static{a(this,"FontStyleAttributor")}value(t){return super.value(t).replace(/["']/g,"")}},lf=new Ug("font","font-family",ax);var Wg=new Nn("size","ql-size",{scope:Ct.INLINE,whitelist:["small","large","huge"]}),cf=new Ui("size","font-size",{scope:Ct.INLINE,whitelist:["10px","18px","32px"]});var hi=$n(nr(),1);var lP=ir("quill:keyboard"),cP=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Au=class n extends kn{static{a(this,"Keyboard")}static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!e[i]!==t[i]&&e[i]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=hP(t);if(s==null){lP.warn("Attempted to add invalid keyboard binding",s);return}typeof e=="function"&&(e={handler:e}),typeof i=="function"&&(i={handler:i}),(Array.isArray(s.key)?s.key:[s.key]).forEach(d=>{let m={...s,key:d,...e,...i};this.bindings[m.key]=this.bindings[m.key]||[],this.bindings[m.key].push(m)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing)return;let i=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(M=>n.match(t,M));if(i.length===0)return;let s=at.find(t.target,!0);if(s&&s.scroll!==this.quill.scroll)return;let c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;let[d,m]=this.quill.getLine(c.index),[v,y]=this.quill.getLeaf(c.index),[x,E]=c.length===0?[v,y]:this.quill.getLeaf(c.index+c.length),A=v instanceof wl?v.value().slice(0,y):"",C=x instanceof wl?x.value().slice(E):"",k={collapsed:c.length===0,empty:c.length===0&&d.length()<=1,format:this.quill.getFormat(c),line:d,offset:m,prefix:A,suffix:C,event:t};i.some(M=>{if(M.collapsed!=null&&M.collapsed!==k.collapsed||M.empty!=null&&M.empty!==k.empty||M.offset!=null&&M.offset!==k.offset)return!1;if(Array.isArray(M.format)){if(M.format.every(q=>k.format[q]==null))return!1}else if(typeof M.format=="object"&&!Object.keys(M.format).every(q=>M.format[q]===!0?k.format[q]!=null:M.format[q]===!1?k.format[q]==null:la(M.format[q],k.format[q])))return!1;return M.prefix!=null&&!M.prefix.test(k.prefix)||M.suffix!=null&&!M.suffix.test(k.suffix)?!1:M.handler.call(this,c,k,M)!==!0})&&t.preventDefault()})}handleBackspace(t,e){let i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={},[c]=this.quill.getLine(t.index),d=new hi.default().retain(t.index-i).delete(i);if(e.offset===0){let[m]=this.quill.getLine(t.index-1);if(m&&!(m.statics.blotName==="block"&&m.length()<=1)){let y=c.formats(),x=this.quill.getFormat(t.index-1,1);if(s=hi.AttributeMap.diff(y,x)||{},Object.keys(s).length>0){let E=new hi.default().retain(t.index+c.length()-2).retain(1,s);d=d.compose(E)}}}this.quill.updateContents(d,at.sources.USER),this.quill.focus()}handleDelete(t,e){let i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-i)return;let s={},[c]=this.quill.getLine(t.index),d=new hi.default().retain(t.index).delete(i);if(e.offset>=c.length()-1){let[m]=this.quill.getLine(t.index+1);if(m){let v=c.formats(),y=this.quill.getFormat(t.index,1);s=hi.AttributeMap.diff(v,y)||{},Object.keys(s).length>0&&(d=d.retain(m.length()-1).retain(1,s))}}this.quill.updateContents(d,at.sources.USER),this.quill.focus()}handleDeleteRange(t){Lu({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){let i=Object.keys(e.format).reduce((c,d)=>(this.quill.scroll.query(d,Ct.BLOCK)&&!Array.isArray(e.format[d])&&(c[d]=e.format[d]),c),{}),s=new hi.default().retain(t.index).delete(t.length).insert(`
`,i);this.quill.updateContents(s,at.sources.USER),this.quill.setSelection(t.index+1,at.sources.SILENT),this.quill.focus()}},uP={bindings:{bold:Zg("bold"),italic:Zg("italic"),underline:Zg("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",at.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",at.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,t){t.format.indent!=null?this.quill.format("indent","-1",at.sources.USER):t.format.list!=null&&this.quill.format("list",!1,at.sources.USER)}},"indent code-block":lx(!0),"outdent code-block":lx(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,at.sources.USER)}},tab:{key:"Tab",handler(n,t){if(t.format.table)return!0;this.quill.history.cutoff();let e=new hi.default().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,at.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,at.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,at.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,t){let e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,at.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){let[t,e]=this.quill.getLine(n.index),i={...t.formats(),list:"checked"},s=new hi.default().retain(n.index).insert(`
`,i).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,at.sources.USER),this.quill.setSelection(n.index+1,at.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,t){let[e,i]=this.quill.getLine(n.index),s=new hi.default().retain(n.index).insert(`
`,t.format).retain(e.length()-i-1).retain(1,{header:null});this.quill.updateContents(s,at.sources.USER),this.quill.setSelection(n.index+1,at.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){let t=this.quill.getModule("table");if(t){let[e,i,s,c]=t.getTable(n),d=dP(e,i,s,c);if(d==null)return;let m=e.offset();if(d<0){let v=new hi.default().retain(m).insert(`
`);this.quill.updateContents(v,at.sources.USER),this.quill.setSelection(n.index+1,n.length,at.sources.SILENT)}else if(d>0){m+=e.length();let v=new hi.default().retain(m).insert(`
`);this.quill.updateContents(v,at.sources.USER),this.quill.setSelection(m,at.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,t){let{event:e,line:i}=t,s=i.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(s-1,at.sources.USER):this.quill.setSelection(s+i.length(),at.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,t){if(this.quill.scroll.query("list")==null)return!0;let{length:e}=t.prefix,[i,s]=this.quill.getLine(n.index);if(s>e)return!0;let c;switch(t.prefix.trim()){case"[]":case"[ ]":c="unchecked";break;case"[x]":c="checked";break;case"-":case"*":c="bullet";break;default:c="ordered"}this.quill.insertText(n.index," ",at.sources.USER),this.quill.history.cutoff();let d=new hi.default().retain(n.index-s).delete(e+1).retain(i.length()-2-s).retain(1,{list:c});return this.quill.updateContents(d,at.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,at.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){let[t,e]=this.quill.getLine(n.index),i=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,i-=1,i<=0){let c=new hi.default().retain(n.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(c,at.sources.USER),this.quill.setSelection(n.index-1,at.sources.SILENT),!1}return!0}},"embed left":uf("ArrowLeft",!1),"embed left shift":uf("ArrowLeft",!0),"embed right":uf("ArrowRight",!1),"embed right shift":uf("ArrowRight",!0),"table down":cx(!1),"table up":cx(!0)}};Au.DEFAULTS=uP;function lx(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(t,e){let{event:i}=e,s=this.quill.scroll.query("code-block"),{TAB:c}=s;if(t.length===0&&!i.shiftKey){this.quill.insertText(t.index,c,at.sources.USER),this.quill.setSelection(t.index+c.length,at.sources.SILENT);return}let d=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t),{index:m,length:v}=t;d.forEach((y,x)=>{n?(y.insertAt(0,c),x===0?m+=c.length:v+=c.length):y.domNode.textContent.startsWith(c)&&(y.deleteAt(0,c.length),x===0?m-=c.length:v-=c.length)}),this.quill.update(at.sources.USER),this.quill.setSelection(m,v,at.sources.SILENT)}}}a(lx,"makeCodeBlockHandler");function uf(n,t){return{key:n,shiftKey:t,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(i){let{index:s}=i;n==="ArrowRight"&&(s+=i.length+1);let[c]=this.quill.getLeaf(s);return c instanceof gn?(n==="ArrowLeft"?t?this.quill.setSelection(i.index-1,i.length+1,at.sources.USER):this.quill.setSelection(i.index-1,at.sources.USER):t?this.quill.setSelection(i.index,i.length+1,at.sources.USER):this.quill.setSelection(i.index+i.length+1,at.sources.USER),!1):!0}}}a(uf,"makeEmbedArrowHandler");function Zg(n){return{key:n[0],shortKey:!0,handler(t,e){this.quill.format(n,!e.format[n],at.sources.USER)}}}a(Zg,"makeFormatHandler");function cx(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){let i=n?"prev":"next",s=e.line,c=s.parent[i];if(c!=null){if(c.statics.blotName==="table-row"){let d=c.children.head,m=s;for(;m.prev!=null;)m=m.prev,d=d.next;let v=d.offset(this.quill.scroll)+Math.min(e.offset,d.length()-1);this.quill.setSelection(v,0,at.sources.USER)}}else{let d=s.table()[i];d!=null&&(n?this.quill.setSelection(d.offset(this.quill.scroll)+d.length()-1,0,at.sources.USER):this.quill.setSelection(d.offset(this.quill.scroll),0,at.sources.USER))}return!1}}}a(cx,"makeTableArrowHandler");function hP(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=es(n);else return null;return n.shortKey&&(n[cP]=n.shortKey,delete n.shortKey),n}a(hP,"normalize");function Lu(n){let{quill:t,range:e}=n,i=t.getLines(e),s={};if(i.length>1){let c=i[0].formats(),d=i[i.length-1].formats();s=hi.AttributeMap.diff(d,c)||{}}t.deleteText(e,at.sources.USER),Object.keys(s).length>0&&t.formatLine(e.index,1,s,at.sources.USER),t.setSelection(e.index,at.sources.SILENT)}a(Lu,"deleteRange");function dP(n,t,e,i){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?i===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}a(dP,"tableSide");var fP=/font-weight:\s*normal/,pP=["P","OL","UL"],ux=a(n=>n&&pP.includes(n.tagName),"isBlockElement"),mP=a(n=>{Array.from(n.querySelectorAll("br")).filter(t=>ux(t.previousElementSibling)&&ux(t.nextElementSibling)).forEach(t=>{t.parentNode?.removeChild(t)})},"normalizeEmptyLines"),gP=a(n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(t=>t.getAttribute("style")?.match(fP)).forEach(t=>{let e=n.createDocumentFragment();e.append(...t.childNodes),t.parentNode?.replaceChild(e,t)})},"normalizeFontWeight");function $g(n){n.querySelector('[id^="docs-internal-guid-"]')&&(gP(n),mP(n))}a($g,"normalize");var vP=/\bmso-list:[^;]*ignore/i,bP=/\bmso-list:[^;]*\bl(\d+)/i,yP=/\bmso-list:[^;]*\blevel(\d+)/i,_P=a((n,t)=>{let e=n.getAttribute("style"),i=e?.match(bP);if(!i)return null;let s=Number(i[1]),c=e?.match(yP),d=c?Number(c[1]):1,m=new RegExp(`@list l${s}:level${d}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),v=t.match(m),y=v&&v[1]==="bullet"?"bullet":"ordered";return{id:s,indent:d,type:y,element:n}},"parseListItem"),wP=a(n=>{let t=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],i=[];t.forEach(d=>{(d.getAttribute("style")||"").match(vP)?e.push(d):i.push(d)}),e.forEach(d=>d.parentNode?.removeChild(d));let s=n.documentElement.innerHTML,c=i.map(d=>_P(d,s)).filter(d=>d);for(;c.length;){let d=[],m=c.shift();for(;m;)d.push(m),m=c.length&&c[0]?.element===m.element.nextElementSibling&&c[0].id===m.id?c.shift():null;let v=document.createElement("ul");d.forEach(E=>{let A=document.createElement("li");A.setAttribute("data-list",E.type),E.indent>1&&A.setAttribute("class",`ql-indent-${E.indent-1}`),A.innerHTML=E.element.innerHTML,v.appendChild(A)});let y=d[0]?.element,{parentNode:x}=y??{};y&&x?.replaceChild(v,y),d.slice(1).forEach(E=>{let{element:A}=E;x?.removeChild(A)})}},"normalizeListItem");function Kg(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&wP(n)}a(Kg,"normalize");var xP=[Kg,$g],EP=a(n=>{n.documentElement&&xP.forEach(t=>{t(n)})},"normalizeExternalHTML"),hx=EP;var TP=ir("quill:clipboard"),SP=[[Node.TEXT_NODE,RP],[Node.TEXT_NODE,fx],["br",OP],[Node.ELEMENT_NODE,fx],[Node.ELEMENT_NODE,NP],[Node.ELEMENT_NODE,CP],[Node.ELEMENT_NODE,PP],["li",IP],["ol, ul",DP],["pre",kP],["tr",qP],["b",Gg("bold")],["i",Gg("italic")],["strike",Gg("strike")],["style",MP]],AP=[rx,of].reduce((n,t)=>(n[t.keyName]=t,n),{}),dx=[sf,Su,Tu,af,lf,cf].reduce((n,t)=>(n[t.keyName]=t,n),{}),df=class extends kn{static{a(this,"Clipboard")}static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",i=>this.onCaptureCopy(i,!1)),this.quill.root.addEventListener("cut",i=>this.onCaptureCopy(i,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],SP.concat(this.options.matchers??[]).forEach(i=>{let[s,c]=i;this.addMatcher(s,c)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:i}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[Mn.blotName])return new Wi.default().insert(i||"",{[Mn.blotName]:s[Mn.blotName]});if(!e)return new Wi.default().insert(i||"",s);let c=this.convertHTML(e);return Cu(c,`
`)&&(c.ops[c.ops.length-1].attributes==null||s.table)?c.compose(new Wi.default().retain(c.length()-1).delete(1)):c}normalizeHTML(t){hx(t)}convertHTML(t){let e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);let i=e.body,s=new WeakMap,[c,d]=this.prepareMatching(i,s);return ff(this.quill.scroll,i,c,d,s)}dangerouslyPasteHTML(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:at.sources.API;if(typeof t=="string"){let s=this.convert({html:t,text:""});this.quill.setContents(s,e),this.quill.setSelection(0,at.sources.SILENT)}else{let s=this.convert({html:e,text:""});this.quill.updateContents(new Wi.default().retain(t).concat(s),i),this.quill.setSelection(t+s.length(),at.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();let[i]=this.quill.selection.getRange();if(i==null)return;let{html:s,text:c}=this.onCopy(i,e);t.clipboardData?.setData("text/plain",c),t.clipboardData?.setData("text/html",s),e&&Lu({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();let e=this.quill.getSelection(!0);if(e==null)return;let i=t.clipboardData?.getData("text/html"),s=t.clipboardData?.getData("text/plain");if(!i&&!s){let d=t.clipboardData?.getData("text/uri-list");d&&(s=this.normalizeURIList(d))}let c=Array.from(t.clipboardData?.files||[]);if(!i&&c.length>0){this.quill.uploader.upload(e,c);return}if(i&&c.length>0){let d=new DOMParser().parseFromString(i,"text/html");if(d.body.childElementCount===1&&d.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(e,c);return}}this.onPaste(e,{html:i,text:s})}onCopy(t){let e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:i,html:s}=e,c=this.quill.getFormat(t.index),d=this.convert({text:i,html:s},c);TP.log("onPaste",d,{text:i,html:s});let m=new Wi.default().retain(t.index).delete(t.length).concat(d);this.quill.updateContents(m,at.sources.USER),this.quill.setSelection(m.length()-t.length,at.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){let i=[],s=[];return this.matchers.forEach(c=>{let[d,m]=c;switch(d){case Node.TEXT_NODE:s.push(m);break;case Node.ELEMENT_NODE:i.push(m);break;default:Array.from(t.querySelectorAll(d)).forEach(v=>{e.has(v)?e.get(v)?.push(m):e.set(v,[m])});break}}),[i,s]}};function ya(n,t,e,i){return i.query(t)?n.reduce((s,c)=>{if(!c.insert)return s;if(c.attributes&&c.attributes[t])return s.push(c);let d=e?{[t]:e}:{};return s.insert(c.insert,{...d,...c.attributes})},new Wi.default):n}a(ya,"applyFormat");function Cu(n,t){let e="";for(let i=n.ops.length-1;i>=0&&e.length<t.length;--i){let s=n.ops[i];if(typeof s.insert!="string")break;e=s.insert+e}return e.slice(-1*t.length)===t}a(Cu,"deltaEndsWith");function xo(n,t){if(!(n instanceof Element))return!1;let e=t.query(n);return e&&e.prototype instanceof gn?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}a(xo,"isLine");function LP(n,t){return n.previousElementSibling&&n.nextElementSibling&&!xo(n.previousElementSibling,t)&&!xo(n.nextElementSibling,t)}a(LP,"isBetweenInlineElements");var hf=new WeakMap;function px(n){return n==null?!1:(hf.has(n)||(n.tagName==="PRE"?hf.set(n,!0):hf.set(n,px(n.parentNode))),hf.get(n))}a(px,"isPre");function ff(n,t,e,i,s){return t.nodeType===t.TEXT_NODE?i.reduce((c,d)=>d(t,c,n),new Wi.default):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((c,d)=>{let m=ff(n,d,e,i,s);return d.nodeType===t.ELEMENT_NODE&&(m=e.reduce((v,y)=>y(d,v,n),m),m=(s.get(d)||[]).reduce((v,y)=>y(d,v,n),m)),c.concat(m)},new Wi.default):new Wi.default}a(ff,"traverse");function Gg(n){return(t,e,i)=>ya(e,n,!0,i)}a(Gg,"createMatchAlias");function CP(n,t,e){let i=xi.keys(n),s=Nn.keys(n),c=Ui.keys(n),d={};return i.concat(s).concat(c).forEach(m=>{let v=e.query(m,Ct.ATTRIBUTE);v!=null&&(d[v.attrName]=v.value(n),d[v.attrName])||(v=AP[m],v!=null&&(v.attrName===m||v.keyName===m)&&(d[v.attrName]=v.value(n)||void 0),v=dx[m],v!=null&&(v.attrName===m||v.keyName===m)&&(v=dx[m],d[v.attrName]=v.value(n)||void 0))}),Object.entries(d).reduce((m,v)=>{let[y,x]=v;return ya(m,y,x,e)},t)}a(CP,"matchAttributor");function NP(n,t,e){let i=e.query(n);if(i==null)return t;if(i.prototype instanceof gn){let s={},c=i.value(n);if(c!=null)return s[i.blotName]=c,new Wi.default().insert(s,i.formats(n,e))}else if(i.prototype instanceof ca&&!Cu(t,`
`)&&t.insert(`
`),"blotName"in i&&"formats"in i&&typeof i.formats=="function")return ya(t,i.blotName,i.formats(n,e),e);return t}a(NP,"matchBlot");function OP(n,t){return Cu(t,`
`)||t.insert(`
`),t}a(OP,"matchBreak");function kP(n,t,e){let i=e.query("code-block"),s=i&&"formats"in i&&typeof i.formats=="function"?i.formats(n,e):!0;return ya(t,"code-block",s,e)}a(kP,"matchCodeBlock");function MP(){return new Wi.default}a(MP,"matchIgnore");function IP(n,t,e){let i=e.query(n);if(i==null||i.blotName!=="list"||!Cu(t,`
`))return t;let s=-1,c=n.parentNode;for(;c!=null;)["OL","UL"].includes(c.tagName)&&(s+=1),c=c.parentNode;return s<=0?t:t.reduce((d,m)=>m.insert?m.attributes&&typeof m.attributes.indent=="number"?d.push(m):d.insert(m.insert,{indent:s,...m.attributes||{}}):d,new Wi.default)}a(IP,"matchIndent");function DP(n,t,e){let i=n,s=i.tagName==="OL"?"ordered":"bullet",c=i.getAttribute("data-checked");return c&&(s=c==="true"?"checked":"unchecked"),ya(t,"list",s,e)}a(DP,"matchList");function fx(n,t,e){if(!Cu(t,`
`)){if(xo(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&n.nextSibling){let i=n.nextSibling;for(;i!=null;){if(xo(i,e))return t.insert(`
`);let s=e.query(i);if(s&&s.prototype instanceof jn)return t.insert(`
`);i=i.firstChild}}}return t}a(fx,"matchNewline");function PP(n,t,e){let i={},s=n.style||{};return s.fontStyle==="italic"&&(i.italic=!0),s.textDecoration==="underline"&&(i.underline=!0),s.textDecoration==="line-through"&&(i.strike=!0),(s.fontWeight?.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(i.bold=!0),t=Object.entries(i).reduce((c,d)=>{let[m,v]=d;return ya(c,m,v,e)},t),parseFloat(s.textIndent||0)>0?new Wi.default().insert("	").concat(t):t}a(PP,"matchStyles");function qP(n,t,e){let i=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(i!=null){let c=Array.from(i.querySelectorAll("tr")).indexOf(n)+1;return ya(t,"table",c,e)}return t}a(qP,"matchTable");function RP(n,t,e){let i=n.data;if(n.parentElement?.tagName==="O:P")return t.insert(i.trim());if(!px(n)){if(i.trim().length===0&&i.includes(`
`)&&!LP(n,e))return t;let s=a((c,d)=>{let m=d.replace(/[^\u00a0]/g,"");return m.length<1&&c?" ":m},"replacer");i=i.replace(/\r\n/g," ").replace(/\n/g," "),i=i.replace(/\s\s+/g,s.bind(s,!0)),(n.previousSibling==null&&n.parentElement!=null&&xo(n.parentElement,e)||n.previousSibling instanceof Element&&xo(n.previousSibling,e))&&(i=i.replace(/^\s+/,s.bind(s,!1))),(n.nextSibling==null&&n.parentElement!=null&&xo(n.parentElement,e)||n.nextSibling instanceof Element&&xo(n.nextSibling,e))&&(i=i.replace(/\s+$/,s.bind(s,!1)))}return t.insert(i)}a(RP,"matchText");var pf=class extends kn{static{a(this,"History")}static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(at.events.EDITOR_CHANGE,(i,s,c,d)=>{i===at.events.SELECTION_CHANGE?s&&d!==at.sources.SILENT&&(this.currentRange=s):i===at.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||d===at.sources.USER?this.record(s,c):this.transform(s)),this.currentRange=Yg(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(t,e){if(this.stack[t].length===0)return;let i=this.stack[t].pop();if(!i)return;let s=this.quill.getContents(),c=i.delta.invert(s);this.stack[e].push({delta:c,range:Yg(i.range,c)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,at.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(t.ops.length===0)return;this.stack.redo=[];let i=t.invert(e),s=this.currentRange,c=Date.now();if(this.lastRecorded+this.options.delay>c&&this.stack.undo.length>0){let d=this.stack.undo.pop();d&&(i=i.compose(d.delta),s=d.range)}else this.lastRecorded=c;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){mx(this.stack.undo,t),mx(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,at.sources.USER);else{let e=jP(this.quill.scroll,t.delta);this.quill.setSelection(e,at.sources.USER)}}};function mx(n,t){let e=t;for(let i=n.length-1;i>=0;i-=1){let s=n[i];n[i]={delta:e.transform(s.delta,!0),range:s.range&&Yg(s.range,e)},e=s.delta.transform(e),n[i].delta.length()===0&&n.splice(i,1)}}a(mx,"transformStack");function BP(n,t){let e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(i=>n.query(i,Ct.BLOCK)!=null):!1}a(BP,"endsWithNewlineChange");function jP(n,t){let e=t.reduce((s,c)=>s+(c.delete||0),0),i=t.length()-e;return BP(n,t)&&(i-=1),i}a(jP,"getLastChangeIndex");function Yg(n,t){if(!n)return n;let e=t.transformPosition(n.index),i=t.transformPosition(n.index+n.length);return{index:e,length:i-e}}a(Yg,"transformRange");var gx=$n(nr(),1);var mf=class extends kn{static{a(this,"Uploader")}constructor(t,e){super(t,e),t.root.addEventListener("drop",i=>{i.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint){let d=document.caretPositionFromPoint(i.clientX,i.clientY);s=document.createRange(),s.setStart(d.offsetNode,d.offset),s.setEnd(d.offsetNode,d.offset)}let c=s&&t.selection.normalizeNative(s);if(c){let d=t.selection.normalizedToRange(c);i.dataTransfer?.files&&this.upload(d,i.dataTransfer.files)}})}upload(t,e){let i=[];Array.from(e).forEach(s=>{s&&this.options.mimetypes?.includes(s.type)&&i.push(s)}),i.length>0&&this.options.handler.call(this,t,i)}};mf.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,t){let e=t.map(i=>new Promise(s=>{let c=new FileReader;c.onload=d=>{s(d.target.result)},c.readAsDataURL(i)}));Promise.all(e).then(i=>{let s=i.reduce((c,d)=>c.insert({image:d}),new gx.default().retain(n.index).delete(n.length));this.quill.updateContents(s,Rt.sources.USER),this.quill.setSelection(n.index+i.length,Rt.sources.SILENT)})}};var vx=mf;var gf=$n(nr(),1);var bx=$n(nr(),1);var FP=["insertText","insertReplacementText"],Xg=class extends kn{static{a(this,"Input")}constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||t.on(at.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){Lu({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){let i=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new bx.default().retain(t.index).insert(e,i),at.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,at.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!FP.includes(t.inputType))return;let e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;let i=HP(t);if(i==null)return;let s=this.quill.selection.normalizeNative(e),c=s?this.quill.selection.normalizedToRange(s):null;c&&this.replaceText(c,i)&&t.preventDefault()}handleCompositionStart(){let t=this.quill.getSelection();t&&this.replaceText(t)}};function HP(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}a(HP,"getPlainTextFromInputEvent");var yx=Xg;var zP=/Mac/i.test(navigator.platform),UP=100,VP=a(n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||zP&&n.key==="a"&&n.ctrlKey===!0),"canMoveCaretBeforeUINode"),Jg=class extends kn{static{a(this,"UINode")}isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:i,event:s}=e;if(!(i instanceof zi)||!i.uiNode)return!0;let c=getComputedStyle(i.domNode).direction==="rtl";return c&&s.key!=="ArrowRight"||!c&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),at.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&VP(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+UP,this.isListening)return;this.isListening=!0;let t=a(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},"listener");document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){let t=document.getSelection();if(!t)return;let e=t.getRangeAt(0);if(e.collapsed!==!0||e.startOffset!==0)return;let i=this.quill.scroll.find(e.startContainer);if(!(i instanceof zi)||!i.uiNode)return;let s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),t.removeAllRanges(),t.addRange(s)}},_x=Jg;at.register({"blots/block":Ge,"blots/block/embed":jn,"blots/break":li,"blots/container":_r,"blots/cursor":_o,"blots/embed":Ol,"blots/inline":ci,"blots/scroll":ix,"blots/text":xn,"modules/clipboard":df,"modules/history":pf,"modules/keyboard":Au,"modules/uploader":vx,"modules/input":yx,"modules/uiNode":_x});var vf=at;var Qg=class extends Nn{static{a(this,"IndentAttributor")}add(t,e){let i=0;if(e==="+1"||e==="-1"){let s=this.value(t)||0;i=e==="+1"?s+1:s-1}else typeof e=="number"&&(i=e);return i===0?(this.remove(t),!0):super.add(t,i.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}},WP=new Qg("indent","ql-indent",{scope:Ct.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),wx=WP;var tv=class extends Ge{static{a(this,"Blockquote")}static blotName="blockquote";static tagName="blockquote"},xx=tv;var ev=class extends Ge{static{a(this,"Header")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},Ex=ev;var _a=class extends _r{static{a(this,"ListContainer")}};_a.blotName="list-container";_a.tagName="OL";var Eo=class extends Ge{static{a(this,"ListItem")}static create(t){let e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){at.register(_a)}constructor(t,e){super(t,e);let i=e.ownerDocument.createElement("span"),s=a(c=>{if(!t.isEnabled())return;let d=this.statics.formats(e,t);d==="checked"?(this.format("list","unchecked"),c.preventDefault()):d==="unchecked"&&(this.format("list","checked"),c.preventDefault())},"listEventHandler");i.addEventListener("mousedown",s),i.addEventListener("touchstart",s),this.attachUI(i)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}};Eo.blotName="list";Eo.tagName="LI";_a.allowedChildren=[Eo];Eo.requiredContainer=_a;var nv=class extends ci{static{a(this,"Bold")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},Dl=nv;var iv=class extends Dl{static{a(this,"Italic")}static blotName="italic";static tagName=["EM","I"]},Tx=iv;var Is=class extends ci{static{a(this,"Link")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){let e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return rv(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}};function rv(n,t){let e=document.createElement("a");e.href=n;let i=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(i)>-1}a(rv,"sanitize");var sv=class extends ci{static{a(this,"Script")}static blotName="script";static tagName=["SUB","SUP"];static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}},Sx=sv;var ov=class extends Dl{static{a(this,"Strike")}static blotName="strike";static tagName=["S","STRIKE"]},Ax=ov;var av=class extends ci{static{a(this,"Underline")}static blotName="underline";static tagName="U"},Lx=av;var lv=class extends Ol{static{a(this,"Formula")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){let{formula:t}=this.value();return`<span>${t}</span>`}},Cx=lv;var Nx=["alt","height","width"],cv=class extends gn{static{a(this,"Image")}static blotName="image";static tagName="IMG";static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return Nx.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return rv(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){Nx.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},Ox=cv;var kx=["height","width"],uv=class extends jn{static{a(this,"Video")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){let e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return kx.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static sanitize(t){return Is.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){kx.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){let{video:t}=this.value();return`<a href="${t}">${t}</a>`}},Mx=uv;var bf=$n(nr(),1);var Nu=new Nn("code-token","hljs",{scope:Ct.INLINE}),Ds=class n extends ci{static{a(this,"CodeToken")}static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(Mn.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,i){super(t,e,i),Nu.add(this.domNode,i)}format(t,e){t!==n.blotName?super.format(t,e):e?Nu.add(this.domNode,e):(Nu.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Nu.value(this.domNode)||this.unwrap()}};Ds.blotName="code-token";Ds.className="ql-token";var Zi=class extends Mn{static{a(this,"SyntaxCodeBlock")}static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),Ds.blotName,!1),super.replaceWith(t,e)}},wa=class extends is{static{a(this,"SyntaxCodeBlockContainer")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===Zi.blotName&&(this.forceNext=!0,this.children.forEach(i=>{i.format(t,e)}))}formatAt(t,e,i,s){i===Zi.blotName&&(this.forceNext=!0),super.formatAt(t,e,i,s)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let s=`${Array.from(this.domNode.childNodes).filter(d=>d!==this.uiNode).map(d=>d.textContent).join(`
`)}
`,c=Zi.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){let d=this.children.reduce((v,y)=>v.concat(vg(y,!1)),new bf.default),m=t(s,c);d.diff(m).reduce((v,y)=>{let{retain:x,attributes:E}=y;return x?(E&&Object.keys(E).forEach(A=>{[Zi.blotName,Ds.blotName].includes(A)&&this.formatAt(v,x,A,E[A])}),v+x):v},0)}this.cachedText=s,this.forceNext=!1}}html(t,e){let[i]=this.children.find(t);return`<pre data-language="${i?Zi.formats(i.domNode):"plain"}">
${ba(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let e=Zi.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}};wa.allowedChildren=[Zi];Zi.requiredContainer=wa;Zi.allowedChildren=[Ds,_o,xn,li];var ZP=a((n,t,e)=>{if(typeof n.versionString=="string"){let i=n.versionString.split(".")[0];if(parseInt(i,10)>=11)return n.highlight(e,{language:t}).value}return n.highlight(t,e).value},"highlight"),Ou=class extends kn{static{a(this,"Syntax")}static register(){at.register(Ds,!0),at.register(Zi,!0),at.register(wa,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,s)=>{let{key:c}=s;return i[c]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(at.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof wa))return;let e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:s,label:c}=i,d=e.ownerDocument.createElement("option");d.textContent=c,d.setAttribute("value",s),e.appendChild(d)}),e.addEventListener("change",()=>{t.format(Zi.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=Zi.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(at.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(at.sources.USER);let i=this.quill.getSelection();(t==null?this.quill.scroll.descendants(wa):[t]).forEach(c=>{c.highlight(this.highlightBlot,e)}),this.quill.update(at.sources.SILENT),i!=null&&this.quill.setSelection(i,at.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return ba(t).split(`
`).reduce((s,c,d)=>(d!==0&&s.insert(`
`,{[Mn.blotName]:e}),s.insert(c)),new bf.default);let i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(Mn.className),i.innerHTML=ZP(this.options.hljs,e,t),ff(this.quill.scroll,i,[(s,c)=>{let d=Nu.value(s);return d?c.compose(new bf.default().retain(c.length(),{[Ds.blotName]:d})):c}],[(s,c)=>s.data.split(`
`).reduce((d,m,v)=>(v!==0&&d.insert(`
`,{[Mn.blotName]:e}),d.insert(m)),c)],new WeakMap)}};Ou.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var Ix=$n(nr(),1);var xr=class n extends Ge{static{a(this,"TableCell")}static blotName="table";static tagName="TD";static create(t){let e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",yf()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===n.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},rs=class extends _r{static{a(this,"TableRow")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let t=this.children.head.formats(),e=this.children.tail.formats(),i=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===e.table&&t.table===i.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;let i=e.formats(),s=e.next.formats();if(i.table!==s.table){let c=this.splitAfter(e);c&&c.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}},Hr=class extends _r{static{a(this,"TableBody")}static blotName="table-body";static tagName="TBODY"},xa=class extends _r{static{a(this,"TableContainer")}static blotName="table-container";static tagName="TABLE";balanceCells(){let t=this.descendants(rs),e=t.reduce((i,s)=>Math.max(s.children.length,i),0);t.forEach(i=>{new Array(e-i.children.length).fill(0).forEach(()=>{let s;i.children.head!=null&&(s=xr.formats(i.children.head.domNode));let c=this.scroll.create(xr.blotName,s);i.appendChild(c),c.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){let[e]=this.descendant(Hr);e==null||e.children.head==null||e.children.forEach(i=>{let s=i.children.at(t);s?.remove()})}insertColumn(t){let[e]=this.descendant(Hr);e==null||e.children.head==null||e.children.forEach(i=>{let s=i.children.at(t),c=xr.formats(i.children.head.domNode),d=this.scroll.create(xr.blotName,c);i.insertBefore(d,s)})}insertRow(t){let[e]=this.descendant(Hr);if(e==null||e.children.head==null)return;let i=yf(),s=this.scroll.create(rs.blotName);e.children.head.children.forEach(()=>{let d=this.scroll.create(xr.blotName,i);s.appendChild(d)});let c=e.children.at(t);e.insertBefore(s,c)}rows(){let t=this.children.head;return t==null?[]:t.children.map(e=>e)}};xa.allowedChildren=[Hr];Hr.requiredContainer=xa;Hr.allowedChildren=[rs];rs.requiredContainer=Hr;rs.allowedChildren=[xr];xr.requiredContainer=rs;function yf(){return`row-${Math.random().toString(36).slice(2,6)}`}a(yf,"tableId");var hv=class extends kn{static{a(this,"Table")}static register(){at.register(xr),at.register(rs),at.register(Hr),at.register(xa)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(xa).forEach(t=>{t.balanceCells()})}deleteColumn(){let[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(at.sources.USER))}deleteRow(){let[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(at.sources.USER))}deleteTable(){let[t]=this.getTable();if(t==null)return;let e=t.offset();t.remove(),this.quill.update(at.sources.USER),this.quill.setSelection(e,at.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];let[e,i]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==xr.blotName)return[null,null,null,-1];let s=e.parent;return[s.parent.parent,s,e,i]}insertColumn(t){let e=this.quill.getSelection();if(!e)return;let[i,s,c]=this.getTable(e);if(c==null)return;let d=c.cellOffset();i.insertColumn(d+t),this.quill.update(at.sources.USER);let m=s.rowOffset();t===0&&(m+=1),this.quill.setSelection(e.index+m,e.length,at.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){let e=this.quill.getSelection();if(!e)return;let[i,s,c]=this.getTable(e);if(c==null)return;let d=s.rowOffset();i.insertRow(d+t),this.quill.update(at.sources.USER),t>0?this.quill.setSelection(e,at.sources.SILENT):this.quill.setSelection(e.index+s.children.length,e.length,at.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){let i=this.quill.getSelection();if(i==null)return;let s=new Array(t).fill(0).reduce(c=>{let d=new Array(e).fill(`
`).join("");return c.insert(d,{table:yf()})},new Ix.default().retain(i.index));this.quill.updateContents(s,at.sources.USER),this.quill.setSelection(i.index,at.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(at.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(at.events.TEXT_CHANGE,(i,s,c)=>{c===at.sources.USER&&this.balanceTables()}),!0):!1)})}},Dx=hv;var Rx=$n(nr(),1);var Px=ir("quill:toolbar"),Pl=class extends kn{static{a(this,"Toolbar")}constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){let i=document.createElement("div");i.setAttribute("role","toolbar"),$P(i,this.options.container),t.container?.parentNode?.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Px.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{let s=this.options.handlers?.[i];s&&this.addHandler(i,s)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(at.events.EDITOR_CHANGE,()=>{let[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){Px.warn("ignoring attaching to nonexistent format",e,t);return}let i=t.tagName==="SELECT"?"change":"click";t.addEventListener(i,s=>{let c;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;let m=t.options[t.selectedIndex];m.hasAttribute("selected")?c=!1:c=m.value||!1}else t.classList.contains("ql-active")?c=!1:c=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();let[d]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,c);else if(this.quill.scroll.query(e).prototype instanceof gn){if(c=prompt(`Enter ${e}`),!c)return;this.quill.updateContents(new Rx.default().retain(d.index).delete(d.length).insert({[e]:c}),at.sources.USER)}else this.quill.format(e,c,at.sources.USER);this.update(d)}),this.controls.push([e,t])}update(t){let e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(i=>{let[s,c]=i;if(c.tagName==="SELECT"){let d=null;if(t==null)d=null;else if(e[s]==null)d=c.querySelector("option[selected]");else if(!Array.isArray(e[s])){let m=e[s];typeof m=="string"&&(m=m.replace(/"/g,'\\"')),d=c.querySelector(`option[value="${m}"]`)}d==null?(c.value="",c.selectedIndex=-1):d.selected=!0}else if(t==null)c.classList.remove("ql-active"),c.setAttribute("aria-pressed","false");else if(c.hasAttribute("value")){let d=e[s],m=d===c.getAttribute("value")||d!=null&&d.toString()===c.getAttribute("value")||d==null&&!c.getAttribute("value");c.classList.toggle("ql-active",m),c.setAttribute("aria-pressed",m.toString())}else{let d=e[s]!=null;c.classList.toggle("ql-active",d),c.setAttribute("aria-pressed",d.toString())}})}};Pl.DEFAULTS={};function qx(n,t,e){let i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${t}`),i.setAttribute("aria-pressed","false"),e!=null?(i.value=e,i.setAttribute("aria-label",`${t}: ${e}`)):i.setAttribute("aria-label",t),n.appendChild(i)}a(qx,"addButton");function $P(n,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{let i=document.createElement("span");i.classList.add("ql-formats"),e.forEach(s=>{if(typeof s=="string")qx(i,s);else{let c=Object.keys(s)[0],d=s[c];Array.isArray(d)?KP(i,c,d):qx(i,c,d)}}),n.appendChild(i)})}a($P,"addControls");function KP(n,t,e){let i=document.createElement("select");i.classList.add(`ql-${t}`),e.forEach(s=>{let c=document.createElement("option");s!==!1?c.setAttribute("value",String(s)):c.setAttribute("selected","selected"),i.appendChild(c)}),n.appendChild(i)}a(KP,"addSelect");Pl.DEFAULTS={container:null,handlers:{clean(){let n=this.quill.getSelection();if(n!=null)if(n.length===0){let t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,Ct.INLINE)!=null&&this.quill.format(e,!1,at.sources.USER)})}else this.quill.removeFormat(n,at.sources.USER)},direction(n){let{align:t}=this.quill.getFormat();n==="rtl"&&t==null?this.quill.format("align","right",at.sources.USER):!n&&t==="right"&&this.quill.format("align",!1,at.sources.USER),this.quill.format("direction",n,at.sources.USER)},indent(n){let t=this.quill.getSelection(),e=this.quill.getFormat(t),i=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let s=n==="+1"?1:-1;e.direction==="rtl"&&(s*=-1),this.quill.format("indent",i+s,at.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,at.sources.USER)},list(n){let t=this.quill.getSelection(),e=this.quill.getFormat(t);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,at.sources.USER):this.quill.format("list","unchecked",at.sources.USER):this.quill.format("list",n,at.sources.USER)}}};var GP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',YP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',XP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',JP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',QP='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',t2='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',e2='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',n2='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Bx='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',i2='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',r2='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',s2='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',o2='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',a2='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',l2='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',c2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',u2='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',h2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',d2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',f2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',p2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',m2='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',g2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',v2='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',b2='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',y2='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',_2='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',w2='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',x2='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',To={align:{"":GP,center:YP,right:XP,justify:JP},background:QP,blockquote:t2,bold:e2,clean:n2,code:Bx,"code-block":Bx,color:i2,direction:{"":r2,rtl:s2},formula:o2,header:{1:a2,2:l2},italic:c2,image:u2,indent:{"+1":h2,"-1":d2},link:f2,list:{bullet:p2,check:m2,ordered:g2},script:{sub:v2,super:b2},strike:y2,table:_2,underline:w2,video:x2};var E2='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',jx=0;function Fx(n,t){n.setAttribute(t,`${n.getAttribute(t)!=="true"}`)}a(Fx,"toggleAriaAttribute");var dv=class{static{a(this,"Picker")}constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Fx(this.label,"aria-expanded"),Fx(this.options,"aria-hidden")}buildItem(t){let e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");let i=t.getAttribute("value");return i&&e.setAttribute("data-value",i),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(e,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break;default:}}),e}buildLabel(){let t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=E2,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){let t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${jx}`,jx+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{let i=this.buildItem(e);t.appendChild(i),e.selected===!0&&this.selectItem(i)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.container.querySelector(".ql-selected");t!==i&&(i?.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){let i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);let e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},So=dv;var fv=class extends So{static{a(this,"ColorPicker")}constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(t){let e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);let i=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";i&&(i.tagName==="line"?i.style.stroke=s:i.style.fill=s)}},_f=fv;var pv=class extends So{static{a(this,"IconPicker")}constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=e[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);let i=t||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}},wf=pv;var T2=a(n=>{let{overflowY:t}=getComputedStyle(n,null);return t!=="visible"&&t!=="clip"},"isScrollable"),mv=class{static{a(this,"Tooltip")}constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,T2(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){let e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");let s=this.boundsContainer.getBoundingClientRect(),c=this.root.getBoundingClientRect(),d=0;if(c.right>s.right&&(d=s.right-c.right,this.root.style.left=`${e+d}px`),c.left<s.left&&(d=s.left-c.left,this.root.style.left=`${e+d}px`),c.bottom>s.bottom){let m=c.bottom-c.top,v=t.bottom-t.top+m;this.root.style.top=`${i-v}px`,this.root.classList.add("ql-flip")}return d}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},xf=mv;var S2=[!1,"center","right","justify"],A2=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L2=[!1,"serif","monospace"],C2=["1","2","3",!1],N2=["small",!1,"large","huge"],Ps=class extends kl{static{a(this,"BaseTheme")}constructor(t,e){super(t,e);let i=a(s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",i);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(c=>{c.container.contains(s.target)||c.close()})},"listener");t.emitter.listenDOM("click",document.body,i)}addModule(t){let e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(c=>{if(c.startsWith("ql-")&&(c=c.slice(3),e[c]!=null))if(c==="direction")i.innerHTML=e[c][""]+e[c].rtl;else if(typeof e[c]=="string")i.innerHTML=e[c];else{let d=i.value||"";d!=null&&e[c][d]&&(i.innerHTML=e[c][d])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&ku(s,S2),typeof e.align=="object"))return new wf(s,e.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){let c=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&ku(s,A2,c==="background"?"#ffffff":"#000000"),new _f(s,e[c])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?ku(s,L2):s.classList.contains("ql-header")?ku(s,C2):s.classList.contains("ql-size")&&ku(s,N2)),new So(s)});let i=a(()=>{this.pickers.forEach(s=>{s.update()})},"update");this.quill.on(Rt.events.EDITOR_CHANGE,i)}};Ps.DEFAULTS=Hi({},kl.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{let t=this.quill.getSelection(!0);this.quill.uploader.upload(t,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var ql=class extends xf{static{a(this,"BaseTooltip")}constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let i=this.quill.getBounds(this.quill.selection.savedRange);i!=null&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Rt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Rt.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=O2(t);case"formula":{if(!t)break;let e=this.quill.getSelection(!0);if(e!=null){let i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,Rt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(i+1," ",Rt.sources.USER),this.quill.setSelection(i+2,Rt.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function O2(n){let t=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:n}a(O2,"extractVideoUrl");function ku(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(i=>{let s=document.createElement("option");i===e?s.setAttribute("selected","selected"):s.setAttribute("value",String(i)),n.appendChild(s)})}a(ku,"fillSelect");var k2=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],gv=class extends ql{static{a(this,"BubbleTooltip")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(Rt.events.EDITOR_CHANGE,(i,s,c,d)=>{if(i===Rt.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&d===Rt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let m=this.quill.getLines(s.index,s.length);if(m.length===1){let v=this.quill.getBounds(s);v!=null&&this.position(v)}else{let v=m[m.length-1],y=this.quill.getIndex(v),x=Math.min(v.length()-1,s.index+s.length-y),E=this.quill.getBounds(new Si(y,x));E!=null&&this.position(E)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Rt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let t=this.quill.getSelection();if(t!=null){let e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){let e=super.position(t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",e!==0&&(i.style.marginLeft=`${-1*e-i.offsetWidth/2}px`),e}},Mu=class extends Ps{static{a(this,"BubbleTheme")}constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=k2),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new gv(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),To),this.buildPickers(t.container.querySelectorAll("select"),To))}};Mu.DEFAULTS=Hi({},Ps.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var M2=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],vv=class extends ql{static{a(this,"SnowTooltip")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){let e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,Rt.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Rt.events.SELECTION_CHANGE,(t,e,i)=>{if(t!=null){if(t.length===0&&i===Rt.sources.USER){let[s,c]=this.quill.scroll.descendant(Is,t.index);if(s!=null){this.linkRange=new Si(t.index-c,s.length());let d=Is.formats(s.domNode);this.preview.textContent=d,this.preview.setAttribute("href",d),this.show();let m=this.quill.getBounds(this.linkRange);m!=null&&this.position(m);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}},Ef=class extends Ps{static{a(this,"SnowTheme")}constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=M2),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),To),this.buildPickers(t.container.querySelectorAll("select"),To),this.tooltip=new vv(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,i)=>{t.handlers.link.call(t,!i.format.link)}))}};Ef.DEFAULTS=Hi({},Ps.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){let t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);let{tooltip:i}=this.quill.theme;i.edit("link",e)}else this.quill.format("link",!1)}}}}});var Hx=Ef;vf.register({"attributors/attribute/direction":of,"attributors/class/align":Fg,"attributors/class/background":ox,"attributors/class/color":sx,"attributors/class/direction":zg,"attributors/class/font":Vg,"attributors/class/size":Wg,"attributors/style/align":sf,"attributors/style/background":Su,"attributors/style/color":Tu,"attributors/style/direction":af,"attributors/style/font":lf,"attributors/style/size":cf},!0);vf.register({"formats/align":Fg,"formats/direction":zg,"formats/indent":wx,"formats/background":Su,"formats/color":Tu,"formats/font":Vg,"formats/size":Wg,"formats/blockquote":xx,"formats/code-block":Mn,"formats/header":Ex,"formats/list":Eo,"formats/bold":Dl,"formats/code":Il,"formats/italic":Tx,"formats/link":Is,"formats/script":Sx,"formats/strike":Ax,"formats/underline":Lx,"formats/formula":Cx,"formats/image":Ox,"formats/video":Mx,"modules/syntax":Ou,"modules/table":Dx,"modules/toolbar":Pl,"themes/bubble":Mu,"themes/snow":Hx,"ui/icons":To,"ui/picker":So,"ui/icon-picker":wf,"ui/color-picker":_f,"ui/tooltip":xf},!0);var bv=vf;var Vx=$n(Ux());bv.register("modules/htmlEditButton",Vx.default);var Iu=class extends Fe{static{a(this,"RichTextEditorController")}static targets=["field"];connect(){let t=this.fieldTarget;this.quill=new bv(this.querySelector(".quill"),{theme:"snow",modules:{htmlEditButton:{}}}),this.quill.on("text-change",(e,i,s)=>{this.fieldTarget.value=this.quill.root.innerHTML})}disconnect(){delete this.quill}};var Du=class extends Fe{static{a(this,"SelectAllController")}static targets=["resource"];change(t){let e=new Event("change");this.resourceTargets.forEach(i=>i.checked=t.target.checked),this.resourceTargets[0].dispatchEvent(e)}};var Pu=class extends Fe{static{a(this,"SlugonatorController")}static targets=["slug"];onChange(t){this.slugTarget.value=this.slugonate(t.target.value)}slugonate(t){return t.toLowerCase().normalize("NFD").replaceAll(/[\u0300-\u036f]/g,"").replaceAll(/[.,!@#$%^&*()]/g,"").replaceAll(" ","-")}};var Wx="&#8203;";function wv(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}a(wv,"e");function Zx(n){return function(t){if(Array.isArray(t))return wv(t)}(n)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(n)||function(t,e){if(t){if(typeof t=="string")return wv(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wv(t,e)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(Zx,"i");var Co={isEnabled:function(){var n;return(n=window.TAGIFY_DEBUG)===null||n===void 0||n},log:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var i;this.isEnabled()&&(i=console).log.apply(i,["[Tagify]:"].concat(Zx(t)))},warn:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var i;this.isEnabled()&&(i=console).warn.apply(i,["[Tagify]:"].concat(Zx(t)))}},Ru=a(function(n,t,e,i){return n=""+n,t=""+t,i&&(n=n.trim(),t=t.trim()),e?n==t:n.toLowerCase()==t.toLowerCase()},"s"),$x=a(function(n,t){return n&&Array.isArray(n)&&n.map(function(e){return Nv(e,t)})},"a");function Nv(n,t){var e,i={};for(e in n)t.indexOf(e)<0&&(i[e]=n[e]);return i}a(Nv,"o");function Kx(n){var t=document.createElement("div");return n.replace(/\&#?[0-9a-z]+;/gi,function(e){return t.innerHTML=e,t.innerText})}a(Kx,"r");function xv(n){return new DOMParser().parseFromString(n.trim(),"text/html").body.firstElementChild}a(xv,"l");function Gx(n,t){for(t=t||"previous";n=n[t+"Sibling"];)if(n.nodeType==3)return n}a(Gx,"d");function Ta(n){return typeof n=="string"?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):n}a(Ta,"c");function ss(n){var t=Object.prototype.toString.call(n).split(" ")[1].slice(0,-1);return n===Object(n)&&t!="Array"&&t!="Function"&&t!="RegExp"&&t!="HTMLUnknownElement"}a(ss,"u");function Fn(n,t,e){var i,s;function c(d,m){for(var v in m)if(m.hasOwnProperty(v)){if(ss(m[v])){ss(d[v])?c(d[v],m[v]):d[v]=Object.assign({},m[v]);continue}if(Array.isArray(m[v])){d[v]=Object.assign([],m[v]);continue}d[v]=m[v]}}return a(c,"a"),i=n,((s=Object)!=null&&typeof Symbol<"u"&&s[Symbol.hasInstance]?s[Symbol.hasInstance](i):i instanceof s)||(n={}),c(n,t),e&&c(n,e),n}a(Fn,"g");function Yx(){var n=[],t={},e=!0,i=!1,s=void 0;try{for(var c,d=arguments[Symbol.iterator]();!(e=(c=d.next()).done);e=!0){var m=c.value,v=!0,y=!1,x=void 0;try{for(var E,A=m[Symbol.iterator]();!(v=(E=A.next()).done);v=!0){var C=E.value;ss(C)?t[C.value]||(n.push(C),t[C.value]=1):n.includes(C)||n.push(C)}}catch(k){y=!0,x=k}finally{try{v||A.return==null||A.return()}finally{if(y)throw x}}}}catch(k){i=!0,s=k}finally{try{e||d.return==null||d.return()}finally{if(i)throw s}}return n}a(Yx,"h");function Tf(n){return String.prototype.normalize?typeof n=="string"?n.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:n}a(Tf,"p");var Xx=a(function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)},"f");function Jx(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(n){return(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})}a(Jx,"m");function Sa(n){return n&&n.classList&&n.classList.contains(this.settings.classNames.tag)}a(Sa,"v");function Qx(n){return n&&n.closest(this.settings.classNames.tagSelector)}a(Qx,"b");function sE(n,t){var e=window.getSelection();return t=t||e.getRangeAt(0),typeof n=="string"&&(n=document.createTextNode(n)),t&&(t.deleteContents(),t.insertNode(n)),n}a(sE,"w");function en(n,t,e){return n?(t&&(n.__tagifyTagData=e?t:Fn({},n.__tagifyTagData||{},t)),n.__tagifyTagData):(Co.warn("tag element doesn't exist",{tagElm:n,data:t}),t)}a(en,"y");function Lo(n){if(n&&n.parentNode){var t=n,e=window.getSelection(),i=e.getRangeAt(0);e.rangeCount&&(i.setStartAfter(t),i.collapse(!0),e.removeAllRanges(),e.addRange(i))}}a(Lo,"T");function oE(n,t){n.forEach(function(e){if(en(e.previousSibling)||!e.previousSibling){var i=document.createTextNode("\u200B");e.before(i),t&&Lo(i)}})}a(oE,"O");var Ev={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function I2(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}a(I2,"D");function D2(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},i=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),i.forEach(function(s){I2(n,s,e[s])})}return n}a(D2,"S");function P2(n,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):function(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);i&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),s.push.apply(s,c)}return s}(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}),n}a(P2,"I");function Tv(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}a(Tv,"M");function q2(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}a(q2,"E");function R2(n){return function(t){if(Array.isArray(t))return Tv(t)}(n)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(n)||function(t,e){if(t){if(typeof t=="string")return Tv(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Tv(t,e)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(R2,"N");function B2(){for(var n in this.dropdown={},this._dropdown)this.dropdown[n]=typeof this._dropdown[n]=="function"?this._dropdown[n].bind(this):this._dropdown[n];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}a(B2,"_");var Sf,Bl,tE,j2=(Sf=function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},i=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),i.forEach(function(s){q2(n,s,e[s])})}return n}({},{events:{binding:function(){var n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=this.dropdown.events.callbacks,e=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:t.onKeyDown.bind(this),onMouseOver:t.onMouseOver.bind(this),onMouseLeave:t.onMouseLeave.bind(this),onClick:t.onClick.bind(this),onScroll:t.onScroll.bind(this)},i=n?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[i]("scroll",e.position,!0),window[i]("resize",e.position),window[i]("keydown",e.onKeyDown)),this.DOM.dropdown[i]("mouseover",e.onMouseOver),this.DOM.dropdown[i]("mouseleave",e.onMouseLeave),this.DOM.dropdown[i]("mousedown",e.onClick),this.DOM.dropdown.content[i]("scroll",e.onScroll)},callbacks:{onKeyDown:function(n){var t=this;if(this.state.hasFocus&&!this.state.composing){var e=this.settings,i=this.DOM.dropdown.querySelector(e.classNames.dropdownItemActiveSelector),s=this.dropdown.getSuggestionDataByNode(i),c=e.mode=="mix",d=e.mode=="select";e.hooks.beforeKeyDown(n,{tagify:this}).then(function(m){switch(n.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":n.preventDefault();var v=t.dropdown.getAllSuggestionsRefs(),y=n.key=="ArrowUp"||n.key=="Up";i&&(i=t.dropdown.getNextOrPrevOption(i,!y)),i&&i.matches(e.classNames.dropdownItemSelector)||(i=v[y?v.length-1:0]),t.dropdown.highlightOption(i,!0);break;case"Escape":case"Esc":t.dropdown.hide();break;case"ArrowRight":if(t.state.actions.ArrowLeft)return;case"Tab":var x=!e.autoComplete.rightKey||!e.autoComplete.tabKey;if(!c&&!d&&i&&x&&!t.state.editing){n.preventDefault();var E=t.dropdown.getMappedValue(s);return t.input.autocomplete.set.call(t,E),!1}return!0;case"Enter":n.preventDefault(),e.hooks.suggestionClick(n,{tagify:t,tagData:s,suggestionElm:i}).then(function(){if(i)return t.dropdown.selectOption(i),i=t.dropdown.getNextOrPrevOption(i,!y),void t.dropdown.highlightOption(i);t.dropdown.hide(),c||t.addTags(t.state.inputText.trim(),!0)}).catch(function(C){return Co.warn(C)});break;case"Backspace":if(c||t.state.editing.scope)return;var A=t.input.raw.call(t);A!=""&&A.charCodeAt(0)!=8203||(e.backspace===!0?t.removeTags():e.backspace=="edit"&&setTimeout(t.editTag.bind(t),0))}})}},onMouseOver:function(n){var t=n.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(t)},onMouseLeave:function(n){this.dropdown.highlightOption()},onClick:function(n){var t=this;if(n.button==0&&n.target!=this.DOM.dropdown&&n.target!=this.DOM.dropdown.content){var e=n.target.closest(this.settings.classNames.dropdownItemSelector),i=this.dropdown.getSuggestionDataByNode(e);this.state.actions.selectOption=!0,setTimeout(function(){return t.state.actions.selectOption=!1},50),this.settings.hooks.suggestionClick(n,{tagify:this,tagData:i,suggestionElm:e}).then(function(){e?t.dropdown.selectOption(e,n):t.dropdown.hide()}).catch(function(s){return Co.warn(s)})}},onScroll:function(n){var t=n.target,e=t.scrollTop/(t.scrollHeight-t.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(e)})}}},refilter:function(n){n=n||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(n),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(n){var t=n&&n.getAttribute("value");return this.suggestedListItems.find(function(e){return e.value==t})||null},getNextOrPrevOption:function(n){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],e=this.dropdown.getAllSuggestionsRefs(),i=e.findIndex(function(s){return s===n});return t?e[i+1]:e[i-1]},highlightOption:function(n,t){var e,i=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(i),this.state.ddItemElm.removeAttribute("aria-selected")),!n)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);e=this.dropdown.getSuggestionDataByNode(n),this.state.ddItemData=e,this.state.ddItemElm=n,n.classList.add(i),n.setAttribute("aria-selected",!0),t&&(n.parentNode.scrollTop=n.clientHeight+n.offsetTop-n.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,e),this.dropdown.position())},selectOption:function(n,t){var e=this,i=this.settings,s=i.dropdown,c=s.clearOnSelect,d=s.closeOnSelect;if(!n)return this.addTags(this.state.inputText,!0),void(d&&this.dropdown.hide());t=t||{};var m=n.getAttribute("value"),v=m=="noMatch",y=i.mode=="mix",x=this.suggestedListItems.find(function(A){var C;return((C=A.value)!==null&&C!==void 0?C:A)==m});if(this.trigger("dropdown:select",{data:x,elm:n,event:t}),m&&(x||v)){if(this.state.editing){var E=this.normalizeTags([x])[0];x=i.transformTag.call(this,E)||E,this.onEditTagDone(null,Fn({__isValid:!0},x))}else this[y?"addMixTags":"addTags"]([x||this.input.raw.call(this)],c);(y||this.DOM.input.parentNode)&&(setTimeout(function(){e.DOM.input.focus(),e.toggleFocusClass(!0)}),d&&setTimeout(this.dropdown.hide.bind(this)),n.addEventListener("transitionend",function(){e.dropdown.fillHeaderFooter(),setTimeout(function(){n.remove(),e.dropdown.refilter()},100)},{once:!0}),n.classList.add(this.settings.classNames.dropdownItemHidden))}else d&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(n){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var t=this.dropdown.filterListItems("");return n||(t=this.state.dropdown.suggestions),this.addTags(t,!0),this},filterListItems:function(n,t){var e,i,s,c,d,m,v=a(function(){var V,$,Y=void 0,ot=void 0;V=k[q],i=(($=Object)!=null&&typeof Symbol<"u"&&$[Symbol.hasInstance]?$[Symbol.hasInstance](V):V instanceof $)?k[q]:{value:k[q]};var gt,ht=Object.keys(i).some(function(j){return M.includes(j)})?M:["value"];E.fuzzySearch&&!t.exact?(c=ht.reduce(function(j,it){return j+" "+(i[it]||"")},"").toLowerCase().trim(),E.accentedSearch&&(c=Tf(c),m=Tf(m)),Y=c.indexOf(m)==0,ot=c===m,gt=c,s=m.toLowerCase().split(" ").every(function(j){return gt.includes(j.toLowerCase())})):(Y=!0,s=ht.some(function(j){var it=""+(i[j]||"");return E.accentedSearch&&(it=Tf(it),m=Tf(m)),E.caseSensitive||(it=it.toLowerCase()),ot=it===m,t.exact?it===m:it.indexOf(m)==0})),d=!E.includeSelectedTags&&e.isTagDuplicate(ss(i)?i.value:i),s&&!d&&(ot&&Y?C.push(i):E.sortby=="startsWith"&&Y?A.unshift(i):A.push(i))},"l"),y=this,x=this.settings,E=x.dropdown,A=(t=t||{},[]),C=[],k=x.whitelist,H=E.maxItems>=0?E.maxItems:1/0,M=E.searchKeys,q=0;if(!(n=x.mode=="select"&&this.value.length&&this.value[0][x.tagTextProp]==n?"":n)||!M.length)return A=E.includeSelectedTags?k:k.filter(function(V){return!y.isTagDuplicate(ss(V)?V.value:V)}),this.state.dropdown.suggestions=A,A.slice(0,H);for(m=E.caseSensitive?""+n:(""+n).toLowerCase();q<k.length;q++)e=this,v();return this.state.dropdown.suggestions=C.concat(A),typeof E.sortby=="function"?E.sortby(C.concat(A),m):C.concat(A).slice(0,H)},getMappedValue:function(n){var t=this.settings.dropdown.mapValueTo;return t?typeof t=="function"?t(n):n[t]||n.value:n.value},createListHTML:function(n){var t=this;return Fn([],n).map(function(e,i){typeof e!="string"&&typeof e!="number"||(e={value:e});var s=t.dropdown.getMappedValue(e);return s=typeof s=="string"&&t.settings.dropdown.escapeHTML?Ta(s):s,t.settings.templates.dropdownItem.apply(t,[P2(D2({},e),{mappedValue:s}),t])}).join("")}}),Bl=(Bl={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return R2(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(n){var t,e,i,s=this,c=this.settings,d=c.mode=="mix"&&!c.enforceWhitelist,m=!c.whitelist||!c.whitelist.length,v=c.dropdown.position=="manual";if(n=n===void 0?this.state.inputText:n,!(m&&!d&&!c.templates.dropdownItemNoMatch||c.dropdown.enable===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(n),n&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",n),c.templates.dropdownItemNoMatch&&(i=c.templates.dropdownItemNoMatch.call(this,{value:n}))),!i){if(this.suggestedListItems.length)n&&d&&!this.state.editing.scope&&!Ru(this.suggestedListItems[0].value,n)&&this.suggestedListItems.unshift({value:n});else{if(!n||!d||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:n}]}e=""+(ss(t=this.suggestedListItems[0])?t.value:t),c.autoComplete&&e&&e.indexOf(n)==0&&this.input.autocomplete.suggest.call(this,t)}this.dropdown.fill(i),c.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(c.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=n||!0,this.state.dropdown.query=n,this.setStateSelection(),v||setTimeout(function(){s.dropdown.position(),s.dropdown.render()}),setTimeout(function(){s.trigger("dropdown:show",s.DOM.dropdown)})}},hide:function(n){var t=this,e=this.DOM,i=e.scope,s=e.dropdown,c=this.settings.dropdown.position=="manual"&&!n;if(s&&document.body.contains(s)&&!c)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),i.setAttribute("aria-expanded",!1),s.parentNode.removeChild(s),setTimeout(function(){t.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",s),this},toggle:function(n){this.dropdown[this.state.dropdown.visible&&!n?"hide":"show"]()},getAppendTarget:function(){var n=this.settings.dropdown;return typeof n.appendTarget=="function"?n.appendTarget():n.appendTarget},render:function(){var n,t,e,i=this,s=(n=this.DOM.dropdown,(e=n.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(e),t=e.clientHeight,e.parentNode.removeChild(e),t),c=this.settings,d=typeof c.dropdown.enabled=="number"&&c.dropdown.enabled>=0,m=this.dropdown.getAppendTarget();return d?(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(c.classNames.dropdownInital),this.dropdown.position(s),m.appendChild(this.DOM.dropdown),setTimeout(function(){return i.DOM.dropdown.classList.remove(c.classNames.dropdownInital)})),this):this},fill:function(n){n=typeof n=="string"?n:this.dropdown.createListHTML(n||this.suggestedListItems);var t,e=this.settings.templates.dropdownContent.call(this,n);this.DOM.dropdown.content.innerHTML=(t=e)?t.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var n=this.dropdown.filterListItems(this.state.dropdown.query),t=this.parseTemplate("dropdownHeader",[n]),e=this.parseTemplate("dropdownFooter",[n]),i=this.dropdown.getHeaderRef(),s=this.dropdown.getFooterRef();t&&i?.parentNode.replaceChild(t,i),e&&s?.parentNode.replaceChild(e,s)},position:function(n){var t=this.settings.dropdown,e=this.dropdown.getAppendTarget();if(t.position!="manual"&&e){var i,s,c,d,m,v,y,x,E,A=this.DOM.dropdown,C=t.RTL,k=e===document.body,H=e===this.DOM.scope,M=k?window.pageYOffset:e.scrollTop,q=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,V=q.clientHeight,$=Math.max(q.clientWidth||0,window.innerWidth||0)>480?t.position:"all",Y=this.DOM[$=="input"?"input":"scope"];if(n=n||A.clientHeight,this.state.dropdown.visible){if($=="text"?(c=(i=function(){var ht=document.getSelection();if(ht.rangeCount){var j,it,xt=ht.getRangeAt(0),z=xt.startContainer,X=xt.startOffset;if(X>0)return(it=document.createRange()).setStart(z,X-1),it.setEnd(z,X),{left:(j=it.getBoundingClientRect()).right,top:j.top,bottom:j.bottom};if(z.getBoundingClientRect)return z.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,s=i.top,d=i.left,m="auto"):(v=function(ht){var j=0,it=0;for(ht=ht.parentNode;ht&&ht!=q;)j+=ht.offsetTop||0,it+=ht.offsetLeft||0,ht=ht.parentNode;return{top:j,left:it}}(e),i=Y.getBoundingClientRect(),s=H?-1:i.top-v.top,c=(H?i.height:i.bottom-v.top)-1,d=H?-1:i.left-v.left,m=i.width+"px"),!k){var ot=function(){for(var ht=0,j=t.appendTarget.parentNode;j;)ht+=j.scrollTop||0,j=j.parentNode;return ht}();s+=ot,c+=ot}var gt;s=Math.floor(s),c=Math.ceil(c),x=((y=(gt=t.placeAbove)!==null&&gt!==void 0?gt:V-i.bottom<n)?s:c)+M,E="left: ".concat(d+(C&&i.width||0)+window.pageXOffset,"px;"),A.style.cssText="".concat(E,"; top: ").concat(x,"px; min-width: ").concat(m,"; max-width: ").concat(m),A.setAttribute("placement",y?"top":"bottom"),A.setAttribute("position",$)}}}})!=null?Bl:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Sf,Object.getOwnPropertyDescriptors(Bl)):function(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}(Object(Bl)).forEach(function(n){Object.defineProperty(Sf,n,Object.getOwnPropertyDescriptor(Bl,n))}),Sf),qu="@yaireo/tagify/",F2={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},H2={wrapper:function(n,t){return'<tags class="'.concat(t.classNames.namespace," ").concat(t.mode?"".concat(t.classNames[t.mode+"Mode"]):""," ").concat(n.className,`"
                    `).concat(t.readonly?"readonly":"",`
                    `).concat(t.disabled?"disabled":"",`
                    `).concat(t.required?"required":"",`
                    `).concat(t.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(Wx,`
        </tags>`)},input:function(){var n=this.settings,t=n.placeholder||Wx;return"<span ".concat(!n.readonly&&n.userInput?"contenteditable":"",' tabIndex="0" data-placeholder="').concat(t,'" aria-placeholder="').concat(n.placeholder||"",`"
                    class="`).concat(n.classNames.input,`"
                    role="textbox"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(n.mode=="mix",'"></span>')},tag:function(n,t){var e=t.settings;return'<tag title="'.concat(n.title||n.value,`"
                    contenteditable='false'
                    spellcheck='false'
                    tabIndex="`).concat(e.a11y.focusableTags?0:-1,`"
                    class="`).concat(e.classNames.tag," ").concat(n.class||"",`"
                    `).concat(this.getAttributes(n),`>
            <x title='' tabIndex="`).concat(e.a11y.focusableTags?0:-1,'" class="').concat(e.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(e.mode==="select"&&e.userInput?"contenteditable='true'":"",' class="').concat(e.classNames.tagText,'">').concat(n[e.tagTextProp]||n.value,`</span>
            </div>
        </tag>`)},dropdown:function(n){var t=n.dropdown,e=t.position=="manual";return'<div class="'.concat(e?"":n.classNames.dropdown," ").concat(t.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(t.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(n.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(n){var t=this.settings.templates,e=this.state.dropdown.suggestions;return`
            `.concat(t.dropdownHeader.call(this,e),`
            `).concat(n,`
            `).concat(t.dropdownFooter.call(this,e),`
        `)},dropdownItem:function(n){return"<div ".concat(this.getAttributes(n),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(n.class||"",`'
                    tabindex="0"
                    role="option">`).concat(n.mappedValue||n.value,"</div>")},dropdownHeader:function(n){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(n){var t=n.length-this.settings.dropdown.maxItems;return t>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(t,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function eE(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}a(eE,"F");function nE(n,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}a(nE,"R");function z2(n,t){return function(e){if(Array.isArray(e))return e}(n)||function(e,i){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var c,d,m=[],v=!0,y=!1;try{for(s=s.call(e);!(v=(c=s.next()).done)&&(m.push(c.value),!i||m.length!==i);v=!0);}catch(x){y=!0,d=x}finally{try{v||s.return==null||s.return()}finally{if(y)throw d}}return m}}(n,t)||function(e,i){if(e){if(typeof e=="string")return eE(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(s);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return eE(e,i)}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(z2,"H");function Sv(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}a(Sv,"B");function Ea(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}a(Ea,"W");function iE(n,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}a(iE,"U");function U2(n,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):function(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);i&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),s.push.apply(s,c)}return s}(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}),n}a(U2,"q");function Av(n){return function(t){if(Array.isArray(t))return Sv(t)}(n)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(n)||function(t,e){if(t){if(typeof t=="string")return Sv(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Sv(t,e)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(Av,"K");var V2={customBinding:function(){var n=this;this.customEventsList.forEach(function(t){n.on(t,n.settings.callbacks[t])})},binding:function(){var n,t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.settings,i=this.events.callbacks,s=t?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!t){for(var c in this.state.mainEvents=t,t&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),n=this.listeners.main=this.listeners.main||{keydown:["input",i.onKeydown.bind(this)],click:["scope",i.onClickScope.bind(this)],dblclick:e.mode!="select"&&["scope",i.onDoubleClickScope.bind(this)],paste:["input",i.onPaste.bind(this)],drop:["input",i.onDrop.bind(this)],compositionstart:["input",i.onCompositionStart.bind(this)],compositionend:["input",i.onCompositionEnd.bind(this)]})n[c]&&this.DOM[n[c][0]][s](c,n[c][1]);var d=this.listeners.main.inputMutationObserver||new MutationObserver(i.onInputDOMChange.bind(this));d.disconnect(),e.mode=="mix"&&d.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(n){var t=(n||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),t))},bindGlobal:function(n){var t,e=this.events.callbacks,i=n?"removeEventListener":"addEventListener";if(this.listeners&&(n||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:e[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:e.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:e.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:e.onFocusBlur.bind(this)},{type:"click",target:document,cb:e.onClickAnywhere.bind(this),useCapture:!0}];var s=!0,c=!1,d=void 0;try{for(var m,v=this.listeners.global[Symbol.iterator]();!(s=(m=v.next()).done);s=!0)(t=m.value).target[i](t.type,t.cb,!!t.useCapture)}catch(y){c=!0,d=y}finally{try{s||v.return==null||v.return()}finally{if(c)throw d}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(n){var t,e,i,s=Qx.call(this,n.target),c=Sa.call(this,n.target),d=n.type=="focusin",m=n.type=="focusout";(t=n.target)===null||t===void 0||t.closest(this.settings.classNames.tagTextSelector),s&&d&&!c&&this.toggleFocusClass(this.state.hasFocus=+new Date);var v=this.settings,y=n.target?this.trim(this.DOM.input.textContent):"",x=(i=this.value)===null||i===void 0||(e=i[0])===null||e===void 0?void 0:e[v.tagTextProp],E=v.dropdown.enabled>=0,A={relatedTarget:n.relatedTarget},C=this.state.actions.selectOption&&(E||!v.dropdown.closeOnSelect),k=this.state.actions.addNew&&E;if(m){if(n.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate()}if(!C&&!k)if(d||s?(this.state.hasFocus=+new Date,this.toggleFocusClass(this.state.hasFocus)):this.state.hasFocus=!1,v.mode!="mix"){if(d){if(!v.focusable)return;var H=v.dropdown.enabled===0&&!this.state.dropdown.visible;return this.toggleFocusClass(!0),this.trigger("focus",A),void(!H||c&&v.mode!=="select"||this.dropdown.show(this.value.length?"":void 0))}if(m){if(this.trigger("blur",A),this.loading(!1),v.mode=="select"){if(this.value.length){var M=this.getTagElms()[0];y=this.trim(M.textContent)}x===y&&(y="")}y&&!this.state.actions.selectOption&&v.addTagOnBlur&&v.addTagOn.includes("blur")&&this.addTags(y,!0)}s||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else d?this.trigger("focus",A):m&&(this.trigger("blur",A),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(n){this.state.composing=!0},onCompositionEnd:function(n){this.state.composing=!1},onWindowKeyDown:function(n){var t,e=this.settings,i=document.activeElement,s=Qx.call(this,i)&&this.DOM.scope.contains(document.activeElement),c=s&&i.hasAttribute("readonly");if(this.state.hasFocus||s&&!c){t=i.nextElementSibling;var d=n.target.classList.contains(e.classNames.tagX);switch(n.key){case"Backspace":e.readonly||this.state.editing||(this.removeTags(i),(t||this.DOM.input).focus());break;case"Enter":if(d)return void this.removeTags(n.target.parentNode);e.a11y.focusableTags&&Sa.call(this,i)&&setTimeout(this.editTag.bind(this),0,i);break;case"ArrowDown":this.state.dropdown.visible||e.mode=="mix"||this.dropdown.show()}}},onKeydown:function(n){var t=this,e=this.settings;if(!this.state.composing&&e.userInput){e.mode=="select"&&e.enforceWhitelist&&this.value.length&&n.key!="Tab"&&n.preventDefault();var i=this.trim(n.target.textContent);this.trigger("keydown",{event:n}),e.hooks.beforeKeyDown(n,{tagify:this}).then(function(s){if(e.mode=="mix"){switch(n.key){case"Left":case"ArrowLeft":t.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(t.state.editing)return;var c=document.getSelection(),d=n.key=="Delete"&&c.anchorOffset==(c.anchorNode.length||0),m=c.anchorNode.previousSibling,v=c.anchorNode.nodeType==1||!c.anchorOffset&&m&&m.nodeType==1&&c.anchorNode.previousSibling;Kx(t.DOM.input.innerHTML);var y,x,E,A=t.getTagElms(),C=c.anchorNode.length===1&&c.anchorNode.nodeValue=="\u200B";if(e.backspace=="edit"&&v)return y=c.anchorNode.nodeType==1?null:c.anchorNode.previousElementSibling,setTimeout(t.editTag.bind(t),0,y),void n.preventDefault();if(Xx()&&iE(v,Element))return E=Gx(v),v.hasAttribute("readonly")||v.remove(),t.DOM.input.focus(),void setTimeout(function(){Lo(E),t.DOM.input.click()});if(c.anchorNode.nodeName=="BR")return;if((d||v)&&c.anchorNode.nodeType==1?x=c.anchorOffset==0?d?A[0]:null:A[Math.min(A.length,c.anchorOffset)-1]:d?x=c.anchorNode.nextElementSibling:iE(v,Element)&&(x=v),c.anchorNode.nodeType==3&&!c.anchorNode.nodeValue&&c.anchorNode.previousElementSibling&&n.preventDefault(),(v||d)&&!e.backspace||c.type!="Range"&&!c.anchorOffset&&c.anchorNode==t.DOM.input&&n.key!="Delete")return void n.preventDefault();if(c.type!="Range"&&x&&x.hasAttribute("readonly"))return void Lo(Gx(x));n.key=="Delete"&&C&&en(c.anchorNode.nextSibling)&&t.removeTags(c.anchorNode.nextSibling),clearTimeout(tE),tE=setTimeout(function(){var q=document.getSelection();Kx(t.DOM.input.innerHTML),!d&&q.anchorNode.previousSibling,t.value=[].map.call(A,function(V,$){var Y=en(V);if(V.parentNode||Y.readonly)return Y;t.trigger("remove",{tag:V,index:$,data:Y})}).filter(function(V){return V})},20)}return!0}var k=e.dropdown.position=="manual";switch(n.key){case"Backspace":e.mode=="select"&&e.enforceWhitelist&&t.value.length?t.removeTags():t.state.dropdown.visible&&e.dropdown.position!="manual"||n.target.textContent!=""&&i.charCodeAt(0)!=8203||(e.backspace===!0?t.removeTags():e.backspace=="edit"&&setTimeout(t.editTag.bind(t),0));break;case"Esc":case"Escape":if(t.state.dropdown.visible)return;n.target.blur();break;case"Down":case"ArrowDown":t.state.dropdown.visible||t.dropdown.show();break;case"ArrowRight":var H=t.state.inputSuggestion||t.state.ddItemData;if(H&&e.autoComplete.rightKey)return void t.addTags([H],!0);break;case"Tab":var M=e.mode=="select";if(!i||M)return!0;n.preventDefault();case"Enter":if(t.state.dropdown.visible&&!k)return;n.preventDefault(),setTimeout(function(){t.state.dropdown.visible&&!k||t.state.actions.selectOption||!e.addTagOn.includes(n.key.toLowerCase())||t.addTags(i,!0)})}}).catch(function(s){return s})}},onInput:function(n){this.postUpdate();var t=this.settings;if(t.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,n);var e=this.input.normalize.call(this,void 0,{trim:!1}),i=e.length>=t.dropdown.enabled,s={value:e,inputElm:this.DOM.input},c=this.validateTag({value:e});t.mode=="select"&&this.toggleScopeValidation(c),s.isValid=c,this.state.inputText!=e&&(this.input.set.call(this,e,!1),e.search(t.delimiters)!=-1?this.addTags(e)&&this.input.set.call(this):t.dropdown.enabled>=0&&this.dropdown[i?"show":"hide"](e),this.trigger("input",s))},onMixTagsInput:function(n){var t,e,i,s,c,d,m,v,y=this,x=this.settings,E=this.value.length,A=this.getTagElms(),C=document.createDocumentFragment(),k=window.getSelection().getRangeAt(0),H=[].map.call(A,function(M){return en(M).value});if(n.inputType=="deleteContentBackward"&&Xx()&&this.events.callbacks.onKeydown.call(this,{target:n.target,key:"Backspace"}),oE(this.getTagElms()),this.value.slice().forEach(function(M){M.readonly&&!H.includes(M.value)&&C.appendChild(y.createTagElem(M))}),C.childNodes.length&&(k.insertNode(C),this.setRangeAtStartEnd(!1,C.lastChild)),A.length!=E)return this.value=[].map.call(this.getTagElms(),function(M){return en(M)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(d=window.getSelection()).rangeCount>0&&d.anchorNode.nodeType==3){if((k=d.getRangeAt(0).cloneRange()).collapse(!0),k.setStart(d.focusNode,0),i=(t=k.toString().slice(0,k.endOffset)).split(x.pattern).length-1,(e=t.match(x.pattern))&&(s=t.slice(t.lastIndexOf(e[e.length-1]))),s){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:s.match(x.pattern)[0],value:s.replace(x.pattern,"")},this.state.tag.baseOffset=d.baseOffset-this.state.tag.value.length,v=this.state.tag.value.match(x.delimiters))return this.state.tag.value=this.state.tag.value.replace(x.delimiters,""),this.state.tag.delimiters=v[0],this.addTags(this.state.tag.value,x.dropdown.clearOnSelect),void this.dropdown.hide();c=this.state.tag.value.length>=x.dropdown.enabled;try{m=(m=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&m.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(m||i<this.state.mixMode.matchedPatternCount)&&(c=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=i}setTimeout(function(){y.update({withoutChangeEvent:!0}),y.trigger("input",Fn({},y.state.tag,{textContent:y.DOM.input.textContent})),y.state.tag&&y.dropdown[c?"show":"hide"](y.state.tag.value)},10)},onInputIE:function(n){var t=this;setTimeout(function(){t.events.callbacks.onInput.call(t,n)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(n){n.target==this.DOM.scope||this.DOM.scope.contains(n.target)||(this.toggleFocusClass(!1),this.state.hasFocus=!1,n.target.closest(".tagify__dropdown")&&n.target.closest(".tagify__dropdown").__tagify!=this&&this.dropdown.hide())},onClickScope:function(n){var t=this.settings,e=n.target.closest("."+t.classNames.tag),i=n.target===this.DOM.scope,s=+new Date-this.state.hasFocus;if(i&&t.mode!="select")this.DOM.input.focus();else{if(!n.target.classList.contains(t.classNames.tagX))return e&&!this.state.editing?(this.trigger("click",{tag:e,index:this.getNodeIndex(e),data:en(e),event:n}),void(t.editTags!==1&&t.editTags.clicks!==1&&t.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,n))):void(n.target==this.DOM.input&&(t.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),s>500||!t.focusable)?this.state.dropdown.visible?this.dropdown.hide():t.dropdown.enabled===0&&t.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):t.mode!="select"||t.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,U2(function(c){for(var d=1;d<arguments.length;d++){var m=arguments[d]!=null?arguments[d]:{},v=Object.keys(m);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(m).filter(function(y){return Object.getOwnPropertyDescriptor(m,y).enumerable}))),v.forEach(function(y){Ea(c,y,m[y])})}return c}({},n),{target:this.getTagElms()[0]})),!t.userInput&&this.dropdown.show()));this.removeTags(n.target.parentNode)}},onPaste:function(n){var t=this;n.preventDefault();var e,i,s,c=this.settings;if(c.mode=="select"&&c.enforceWhitelist||!c.userInput)return!1;c.readonly||(i=n.clipboardData||window.clipboardData,s=i.getData("Text"),c.hooks.beforePaste(n,{tagify:this,pastedText:s,clipboardData:i}).then(function(d){d===void 0&&(d=s),d&&(t.injectAtCaret(d,window.getSelection().getRangeAt(0)),t.settings.mode=="mix"?t.events.callbacks.onMixTagsInput.call(t,n):t.settings.pasteAsTags?e=t.addTags(t.state.inputText+d,!0):(t.state.inputText=d,t.dropdown.show(d))),t.trigger("paste",{event:n,pastedText:s,clipboardData:i,tagsElems:e})}).catch(function(d){return d}))},onDrop:function(n){n.preventDefault()},onEditTagInput:function(n,t){var e,i=n.closest("."+this.settings.classNames.tag),s=this.getNodeIndex(i),c=en(i),d=this.input.normalize.call(this,n),m=(Ea(e={},this.settings.tagTextProp,d),Ea(e,"__tagId",c.__tagId),e),v=this.validateTag(m);this.editTagChangeDetected(Fn(c,m))||n.originalIsValid!==!0||(v=!0),i.classList.toggle(this.settings.classNames.tagInvalid,v!==!0),c.__isValid=v,i.title=v===!0?c.title||c.value:v,d.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=d),this.dropdown.show(d)),this.trigger("edit:input",{tag:i,index:s,data:Fn({},this.value[s],{newValue:d}),event:t})},onEditTagPaste:function(n,t){var e=(t.clipboardData||window.clipboardData).getData("Text");t.preventDefault();var i=sE(e);this.setRangeAtStartEnd(!1,i)},onEditTagClick:function(n,t){this.events.callbacks.onClickScope.call(this,t)},onEditTagFocus:function(n){this.state.editing={scope:n,input:n.querySelector("[contenteditable]")}},onEditTagBlur:function(n,t){var e=Sa.call(this,t.relatedTarget);if(this.settings.mode=="select"&&e&&t.relatedTarget.contains(t.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(n))){var i,s,c,d=this.settings,m=n.closest("."+d.classNames.tag),v=en(m),y=this.input.normalize.call(this,n),x=(Ea(i={},d.tagTextProp,y),Ea(i,"__tagId",v.__tagId),i),E=v.__originalData,A=this.editTagChangeDetected(Fn(v,x)),C=this.validateTag(x);if(y)if(A){var k;if(s=this.hasMaxTags(),c=Fn({},E,(Ea(k={},d.tagTextProp,this.trim(y)),Ea(k,"__isValid",C),k)),d.transformTag.call(this,c,E),(C=(!s||E.__isValid===!0)&&this.validateTag(c))!==!0){if(this.trigger("invalid",{data:c,tag:m,message:C}),d.editTags.keepInvalid)return;d.keepInvalidTags?c.__isValid=C:c=E}else d.keepInvalidTags&&(delete c.title,delete c["aria-invalid"],delete c.class);this.onEditTagDone(m,c)}else this.onEditTagDone(m,E);else this.onEditTagDone(m)}},onEditTagkeydown:function(n,t){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:n}),n.key){case"Esc":case"Escape":this.state.editing=!1,t.__tagifyTagData.__originalData.value?t.parentNode.replaceChild(t.__tagifyTagData.__originalHTML,t):t.remove();break;case"Enter":case"Tab":n.preventDefault(),setTimeout(function(){return n.target.blur()},0)}},onDoubleClickScope:function(n){var t,e,i=n.target.closest("."+this.settings.classNames.tag),s=en(i),c=this.settings;i&&s.editable!==!1&&(t=i.classList.contains(this.settings.classNames.tagEditing),e=i.hasAttribute("readonly"),c.readonly||t||e||!this.settings.editTags||!c.userInput||(this.events.callbacks.onEditTagFocus.call(this,i),this.editTag(i)),this.toggleFocusClass(!0),c.mode!="select"&&this.trigger("dblclick",{tag:i,index:this.getNodeIndex(i),data:en(i)}))},onInputDOMChange:function(n){var t=this;n.forEach(function(i){i.addedNodes.forEach(function(s){if(s.outerHTML=="<div><br></div>")s.replaceWith(document.createElement("br"));else if(s.nodeType==1&&s.querySelector(t.settings.classNames.tagSelector)){var c,d=document.createTextNode("");s.childNodes[0].nodeType==3&&s.previousSibling.nodeName!="BR"&&(d=document.createTextNode(`
`)),(c=s).replaceWith.apply(c,Av([d].concat(Av(Av(s.childNodes).slice(0,-1))))),Lo(d)}else if(Sa.call(t,s)){var m;if(((m=s.previousSibling)===null||m===void 0?void 0:m.nodeType)!=3||s.previousSibling.textContent||s.previousSibling.remove(),s.previousSibling&&s.previousSibling.nodeName=="BR"){s.previousSibling.replaceWith(`
\u200B`);for(var v=s.nextSibling,y="";v;)y+=v.textContent,v=v.nextSibling;y.trim()&&Lo(s.previousSibling)}else s.previousSibling&&!en(s.previousSibling)||s.before("\u200B")}}),i.removedNodes.forEach(function(s){s&&s.nodeName=="BR"&&Sa.call(t,e)&&(t.removeTags(e),t.fixFirefoxLastTagNoCaret())})});var e=this.DOM.input.lastChild;e&&e.nodeValue==""&&e.remove(),e&&e.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function Lv(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}a(Lv,"X");function Ov(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}a(Ov,"J");function qs(n,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}a(qs,"G");function rE(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},i=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),i.forEach(function(s){Ov(n,s,e[s])})}return n}a(rE,"$");function Cv(n){return function(t){if(Array.isArray(t))return Lv(t)}(n)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(n)||function(t,e){if(t){if(typeof t=="string")return Lv(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Lv(t,e)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(Cv,"Q");function Bu(n,t){if(!n){Co.warn("input element not found",n);var e=new Proxy(this,{get:function(){return function(){return e}}});return e}if(n.__tagify)return Co.warn("input element is already Tagified - Same instance is returned.",n),n.__tagify;var i;Fn(this,function(s){var c=document.createTextNode(""),d={};function m(v,y,x){x&&y.split(/\s+/g).forEach(function(E){return c[v+"EventListener"].call(c,E,x)})}return a(m,"s"),{removeAllCustomListeners:function(){Object.entries(d).forEach(function(v){var y=z2(v,2),x=y[0];y[1].forEach(function(E){return m("remove",x,E)})}),d={}},off:function(v,y){return v&&(y?m("remove",v,y):v.split(/\s+/g).forEach(function(x){var E;(E=d[x])===null||E===void 0||E.forEach(function(A){return m("remove",x,A)}),delete d[x]})),this},on:function(v,y){return y&&typeof y=="function"&&(v.split(/\s+/g).forEach(function(x){Array.isArray(d[x])?d[x].push(y):d[x]=[y]}),m("add",v,y)),this},trigger:function(v,y,x){var E;if(x=x||{cloneData:!0},v)if(s.settings.isJQueryPlugin)v=="remove"&&(v="removeTag"),jQuery(s.DOM.originalInput).triggerHandler(v,[y]);else{try{var A=typeof y=="object"?y:{value:y};if((A=x.cloneData?Fn({},A):A).tagify=this,y.event&&(A.event=this.cloneEvent(y.event)),nE(y,Object))for(var C in y)nE(y[C],HTMLElement)&&(A[C]=y[C]);E=new CustomEvent(v,{detail:A})}catch(k){Co.warn(k)}c.dispatchEvent(E)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,t=t||{},this.getPersistedData=(i=t.id,function(s){var c,d="/"+s;if(localStorage.getItem(qu+i+"/v",1)==1)try{c=JSON.parse(localStorage[qu+i+d])}catch{}return c}),this.setPersistedData=function(s){return s?(localStorage.setItem(qu+s+"/v",1),function(c,d){var m="/"+d,v=JSON.stringify(c);c&&d&&(localStorage.setItem(qu+s+m,v),dispatchEvent(new Event("storage")))}):function(){}}(t.id),this.clearPersistedData=function(s){return function(c){var d=qu+"/"+s+"/";if(c)localStorage.removeItem(d+c);else for(var m in localStorage)m.includes(d)&&localStorage.removeItem(m)}}(t.id),this.applySettings(n,t),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(n),B2.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),n.autofocus&&this.DOM.input.focus(),n.__tagify=this}a(Bu,"Y");Bu.prototype={_dropdown:j2,placeCaretAfterNode:Lo,getSetTagData:en,helpers:{sameStr:Ru,removeCollectionProp:$x,omit:Nv,isObject:ss,parseHTML:xv,escapeHTML:Ta,extend:Fn,concatWithoutDups:Yx,getUID:Jx,isNodeTag:Sa},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(n){return this.settings.trim&&n&&typeof n=="string"?n.trim():n},parseHTML:xv,templates:H2,parseTemplate:function(n,t){return xv((n=this.settings.templates[n]||n).apply(this,t))},set whitelist(n){var t=n&&Array.isArray(n);this.settings.whitelist=t?n:[],this.setPersistedData(t?n:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(n){this.settings.userInput=!!n,this.setContentEditable(!!n)},get userInput(){return this.settings.userInput},generateClassSelectors:function(n){var t=a(function(i){var s=i;Object.defineProperty(n,s+"Selector",{get:function(){return"."+this[s].split(" ")[0]}})},"e");for(var e in n)t(e)},applySettings:function(n,t){var e,i;Ev.templates=this.templates;var s=Fn({},Ev,t.mode=="mix"?{dropdown:{position:"text"}}:{}),c=this.settings=Fn({},s,t);if(c.disabled=n.hasAttribute("disabled"),c.readonly=c.readonly||n.hasAttribute("readonly"),c.placeholder=Ta(n.getAttribute("placeholder")||c.placeholder||""),c.required=n.hasAttribute("required"),this.generateClassSelectors(c.classNames),c.dropdown.includeSelectedTags===void 0&&(c.dropdown.includeSelectedTags=c.duplicates),this.isIE&&(c.autoComplete=!1),["whitelist","blacklist"].forEach(function(m){var v=n.getAttribute("data-"+m);v&&qs(v=v.split(c.delimiters),Array)&&(c[m]=v)}),"autoComplete"in t&&!ss(t.autoComplete)&&(c.autoComplete=Ev.autoComplete,c.autoComplete.enabled=t.autoComplete),c.mode=="mix"&&(c.pattern=c.pattern||/@/,c.autoComplete.rightKey=!0,c.delimiters=t.delimiters||null,c.tagTextProp&&!c.dropdown.searchKeys.includes(c.tagTextProp)&&c.dropdown.searchKeys.push(c.tagTextProp)),n.pattern)try{c.pattern=new RegExp(n.pattern)}catch{}if(c.delimiters){c._delimiters=c.delimiters;try{c.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}c.disabled&&(c.userInput=!1),this.TEXTS=rE({},F2,c.texts||{}),(c.mode!="select"||!((e=t.dropdown)===null||e===void 0)&&e.enabled)&&c.userInput||(c.dropdown.enabled=0),c.dropdown.appendTarget=((i=t.dropdown)===null||i===void 0?void 0:i.appendTarget)||document.body;var d=this.getPersistedData("whitelist");Array.isArray(d)&&(this.whitelist=Array.isArray(c.whitelist)?Yx(c.whitelist,d):d)},getAttributes:function(n){var t,e=this.getCustomAttributes(n),i="";for(t in e)i+=" "+t+(n[t]!==void 0?'="'.concat(e[t],'"'):"");return i},getCustomAttributes:function(n){if(!ss(n))return"";var t,e={};for(t in n)t.slice(0,2)!="__"&&t!="class"&&n.hasOwnProperty(t)&&n[t]!==void 0&&(e[t]=Ta(n[t]));return e},setStateSelection:function(){var n=window.getSelection(),t={anchorOffset:n.anchorOffset,anchorNode:n.anchorNode,range:n.getRangeAt&&n.rangeCount&&n.getRangeAt(0)};return this.state.selection=t,t},getCSSVars:function(){var n,t,e,i=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(n=function(s){if(!s)return{};var c=(s=s.trim().split(" ")[0]).split(/\d+/g).filter(function(d){return d}).pop().trim();return{value:+s.split(c).filter(function(d){return d})[0].trim(),unit:c}}((e="tag-hide-transition",i.getPropertyValue("--"+e))),t=n.value,n.unit=="s"?1e3*t:t)}},build:function(n){var t=this.DOM,e=n.closest("label");this.settings.mixMode.integrated?(t.originalInput=null,t.scope=n,t.input=n):(t.originalInput=n,t.originalInput_tabIndex=n.tabIndex,t.scope=this.parseTemplate("wrapper",[n,this.settings]),t.input=t.scope.querySelector(this.settings.classNames.inputSelector),n.parentNode.insertBefore(t.scope,n),n.tabIndex=-1),e&&e.setAttribute("for","")},destroy:function(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(n){var t,e=this.settings;if(this.state.blockChangeEvent=!0,n===void 0){var i=this.getPersistedData("value");n=i&&!this.DOM.originalInput.value?i:e.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),n)if(e.mode=="mix")this.parseMixTags(n),(t=this.DOM.input.lastChild)&&t.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{qs(JSON.parse(n),Array)&&(n=JSON.parse(n))}catch{}this.addTags(n,!0).forEach(function(s){return s&&s.classList.add(e.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=e.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(n){var t={};for(var e in n)e!="path"&&(t[e]=n[e]);return t},loading:function(n){return this.state.isLoading=n,this.DOM.scope.classList[n?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(n,t){return n&&n.classList[t?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(n,t){typeof n=="string"&&this.DOM.scope.classList.toggle(n,t)},toggleScopeValidation:function(n){var t=n===!0||n===void 0;!this.settings.required&&n&&n===this.TEXTS.empty&&(t=!0),this.toggleClass(this.settings.classNames.tagInvalid,!t),this.DOM.scope.title=t?"":n},toggleFocusClass:function(n){this.toggleClass(this.settings.classNames.focus,!!n)},setPlaceholder:function(n){var t=this;["data","aria"].forEach(function(e){return t.DOM.input.setAttribute("".concat(e,"-placeholder"),n)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var n=this.DOM.originalInput,t=this.state.lastOriginalValueReported!==n.value,e=new CustomEvent("change",{bubbles:!0});t&&(this.state.lastOriginalValueReported=n.value,e.simulated=!0,n._valueTracker&&n._valueTracker.setValue(Math.random()),n.dispatchEvent(e),this.trigger("change",this.state.lastOriginalValueReported),n.value=this.state.lastOriginalValueReported)}},events:V2,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(n,t){if(t){n=typeof n=="number"?n:!!n,t=t.lastChild||t;var e=document.getSelection();if(qs(e.focusNode,Element)&&!this.DOM.input.contains(e.focusNode))return!0;try{e.rangeCount>=1&&["Start","End"].forEach(function(i){return e.getRangeAt(0)["set"+i](t,n||t.length)})}catch(i){console.warn(i)}}},insertAfterTag:function(n,t){if(t=t||this.settings.mixMode.insertAfterTag,n&&n.parentNode&&t)return t=typeof t=="string"?document.createTextNode(t):t,n.parentNode.insertBefore(t,n.nextSibling),t},editTagChangeDetected:function(n){var t=n.__originalData;for(var e in t)if(!this.dataProps.includes(e)&&n[e]!=t[e])return!0;return!1},getTagTextNode:function(n){return n.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(n,t){this.getTagTextNode(n).innerHTML=Ta(t)},editTag:function(n,t){var e=this;n=n||this.getLastTag(),t=t||{};var i=this.settings,s=this.getTagTextNode(n),c=this.getNodeIndex(n),d=en(n),m=this.events.callbacks,v=!0,y=i.mode=="select";if(!y&&this.dropdown.hide(),s){if(!qs(d,Object)||!("editable"in d)||d.editable)return d=en(n,{__originalData:Fn({},d),__originalHTML:n.cloneNode(!0)}),en(d.__originalHTML,d.__originalData),s.setAttribute("contenteditable",!0),n.classList.add(i.classNames.tagEditing),s.addEventListener("click",m.onEditTagClick.bind(this,n)),s.addEventListener("blur",m.onEditTagBlur.bind(this,this.getTagTextNode(n))),s.addEventListener("input",m.onEditTagInput.bind(this,s)),s.addEventListener("paste",m.onEditTagPaste.bind(this,s)),s.addEventListener("keydown",function(x){return m.onEditTagkeydown.call(e,x,n)}),s.addEventListener("compositionstart",m.onCompositionStart.bind(this)),s.addEventListener("compositionend",m.onCompositionEnd.bind(this)),t.skipValidation||(v=this.editTagToggleValidity(n)),s.originalIsValid=v,this.trigger("edit:start",{tag:n,index:c,data:d,isValid:v}),s.focus(),!y&&this.setRangeAtStartEnd(!1,s),i.dropdown.enabled===0&&!y&&this.dropdown.show(),this.state.hasFocus=!0,this}else Co.warn("Cannot find element in Tag template: .",i.classNames.tagTextSelector)},editTagToggleValidity:function(n,t){var e;if(t=t||en(n))return(e=!("__isValid"in t)||t.__isValid===!0)||this.removeTagsFromValue(n),this.update(),n.classList.toggle(this.settings.classNames.tagNotAllowed,!e),t.__isValid=e,t.__isValid;Co.warn("tag has no data: ",n,t)},onEditTagDone:function(n,t){n=n||this.state.editing.scope,t=t||{};var e,i,s={tag:n,index:this.getNodeIndex(n),previousData:en(n),data:t},c=this.settings;this.trigger("edit:beforeUpdate",s,{cloneData:!1}),this.state.editing=!1,delete t.__originalData,delete t.__originalHTML,n&&((i=t[c.tagTextProp])!==void 0?!((e=(i+="").trim)===null||e===void 0)&&e.call(i):!(c.tagTextProp in t)&&t.value)?(n=this.replaceTag(n,t),this.editTagToggleValidity(n,t),c.a11y.focusableTags?n.focus():c.mode!="select"&&Lo(n)):n&&this.removeTags(n),this.trigger("edit:updated",s),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(n,t){t&&t.value!==""&&t.value!==void 0||(t=n.__tagifyTagData),t.__isValid&&t.__isValid!=1&&Fn(t,this.getInvalidTagAttrs(t,t.__isValid));var e=this.createTagElem(t);return n.parentNode.replaceChild(e,n),this.updateValueByDOMTags(),e},updateValueByDOMTags:function(){var n=this;this.value.length=0,[].forEach.call(this.getTagElms(),function(t){t.classList.contains(n.settings.classNames.tagNotAllowed.split(" ")[0])||n.value.push(en(t))}),this.update()},injectAtCaret:function(n,t){var e;if(!(t=t||((e=this.state.selection)===null||e===void 0?void 0:e.range))&&n)return this.appendMixTags(n),this;var i=sE(n,t);return this.setRangeAtStartEnd(!1,i),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],e=this.settings.dropdown.closeOnSelect;this.state.inputText=n,t&&(this.DOM.input.innerHTML=Ta(""+n)),!n&&e&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var n=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!n),n},normalize:function(n,t){var e=n||this.DOM.input,i=[];e.childNodes.forEach(function(s){return s.nodeType==3&&i.push(s.nodeValue)}),i=i.join(`
`);try{i=i.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return i=i.replace(/\s/g," "),t?.trim?this.trim(i):i},autocomplete:{suggest:function(n){if(this.settings.autoComplete.enabled){typeof(n=n||{value:""})!="object"&&(n={value:n});var t=this.dropdown.getMappedValue(n);if(typeof t!="number"){var e=this.state.inputText.toLowerCase(),i=t.substr(0,this.state.inputText.length).toLowerCase(),s=t.substring(this.state.inputText.length);t&&this.state.inputText&&i==e?(this.DOM.input.setAttribute("data-suggest",s),this.state.inputSuggestion=n):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(n){var t=this.DOM.input.getAttribute("data-suggest"),e=n||(t?this.state.inputText+t:null);return!!e&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+e)):(this.input.set.call(this,e),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(n){return this.value.findIndex(function(t){return t.__tagId==(n||{}).__tagId})},getNodeIndex:function(n){var t=0;if(n)for(;n=n.previousElementSibling;)t++;return t},getTagElms:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var i="."+Cv(this.settings.classNames.tag.split(" ")).concat(Cv(t)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(i))},getLastTag:function(){var n=this.settings.classNames,t=this.DOM.scope.querySelectorAll("".concat(n.tagSelector,":not(.").concat(n.tagHide,"):not([readonly])"));return t[t.length-1]},isTagDuplicate:function(n,t,e){var i=0;if(this.settings.mode=="select")return!1;var s=!0,c=!1,d=void 0;try{for(var m,v=this.value[Symbol.iterator]();!(s=(m=v.next()).done);s=!0){var y=m.value;Ru(this.trim(""+n),y.value,t)&&e!=y.__tagId&&i++}}catch(x){c=!0,d=x}finally{try{s||v.return==null||v.return()}finally{if(c)throw d}}return i},getTagIndexByValue:function(n){var t=this,e=[],i=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(s,c){s.__tagifyTagData&&Ru(t.trim(s.__tagifyTagData.value),n,i)&&e.push(c)}),e},getTagElmByValue:function(n){var t=this.getTagIndexByValue(n)[0];return this.getTagElms()[t]},flashTag:function(n){var t=this;n&&(n.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){n.classList.remove(t.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(n){return n=this.trim(n.toLowerCase()),this.settings.blacklist.filter(function(t){return(""+t).toLowerCase()==n}).length},isTagWhitelisted:function(n){return!!this.getWhitelistItem(n)},getWhitelistItem:function(n,t,e){t=t||"value";var i,s=this.settings;return(e=e||s.whitelist).some(function(c){var d=typeof c=="object"?c[t]||c.value:c;if(Ru(d,n,s.dropdown.caseSensitive,s.trim))return i=typeof c=="object"?c:{value:c},!0}),i||t!="value"||s.tagTextProp=="value"||(i=this.getWhitelistItem(n,s.tagTextProp,e)),i},validateTag:function(n){var t=this.settings,e="value"in n?"value":t.tagTextProp,i=this.trim(n[e]+"");return(n[e]+"").trim()?t.mode!="mix"&&t.pattern&&qs(t.pattern,RegExp)&&!t.pattern.test(i)?this.TEXTS.pattern:!t.duplicates&&this.isTagDuplicate(i,t.dropdown.caseSensitive,n.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(i)||t.enforceWhitelist&&!this.isTagWhitelisted(i)?this.TEXTS.notAllowed:!t.validate||t.validate(n):this.TEXTS.empty},getInvalidTagAttrs:function(n,t){return{"aria-invalid":!0,class:"".concat(n.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:t}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(n,t){var e=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),e[t||"readonly"]=n,this.DOM.scope[(n?"set":"remove")+"Attribute"](t||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!n)},setContentEditable:function(n){this.DOM.input.contentEditable=n,this.DOM.input.tabIndex=n?0:-1},setDisabled:function(n){this.setReadonly(n,"disabled")},normalizeTags:function(n){var t=this,e=this.settings,i=e.whitelist,s=e.delimiters,c=e.mode,d=e.tagTextProp,m=[],v=!!i&&qs(i[0],Object),y=Array.isArray(n),x=y&&n[0].value,E=a(function(A){return(A+"").split(s).reduce(function(C,k){var H,M=t.trim(k);return M&&C.push((Ov(H={},d,M),Ov(H,"value",M),H)),C},[])},"h");if(typeof n=="number"&&(n=n.toString()),typeof n=="string"){if(!n.trim())return[];n=E(n)}else y&&(n=n.reduce(function(A,C){if(ss(C)){var k=Fn({},C);k[d]=t.trim(k[d]),k[d]&&A.push(k)}else if(C){var H;(H=A).push.apply(H,Cv(E(C)))}return A},[]));return v&&!x&&(n.forEach(function(A){var C=m.map(function(M){return M.value}),k=t.dropdown.filterListItems.call(t,A[d],{exact:!0});t.settings.duplicates||(k=k.filter(function(M){return!C.includes(M.value)}));var H=k.length>1?t.getWhitelistItem(A[d],d,k):k[0];H&&qs(H,Object)?m.push(H):c!="mix"&&(A.value==null&&(A.value=A[d]),m.push(A))}),m.length&&(n=m)),n},parseMixTags:function(n){var t=this,e=this.settings,i=e.mixTagsInterpolator,s=e.duplicates,c=e.transformTag,d=e.enforceWhitelist,m=e.maxTags,v=e.tagTextProp,y=[];n=n.split(i[0]).map(function(E,A){var C,k,H,M=E.split(i[1]),q=M[0],V=y.length==m;try{if(q==+q)throw Error;k=JSON.parse(q)}catch{k=t.normalizeTags(q)[0]||{value:q}}if(c.call(t,k),V||!(M.length>1)||d&&!t.isTagWhitelisted(k.value)||!s&&t.isTagDuplicate(k.value)){if(E)return A?i[0]+E:E}else k[C=k[v]?v:"value"]=t.trim(k[C]),H=t.createTagElem(k),y.push(k),H.classList.add(t.settings.classNames.tagNoAnimation),M[0]=H.outerHTML,t.value.push(k);return M.join("")}).join(""),this.DOM.input.innerHTML=n,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var x=this.getTagElms();return x.forEach(function(E,A){return en(E,y[A])}),this.update({withoutChangeEvent:!0}),oE(x,this.state.hasFocus),n},replaceTextWithNode:function(n,t){if(this.state.tag||t){t=t||this.state.tag.prefix+this.state.tag.value;var e,i,s=this.state.selection||window.getSelection(),c=s.anchorNode,d=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return c.splitText(s.anchorOffset-d),(e=c.nodeValue.lastIndexOf(t))==-1||(i=c.splitText(e),n&&c.parentNode.replaceChild(n,i)),!0}},prepareNewTagNode:function(n,t){t=t||{};var e=this.settings,i=[],s={},c=Object.assign({},n,{value:n.value+""});if(n=Object.assign({},c),e.transformTag.call(this,n),n.__isValid=this.hasMaxTags()||this.validateTag(n),n.__isValid!==!0){if(t.skipInvalid)return;if(Fn(s,this.getInvalidTagAttrs(n,n.__isValid),{__preInvalidData:c}),n.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(n.value)),!e.createInvalidTags)return void i.push(n.value)}return"readonly"in n&&(n.readonly?s["aria-readonly"]=!0:delete n.readonly),{tagElm:this.createTagElem(n,s),tagData:n,aggregatedInvalidInput:i}},postProcessNewTagNode:function(n,t){var e=this,i=this.settings,s=t.__isValid;s&&s===!0?(this.value.push(t),this.trigger("add",{tag:n,index:this.value.length-1,data:t})):(this.trigger("invalid",{data:t,index:this.value.length,tag:n,message:s}),i.keepInvalidTags||setTimeout(function(){return e.removeTags(n,!0)},1e3)),this.dropdown.position()},selectTag:function(n,t){var e=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(t.value)){this.state.actions.selectOption&&setTimeout(function(){return e.setRangeAtStartEnd(!1,e.DOM.input)});var i=this.getLastTag();return i?this.replaceTag(i,t):this.appendTag(n),this.value[0]=t,this.update(),this.trigger("add",{tag:n,data:t}),[n]}},addEmptyTag:function(n){var t=Fn({value:""},n||{}),e=this.createTagElem(t);en(e,t),this.appendTag(e),this.editTag(e,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(n,t,e){var i=this,s=[],c=this.settings,d=[],m=document.createDocumentFragment();if(!n||n.length==0)return s;switch(n=this.normalizeTags(n),c.mode){case"mix":return this.addMixTags(n);case"select":t=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),n.forEach(function(v){var y=i.prepareNewTagNode(v,{skipInvalid:e||c.skipInvalid});if(y){var x=y.tagElm;if(v=y.tagData,d=y.aggregatedInvalidInput,s.push(x),c.mode=="select")return i.selectTag(x,v);m.appendChild(x),i.postProcessNewTagNode(x,v)}}),this.appendTag(m),this.update(),n.length&&t&&(this.input.set.call(this,c.createInvalidTags?"":d.join(c._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),c.dropdown.enabled&&this.dropdown.refilter(),s},addMixTags:function(n){var t=this;if((n=this.normalizeTags(n))[0].prefix||this.state.tag)return this.prefixedTextToTag(n[0]);var e=document.createDocumentFragment();return n.forEach(function(i){var s=t.prepareNewTagNode(i);e.appendChild(s.tagElm),t.insertAfterTag(s.tagElm),t.postProcessNewTagNode(s.tagElm,s.tagData)}),this.appendMixTags(e),e.children},appendMixTags:function(n){var t=!!this.state.selection;t?this.injectAtCaret(n):(this.DOM.input.focus(),(t=this.setStateSelection()).range.setStart(this.DOM.input,t.range.endOffset),t.range.setEnd(this.DOM.input,t.range.endOffset),this.DOM.input.appendChild(n),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(n){var t,e,i,s=this,c=this.settings,d=(t=this.state.tag)===null||t===void 0?void 0:t.delimiters;if(n.prefix=n.prefix||this.state.tag?this.state.tag.prefix:(c.pattern.source||c.pattern)[0],i=this.prepareNewTagNode(n),e=i.tagElm,this.replaceTextWithNode(e)||this.DOM.input.appendChild(e),setTimeout(function(){return e.classList.add(s.settings.classNames.tagNoAnimation)},300),this.value.push(i.tagData),this.update(),!d){var m=this.insertAfterTag(e)||e;setTimeout(Lo,0,m)}return this.state.tag=null,this.postProcessNewTagNode(e,i.tagData),e},appendTag:function(n){var t=this.DOM,e=t.input;t.scope.insertBefore(n,e)},createTagElem:function(n,t){n.__tagId=Jx();var e,i=Fn({},n,rE({value:Ta(n.value+"")},t));return function(s){for(var c,d=document.createNodeIterator(s,NodeFilter.SHOW_TEXT,null,!1);c=d.nextNode();)c.textContent.trim()||c.parentNode.removeChild(c)}(e=this.parseTemplate("tag",[i,this])),en(e,n),e},reCheckInvalidTags:function(){var n=this,t=this.settings;this.getTagElms(t.classNames.tagNotAllowed).forEach(function(e,i){var s=en(e),c=n.hasMaxTags(),d=n.validateTag(s),m=d===!0&&!c;if(t.mode=="select"&&n.toggleScopeValidation(d),m)return s=s.__preInvalidData?s.__preInvalidData:{value:s.value},n.replaceTag(e,s);e.title=c||d})},removeTags:function(n,t,e){var i,s=this,c=this.settings;if(n=n&&qs(n,HTMLElement)?[n]:qs(n,Array)?n:n?[n]:[this.getLastTag()].filter(function(d){return d}),i=n.reduce(function(d,m){m&&typeof m=="string"&&(m=s.getTagElmByValue(m));var v=en(m);return m&&v&&!v.readonly&&d.push({node:m,idx:s.getTagIdx(v),data:en(m,{__removed:!0})}),d},[]),e=typeof e=="number"?e:this.CSSVars.tagHideTransition,c.mode=="select"&&(e=0,this.input.set.call(this)),i.length==1&&c.mode!="select"&&i[0].node.classList.contains(c.classNames.tagNotAllowed)&&(t=!0),i.length)return c.hooks.beforeRemoveTag(i,{tagify:this}).then(function(){var d=a(function(m){m.node.parentNode&&(m.node.parentNode.removeChild(m.node),t?c.keepInvalidTags&&this.trigger("remove",{tag:m.node,index:m.idx}):(this.trigger("remove",{tag:m.node,index:m.idx,data:m.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),c.keepInvalidTags&&this.reCheckInvalidTags()))},"t");e&&e>10&&i.length==1?function(m){m.node.style.width=parseFloat(window.getComputedStyle(m.node).width)+"px",document.body.clientTop,m.node.classList.add(c.classNames.tagHide),setTimeout(d.bind(this),e,m)}.call(s,i[0]):i.forEach(d.bind(s)),t||(s.removeTagsFromValue(i.map(function(m){return m.node})),s.update(),c.mode=="select"&&c.userInput&&s.setContentEditable(!0))}).catch(function(d){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(n){return n.remove()})},removeTagsFromValue:function(n){var t=this;(n=Array.isArray(n)?n:[n]).forEach(function(e){var i=en(e),s=t.getTagIdx(i);s>-1&&t.value.splice(s,1)})},removeAllTags:function(n){var t=this;n=n||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){t.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(n)},postUpdate:function(){this.state.blockChangeEvent=!1;var n,t,e=this.settings,i=e.classNames,s=e.mode=="mix"?e.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(i.hasMaxTags,this.value.length>=e.maxTags),this.toggleClass(i.hasNoTags,!this.value.length),this.toggleClass(i.empty,!s),e.mode=="select"&&this.toggleScopeValidation((t=this.value)===null||t===void 0||(n=t[0])===null||n===void 0?void 0:n.__isValid)},setOriginalInputValue:function(n){var t=this.DOM.originalInput;this.settings.mixMode.integrated||(t.value=n,t.tagifyValue=t.value,this.setPersistedData(n,"value"))},update:function(n){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var t=this.getInputValue();this.setOriginalInputValue(t),this.settings.onChangeAfterBlur&&(n||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var n=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(n):n.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(n):JSON.stringify(n):""},getCleanValue:function(n){return $x(n||this.value,this.dataProps)},getMixedTagsAsString:function(){var n="",t=this,e=this.settings,i=e.originalInputValueFormat||JSON.stringify,s=e.mixTagsInterpolator;return a(function c(d){d.childNodes.forEach(function(m){if(m.nodeType==1){var v=en(m);if(m.tagName=="BR"&&(n+=`\r
`),v&&Sa.call(t,m)){if(v.__removed)return;n+=s[0]+i(Nv(v,t.dataProps))+s[1]}else m.getAttribute("style")||["B","I","U"].includes(m.tagName)?n+=m.textContent:m.tagName!="DIV"&&m.tagName!="P"||(n+=`\r
`,c(m))}else n+=m.textContent})},"i")(this.DOM.input),n}},Bu.prototype.removeTag=Bu.prototype.removeTags;var ju=class extends Fe{static{a(this,"TagFieldController")}connect(){this.tagify=new Bu(this.querySelector("textarea"),this.opticons())}opticons(){let t=JSON.parse(this.dataset.tagify||"{}");return Object.assign({originalInputValueFormat:this.mapValue},t)}mapValue(t){return t.map(e=>e.value).join(",")}};var Fu=class extends qn{static{a(this,"ToggleFormsController")}connect(){this.toggler=document.getElementById(this.dataset.toggler),this.toggleTarget=document.getElementById(this.dataset.toggleTarget),this.toggler.addEventListener("change",this.onChange.bind(this),!1)}onChange(t){console.log(this.toggler.value,this.dataset.toggleValue),this.toggler.value==this.dataset.toggleValue?this.toggleTarget.classList.remove("hidden"):this.toggleTarget.classList.add("hidden")}};rn.register(Nc);rn.register(Oc);rn.register(kc);rn.register(Mc);rn.register(Ic);rn.register(Dc);rn.register(Pc);rn.register(Hc);rn.register(zc);rn.register(Uc);rn.register($c);rn.register(Kc);rn.register(Gc);rn.register(Yc);rn.register(Xc);rn.register(Jc);rn.register(Qc);rn.register(tu);rn.register(Iu);rn.register(Du);rn.register(Pu);rn.register(ju);rn.register(Fu);rn.start();})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.4
  Copyright © 2024 37signals LLC
   *)

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)

sortablejs/modular/sortable.core.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
