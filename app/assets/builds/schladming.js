(()=>{var zx=Object.create;var Sl=Object.defineProperty;var $x=Object.getOwnPropertyDescriptor;var Wx=Object.getOwnPropertyNames;var Kx=Object.getPrototypeOf,Gx=Object.prototype.hasOwnProperty;var a=(r,e)=>Sl(r,"name",{value:e,configurable:!0});var Ln=(r,e)=>()=>(r&&(e=r(r=0)),e);var On=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ch=(r,e)=>{for(var t in e)Sl(r,t,{get:e[t],enumerable:!0})},Yx=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Wx(e))!Gx.call(r,s)&&s!==t&&Sl(r,s,{get:()=>e[s],enumerable:!(n=$x(e,s))||n.enumerable});return r};var lr=(r,e,t)=>(t=r!=null?zx(Kx(r)):{},Yx(e||!r||!r.__esModule?Sl(t,"default",{value:r,enumerable:!0}):t,r));var Ai,Hl=Ln(()=>{Ai={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var at,Ks=Ln(()=>{Hl();at={log(...r){this.enabled&&(r.push(Date.now()),Ai.logger.log("[ActionCable]",...r))}}});var ra,Ul,na,Vl,Vh=Ln(()=>{Ks();ra=a(()=>new Date().getTime(),"now"),Ul=a(r=>(ra()-r)/1e3,"secondsSince"),na=class{static{a(this,"ConnectionMonitor")}constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=ra(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),at.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=ra(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),at.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=ra()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,at.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=ra(),at.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,n=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),c=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*n*(1+c)}reconnectIfStale(){this.connectionIsStale()&&(at.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Ul(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?at.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Ul(this.disconnectedAt)} s`):(at.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Ul(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Ul(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(at.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};na.staleThreshold=6;na.reconnectionBackoffRate=.15;Vl=na});var ia,zh=Ln(()=>{ia={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var sa,$h,oT,gg,oa,zl,Wh=Ln(()=>{Hl();Vh();zh();Ks();({message_types:sa,protocols:$h}=ia),oT=$h.slice(0,$h.length-1),gg=[].indexOf,oa=class{static{a(this,"Connection")}constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Vl(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return at.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...$h,...this.consumer.subprotocols||[]];return at.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new Ai.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(at.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){at.log("Failed to reopen WebSocket",e)}finally{at.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return gg.call(oT,this.getProtocol())>=0}isState(...e){return gg.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in Ai.WebSocket)if(Ai.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};oa.reopenDelay=500;oa.prototype.events={message(r){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:n,reconnect:s,type:c}=JSON.parse(r.data);switch(c){case sa.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case sa.disconnect:return at.log(`Disconnecting. Reason: ${n}`),this.close({allowReconnect:s});case sa.ping:return this.monitor.recordPing();case sa.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case sa.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(at.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return at.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(r){if(at.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){at.log("WebSocket onerror event")}};zl=oa});var aT,os,Kh=Ln(()=>{aT=a(function(r,e){if(e!=null)for(let t in e){let n=e[t];r[t]=n}return r},"extend"),os=class{static{a(this,"Subscription")}constructor(e,t={},n){this.consumer=e,this.identifier=JSON.stringify(t),aT(this,n)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var Gh,$l,Yh=Ln(()=>{Ks();Gh=class{static{a(this,"SubscriptionGuarantor")}constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(at.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):at.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){at.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{at.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},$l=Gh});var as,Zh=Ln(()=>{Kh();Yh();Ks();as=class{static{a(this,"Subscriptions")}constructor(e){this.consumer=e,this.guarantor=new $l(this),this.subscriptions=[]}create(e,t){let n=e,s=typeof n=="object"?n:{channel:n},c=new os(this.consumer,s,t);return this.add(c)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(n=>this.notify(n,e,...t))}notify(e,t,...n){let s;return typeof e=="string"?s=this.findAll(e):s=[e],s.map(c=>typeof c[t]=="function"?c[t](...n):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){at.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:n}=e;return this.consumer.send({command:t,identifier:n})}}});function Xh(r){if(typeof r=="function"&&(r=r()),r&&!/^wss?:/i.test(r)){let e=document.createElement("a");return e.href=r,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return r}var Gs,bg=Ln(()=>{Wh();Zh();Gs=class{static{a(this,"Consumer")}constructor(e){this._url=e,this.subscriptions=new as(this),this.connection=new zl(this),this.subprotocols=[]}get url(){return Xh(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}};a(Xh,"createWebSocketURL")});var yg={};ch(yg,{Connection:()=>zl,ConnectionMonitor:()=>Vl,Consumer:()=>Gs,INTERNAL:()=>ia,Subscription:()=>os,SubscriptionGuarantor:()=>$l,Subscriptions:()=>as,adapters:()=>Ai,createConsumer:()=>lT,createWebSocketURL:()=>Xh,getConfig:()=>vg,logger:()=>at});function lT(r=vg("url")||ia.default_mount_path){return new Gs(r)}function vg(r){let e=document.head.querySelector(`meta[name='action-cable-${r}']`);if(e)return e.getAttribute("content")}var wg=Ln(()=>{Wh();Vh();bg();zh();Kh();Zh();Yh();Hl();Ks();a(lT,"createConsumer");a(vg,"getConfig")});var td=On((q2,ed)=>{function Lg(r,e=100,t={}){if(typeof r!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof r}\`.`);if(e<0)throw new RangeError("`wait` must not be negative.");let{immediate:n}=typeof t=="boolean"?{immediate:t}:t,s,c,h,d,p;function g(){let v=Date.now()-d;if(v<e&&v>=0)h=setTimeout(g,e-v);else if(h=void 0,!n){let E=s,A=c;s=void 0,c=void 0,p=r.apply(E,A)}}a(g,"later");let b=a(function(...v){if(s&&this!==s)throw new Error("Debounced method called with different contexts.");s=this,c=v,d=Date.now();let E=n&&!h;if(h||(h=setTimeout(g,e)),E){let A=s,N=c;s=void 0,c=void 0,p=r.apply(A,N)}return p},"debounced");return b.clear=()=>{h&&(clearTimeout(h),h=void 0)},b.flush=()=>{if(!h)return;let v=s,E=c;s=void 0,c=void 0,p=r.apply(v,E),clearTimeout(h),h=void 0},b}a(Lg,"debounce");ed.exports.debounce=Lg;ed.exports=Lg});var o0=On((e9,s0)=>{var $r=-1,Ar=1,Zt=0;function ka(r,e,t,n,s){if(r===e)return r?[[Zt,r]]:[];if(t!=null){var c=oO(r,e,t);if(c)return c}var h=xd(r,e),d=r.substring(0,h);r=r.substring(h),e=e.substring(h),h=Nc(r,e);var p=r.substring(r.length-h);r=r.substring(0,r.length-h),e=e.substring(0,e.length-h);var g=JL(r,e);return d&&g.unshift([Zt,d]),p&&g.push([Zt,p]),Ed(g,s),n&&tO(g),g}a(ka,"diff_main");function JL(r,e){var t;if(!r)return[[Ar,e]];if(!e)return[[$r,r]];var n=r.length>e.length?r:e,s=r.length>e.length?e:r,c=n.indexOf(s);if(c!==-1)return t=[[Ar,n.substring(0,c)],[Zt,s],[Ar,n.substring(c+s.length)]],r.length>e.length&&(t[0][0]=t[2][0]=$r),t;if(s.length===1)return[[$r,r],[Ar,e]];var h=eO(r,e);if(h){var d=h[0],p=h[1],g=h[2],b=h[3],v=h[4],E=ka(d,g),A=ka(p,b);return E.concat([[Zt,v]],A)}return QL(r,e)}a(JL,"diff_compute_");function QL(r,e){for(var t=r.length,n=e.length,s=Math.ceil((t+n)/2),c=s,h=2*s,d=new Array(h),p=new Array(h),g=0;g<h;g++)d[g]=-1,p[g]=-1;d[c+1]=0,p[c+1]=0;for(var b=t-n,v=b%2!==0,E=0,A=0,N=0,P=0,T=0;T<s;T++){for(var O=-T+E;O<=T-A;O+=2){var j=c+O,F;O===-T||O!==T&&d[j-1]<d[j+1]?F=d[j+1]:F=d[j-1]+1;for(var U=F-O;F<t&&U<n&&r.charAt(F)===e.charAt(U);)F++,U++;if(d[j]=F,F>t)A+=2;else if(U>n)E+=2;else if(v){var Z=c+b-O;if(Z>=0&&Z<h&&p[Z]!==-1){var se=t-p[Z];if(F>=se)return Zv(r,e,F,U)}}}for(var ee=-T+N;ee<=T-P;ee+=2){var Z=c+ee,se;ee===-T||ee!==T&&p[Z-1]<p[Z+1]?se=p[Z+1]:se=p[Z-1]+1;for(var _=se-ee;se<t&&_<n&&r.charAt(t-se-1)===e.charAt(n-_-1);)se++,_++;if(p[Z]=se,se>t)P+=2;else if(_>n)N+=2;else if(!v){var j=c+b-ee;if(j>=0&&j<h&&d[j]!==-1){var F=d[j],U=c+F-j;if(se=t-se,F>=se)return Zv(r,e,F,U)}}}}return[[$r,r],[Ar,e]]}a(QL,"diff_bisect_");function Zv(r,e,t,n){var s=r.substring(0,t),c=e.substring(0,n),h=r.substring(t),d=e.substring(n),p=ka(s,c),g=ka(h,d);return p.concat(g)}a(Zv,"diff_bisectSplit_");function xd(r,e){if(!r||!e||r.charAt(0)!==e.charAt(0))return 0;for(var t=0,n=Math.min(r.length,e.length),s=n,c=0;t<s;)r.substring(c,s)==e.substring(c,s)?(t=s,c=t):n=s,s=Math.floor((n-t)/2+t);return t0(r.charCodeAt(s-1))&&s--,s}a(xd,"diff_commonPrefix");function Xv(r,e){var t=r.length,n=e.length;if(t==0||n==0)return 0;t>n?r=r.substring(t-n):t<n&&(e=e.substring(0,t));var s=Math.min(t,n);if(r==e)return s;for(var c=0,h=1;;){var d=r.substring(s-h),p=e.indexOf(d);if(p==-1)return c;h+=p,(p==0||r.substring(s-h)==e.substring(0,h))&&(c=h,h++)}}a(Xv,"diff_commonOverlap_");function Nc(r,e){if(!r||!e||r.slice(-1)!==e.slice(-1))return 0;for(var t=0,n=Math.min(r.length,e.length),s=n,c=0;t<s;)r.substring(r.length-s,r.length-c)==e.substring(e.length-s,e.length-c)?(t=s,c=t):n=s,s=Math.floor((n-t)/2+t);return r0(r.charCodeAt(r.length-s))&&s--,s}a(Nc,"diff_commonSuffix");function eO(r,e){var t=r.length>e.length?r:e,n=r.length>e.length?e:r;if(t.length<4||n.length*2<t.length)return null;function s(A,N,P){for(var T=A.substring(P,P+Math.floor(A.length/4)),O=-1,j="",F,U,Z,se;(O=N.indexOf(T,O+1))!==-1;){var ee=xd(A.substring(P),N.substring(O)),_=Nc(A.substring(0,P),N.substring(0,O));j.length<_+ee&&(j=N.substring(O-_,O)+N.substring(O,O+ee),F=A.substring(0,P-_),U=A.substring(P+ee),Z=N.substring(0,O-_),se=N.substring(O+ee))}return j.length*2>=A.length?[F,U,Z,se,j]:null}a(s,"diff_halfMatchI_");var c=s(t,n,Math.ceil(t.length/4)),h=s(t,n,Math.ceil(t.length/2)),d;if(!c&&!h)return null;h?c?d=c[4].length>h[4].length?c:h:d=h:d=c;var p,g,b,v;r.length>e.length?(p=d[0],g=d[1],b=d[2],v=d[3]):(b=d[0],v=d[1],p=d[2],g=d[3]);var E=d[4];return[p,g,b,v,E]}a(eO,"diff_halfMatch_");function tO(r){for(var e=!1,t=[],n=0,s=null,c=0,h=0,d=0,p=0,g=0;c<r.length;)r[c][0]==Zt?(t[n++]=c,h=p,d=g,p=0,g=0,s=r[c][1]):(r[c][0]==Ar?p+=r[c][1].length:g+=r[c][1].length,s&&s.length<=Math.max(h,d)&&s.length<=Math.max(p,g)&&(r.splice(t[n-1],0,[$r,s]),r[t[n-1]+1][0]=Ar,n--,n--,c=n>0?t[n-1]:-1,h=0,d=0,p=0,g=0,s=null,e=!0)),c++;for(e&&Ed(r),iO(r),c=1;c<r.length;){if(r[c-1][0]==$r&&r[c][0]==Ar){var b=r[c-1][1],v=r[c][1],E=Xv(b,v),A=Xv(v,b);E>=A?(E>=b.length/2||E>=v.length/2)&&(r.splice(c,0,[Zt,v.substring(0,E)]),r[c-1][1]=b.substring(0,b.length-E),r[c+1][1]=v.substring(E),c++):(A>=b.length/2||A>=v.length/2)&&(r.splice(c,0,[Zt,b.substring(0,A)]),r[c-1][0]=Ar,r[c-1][1]=v.substring(0,v.length-A),r[c+1][0]=$r,r[c+1][1]=b.substring(A),c++),c++}c++}}a(tO,"diff_cleanupSemantic");var Jv=/[^a-zA-Z0-9]/,Qv=/\s/,e0=/[\r\n]/,rO=/\n\r?\n$/,nO=/^\r?\n\r?\n/;function iO(r){function e(A,N){if(!A||!N)return 6;var P=A.charAt(A.length-1),T=N.charAt(0),O=P.match(Jv),j=T.match(Jv),F=O&&P.match(Qv),U=j&&T.match(Qv),Z=F&&P.match(e0),se=U&&T.match(e0),ee=Z&&A.match(rO),_=se&&N.match(nO);return ee||_?5:Z||se?4:O&&!F&&U?3:F||U?2:O||j?1:0}a(e,"diff_cleanupSemanticScore_");for(var t=1;t<r.length-1;){if(r[t-1][0]==Zt&&r[t+1][0]==Zt){var n=r[t-1][1],s=r[t][1],c=r[t+1][1],h=Nc(n,s);if(h){var d=s.substring(s.length-h);n=n.substring(0,n.length-h),s=d+s.substring(0,s.length-h),c=d+c}for(var p=n,g=s,b=c,v=e(n,s)+e(s,c);s.charAt(0)===c.charAt(0);){n+=s.charAt(0),s=s.substring(1)+c.charAt(0),c=c.substring(1);var E=e(n,s)+e(s,c);E>=v&&(v=E,p=n,g=s,b=c)}r[t-1][1]!=p&&(p?r[t-1][1]=p:(r.splice(t-1,1),t--),r[t][1]=g,b?r[t+1][1]=b:(r.splice(t+1,1),t--))}t++}}a(iO,"diff_cleanupSemanticLossless");function Ed(r,e){r.push([Zt,""]);for(var t=0,n=0,s=0,c="",h="",d;t<r.length;){if(t<r.length-1&&!r[t][1]){r.splice(t,1);continue}switch(r[t][0]){case Ar:s++,h+=r[t][1],t++;break;case $r:n++,c+=r[t][1],t++;break;case Zt:var p=t-s-n-1;if(e){if(p>=0&&i0(r[p][1])){var g=r[p][1].slice(-1);if(r[p][1]=r[p][1].slice(0,-1),c=g+c,h=g+h,!r[p][1]){r.splice(p,1),t--;var b=p-1;r[b]&&r[b][0]===Ar&&(s++,h=r[b][1]+h,b--),r[b]&&r[b][0]===$r&&(n++,c=r[b][1]+c,b--),p=b}}if(n0(r[t][1])){var g=r[t][1].charAt(0);r[t][1]=r[t][1].slice(1),c+=g,h+=g}}if(t<r.length-1&&!r[t][1]){r.splice(t,1);break}if(c.length>0||h.length>0){c.length>0&&h.length>0&&(d=xd(h,c),d!==0&&(p>=0?r[p][1]+=h.substring(0,d):(r.splice(0,0,[Zt,h.substring(0,d)]),t++),h=h.substring(d),c=c.substring(d)),d=Nc(h,c),d!==0&&(r[t][1]=h.substring(h.length-d)+r[t][1],h=h.substring(0,h.length-d),c=c.substring(0,c.length-d)));var v=s+n;c.length===0&&h.length===0?(r.splice(t-v,v),t=t-v):c.length===0?(r.splice(t-v,v,[Ar,h]),t=t-v+1):h.length===0?(r.splice(t-v,v,[$r,c]),t=t-v+1):(r.splice(t-v,v,[$r,c],[Ar,h]),t=t-v+2)}t!==0&&r[t-1][0]===Zt?(r[t-1][1]+=r[t][1],r.splice(t,1)):t++,s=0,n=0,c="",h="";break}}r[r.length-1][1]===""&&r.pop();var E=!1;for(t=1;t<r.length-1;)r[t-1][0]===Zt&&r[t+1][0]===Zt&&(r[t][1].substring(r[t][1].length-r[t-1][1].length)===r[t-1][1]?(r[t][1]=r[t-1][1]+r[t][1].substring(0,r[t][1].length-r[t-1][1].length),r[t+1][1]=r[t-1][1]+r[t+1][1],r.splice(t-1,1),E=!0):r[t][1].substring(0,r[t+1][1].length)==r[t+1][1]&&(r[t-1][1]+=r[t+1][1],r[t][1]=r[t][1].substring(r[t+1][1].length)+r[t+1][1],r.splice(t+1,1),E=!0)),t++;E&&Ed(r,e)}a(Ed,"diff_cleanupMerge");function t0(r){return r>=55296&&r<=56319}a(t0,"is_surrogate_pair_start");function r0(r){return r>=56320&&r<=57343}a(r0,"is_surrogate_pair_end");function n0(r){return r0(r.charCodeAt(0))}a(n0,"starts_with_pair_end");function i0(r){return t0(r.charCodeAt(r.length-1))}a(i0,"ends_with_pair_start");function sO(r){for(var e=[],t=0;t<r.length;t++)r[t][1].length>0&&e.push(r[t]);return e}a(sO,"remove_empty_tuples");function wd(r,e,t,n){return i0(r)||n0(n)?null:sO([[Zt,r],[$r,e],[Ar,t],[Zt,n]])}a(wd,"make_edit_splice");function oO(r,e,t){var n=typeof t=="number"?{index:t,length:0}:t.oldRange,s=typeof t=="number"?null:t.newRange,c=r.length,h=e.length;if(n.length===0&&(s===null||s.length===0)){var d=n.index,p=r.slice(0,d),g=r.slice(d),b=s?s.index:null;e:{var v=d+h-c;if(b!==null&&b!==v||v<0||v>h)break e;var E=e.slice(0,v),A=e.slice(v);if(A!==g)break e;var N=Math.min(d,v),P=p.slice(0,N),T=E.slice(0,N);if(P!==T)break e;var O=p.slice(N),j=E.slice(N);return wd(P,O,j,g)}e:{if(b!==null&&b!==d)break e;var F=d,E=e.slice(0,F),A=e.slice(F);if(E!==p)break e;var U=Math.min(c-F,h-F),Z=g.slice(g.length-U),se=A.slice(A.length-U);if(Z!==se)break e;var O=g.slice(0,g.length-U),j=A.slice(0,A.length-U);return wd(p,O,j,Z)}}if(n.length>0&&s&&s.length===0)e:{var P=r.slice(0,n.index),Z=r.slice(n.index+n.length),N=P.length,U=Z.length;if(h<N+U)break e;var T=e.slice(0,N),se=e.slice(h-U);if(P!==T||Z!==se)break e;var O=r.slice(N,c-U),j=e.slice(N,h-U);return wd(P,O,j,Z)}return null}a(oO,"find_cursor_edit_diff");function Cc(r,e,t,n){return ka(r,e,t,n,!0)}a(Cc,"diff");Cc.INSERT=Ar;Cc.DELETE=$r;Cc.EQUAL=Zt;s0.exports=Cc});var Pd=On((_a,yo)=>{var aO=200,v0="__lodash_hash_undefined__",y0=9007199254740991,kd="[object Arguments]",lO="[object Array]",w0="[object Boolean]",x0="[object Date]",cO="[object Error]",_d="[object Function]",E0="[object GeneratorFunction]",Lc="[object Map]",T0="[object Number]",qd="[object Object]",a0="[object Promise]",A0="[object RegExp]",Oc="[object Set]",S0="[object String]",N0="[object Symbol]",Ad="[object WeakMap]",C0="[object ArrayBuffer]",kc="[object DataView]",L0="[object Float32Array]",O0="[object Float64Array]",k0="[object Int8Array]",_0="[object Int16Array]",q0="[object Int32Array]",M0="[object Uint8Array]",I0="[object Uint8ClampedArray]",D0="[object Uint16Array]",R0="[object Uint32Array]",uO=/[\\^$.*+?()[\]{}|]/g,hO=/\w*$/,dO=/^\[object .+?Constructor\]$/,fO=/^(?:0|[1-9]\d*)$/,vt={};vt[kd]=vt[lO]=vt[C0]=vt[kc]=vt[w0]=vt[x0]=vt[L0]=vt[O0]=vt[k0]=vt[_0]=vt[q0]=vt[Lc]=vt[T0]=vt[qd]=vt[A0]=vt[Oc]=vt[S0]=vt[N0]=vt[M0]=vt[I0]=vt[D0]=vt[R0]=!0;vt[cO]=vt[_d]=vt[Ad]=!1;var pO=typeof global=="object"&&global&&global.Object===Object&&global,mO=typeof self=="object"&&self&&self.Object===Object&&self,Jn=pO||mO||Function("return this")(),P0=typeof _a=="object"&&_a&&!_a.nodeType&&_a,l0=P0&&typeof yo=="object"&&yo&&!yo.nodeType&&yo,gO=l0&&l0.exports===P0;function bO(r,e){return r.set(e[0],e[1]),r}a(bO,"addMapEntry");function vO(r,e){return r.add(e),r}a(vO,"addSetEntry");function yO(r,e){for(var t=-1,n=r?r.length:0;++t<n&&e(r[t],t,r)!==!1;);return r}a(yO,"arrayEach");function wO(r,e){for(var t=-1,n=e.length,s=r.length;++t<n;)r[s+t]=e[t];return r}a(wO,"arrayPush");function j0(r,e,t,n){var s=-1,c=r?r.length:0;for(n&&c&&(t=r[++s]);++s<c;)t=e(t,r[s],s,r);return t}a(j0,"arrayReduce");function xO(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}a(xO,"baseTimes");function EO(r,e){return r?.[e]}a(EO,"getValue");function B0(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}a(B0,"isHostObject");function c0(r){var e=-1,t=Array(r.size);return r.forEach(function(n,s){t[++e]=[s,n]}),t}a(c0,"mapToArray");function Md(r,e){return function(t){return r(e(t))}}a(Md,"overArg");function u0(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}a(u0,"setToArray");var TO=Array.prototype,AO=Function.prototype,_c=Object.prototype,Td=Jn["__core-js_shared__"],h0=function(){var r=/[^.]+$/.exec(Td&&Td.keys&&Td.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),F0=AO.toString,Di=_c.hasOwnProperty,qc=_c.toString,SO=RegExp("^"+F0.call(Di).replace(uO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),d0=gO?Jn.Buffer:void 0,f0=Jn.Symbol,p0=Jn.Uint8Array,NO=Md(Object.getPrototypeOf,Object),CO=Object.create,LO=_c.propertyIsEnumerable,OO=TO.splice,m0=Object.getOwnPropertySymbols,kO=d0?d0.isBuffer:void 0,_O=Md(Object.keys,Object),Sd=Eo(Jn,"DataView"),qa=Eo(Jn,"Map"),Nd=Eo(Jn,"Promise"),Cd=Eo(Jn,"Set"),Ld=Eo(Jn,"WeakMap"),Ma=Eo(Object,"create"),qO=fs(Sd),MO=fs(qa),IO=fs(Nd),DO=fs(Cd),RO=fs(Ld),g0=f0?f0.prototype:void 0,b0=g0?g0.valueOf:void 0;function ds(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(ds,"Hash");function PO(){this.__data__=Ma?Ma(null):{}}a(PO,"hashClear");function jO(r){return this.has(r)&&delete this.__data__[r]}a(jO,"hashDelete");function BO(r){var e=this.__data__;if(Ma){var t=e[r];return t===v0?void 0:t}return Di.call(e,r)?e[r]:void 0}a(BO,"hashGet");function FO(r){var e=this.__data__;return Ma?e[r]!==void 0:Di.call(e,r)}a(FO,"hashHas");function HO(r,e){var t=this.__data__;return t[r]=Ma&&e===void 0?v0:e,this}a(HO,"hashSet");ds.prototype.clear=PO;ds.prototype.delete=jO;ds.prototype.get=BO;ds.prototype.has=FO;ds.prototype.set=HO;function Qn(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(Qn,"ListCache");function UO(){this.__data__=[]}a(UO,"listCacheClear");function VO(r){var e=this.__data__,t=Mc(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():OO.call(e,t,1),!0}a(VO,"listCacheDelete");function zO(r){var e=this.__data__,t=Mc(e,r);return t<0?void 0:e[t][1]}a(zO,"listCacheGet");function $O(r){return Mc(this.__data__,r)>-1}a($O,"listCacheHas");function WO(r,e){var t=this.__data__,n=Mc(t,r);return n<0?t.push([r,e]):t[n][1]=e,this}a(WO,"listCacheSet");Qn.prototype.clear=UO;Qn.prototype.delete=VO;Qn.prototype.get=zO;Qn.prototype.has=$O;Qn.prototype.set=WO;function wo(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(wo,"MapCache");function KO(){this.__data__={hash:new ds,map:new(qa||Qn),string:new ds}}a(KO,"mapCacheClear");function GO(r){return Ic(this,r).delete(r)}a(GO,"mapCacheDelete");function YO(r){return Ic(this,r).get(r)}a(YO,"mapCacheGet");function ZO(r){return Ic(this,r).has(r)}a(ZO,"mapCacheHas");function XO(r,e){return Ic(this,r).set(r,e),this}a(XO,"mapCacheSet");wo.prototype.clear=KO;wo.prototype.delete=GO;wo.prototype.get=YO;wo.prototype.has=ZO;wo.prototype.set=XO;function xo(r){this.__data__=new Qn(r)}a(xo,"Stack");function JO(){this.__data__=new Qn}a(JO,"stackClear");function QO(r){return this.__data__.delete(r)}a(QO,"stackDelete");function ek(r){return this.__data__.get(r)}a(ek,"stackGet");function tk(r){return this.__data__.has(r)}a(tk,"stackHas");function rk(r,e){var t=this.__data__;if(t instanceof Qn){var n=t.__data__;if(!qa||n.length<aO-1)return n.push([r,e]),this;t=this.__data__=new wo(n)}return t.set(r,e),this}a(rk,"stackSet");xo.prototype.clear=JO;xo.prototype.delete=QO;xo.prototype.get=ek;xo.prototype.has=tk;xo.prototype.set=rk;function nk(r,e){var t=Dd(r)||Ck(r)?xO(r.length,String):[],n=t.length,s=!!n;for(var c in r)(e||Di.call(r,c))&&!(s&&(c=="length"||Tk(c,n)))&&t.push(c);return t}a(nk,"arrayLikeKeys");function H0(r,e,t){var n=r[e];(!(Di.call(r,e)&&$0(n,t))||t===void 0&&!(e in r))&&(r[e]=t)}a(H0,"assignValue");function Mc(r,e){for(var t=r.length;t--;)if($0(r[t][0],e))return t;return-1}a(Mc,"assocIndexOf");function ik(r,e){return r&&U0(e,Rd(e),r)}a(ik,"baseAssign");function Od(r,e,t,n,s,c,h){var d;if(n&&(d=c?n(r,s,c,h):n(r)),d!==void 0)return d;if(!Dc(r))return r;var p=Dd(r);if(p){if(d=wk(r),!e)return bk(r,d)}else{var g=hs(r),b=g==_d||g==E0;if(Ok(r))return uk(r,e);if(g==qd||g==kd||b&&!c){if(B0(r))return c?r:{};if(d=xk(b?{}:r),!e)return vk(r,ik(d,r))}else{if(!vt[g])return c?r:{};d=Ek(r,g,Od,e)}}h||(h=new xo);var v=h.get(r);if(v)return v;if(h.set(r,d),!p)var E=t?yk(r):Rd(r);return yO(E||r,function(A,N){E&&(N=A,A=r[N]),H0(d,N,Od(A,e,t,n,N,r,h))}),d}a(Od,"baseClone");function sk(r){return Dc(r)?CO(r):{}}a(sk,"baseCreate");function ok(r,e,t){var n=e(r);return Dd(r)?n:wO(n,t(r))}a(ok,"baseGetAllKeys");function ak(r){return qc.call(r)}a(ak,"baseGetTag");function lk(r){if(!Dc(r)||Sk(r))return!1;var e=K0(r)||B0(r)?SO:dO;return e.test(fs(r))}a(lk,"baseIsNative");function ck(r){if(!z0(r))return _O(r);var e=[];for(var t in Object(r))Di.call(r,t)&&t!="constructor"&&e.push(t);return e}a(ck,"baseKeys");function uk(r,e){if(e)return r.slice();var t=new r.constructor(r.length);return r.copy(t),t}a(uk,"cloneBuffer");function Id(r){var e=new r.constructor(r.byteLength);return new p0(e).set(new p0(r)),e}a(Id,"cloneArrayBuffer");function hk(r,e){var t=e?Id(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}a(hk,"cloneDataView");function dk(r,e,t){var n=e?t(c0(r),!0):c0(r);return j0(n,bO,new r.constructor)}a(dk,"cloneMap");function fk(r){var e=new r.constructor(r.source,hO.exec(r));return e.lastIndex=r.lastIndex,e}a(fk,"cloneRegExp");function pk(r,e,t){var n=e?t(u0(r),!0):u0(r);return j0(n,vO,new r.constructor)}a(pk,"cloneSet");function mk(r){return b0?Object(b0.call(r)):{}}a(mk,"cloneSymbol");function gk(r,e){var t=e?Id(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}a(gk,"cloneTypedArray");function bk(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}a(bk,"copyArray");function U0(r,e,t,n){t||(t={});for(var s=-1,c=e.length;++s<c;){var h=e[s],d=n?n(t[h],r[h],h,t,r):void 0;H0(t,h,d===void 0?r[h]:d)}return t}a(U0,"copyObject");function vk(r,e){return U0(r,V0(r),e)}a(vk,"copySymbols");function yk(r){return ok(r,Rd,V0)}a(yk,"getAllKeys");function Ic(r,e){var t=r.__data__;return Ak(e)?t[typeof e=="string"?"string":"hash"]:t.map}a(Ic,"getMapData");function Eo(r,e){var t=EO(r,e);return lk(t)?t:void 0}a(Eo,"getNative");var V0=m0?Md(m0,Object):qk,hs=ak;(Sd&&hs(new Sd(new ArrayBuffer(1)))!=kc||qa&&hs(new qa)!=Lc||Nd&&hs(Nd.resolve())!=a0||Cd&&hs(new Cd)!=Oc||Ld&&hs(new Ld)!=Ad)&&(hs=a(function(r){var e=qc.call(r),t=e==qd?r.constructor:void 0,n=t?fs(t):void 0;if(n)switch(n){case qO:return kc;case MO:return Lc;case IO:return a0;case DO:return Oc;case RO:return Ad}return e},"getTag"));function wk(r){var e=r.length,t=r.constructor(e);return e&&typeof r[0]=="string"&&Di.call(r,"index")&&(t.index=r.index,t.input=r.input),t}a(wk,"initCloneArray");function xk(r){return typeof r.constructor=="function"&&!z0(r)?sk(NO(r)):{}}a(xk,"initCloneObject");function Ek(r,e,t,n){var s=r.constructor;switch(e){case C0:return Id(r);case w0:case x0:return new s(+r);case kc:return hk(r,n);case L0:case O0:case k0:case _0:case q0:case M0:case I0:case D0:case R0:return gk(r,n);case Lc:return dk(r,n,t);case T0:case S0:return new s(r);case A0:return fk(r);case Oc:return pk(r,n,t);case N0:return mk(r)}}a(Ek,"initCloneByTag");function Tk(r,e){return e=e??y0,!!e&&(typeof r=="number"||fO.test(r))&&r>-1&&r%1==0&&r<e}a(Tk,"isIndex");function Ak(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}a(Ak,"isKeyable");function Sk(r){return!!h0&&h0 in r}a(Sk,"isMasked");function z0(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||_c;return r===t}a(z0,"isPrototype");function fs(r){if(r!=null){try{return F0.call(r)}catch{}try{return r+""}catch{}}return""}a(fs,"toSource");function Nk(r){return Od(r,!0,!0)}a(Nk,"cloneDeep");function $0(r,e){return r===e||r!==r&&e!==e}a($0,"eq");function Ck(r){return Lk(r)&&Di.call(r,"callee")&&(!LO.call(r,"callee")||qc.call(r)==kd)}a(Ck,"isArguments");var Dd=Array.isArray;function W0(r){return r!=null&&kk(r.length)&&!K0(r)}a(W0,"isArrayLike");function Lk(r){return _k(r)&&W0(r)}a(Lk,"isArrayLikeObject");var Ok=kO||Mk;function K0(r){var e=Dc(r)?qc.call(r):"";return e==_d||e==E0}a(K0,"isFunction");function kk(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=y0}a(kk,"isLength");function Dc(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}a(Dc,"isObject");function _k(r){return!!r&&typeof r=="object"}a(_k,"isObjectLike");function Rd(r){return W0(r)?nk(r):ck(r)}a(Rd,"keys");function qk(){return[]}a(qk,"stubArray");function Mk(){return!1}a(Mk,"stubFalse");yo.exports=Nk});var Yd=On((Ia,Ao)=>{var Ik=200,Gd="__lodash_hash_undefined__",Vc=1,s1=2,o1=9007199254740991,Rc="[object Arguments]",Hd="[object Array]",Dk="[object AsyncFunction]",a1="[object Boolean]",l1="[object Date]",c1="[object Error]",u1="[object Function]",Rk="[object GeneratorFunction]",Pc="[object Map]",h1="[object Number]",Pk="[object Null]",To="[object Object]",G0="[object Promise]",jk="[object Proxy]",d1="[object RegExp]",jc="[object Set]",f1="[object String]",Bk="[object Symbol]",Fk="[object Undefined]",Ud="[object WeakMap]",p1="[object ArrayBuffer]",Bc="[object DataView]",Hk="[object Float32Array]",Uk="[object Float64Array]",Vk="[object Int8Array]",zk="[object Int16Array]",$k="[object Int32Array]",Wk="[object Uint8Array]",Kk="[object Uint8ClampedArray]",Gk="[object Uint16Array]",Yk="[object Uint32Array]",Zk=/[\\^$.*+?()[\]{}|]/g,Xk=/^\[object .+?Constructor\]$/,Jk=/^(?:0|[1-9]\d*)$/,At={};At[Hk]=At[Uk]=At[Vk]=At[zk]=At[$k]=At[Wk]=At[Kk]=At[Gk]=At[Yk]=!0;At[Rc]=At[Hd]=At[p1]=At[a1]=At[Bc]=At[l1]=At[c1]=At[u1]=At[Pc]=At[h1]=At[To]=At[d1]=At[jc]=At[f1]=At[Ud]=!1;var m1=typeof global=="object"&&global&&global.Object===Object&&global,Qk=typeof self=="object"&&self&&self.Object===Object&&self,ei=m1||Qk||Function("return this")(),g1=typeof Ia=="object"&&Ia&&!Ia.nodeType&&Ia,Y0=g1&&typeof Ao=="object"&&Ao&&!Ao.nodeType&&Ao,b1=Y0&&Y0.exports===g1,jd=b1&&m1.process,Z0=function(){try{return jd&&jd.binding&&jd.binding("util")}catch{}}(),X0=Z0&&Z0.isTypedArray;function e_(r,e){for(var t=-1,n=r==null?0:r.length,s=0,c=[];++t<n;){var h=r[t];e(h,t,r)&&(c[s++]=h)}return c}a(e_,"arrayFilter");function t_(r,e){for(var t=-1,n=e.length,s=r.length;++t<n;)r[s+t]=e[t];return r}a(t_,"arrayPush");function r_(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}a(r_,"arraySome");function n_(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}a(n_,"baseTimes");function i_(r){return function(e){return r(e)}}a(i_,"baseUnary");function s_(r,e){return r.has(e)}a(s_,"cacheHas");function o_(r,e){return r?.[e]}a(o_,"getValue");function a_(r){var e=-1,t=Array(r.size);return r.forEach(function(n,s){t[++e]=[s,n]}),t}a(a_,"mapToArray");function l_(r,e){return function(t){return r(e(t))}}a(l_,"overArg");function c_(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}a(c_,"setToArray");var u_=Array.prototype,h_=Function.prototype,zc=Object.prototype,Bd=ei["__core-js_shared__"],v1=h_.toString,In=zc.hasOwnProperty,J0=function(){var r=/[^.]+$/.exec(Bd&&Bd.keys&&Bd.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),y1=zc.toString,d_=RegExp("^"+v1.call(In).replace(Zk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q0=b1?ei.Buffer:void 0,Fc=ei.Symbol,e1=ei.Uint8Array,w1=zc.propertyIsEnumerable,f_=u_.splice,ps=Fc?Fc.toStringTag:void 0,t1=Object.getOwnPropertySymbols,p_=Q0?Q0.isBuffer:void 0,m_=l_(Object.keys,Object),Vd=So(ei,"DataView"),Da=So(ei,"Map"),zd=So(ei,"Promise"),$d=So(ei,"Set"),Wd=So(ei,"WeakMap"),Ra=So(Object,"create"),g_=bs(Vd),b_=bs(Da),v_=bs(zd),y_=bs($d),w_=bs(Wd),r1=Fc?Fc.prototype:void 0,Fd=r1?r1.valueOf:void 0;function ms(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(ms,"Hash");function x_(){this.__data__=Ra?Ra(null):{},this.size=0}a(x_,"hashClear");function E_(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}a(E_,"hashDelete");function T_(r){var e=this.__data__;if(Ra){var t=e[r];return t===Gd?void 0:t}return In.call(e,r)?e[r]:void 0}a(T_,"hashGet");function A_(r){var e=this.__data__;return Ra?e[r]!==void 0:In.call(e,r)}a(A_,"hashHas");function S_(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Ra&&e===void 0?Gd:e,this}a(S_,"hashSet");ms.prototype.clear=x_;ms.prototype.delete=E_;ms.prototype.get=T_;ms.prototype.has=A_;ms.prototype.set=S_;function ti(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(ti,"ListCache");function N_(){this.__data__=[],this.size=0}a(N_,"listCacheClear");function C_(r){var e=this.__data__,t=$c(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():f_.call(e,t,1),--this.size,!0}a(C_,"listCacheDelete");function L_(r){var e=this.__data__,t=$c(e,r);return t<0?void 0:e[t][1]}a(L_,"listCacheGet");function O_(r){return $c(this.__data__,r)>-1}a(O_,"listCacheHas");function k_(r,e){var t=this.__data__,n=$c(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}a(k_,"listCacheSet");ti.prototype.clear=N_;ti.prototype.delete=C_;ti.prototype.get=L_;ti.prototype.has=O_;ti.prototype.set=k_;function gs(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(gs,"MapCache");function __(){this.size=0,this.__data__={hash:new ms,map:new(Da||ti),string:new ms}}a(__,"mapCacheClear");function q_(r){var e=Wc(this,r).delete(r);return this.size-=e?1:0,e}a(q_,"mapCacheDelete");function M_(r){return Wc(this,r).get(r)}a(M_,"mapCacheGet");function I_(r){return Wc(this,r).has(r)}a(I_,"mapCacheHas");function D_(r,e){var t=Wc(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}a(D_,"mapCacheSet");gs.prototype.clear=__;gs.prototype.delete=q_;gs.prototype.get=M_;gs.prototype.has=I_;gs.prototype.set=D_;function Hc(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new gs;++e<t;)this.add(r[e])}a(Hc,"SetCache");function R_(r){return this.__data__.set(r,Gd),this}a(R_,"setCacheAdd");function P_(r){return this.__data__.has(r)}a(P_,"setCacheHas");Hc.prototype.add=Hc.prototype.push=R_;Hc.prototype.has=P_;function Pi(r){var e=this.__data__=new ti(r);this.size=e.size}a(Pi,"Stack");function j_(){this.__data__=new ti,this.size=0}a(j_,"stackClear");function B_(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}a(B_,"stackDelete");function F_(r){return this.__data__.get(r)}a(F_,"stackGet");function H_(r){return this.__data__.has(r)}a(H_,"stackHas");function U_(r,e){var t=this.__data__;if(t instanceof ti){var n=t.__data__;if(!Da||n.length<Ik-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new gs(n)}return t.set(r,e),this.size=t.size,this}a(U_,"stackSet");Pi.prototype.clear=j_;Pi.prototype.delete=B_;Pi.prototype.get=F_;Pi.prototype.has=H_;Pi.prototype.set=U_;function V_(r,e){var t=Uc(r),n=!t&&iq(r),s=!t&&!n&&Kd(r),c=!t&&!n&&!s&&C1(r),h=t||n||s||c,d=h?n_(r.length,String):[],p=d.length;for(var g in r)(e||In.call(r,g))&&!(h&&(g=="length"||s&&(g=="offset"||g=="parent")||c&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Q_(g,p)))&&d.push(g);return d}a(V_,"arrayLikeKeys");function $c(r,e){for(var t=r.length;t--;)if(T1(r[t][0],e))return t;return-1}a($c,"assocIndexOf");function z_(r,e,t){var n=e(r);return Uc(r)?n:t_(n,t(r))}a(z_,"baseGetAllKeys");function ja(r){return r==null?r===void 0?Fk:Pk:ps&&ps in Object(r)?X_(r):nq(r)}a(ja,"baseGetTag");function n1(r){return Pa(r)&&ja(r)==Rc}a(n1,"baseIsArguments");function x1(r,e,t,n,s){return r===e?!0:r==null||e==null||!Pa(r)&&!Pa(e)?r!==r&&e!==e:$_(r,e,t,n,x1,s)}a(x1,"baseIsEqual");function $_(r,e,t,n,s,c){var h=Uc(r),d=Uc(e),p=h?Hd:Ri(r),g=d?Hd:Ri(e);p=p==Rc?To:p,g=g==Rc?To:g;var b=p==To,v=g==To,E=p==g;if(E&&Kd(r)){if(!Kd(e))return!1;h=!0,b=!1}if(E&&!b)return c||(c=new Pi),h||C1(r)?E1(r,e,t,n,s,c):Y_(r,e,p,t,n,s,c);if(!(t&Vc)){var A=b&&In.call(r,"__wrapped__"),N=v&&In.call(e,"__wrapped__");if(A||N){var P=A?r.value():r,T=N?e.value():e;return c||(c=new Pi),s(P,T,t,n,c)}}return E?(c||(c=new Pi),Z_(r,e,t,n,s,c)):!1}a($_,"baseIsEqualDeep");function W_(r){if(!N1(r)||tq(r))return!1;var e=A1(r)?d_:Xk;return e.test(bs(r))}a(W_,"baseIsNative");function K_(r){return Pa(r)&&S1(r.length)&&!!At[ja(r)]}a(K_,"baseIsTypedArray");function G_(r){if(!rq(r))return m_(r);var e=[];for(var t in Object(r))In.call(r,t)&&t!="constructor"&&e.push(t);return e}a(G_,"baseKeys");function E1(r,e,t,n,s,c){var h=t&Vc,d=r.length,p=e.length;if(d!=p&&!(h&&p>d))return!1;var g=c.get(r);if(g&&c.get(e))return g==e;var b=-1,v=!0,E=t&s1?new Hc:void 0;for(c.set(r,e),c.set(e,r);++b<d;){var A=r[b],N=e[b];if(n)var P=h?n(N,A,b,e,r,c):n(A,N,b,r,e,c);if(P!==void 0){if(P)continue;v=!1;break}if(E){if(!r_(e,function(T,O){if(!s_(E,O)&&(A===T||s(A,T,t,n,c)))return E.push(O)})){v=!1;break}}else if(!(A===N||s(A,N,t,n,c))){v=!1;break}}return c.delete(r),c.delete(e),v}a(E1,"equalArrays");function Y_(r,e,t,n,s,c,h){switch(t){case Bc:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case p1:return!(r.byteLength!=e.byteLength||!c(new e1(r),new e1(e)));case a1:case l1:case h1:return T1(+r,+e);case c1:return r.name==e.name&&r.message==e.message;case d1:case f1:return r==e+"";case Pc:var d=a_;case jc:var p=n&Vc;if(d||(d=c_),r.size!=e.size&&!p)return!1;var g=h.get(r);if(g)return g==e;n|=s1,h.set(r,e);var b=E1(d(r),d(e),n,s,c,h);return h.delete(r),b;case Bk:if(Fd)return Fd.call(r)==Fd.call(e)}return!1}a(Y_,"equalByTag");function Z_(r,e,t,n,s,c){var h=t&Vc,d=i1(r),p=d.length,g=i1(e),b=g.length;if(p!=b&&!h)return!1;for(var v=p;v--;){var E=d[v];if(!(h?E in e:In.call(e,E)))return!1}var A=c.get(r);if(A&&c.get(e))return A==e;var N=!0;c.set(r,e),c.set(e,r);for(var P=h;++v<p;){E=d[v];var T=r[E],O=e[E];if(n)var j=h?n(O,T,E,e,r,c):n(T,O,E,r,e,c);if(!(j===void 0?T===O||s(T,O,t,n,c):j)){N=!1;break}P||(P=E=="constructor")}if(N&&!P){var F=r.constructor,U=e.constructor;F!=U&&"constructor"in r&&"constructor"in e&&!(typeof F=="function"&&F instanceof F&&typeof U=="function"&&U instanceof U)&&(N=!1)}return c.delete(r),c.delete(e),N}a(Z_,"equalObjects");function i1(r){return z_(r,aq,J_)}a(i1,"getAllKeys");function Wc(r,e){var t=r.__data__;return eq(e)?t[typeof e=="string"?"string":"hash"]:t.map}a(Wc,"getMapData");function So(r,e){var t=o_(r,e);return W_(t)?t:void 0}a(So,"getNative");function X_(r){var e=In.call(r,ps),t=r[ps];try{r[ps]=void 0;var n=!0}catch{}var s=y1.call(r);return n&&(e?r[ps]=t:delete r[ps]),s}a(X_,"getRawTag");var J_=t1?function(r){return r==null?[]:(r=Object(r),e_(t1(r),function(e){return w1.call(r,e)}))}:lq,Ri=ja;(Vd&&Ri(new Vd(new ArrayBuffer(1)))!=Bc||Da&&Ri(new Da)!=Pc||zd&&Ri(zd.resolve())!=G0||$d&&Ri(new $d)!=jc||Wd&&Ri(new Wd)!=Ud)&&(Ri=a(function(r){var e=ja(r),t=e==To?r.constructor:void 0,n=t?bs(t):"";if(n)switch(n){case g_:return Bc;case b_:return Pc;case v_:return G0;case y_:return jc;case w_:return Ud}return e},"getTag"));function Q_(r,e){return e=e??o1,!!e&&(typeof r=="number"||Jk.test(r))&&r>-1&&r%1==0&&r<e}a(Q_,"isIndex");function eq(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}a(eq,"isKeyable");function tq(r){return!!J0&&J0 in r}a(tq,"isMasked");function rq(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||zc;return r===t}a(rq,"isPrototype");function nq(r){return y1.call(r)}a(nq,"objectToString");function bs(r){if(r!=null){try{return v1.call(r)}catch{}try{return r+""}catch{}}return""}a(bs,"toSource");function T1(r,e){return r===e||r!==r&&e!==e}a(T1,"eq");var iq=n1(function(){return arguments}())?n1:function(r){return Pa(r)&&In.call(r,"callee")&&!w1.call(r,"callee")},Uc=Array.isArray;function sq(r){return r!=null&&S1(r.length)&&!A1(r)}a(sq,"isArrayLike");var Kd=p_||cq;function oq(r,e){return x1(r,e)}a(oq,"isEqual");function A1(r){if(!N1(r))return!1;var e=ja(r);return e==u1||e==Rk||e==Dk||e==jk}a(A1,"isFunction");function S1(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=o1}a(S1,"isLength");function N1(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}a(N1,"isObject");function Pa(r){return r!=null&&typeof r=="object"}a(Pa,"isObjectLike");var C1=X0?i_(X0):K_;function aq(r){return sq(r)?V_(r):G_(r)}a(aq,"keys");function lq(){return[]}a(lq,"stubArray");function cq(){return!1}a(cq,"stubFalse");Ao.exports=oq});var L1=On(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});var uq=Pd(),hq=Yd(),Zd;(function(r){function e(c={},h={},d=!1){typeof c!="object"&&(c={}),typeof h!="object"&&(h={});let p=uq(h);d||(p=Object.keys(p).reduce((g,b)=>(p[b]!=null&&(g[b]=p[b]),g),{}));for(let g in c)c[g]!==void 0&&h[g]===void 0&&(p[g]=c[g]);return Object.keys(p).length>0?p:void 0}a(e,"compose"),r.compose=e;function t(c={},h={}){typeof c!="object"&&(c={}),typeof h!="object"&&(h={});let d=Object.keys(c).concat(Object.keys(h)).reduce((p,g)=>(hq(c[g],h[g])||(p[g]=h[g]===void 0?null:h[g]),p),{});return Object.keys(d).length>0?d:void 0}a(t,"diff"),r.diff=t;function n(c={},h={}){c=c||{};let d=Object.keys(h).reduce((p,g)=>(h[g]!==c[g]&&c[g]!==void 0&&(p[g]=h[g]),p),{});return Object.keys(c).reduce((p,g)=>(c[g]!==h[g]&&h[g]===void 0&&(p[g]=null),p),d)}a(n,"invert"),r.invert=n;function s(c,h,d=!1){if(typeof c!="object")return h;if(typeof h!="object")return;if(!d)return h;let p=Object.keys(h).reduce((g,b)=>(c[b]===void 0&&(g[b]=h[b]),g),{});return Object.keys(p).length>0?p:void 0}a(s,"transform"),r.transform=s})(Zd||(Zd={}));Xd.default=Zd});var ef=On(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var Jd;(function(r){function e(t){return typeof t.delete=="number"?t.delete:typeof t.retain=="number"?t.retain:typeof t.retain=="object"&&t.retain!==null?1:typeof t.insert=="string"?t.insert.length:1}a(e,"length"),r.length=e})(Jd||(Jd={}));Qd.default=Jd});var k1=On(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});var O1=ef(),tf=class{static{a(this,"Iterator")}constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);let t=this.ops[this.index];if(t){let n=this.offset,s=O1.default.length(t);if(e>=s-n?(e=s-n,this.index+=1,this.offset=0):this.offset+=e,typeof t.delete=="number")return{delete:e};{let c={};return t.attributes&&(c.attributes=t.attributes),typeof t.retain=="number"?c.retain=e:typeof t.retain=="object"&&t.retain!==null?c.retain=t.retain:typeof t.insert=="string"?c.insert=t.insert.substr(n,e):c.insert=t.insert,c}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?O1.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let e=this.offset,t=this.index,n=this.next(),s=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(s)}}else return[]}};rf.default=tf});var Wr=On((ni,Gc)=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.AttributeMap=ni.OpIterator=ni.Op=void 0;var Kc=o0(),dq=Pd(),nf=Yd(),vs=L1();ni.AttributeMap=vs.default;var ri=ef();ni.Op=ri.default;var rn=k1();ni.OpIterator=rn.default;var fq="\0",_1=a((r,e)=>{if(typeof r!="object"||r===null)throw new Error(`cannot retain a ${typeof r}`);if(typeof e!="object"||e===null)throw new Error(`cannot retain a ${typeof e}`);let t=Object.keys(r)[0];if(!t||t!==Object.keys(e)[0])throw new Error(`embed types not matched: ${t} != ${Object.keys(e)[0]}`);return[t,r[t],e[t]]},"getEmbedTypeAndData"),ii=class r{static{a(this,"Delta")}constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}static registerEmbed(e,t){this.handlers[e]=t}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let t=this.handlers[e];if(!t)throw new Error(`no handlers for embed type "${e}"`);return t}insert(e,t){let n={};return typeof e=="string"&&e.length===0?this:(n.insert=e,t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if(typeof e=="number"&&e<=0)return this;let n={retain:e};return t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)}push(e){let t=this.ops.length,n=this.ops[t-1];if(e=dq(e),typeof n=="object"){if(typeof e.delete=="number"&&typeof n.delete=="number")return this.ops[t-1]={delete:n.delete+e.delete},this;if(typeof n.delete=="number"&&e.insert!=null&&(t-=1,n=this.ops[t-1],typeof n!="object"))return this.ops.unshift(e),this;if(nf(e.attributes,n.attributes)){if(typeof e.insert=="string"&&typeof n.insert=="string")return this.ops[t-1]={insert:n.insert+e.insert},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof n.retain=="number")return this.ops[t-1]={retain:n.retain+e.retain},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain=="number"&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let t=[],n=[];return this.forEach(s=>{(e(s)?t:n).push(s)}),[t,n]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce((e,t)=>t.insert?e+ri.default.length(t):t.delete?e-t.delete:e,0)}length(){return this.reduce((e,t)=>e+ri.default.length(t),0)}slice(e=0,t=1/0){let n=[],s=new rn.default(this.ops),c=0;for(;c<t&&s.hasNext();){let h;c<e?h=s.next(e-c):(h=s.next(t-c),n.push(h)),c+=ri.default.length(h)}return new r(n)}compose(e){let t=new rn.default(this.ops),n=new rn.default(e.ops),s=[],c=n.peek();if(c!=null&&typeof c.retain=="number"&&c.attributes==null){let d=c.retain;for(;t.peekType()==="insert"&&t.peekLength()<=d;)d-=t.peekLength(),s.push(t.next());c.retain-d>0&&n.next(c.retain-d)}let h=new r(s);for(;t.hasNext()||n.hasNext();)if(n.peekType()==="insert")h.push(n.next());else if(t.peekType()==="delete")h.push(t.next());else{let d=Math.min(t.peekLength(),n.peekLength()),p=t.next(d),g=n.next(d);if(g.retain){let b={};if(typeof p.retain=="number")b.retain=typeof g.retain=="number"?d:g.retain;else if(typeof g.retain=="number")p.retain==null?b.insert=p.insert:b.retain=p.retain;else{let E=p.retain==null?"insert":"retain",[A,N,P]=_1(p[E],g.retain),T=r.getHandler(A);b[E]={[A]:T.compose(N,P,E==="retain")}}let v=vs.default.compose(p.attributes,g.attributes,typeof p.retain=="number");if(v&&(b.attributes=v),h.push(b),!n.hasNext()&&nf(h.ops[h.ops.length-1],b)){let E=new r(t.rest());return h.concat(E).chop()}}else typeof g.delete=="number"&&(typeof p.retain=="number"||typeof p.retain=="object"&&p.retain!==null)&&h.push(g)}return h.chop()}concat(e){let t=new r(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t}diff(e,t){if(this.ops===e.ops)return new r;let n=[this,e].map(p=>p.map(g=>{if(g.insert!=null)return typeof g.insert=="string"?g.insert:fq;let b=p===e?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")),s=new r,c=Kc(n[0],n[1],t,!0),h=new rn.default(this.ops),d=new rn.default(e.ops);return c.forEach(p=>{let g=p[1].length;for(;g>0;){let b=0;switch(p[0]){case Kc.INSERT:b=Math.min(d.peekLength(),g),s.push(d.next(b));break;case Kc.DELETE:b=Math.min(g,h.peekLength()),h.next(b),s.delete(b);break;case Kc.EQUAL:b=Math.min(h.peekLength(),d.peekLength(),g);let v=h.next(b),E=d.next(b);nf(v.insert,E.insert)?s.retain(b,vs.default.diff(v.attributes,E.attributes)):s.push(E).delete(b);break}g-=b}}),s.chop()}eachLine(e,t=`
`){let n=new rn.default(this.ops),s=new r,c=0;for(;n.hasNext();){if(n.peekType()!=="insert")return;let h=n.peek(),d=ri.default.length(h)-n.peekLength(),p=typeof h.insert=="string"?h.insert.indexOf(t,d)-d:-1;if(p<0)s.push(n.next());else if(p>0)s.push(n.next(p));else{if(e(s,n.next(1).attributes||{},c)===!1)return;c+=1,s=new r}}s.length()>0&&e(s,{},c)}invert(e){let t=new r;return this.reduce((n,s)=>{if(s.insert)t.delete(ri.default.length(s));else{if(typeof s.retain=="number"&&s.attributes==null)return t.retain(s.retain),n+s.retain;if(s.delete||typeof s.retain=="number"){let c=s.delete||s.retain;return e.slice(n,n+c).forEach(d=>{s.delete?t.push(d):s.retain&&s.attributes&&t.retain(ri.default.length(d),vs.default.invert(s.attributes,d.attributes))}),n+c}else if(typeof s.retain=="object"&&s.retain!==null){let c=e.slice(n,n+1),h=new rn.default(c.ops).next(),[d,p,g]=_1(s.retain,h.insert),b=r.getHandler(d);return t.retain({[d]:b.invert(p,g)},vs.default.invert(s.attributes,h.attributes)),n+1}}return n},0),t.chop()}transform(e,t=!1){if(t=!!t,typeof e=="number")return this.transformPosition(e,t);let n=e,s=new rn.default(this.ops),c=new rn.default(n.ops),h=new r;for(;s.hasNext()||c.hasNext();)if(s.peekType()==="insert"&&(t||c.peekType()!=="insert"))h.retain(ri.default.length(s.next()));else if(c.peekType()==="insert")h.push(c.next());else{let d=Math.min(s.peekLength(),c.peekLength()),p=s.next(d),g=c.next(d);if(p.delete)continue;if(g.delete)h.push(g);else{let b=p.retain,v=g.retain,E=typeof v=="object"&&v!==null?v:d;if(typeof b=="object"&&b!==null&&typeof v=="object"&&v!==null){let A=Object.keys(b)[0];if(A===Object.keys(v)[0]){let N=r.getHandler(A);N&&(E={[A]:N.transform(b[A],v[A],t)})}}h.retain(E,vs.default.transform(p.attributes,g.attributes,t))}}return h.chop()}transformPosition(e,t=!1){t=!!t;let n=new rn.default(this.ops),s=0;for(;n.hasNext()&&s<=e;){let c=n.peekLength(),h=n.peekType();if(n.next(),h==="delete"){e-=Math.min(c,e-s);continue}else h==="insert"&&(s<e||!t)&&(e+=c);s+=c}return e}};ii.Op=ri.default;ii.OpIterator=rn.default;ii.AttributeMap=vs.default;ii.handlers={};ni.default=ii;typeof Gc=="object"&&(Gc.exports=ii,Gc.exports.default=ii)});var I1=On((q9,cf)=>{"use strict";var pq=Object.prototype.hasOwnProperty,Sr="~";function Fa(){}a(Fa,"Events");Object.create&&(Fa.prototype=Object.create(null),new Fa().__proto__||(Sr=!1));function mq(r,e,t){this.fn=r,this.context=e,this.once=t||!1}a(mq,"EE");function M1(r,e,t,n,s){if(typeof t!="function")throw new TypeError("The listener must be a function");var c=new mq(t,n||r,s),h=Sr?Sr+e:e;return r._events[h]?r._events[h].fn?r._events[h]=[r._events[h],c]:r._events[h].push(c):(r._events[h]=c,r._eventsCount++),r}a(M1,"addListener");function Yc(r,e){--r._eventsCount===0?r._events=new Fa:delete r._events[e]}a(Yc,"clearEvent");function gr(){this._events=new Fa,this._eventsCount=0}a(gr,"EventEmitter");gr.prototype.eventNames=a(function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)pq.call(t,n)&&e.push(Sr?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},"eventNames");gr.prototype.listeners=a(function(e){var t=Sr?Sr+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,c=n.length,h=new Array(c);s<c;s++)h[s]=n[s].fn;return h},"listeners");gr.prototype.listenerCount=a(function(e){var t=Sr?Sr+e:e,n=this._events[t];return n?n.fn?1:n.length:0},"listenerCount");gr.prototype.emit=a(function(e,t,n,s,c,h){var d=Sr?Sr+e:e;if(!this._events[d])return!1;var p=this._events[d],g=arguments.length,b,v;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,n),!0;case 4:return p.fn.call(p.context,t,n,s),!0;case 5:return p.fn.call(p.context,t,n,s,c),!0;case 6:return p.fn.call(p.context,t,n,s,c,h),!0}for(v=1,b=new Array(g-1);v<g;v++)b[v-1]=arguments[v];p.fn.apply(p.context,b)}else{var E=p.length,A;for(v=0;v<E;v++)switch(p[v].once&&this.removeListener(e,p[v].fn,void 0,!0),g){case 1:p[v].fn.call(p[v].context);break;case 2:p[v].fn.call(p[v].context,t);break;case 3:p[v].fn.call(p[v].context,t,n);break;case 4:p[v].fn.call(p[v].context,t,n,s);break;default:if(!b)for(A=1,b=new Array(g-1);A<g;A++)b[A-1]=arguments[A];p[v].fn.apply(p[v].context,b)}}return!0},"emit");gr.prototype.on=a(function(e,t,n){return M1(this,e,t,n,!1)},"on");gr.prototype.once=a(function(e,t,n){return M1(this,e,t,n,!0)},"once");gr.prototype.removeListener=a(function(e,t,n,s){var c=Sr?Sr+e:e;if(!this._events[c])return this;if(!t)return Yc(this,c),this;var h=this._events[c];if(h.fn)h.fn===t&&(!s||h.once)&&(!n||h.context===n)&&Yc(this,c);else{for(var d=0,p=[],g=h.length;d<g;d++)(h[d].fn!==t||s&&!h[d].once||n&&h[d].context!==n)&&p.push(h[d]);p.length?this._events[c]=p.length===1?p[0]:p:Yc(this,c)}return this},"removeListener");gr.prototype.removeAllListeners=a(function(e){var t;return e?(t=Sr?Sr+e:e,this._events[t]&&Yc(this,t)):(this._events=new Fa,this._eventsCount=0),this},"removeAllListeners");gr.prototype.off=gr.prototype.removeListener;gr.prototype.addListener=gr.prototype.on;gr.prefixed=Sr;gr.EventEmitter=gr;typeof cf<"u"&&(cf.exports=gr)});var Dy=On((vr,Cr)=>{(function(r,e){if(typeof vr=="object"&&typeof Cr=="object")Cr.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t=e();for(var n in t)(typeof vr=="object"?vr:r)[n]=t[n]}})(self,()=>(()=>{var r={64:(n,s,c)=>{(n.exports=c(765)(!1)).push([n.id,`.ql-html-overlayContainer {
  background: #0000007d;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
}

.ql-html-popupContainer {
  background: #ddd;
  position: absolute;
  top: 5%;
  left: 5%;
  right: 5%;
  bottom: 5%;
  border-radius: 10px;
}

.ql-html-textContainer {
  position: relative;
  height: calc(100% - 40px);
  padding: 20px;
}

.ql-html-textArea {
  background: #fff;
  position: absolute;
  left: 15px;
  width: calc(100% - 30px);
  height: calc(100% - 60px) !important;
}

.ql-html-textArea .ql-syntax {
  word-break: break-all;
  white-space: pre-wrap;
}

.ql-html-buttonCancel {
  margin-right: 20px;
}

.ql-html-popupTitle {
  margin: 0;
  display: block;
  font-style: italic;
}

.ql-html-buttonGroup {
  position: absolute;
  bottom: 20px;
  transform: scale(1.5);
  left: calc(50% - 60px);
}
`,""])},765:n=>{n.exports=function(s){var c=[];return c.toString=function(){return this.map(function(h){var d=function(p,g){var b=p[1]||"",v=p[3];if(!v)return b;if(g&&typeof btoa=="function"){var E=(N=v,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(N))))+" */"),A=v.sources.map(function(P){return"/*# sourceURL="+v.sourceRoot+P+" */"});return[b].concat(A).concat([E]).join(`
`)}var N;return[b].join(`
`)}(h,s);return h[2]?"@media "+h[2]+"{"+d+"}":d}).join("")},c.i=function(h,d){typeof h=="string"&&(h=[[null,h,""]]);for(var p={},g=0;g<this.length;g++){var b=this[g][0];typeof b=="number"&&(p[b]=!0)}for(g=0;g<h.length;g++){var v=h[g];typeof v[0]=="number"&&p[v[0]]||(d&&!v[2]?v[2]=d:d&&(v[2]="("+v[2]+") and ("+d+")"),c.push(v))}},c}},228:n=>{"use strict";var s=Object.prototype.hasOwnProperty,c="~";function h(){}a(h,"r");function d(v,E,A){this.fn=v,this.context=E,this.once=A||!1}a(d,"s");function p(v,E,A,N,P){if(typeof A!="function")throw new TypeError("The listener must be a function");var T=new d(A,N||v,P),O=c?c+E:E;return v._events[O]?v._events[O].fn?v._events[O]=[v._events[O],T]:v._events[O].push(T):(v._events[O]=T,v._eventsCount++),v}a(p,"i");function g(v,E){--v._eventsCount==0?v._events=new h:delete v._events[E]}a(g,"o");function b(){this._events=new h,this._eventsCount=0}a(b,"l"),Object.create&&(h.prototype=Object.create(null),new h().__proto__||(c=!1)),b.prototype.eventNames=function(){var v,E,A=[];if(this._eventsCount===0)return A;for(E in v=this._events)s.call(v,E)&&A.push(c?E.slice(1):E);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(v)):A},b.prototype.listeners=function(v){var E=c?c+v:v,A=this._events[E];if(!A)return[];if(A.fn)return[A.fn];for(var N=0,P=A.length,T=new Array(P);N<P;N++)T[N]=A[N].fn;return T},b.prototype.listenerCount=function(v){var E=c?c+v:v,A=this._events[E];return A?A.fn?1:A.length:0},b.prototype.emit=function(v,E,A,N,P,T){var O=c?c+v:v;if(!this._events[O])return!1;var j,F,U=this._events[O],Z=arguments.length;if(U.fn){switch(U.once&&this.removeListener(v,U.fn,void 0,!0),Z){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,E),!0;case 3:return U.fn.call(U.context,E,A),!0;case 4:return U.fn.call(U.context,E,A,N),!0;case 5:return U.fn.call(U.context,E,A,N,P),!0;case 6:return U.fn.call(U.context,E,A,N,P,T),!0}for(F=1,j=new Array(Z-1);F<Z;F++)j[F-1]=arguments[F];U.fn.apply(U.context,j)}else{var se,ee=U.length;for(F=0;F<ee;F++)switch(U[F].once&&this.removeListener(v,U[F].fn,void 0,!0),Z){case 1:U[F].fn.call(U[F].context);break;case 2:U[F].fn.call(U[F].context,E);break;case 3:U[F].fn.call(U[F].context,E,A);break;case 4:U[F].fn.call(U[F].context,E,A,N);break;default:if(!j)for(se=1,j=new Array(Z-1);se<Z;se++)j[se-1]=arguments[se];U[F].fn.apply(U[F].context,j)}}return!0},b.prototype.on=function(v,E,A){return p(this,v,E,A,!1)},b.prototype.once=function(v,E,A){return p(this,v,E,A,!0)},b.prototype.removeListener=function(v,E,A,N){var P=c?c+v:v;if(!this._events[P])return this;if(!E)return g(this,P),this;var T=this._events[P];if(T.fn)T.fn!==E||N&&!T.once||A&&T.context!==A||g(this,P);else{for(var O=0,j=[],F=T.length;O<F;O++)(T[O].fn!==E||N&&!T[O].once||A&&T[O].context!==A)&&j.push(T[O]);j.length?this._events[P]=j.length===1?j[0]:j:g(this,P)}return this},b.prototype.removeAllListeners=function(v){var E;return v?(E=c?c+v:v,this._events[E]&&g(this,E)):(this._events=new h,this._eventsCount=0),this},b.prototype.off=b.prototype.removeListener,b.prototype.addListener=b.prototype.on,b.prefixed=c,b.EventEmitter=b,n.exports=b},606:n=>{var s=-1,c=1,h=0;function d(_,X,de,D,V){if(_===X)return _?[[h,_]]:[];if(de!=null){var re=function(C,$,W){var ne=typeof W=="number"?{index:W,length:0}:W.oldRange,xe=typeof W=="number"?null:W.newRange,ue=C.length,Be=$.length;if(ne.length===0&&(xe===null||xe.length===0)){var Fe=ne.index,ke=C.slice(0,Fe),je=C.slice(Fe),Ve=xe?xe.index:null,Ge=Fe+Be-ue;if((Ve===null||Ve===Ge)&&!(Ge<0||Ge>Be)){var ft=$.slice(0,Ge);if((Xe=$.slice(Ge))===je){var Ye=Math.min(Fe,Ge);if((He=ke.slice(0,Ye))===(Ie=ft.slice(0,Ye)))return se(He,ke.slice(Ye),ft.slice(Ye),je)}}if(Ve===null||Ve===Fe){var qe=Fe,Xe=(ft=$.slice(0,qe),$.slice(qe));if(ft===ke){var Ce=Math.min(ue-qe,Be-qe);if((Re=je.slice(je.length-Ce))===(it=Xe.slice(Xe.length-Ce)))return se(ke,je.slice(0,je.length-Ce),Xe.slice(0,Xe.length-Ce),Re)}}}if(ne.length>0&&xe&&xe.length===0){var He=C.slice(0,ne.index),Re=C.slice(ne.index+ne.length);if(!(Be<(Ye=He.length)+(Ce=Re.length))){var Ie=$.slice(0,Ye),it=$.slice(Be-Ce);if(He===Ie&&Re===it)return se(He,C.slice(Ye,ue-Ce),$.slice(Ye,Be-Ce),Re)}}return null}(_,X,de);if(re)return re}var J=g(_,X),ae=_.substring(0,J);J=v(_=_.substring(J),X=X.substring(J));var q=_.substring(_.length-J),I=function(C,$){var W;if(!C)return[[c,$]];if(!$)return[[s,C]];var ne=C.length>$.length?C:$,xe=C.length>$.length?$:C,ue=ne.indexOf(xe);if(ue!==-1)return W=[[c,ne.substring(0,ue)],[h,xe],[c,ne.substring(ue+xe.length)]],C.length>$.length&&(W[0][0]=W[2][0]=s),W;if(xe.length===1)return[[s,C],[c,$]];var Be=function(qe,Xe){var Ce=qe.length>Xe.length?qe:Xe,He=qe.length>Xe.length?Xe:qe;if(Ce.length<4||2*He.length<Ce.length)return null;function Re(st,St,Rt){for(var Ze,Nt,Ct,kt,Lt=st.substring(Rt,Rt+Math.floor(st.length/4)),Ue=-1,nt="";(Ue=St.indexOf(Lt,Ue+1))!==-1;){var Me=g(st.substring(Rt),St.substring(Ue)),We=v(st.substring(0,Rt),St.substring(0,Ue));nt.length<We+Me&&(nt=St.substring(Ue-We,Ue)+St.substring(Ue,Ue+Me),Ze=st.substring(0,Rt-We),Nt=st.substring(Rt+Me),Ct=St.substring(0,Ue-We),kt=St.substring(Ue+Me))}return 2*nt.length>=st.length?[Ze,Nt,Ct,kt,nt]:null}a(Re,"s");var Ie,it,$e,ct,ut,wt=Re(Ce,He,Math.ceil(Ce.length/4)),jt=Re(Ce,He,Math.ceil(Ce.length/2));if(!wt&&!jt)return null;Ie=jt?wt&&wt[4].length>jt[4].length?wt:jt:wt,qe.length>Xe.length?(it=Ie[0],$e=Ie[1],ct=Ie[2],ut=Ie[3]):(ct=Ie[0],ut=Ie[1],it=Ie[2],$e=Ie[3]);var xt=Ie[4];return[it,$e,ct,ut,xt]}(C,$);if(Be){var Fe=Be[0],ke=Be[1],je=Be[2],Ve=Be[3],Ge=Be[4],ft=d(Fe,je),Ye=d(ke,Ve);return ft.concat([[h,Ge]],Ye)}return function(qe,Xe){for(var Ce=qe.length,He=Xe.length,Re=Math.ceil((Ce+He)/2),Ie=Re,it=2*Re,$e=new Array(it),ct=new Array(it),ut=0;ut<it;ut++)$e[ut]=-1,ct[ut]=-1;$e[Ie+1]=0,ct[Ie+1]=0;for(var wt=Ce-He,jt=wt%2!=0,xt=0,st=0,St=0,Rt=0,Ze=0;Ze<Re;Ze++){for(var Nt=-Ze+xt;Nt<=Ze-st;Nt+=2){for(var Ct=Ie+Nt,kt=(We=Nt===-Ze||Nt!==Ze&&$e[Ct-1]<$e[Ct+1]?$e[Ct+1]:$e[Ct-1]+1)-Nt;We<Ce&&kt<He&&qe.charAt(We)===Xe.charAt(kt);)We++,kt++;if($e[Ct]=We,We>Ce)st+=2;else if(kt>He)xt+=2;else if(jt&&(nt=Ie+wt-Nt)>=0&&nt<it&&ct[nt]!==-1&&We>=(Ue=Ce-ct[nt]))return p(qe,Xe,We,kt)}for(var Lt=-Ze+St;Lt<=Ze-Rt;Lt+=2){for(var Ue,nt=Ie+Lt,Me=(Ue=Lt===-Ze||Lt!==Ze&&ct[nt-1]<ct[nt+1]?ct[nt+1]:ct[nt-1]+1)-Lt;Ue<Ce&&Me<He&&qe.charAt(Ce-Ue-1)===Xe.charAt(He-Me-1);)Ue++,Me++;if(ct[nt]=Ue,Ue>Ce)Rt+=2;else if(Me>He)St+=2;else if(!jt&&(Ct=Ie+wt-Lt)>=0&&Ct<it&&$e[Ct]!==-1){var We;if(kt=Ie+(We=$e[Ct])-Ct,We>=(Ue=Ce-Ue))return p(qe,Xe,We,kt)}}}return[[s,qe],[c,Xe]]}(C,$)}(_=_.substring(0,_.length-J),X=X.substring(0,X.length-J));return ae&&I.unshift([h,ae]),q&&I.push([h,q]),O(I,V),D&&function(C){for(var $=!1,W=[],ne=0,xe=null,ue=0,Be=0,Fe=0,ke=0,je=0;ue<C.length;)C[ue][0]==h?(W[ne++]=ue,Be=ke,Fe=je,ke=0,je=0,xe=C[ue][1]):(C[ue][0]==c?ke+=C[ue][1].length:je+=C[ue][1].length,xe&&xe.length<=Math.max(Be,Fe)&&xe.length<=Math.max(ke,je)&&(C.splice(W[ne-1],0,[s,xe]),C[W[ne-1]+1][0]=c,ne--,ue=--ne>0?W[ne-1]:-1,Be=0,Fe=0,ke=0,je=0,xe=null,$=!0)),ue++;for($&&O(C),function(qe){function Xe(st,St){if(!st||!St)return 6;var Rt=st.charAt(st.length-1),Ze=St.charAt(0),Nt=Rt.match(E),Ct=Ze.match(E),kt=Nt&&Rt.match(A),Lt=Ct&&Ze.match(A),Ue=kt&&Rt.match(N),nt=Lt&&Ze.match(N),Me=Ue&&st.match(P),We=nt&&St.match(T);return Me||We?5:Ue||nt?4:Nt&&!kt&&Lt?3:kt||Lt?2:Nt||Ct?1:0}a(Xe,"e");for(var Ce=1;Ce<qe.length-1;){if(qe[Ce-1][0]==h&&qe[Ce+1][0]==h){var He=qe[Ce-1][1],Re=qe[Ce][1],Ie=qe[Ce+1][1],it=v(He,Re);if(it){var $e=Re.substring(Re.length-it);He=He.substring(0,He.length-it),Re=$e+Re.substring(0,Re.length-it),Ie=$e+Ie}for(var ct=He,ut=Re,wt=Ie,jt=Xe(He,Re)+Xe(Re,Ie);Re.charAt(0)===Ie.charAt(0);){He+=Re.charAt(0),Re=Re.substring(1)+Ie.charAt(0),Ie=Ie.substring(1);var xt=Xe(He,Re)+Xe(Re,Ie);xt>=jt&&(jt=xt,ct=He,ut=Re,wt=Ie)}qe[Ce-1][1]!=ct&&(ct?qe[Ce-1][1]=ct:(qe.splice(Ce-1,1),Ce--),qe[Ce][1]=ut,wt?qe[Ce+1][1]=wt:(qe.splice(Ce+1,1),Ce--))}Ce++}}(C),ue=1;ue<C.length;){if(C[ue-1][0]==s&&C[ue][0]==c){var Ve=C[ue-1][1],Ge=C[ue][1],ft=b(Ve,Ge),Ye=b(Ge,Ve);ft>=Ye?(ft>=Ve.length/2||ft>=Ge.length/2)&&(C.splice(ue,0,[h,Ge.substring(0,ft)]),C[ue-1][1]=Ve.substring(0,Ve.length-ft),C[ue+1][1]=Ge.substring(ft),ue++):(Ye>=Ve.length/2||Ye>=Ge.length/2)&&(C.splice(ue,0,[h,Ve.substring(0,Ye)]),C[ue-1][0]=c,C[ue-1][1]=Ge.substring(0,Ge.length-Ye),C[ue+1][0]=s,C[ue+1][1]=Ve.substring(Ye),ue++),ue++}ue++}}(I),I}a(d,"s");function p(_,X,de,D){var V=_.substring(0,de),re=X.substring(0,D),J=_.substring(de),ae=X.substring(D),q=d(V,re),I=d(J,ae);return q.concat(I)}a(p,"i");function g(_,X){if(!_||!X||_.charAt(0)!==X.charAt(0))return 0;for(var de=0,D=Math.min(_.length,X.length),V=D,re=0;de<V;)_.substring(re,V)==X.substring(re,V)?re=de=V:D=V,V=Math.floor((D-de)/2+de);return j(_.charCodeAt(V-1))&&V--,V}a(g,"o");function b(_,X){var de=_.length,D=X.length;if(de==0||D==0)return 0;de>D?_=_.substring(de-D):de<D&&(X=X.substring(0,de));var V=Math.min(de,D);if(_==X)return V;for(var re=0,J=1;;){var ae=_.substring(V-J),q=X.indexOf(ae);if(q==-1)return re;J+=q,q!=0&&_.substring(V-J)!=X.substring(0,J)||(re=J,J++)}}a(b,"l");function v(_,X){if(!_||!X||_.slice(-1)!==X.slice(-1))return 0;for(var de=0,D=Math.min(_.length,X.length),V=D,re=0;de<V;)_.substring(_.length-V,_.length-re)==X.substring(X.length-V,X.length-re)?re=de=V:D=V,V=Math.floor((D-de)/2+de);return F(_.charCodeAt(_.length-V))&&V--,V}a(v,"a");var E=/[^a-zA-Z0-9]/,A=/\s/,N=/[\r\n]/,P=/\n\r?\n$/,T=/^\r?\n\r?\n/;function O(_,X){_.push([h,""]);for(var de,D=0,V=0,re=0,J="",ae="";D<_.length;)if(D<_.length-1&&!_[D][1])_.splice(D,1);else switch(_[D][0]){case c:re++,ae+=_[D][1],D++;break;case s:V++,J+=_[D][1],D++;break;case h:var q=D-re-V-1;if(X){if(q>=0&&Z(_[q][1])){var I=_[q][1].slice(-1);if(_[q][1]=_[q][1].slice(0,-1),J=I+J,ae=I+ae,!_[q][1]){_.splice(q,1),D--;var C=q-1;_[C]&&_[C][0]===c&&(re++,ae=_[C][1]+ae,C--),_[C]&&_[C][0]===s&&(V++,J=_[C][1]+J,C--),q=C}}U(_[D][1])&&(I=_[D][1].charAt(0),_[D][1]=_[D][1].slice(1),J+=I,ae+=I)}if(D<_.length-1&&!_[D][1]){_.splice(D,1);break}if(J.length>0||ae.length>0){J.length>0&&ae.length>0&&((de=g(ae,J))!==0&&(q>=0?_[q][1]+=ae.substring(0,de):(_.splice(0,0,[h,ae.substring(0,de)]),D++),ae=ae.substring(de),J=J.substring(de)),(de=v(ae,J))!==0&&(_[D][1]=ae.substring(ae.length-de)+_[D][1],ae=ae.substring(0,ae.length-de),J=J.substring(0,J.length-de)));var $=re+V;J.length===0&&ae.length===0?(_.splice(D-$,$),D-=$):J.length===0?(_.splice(D-$,$,[c,ae]),D=D-$+1):ae.length===0?(_.splice(D-$,$,[s,J]),D=D-$+1):(_.splice(D-$,$,[s,J],[c,ae]),D=D-$+2)}D!==0&&_[D-1][0]===h?(_[D-1][1]+=_[D][1],_.splice(D,1)):D++,re=0,V=0,J="",ae=""}_[_.length-1][1]===""&&_.pop();var W=!1;for(D=1;D<_.length-1;)_[D-1][0]===h&&_[D+1][0]===h&&(_[D][1].substring(_[D][1].length-_[D-1][1].length)===_[D-1][1]?(_[D][1]=_[D-1][1]+_[D][1].substring(0,_[D][1].length-_[D-1][1].length),_[D+1][1]=_[D-1][1]+_[D+1][1],_.splice(D-1,1),W=!0):_[D][1].substring(0,_[D+1][1].length)==_[D+1][1]&&(_[D-1][1]+=_[D+1][1],_[D][1]=_[D][1].substring(_[D+1][1].length)+_[D+1][1],_.splice(D+1,1),W=!0)),D++;W&&O(_,X)}a(O,"p");function j(_){return _>=55296&&_<=56319}a(j,"g");function F(_){return _>=56320&&_<=57343}a(F,"m");function U(_){return F(_.charCodeAt(0))}a(U,"b");function Z(_){return j(_.charCodeAt(_.length-1))}a(Z,"y");function se(_,X,de,D){return Z(_)||U(D)?null:function(V){for(var re=[],J=0;J<V.length;J++)V[J][1].length>0&&re.push(V[J]);return re}([[h,_],[s,X],[c,de],[h,D]])}a(se,"v");function ee(_,X,de,D){return d(_,X,de,D,!0)}a(ee,"x"),ee.INSERT=c,ee.DELETE=s,ee.EQUAL=h,n.exports=ee},193:(n,s,c)=>{n=c.nmd(n);var h="__lodash_hash_undefined__",d=9007199254740991,p="[object Arguments]",g="[object Boolean]",b="[object Date]",v="[object Function]",E="[object GeneratorFunction]",A="[object Map]",N="[object Number]",P="[object Object]",T="[object Promise]",O="[object RegExp]",j="[object Set]",F="[object String]",U="[object Symbol]",Z="[object WeakMap]",se="[object ArrayBuffer]",ee="[object DataView]",_="[object Float32Array]",X="[object Float64Array]",de="[object Int8Array]",D="[object Int16Array]",V="[object Int32Array]",re="[object Uint8Array]",J="[object Uint8ClampedArray]",ae="[object Uint16Array]",q="[object Uint32Array]",I=/\w*$/,C=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,W={};W[p]=W["[object Array]"]=W[se]=W[ee]=W[g]=W[b]=W[_]=W[X]=W[de]=W[D]=W[V]=W[A]=W[N]=W[P]=W[O]=W[j]=W[F]=W[U]=W[re]=W[J]=W[ae]=W[q]=!0,W["[object Error]"]=W[v]=W[Z]=!1;var ne=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,xe=typeof self=="object"&&self&&self.Object===Object&&self,ue=ne||xe||Function("return this")(),Be=s&&!s.nodeType&&s,Fe=Be&&n&&!n.nodeType&&n,ke=Fe&&Fe.exports===Be;function je(R,G){return R.set(G[0],G[1]),R}a(je,"P");function Ve(R,G){return R.add(G),R}a(Ve,"z");function Ge(R,G,he,L){var B=-1,ie=R?R.length:0;for(L&&ie&&(he=R[++B]);++B<ie;)he=G(he,R[B],B,R);return he}a(Ge,"H");function ft(R){var G=!1;if(R!=null&&typeof R.toString!="function")try{G=!!(R+"")}catch{}return G}a(ft,"F");function Ye(R){var G=-1,he=Array(R.size);return R.forEach(function(L,B){he[++G]=[B,L]}),he}a(Ye,"$");function qe(R,G){return function(he){return R(G(he))}}a(qe,"V");function Xe(R){var G=-1,he=Array(R.size);return R.forEach(function(L){he[++G]=L}),he}a(Xe,"K");var Ce,He=Array.prototype,Re=Function.prototype,Ie=Object.prototype,it=ue["__core-js_shared__"],$e=(Ce=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||""))?"Symbol(src)_1."+Ce:"",ct=Re.toString,ut=Ie.hasOwnProperty,wt=Ie.toString,jt=RegExp("^"+ct.call(ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xt=ke?ue.Buffer:void 0,st=ue.Symbol,St=ue.Uint8Array,Rt=qe(Object.getPrototypeOf,Object),Ze=Object.create,Nt=Ie.propertyIsEnumerable,Ct=He.splice,kt=Object.getOwnPropertySymbols,Lt=xt?xt.isBuffer:void 0,Ue=qe(Object.keys,Object),nt=Bt(ue,"DataView"),Me=Bt(ue,"Map"),We=Bt(ue,"Promise"),Yt=Bt(ue,"Set"),Gr=Bt(ue,"WeakMap"),sr=Bt(Object,"create"),an=Et(nt),yr=Et(Me),ui=Et(We),jn=Et(Yt),x=Et(Gr),S=st?st.prototype:void 0,M=S?S.valueOf:void 0;function H(R){var G=-1,he=R?R.length:0;for(this.clear();++G<he;){var L=R[G];this.set(L[0],L[1])}}a(H,"kt");function te(R){var G=-1,he=R?R.length:0;for(this.clear();++G<he;){var L=R[G];this.set(L[0],L[1])}}a(te,"_t");function oe(R){var G=-1,he=R?R.length:0;for(this.clear();++G<he;){var L=R[G];this.set(L[0],L[1])}}a(oe,"Lt");function Le(R){this.__data__=new te(R)}a(Le,"Ot");function we(R,G){var he=Yr(R)||function(le){return function(ve){return function(_e){return!!_e&&typeof _e=="object"}(ve)&&ln(ve)}(le)&&ut.call(le,"callee")&&(!Nt.call(le,"callee")||wt.call(le)==p)}(R)?function(le,ve){for(var _e=-1,Ke=Array(le);++_e<le;)Ke[_e]=ve(_e);return Ke}(R.length,String):[],L=he.length,B=!!L;for(var ie in R)!G&&!ut.call(R,ie)||B&&(ie=="length"||Or(ie,L))||he.push(ie);return he}a(we,"Tt");function Oe(R,G,he){var L=R[G];ut.call(R,G)&&Sn(L,he)&&(he!==void 0||G in R)||(R[G]=he)}a(Oe,"St");function fe(R,G){for(var he=R.length;he--;)if(Sn(R[he][0],G))return he;return-1}a(fe,"Ct");function Ne(R,G,he,L,B,ie,le){var ve;if(L&&(ve=ie?L(R,B,ie,le):L(R)),ve!==void 0)return ve;if(!Cn(R))return R;var _e=Yr(R);if(_e){if(ve=function(pe){var Pe=pe.length,Qe=pe.constructor(Pe);return Pe&&typeof pe[0]=="string"&&ut.call(pe,"index")&&(Qe.index=pe.index,Qe.input=pe.input),Qe}(R),!G)return function(pe,Pe){var Qe=-1,tt=pe.length;for(Pe||(Pe=Array(tt));++Qe<tt;)Pe[Qe]=pe[Qe];return Pe}(R,ve)}else{var Ke=wr(R),pt=Ke==v||Ke==E;if(Bn(R))return function(pe,Pe){if(Pe)return pe.slice();var Qe=new pe.constructor(pe.length);return pe.copy(Qe),Qe}(R,G);if(Ke==P||Ke==p||pt&&!ie){if(ft(R))return ie?R:{};if(ve=function(pe){return typeof pe.constructor!="function"||An(pe)?{}:(Pe=Rt(pe),Cn(Pe)?Ze(Pe):{});var Pe}(pt?{}:R),!G)return function(pe,Pe){return Pt(pe,Lr(pe),Pe)}(R,function(pe,Pe){return pe&&Pt(Pe,Fn(Pe),pe)}(ve,R))}else{if(!W[Ke])return ie?R:{};ve=function(pe,Pe,Qe,tt){var er=pe.constructor;switch(Pe){case se:return Ht(pe);case g:case b:return new er(+pe);case ee:return function(ze,qt){var tr=qt?Ht(ze.buffer):ze.buffer;return new ze.constructor(tr,ze.byteOffset,ze.byteLength)}(pe,tt);case _:case X:case de:case D:case V:case re:case J:case ae:case q:return function(ze,qt){var tr=qt?Ht(ze.buffer):ze.buffer;return new ze.constructor(tr,ze.byteOffset,ze.length)}(pe,tt);case A:return function(ze,qt,tr){var cn=qt?tr(Ye(ze),!0):Ye(ze);return Ge(cn,je,new ze.constructor)}(pe,tt,Qe);case N:case F:return new er(pe);case O:return function(ze){var qt=new ze.constructor(ze.source,I.exec(ze));return qt.lastIndex=ze.lastIndex,qt}(pe);case j:return function(ze,qt,tr){var cn=qt?tr(Xe(ze),!0):Xe(ze);return Ge(cn,Ve,new ze.constructor)}(pe,tt,Qe);case U:return or=pe,M?Object(M.call(or)):{}}var or}(R,Ke,Ne,G)}}le||(le=new Le);var Ut=le.get(R);if(Ut)return Ut;if(le.set(R,ve),!_e)var mt=he?function(pe){return function(Pe,Qe,tt){var er=Qe(Pe);return Yr(Pe)?er:function(or,ze){for(var qt=-1,tr=ze.length,cn=or.length;++qt<tr;)or[cn+qt]=ze[qt];return or}(er,tt(Pe))}(pe,Fn,Lr)}(R):Fn(R);return function(pe,Pe){for(var Qe=-1,tt=pe?pe.length:0;++Qe<tt&&Pe(pe[Qe],Qe,pe)!==!1;);}(mt||R,function(pe,Pe){mt&&(pe=R[Pe=pe]),Oe(ve,Pe,Ne(pe,G,he,L,Pe,R,le))}),ve}a(Ne,"jt");function Je(R){return!(!Cn(R)||(G=R,$e&&$e in G))&&(Nn(R)||ft(R)?jt:C).test(Et(R));var G}a(Je,"Rt");function Ht(R){var G=new R.constructor(R.byteLength);return new St(G).set(new St(R)),G}a(Ht,"It");function Pt(R,G,he,L){he||(he={});for(var B=-1,ie=G.length;++B<ie;){var le=G[B],ve=L?L(he[le],R[le],le,he,R):void 0;Oe(he,le,ve===void 0?R[le]:ve)}return he}a(Pt,"Mt");function _t(R,G){var he,L,B=R.__data__;return((L=typeof(he=G))=="string"||L=="number"||L=="symbol"||L=="boolean"?he!=="__proto__":he===null)?B[typeof G=="string"?"string":"hash"]:B.map}a(_t,"Bt");function Bt(R,G){var he=function(L,B){return L?.[B]}(R,G);return Je(he)?he:void 0}a(Bt,"Ut"),H.prototype.clear=function(){this.__data__=sr?sr(null):{}},H.prototype.delete=function(R){return this.has(R)&&delete this.__data__[R]},H.prototype.get=function(R){var G=this.__data__;if(sr){var he=G[R];return he===h?void 0:he}return ut.call(G,R)?G[R]:void 0},H.prototype.has=function(R){var G=this.__data__;return sr?G[R]!==void 0:ut.call(G,R)},H.prototype.set=function(R,G){return this.__data__[R]=sr&&G===void 0?h:G,this},te.prototype.clear=function(){this.__data__=[]},te.prototype.delete=function(R){var G=this.__data__,he=fe(G,R);return!(he<0)&&(he==G.length-1?G.pop():Ct.call(G,he,1),!0)},te.prototype.get=function(R){var G=this.__data__,he=fe(G,R);return he<0?void 0:G[he][1]},te.prototype.has=function(R){return fe(this.__data__,R)>-1},te.prototype.set=function(R,G){var he=this.__data__,L=fe(he,R);return L<0?he.push([R,G]):he[L][1]=G,this},oe.prototype.clear=function(){this.__data__={hash:new H,map:new(Me||te),string:new H}},oe.prototype.delete=function(R){return _t(this,R).delete(R)},oe.prototype.get=function(R){return _t(this,R).get(R)},oe.prototype.has=function(R){return _t(this,R).has(R)},oe.prototype.set=function(R,G){return _t(this,R).set(R,G),this},Le.prototype.clear=function(){this.__data__=new te},Le.prototype.delete=function(R){return this.__data__.delete(R)},Le.prototype.get=function(R){return this.__data__.get(R)},Le.prototype.has=function(R){return this.__data__.has(R)},Le.prototype.set=function(R,G){var he=this.__data__;if(he instanceof te){var L=he.__data__;if(!Me||L.length<199)return L.push([R,G]),this;he=this.__data__=new oe(L)}return he.set(R,G),this};var Lr=kt?qe(kt,Object):function(){return[]},wr=a(function(R){return wt.call(R)},"Pt");function Or(R,G){return!!(G=G??d)&&(typeof R=="number"||$.test(R))&&R>-1&&R%1==0&&R<G}a(Or,"zt");function An(R){var G=R&&R.constructor;return R===(typeof G=="function"&&G.prototype||Ie)}a(An,"Ht");function Et(R){if(R!=null){try{return ct.call(R)}catch{}try{return R+""}catch{}}return""}a(Et,"Ft");function Sn(R,G){return R===G||R!=R&&G!=G}a(Sn,"$t"),(nt&&wr(new nt(new ArrayBuffer(1)))!=ee||Me&&wr(new Me)!=A||We&&wr(We.resolve())!=T||Yt&&wr(new Yt)!=j||Gr&&wr(new Gr)!=Z)&&(wr=a(function(R){var G=wt.call(R),he=G==P?R.constructor:void 0,L=he?Et(he):void 0;if(L)switch(L){case an:return ee;case yr:return A;case ui:return T;case jn:return j;case x:return Z}return G},"Pt"));var Yr=Array.isArray;function ln(R){return R!=null&&function(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=d}(R.length)&&!Nn(R)}a(ln,"Kt");var Bn=Lt||function(){return!1};function Nn(R){var G=Cn(R)?wt.call(R):"";return G==v||G==E}a(Nn,"Zt");function Cn(R){var G=typeof R;return!!R&&(G=="object"||G=="function")}a(Cn,"Gt");function Fn(R){return ln(R)?we(R):function(G){if(!An(G))return Ue(G);var he=[];for(var L in Object(G))ut.call(G,L)&&L!="constructor"&&he.push(L);return he}(R)}a(Fn,"Xt"),n.exports=function(R){return Ne(R,!0,!0)}},142:(n,s,c)=>{n=c.nmd(n);var h="__lodash_hash_undefined__",d=1,p=2,g=9007199254740991,b="[object Arguments]",v="[object Array]",E="[object AsyncFunction]",A="[object Boolean]",N="[object Date]",P="[object Error]",T="[object Function]",O="[object GeneratorFunction]",j="[object Map]",F="[object Number]",U="[object Null]",Z="[object Object]",se="[object Promise]",ee="[object Proxy]",_="[object RegExp]",X="[object Set]",de="[object String]",D="[object Symbol]",V="[object Undefined]",re="[object WeakMap]",J="[object ArrayBuffer]",ae="[object DataView]",q=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[b]=C[v]=C[J]=C[A]=C[ae]=C[N]=C[P]=C[T]=C[j]=C[F]=C[Z]=C[_]=C[X]=C[de]=C[re]=!1;var $=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,W=typeof self=="object"&&self&&self.Object===Object&&self,ne=$||W||Function("return this")(),xe=s&&!s.nodeType&&s,ue=xe&&n&&!n.nodeType&&n,Be=ue&&ue.exports===xe,Fe=Be&&$.process,ke=function(){try{return Fe&&Fe.binding&&Fe.binding("util")}catch{}}(),je=ke&&ke.isTypedArray;function Ve(L,B){for(var ie=-1,le=L==null?0:L.length;++ie<le;)if(B(L[ie],ie,L))return!0;return!1}a(Ve,"z");function Ge(L){var B=-1,ie=Array(L.size);return L.forEach(function(le,ve){ie[++B]=[ve,le]}),ie}a(Ge,"H");function ft(L){var B=-1,ie=Array(L.size);return L.forEach(function(le){ie[++B]=le}),ie}a(ft,"F");var Ye,qe,Xe,Ce=Array.prototype,He=Function.prototype,Re=Object.prototype,Ie=ne["__core-js_shared__"],it=He.toString,$e=Re.hasOwnProperty,ct=(Ye=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+Ye:"",ut=Re.toString,wt=RegExp("^"+it.call($e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=Be?ne.Buffer:void 0,xt=ne.Symbol,st=ne.Uint8Array,St=Re.propertyIsEnumerable,Rt=Ce.splice,Ze=xt?xt.toStringTag:void 0,Nt=Object.getOwnPropertySymbols,Ct=jt?jt.isBuffer:void 0,kt=(qe=Object.keys,Xe=Object,function(L){return qe(Xe(L))}),Lt=Lr(ne,"DataView"),Ue=Lr(ne,"Map"),nt=Lr(ne,"Promise"),Me=Lr(ne,"Set"),We=Lr(ne,"WeakMap"),Yt=Lr(Object,"create"),Gr=Et(Lt),sr=Et(Ue),an=Et(nt),yr=Et(Me),ui=Et(We),jn=xt?xt.prototype:void 0,x=jn?jn.valueOf:void 0;function S(L){var B=-1,ie=L==null?0:L.length;for(this.clear();++B<ie;){var le=L[B];this.set(le[0],le[1])}}a(S,"At");function M(L){var B=-1,ie=L==null?0:L.length;for(this.clear();++B<ie;){var le=L[B];this.set(le[0],le[1])}}a(M,"qt");function H(L){var B=-1,ie=L==null?0:L.length;for(this.clear();++B<ie;){var le=L[B];this.set(le[0],le[1])}}a(H,"kt");function te(L){var B=-1,ie=L==null?0:L.length;for(this.__data__=new H;++B<ie;)this.add(L[B])}a(te,"_t");function oe(L){var B=this.__data__=new M(L);this.size=B.size}a(oe,"Lt");function Le(L,B){var ie=ln(L),le=!ie&&Yr(L),ve=!ie&&!le&&Bn(L),_e=!ie&&!le&&!ve&&G(L),Ke=ie||le||ve||_e,pt=Ke?function(pe,Pe){for(var Qe=-1,tt=Array(pe);++Qe<pe;)tt[Qe]=Pe(Qe);return tt}(L.length,String):[],Ut=pt.length;for(var mt in L)!B&&!$e.call(L,mt)||Ke&&(mt=="length"||ve&&(mt=="offset"||mt=="parent")||_e&&(mt=="buffer"||mt=="byteLength"||mt=="byteOffset")||An(mt,Ut))||pt.push(mt);return pt}a(Le,"Ot");function we(L,B){for(var ie=L.length;ie--;)if(Sn(L[ie][0],B))return ie;return-1}a(we,"Tt");function Oe(L){return L==null?L===void 0?V:U:Ze&&Ze in Object(L)?function(B){var ie=$e.call(B,Ze),le=B[Ze];try{B[Ze]=void 0;var ve=!0}catch{}var _e=ut.call(B);return ve&&(ie?B[Ze]=le:delete B[Ze]),_e}(L):function(B){return ut.call(B)}(L)}a(Oe,"St");function fe(L){return R(L)&&Oe(L)==b}a(fe,"Ct");function Ne(L,B,ie,le,ve){return L===B||(L==null||B==null||!R(L)&&!R(B)?L!=L&&B!=B:function(_e,Ke,pt,Ut,mt,pe){var Pe=ln(_e),Qe=ln(Ke),tt=Pe?v:Or(_e),er=Qe?v:Or(Ke),or=(tt=tt==b?Z:tt)==Z,ze=(er=er==b?Z:er)==Z,qt=tt==er;if(qt&&Bn(_e)){if(!Bn(Ke))return!1;Pe=!0,or=!1}if(qt&&!or)return pe||(pe=new oe),Pe||G(_e)?Pt(_e,Ke,pt,Ut,mt,pe):function(ot,rt,Cs,kr,Ro,_r,un){switch(Cs){case ae:if(ot.byteLength!=rt.byteLength||ot.byteOffset!=rt.byteOffset)return!1;ot=ot.buffer,rt=rt.buffer;case J:return!(ot.byteLength!=rt.byteLength||!_r(new st(ot),new st(rt)));case A:case N:case F:return Sn(+ot,+rt);case P:return ot.name==rt.name&&ot.message==rt.message;case _:case de:return ot==rt+"";case j:var hn=Ge;case X:var Ki=kr&d;if(hn||(hn=ft),ot.size!=rt.size&&!Ki)return!1;var Gi=un.get(ot);if(Gi)return Gi==rt;kr|=p,un.set(ot,rt);var Po=Pt(hn(ot),hn(rt),kr,Ro,_r,un);return un.delete(ot),Po;case D:if(x)return x.call(ot)==x.call(rt)}return!1}(_e,Ke,tt,pt,Ut,mt,pe);if(!(pt&d)){var tr=or&&$e.call(_e,"__wrapped__"),cn=ze&&$e.call(Ke,"__wrapped__");if(tr||cn){var wu=tr?_e.value():_e,ol=cn?Ke.value():Ke;return pe||(pe=new oe),mt(wu,ol,pt,Ut,pe)}}return qt?(pe||(pe=new oe),function(ot,rt,Cs,kr,Ro,_r){var un=Cs&d,hn=_t(ot),Ki=hn.length,Gi=_t(rt),Po=Gi.length;if(Ki!=Po&&!un)return!1;for(var Ls=Ki;Ls--;){var Hn=hn[Ls];if(!(un?Hn in rt:$e.call(rt,Hn)))return!1}var al=_r.get(ot);if(al&&_r.get(rt))return al==rt;var Os=!0;_r.set(ot,rt),_r.set(rt,ot);for(var jo=un;++Ls<Ki;){var ks=ot[Hn=hn[Ls]],Ur=rt[Hn];if(kr)var Ee=un?kr(Ur,ks,Hn,rt,ot,_r):kr(ks,Ur,Hn,ot,rt,_r);if(!(Ee===void 0?ks===Ur||Ro(ks,Ur,Cs,kr,_r):Ee)){Os=!1;break}jo||(jo=Hn=="constructor")}if(Os&&!jo){var xr=ot.constructor,dn=rt.constructor;xr==dn||!("constructor"in ot)||!("constructor"in rt)||typeof xr=="function"&&xr instanceof xr&&typeof dn=="function"&&dn instanceof dn||(Os=!1)}return _r.delete(ot),_r.delete(rt),Os}(_e,Ke,pt,Ut,mt,pe)):!1}(L,B,ie,le,Ne,ve))}a(Ne,"jt");function Je(L){return!(!Fn(L)||function(B){return!!ct&&ct in B}(L))&&(Nn(L)?wt:q).test(Et(L))}a(Je,"Rt");function Ht(L){if(ie=(B=L)&&B.constructor,le=typeof ie=="function"&&ie.prototype||Re,B!==le)return kt(L);var B,ie,le,ve=[];for(var _e in Object(L))$e.call(L,_e)&&_e!="constructor"&&ve.push(_e);return ve}a(Ht,"It");function Pt(L,B,ie,le,ve,_e){var Ke=ie&d,pt=L.length,Ut=B.length;if(pt!=Ut&&!(Ke&&Ut>pt))return!1;var mt=_e.get(L);if(mt&&_e.get(B))return mt==B;var pe=-1,Pe=!0,Qe=ie&p?new te:void 0;for(_e.set(L,B),_e.set(B,L);++pe<pt;){var tt=L[pe],er=B[pe];if(le)var or=Ke?le(er,tt,pe,B,L,_e):le(tt,er,pe,L,B,_e);if(or!==void 0){if(or)continue;Pe=!1;break}if(Qe){if(!Ve(B,function(ze,qt){if(tr=qt,!Qe.has(tr)&&(tt===ze||ve(tt,ze,ie,le,_e)))return Qe.push(qt);var tr})){Pe=!1;break}}else if(tt!==er&&!ve(tt,er,ie,le,_e)){Pe=!1;break}}return _e.delete(L),_e.delete(B),Pe}a(Pt,"Mt");function _t(L){return function(B,ie,le){var ve=ie(B);return ln(B)?ve:function(_e,Ke){for(var pt=-1,Ut=Ke.length,mt=_e.length;++pt<Ut;)_e[mt+pt]=Ke[pt];return _e}(ve,le(B))}(L,he,wr)}a(_t,"Bt");function Bt(L,B){var ie,le,ve=L.__data__;return((le=typeof(ie=B))=="string"||le=="number"||le=="symbol"||le=="boolean"?ie!=="__proto__":ie===null)?ve[typeof B=="string"?"string":"hash"]:ve.map}a(Bt,"Ut");function Lr(L,B){var ie=function(le,ve){return le?.[ve]}(L,B);return Je(ie)?ie:void 0}a(Lr,"Dt"),S.prototype.clear=function(){this.__data__=Yt?Yt(null):{},this.size=0},S.prototype.delete=function(L){var B=this.has(L)&&delete this.__data__[L];return this.size-=B?1:0,B},S.prototype.get=function(L){var B=this.__data__;if(Yt){var ie=B[L];return ie===h?void 0:ie}return $e.call(B,L)?B[L]:void 0},S.prototype.has=function(L){var B=this.__data__;return Yt?B[L]!==void 0:$e.call(B,L)},S.prototype.set=function(L,B){var ie=this.__data__;return this.size+=this.has(L)?0:1,ie[L]=Yt&&B===void 0?h:B,this},M.prototype.clear=function(){this.__data__=[],this.size=0},M.prototype.delete=function(L){var B=this.__data__,ie=we(B,L);return!(ie<0)&&(ie==B.length-1?B.pop():Rt.call(B,ie,1),--this.size,!0)},M.prototype.get=function(L){var B=this.__data__,ie=we(B,L);return ie<0?void 0:B[ie][1]},M.prototype.has=function(L){return we(this.__data__,L)>-1},M.prototype.set=function(L,B){var ie=this.__data__,le=we(ie,L);return le<0?(++this.size,ie.push([L,B])):ie[le][1]=B,this},H.prototype.clear=function(){this.size=0,this.__data__={hash:new S,map:new(Ue||M),string:new S}},H.prototype.delete=function(L){var B=Bt(this,L).delete(L);return this.size-=B?1:0,B},H.prototype.get=function(L){return Bt(this,L).get(L)},H.prototype.has=function(L){return Bt(this,L).has(L)},H.prototype.set=function(L,B){var ie=Bt(this,L),le=ie.size;return ie.set(L,B),this.size+=ie.size==le?0:1,this},te.prototype.add=te.prototype.push=function(L){return this.__data__.set(L,h),this},te.prototype.has=function(L){return this.__data__.has(L)},oe.prototype.clear=function(){this.__data__=new M,this.size=0},oe.prototype.delete=function(L){var B=this.__data__,ie=B.delete(L);return this.size=B.size,ie},oe.prototype.get=function(L){return this.__data__.get(L)},oe.prototype.has=function(L){return this.__data__.has(L)},oe.prototype.set=function(L,B){var ie=this.__data__;if(ie instanceof M){var le=ie.__data__;if(!Ue||le.length<199)return le.push([L,B]),this.size=++ie.size,this;ie=this.__data__=new H(le)}return ie.set(L,B),this.size=ie.size,this};var wr=Nt?function(L){return L==null?[]:(L=Object(L),function(B,ie){for(var le=-1,ve=B==null?0:B.length,_e=0,Ke=[];++le<ve;){var pt=B[le];ie(pt,le,B)&&(Ke[_e++]=pt)}return Ke}(Nt(L),function(B){return St.call(L,B)}))}:function(){return[]},Or=Oe;function An(L,B){return!!(B=B??g)&&(typeof L=="number"||I.test(L))&&L>-1&&L%1==0&&L<B}a(An,"Ht");function Et(L){if(L!=null){try{return it.call(L)}catch{}try{return L+""}catch{}}return""}a(Et,"Ft");function Sn(L,B){return L===B||L!=L&&B!=B}a(Sn,"$t"),(Lt&&Or(new Lt(new ArrayBuffer(1)))!=ae||Ue&&Or(new Ue)!=j||nt&&Or(nt.resolve())!=se||Me&&Or(new Me)!=X||We&&Or(new We)!=re)&&(Or=a(function(L){var B=Oe(L),ie=B==Z?L.constructor:void 0,le=ie?Et(ie):"";if(le)switch(le){case Gr:return ae;case sr:return j;case an:return se;case yr:return X;case ui:return re}return B},"zt"));var Yr=fe(function(){return arguments}())?fe:function(L){return R(L)&&$e.call(L,"callee")&&!St.call(L,"callee")},ln=Array.isArray,Bn=Ct||function(){return!1};function Nn(L){if(!Fn(L))return!1;var B=Oe(L);return B==T||B==O||B==E||B==ee}a(Nn,"Zt");function Cn(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=g}a(Cn,"Gt");function Fn(L){var B=typeof L;return L!=null&&(B=="object"||B=="function")}a(Fn,"Xt");function R(L){return L!=null&&typeof L=="object"}a(R,"Qt");var G=je?function(L){return function(B){return L(B)}}(je):function(L){return R(L)&&Cn(L.length)&&!!C[Oe(L)]};function he(L){return(B=L)!=null&&Cn(B.length)&&!Nn(B)?Le(L):Ht(L);var B}a(he,"Jt"),n.exports=function(L,B){return Ne(L,B)}},106:(n,s,c)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});let h=c(193),d=c(142);var p;(function(g){g.compose=function(b={},v={},E=!1){typeof b!="object"&&(b={}),typeof v!="object"&&(v={});let A=h(v);E||(A=Object.keys(A).reduce((N,P)=>(A[P]!=null&&(N[P]=A[P]),N),{}));for(let N in b)b[N]!==void 0&&v[N]===void 0&&(A[N]=b[N]);return Object.keys(A).length>0?A:void 0},g.diff=function(b={},v={}){typeof b!="object"&&(b={}),typeof v!="object"&&(v={});let E=Object.keys(b).concat(Object.keys(v)).reduce((A,N)=>(d(b[N],v[N])||(A[N]=v[N]===void 0?null:v[N]),A),{});return Object.keys(E).length>0?E:void 0},g.invert=function(b={},v={}){b=b||{};let E=Object.keys(v).reduce((A,N)=>(v[N]!==b[N]&&b[N]!==void 0&&(A[N]=v[N]),A),{});return Object.keys(b).reduce((A,N)=>(b[N]!==v[N]&&v[N]===void 0&&(A[N]=null),A),E)},g.transform=function(b,v,E=!1){if(typeof b!="object")return v;if(typeof v!="object")return;if(!E)return v;let A=Object.keys(v).reduce((N,P)=>(b[P]===void 0&&(N[P]=v[P]),N),{});return Object.keys(A).length>0?A:void 0}})(p||(p={})),s.default=p},660:(n,s,c)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AttributeMap=s.OpIterator=s.Op=void 0;let h=c(606),d=c(193),p=c(142),g=c(106);s.AttributeMap=g.default;let b=c(759);s.Op=b.default;let v=c(317);s.OpIterator=v.default;let E="\0",A=a((P,T)=>{if(typeof P!="object"||P===null)throw new Error("cannot retain a "+typeof P);if(typeof T!="object"||T===null)throw new Error("cannot retain a "+typeof T);let O=Object.keys(P)[0];if(!O||O!==Object.keys(T)[0])throw new Error(`embed types not matched: ${O} != ${Object.keys(T)[0]}`);return[O,P[O],T[O]]},"u");class N{static{a(this,"h")}constructor(T){Array.isArray(T)?this.ops=T:T!=null&&Array.isArray(T.ops)?this.ops=T.ops:this.ops=[]}static registerEmbed(T,O){this.handlers[T]=O}static unregisterEmbed(T){delete this.handlers[T]}static getHandler(T){let O=this.handlers[T];if(!O)throw new Error(`no handlers for embed type "${T}"`);return O}insert(T,O){let j={};return typeof T=="string"&&T.length===0?this:(j.insert=T,O!=null&&typeof O=="object"&&Object.keys(O).length>0&&(j.attributes=O),this.push(j))}delete(T){return T<=0?this:this.push({delete:T})}retain(T,O){if(typeof T=="number"&&T<=0)return this;let j={retain:T};return O!=null&&typeof O=="object"&&Object.keys(O).length>0&&(j.attributes=O),this.push(j)}push(T){let O=this.ops.length,j=this.ops[O-1];if(T=d(T),typeof j=="object"){if(typeof T.delete=="number"&&typeof j.delete=="number")return this.ops[O-1]={delete:j.delete+T.delete},this;if(typeof j.delete=="number"&&T.insert!=null&&(O-=1,j=this.ops[O-1],typeof j!="object"))return this.ops.unshift(T),this;if(p(T.attributes,j.attributes)){if(typeof T.insert=="string"&&typeof j.insert=="string")return this.ops[O-1]={insert:j.insert+T.insert},typeof T.attributes=="object"&&(this.ops[O-1].attributes=T.attributes),this;if(typeof T.retain=="number"&&typeof j.retain=="number")return this.ops[O-1]={retain:j.retain+T.retain},typeof T.attributes=="object"&&(this.ops[O-1].attributes=T.attributes),this}}return O===this.ops.length?this.ops.push(T):this.ops.splice(O,0,T),this}chop(){let T=this.ops[this.ops.length-1];return T&&typeof T.retain=="number"&&!T.attributes&&this.ops.pop(),this}filter(T){return this.ops.filter(T)}forEach(T){this.ops.forEach(T)}map(T){return this.ops.map(T)}partition(T){let O=[],j=[];return this.forEach(F=>{(T(F)?O:j).push(F)}),[O,j]}reduce(T,O){return this.ops.reduce(T,O)}changeLength(){return this.reduce((T,O)=>O.insert?T+b.default.length(O):O.delete?T-O.delete:T,0)}length(){return this.reduce((T,O)=>T+b.default.length(O),0)}slice(T=0,O=1/0){let j=[],F=new v.default(this.ops),U=0;for(;U<O&&F.hasNext();){let Z;U<T?Z=F.next(T-U):(Z=F.next(O-U),j.push(Z)),U+=b.default.length(Z)}return new N(j)}compose(T){let O=new v.default(this.ops),j=new v.default(T.ops),F=[],U=j.peek();if(U!=null&&typeof U.retain=="number"&&U.attributes==null){let se=U.retain;for(;O.peekType()==="insert"&&O.peekLength()<=se;)se-=O.peekLength(),F.push(O.next());U.retain-se>0&&j.next(U.retain-se)}let Z=new N(F);for(;O.hasNext()||j.hasNext();)if(j.peekType()==="insert")Z.push(j.next());else if(O.peekType()==="delete")Z.push(O.next());else{let se=Math.min(O.peekLength(),j.peekLength()),ee=O.next(se),_=j.next(se);if(_.retain){let X={};if(typeof ee.retain=="number")X.retain=typeof _.retain=="number"?se:_.retain;else if(typeof _.retain=="number")ee.retain==null?X.insert=ee.insert:X.retain=ee.retain;else{let D=ee.retain==null?"insert":"retain",[V,re,J]=A(ee[D],_.retain),ae=N.getHandler(V);X[D]={[V]:ae.compose(re,J,D==="retain")}}let de=g.default.compose(ee.attributes,_.attributes,typeof ee.retain=="number");if(de&&(X.attributes=de),Z.push(X),!j.hasNext()&&p(Z.ops[Z.ops.length-1],X)){let D=new N(O.rest());return Z.concat(D).chop()}}else typeof _.delete=="number"&&(typeof ee.retain=="number"||typeof ee.retain=="object"&&ee.retain!==null)&&Z.push(_)}return Z.chop()}concat(T){let O=new N(this.ops.slice());return T.ops.length>0&&(O.push(T.ops[0]),O.ops=O.ops.concat(T.ops.slice(1))),O}diff(T,O){if(this.ops===T.ops)return new N;let j=[this,T].map(ee=>ee.map(_=>{if(_.insert!=null)return typeof _.insert=="string"?_.insert:E;throw new Error("diff() called "+(ee===T?"on":"with")+" non-document")}).join("")),F=new N,U=h(j[0],j[1],O,!0),Z=new v.default(this.ops),se=new v.default(T.ops);return U.forEach(ee=>{let _=ee[1].length;for(;_>0;){let X=0;switch(ee[0]){case h.INSERT:X=Math.min(se.peekLength(),_),F.push(se.next(X));break;case h.DELETE:X=Math.min(_,Z.peekLength()),Z.next(X),F.delete(X);break;case h.EQUAL:X=Math.min(Z.peekLength(),se.peekLength(),_);let de=Z.next(X),D=se.next(X);p(de.insert,D.insert)?F.retain(X,g.default.diff(de.attributes,D.attributes)):F.push(D).delete(X)}_-=X}}),F.chop()}eachLine(T,O=`
`){let j=new v.default(this.ops),F=new N,U=0;for(;j.hasNext();){if(j.peekType()!=="insert")return;let Z=j.peek(),se=b.default.length(Z)-j.peekLength(),ee=typeof Z.insert=="string"?Z.insert.indexOf(O,se)-se:-1;if(ee<0)F.push(j.next());else if(ee>0)F.push(j.next(ee));else{if(T(F,j.next(1).attributes||{},U)===!1)return;U+=1,F=new N}}F.length()>0&&T(F,{},U)}invert(T){let O=new N;return this.reduce((j,F)=>{if(F.insert)O.delete(b.default.length(F));else{if(typeof F.retain=="number"&&F.attributes==null)return O.retain(F.retain),j+F.retain;if(F.delete||typeof F.retain=="number"){let U=F.delete||F.retain;return T.slice(j,j+U).forEach(Z=>{F.delete?O.push(Z):F.retain&&F.attributes&&O.retain(b.default.length(Z),g.default.invert(F.attributes,Z.attributes))}),j+U}if(typeof F.retain=="object"&&F.retain!==null){let U=T.slice(j,j+1),Z=new v.default(U.ops).next(),[se,ee,_]=A(F.retain,Z.insert),X=N.getHandler(se);return O.retain({[se]:X.invert(ee,_)},g.default.invert(F.attributes,Z.attributes)),j+1}}return j},0),O.chop()}transform(T,O=!1){if(O=!!O,typeof T=="number")return this.transformPosition(T,O);let j=T,F=new v.default(this.ops),U=new v.default(j.ops),Z=new N;for(;F.hasNext()||U.hasNext();)if(F.peekType()!=="insert"||!O&&U.peekType()==="insert")if(U.peekType()==="insert")Z.push(U.next());else{let se=Math.min(F.peekLength(),U.peekLength()),ee=F.next(se),_=U.next(se);if(ee.delete)continue;if(_.delete)Z.push(_);else{let X=ee.retain,de=_.retain,D=typeof de=="object"&&de!==null?de:se;if(typeof X=="object"&&X!==null&&typeof de=="object"&&de!==null){let V=Object.keys(X)[0];if(V===Object.keys(de)[0]){let re=N.getHandler(V);re&&(D={[V]:re.transform(X[V],de[V],O)})}}Z.retain(D,g.default.transform(ee.attributes,_.attributes,O))}}else Z.retain(b.default.length(F.next()));return Z.chop()}transformPosition(T,O=!1){O=!!O;let j=new v.default(this.ops),F=0;for(;j.hasNext()&&F<=T;){let U=j.peekLength(),Z=j.peekType();j.next(),Z!=="delete"?(Z==="insert"&&(F<T||!O)&&(T+=U),F+=U):T-=Math.min(U,T-F)}return T}}N.Op=b.default,N.OpIterator=v.default,N.AttributeMap=g.default,N.handlers={},s.default=N,n.exports=N,n.exports.default=N},759:(n,s)=>{"use strict";var c;Object.defineProperty(s,"__esModule",{value:!0}),function(h){h.length=function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.retain=="object"&&d.retain!==null?1:typeof d.insert=="string"?d.insert.length:1}}(c||(c={})),s.default=c},317:(n,s,c)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});let h=c(759);s.default=class{constructor(d){this.ops=d,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(d){d||(d=1/0);let p=this.ops[this.index];if(p){let g=this.offset,b=h.default.length(p);if(d>=b-g?(d=b-g,this.index+=1,this.offset=0):this.offset+=d,typeof p.delete=="number")return{delete:d};{let v={};return p.attributes&&(v.attributes=p.attributes),typeof p.retain=="number"?v.retain=d:typeof p.retain=="object"&&p.retain!==null?v.retain=p.retain:typeof p.insert=="string"?v.insert=p.insert.substr(g,d):v.insert=p.insert,v}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?h.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let d=this.ops[this.index];return d?typeof d.delete=="number"?"delete":typeof d.retain=="number"||typeof d.retain=="object"&&d.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let d=this.offset,p=this.index,g=this.next(),b=this.ops.slice(this.index);return this.offset=d,this.index=p,[g].concat(b)}}return[]}}},968:(n,s,c)=>{var h=c(64);typeof h=="string"&&(h=[[n.id,h,""]]);var d={hmr:!0,transform:void 0};c(27)(h,d),h.locals&&(n.exports=h.locals)},27:(n,s,c)=>{var h,d,p={},g=(h=a(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return d===void 0&&(d=h.apply(this,arguments)),d}),b=function(D){var V={};return function(re){if(V[re]===void 0){var J=D.call(this,re);if(J instanceof window.HTMLIFrameElement)try{J=J.contentDocument.head}catch{J=null}V[re]=J}return V[re]}}(function(D){return document.querySelector(D)}),v=null,E=0,A=[],N=c(874);function P(D,V){for(var re=0;re<D.length;re++){var J=D[re],ae=p[J.id];if(ae){ae.refs++;for(var q=0;q<ae.parts.length;q++)ae.parts[q](J.parts[q]);for(;q<J.parts.length;q++)ae.parts.push(Z(J.parts[q],V))}else{var I=[];for(q=0;q<J.parts.length;q++)I.push(Z(J.parts[q],V));p[J.id]={id:J.id,refs:1,parts:I}}}}a(P,"d");function T(D,V){for(var re=[],J={},ae=0;ae<D.length;ae++){var q=D[ae],I=V.base?q[0]+V.base:q[0],C={css:q[1],media:q[2],sourceMap:q[3]};J[I]?J[I].parts.push(C):re.push(J[I]={id:I,parts:[C]})}return re}a(T,"f");function O(D,V){var re=b(D.insertInto);if(!re)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var J=A[A.length-1];if(D.insertAt==="top")J?J.nextSibling?re.insertBefore(V,J.nextSibling):re.appendChild(V):re.insertBefore(V,re.firstChild),A.push(V);else if(D.insertAt==="bottom")re.appendChild(V);else{if(typeof D.insertAt!="object"||!D.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var ae=b(D.insertInto+" "+D.insertAt.before);re.insertBefore(V,ae)}}a(O,"p");function j(D){if(D.parentNode===null)return!1;D.parentNode.removeChild(D);var V=A.indexOf(D);V>=0&&A.splice(V,1)}a(j,"g");function F(D){var V=document.createElement("style");return D.attrs.type="text/css",U(V,D.attrs),O(D,V),V}a(F,"m");function U(D,V){Object.keys(V).forEach(function(re){D.setAttribute(re,V[re])})}a(U,"b");function Z(D,V){var re,J,ae,q;if(V.transform&&D.css){if(!(q=V.transform(D.css)))return function(){};D.css=q}if(V.singleton){var I=E++;re=v||(v=F(V)),J=_.bind(null,re,I,!1),ae=_.bind(null,re,I,!0)}else D.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(re=function(C){var $=document.createElement("link");return C.attrs.type="text/css",C.attrs.rel="stylesheet",U($,C.attrs),O(C,$),$}(V),J=de.bind(null,re,V),ae=a(function(){j(re),re.href&&URL.revokeObjectURL(re.href)},"s")):(re=F(V),J=X.bind(null,re),ae=a(function(){j(re)},"s"));return J(D),function(C){if(C){if(C.css===D.css&&C.media===D.media&&C.sourceMap===D.sourceMap)return;J(D=C)}else ae()}}a(Z,"y"),n.exports=function(D,V){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(V=V||{}).attrs=typeof V.attrs=="object"?V.attrs:{},V.singleton||typeof V.singleton=="boolean"||(V.singleton=g()),V.insertInto||(V.insertInto="head"),V.insertAt||(V.insertAt="bottom");var re=T(D,V);return P(re,V),function(J){for(var ae=[],q=0;q<re.length;q++){var I=re[q];(C=p[I.id]).refs--,ae.push(C)}for(J&&P(T(J,V),V),q=0;q<ae.length;q++){var C;if((C=ae[q]).refs===0){for(var $=0;$<C.parts.length;$++)C.parts[$]();delete p[C.id]}}}};var se,ee=(se=[],function(D,V){return se[D]=V,se.filter(Boolean).join(`
`)});function _(D,V,re,J){var ae=re?"":J.css;if(D.styleSheet)D.styleSheet.cssText=ee(V,ae);else{var q=document.createTextNode(ae),I=D.childNodes;I[V]&&D.removeChild(I[V]),I.length?D.insertBefore(q,I[V]):D.appendChild(q)}}a(_,"N");function X(D,V){var re=V.css,J=V.media;if(J&&D.setAttribute("media",J),D.styleSheet)D.styleSheet.cssText=re;else{for(;D.firstChild;)D.removeChild(D.firstChild);D.appendChild(document.createTextNode(re))}}a(X,"w");function de(D,V,re){var J=re.css,ae=re.sourceMap,q=V.convertToAbsoluteUrls===void 0&&ae;(V.convertToAbsoluteUrls||q)&&(J=N(J)),ae&&(J+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(ae))))+" */");var I=new Blob([J],{type:"text/css"}),C=D.href;D.href=URL.createObjectURL(I),C&&URL.revokeObjectURL(C)}a(de,"E")},874:n=>{n.exports=function(s){var c=typeof window<"u"&&window.location;if(!c)throw new Error("fixUrls requires window.location");if(!s||typeof s!="string")return s;var h=c.protocol+"//"+c.host,d=h+c.pathname.replace(/\/[^\/]*$/,"/");return s.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(p,g){var b,v=g.trim().replace(/^"(.*)"$/,function(E,A){return A}).replace(/^'(.*)'$/,function(E,A){return A});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(v)?p:(b=v.indexOf("//")===0?v:v.indexOf("/")===0?h+v:d+v.replace(/^\.\//,""),"url("+JSON.stringify(b)+")")})}},676:(n,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.FormatHTMLStringIndentation=function(c,h){for(var d=" ".repeat(2),p=0,g=`
`,b=null,v=null,E=null,A="",N=0;N<=c.length;N++){b=v,v=c.substr(N,1),E=c.substr(N+1,1);var P=c.substr(N,4)==="<br>",T=v==="<"&&E!=="/"&&!P,O=v==="<"&&E==="/"&&!P,j=b===">"&&v!=="<"&&p>0,F=!P&&!T&&!O&&j&&c.substr(N,c.substr(N).indexOf("<")).trim()==="";P&&(A+=g,p--,N+=4),T?(A+=g+d.repeat(p),p++):O?(--p<0&&(p=0),A+=g+d.repeat(p)):(v===" "&&E===" "||v===g&&c.substr(N,c.substr(N).indexOf("<")).trim()==="")&&(v=""),j&&!F&&(A+=g+d.repeat(p)),A+=v}return h.log("formatHTML",{before:c,after:A}),A}},795:(n,s)=>{"use strict";function c(v){return v.replace(/\s+/g," ").trim()}a(c,"n");function h(v){return v.replace(/<br([\s]*[\/]?>)/g,"<p> </p>")}a(h,"r");function d(v){return v.replace(/<p><\/p>/g,"<p> </p>")}a(d,"s");function p(v){return v.replace(/(<(?!\/)[\w=\."'\s]*>) /g,"$1")}a(p,"i");function g(v){return v.replace(/ (<\/[\w]+>)/g,"$1")}a(g,"o");function b(v,E){return v.reduce(function(A,N){return N(A)},E)}a(b,"l"),Object.defineProperty(s,"__esModule",{value:!0}),s.OutputHTMLParser=function(v){return b([c,p,g,h,d],v)},s.ConvertMultipleSpacesToSingle=c,s.PreserveNewlinesBr=h,s.PreserveNewlinesPTags=d,s.FixTagSpaceOpenTag=p,s.FixTagSpaceCloseTag=g,s.Compose=b},614:(n,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.QuillHtmlLogger=void 0;var c=function(){function h(){this.debug=!1}return a(h,"t"),h.prototype.setDebug=function(d){this.debug=d},h.prototype.prefixString=function(){return"</> quill-html-edit-button: "},Object.defineProperty(h.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p]}},enumerable:!1,configurable:!0}),h}();s.QuillHtmlLogger=c},190:function(n,s,c){"use strict";var h=this&&this.__assign||function(){return h=Object.assign||function(T){for(var O,j=1,F=arguments.length;j<F;j++)for(var U in O=arguments[j])Object.prototype.hasOwnProperty.call(O,U)&&(T[U]=O[U]);return T},h.apply(this,arguments)},d=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(s,"__esModule",{value:!0}),s.htmlEditButton=void 0;var p=c(614);c(968);var g=d(c(429)),b=c(795),v=c(676);function E(T){return document.createElement(T)}a(E,"c");function A(T,O,j){return T.setAttribute(O,j)}a(A,"u");var N=new p.QuillHtmlLogger,P=a(function(T,O){var j=O||{},F=!(!j||!j.debug);N.setDebug(F),N.log("logging enabled");var U=T.getModule("toolbar");if(!U)throw new Error('quill.htmlEditButton requires the "toolbar" module to be included too');var Z=U.container,se=E("span");A(se,"class","ql-formats");var ee=E("button");ee.innerHTML=j.buttonHTML||"&lt;&gt;",ee.title=j.buttonTitle||"Show HTML source",ee.type="button";var _=a(function(X){T.clipboard.dangerouslyPasteHTML(X)},"g");ee.onclick=function(X){X.preventDefault(),function(de,D,V){var re=de.container.querySelector(".ql-editor").innerHTML,J=E("div"),ae=E("div"),q=D.msg||`Edit HTML here, when you click "OK" the quill editor's contents will be replaced`,I=D.cancelText||"Cancel",C=D.okText||"Ok",$=D.closeOnClickOverlay!==!1;A(ae,"class","ql-html-overlayContainer"),A(J,"class","ql-html-popupContainer");var W=E("span");A(W,"class","ql-html-popupTitle"),W.innerText=q;var ne=E("div");ne.appendChild(W),A(ne,"class","ql-html-textContainer");var xe=E("pre");A(xe,"data-language","xml"),xe.innerText=(0,v.FormatHTMLStringIndentation)(re,N);var ue=E("div");A(ue,"class","ql-html-textArea");var Be=E("button");Be.innerHTML=I,A(Be,"class","ql-html-buttonCancel");var Fe=E("button");Fe.innerHTML=C,A(Fe,"class","ql-html-buttonOk");var ke=E("div");A(ke,"class","ql-html-buttonGroup");var je=document.querySelector(D.prependSelector);ke.appendChild(Be),ke.appendChild(Fe),ue.appendChild(xe),ne.appendChild(ue),ne.appendChild(ke),J.appendChild(ne),ae.appendChild(J),je?je.prepend(ae):document.body.appendChild(ae);var Ve=D&&D.editorModules,Ge=Ve&&Object.keys(Ve).length?Ve:{},ft=new g.default(ue,{modules:h({syntax:D.syntax},Ge)});Be.onclick=function(){je?je.removeChild(ae):document.body.removeChild(ae)},$&&(ae.onclick=Be.onclick),J.onclick=function(Ye){Ye.preventDefault(),Ye.stopPropagation()},Fe.onclick=function(){var Ye=ft.container.querySelector(".ql-editor").innerText,qe=(0,b.OutputHTMLParser)(Ye);N.log("OutputHTMLParser",{htmlInputFromPopup:Ye,htmlOutputFormatted:qe}),V(qe),je?je.removeChild(ae):document.body.removeChild(ae)}}(T,j,_)},se.appendChild(ee),Z?.appendChild(se)},"d");s.htmlEditButton=P,window.htmlEditButton=P,s.default=P},429:(n,s,c)=>{"use strict";c.r(s),c.d(s,{Module:()=>gn,Parchment:()=>h,Range:()=>mi,default:()=>Ux});var h={};c.r(h),c.d(h,{Attributor:()=>xr,AttributorStore:()=>ll,BlockBlot:()=>Bo,ClassAttributor:()=>fn,ContainerBlot:()=>cl,EmbedBlot:()=>Vr,InlineBlot:()=>Eu,LeafBlot:()=>ar,ParentBlot:()=>pn,Registry:()=>_s,Scope:()=>Ee,ScrollBlot:()=>Au,StyleAttributor:()=>hi,TextBlot:()=>ul});let d=a(function(){this.__data__=[],this.size=0},"s"),p=a(function(o,i){return o===i||o!=o&&i!=i},"i"),g=a(function(o,i){for(var l=o.length;l--;)if(p(o[l][0],i))return l;return-1},"o");var b=Array.prototype.splice;let v=a(function(o){var i=this.__data__,l=g(i,o);return!(l<0)&&(l==i.length-1?i.pop():b.call(i,l,1),--this.size,!0)},"a"),E=a(function(o){var i=this.__data__,l=g(i,o);return l<0?void 0:i[l][1]},"c"),A=a(function(o){return g(this.__data__,o)>-1},"u"),N=a(function(o,i){var l=this.__data__,u=g(l,o);return u<0?(++this.size,l.push([o,i])):l[u][1]=i,this},"h");function P(o){var i=-1,l=o==null?0:o.length;for(this.clear();++i<l;){var u=o[i];this.set(u[0],u[1])}}a(P,"d"),P.prototype.clear=d,P.prototype.delete=v,P.prototype.get=E,P.prototype.has=A,P.prototype.set=N;let T=P,O=a(function(){this.__data__=new T,this.size=0},"p"),j=a(function(o){var i=this.__data__,l=i.delete(o);return this.size=i.size,l},"g"),F=a(function(o){return this.__data__.get(o)},"m"),U=a(function(o){return this.__data__.has(o)},"b"),Z=typeof global=="object"&&global&&global.Object===Object&&global;var se=typeof self=="object"&&self&&self.Object===Object&&self;let ee=Z||se||Function("return this")(),_=ee.Symbol;var X=Object.prototype,de=X.hasOwnProperty,D=X.toString,V=_?_.toStringTag:void 0;let re=a(function(o){var i=de.call(o,V),l=o[V];try{o[V]=void 0;var u=!0}catch{}var f=D.call(o);return u&&(i?o[V]=l:delete o[V]),f},"k");var J=Object.prototype.toString;let ae=a(function(o){return J.call(o)},"L");var q=_?_.toStringTag:void 0;let I=a(function(o){return o==null?o===void 0?"[object Undefined]":"[object Null]":q&&q in Object(o)?re(o):ae(o)},"T"),C=a(function(o){var i=typeof o;return o!=null&&(i=="object"||i=="function")},"S"),$=a(function(o){if(!C(o))return!1;var i=I(o);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},"C"),W=ee["__core-js_shared__"];var ne,xe=(ne=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+ne:"";let ue=a(function(o){return!!xe&&xe in o},"M");var Be=Function.prototype.toString;let Fe=a(function(o){if(o!=null){try{return Be.call(o)}catch{}try{return o+""}catch{}}return""},"U");var ke=/^\[object .+?Constructor\]$/,je=Function.prototype,Ve=Object.prototype,Ge=je.toString,ft=Ve.hasOwnProperty,Ye=RegExp("^"+Ge.call(ft).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let qe=a(function(o){return!(!C(o)||ue(o))&&($(o)?Ye:ke).test(Fe(o))},"V"),Xe=a(function(o,i){return o?.[i]},"K"),Ce=a(function(o,i){var l=Xe(o,i);return qe(l)?l:void 0},"W"),He=Ce(ee,"Map"),Re=Ce(Object,"create"),Ie=a(function(){this.__data__=Re?Re(null):{},this.size=0},"X"),it=a(function(o){var i=this.has(o)&&delete this.__data__[o];return this.size-=i?1:0,i},"Q");var $e=Object.prototype.hasOwnProperty;let ct=a(function(o){var i=this.__data__;if(Re){var l=i[o];return l==="__lodash_hash_undefined__"?void 0:l}return $e.call(i,o)?i[o]:void 0},"J");var ut=Object.prototype.hasOwnProperty;let wt=a(function(o){var i=this.__data__;return Re?i[o]!==void 0:ut.call(i,o)},"et"),jt=a(function(o,i){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=Re&&i===void 0?"__lodash_hash_undefined__":i,this},"nt");function xt(o){var i=-1,l=o==null?0:o.length;for(this.clear();++i<l;){var u=o[i];this.set(u[0],u[1])}}a(xt,"rt"),xt.prototype.clear=Ie,xt.prototype.delete=it,xt.prototype.get=ct,xt.prototype.has=wt,xt.prototype.set=jt;let st=xt,St=a(function(){this.size=0,this.__data__={hash:new st,map:new(He||T),string:new st}},"it"),Rt=a(function(o){var i=typeof o;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?o!=="__proto__":o===null},"ot"),Ze=a(function(o,i){var l=o.__data__;return Rt(i)?l[typeof i=="string"?"string":"hash"]:l.map},"lt"),Nt=a(function(o){var i=Ze(this,o).delete(o);return this.size-=i?1:0,i},"at"),Ct=a(function(o){return Ze(this,o).get(o)},"ct"),kt=a(function(o){return Ze(this,o).has(o)},"ut"),Lt=a(function(o,i){var l=Ze(this,o),u=l.size;return l.set(o,i),this.size+=l.size==u?0:1,this},"ht");function Ue(o){var i=-1,l=o==null?0:o.length;for(this.clear();++i<l;){var u=o[i];this.set(u[0],u[1])}}a(Ue,"dt"),Ue.prototype.clear=St,Ue.prototype.delete=Nt,Ue.prototype.get=Ct,Ue.prototype.has=kt,Ue.prototype.set=Lt;let nt=Ue,Me=a(function(o,i){var l=this.__data__;if(l instanceof T){var u=l.__data__;if(!He||u.length<199)return u.push([o,i]),this.size=++l.size,this;l=this.__data__=new nt(u)}return l.set(o,i),this.size=l.size,this},"pt");function We(o){var i=this.__data__=new T(o);this.size=i.size}a(We,"gt"),We.prototype.clear=O,We.prototype.delete=j,We.prototype.get=F,We.prototype.has=U,We.prototype.set=Me;let Yt=We,Gr=function(){try{var o=Ce(Object,"defineProperty");return o({},"",{}),o}catch{}}(),sr=a(function(o,i,l){i=="__proto__"&&Gr?Gr(o,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):o[i]=l},"yt"),an=a(function(o,i,l){(l!==void 0&&!p(o[i],l)||l===void 0&&!(i in o))&&sr(o,i,l)},"vt"),yr=function(o){return function(i,l,u){for(var f=-1,m=Object(i),y=u(i),w=y.length;w--;){var k=y[o?w:++f];if(l(m[k],k,m)===!1)break}return i}}();var ui=typeof vr=="object"&&vr&&!vr.nodeType&&vr,jn=ui&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,x=jn&&jn.exports===ui?ee.Buffer:void 0,S=x?x.allocUnsafe:void 0;let M=a(function(o,i){if(i)return o.slice();var l=o.length,u=S?S(l):new o.constructor(l);return o.copy(u),u},"qt"),H=ee.Uint8Array,te=a(function(o){var i=new o.constructor(o.byteLength);return new H(i).set(new H(o)),i},"_t"),oe=a(function(o,i){var l=i?te(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.length)},"Lt"),Le=a(function(o,i){var l=-1,u=o.length;for(i||(i=Array(u));++l<u;)i[l]=o[l];return i},"Ot");var we=Object.create;let Oe=function(){function o(){}return a(o,"t"),function(i){if(!C(i))return{};if(we)return we(i);o.prototype=i;var l=new o;return o.prototype=void 0,l}}(),fe=a(function(o,i){return function(l){return o(i(l))}},"Ct"),Ne=fe(Object.getPrototypeOf,Object);var Je=Object.prototype;let Ht=a(function(o){var i=o&&o.constructor;return o===(typeof i=="function"&&i.prototype||Je)},"It"),Pt=a(function(o){return typeof o.constructor!="function"||Ht(o)?{}:Oe(Ne(o))},"Mt"),_t=a(function(o){return o!=null&&typeof o=="object"},"Bt"),Bt=a(function(o){return _t(o)&&I(o)=="[object Arguments]"},"Ut");var Lr=Object.prototype,wr=Lr.hasOwnProperty,Or=Lr.propertyIsEnumerable;let An=Bt(function(){return arguments}())?Bt:function(o){return _t(o)&&wr.call(o,"callee")&&!Or.call(o,"callee")},Et=Array.isArray,Sn=a(function(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=9007199254740991},"$t"),Yr=a(function(o){return o!=null&&Sn(o.length)&&!$(o)},"Vt"),ln=a(function(o){return _t(o)&&Yr(o)},"Kt"),Bn=a(function(){return!1},"Wt");var Nn=typeof vr=="object"&&vr&&!vr.nodeType&&vr,Cn=Nn&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,Fn=Cn&&Cn.exports===Nn?ee.Buffer:void 0;let R=(Fn?Fn.isBuffer:void 0)||Bn;var G=Function.prototype,he=Object.prototype,L=G.toString,B=he.hasOwnProperty,ie=L.call(Object);let le=a(function(o){if(!_t(o)||I(o)!="[object Object]")return!1;var i=Ne(o);if(i===null)return!0;var l=B.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&L.call(l)==ie},"re");var ve={};ve["[object Float32Array]"]=ve["[object Float64Array]"]=ve["[object Int8Array]"]=ve["[object Int16Array]"]=ve["[object Int32Array]"]=ve["[object Uint8Array]"]=ve["[object Uint8ClampedArray]"]=ve["[object Uint16Array]"]=ve["[object Uint32Array]"]=!0,ve["[object Arguments]"]=ve["[object Array]"]=ve["[object ArrayBuffer]"]=ve["[object Boolean]"]=ve["[object DataView]"]=ve["[object Date]"]=ve["[object Error]"]=ve["[object Function]"]=ve["[object Map]"]=ve["[object Number]"]=ve["[object Object]"]=ve["[object RegExp]"]=ve["[object Set]"]=ve["[object String]"]=ve["[object WeakMap]"]=!1;let _e=a(function(o){return _t(o)&&Sn(o.length)&&!!ve[I(o)]},"ie"),Ke=a(function(o){return function(i){return o(i)}},"oe");var pt=typeof vr=="object"&&vr&&!vr.nodeType&&vr,Ut=pt&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,mt=Ut&&Ut.exports===pt&&Z.process;let pe=function(){try{var o=Ut&&Ut.require&&Ut.require("util").types;return o||mt&&mt.binding&&mt.binding("util")}catch{}}();var Pe=pe&&pe.isTypedArray;let Qe=Pe?Ke(Pe):_e,tt=a(function(o,i){if((i!=="constructor"||typeof o[i]!="function")&&i!="__proto__")return o[i]},"fe");var er=Object.prototype.hasOwnProperty;let or=a(function(o,i,l){var u=o[i];er.call(o,i)&&p(u,l)&&(l!==void 0||i in o)||sr(o,i,l)},"ge"),ze=a(function(o,i,l,u){var f=!l;l||(l={});for(var m=-1,y=i.length;++m<y;){var w=i[m],k=u?u(l[w],o[w],w,l,o):void 0;k===void 0&&(k=o[w]),f?sr(l,w,k):or(l,w,k)}return l},"me"),qt=a(function(o,i){for(var l=-1,u=Array(o);++l<o;)u[l]=i(l);return u},"be");var tr=/^(?:0|[1-9]\d*)$/;let cn=a(function(o,i){var l=typeof o;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&tr.test(o))&&o>-1&&o%1==0&&o<i},"ve");var wu=Object.prototype.hasOwnProperty;let ol=a(function(o,i){var l=Et(o),u=!l&&An(o),f=!l&&!u&&R(o),m=!l&&!u&&!f&&Qe(o),y=l||u||f||m,w=y?qt(o.length,String):[],k=w.length;for(var z in o)!i&&!wu.call(o,z)||y&&(z=="length"||f&&(z=="offset"||z=="parent")||m&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||cn(z,k))||w.push(z);return w},"Ne"),ot=a(function(o){var i=[];if(o!=null)for(var l in Object(o))i.push(l);return i},"we");var rt=Object.prototype.hasOwnProperty;let Cs=a(function(o){if(!C(o))return ot(o);var i=Ht(o),l=[];for(var u in o)(u!="constructor"||!i&&rt.call(o,u))&&l.push(u);return l},"Ae"),kr=a(function(o){return Yr(o)?ol(o,!0):Cs(o)},"qe"),Ro=a(function(o){return ze(o,kr(o))},"ke"),_r=a(function(o,i,l,u,f,m,y){var w=tt(o,l),k=tt(i,l),z=y.get(k);if(z)an(o,l,z);else{var Q=m?m(w,k,l+"",o,i,y):void 0,ge=Q===void 0;if(ge){var be=Et(k),Se=!be&&R(k),Ae=!be&&!Se&&Qe(k);Q=k,be||Se||Ae?Et(w)?Q=w:ln(w)?Q=Le(w):Se?(ge=!1,Q=M(k,!0)):Ae?(ge=!1,Q=oe(k,!0)):Q=[]:le(k)||An(k)?(Q=w,An(w)?Q=Ro(w):C(w)&&!$(w)||(Q=Pt(k))):ge=!1}ge&&(y.set(k,Q),f(Q,k,u,m,y),y.delete(k)),an(o,l,Q)}},"_e"),un=a(function o(i,l,u,f,m){i!==l&&yr(l,function(y,w){if(m||(m=new Yt),C(y))_r(i,l,w,u,o,f,m);else{var k=f?f(tt(i,w),y,w+"",i,l,m):void 0;k===void 0&&(k=y),an(i,w,k)}},kr)},"t"),hn=a(function(o){return o},"Oe"),Ki=a(function(o,i,l){switch(l.length){case 0:return o.call(i);case 1:return o.call(i,l[0]);case 2:return o.call(i,l[0],l[1]);case 3:return o.call(i,l[0],l[1],l[2])}return o.apply(i,l)},"Te");var Gi=Math.max;let Po=a(function(o,i,l){return i=Gi(i===void 0?o.length-1:i,0),function(){for(var u=arguments,f=-1,m=Gi(u.length-i,0),y=Array(m);++f<m;)y[f]=u[i+f];f=-1;for(var w=Array(i+1);++f<i;)w[f]=u[f];return w[i]=l(y),Ki(o,this,w)}},"Ce"),Ls=a(function(o){return function(){return o}},"je"),Hn=Gr?function(o,i){return Gr(o,"toString",{configurable:!0,enumerable:!1,value:Ls(i),writable:!0})}:hn;var al=Date.now;let Os=function(o){var i=0,l=0;return function(){var u=al(),f=16-(u-l);if(l=u,f>0){if(++i>=800)return arguments[0]}else i=0;return o.apply(void 0,arguments)}}(Hn),jo=a(function(o,i){return Os(Po(o,i,hn),o+"")},"Be"),ks=a(function(o,i,l){if(!C(l))return!1;var u=typeof i;return!!(u=="number"?Yr(l)&&cn(i,l.length):u=="string"&&i in l)&&p(l[i],o)},"Ue"),Ur=function(o){return jo(function(i,l){var u=-1,f=l.length,m=f>1?l[f-1]:void 0,y=f>2?l[2]:void 0;for(m=o.length>3&&typeof m=="function"?(f--,m):void 0,y&&ks(l[0],l[1],y)&&(m=f<3?void 0:m,f=1),i=Object(i);++u<f;){var w=l[u];w&&o(i,w,u,m)}return i})}(function(o,i,l){un(o,i,l)});var Ee=(o=>(o[o.TYPE=3]="TYPE",o[o.LEVEL=12]="LEVEL",o[o.ATTRIBUTE=13]="ATTRIBUTE",o[o.BLOT=14]="BLOT",o[o.INLINE=7]="INLINE",o[o.BLOCK=11]="BLOCK",o[o.BLOCK_BLOT=10]="BLOCK_BLOT",o[o.INLINE_BLOT=6]="INLINE_BLOT",o[o.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",o[o.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",o[o.ANY=15]="ANY",o))(Ee||{});class xr{static{a(this,"ze")}constructor(i,l,u={}){this.attrName=i,this.keyName=l;let f=Ee.TYPE&Ee.ATTRIBUTE;this.scope=u.scope!=null?u.scope&Ee.LEVEL|f:Ee.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}static keys(i){return Array.from(i.attributes).map(l=>l.name)}add(i,l){return!!this.canAdd(i,l)&&(i.setAttribute(this.keyName,l),!0)}canAdd(i,l){return this.whitelist==null||(typeof l=="string"?this.whitelist.indexOf(l.replace(/["']/g,""))>-1:this.whitelist.indexOf(l)>-1)}remove(i){i.removeAttribute(this.keyName)}value(i){let l=i.getAttribute(this.keyName);return this.canAdd(i,l)&&l?l:""}}class dn extends Error{static{a(this,"He")}constructor(i){super(i="[Parchment] "+i),this.message=i,this.name=this.constructor.name}}let xp=class cp{static{a(this,"t")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(i,l=!1){if(i==null)return null;if(this.blots.has(i))return this.blots.get(i)||null;if(l){let u=null;try{u=i.parentNode}catch{return null}return this.find(u,l)}return null}create(i,l,u){let f=this.query(l);if(f==null)throw new dn(`Unable to create ${l} blot`);let m=f,y=l instanceof Node||l.nodeType===Node.TEXT_NODE?l:m.create(u),w=new m(i,y,u);return cp.blots.set(w.domNode,w),w}find(i,l=!1){return cp.find(i,l)}query(i,l=Ee.ANY){let u;return typeof i=="string"?u=this.types[i]||this.attributes[i]:i instanceof Text||i.nodeType===Node.TEXT_NODE?u=this.types.text:typeof i=="number"?i&Ee.LEVEL&Ee.BLOCK?u=this.types.block:i&Ee.LEVEL&Ee.INLINE&&(u=this.types.inline):i instanceof Element&&((i.getAttribute("class")||"").split(/\s+/).some(f=>(u=this.classes[f],!!u)),u=u||this.tags[i.tagName]),u==null?null:"scope"in u&&l&Ee.LEVEL&u.scope&&l&Ee.TYPE&u.scope?u:null}register(...i){return i.map(l=>{let u="blotName"in l,f="attrName"in l;if(!u&&!f)throw new dn("Invalid definition");if(u&&l.blotName==="abstract")throw new dn("Cannot register abstract class");let m=u?l.blotName:f?l.attrName:void 0;return this.types[m]=l,f?typeof l.keyName=="string"&&(this.attributes[l.keyName]=l):u&&(l.className&&(this.classes[l.className]=l),l.tagName&&(Array.isArray(l.tagName)?l.tagName=l.tagName.map(y=>y.toUpperCase()):l.tagName=l.tagName.toUpperCase(),(Array.isArray(l.tagName)?l.tagName:[l.tagName]).forEach(y=>{(this.tags[y]==null||l.className==null)&&(this.tags[y]=l)}))),l})}};xp.blots=new WeakMap;let _s=xp;function Ep(o,i){return(o.getAttribute("class")||"").split(/\s+/).filter(l=>l.indexOf(`${i}-`)===0)}a(Ep,"Ve");let fn=class extends xr{static{a(this,"Ke")}static keys(o){return(o.getAttribute("class")||"").split(/\s+/).map(i=>i.split("-").slice(0,-1).join("-"))}add(o,i){return!!this.canAdd(o,i)&&(this.remove(o),o.classList.add(`${this.keyName}-${i}`),!0)}remove(o){Ep(o,this.keyName).forEach(i=>{o.classList.remove(i)}),o.classList.length===0&&o.removeAttribute("class")}value(o){let i=(Ep(o,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(o,i)?i:""}};function xu(o){let i=o.split("-"),l=i.slice(1).map(u=>u[0].toUpperCase()+u.slice(1)).join("");return i[0]+l}a(xu,"We");let hi=class extends xr{static{a(this,"Ze")}static keys(o){return(o.getAttribute("style")||"").split(";").map(i=>i.split(":")[0].trim())}add(o,i){return!!this.canAdd(o,i)&&(o.style[xu(this.keyName)]=i,!0)}remove(o){o.style[xu(this.keyName)]="",o.getAttribute("style")||o.removeAttribute("style")}value(o){let i=o.style[xu(this.keyName)];return this.canAdd(o,i)?i:""}},ll=class{static{a(this,"Ge")}constructor(o){this.attributes={},this.domNode=o,this.build()}attribute(o,i){i?o.add(this.domNode,i)&&(o.value(this.domNode)!=null?this.attributes[o.attrName]=o:delete this.attributes[o.attrName]):(o.remove(this.domNode),delete this.attributes[o.attrName])}build(){this.attributes={};let o=_s.find(this.domNode);if(o==null)return;let i=xr.keys(this.domNode),l=fn.keys(this.domNode),u=hi.keys(this.domNode);i.concat(l).concat(u).forEach(f=>{let m=o.scroll.query(f,Ee.ATTRIBUTE);m instanceof xr&&(this.attributes[m.attrName]=m)})}copy(o){Object.keys(this.attributes).forEach(i=>{let l=this.attributes[i].value(this.domNode);o.format(i,l)})}move(o){this.copy(o),Object.keys(this.attributes).forEach(i=>{this.attributes[i].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((o,i)=>(o[i]=this.attributes[i].value(this.domNode),o),{})}},Tp=class{static{a(this,"Xe")}constructor(o,i){this.scroll=o,this.domNode=i,_s.blots.set(i,this),this.prev=null,this.next=null}static create(o){if(this.tagName==null)throw new dn("Blot definition missing tagName");let i,l;return Array.isArray(this.tagName)?(typeof o=="string"?(l=o.toUpperCase(),parseInt(l,10).toString()===l&&(l=parseInt(l,10))):typeof o=="number"&&(l=o),i=typeof l=="number"?document.createElement(this.tagName[l-1]):l&&this.tagName.indexOf(l)>-1?document.createElement(l):document.createElement(this.tagName[0])):i=document.createElement(this.tagName),this.className&&i.classList.add(this.className),i}get statics(){return this.constructor}attach(){}clone(){let o=this.domNode.cloneNode(!1);return this.scroll.create(o)}detach(){this.parent!=null&&this.parent.removeChild(this),_s.blots.delete(this.domNode)}deleteAt(o,i){this.isolate(o,i).remove()}formatAt(o,i,l,u){let f=this.isolate(o,i);if(this.scroll.query(l,Ee.BLOT)!=null&&u)f.wrap(l,u);else if(this.scroll.query(l,Ee.ATTRIBUTE)!=null){let m=this.scroll.create(this.statics.scope);f.wrap(m),m.format(l,u)}}insertAt(o,i,l){let u=l==null?this.scroll.create("text",i):this.scroll.create(i,l),f=this.split(o);this.parent.insertBefore(u,f||void 0)}isolate(o,i){let l=this.split(o);if(l==null)throw new Error("Attempt to isolate at end");return l.split(i),l}length(){return 1}offset(o=this.parent){return this.parent==null||this===o?0:this.parent.children.offset(this)+this.parent.offset(o)}optimize(o){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(o,i){let l=typeof o=="string"?this.scroll.create(o,i):o;return this.parent!=null&&(this.parent.insertBefore(l,this.next||void 0),this.remove()),l}split(o,i){return o===0?this:this.next}update(o,i){}wrap(o,i){let l=typeof o=="string"?this.scroll.create(o,i):o;if(this.parent!=null&&this.parent.insertBefore(l,this.next||void 0),typeof l.appendChild!="function")throw new dn(`Cannot wrap ${o}`);return l.appendChild(this),l}};Tp.blotName="abstract";let Ap=Tp,Sp=class extends Ap{static{a(this,"Ye")}static value(o){return!0}index(o,i){return this.domNode===o||this.domNode.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(i,1):-1}position(o,i){let l=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return o>0&&(l+=1),[this.parent.domNode,l]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Sp.scope=Ee.INLINE_BLOT;let ar=Sp;class Qy{static{a(this,"tn")}constructor(){this.head=null,this.tail=null,this.length=0}append(...i){if(this.insertBefore(i[0],null),i.length>1){let l=i.slice(1);this.append(...l)}}at(i){let l=this.iterator(),u=l();for(;u&&i>0;)i-=1,u=l();return u}contains(i){let l=this.iterator(),u=l();for(;u;){if(u===i)return!0;u=l()}return!1}indexOf(i){let l=this.iterator(),u=l(),f=0;for(;u;){if(u===i)return f;f+=1,u=l()}return-1}insertBefore(i,l){i!=null&&(this.remove(i),i.next=l,l!=null?(i.prev=l.prev,l.prev!=null&&(l.prev.next=i),l.prev=i,l===this.head&&(this.head=i)):this.tail!=null?(this.tail.next=i,i.prev=this.tail,this.tail=i):(i.prev=null,this.head=this.tail=i),this.length+=1)}offset(i){let l=0,u=this.head;for(;u!=null;){if(u===i)return l;l+=u.length(),u=u.next}return-1}remove(i){this.contains(i)&&(i.prev!=null&&(i.prev.next=i.next),i.next!=null&&(i.next.prev=i.prev),i===this.head&&(this.head=i.next),i===this.tail&&(this.tail=i.prev),this.length-=1)}iterator(i=this.head){return()=>{let l=i;return i!=null&&(i=i.next),l}}find(i,l=!1){let u=this.iterator(),f=u();for(;f;){let m=f.length();if(i<m||l&&i===m&&(f.next==null||f.next.length()!==0))return[f,i];i-=m,f=u()}return[null,0]}forEach(i){let l=this.iterator(),u=l();for(;u;)i(u),u=l()}forEachAt(i,l,u){if(l<=0)return;let[f,m]=this.find(i),y=i-m,w=this.iterator(f),k=w();for(;k&&y<i+l;){let z=k.length();i>y?u(k,i-y,Math.min(l,y+z-i)):u(k,0,Math.min(z,i+l-y)),y+=z,k=w()}}map(i){return this.reduce((l,u)=>(l.push(i(u)),l),[])}reduce(i,l){let u=this.iterator(),f=u();for(;f;)l=i(l,f),f=u();return l}}function Np(o,i){let l=i.find(o);if(l)return l;try{return i.create(o)}catch{let u=i.create(Ee.INLINE);return Array.from(o.childNodes).forEach(f=>{u.domNode.appendChild(f)}),o.parentNode&&o.parentNode.replaceChild(u.domNode,o),u.attach(),u}}a(Np,"en");let Cp=class zi extends Ap{static{a(this,"t")}constructor(i,l){super(i,l),this.uiNode=null,this.build()}appendChild(i){this.insertBefore(i)}attach(){super.attach(),this.children.forEach(i=>{i.attach()})}attachUI(i){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=i,zi.uiClass&&this.uiNode.classList.add(zi.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Qy,Array.from(this.domNode.childNodes).filter(i=>i!==this.uiNode).reverse().forEach(i=>{try{let l=Np(i,this.scroll);this.insertBefore(l,this.children.head||void 0)}catch(l){if(l instanceof dn)return;throw l}})}deleteAt(i,l){if(i===0&&l===this.length())return this.remove();this.children.forEachAt(i,l,(u,f,m)=>{u.deleteAt(f,m)})}descendant(i,l=0){let[u,f]=this.children.find(l);return i.blotName==null&&i(u)||i.blotName!=null&&u instanceof i?[u,f]:u instanceof zi?u.descendant(i,f):[null,-1]}descendants(i,l=0,u=Number.MAX_VALUE){let f=[],m=u;return this.children.forEachAt(l,u,(y,w,k)=>{(i.blotName==null&&i(y)||i.blotName!=null&&y instanceof i)&&f.push(y),y instanceof zi&&(f=f.concat(y.descendants(i,w,m))),m-=k}),f}detach(){this.children.forEach(i=>{i.detach()}),super.detach()}enforceAllowedChildren(){let i=!1;this.children.forEach(l=>{i||this.statics.allowedChildren.some(u=>l instanceof u)||(l.statics.scope===Ee.BLOCK_BLOT?(l.next!=null&&this.splitAfter(l),l.prev!=null&&this.splitAfter(l.prev),l.parent.unwrap(),i=!0):l instanceof zi?l.unwrap():l.remove())})}formatAt(i,l,u,f){this.children.forEachAt(i,l,(m,y,w)=>{m.formatAt(y,w,u,f)})}insertAt(i,l,u){let[f,m]=this.children.find(i);if(f)f.insertAt(m,l,u);else{let y=u==null?this.scroll.create("text",l):this.scroll.create(l,u);this.appendChild(y)}}insertBefore(i,l){i.parent!=null&&i.parent.children.remove(i);let u=null;this.children.insertBefore(i,l||null),i.parent=this,l!=null&&(u=l.domNode),(this.domNode.parentNode!==i.domNode||this.domNode.nextSibling!==u)&&this.domNode.insertBefore(i.domNode,u),i.attach()}length(){return this.children.reduce((i,l)=>i+l.length(),0)}moveChildren(i,l){this.children.forEach(u=>{i.insertBefore(u,l)})}optimize(i){if(super.optimize(i),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let l=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(l)}else this.remove()}path(i,l=!1){let[u,f]=this.children.find(i,l),m=[[this,i]];return u instanceof zi?m.concat(u.path(f,l)):(u!=null&&m.push([u,f]),m)}removeChild(i){this.children.remove(i)}replaceWith(i,l){let u=typeof i=="string"?this.scroll.create(i,l):i;return u instanceof zi&&this.moveChildren(u),super.replaceWith(u)}split(i,l=!1){if(!l){if(i===0)return this;if(i===this.length())return this.next}let u=this.clone();return this.parent&&this.parent.insertBefore(u,this.next||void 0),this.children.forEachAt(i,this.length(),(f,m,y)=>{let w=f.split(m,l);w!=null&&u.appendChild(w)}),u}splitAfter(i){let l=this.clone();for(;i.next!=null;)l.appendChild(i.next);return this.parent&&this.parent.insertBefore(l,this.next||void 0),l}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(i,l){let u=[],f=[];i.forEach(m=>{m.target===this.domNode&&m.type==="childList"&&(u.push(...m.addedNodes),f.push(...m.removedNodes))}),f.forEach(m=>{if(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let y=this.scroll.find(m);y!=null&&(y.domNode.parentNode==null||y.domNode.parentNode===this.domNode)&&y.detach()}),u.filter(m=>m.parentNode===this.domNode&&m!==this.uiNode).sort((m,y)=>m===y?0:m.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(m=>{let y=null;m.nextSibling!=null&&(y=this.scroll.find(m.nextSibling));let w=Np(m,this.scroll);(w.next!==y||w.next==null)&&(w.parent!=null&&w.parent.removeChild(this),this.insertBefore(w,y||void 0))}),this.enforceAllowedChildren()}};Cp.uiClass="";let pn=Cp,qs=class Io extends pn{static{a(this,"t")}static create(i){return super.create(i)}static formats(i,l){let u=l.query(Io.blotName);if(u==null||i.tagName!==u.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return i.tagName.toLowerCase()}}constructor(i,l){super(i,l),this.attributes=new ll(this.domNode)}format(i,l){if(i!==this.statics.blotName||l){let u=this.scroll.query(i,Ee.INLINE);if(u==null)return;u instanceof xr?this.attributes.attribute(u,l):l&&(i!==this.statics.blotName||this.formats()[i]!==l)&&this.replaceWith(i,l)}else this.children.forEach(u=>{u instanceof Io||(u=u.wrap(Io.blotName,!0)),this.attributes.copy(u)}),this.unwrap()}formats(){let i=this.attributes.values(),l=this.statics.formats(this.domNode,this.scroll);return l!=null&&(i[this.statics.blotName]=l),i}formatAt(i,l,u,f){this.formats()[u]!=null||this.scroll.query(u,Ee.ATTRIBUTE)?this.isolate(i,l).format(u,f):super.formatAt(i,l,u,f)}optimize(i){super.optimize(i);let l=this.formats();if(Object.keys(l).length===0)return this.unwrap();let u=this.next;u instanceof Io&&u.prev===this&&function(f,m){if(Object.keys(f).length!==Object.keys(m).length)return!1;for(let y in f)if(f[y]!==m[y])return!1;return!0}(l,u.formats())&&(u.moveChildren(this),u.remove())}replaceWith(i,l){let u=super.replaceWith(i,l);return this.attributes.copy(u),u}update(i,l){super.update(i,l),i.some(u=>u.target===this.domNode&&u.type==="attributes")&&this.attributes.build()}wrap(i,l){let u=super.wrap(i,l);return u instanceof Io&&this.attributes.move(u),u}};qs.allowedChildren=[qs,ar],qs.blotName="inline",qs.scope=Ee.INLINE_BLOT,qs.tagName="SPAN";let Eu=qs,Ms=class up extends pn{static{a(this,"t")}static create(i){return super.create(i)}static formats(i,l){let u=l.query(up.blotName);if(u==null||i.tagName!==u.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return i.tagName.toLowerCase()}}constructor(i,l){super(i,l),this.attributes=new ll(this.domNode)}format(i,l){let u=this.scroll.query(i,Ee.BLOCK);u!=null&&(u instanceof xr?this.attributes.attribute(u,l):i!==this.statics.blotName||l?l&&(i!==this.statics.blotName||this.formats()[i]!==l)&&this.replaceWith(i,l):this.replaceWith(up.blotName))}formats(){let i=this.attributes.values(),l=this.statics.formats(this.domNode,this.scroll);return l!=null&&(i[this.statics.blotName]=l),i}formatAt(i,l,u,f){this.scroll.query(u,Ee.BLOCK)!=null?this.format(u,f):super.formatAt(i,l,u,f)}insertAt(i,l,u){if(u==null||this.scroll.query(l,Ee.INLINE)!=null)super.insertAt(i,l,u);else{let f=this.split(i);if(f==null)throw new Error("Attempt to insertAt after block boundaries");{let m=this.scroll.create(l,u);f.parent.insertBefore(m,f)}}}replaceWith(i,l){let u=super.replaceWith(i,l);return this.attributes.copy(u),u}update(i,l){super.update(i,l),i.some(u=>u.target===this.domNode&&u.type==="attributes")&&this.attributes.build()}};Ms.blotName="block",Ms.scope=Ee.BLOCK_BLOT,Ms.tagName="P",Ms.allowedChildren=[Eu,Ms,ar];let Bo=Ms,Tu=class extends pn{static{a(this,"cn")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(o,i){super.deleteAt(o,i),this.enforceAllowedChildren()}formatAt(o,i,l,u){super.formatAt(o,i,l,u),this.enforceAllowedChildren()}insertAt(o,i,l){super.insertAt(o,i,l),this.enforceAllowedChildren()}optimize(o){super.optimize(o),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Tu.blotName="container",Tu.scope=Ee.BLOCK_BLOT;let cl=Tu,Vr=class extends ar{static{a(this,"hn")}static formats(o,i){}format(o,i){super.formatAt(0,this.length(),o,i)}formatAt(o,i,l,u){o===0&&i===this.length()?this.format(l,u):super.formatAt(o,i,l,u)}formats(){return this.statics.formats(this.domNode,this.scroll)}},ew={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Is=class extends pn{static{a(this,"fn")}constructor(o,i){super(null,i),this.registry=o,this.scroll=this,this.build(),this.observer=new MutationObserver(l=>{this.update(l)}),this.observer.observe(this.domNode,ew),this.attach()}create(o,i){return this.registry.create(this,o,i)}find(o,i=!1){let l=this.registry.find(o,i);return l?l.scroll===this?l:i?this.find(l.scroll.domNode.parentNode,!0):null:null}query(o,i=Ee.ANY){return this.registry.query(o,i)}register(...o){return this.registry.register(...o)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(o,i){this.update(),o===0&&i===this.length()?this.children.forEach(l=>{l.remove()}):super.deleteAt(o,i)}formatAt(o,i,l,u){this.update(),super.formatAt(o,i,l,u)}insertAt(o,i,l){this.update(),super.insertAt(o,i,l)}optimize(o=[],i={}){super.optimize(i);let l=i.mutationsMap||new WeakMap,u=Array.from(this.observer.takeRecords());for(;u.length>0;)o.push(u.pop());let f=a((w,k=!0)=>{w==null||w===this||w.domNode.parentNode!=null&&(l.has(w.domNode)||l.set(w.domNode,[]),k&&f(w.parent))},"s"),m=a(w=>{l.has(w.domNode)&&(w instanceof pn&&w.children.forEach(m),l.delete(w.domNode),w.optimize(i))},"i"),y=o;for(let w=0;y.length>0;w+=1){if(w>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(y.forEach(k=>{let z=this.find(k.target,!0);z!=null&&(z.domNode===k.target&&(k.type==="childList"?(f(this.find(k.previousSibling,!1)),Array.from(k.addedNodes).forEach(Q=>{let ge=this.find(Q,!1);f(ge,!1),ge instanceof pn&&ge.children.forEach(be=>{f(be,!1)})})):k.type==="attributes"&&f(z.prev)),f(z))}),this.children.forEach(m),y=Array.from(this.observer.takeRecords()),u=y.slice();u.length>0;)o.push(u.pop())}}update(o,i={}){o=o||this.observer.takeRecords();let l=new WeakMap;o.map(u=>{let f=this.find(u.target,!0);return f==null?null:l.has(f.domNode)?(l.get(f.domNode).push(u),null):(l.set(f.domNode,[u]),f)}).forEach(u=>{u!=null&&u!==this&&l.has(u.domNode)&&u.update(l.get(u.domNode)||[],i)}),i.mutationsMap=l,l.has(this.domNode)&&super.update(l.get(this.domNode),i),this.optimize(o,i)}};Is.blotName="scroll",Is.defaultChild=Bo,Is.allowedChildren=[Bo,cl],Is.scope=Ee.BLOCK_BLOT,Is.tagName="DIV";let Au=Is,Su=class Iy extends ar{static{a(this,"t")}static create(i){return document.createTextNode(i)}static value(i){return i.data}constructor(i,l){super(i,l),this.text=this.statics.value(this.domNode)}deleteAt(i,l){this.domNode.data=this.text=this.text.slice(0,i)+this.text.slice(i+l)}index(i,l){return this.domNode===i?l:-1}insertAt(i,l,u){u==null?(this.text=this.text.slice(0,i)+l+this.text.slice(i),this.domNode.data=this.text):super.insertAt(i,l,u)}length(){return this.text.length}optimize(i){super.optimize(i),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Iy&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(i,l=!1){return[this.domNode,i]}split(i,l=!1){if(!l){if(i===0)return this;if(i===this.length())return this.next}let u=this.scroll.create(this.domNode.splitText(i));return this.parent.insertBefore(u,this.next||void 0),this.text=this.statics.value(this.domNode),u}update(i,l){i.some(u=>u.type==="characterData"&&u.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Su.blotName="text",Su.scope=Ee.INLINE_BLOT;let ul=Su;var me=c(660);let tw=a(function(o,i){for(var l=-1,u=o==null?0:o.length;++l<u&&i(o[l],l,o)!==!1;);return o},"yn"),rw=fe(Object.keys,Object);var nw=Object.prototype.hasOwnProperty;let iw=a(function(o){if(!Ht(o))return rw(o);var i=[];for(var l in Object(o))nw.call(o,l)&&l!="constructor"&&i.push(l);return i},"Nn"),Nu=a(function(o){return Yr(o)?ol(o):iw(o)},"wn"),sw=a(function(o,i){return o&&ze(i,Nu(i),o)},"En"),ow=a(function(o,i){return o&&ze(i,kr(i),o)},"An"),aw=a(function(o,i){for(var l=-1,u=o==null?0:o.length,f=0,m=[];++l<u;){var y=o[l];i(y,l,o)&&(m[f++]=y)}return m},"qn"),Lp=a(function(){return[]},"kn");var lw=Object.prototype.propertyIsEnumerable,Op=Object.getOwnPropertySymbols;let Cu=Op?function(o){return o==null?[]:(o=Object(o),aw(Op(o),function(i){return lw.call(o,i)}))}:Lp,cw=a(function(o,i){return ze(o,Cu(o),i)},"Tn"),kp=a(function(o,i){for(var l=-1,u=i.length,f=o.length;++l<u;)o[f+l]=i[l];return o},"Sn"),_p=Object.getOwnPropertySymbols?function(o){for(var i=[];o;)kp(i,Cu(o)),o=Ne(o);return i}:Lp,uw=a(function(o,i){return ze(o,_p(o),i)},"jn"),qp=a(function(o,i,l){var u=i(o);return Et(o)?u:kp(u,l(o))},"Rn"),Lu=a(function(o){return qp(o,Nu,Cu)},"In"),hw=a(function(o){return qp(o,kr,_p)},"Mn"),Ou=Ce(ee,"DataView"),ku=Ce(ee,"Promise"),_u=Ce(ee,"Set"),qu=Ce(ee,"WeakMap");var Mp="[object Map]",Ip="[object Promise]",Dp="[object Set]",Rp="[object WeakMap]",Pp="[object DataView]",dw=Fe(Ou),fw=Fe(He),pw=Fe(ku),mw=Fe(_u),gw=Fe(qu),Yi=I;(Ou&&Yi(new Ou(new ArrayBuffer(1)))!=Pp||He&&Yi(new He)!=Mp||ku&&Yi(ku.resolve())!=Ip||_u&&Yi(new _u)!=Dp||qu&&Yi(new qu)!=Rp)&&(Yi=a(function(o){var i=I(o),l=i=="[object Object]"?o.constructor:void 0,u=l?Fe(l):"";if(u)switch(u){case dw:return Pp;case fw:return Mp;case pw:return Ip;case mw:return Dp;case gw:return Rp}return i},"Qn"));let Fo=Yi;var bw=Object.prototype.hasOwnProperty;let vw=a(function(o){var i=o.length,l=new o.constructor(i);return i&&typeof o[0]=="string"&&bw.call(o,"index")&&(l.index=o.index,l.input=o.input),l},"tr"),yw=a(function(o,i){var l=i?te(o.buffer):o.buffer;return new o.constructor(l,o.byteOffset,o.byteLength)},"er");var ww=/\w*$/;let xw=a(function(o){var i=new o.constructor(o.source,ww.exec(o));return i.lastIndex=o.lastIndex,i},"rr");var jp=_?_.prototype:void 0,Bp=jp?jp.valueOf:void 0;let Ew=a(function(o){return Bp?Object(Bp.call(o)):{}},"or"),Tw=a(function(o,i,l){var u=o.constructor;switch(i){case"[object ArrayBuffer]":return te(o);case"[object Boolean]":case"[object Date]":return new u(+o);case"[object DataView]":return yw(o,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return oe(o,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(o);case"[object RegExp]":return xw(o);case"[object Symbol]":return Ew(o)}},"lr"),Aw=a(function(o){return _t(o)&&Fo(o)=="[object Map]"},"ar");var Fp=pe&&pe.isMap;let Sw=Fp?Ke(Fp):Aw,Nw=a(function(o){return _t(o)&&Fo(o)=="[object Set]"},"hr");var Hp=pe&&pe.isSet;let Cw=Hp?Ke(Hp):Nw;var Up="[object Arguments]",Vp="[object Function]",zp="[object Object]",gt={};gt[Up]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object DataView]"]=gt["[object Boolean]"]=gt["[object Date]"]=gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Map]"]=gt["[object Number]"]=gt[zp]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object Symbol]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Error]"]=gt[Vp]=gt["[object WeakMap]"]=!1;let Lw=a(function o(i,l,u,f,m,y){var w,k=1&l,z=2&l,Q=4&l;if(u&&(w=m?u(i,f,m,y):u(i)),w!==void 0)return w;if(!C(i))return i;var ge=Et(i);if(ge){if(w=vw(i),!k)return Le(i,w)}else{var be=Fo(i),Se=be==Vp||be=="[object GeneratorFunction]";if(R(i))return M(i,k);if(be==zp||be==Up||Se&&!m){if(w=z||Se?{}:Pt(i),!k)return z?uw(i,ow(w,i)):cw(i,sw(w,i))}else{if(!gt[be])return m?i:{};w=Tw(i,be,k)}}y||(y=new Yt);var Ae=y.get(i);if(Ae)return Ae;y.set(i,w),Cw(i)?i.forEach(function(ht){w.add(o(ht,l,u,ht,i,y))}):Sw(i)&&i.forEach(function(ht,nr){w.set(nr,o(ht,l,u,nr,i,y))});var De=ge?void 0:(Q?z?hw:Lu:z?kr:Nu)(i);return tw(De||i,function(ht,nr){De&&(ht=i[nr=ht]),or(w,nr,o(ht,l,u,nr,i,y))}),w},"t"),Ds=a(function(o){return Lw(o,5)},"vr"),Ow=a(function(o){return this.__data__.set(o,"__lodash_hash_undefined__"),this},"xr"),kw=a(function(o){return this.__data__.has(o)},"Nr");function hl(o){var i=-1,l=o==null?0:o.length;for(this.__data__=new nt;++i<l;)this.add(o[i])}a(hl,"wr"),hl.prototype.add=hl.prototype.push=Ow,hl.prototype.has=kw;let _w=hl,qw=a(function(o,i){for(var l=-1,u=o==null?0:o.length;++l<u;)if(i(o[l],l,o))return!0;return!1},"Ar"),Mw=a(function(o,i){return o.has(i)},"qr"),$p=a(function(o,i,l,u,f,m){var y=1&l,w=o.length,k=i.length;if(w!=k&&!(y&&k>w))return!1;var z=m.get(o),Q=m.get(i);if(z&&Q)return z==i&&Q==o;var ge=-1,be=!0,Se=2&l?new _w:void 0;for(m.set(o,i),m.set(i,o);++ge<w;){var Ae=o[ge],De=i[ge];if(u)var ht=y?u(De,Ae,ge,i,o,m):u(Ae,De,ge,o,i,m);if(ht!==void 0){if(ht)continue;be=!1;break}if(Se){if(!qw(i,function(nr,yn){if(!Mw(Se,yn)&&(Ae===nr||f(Ae,nr,l,u,m)))return Se.push(yn)})){be=!1;break}}else if(Ae!==De&&!f(Ae,De,l,u,m)){be=!1;break}}return m.delete(o),m.delete(i),be},"kr"),Iw=a(function(o){var i=-1,l=Array(o.size);return o.forEach(function(u,f){l[++i]=[f,u]}),l},"_r"),Dw=a(function(o){var i=-1,l=Array(o.size);return o.forEach(function(u){l[++i]=u}),l},"Lr");var Wp=_?_.prototype:void 0,Mu=Wp?Wp.valueOf:void 0;let Rw=a(function(o,i,l,u,f,m,y){switch(l){case"[object DataView]":if(o.byteLength!=i.byteLength||o.byteOffset!=i.byteOffset)return!1;o=o.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(o.byteLength!=i.byteLength||!m(new H(o),new H(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+o,+i);case"[object Error]":return o.name==i.name&&o.message==i.message;case"[object RegExp]":case"[object String]":return o==i+"";case"[object Map]":var w=Iw;case"[object Set]":var k=1&u;if(w||(w=Dw),o.size!=i.size&&!k)return!1;var z=y.get(o);if(z)return z==i;u|=2,y.set(o,i);var Q=$p(w(o),w(i),u,f,m,y);return y.delete(o),Q;case"[object Symbol]":if(Mu)return Mu.call(o)==Mu.call(i)}return!1},"Sr");var Pw=Object.prototype.hasOwnProperty;let jw=a(function(o,i,l,u,f,m){var y=1&l,w=Lu(o),k=w.length;if(k!=Lu(i).length&&!y)return!1;for(var z=k;z--;){var Q=w[z];if(!(y?Q in i:Pw.call(i,Q)))return!1}var ge=m.get(o),be=m.get(i);if(ge&&be)return ge==i&&be==o;var Se=!0;m.set(o,i),m.set(i,o);for(var Ae=y;++z<k;){var De=o[Q=w[z]],ht=i[Q];if(u)var nr=y?u(ht,De,Q,i,o,m):u(De,ht,Q,o,i,m);if(!(nr===void 0?De===ht||f(De,ht,l,u,m):nr)){Se=!1;break}Ae||(Ae=Q=="constructor")}if(Se&&!Ae){var yn=o.constructor,vi=i.constructor;yn==vi||!("constructor"in o)||!("constructor"in i)||typeof yn=="function"&&yn instanceof yn&&typeof vi=="function"&&vi instanceof vi||(Se=!1)}return m.delete(o),m.delete(i),Se},"jr");var Kp="[object Arguments]",Gp="[object Array]",dl="[object Object]",Yp=Object.prototype.hasOwnProperty;let Bw=a(function(o,i,l,u,f,m){var y=Et(o),w=Et(i),k=y?Gp:Fo(o),z=w?Gp:Fo(i),Q=(k=k==Kp?dl:k)==dl,ge=(z=z==Kp?dl:z)==dl,be=k==z;if(be&&R(o)){if(!R(i))return!1;y=!0,Q=!1}if(be&&!Q)return m||(m=new Yt),y||Qe(o)?$p(o,i,l,u,f,m):Rw(o,i,k,l,u,f,m);if(!(1&l)){var Se=Q&&Yp.call(o,"__wrapped__"),Ae=ge&&Yp.call(i,"__wrapped__");if(Se||Ae){var De=Se?o.value():o,ht=Ae?i.value():i;return m||(m=new Yt),f(De,ht,l,u,m)}}return!!be&&(m||(m=new Yt),jw(o,i,l,u,f,m))},"Ur"),Fw=a(function o(i,l,u,f,m){return i===l||(i==null||l==null||!_t(i)&&!_t(l)?i!=i&&l!=l:Bw(i,l,u,f,o,m))},"t"),Iu=a(function(o,i){return Fw(o,i)},"Pr");class Du extends Vr{static{a(this,"zr")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Du.blotName="break",Du.tagName="BR";let Un=Du;class mn extends ul{static{a(this,"Fr")}}function fl(o){return o.replace(/[&<>"']/g,i=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[i])}a(fl,"$r");class di extends Eu{static{a(this,"Vr")}static allowedChildren=[di,Un,Vr,mn];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(i,l){let u=di.order.indexOf(i),f=di.order.indexOf(l);return u>=0||f>=0?u-f:i===l?0:i<l?-1:1}formatAt(i,l,u,f){if(di.compare(this.statics.blotName,u)<0&&this.scroll.query(u,Ee.BLOT)){let m=this.isolate(i,l);f&&m.wrap(u,f)}else super.formatAt(i,l,u,f)}optimize(i){if(super.optimize(i),this.parent instanceof di&&di.compare(this.statics.blotName,this.parent.statics.blotName)>0){let l=this.parent.isolate(this.offset(),this.length());this.moveChildren(l),l.wrap(this)}}}let fi=di;class rr extends Bo{static{a(this,"Wr")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=Zp(this)),this.cache.delta}deleteAt(i,l){super.deleteAt(i,l),this.cache={}}formatAt(i,l,u,f){l<=0||(this.scroll.query(u,Ee.BLOCK)?i+l===this.length()&&this.format(u,f):super.formatAt(i,Math.min(l,this.length()-i-1),u,f),this.cache={})}insertAt(i,l,u){if(u!=null)return super.insertAt(i,l,u),void(this.cache={});if(l.length===0)return;let f=l.split(`
`),m=f.shift();m.length>0&&(i<this.length()-1||this.children.tail==null?super.insertAt(Math.min(i,this.length()-1),m):this.children.tail.insertAt(this.children.tail.length(),m),this.cache={});let y=this;f.reduce((w,k)=>(y=y.split(w,!0),y.insertAt(0,k),k.length),i+m.length)}insertBefore(i,l){let{head:u}=this.children;super.insertBefore(i,l),u instanceof Un&&u.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(i,l){super.moveChildren(i,l),this.cache={}}optimize(i){super.optimize(i),this.cache={}}path(i){return super.path(i,!0)}removeChild(i){super.removeChild(i),this.cache={}}split(i){let l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(l&&(i===0||i>=this.length()-1)){let f=this.clone();return i===0?(this.parent.insertBefore(f,this),this):(this.parent.insertBefore(f,this.next),f)}let u=super.split(i,l);return this.cache={},u}}rr.blotName="block",rr.tagName="P",rr.defaultChild=Un,rr.allowedChildren=[Un,fi,Vr,mn];class Zr extends Vr{static{a(this,"Zr")}attach(){super.attach(),this.attributes=new ll(this.domNode)}delta(){return new me().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(i,l){let u=this.scroll.query(i,Ee.BLOCK_ATTRIBUTE);u!=null&&this.attributes.attribute(u,l)}formatAt(i,l,u,f){this.format(u,f)}insertAt(i,l,u){if(u!=null)return void super.insertAt(i,l,u);let f=l.split(`
`),m=f.pop(),y=f.map(k=>{let z=this.scroll.create(rr.blotName);return z.insertAt(0,k),z}),w=this.split(i);y.forEach(k=>{this.parent.insertBefore(k,w)}),m&&this.parent.insertBefore(this.scroll.create("text",m),w)}}function Zp(o){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return o.descendants(ar).reduce((l,u)=>u.length()===0?l:l.insert(u.value(),Xr(u,{},i)),new me).insert(`
`,Xr(o))}a(Zp,"Gr");function Xr(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return o==null?i:("formats"in o&&typeof o.formats=="function"&&(i={...i,...o.formats()},l&&delete i["code-token"]),o.parent==null||o.parent.statics.blotName==="scroll"||o.parent.statics.scope!==o.statics.scope?i:Xr(o.parent,i,l))}a(Xr,"Xr"),Zr.scope=Ee.BLOCK_BLOT;class pi extends Vr{static{a(this,"Qr")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(i,l,u){super(i,l),this.selection=u,this.textNode=document.createTextNode(pi.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(i,l){if(this.savedLength!==0)return void super.format(i,l);let u=this,f=0;for(;u!=null&&u.statics.scope!==Ee.BLOCK_BLOT;)f+=u.offset(u.parent),u=u.parent;u!=null&&(this.savedLength=pi.CONTENTS.length,u.optimize(),u.formatAt(f,pi.CONTENTS.length,i,l),this.savedLength=0)}index(i,l){return i===this.textNode?0:super.index(i,l)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let i=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let l=this.prev instanceof mn?this.prev:null,u=l?l.length():0,f=this.next instanceof mn?this.next:null,m=f?f.text:"",{textNode:y}=this,w=y.data.split(pi.CONTENTS).join(""),k;if(y.data=pi.CONTENTS,l)k=l,(w||f)&&(l.insertAt(l.length(),w+m),f&&f.remove());else if(f)k=f,f.insertAt(0,w);else{let z=document.createTextNode(w);k=this.scroll.create(z),this.parent.insertBefore(k,this)}if(this.remove(),i){let z=a((be,Se)=>l&&be===l.domNode?Se:be===y?u+Se-1:f&&be===f.domNode?u+w.length+Se:null,"s"),Q=z(i.start.node,i.start.offset),ge=z(i.end.node,i.end.offset);if(Q!==null&&ge!==null)return{startNode:k.domNode,startOffset:Q,endNode:k.domNode,endOffset:ge}}return null}update(i,l){if(i.some(u=>u.type==="characterData"&&u.target===this.textNode)){let u=this.restore();u&&(l.range=u)}}optimize(i){super.optimize(i);let{parent:l}=this;for(;l;){if(l.domNode.tagName==="A"){this.savedLength=pi.CONTENTS.length,l.isolate(this.offset(l),this.length()).unwrap(),this.savedLength=0;break}l=l.parent}}value(){return""}}let pl=pi;var Hw=c(228);let Ru=new WeakMap,Pu=["error","warn","log","info"],ju="warn";function Xp(o){if(ju&&Pu.indexOf(o)<=Pu.indexOf(ju)){for(var i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];console[o](...l)}}a(Xp,"rs");function Bu(o){return Pu.reduce((i,l)=>(i[l]=Xp.bind(console,l,o),i),{})}a(Bu,"ss"),Bu.level=o=>{ju=o},Xp.level=Bu.level;let Zi=Bu,Fu=Zi("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(o=>{document.addEventListener(o,function(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];Array.from(document.querySelectorAll(".ql-container")).forEach(f=>{let m=Ru.get(f);m&&m.emitter&&m.emitter.handleDOM(...l)})})});let Te=class extends Hw{static{a(this,"ls")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Fu.error)}emit(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return Fu.log.call(Fu,...i),super.emit(...i)}handleDOM(o){for(var i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];(this.domListeners[o.type]||[]).forEach(f=>{let{node:m,handler:y}=f;(o.target===m||m.contains(o.target))&&y(o,...l)})}listenDOM(o,i,l){this.domListeners[o]||(this.domListeners[o]=[]),this.domListeners[o].push({node:i,handler:l})}},Hu=Zi("quill:selection");class mi{static{a(this,"cs")}constructor(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=i,this.length=l}}function Uu(o,i){try{i.parentNode}catch{return!1}return o.contains(i)}a(Uu,"us");let Uw=class{static{a(this,"hs")}constructor(o,i){this.emitter=i,this.scroll=o,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new mi(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,Te.sources.USER),1)}),this.emitter.on(Te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let l=this.getNativeRange();l!=null&&l.start.node!==this.cursor.textNode&&this.emitter.once(Te.events.SCROLL_UPDATE,(u,f)=>{try{this.root.contains(l.start.node)&&this.root.contains(l.end.node)&&this.setNativeRange(l.start.node,l.start.offset,l.end.node,l.end.offset);let m=f.some(y=>y.type==="characterData"||y.type==="childList"||y.type==="attributes"&&y.target===this.root);this.update(m?Te.sources.SILENT:u)}catch{}})}),this.emitter.on(Te.events.SCROLL_OPTIMIZE,(l,u)=>{if(u.range){let{startNode:f,startOffset:m,endNode:y,endOffset:w}=u.range;this.setNativeRange(f,m,y,w),this.update(Te.sources.SILENT)}}),this.update(Te.sources.SILENT)}handleComposition(){this.emitter.on(Te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let o=this.cursor.restore();if(!o)return;setTimeout(()=>{this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(o,i){this.scroll.update();let l=this.getNativeRange();if(l!=null&&l.native.collapsed&&!this.scroll.query(o,Ee.BLOCK)){if(l.start.node!==this.cursor.textNode){let u=this.scroll.find(l.start.node,!1);if(u==null)return;if(u instanceof ar){let f=u.split(l.start.offset);u.parent.insertBefore(this.cursor,f)}else u.insertBefore(this.cursor,l.start.node);this.cursor.attach()}this.cursor.format(o,i),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=this.scroll.length(),u;o=Math.min(o,l-1),i=Math.min(o+i,l-1)-o;let[f,m]=this.scroll.leaf(o);if(f==null)return null;if(i>0&&m===f.length()){let[z]=this.scroll.leaf(o+1);if(z){let[Q]=this.scroll.line(o),[ge]=this.scroll.line(o+1);Q===ge&&(f=z,m=0)}}[u,m]=f.position(m,!0);let y=document.createRange();if(i>0)return y.setStart(u,m),[f,m]=this.scroll.leaf(o+i),f==null?null:([u,m]=f.position(m,!0),y.setEnd(u,m),y.getBoundingClientRect());let w,k="left";if(u instanceof Text){if(!u.data.length)return null;m<u.data.length?(y.setStart(u,m),y.setEnd(u,m+1)):(y.setStart(u,m-1),y.setEnd(u,m),k="right"),w=y.getBoundingClientRect()}else{if(!(f.domNode instanceof Element))return null;w=f.domNode.getBoundingClientRect(),m>0&&(k="right")}return{bottom:w.top+w.height,height:w.height,left:w[k],right:w[k],top:w.top,width:0}}getNativeRange(){let o=document.getSelection();if(o==null||o.rangeCount<=0)return null;let i=o.getRangeAt(0);if(i==null)return null;let l=this.normalizeNative(i);return Hu.info("getNativeRange",l),l}getRange(){let o=this.scroll.domNode;if("isConnected"in o&&!o.isConnected)return[null,null];let i=this.getNativeRange();return i==null?[null,null]:[this.normalizedToRange(i),i]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Uu(this.root,document.activeElement)}normalizedToRange(o){let i=[[o.start.node,o.start.offset]];o.native.collapsed||i.push([o.end.node,o.end.offset]);let l=i.map(m=>{let[y,w]=m,k=this.scroll.find(y,!0),z=k.offset(this.scroll);return w===0?z:k instanceof ar?z+k.index(y,w):z+k.length()}),u=Math.min(Math.max(...l),this.scroll.length()-1),f=Math.min(u,...l);return new mi(f,u-f)}normalizeNative(o){if(!Uu(this.root,o.startContainer)||!o.collapsed&&!Uu(this.root,o.endContainer))return null;let i={start:{node:o.startContainer,offset:o.startOffset},end:{node:o.endContainer,offset:o.endOffset},native:o};return[i.start,i.end].forEach(l=>{let{node:u,offset:f}=l;for(;!(u instanceof Text)&&u.childNodes.length>0;)if(u.childNodes.length>f)u=u.childNodes[f],f=0;else{if(u.childNodes.length!==f)break;u=u.lastChild,f=u instanceof Text?u.data.length:u.childNodes.length>0?u.childNodes.length:u.childNodes.length+1}l.node=u,l.offset=f}),i}rangeToNative(o){let i=this.scroll.length(),l=a((u,f)=>{u=Math.min(i-1,u);let[m,y]=this.scroll.leaf(u);return m?m.position(y,f):[null,-1]},"n");return[...l(o.index,!1),...l(o.index+o.length,!0)]}setNativeRange(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i,f=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(Hu.info("setNativeRange",o,i,l,u),o!=null&&(this.root.parentNode==null||o.parentNode==null||l.parentNode==null))return;let m=document.getSelection();if(m!=null)if(o!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:y}=this.getNativeRange()||{};if(y==null||f||o!==y.startContainer||i!==y.startOffset||l!==y.endContainer||u!==y.endOffset){o instanceof Element&&o.tagName==="BR"&&(i=Array.from(o.parentNode.childNodes).indexOf(o),o=o.parentNode),l instanceof Element&&l.tagName==="BR"&&(u=Array.from(l.parentNode.childNodes).indexOf(l),l=l.parentNode);let w=document.createRange();w.setStart(o,i),w.setEnd(l,u),m.removeAllRanges(),m.addRange(w)}}else m.removeAllRanges(),this.root.blur()}setRange(o){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;if(typeof i=="string"&&(l=i,i=!1),Hu.info("setRange",o),o!=null){let u=this.rangeToNative(o);this.setNativeRange(...u,i)}else this.setNativeRange(null);this.update(l)}update(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER,i=this.lastRange,[l,u]=this.getRange();if(this.lastRange=l,this.lastNative=u,this.lastRange!=null&&(this.savedRange=this.lastRange),!Iu(i,this.lastRange)){if(!this.composing&&u!=null&&u.native.collapsed&&u.start.node!==this.cursor.textNode){let m=this.cursor.restore();m&&this.setNativeRange(m.startNode,m.startOffset,m.endNode,m.endOffset)}let f=[Te.events.SELECTION_CHANGE,Ds(this.lastRange),Ds(i),o];this.emitter.emit(Te.events.EDITOR_CHANGE,...f),o!==Te.sources.SILENT&&this.emitter.emit(...f)}}},Vw=/^[ -~]*$/;function Rs(o,i,l){if(o.length===0){let[Se]=Vu(l.pop());return i<=0?`</li></${Se}>`:`</li></${Se}>${Rs([],i-1,l)}`}let[{child:u,offset:f,length:m,indent:y,type:w},...k]=o,[z,Q]=Vu(w);if(y>i)return l.push(w),y===i+1?`<${z}><li${Q}>${Ho(u,f,m)}${Rs(k,y,l)}`:`<${z}><li>${Rs(o,i+1,l)}`;let ge=l[l.length-1];if(y===i&&w===ge)return`</li><li${Q}>${Ho(u,f,m)}${Rs(k,y,l)}`;let[be]=Vu(l.pop());return`</li></${be}>${Rs(o,i-1,l)}`}a(Rs,"fs");function Ho(o,i,l){let u=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if("html"in o&&typeof o.html=="function")return o.html(i,l);if(o instanceof mn)return fl(o.value().slice(i,i+l));if(o instanceof pn){if(o.statics.blotName==="list-container"){let z=[];return o.children.forEachAt(i,l,(Q,ge,be)=>{let Se="formats"in Q&&typeof Q.formats=="function"?Q.formats():{};z.push({child:Q,offset:ge,length:be,indent:Se.indent||0,type:Se.list})}),Rs(z,-1,[])}let f=[];if(o.children.forEachAt(i,l,(z,Q,ge)=>{f.push(Ho(z,Q,ge))}),u||o.statics.blotName==="list")return f.join("");let{outerHTML:m,innerHTML:y}=o.domNode,[w,k]=m.split(`>${y}<`);return w==="<table"?`<table style="border: 1px solid #000;">${f.join("")}<${k}`:`${w}>${f.join("")}<${k}`}return o.domNode instanceof Element?o.domNode.outerHTML:""}a(Ho,"ps");function zw(o,i){return Object.keys(i).reduce((l,u)=>{if(o[u]==null)return l;let f=i[u];return f===o[u]?l[u]=f:Array.isArray(f)?f.indexOf(o[u])<0?l[u]=f.concat([o[u]]):l[u]=f:l[u]=[f,o[u]],l},{})}a(zw,"gs");function Vu(o){let i=o==="ordered"?"ol":"ul";switch(o){case"checked":return[i,' data-list="checked"'];case"unchecked":return[i,' data-list="unchecked"'];default:return[i,""]}}a(Vu,"ms");function Jp(o){return o.reduce((i,l)=>{if(typeof l.insert=="string"){let u=l.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return i.insert(u,l.attributes)}return i.push(l)},new me)}a(Jp,"bs");function Qp(o,i){let{index:l,length:u}=o;return new mi(l+i,u)}a(Qp,"ys");let $w=class{static{a(this,"vs")}constructor(o){this.scroll=o,this.delta=this.getDelta()}applyDelta(o){this.scroll.update();let i=this.scroll.length();this.scroll.batchStart();let l=Jp(o),u=new me;return function(f){let m=[];return f.forEach(y=>{typeof y.insert=="string"?y.insert.split(`
`).forEach((w,k)=>{k&&m.push({insert:`
`,attributes:y.attributes}),w&&m.push({insert:w,attributes:y.attributes})}):m.push(y)}),m}(l.ops.slice()).reduce((f,m)=>{let y=me.Op.length(m),w=m.attributes||{},k=!1,z=!1;if(m.insert!=null){if(u.retain(y),typeof m.insert=="string"){let be=m.insert;z=!be.endsWith(`
`)&&(i<=f||!!this.scroll.descendant(Zr,f)[0]),this.scroll.insertAt(f,be);let[Se,Ae]=this.scroll.line(f),De=Ur({},Xr(Se));if(Se instanceof rr){let[ht]=Se.descendant(ar,Ae);ht&&(De=Ur(De,Xr(ht)))}w=me.AttributeMap.diff(De,w)||{}}else if(typeof m.insert=="object"){let be=Object.keys(m.insert)[0];if(be==null)return f;let Se=this.scroll.query(be,Ee.INLINE)!=null;if(Se)(i<=f||this.scroll.descendant(Zr,f)[0])&&(z=!0);else if(f>0){let[Ae,De]=this.scroll.descendant(ar,f-1);Ae instanceof mn?Ae.value()[De]!==`
`&&(k=!0):Ae instanceof Vr&&Ae.statics.scope===Ee.INLINE_BLOT&&(k=!0)}if(this.scroll.insertAt(f,be,m.insert[be]),Se){let[Ae]=this.scroll.descendant(ar,f);if(Ae){let De=Ur({},Xr(Ae));w=me.AttributeMap.diff(De,w)||{}}}}i+=y}else if(u.push(m),m.retain!==null&&typeof m.retain=="object"){let be=Object.keys(m.retain)[0];if(be==null)return f;this.scroll.updateEmbedAt(f,be,m.retain[be])}Object.keys(w).forEach(be=>{this.scroll.formatAt(f,y,be,w[be])});let Q=k?1:0,ge=z?1:0;return i+=Q+ge,u.retain(Q),u.delete(ge),f+y+Q+ge},0),u.reduce((f,m)=>typeof m.delete=="number"?(this.scroll.deleteAt(f,m.delete),f):f+me.Op.length(m),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(l)}deleteText(o,i){return this.scroll.deleteAt(o,i),this.update(new me().retain(o).delete(i))}formatLine(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(l).forEach(f=>{this.scroll.lines(o,Math.max(i,1)).forEach(m=>{m.format(f,l[f])})}),this.scroll.optimize();let u=new me().retain(o).retain(i,Ds(l));return this.update(u)}formatText(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(l).forEach(f=>{this.scroll.formatAt(o,i,f,l[f])});let u=new me().retain(o).retain(i,Ds(l));return this.update(u)}getContents(o,i){return this.delta.slice(o,o+i)}getDelta(){return this.scroll.lines().reduce((o,i)=>o.concat(i.delta()),new me)}getFormat(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=[],u=[];i===0?this.scroll.path(o).forEach(y=>{let[w]=y;w instanceof rr?l.push(w):w instanceof ar&&u.push(w)}):(l=this.scroll.lines(o,i),u=this.scroll.descendants(ar,o,i));let[f,m]=[l,u].map(y=>{let w=y.shift();if(w==null)return{};let k=Xr(w);for(;Object.keys(k).length>0;){let z=y.shift();if(z==null)return k;k=zw(Xr(z),k)}return k});return{...f,...m}}getHTML(o,i){let[l,u]=this.scroll.line(o);if(l){let f=l.length();return!(l.length()>=u+i)||u===0&&i===f?Ho(this.scroll,o,i,!0):Ho(l,u,i,!0)}return""}getText(o,i){return this.getContents(o,i).filter(l=>typeof l.insert=="string").map(l=>l.insert).join("")}insertContents(o,i){let l=Jp(i),u=new me().retain(o).concat(l);return this.scroll.insertContents(o,l),this.update(u)}insertEmbed(o,i,l){return this.scroll.insertAt(o,i,l),this.update(new me().retain(o).insert({[i]:l}))}insertText(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i=i.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(o,i),Object.keys(l).forEach(u=>{this.scroll.formatAt(o,i.length,u,l[u])}),this.update(new me().retain(o).insert(i,Ds(l)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let o=this.scroll.children.head;if(o?.statics.blotName!==rr.blotName)return!1;let i=o;return!(i.children.length>1)&&i.children.head instanceof Un}removeFormat(o,i){let l=this.getText(o,i),[u,f]=this.scroll.line(o+i),m=0,y=new me;u!=null&&(m=u.length()-f,y=u.delta().slice(f,f+m-1).insert(`
`));let w=this.getContents(o,i+m).diff(new me().insert(l).concat(y)),k=new me().retain(o).concat(w);return this.applyDelta(k)}update(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,u=this.delta;if(i.length===1&&i[0].type==="characterData"&&i[0].target.data.match(Vw)&&this.scroll.find(i[0].target)){let f=this.scroll.find(i[0].target),m=Xr(f),y=f.offset(this.scroll),w=i[0].oldValue.replace(pl.CONTENTS,""),k=new me().insert(w),z=new me().insert(f.value()),Q=l&&{oldRange:Qp(l.oldRange,-y),newRange:Qp(l.newRange,-y)};o=new me().retain(y).concat(k.diff(z,Q)).reduce((ge,be)=>be.insert?ge.insert(be.insert,m):ge.push(be),new me),this.delta=u.compose(o)}else this.delta=this.getDelta(),o&&Iu(u.compose(o),this.delta)||(o=u.diff(this.delta,l));return o}},gn=class{static{a(this,"xs")}static DEFAULTS={};constructor(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=o,this.options=i}},ml="\uFEFF",zu=class extends Vr{static{a(this,"ws")}constructor(o,i){super(o,i),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(l=>{this.contentNode.appendChild(l)}),this.leftGuard=document.createTextNode(ml),this.rightGuard=document.createTextNode(ml),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(o,i){return o===this.leftGuard?0:o===this.rightGuard?1:super.index(o,i)}restore(o){let i,l=null,u=o.data.split(ml).join("");if(o===this.leftGuard)if(this.prev instanceof mn){let f=this.prev.length();this.prev.insertAt(f,u),l={startNode:this.prev.domNode,startOffset:f+u.length}}else i=document.createTextNode(u),this.parent.insertBefore(this.scroll.create(i),this),l={startNode:i,startOffset:u.length};else o===this.rightGuard&&(this.next instanceof mn?(this.next.insertAt(0,u),l={startNode:this.next.domNode,startOffset:u.length}):(i=document.createTextNode(u),this.parent.insertBefore(this.scroll.create(i),this.next),l={startNode:i,startOffset:u.length}));return o.data=ml,l}update(o,i){o.forEach(l=>{if(l.type==="characterData"&&(l.target===this.leftGuard||l.target===this.rightGuard)){let u=this.restore(l.target);u&&(i.range=u)}})}},Ww=class{static{a(this,"Es")}isComposing=!1;constructor(o,i){this.scroll=o,this.emitter=i,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",o=>{this.isComposing||this.handleCompositionStart(o)}),this.scroll.domNode.addEventListener("compositionend",o=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(o)})})}handleCompositionStart(o){let i=o.target instanceof Node?this.scroll.find(o.target,!0):null;!i||i instanceof zu||(this.emitter.emit(Te.events.COMPOSITION_BEFORE_START,o),this.scroll.batchStart(),this.emitter.emit(Te.events.COMPOSITION_START,o),this.isComposing=!0)}handleCompositionEnd(o){this.emitter.emit(Te.events.COMPOSITION_BEFORE_END,o),this.scroll.batchEnd(),this.emitter.emit(Te.events.COMPOSITION_END,o),this.isComposing=!1}};class $u{static{a(this,"As")}static DEFAULTS={modules:{}};static themes={default:$u};modules={};constructor(i,l){this.quill=i,this.options=l}init(){Object.keys(this.options.modules).forEach(i=>{this.modules[i]==null&&this.addModule(i)})}addModule(i){let l=this.quill.constructor.import(`modules/${i}`);return this.modules[i]=new l(this.quill,this.options.modules[i]||{}),this.modules[i]}}let gl=$u,Kw=a(o=>{let i=o.getBoundingClientRect(),l="offsetWidth"in o&&Math.abs(i.width)/o.offsetWidth||1,u="offsetHeight"in o&&Math.abs(i.height)/o.offsetHeight||1;return{top:i.top,right:i.left+o.clientWidth*l,bottom:i.top+o.clientHeight*u,left:i.left}},"ks"),bl=a(o=>{let i=parseInt(o,10);return Number.isNaN(i)?0:i},"_s"),em=a((o,i,l,u,f,m)=>o<l&&i>u?0:o<l?-(l-o+f):i>u?i-o>u-l?o+f-l:i-u+m:0,"Ls"),Gw=a((o,i)=>{let l=o.ownerDocument,u=i,f=o;for(;f;){let y=f===l.body,w=y?{top:0,right:window.visualViewport?.width??l.documentElement.clientWidth,bottom:window.visualViewport?.height??l.documentElement.clientHeight,left:0}:Kw(f),k=getComputedStyle(f),z=em(u.left,u.right,w.left,w.right,bl(k.scrollPaddingLeft),bl(k.scrollPaddingRight)),Q=em(u.top,u.bottom,w.top,w.bottom,bl(k.scrollPaddingTop),bl(k.scrollPaddingBottom));if(z||Q)if(y)l.defaultView?.scrollBy(z,Q);else{let{scrollLeft:ge,scrollTop:be}=f;Q&&(f.scrollTop+=Q),z&&(f.scrollLeft+=z);let Se=f.scrollLeft-ge,Ae=f.scrollTop-be;u={left:u.left-Se,top:u.top-Ae,right:u.right-Se,bottom:u.bottom-Ae}}f=y||k.position==="fixed"?null:(m=f).parentElement||m.getRootNode().host||null}var m},"Os"),Yw=["block","break","cursor","inline","scroll","text"],Zw=a((o,i,l)=>{let u=new _s;return Yw.forEach(f=>{let m=i.query(f);m&&u.register(m)}),o.forEach(f=>{let m=i.query(f);m||l.error(`Cannot register "${f}" specified in "formats" config. Are you sure it was registered?`);let y=0;for(;m;)if(u.register(m),m="blotName"in m?m.requiredContainer??null:null,y+=1,y>100){l.error(`Cycle detected in registering blot requiredContainer: "${f}"`);break}}),u},"Ss"),Ps=Zi("quill"),vl=new _s;pn.uiClass="ql-ui";class Y{static{a(this,"Rs")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:vl,theme:"default"};static events=Te.events;static sources=Te.sources;static version="2.0.2";static imports={delta:me,parchment:h,"core/module":gn,"core/theme":gl};static debug(i){i===!0&&(i="log"),Zi.level(i)}static find(i){let l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return Ru.get(i)||vl.find(i,l)}static import(i){return this.imports[i]==null&&Ps.error(`Cannot import ${i}. Are you sure it was registered?`),this.imports[i]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let i=arguments.length<=0?void 0:arguments[0],l=!!(!(arguments.length<=1)&&arguments[1]),u="attrName"in i?i.attrName:i.blotName;typeof u=="string"?this.register(`formats/${u}`,i,l):Object.keys(i).forEach(f=>{this.register(f,i[f],l)})}else{let i=arguments.length<=0?void 0:arguments[0],l=arguments.length<=1?void 0:arguments[1],u=!!(!(arguments.length<=2)&&arguments[2]);this.imports[i]==null||u||Ps.warn(`Overwriting ${i} with`,l),this.imports[i]=l,(i.startsWith("blots/")||i.startsWith("formats/"))&&l&&typeof l!="boolean"&&l.blotName!=="abstract"&&vl.register(l),typeof l.register=="function"&&l.register(vl)}}constructor(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=function(y,w){let k=tm(y);if(!k)throw new Error("Invalid Quill container");let z=!w.theme||w.theme===Y.DEFAULTS.theme,Q=z?gl:Y.import(`themes/${w.theme}`);if(!Q)throw new Error(`Invalid theme ${w.theme}. Did you register it?`);let{modules:ge,...be}=Y.DEFAULTS,{modules:Se,...Ae}=Q.DEFAULTS,De=Wu(w.modules);De!=null&&De.toolbar&&De.toolbar.constructor!==Object&&(De={...De,toolbar:{container:De.toolbar}});let ht=Ur({},Wu(ge),Wu(Se),De),nr={...be,...rm(Ae),...rm(w)},yn=w.registry;return yn?w.formats&&Ps.warn('Ignoring "formats" option because "registry" is specified'):yn=w.formats?Zw(w.formats,nr.registry,Ps):nr.registry,{...nr,registry:yn,container:k,theme:Q,modules:Object.entries(ht).reduce((vi,Vx)=>{let[lh,Fm]=Vx;if(!Fm)return vi;let Hm=Y.import(`modules/${lh}`);return Hm==null?(Ps.error(`Cannot load ${lh} module. Are you sure you registered it?`),vi):{...vi,[lh]:Ur({},Hm.DEFAULTS||{},Fm)}},{}),bounds:tm(nr.bounds)}}(i,l),this.container=this.options.container,this.container==null)return void Ps.error("Invalid Quill container",i);this.options.debug&&Y.debug(this.options.debug);let u=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Ru.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Te;let f=Au.blotName,m=this.options.registry.query(f);if(!m||!("blotName"in m))throw new Error(`Cannot initialize Quill without "${f}" blot`);if(this.scroll=new m(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new $w(this.scroll),this.selection=new Uw(this.scroll,this.emitter),this.composition=new Ww(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Te.events.EDITOR_CHANGE,y=>{y===Te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Te.events.SCROLL_UPDATE,(y,w)=>{let k=this.selection.lastRange,[z]=this.selection.getRange(),Q=k&&z?{oldRange:k,newRange:z}:void 0;bn.call(this,()=>this.editor.update(null,w,Q),y)}),this.emitter.on(Te.events.SCROLL_EMBED_UPDATE,(y,w)=>{let k=this.selection.lastRange,[z]=this.selection.getRange(),Q=k&&z?{oldRange:k,newRange:z}:void 0;bn.call(this,()=>{let ge=new me().retain(y.offset(this)).retain({[y.statics.blotName]:w});return this.editor.update(ge,[],Q)},Y.sources.USER)}),u){let y=this.clipboard.convert({html:`${u}<p><br></p>`,text:`
`});this.setContents(y)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof i=="string"){let u=i;(i=document.createElement("div")).classList.add(u)}return this.container.insertBefore(i,l),i}blur(){this.selection.setRange(null)}deleteText(i,l,u){return[i,l,,u]=Vn(i,l,u),bn.call(this,()=>this.editor.deleteText(i,l),u,i,-1*l)}disable(){this.enable(!1)}editReadOnly(i){this.allowReadOnlyEdits=!0;let l=i();return this.allowReadOnlyEdits=!1,l}enable(){let i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.scroll.enable(i),this.container.classList.toggle("ql-disabled",!i)}focus(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),i.preventScroll||this.scrollSelectionIntoView()}format(i,l){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;return bn.call(this,()=>{let f=this.getSelection(!0),m=new me;if(f==null)return m;if(this.scroll.query(i,Ee.BLOCK))m=this.editor.formatLine(f.index,f.length,{[i]:l});else{if(f.length===0)return this.selection.format(i,l),m;m=this.editor.formatText(f.index,f.length,{[i]:l})}return this.setSelection(f,Te.sources.SILENT),m},u)}formatLine(i,l,u,f,m){let y;return[i,l,y,m]=Vn(i,l,u,f,m),bn.call(this,()=>this.editor.formatLine(i,l,y),m,i,0)}formatText(i,l,u,f,m){let y;return[i,l,y,m]=Vn(i,l,u,f,m),bn.call(this,()=>this.editor.formatText(i,l,y),m,i,0)}getBounds(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=null;if(u=typeof i=="number"?this.selection.getBounds(i,l):this.selection.getBounds(i.index,i.length),!u)return null;let f=this.container.getBoundingClientRect();return{bottom:u.bottom-f.top,height:u.height,left:u.left-f.left,right:u.right-f.left,top:u.top-f.top,width:u.width}}getContents(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-i;return[i,l]=Vn(i,l),this.editor.getContents(i,l)}getFormat(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof i=="number"?this.editor.getFormat(i,l):this.editor.getFormat(i.index,i.length)}getIndex(i){return i.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(i){return this.scroll.leaf(i)}getLine(i){return this.scroll.line(i)}getLines(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof i!="number"?this.scroll.lines(i.index,i.length):this.scroll.lines(i,l)}getModule(i){return this.theme.modules[i]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0;return typeof i=="number"&&(l=l??this.getLength()-i),[i,l]=Vn(i,l),this.editor.getHTML(i,l)}getText(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0;return typeof i=="number"&&(l=l??this.getLength()-i),[i,l]=Vn(i,l),this.editor.getText(i,l)}hasFocus(){return this.selection.hasFocus()}insertEmbed(i,l,u){let f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Y.sources.API;return bn.call(this,()=>this.editor.insertEmbed(i,l,u),f,i)}insertText(i,l,u,f,m){let y;return[i,,y,m]=Vn(i,0,u,f,m),bn.call(this,()=>this.editor.insertText(i,l,y),m,i,l.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(i,l,u){return[i,l,,u]=Vn(i,l,u),bn.call(this,()=>this.editor.removeFormat(i,l),u,i)}scrollRectIntoView(i){Gw(this.root,i)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let i=this.selection.lastRange,l=i&&this.selection.getBounds(i.index,i.length);l&&this.scrollRectIntoView(l)}setContents(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return bn.call(this,()=>{i=new me(i);let u=this.getLength(),f=this.editor.deleteText(0,u),m=this.editor.insertContents(0,i),y=this.editor.deleteText(this.getLength()-1,1);return f.compose(m).compose(y)},l)}setSelection(i,l,u){i==null?this.selection.setRange(null,l||Y.sources.API):([i,l,,u]=Vn(i,l,u),this.selection.setRange(new mi(Math.max(0,i),l),u),u!==Te.sources.SILENT&&this.scrollSelectionIntoView())}setText(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API,u=new me().insert(i);return this.setContents(u,l)}update(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER,l=this.scroll.update(i);return this.selection.update(i),l}updateContents(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return bn.call(this,()=>(i=new me(i),this.editor.applyDelta(i)),l,!0)}}function tm(o){return typeof o=="string"?document.querySelector(o):o}a(tm,"Is");function Wu(o){return Object.entries(o??{}).reduce((i,l)=>{let[u,f]=l;return{...i,[u]:f===!0?{}:f}},{})}a(Wu,"Ms");function rm(o){return Object.fromEntries(Object.entries(o).filter(i=>i[1]!==void 0))}a(rm,"Bs");function bn(o,i,l,u){if(!this.isEnabled()&&i===Te.sources.USER&&!this.allowReadOnlyEdits)return new me;let f=l==null?null:this.getSelection(),m=this.editor.delta,y=o();if(f!=null&&(l===!0&&(l=f.index),u==null?f=nm(f,y,i):u!==0&&(f=nm(f,l,u,i)),this.setSelection(f,Te.sources.SILENT)),y.length()>0){let w=[Te.events.TEXT_CHANGE,y,m,i];this.emitter.emit(Te.events.EDITOR_CHANGE,...w),i!==Te.sources.SILENT&&this.emitter.emit(...w)}return y}a(bn,"Us");function Vn(o,i,l,u,f){let m={};return typeof o.index=="number"&&typeof o.length=="number"?typeof i!="number"?(f=u,u=l,l=i,i=o.length,o=o.index):(i=o.length,o=o.index):typeof i!="number"&&(f=u,u=l,l=i,i=0),typeof l=="object"?(m=l,f=u):typeof l=="string"&&(u!=null?m[l]=u:f=l),[o,i,m,f=f||Te.sources.API]}a(Vn,"Ds");function nm(o,i,l,u){let f=typeof l=="number"?l:0;if(o==null)return null;let m,y;return i&&typeof i.transformPosition=="function"?[m,y]=[o.index,o.index+o.length].map(w=>i.transformPosition(w,u!==Te.sources.USER)):[m,y]=[o.index,o.index+o.length].map(w=>w<i||w===i&&u===Te.sources.USER?w:f>=0?w+f:Math.max(i,w+f)),new mi(m,y-m)}a(nm,"Ps");let Xi=class extends cl{static{a(this,"zs")}};function im(o){return o instanceof rr||o instanceof Zr}a(im,"Hs");function sm(o){return typeof o.updateContent=="function"}a(sm,"Fs");function Ku(o,i,l){l.reduce((u,f)=>{let m=me.Op.length(f),y=f.attributes||{};if(f.insert!=null){if(typeof f.insert=="string"){let w=f.insert;o.insertAt(u,w);let[k]=o.descendant(ar,u),z=Xr(k);y=me.AttributeMap.diff(z,y)||{}}else if(typeof f.insert=="object"){let w=Object.keys(f.insert)[0];if(w==null)return u;if(o.insertAt(u,w,f.insert[w]),o.scroll.query(w,Ee.INLINE)!=null){let[k]=o.descendant(ar,u),z=Xr(k);y=me.AttributeMap.diff(z,y)||{}}}}return Object.keys(y).forEach(w=>{o.formatAt(u,m,w,y[w])}),u+m},i)}a(Ku,"$s");let Xw=class extends Au{static{a(this,"Vs")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=rr;static allowedChildren=[rr,Zr,Xi];constructor(o,i,l){let{emitter:u}=l;super(o,i),this.emitter=u,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",f=>this.handleDragStart(f))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let o=this.batch;this.batch=!1,this.update(o)}emitMount(o){this.emitter.emit(Te.events.SCROLL_BLOT_MOUNT,o)}emitUnmount(o){this.emitter.emit(Te.events.SCROLL_BLOT_UNMOUNT,o)}emitEmbedUpdate(o,i){this.emitter.emit(Te.events.SCROLL_EMBED_UPDATE,o,i)}deleteAt(o,i){let[l,u]=this.line(o),[f]=this.line(o+i);if(super.deleteAt(o,i),f!=null&&l!==f&&u>0){if(l instanceof Zr||f instanceof Zr)return void this.optimize();let m=f.children.head instanceof Un?null:f.children.head;l.moveChildren(f,m),l.remove()}this.optimize()}enable(){let o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.domNode.setAttribute("contenteditable",o?"true":"false")}formatAt(o,i,l,u){super.formatAt(o,i,l,u),this.optimize()}insertAt(o,i,l){if(o>=this.length())if(l==null||this.scroll.query(i,Ee.BLOCK)==null){let u=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(u),l==null&&i.endsWith(`
`)?u.insertAt(0,i.slice(0,-1),l):u.insertAt(0,i,l)}else{let u=this.scroll.create(i,l);this.appendChild(u)}else super.insertAt(o,i,l);this.optimize()}insertBefore(o,i){if(o.statics.scope===Ee.INLINE_BLOT){let l=this.scroll.create(this.statics.defaultChild.blotName);l.appendChild(o),super.insertBefore(l,i)}else super.insertBefore(o,i)}insertContents(o,i){let l=this.deltaToRenderBlocks(i.concat(new me().insert(`
`))),u=l.pop();if(u==null)return;this.batchStart();let f=l.shift();if(f){let w=f.type==="block"&&(f.delta.length()===0||!this.descendant(Zr,o)[0]&&o<this.length()),k=f.type==="block"?f.delta:new me().insert({[f.key]:f.value});Ku(this,o,k);let z=f.type==="block"?1:0,Q=o+k.length()+z;w&&this.insertAt(Q-1,`
`);let ge=Xr(this.line(o)[0]),be=me.AttributeMap.diff(ge,f.attributes)||{};Object.keys(be).forEach(Se=>{this.formatAt(Q-1,1,Se,be[Se])}),o=Q}let[m,y]=this.children.find(o);l.length&&(m&&(m=m.split(y),y=0),l.forEach(w=>{if(w.type==="block")Ku(this.createBlock(w.attributes,m||void 0),0,w.delta);else{let k=this.create(w.key,w.value);this.insertBefore(k,m||void 0),Object.keys(w.attributes).forEach(z=>{k.format(z,w.attributes[z])})}})),u.type==="block"&&u.delta.length()&&Ku(this,m?m.offset(m.scroll)+y:this.length(),u.delta),this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(o){let i=this.path(o).pop();if(!i)return[null,-1];let[l,u]=i;return l instanceof ar?[l,u]:[null,-1]}line(o){return o===this.length()?this.line(o-1):this.descendant(im,o)}lines(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,l=a((u,f,m)=>{let y=[],w=m;return u.children.forEachAt(f,m,(k,z,Q)=>{im(k)?y.push(k):k instanceof cl&&(y=y.concat(l(k,z,w))),w-=Q}),y},"n");return l(this,o,i)}optimize(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(o,i),o.length>0&&this.emitter.emit(Te.events.SCROLL_OPTIMIZE,o,i))}path(o){return super.path(o).slice(1)}remove(){}update(o){if(this.batch)return void(Array.isArray(o)&&(this.batch=this.batch.concat(o)));let i=Te.sources.USER;typeof o=="string"&&(i=o),Array.isArray(o)||(o=this.observer.takeRecords()),(o=o.filter(l=>{let{target:u}=l,f=this.find(u,!0);return f&&!sm(f)})).length>0&&this.emitter.emit(Te.events.SCROLL_BEFORE_UPDATE,i,o),super.update(o.concat([])),o.length>0&&this.emitter.emit(Te.events.SCROLL_UPDATE,i,o)}updateEmbedAt(o,i,l){let[u]=this.descendant(f=>f instanceof Zr,o);u&&u.statics.blotName===i&&sm(u)&&u.updateContent(l)}handleDragStart(o){o.preventDefault()}deltaToRenderBlocks(o){let i=[],l=new me;return o.forEach(u=>{let f=u?.insert;if(f)if(typeof f=="string"){let m=f.split(`
`);m.slice(0,-1).forEach(w=>{l.insert(w,u.attributes),i.push({type:"block",delta:l,attributes:u.attributes??{}}),l=new me});let y=m[m.length-1];y&&l.insert(y,u.attributes)}else{let m=Object.keys(f)[0];if(!m)return;this.query(m,Ee.INLINE)?l.push(u):(l.length()&&i.push({type:"block",delta:l,attributes:{}}),l=new me,i.push({type:"blockEmbed",key:m,value:f[m],attributes:u.attributes??{}}))}}),l.length()&&i.push({type:"block",delta:l,attributes:{}}),i}createBlock(o,i){let l,u={};Object.entries(o).forEach(y=>{let[w,k]=y;this.query(w,Ee.BLOCK&Ee.BLOT)!=null?l=w:u[w]=k});let f=this.create(l||this.statics.defaultChild.blotName,l?o[l]:void 0);this.insertBefore(f,i||void 0);let m=f.length();return Object.entries(u).forEach(y=>{let[w,k]=y;f.formatAt(0,m,w,k)}),f}},Gu={scope:Ee.BLOCK,whitelist:["right","center","justify"]},Jw=new xr("align","align",Gu),om=new fn("align","ql-align",Gu),am=new hi("align","text-align",Gu);class lm extends hi{static{a(this,"Xs")}value(i){let l=super.value(i);return l.startsWith("rgb(")?(l=l.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${l.split(",").map(u=>`00${parseInt(u,10).toString(16)}`.slice(-2)).join("")}`):l}}let Qw=new fn("color","ql-color",{scope:Ee.INLINE}),Yu=new lm("color","color",{scope:Ee.INLINE}),ex=new fn("background","ql-bg",{scope:Ee.INLINE}),Zu=new lm("background","background-color",{scope:Ee.INLINE});class Ji extends Xi{static{a(this,"ei")}static create(i){let l=super.create(i);return l.setAttribute("spellcheck","false"),l}code(i,l){return this.children.map(u=>u.length()<=1?"":u.domNode.innerText).join(`
`).slice(i,i+l)}html(i,l){return`<pre>
${fl(this.code(i,l))}
</pre>`}}class Er extends rr{static{a(this,"ni")}static TAB="  ";static register(){Y.register(Ji)}}class Xu extends fi{static{a(this,"ri")}}Xu.blotName="code",Xu.tagName="CODE",Er.blotName="code-block",Er.className="ql-code-block",Er.tagName="DIV",Ji.blotName="code-block-container",Ji.className="ql-code-block-container",Ji.tagName="DIV",Ji.allowedChildren=[Er],Er.allowedChildren=[mn,Un,pl],Er.requiredContainer=Ji;let Ju={scope:Ee.BLOCK,whitelist:["rtl"]},cm=new xr("direction","dir",Ju),um=new fn("direction","ql-direction",Ju),hm=new hi("direction","direction",Ju),dm={scope:Ee.INLINE,whitelist:["serif","monospace"]},fm=new fn("font","ql-font",dm),pm=new class extends hi{value(o){return super.value(o).replace(/["']/g,"")}}("font","font-family",dm),mm=new fn("size","ql-size",{scope:Ee.INLINE,whitelist:["small","large","huge"]}),gm=new hi("size","font-size",{scope:Ee.INLINE,whitelist:["10px","18px","32px"]}),tx=Zi("quill:keyboard"),rx=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class yl extends gn{static{a(this,"gi")}static match(i,l){return!["altKey","ctrlKey","metaKey","shiftKey"].some(u=>!!l[u]!==i[u]&&l[u]!==null)&&(l.key===i.key||l.key===i.which)}constructor(i,l){super(i,l),this.bindings={},Object.keys(this.options.bindings).forEach(u=>{this.options.bindings[u]&&this.addBinding(this.options.bindings[u])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=function(m){if(typeof m=="string"||typeof m=="number")m={key:m};else{if(typeof m!="object")return null;m=Ds(m)}return m.shortKey&&(m[rx]=m.shortKey,delete m.shortKey),m}(i);if(f==null)return void tx.warn("Attempted to add invalid keyboard binding",f);typeof l=="function"&&(l={handler:l}),typeof u=="function"&&(u={handler:u}),(Array.isArray(f.key)?f.key:[f.key]).forEach(m=>{let y={...f,key:m,...l,...u};this.bindings[y.key]=this.bindings[y.key]||[],this.bindings[y.key].push(y)})}listen(){this.quill.root.addEventListener("keydown",i=>{if(i.defaultPrevented||i.isComposing||i.keyCode===229&&(i.key==="Enter"||i.key==="Backspace"))return;let l=(this.bindings[i.key]||[]).concat(this.bindings[i.which]||[]).filter(Ae=>yl.match(i,Ae));if(l.length===0)return;let u=Y.find(i.target,!0);if(u&&u.scroll!==this.quill.scroll)return;let f=this.quill.getSelection();if(f==null||!this.quill.hasFocus())return;let[m,y]=this.quill.getLine(f.index),[w,k]=this.quill.getLeaf(f.index),[z,Q]=f.length===0?[w,k]:this.quill.getLeaf(f.index+f.length),ge=w instanceof ul?w.value().slice(0,k):"",be=z instanceof ul?z.value().slice(Q):"",Se={collapsed:f.length===0,empty:f.length===0&&m.length()<=1,format:this.quill.getFormat(f),line:m,offset:y,prefix:ge,suffix:be,event:i};l.some(Ae=>{if(Ae.collapsed!=null&&Ae.collapsed!==Se.collapsed||Ae.empty!=null&&Ae.empty!==Se.empty||Ae.offset!=null&&Ae.offset!==Se.offset)return!1;if(Array.isArray(Ae.format)){if(Ae.format.every(De=>Se.format[De]==null))return!1}else if(typeof Ae.format=="object"&&!Object.keys(Ae.format).every(De=>Ae.format[De]===!0?Se.format[De]!=null:Ae.format[De]===!1?Se.format[De]==null:Iu(Ae.format[De],Se.format[De])))return!1;return!(Ae.prefix!=null&&!Ae.prefix.test(Se.prefix))&&!(Ae.suffix!=null&&!Ae.suffix.test(Se.suffix))&&Ae.handler.call(this,f,Se,Ae)!==!0})&&i.preventDefault()})}handleBackspace(i,l){let u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(l.prefix)?2:1;if(i.index===0||this.quill.getLength()<=1)return;let f={},[m]=this.quill.getLine(i.index),y=new me().retain(i.index-u).delete(u);if(l.offset===0){let[w]=this.quill.getLine(i.index-1);if(w&&!(w.statics.blotName==="block"&&w.length()<=1)){let k=m.formats(),z=this.quill.getFormat(i.index-1,1);if(f=me.AttributeMap.diff(k,z)||{},Object.keys(f).length>0){let Q=new me().retain(i.index+m.length()-2).retain(1,f);y=y.compose(Q)}}}this.quill.updateContents(y,Y.sources.USER),this.quill.focus()}handleDelete(i,l){let u=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(l.suffix)?2:1;if(i.index>=this.quill.getLength()-u)return;let f={},[m]=this.quill.getLine(i.index),y=new me().retain(i.index).delete(u);if(l.offset>=m.length()-1){let[w]=this.quill.getLine(i.index+1);if(w){let k=m.formats(),z=this.quill.getFormat(i.index,1);f=me.AttributeMap.diff(k,z)||{},Object.keys(f).length>0&&(y=y.retain(w.length()-1).retain(1,f))}}this.quill.updateContents(y,Y.sources.USER),this.quill.focus()}handleDeleteRange(i){eh({range:i,quill:this.quill}),this.quill.focus()}handleEnter(i,l){let u=Object.keys(l.format).reduce((m,y)=>(this.quill.scroll.query(y,Ee.BLOCK)&&!Array.isArray(l.format[y])&&(m[y]=l.format[y]),m),{}),f=new me().retain(i.index).delete(i.length).insert(`
`,u);this.quill.updateContents(f,Y.sources.USER),this.quill.setSelection(i.index+1,Y.sources.SILENT),this.quill.focus()}}let nx={bindings:{bold:Qu("bold"),italic:Qu("italic"),underline:Qu("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(o,i){return!(!i.collapsed||i.offset===0)||(this.quill.format("indent","+1",Y.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(o,i){return!(!i.collapsed||i.offset===0)||(this.quill.format("indent","-1",Y.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(o,i){i.format.indent!=null?this.quill.format("indent","-1",Y.sources.USER):i.format.list!=null&&this.quill.format("list",!1,Y.sources.USER)}},"indent code-block":bm(!0),"outdent code-block":bm(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(o){this.quill.deleteText(o.index-1,1,Y.sources.USER)}},tab:{key:"Tab",handler(o,i){if(i.format.table)return!0;this.quill.history.cutoff();let l=new me().retain(o.index).delete(o.length).insert("	");return this.quill.updateContents(l,Y.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(o.index+1,Y.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Y.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(o,i){let l={list:!1};i.format.indent&&(l.indent=!1),this.quill.formatLine(o.index,o.length,l,Y.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(o){let[i,l]=this.quill.getLine(o.index),u={...i.formats(),list:"checked"},f=new me().retain(o.index).insert(`
`,u).retain(i.length()-l-1).retain(1,{list:"unchecked"});this.quill.updateContents(f,Y.sources.USER),this.quill.setSelection(o.index+1,Y.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(o,i){let[l,u]=this.quill.getLine(o.index),f=new me().retain(o.index).insert(`
`,i.format).retain(l.length()-u-1).retain(1,{header:null});this.quill.updateContents(f,Y.sources.USER),this.quill.setSelection(o.index+1,Y.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(o){let i=this.quill.getModule("table");if(i){let[l,u,f,m]=i.getTable(o),y=function(k,z,Q,ge){return z.prev==null&&z.next==null?Q.prev==null&&Q.next==null?ge===0?-1:1:Q.prev==null?-1:1:z.prev==null?-1:z.next==null?1:null}(0,u,f,m);if(y==null)return;let w=l.offset();if(y<0){let k=new me().retain(w).insert(`
`);this.quill.updateContents(k,Y.sources.USER),this.quill.setSelection(o.index+1,o.length,Y.sources.SILENT)}else if(y>0){w+=l.length();let k=new me().retain(w).insert(`
`);this.quill.updateContents(k,Y.sources.USER),this.quill.setSelection(w,Y.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(o,i){let{event:l,line:u}=i,f=u.offset(this.quill.scroll);l.shiftKey?this.quill.setSelection(f-1,Y.sources.USER):this.quill.setSelection(f+u.length(),Y.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(o,i){if(this.quill.scroll.query("list")==null)return!0;let{length:l}=i.prefix,[u,f]=this.quill.getLine(o.index);if(f>l)return!0;let m;switch(i.prefix.trim()){case"[]":case"[ ]":m="unchecked";break;case"[x]":m="checked";break;case"-":case"*":m="bullet";break;default:m="ordered"}this.quill.insertText(o.index," ",Y.sources.USER),this.quill.history.cutoff();let y=new me().retain(o.index-f).delete(l+1).retain(u.length()-2-f).retain(1,{list:m});return this.quill.updateContents(y,Y.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(o.index-l,Y.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(o){let[i,l]=this.quill.getLine(o.index),u=2,f=i;for(;f!=null&&f.length()<=1&&f.formats()["code-block"];)if(f=f.prev,u-=1,u<=0){let m=new me().retain(o.index+i.length()-l-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(m,Y.sources.USER),this.quill.setSelection(o.index-1,Y.sources.SILENT),!1}return!0}},"embed left":wl("ArrowLeft",!1),"embed left shift":wl("ArrowLeft",!0),"embed right":wl("ArrowRight",!1),"embed right shift":wl("ArrowRight",!0),"table down":vm(!1),"table up":vm(!0)}};function bm(o){return{key:"Tab",shiftKey:!o,format:{"code-block":!0},handler(i,l){let{event:u}=l,f=this.quill.scroll.query("code-block"),{TAB:m}=f;if(i.length===0&&!u.shiftKey)return this.quill.insertText(i.index,m,Y.sources.USER),void this.quill.setSelection(i.index+m.length,Y.sources.SILENT);let y=i.length===0?this.quill.getLines(i.index,1):this.quill.getLines(i),{index:w,length:k}=i;y.forEach((z,Q)=>{o?(z.insertAt(0,m),Q===0?w+=m.length:k+=m.length):z.domNode.textContent.startsWith(m)&&(z.deleteAt(0,m.length),Q===0?w-=m.length:k-=m.length)}),this.quill.update(Y.sources.USER),this.quill.setSelection(w,k,Y.sources.SILENT)}}}a(bm,"bi");function wl(o,i){return{key:o,shiftKey:i,altKey:null,[o==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(u){let{index:f}=u;o==="ArrowRight"&&(f+=u.length+1);let[m]=this.quill.getLeaf(f);return!(m instanceof Vr)||(o==="ArrowLeft"?i?this.quill.setSelection(u.index-1,u.length+1,Y.sources.USER):this.quill.setSelection(u.index-1,Y.sources.USER):i?this.quill.setSelection(u.index,u.length+1,Y.sources.USER):this.quill.setSelection(u.index+u.length+1,Y.sources.USER),!1)}}}a(wl,"yi");function Qu(o){return{key:o[0],shortKey:!0,handler(i,l){this.quill.format(o,!l.format[o],Y.sources.USER)}}}a(Qu,"vi");function vm(o){return{key:o?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(i,l){let u=o?"prev":"next",f=l.line,m=f.parent[u];if(m!=null){if(m.statics.blotName==="table-row"){let y=m.children.head,w=f;for(;w.prev!=null;)w=w.prev,y=y.next;let k=y.offset(this.quill.scroll)+Math.min(l.offset,y.length()-1);this.quill.setSelection(k,0,Y.sources.USER)}}else{let y=f.table()[u];y!=null&&(o?this.quill.setSelection(y.offset(this.quill.scroll)+y.length()-1,0,Y.sources.USER):this.quill.setSelection(y.offset(this.quill.scroll),0,Y.sources.USER))}return!1}}}a(vm,"xi");function eh(o){let{quill:i,range:l}=o,u=i.getLines(l),f={};if(u.length>1){let m=u[0].formats(),y=u[u.length-1].formats();f=me.AttributeMap.diff(y,m)||{}}i.deleteText(l,Y.sources.USER),Object.keys(f).length>0&&i.formatLine(l.index,1,f,Y.sources.USER),i.setSelection(l.index,Y.sources.SILENT)}a(eh,"Ni"),yl.DEFAULTS=nx;let ix=/font-weight:\s*normal/,sx=["P","OL","UL"],ym=a(o=>o&&sx.includes(o.tagName),"Ai"),ox=/\bmso-list:[^;]*ignore/i,ax=/\bmso-list:[^;]*\bl(\d+)/i,lx=/\bmso-list:[^;]*\blevel(\d+)/i,cx=a(o=>{let i=Array.from(o.querySelectorAll("[style*=mso-list]")),l=[],u=[];i.forEach(y=>{(y.getAttribute("style")||"").match(ox)?l.push(y):u.push(y)}),l.forEach(y=>y.parentNode?.removeChild(y));let f=o.documentElement.innerHTML,m=u.map(y=>((w,k)=>{let z=w.getAttribute("style"),Q=z?.match(ax);if(!Q)return null;let ge=Number(Q[1]),be=z?.match(lx),Se=be?Number(be[1]):1,Ae=new RegExp(`@list l${ge}:level${Se}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),De=k.match(Ae);return{id:ge,indent:Se,type:De&&De[1]==="bullet"?"bullet":"ordered",element:w}})(y,f)).filter(y=>y);for(;m.length;){let y=[],w=m.shift();for(;w;)y.push(w),w=m.length&&m[0]?.element===w.element.nextElementSibling&&m[0].id===w.id?m.shift():null;let k=document.createElement("ul");y.forEach(ge=>{let be=document.createElement("li");be.setAttribute("data-list",ge.type),ge.indent>1&&be.setAttribute("class","ql-indent-"+(ge.indent-1)),be.innerHTML=ge.element.innerHTML,k.appendChild(be)});let z=y[0]?.element,{parentNode:Q}=z??{};z&&Q?.replaceChild(k,z),y.slice(1).forEach(ge=>{let{element:be}=ge;Q?.removeChild(be)})}},"Li"),ux=[function(o){o.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&cx(o)},function(o){o.querySelector('[id^="docs-internal-guid-"]')&&((i=>{Array.from(i.querySelectorAll('b[style*="font-weight"]')).filter(l=>l.getAttribute("style")?.match(ix)).forEach(l=>{let u=i.createDocumentFragment();u.append(...l.childNodes),l.parentNode?.replaceChild(u,l)})})(o),(i=>{Array.from(i.querySelectorAll("br")).filter(l=>ym(l.previousElementSibling)&&ym(l.nextElementSibling)).forEach(l=>{l.parentNode?.removeChild(l)})})(o))}],hx=a(o=>{o.documentElement&&ux.forEach(i=>{i(o)})},"Ti"),dx=Zi("quill:clipboard"),fx=[[Node.TEXT_NODE,function(o,i,l){let u=o.data;if(o.parentElement?.tagName==="O:P")return i.insert(u.trim());if(!xm(o)){if(u.trim().length===0&&u.includes(`
`)&&!function(m,y){return m.previousElementSibling&&m.nextElementSibling&&!gi(m.previousElementSibling,y)&&!gi(m.nextElementSibling,y)}(o,l))return i;let f=a((m,y)=>{let w=y.replace(/[^\u00a0]/g,"");return w.length<1&&m?" ":w},"s");u=u.replace(/\r\n/g," ").replace(/\n/g," "),u=u.replace(/\s\s+/g,f.bind(f,!0)),(o.previousSibling==null&&o.parentElement!=null&&gi(o.parentElement,l)||o.previousSibling instanceof Element&&gi(o.previousSibling,l))&&(u=u.replace(/^\s+/,f.bind(f,!1))),(o.nextSibling==null&&o.parentElement!=null&&gi(o.parentElement,l)||o.nextSibling instanceof Element&&gi(o.nextSibling,l))&&(u=u.replace(/\s+$/,f.bind(f,!1)))}return i.insert(u)}],[Node.TEXT_NODE,Em],["br",function(o,i){return Uo(i,`
`)||i.insert(`
`),i}],[Node.ELEMENT_NODE,Em],[Node.ELEMENT_NODE,function(o,i,l){let u=l.query(o);if(u==null)return i;if(u.prototype instanceof Vr){let f={},m=u.value(o);if(m!=null)return f[u.blotName]=m,new me().insert(f,u.formats(o,l))}else if(u.prototype instanceof Bo&&!Uo(i,`
`)&&i.insert(`
`),"blotName"in u&&"formats"in u&&typeof u.formats=="function")return Qi(i,u.blotName,u.formats(o,l),l);return i}],[Node.ELEMENT_NODE,function(o,i,l){let u=xr.keys(o),f=fn.keys(o),m=hi.keys(o),y={};return u.concat(f).concat(m).forEach(w=>{let k=l.query(w,Ee.ATTRIBUTE);k!=null&&(y[k.attrName]=k.value(o),y[k.attrName])||(k=px[w],k==null||k.attrName!==w&&k.keyName!==w||(y[k.attrName]=k.value(o)||void 0),k=wm[w],k==null||k.attrName!==w&&k.keyName!==w||(k=wm[w],y[k.attrName]=k.value(o)||void 0))}),Object.entries(y).reduce((w,k)=>{let[z,Q]=k;return Qi(w,z,Q,l)},i)}],[Node.ELEMENT_NODE,function(o,i,l){let u={},f=o.style||{};return f.fontStyle==="italic"&&(u.italic=!0),f.textDecoration==="underline"&&(u.underline=!0),f.textDecoration==="line-through"&&(u.strike=!0),(f.fontWeight?.startsWith("bold")||parseInt(f.fontWeight,10)>=700)&&(u.bold=!0),i=Object.entries(u).reduce((m,y)=>{let[w,k]=y;return Qi(m,w,k,l)},i),parseFloat(f.textIndent||0)>0?new me().insert("	").concat(i):i}],["li",function(o,i,l){let u=l.query(o);if(u==null||u.blotName!=="list"||!Uo(i,`
`))return i;let f=-1,m=o.parentNode;for(;m!=null;)["OL","UL"].includes(m.tagName)&&(f+=1),m=m.parentNode;return f<=0?i:i.reduce((y,w)=>w.insert?w.attributes&&typeof w.attributes.indent=="number"?y.push(w):y.insert(w.insert,{indent:f,...w.attributes||{}}):y,new me)}],["ol, ul",function(o,i,l){let u=o,f=u.tagName==="OL"?"ordered":"bullet",m=u.getAttribute("data-checked");return m&&(f=m==="true"?"checked":"unchecked"),Qi(i,"list",f,l)}],["pre",function(o,i,l){let u=l.query("code-block"),f=!u||!("formats"in u)||typeof u.formats!="function"||u.formats(o,l);return Qi(i,"code-block",f,l)}],["tr",function(o,i,l){let u=o.parentElement?.tagName==="TABLE"?o.parentElement:o.parentElement?.parentElement;return u!=null?Qi(i,"table",Array.from(u.querySelectorAll("tr")).indexOf(o)+1,l):i}],["b",rh("bold")],["i",rh("italic")],["strike",rh("strike")],["style",function(){return new me}]],px=[Jw,cm].reduce((o,i)=>(o[i.keyName]=i,o),{}),wm=[am,Zu,Yu,hm,pm,gm].reduce((o,i)=>(o[i.keyName]=i,o),{});function Qi(o,i,l,u){return u.query(i)?o.reduce((f,m)=>{if(!m.insert)return f;if(m.attributes&&m.attributes[i])return f.push(m);let y=l?{[i]:l}:{};return f.insert(m.insert,{...y,...m.attributes})},new me):o}a(Qi,"Ii");function Uo(o,i){let l="";for(let u=o.ops.length-1;u>=0&&l.length<i.length;--u){let f=o.ops[u];if(typeof f.insert!="string")break;l=f.insert+l}return l.slice(-1*i.length)===i}a(Uo,"Mi");function gi(o,i){if(!(o instanceof Element))return!1;let l=i.query(o);return!(l&&l.prototype instanceof Vr)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(o.tagName.toLowerCase())}a(gi,"Bi");let xl=new WeakMap;function xm(o){return o!=null&&(xl.has(o)||(o.tagName==="PRE"?xl.set(o,!0):xl.set(o,xm(o.parentNode))),xl.get(o))}a(xm,"Di");function th(o,i,l,u,f){return i.nodeType===i.TEXT_NODE?u.reduce((m,y)=>y(i,m,o),new me):i.nodeType===i.ELEMENT_NODE?Array.from(i.childNodes||[]).reduce((m,y)=>{let w=th(o,y,l,u,f);return y.nodeType===i.ELEMENT_NODE&&(w=l.reduce((k,z)=>z(y,k,o),w),w=(f.get(y)||[]).reduce((k,z)=>z(y,k,o),w)),m.concat(w)},new me):new me}a(th,"Pi");function rh(o){return(i,l,u)=>Qi(l,o,!0,u)}a(rh,"zi");function Em(o,i,l){if(!Uo(i,`
`)){if(gi(o,l)&&(o.childNodes.length>0||o instanceof HTMLParagraphElement))return i.insert(`
`);if(i.length()>0&&o.nextSibling){let u=o.nextSibling;for(;u!=null;){if(gi(u,l))return i.insert(`
`);let f=l.query(u);if(f&&f.prototype instanceof Zr)return i.insert(`
`);u=u.firstChild}}}return i}a(Em,"Hi");function Tm(o,i){let l=i;for(let u=o.length-1;u>=0;u-=1){let f=o[u];o[u]={delta:l.transform(f.delta,!0),range:f.range&&nh(f.range,l)},l=f.delta.transform(l),o[u].delta.length()===0&&o.splice(u,1)}}a(Tm,"Fi");function nh(o,i){if(!o)return o;let l=i.transformPosition(o.index);return{index:l,length:i.transformPosition(o.index+o.length)-l}}a(nh,"$i");class Am extends gn{static{a(this,"Vi")}constructor(i,l){super(i,l),i.root.addEventListener("drop",u=>{u.preventDefault();let f=null;if(document.caretRangeFromPoint)f=document.caretRangeFromPoint(u.clientX,u.clientY);else if(document.caretPositionFromPoint){let y=document.caretPositionFromPoint(u.clientX,u.clientY);f=document.createRange(),f.setStart(y.offsetNode,y.offset),f.setEnd(y.offsetNode,y.offset)}let m=f&&i.selection.normalizeNative(f);if(m){let y=i.selection.normalizedToRange(m);u.dataTransfer?.files&&this.upload(y,u.dataTransfer.files)}})}upload(i,l){let u=[];Array.from(l).forEach(f=>{f&&this.options.mimetypes?.includes(f.type)&&u.push(f)}),u.length>0&&this.options.handler.call(this,i,u)}}Am.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(o,i){if(!this.quill.scroll.query("image"))return;let l=i.map(u=>new Promise(f=>{let m=new FileReader;m.onload=()=>{f(m.result)},m.readAsDataURL(u)}));Promise.all(l).then(u=>{let f=u.reduce((m,y)=>m.insert({image:y}),new me().retain(o.index).delete(o.length));this.quill.updateContents(f,Te.sources.USER),this.quill.setSelection(o.index+u.length,Te.sources.SILENT)})}};let mx=Am,gx=["insertText","insertReplacementText"],bx=class extends gn{static{a(this,"Zi")}constructor(o,i){super(o,i),o.root.addEventListener("beforeinput",l=>{this.handleBeforeInput(l)}),/Android/i.test(navigator.userAgent)||o.on(Y.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(o){eh({range:o,quill:this.quill})}replaceText(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(o.length===0)return!1;if(i){let l=this.quill.getFormat(o.index,1);this.deleteRange(o),this.quill.updateContents(new me().retain(o.index).insert(i,l),Y.sources.USER)}else this.deleteRange(o);return this.quill.setSelection(o.index+i.length,0,Y.sources.SILENT),!0}handleBeforeInput(o){if(this.quill.composition.isComposing||o.defaultPrevented||!gx.includes(o.inputType))return;let i=o.getTargetRanges?o.getTargetRanges()[0]:null;if(!i||i.collapsed===!0)return;let l=function(m){return typeof m.data=="string"?m.data:m.dataTransfer?.types.includes("text/plain")?m.dataTransfer.getData("text/plain"):null}(o);if(l==null)return;let u=this.quill.selection.normalizeNative(i),f=u?this.quill.selection.normalizedToRange(u):null;f&&this.replaceText(f,l)&&o.preventDefault()}handleCompositionStart(){let o=this.quill.getSelection();o&&this.replaceText(o)}},vx=/Mac/i.test(navigator.platform),yx=class extends gn{static{a(this,"Xi")}isListening=!1;selectionChangeDeadline=0;constructor(o,i){super(o,i),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(o,i){let{line:l,event:u}=i;if(!(l instanceof pn&&l.uiNode))return!0;let f=getComputedStyle(l.domNode).direction==="rtl";return!!(f&&u.key!=="ArrowRight"||!f&&u.key!=="ArrowLeft")||(this.quill.setSelection(o.index-1,o.length+(u.shiftKey?1:0),Y.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",o=>{!o.defaultPrevented&&(i=>i.key==="ArrowLeft"||i.key==="ArrowRight"||i.key==="ArrowUp"||i.key==="ArrowDown"||i.key==="Home"||!(!vx||i.key!=="a"||i.ctrlKey!==!0))(o)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,!this.isListening&&(this.isListening=!0,document.addEventListener("selectionchange",()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){let o=document.getSelection();if(!o)return;let i=o.getRangeAt(0);if(i.collapsed!==!0||i.startOffset!==0)return;let l=this.quill.scroll.find(i.startContainer);if(!(l instanceof pn&&l.uiNode))return;let u=document.createRange();u.setStartAfter(l.uiNode),u.setEndAfter(l.uiNode),o.removeAllRanges(),o.addRange(u)}};Y.register({"blots/block":rr,"blots/block/embed":Zr,"blots/break":Un,"blots/container":Xi,"blots/cursor":pl,"blots/embed":zu,"blots/inline":fi,"blots/scroll":Xw,"blots/text":mn,"modules/clipboard":class extends gn{static DEFAULTS={matchers:[]};constructor(o,i){super(o,i),this.quill.root.addEventListener("copy",l=>this.onCaptureCopy(l,!1)),this.quill.root.addEventListener("cut",l=>this.onCaptureCopy(l,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],fx.concat(this.options.matchers??[]).forEach(l=>{let[u,f]=l;this.addMatcher(u,f)})}addMatcher(o,i){this.matchers.push([o,i])}convert(o){let{html:i,text:l}=o,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(u[Er.blotName])return new me().insert(l||"",{[Er.blotName]:u[Er.blotName]});if(!i)return new me().insert(l||"",u);let f=this.convertHTML(i);return Uo(f,`
`)&&(f.ops[f.ops.length-1].attributes==null||u.table)?f.compose(new me().retain(f.length()-1).delete(1)):f}normalizeHTML(o){hx(o)}convertHTML(o){let i=new DOMParser().parseFromString(o,"text/html");this.normalizeHTML(i);let l=i.body,u=new WeakMap,[f,m]=this.prepareMatching(l,u);return th(this.quill.scroll,l,f,m,u)}dangerouslyPasteHTML(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Y.sources.API;if(typeof o=="string"){let u=this.convert({html:o,text:""});this.quill.setContents(u,i),this.quill.setSelection(0,Y.sources.SILENT)}else{let u=this.convert({html:i,text:""});this.quill.updateContents(new me().retain(o).concat(u),l),this.quill.setSelection(o+u.length(),Y.sources.SILENT)}}onCaptureCopy(o){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(o.defaultPrevented)return;o.preventDefault();let[l]=this.quill.selection.getRange();if(l==null)return;let{html:u,text:f}=this.onCopy(l,i);o.clipboardData?.setData("text/plain",f),o.clipboardData?.setData("text/html",u),i&&eh({range:l,quill:this.quill})}normalizeURIList(o){return o.split(/\r?\n/).filter(i=>i[0]!=="#").join(`
`)}onCapturePaste(o){if(o.defaultPrevented||!this.quill.isEnabled())return;o.preventDefault();let i=this.quill.getSelection(!0);if(i==null)return;let l=o.clipboardData?.getData("text/html"),u=o.clipboardData?.getData("text/plain");if(!l&&!u){let m=o.clipboardData?.getData("text/uri-list");m&&(u=this.normalizeURIList(m))}let f=Array.from(o.clipboardData?.files||[]);if(!l&&f.length>0)this.quill.uploader.upload(i,f);else{if(l&&f.length>0){let m=new DOMParser().parseFromString(l,"text/html");if(m.body.childElementCount===1&&m.body.firstElementChild?.tagName==="IMG")return void this.quill.uploader.upload(i,f)}this.onPaste(i,{html:l,text:u})}}onCopy(o){let i=this.quill.getText(o);return{html:this.quill.getSemanticHTML(o),text:i}}onPaste(o,i){let{text:l,html:u}=i,f=this.quill.getFormat(o.index),m=this.convert({text:l,html:u},f);dx.log("onPaste",m,{text:l,html:u});let y=new me().retain(o.index).delete(o.length).concat(m);this.quill.updateContents(y,Y.sources.USER),this.quill.setSelection(y.length()-o.length,Y.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(o,i){let l=[],u=[];return this.matchers.forEach(f=>{let[m,y]=f;switch(m){case Node.TEXT_NODE:u.push(y);break;case Node.ELEMENT_NODE:l.push(y);break;default:Array.from(o.querySelectorAll(m)).forEach(w=>{i.has(w)?i.get(w)?.push(y):i.set(w,[y])})}}),[l,u]}},"modules/history":class extends gn{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(o,i){super(o,i),this.quill.on(Y.events.EDITOR_CHANGE,(l,u,f,m)=>{l===Y.events.SELECTION_CHANGE?u&&m!==Y.sources.SILENT&&(this.currentRange=u):l===Y.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&m!==Y.sources.USER?this.transform(u):this.record(u,f)),this.currentRange=nh(this.currentRange,u))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",l=>{l.inputType==="historyUndo"?(this.undo(),l.preventDefault()):l.inputType==="historyRedo"&&(this.redo(),l.preventDefault())})}change(o,i){if(this.stack[o].length===0)return;let l=this.stack[o].pop();if(!l)return;let u=this.quill.getContents(),f=l.delta.invert(u);this.stack[i].push({delta:f,range:nh(l.range,f)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(l.delta,Y.sources.USER),this.ignoreChange=!1,this.restoreSelection(l)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(o,i){if(o.ops.length===0)return;this.stack.redo=[];let l=o.invert(i),u=this.currentRange,f=Date.now();if(this.lastRecorded+this.options.delay>f&&this.stack.undo.length>0){let m=this.stack.undo.pop();m&&(l=l.compose(m.delta),u=m.range)}else this.lastRecorded=f;l.length()!==0&&(this.stack.undo.push({delta:l,range:u}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(o){Tm(this.stack.undo,o),Tm(this.stack.redo,o)}undo(){this.change("undo","redo")}restoreSelection(o){if(o.range)this.quill.setSelection(o.range,Y.sources.USER);else{let i=function(l,u){let f=u.reduce((y,w)=>y+(w.delete||0),0),m=u.length()-f;return function(y,w){let k=w.ops[w.ops.length-1];return k==null?!1:k.insert!=null?typeof k.insert=="string"&&k.insert.endsWith(`
`):k.attributes!=null?Object.keys(k.attributes).some(z=>y.query(z,Ee.BLOCK)!=null):!1}(l,u)&&(m-=1),m}(this.quill.scroll,o.delta);this.quill.setSelection(i,Y.sources.USER)}}},"modules/keyboard":yl,"modules/uploader":mx,"modules/input":bx,"modules/uiNode":yx});let ih=Y,wx=new class extends fn{add(o,i){let l=0;if(i==="+1"||i==="-1"){let u=this.value(o)||0;l=i==="+1"?u+1:u-1}else typeof i=="number"&&(l=i);return l===0?(this.remove(o),!0):super.add(o,l.toString())}canAdd(o,i){return super.canAdd(o,i)||super.canAdd(o,parseInt(i,10))}value(o){return parseInt(super.value(o),10)||void 0}}("indent","ql-indent",{scope:Ee.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),xx=wx,Ex=class extends rr{static{a(this,"to")}static blotName="blockquote";static tagName="blockquote"},Tx=class extends rr{static{a(this,"eo")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(o){return this.tagName.indexOf(o.tagName)+1}};class Vo extends Xi{static{a(this,"no")}}Vo.blotName="list-container",Vo.tagName="OL";class zo extends rr{static{a(this,"ro")}static create(i){let l=super.create();return l.setAttribute("data-list",i),l}static formats(i){return i.getAttribute("data-list")||void 0}static register(){Y.register(Vo)}constructor(i,l){super(i,l);let u=l.ownerDocument.createElement("span"),f=a(m=>{if(!i.isEnabled())return;let y=this.statics.formats(l,i);y==="checked"?(this.format("list","unchecked"),m.preventDefault()):y==="unchecked"&&(this.format("list","checked"),m.preventDefault())},"r");u.addEventListener("mousedown",f),u.addEventListener("touchstart",f),this.attachUI(u)}format(i,l){i===this.statics.blotName&&l?this.domNode.setAttribute("data-list",l):super.format(i,l)}}zo.blotName="list",zo.tagName="LI",Vo.allowedChildren=[zo],zo.requiredContainer=Vo;let sh=class extends fi{static{a(this,"so")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(o){super.optimize(o),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},Ax=class extends sh{static{a(this,"io")}static blotName="italic";static tagName=["EM","I"]};class El extends fi{static{a(this,"oo")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(i){let l=super.create(i);return l.setAttribute("href",this.sanitize(i)),l.setAttribute("rel","noopener noreferrer"),l.setAttribute("target","_blank"),l}static formats(i){return i.getAttribute("href")}static sanitize(i){return Sm(i,this.PROTOCOL_WHITELIST)?i:this.SANITIZED_URL}format(i,l){i===this.statics.blotName&&l?this.domNode.setAttribute("href",this.constructor.sanitize(l)):super.format(i,l)}}function Sm(o,i){let l=document.createElement("a");l.href=o;let u=l.href.slice(0,l.href.indexOf(":"));return i.indexOf(u)>-1}a(Sm,"lo");let Sx=class extends fi{static{a(this,"ao")}static blotName="script";static tagName=["SUB","SUP"];static create(o){return o==="super"?document.createElement("sup"):o==="sub"?document.createElement("sub"):super.create(o)}static formats(o){return o.tagName==="SUB"?"sub":o.tagName==="SUP"?"super":void 0}},Nx=class extends sh{static{a(this,"co")}static blotName="strike";static tagName=["S","STRIKE"]},Cx=class extends fi{static{a(this,"uo")}static blotName="underline";static tagName="U"},Lx=class extends zu{static{a(this,"ho")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(o){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let i=super.create(o);return typeof o=="string"&&(window.katex.render(o,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",o)),i}static value(o){return o.getAttribute("data-value")}html(){let{formula:o}=this.value();return`<span>${o}</span>`}},Nm=["alt","height","width"],Ox=class extends Vr{static{a(this,"po")}static blotName="image";static tagName="IMG";static create(o){let i=super.create(o);return typeof o=="string"&&i.setAttribute("src",this.sanitize(o)),i}static formats(o){return Nm.reduce((i,l)=>(o.hasAttribute(l)&&(i[l]=o.getAttribute(l)),i),{})}static match(o){return/\.(jpe?g|gif|png)$/.test(o)||/^data:image\/.+;base64/.test(o)}static sanitize(o){return Sm(o,["http","https","data"])?o:"//:0"}static value(o){return o.getAttribute("src")}format(o,i){Nm.indexOf(o)>-1?i?this.domNode.setAttribute(o,i):this.domNode.removeAttribute(o):super.format(o,i)}},Cm=["height","width"],kx=class extends Zr{static{a(this,"mo")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(o){let i=super.create(o);return i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.setAttribute("src",this.sanitize(o)),i}static formats(o){return Cm.reduce((i,l)=>(o.hasAttribute(l)&&(i[l]=o.getAttribute(l)),i),{})}static sanitize(o){return El.sanitize(o)}static value(o){return o.getAttribute("src")}format(o,i){Cm.indexOf(o)>-1?i?this.domNode.setAttribute(o,i):this.domNode.removeAttribute(o):super.format(o,i)}html(){let{video:o}=this.value();return`<a href="${o}">${o}</a>`}},$o=new fn("code-token","hljs",{scope:Ee.INLINE});class zn extends fi{static{a(this,"yo")}static formats(i,l){for(;i!=null&&i!==l.domNode;){if(i.classList&&i.classList.contains(Er.className))return super.formats(i,l);i=i.parentNode}}constructor(i,l,u){super(i,l,u),$o.add(this.domNode,u)}format(i,l){i!==zn.blotName?super.format(i,l):l?$o.add(this.domNode,l):($o.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),$o.value(this.domNode)||this.unwrap()}}zn.blotName="code-token",zn.className="ql-token";class Jr extends Er{static{a(this,"vo")}static create(i){let l=super.create(i);return typeof i=="string"&&l.setAttribute("data-language",i),l}static formats(i){return i.getAttribute("data-language")||"plain"}static register(){}format(i,l){i===this.statics.blotName&&l?this.domNode.setAttribute("data-language",l):super.format(i,l)}replaceWith(i,l){return this.formatAt(0,this.length(),zn.blotName,!1),super.replaceWith(i,l)}}class Wo extends Ji{static{a(this,"xo")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(i,l){i===Jr.blotName&&(this.forceNext=!0,this.children.forEach(u=>{u.format(i,l)}))}formatAt(i,l,u,f){u===Jr.blotName&&(this.forceNext=!0),super.formatAt(i,l,u,f)}highlight(i){let l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.children.head==null)return;let u=`${Array.from(this.domNode.childNodes).filter(m=>m!==this.uiNode).map(m=>m.textContent).join(`
`)}
`,f=Jr.formats(this.children.head.domNode);if(l||this.forceNext||this.cachedText!==u){if(u.trim().length>0||this.cachedText==null){let m=this.children.reduce((w,k)=>w.concat(Zp(k,!1)),new me),y=i(u,f);m.diff(y).reduce((w,k)=>{let{retain:z,attributes:Q}=k;return z?(Q&&Object.keys(Q).forEach(ge=>{[Jr.blotName,zn.blotName].includes(ge)&&this.formatAt(w,z,ge,Q[ge])}),w+z):w},0)}this.cachedText=u,this.forceNext=!1}}html(i,l){let[u]=this.children.find(i);return`<pre data-language="${u?Jr.formats(u.domNode):"plain"}">
${fl(this.code(i,l))}
</pre>`}optimize(i){if(super.optimize(i),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let l=Jr.formats(this.children.head.domNode);l!==this.uiNode.value&&(this.uiNode.value=l)}}}Wo.allowedChildren=[Jr],Jr.requiredContainer=Wo,Jr.allowedChildren=[zn,pl,mn,Un];class Lm extends gn{static{a(this,"No")}static register(){Y.register(zn,!0),Y.register(Jr,!0),Y.register(Wo,!0)}constructor(i,l){if(super(i,l),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((u,f)=>{let{key:m}=f;return u[m]=!0,u},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Y.events.SCROLL_BLOT_MOUNT,i=>{if(!(i instanceof Wo))return;let l=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(u=>{let{key:f,label:m}=u,y=l.ownerDocument.createElement("option");y.textContent=m,y.setAttribute("value",f),l.appendChild(y)}),l.addEventListener("change",()=>{i.format(Jr.blotName,l.value),this.quill.root.focus(),this.highlight(i,!0)}),i.uiNode==null&&(i.attachUI(l),i.children.head&&(l.value=Jr.formats(i.children.head.domNode)))})}initTimer(){let i=null;this.quill.on(Y.events.SCROLL_OPTIMIZE,()=>{i&&clearTimeout(i),i=setTimeout(()=>{this.highlight(),i=null},this.options.interval)})}highlight(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(Y.sources.USER);let u=this.quill.getSelection();(i==null?this.quill.scroll.descendants(Wo):[i]).forEach(f=>{f.highlight(this.highlightBlot,l)}),this.quill.update(Y.sources.SILENT),u!=null&&this.quill.setSelection(u,Y.sources.SILENT)}highlightBlot(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(l=this.languages[l]?l:"plain",l==="plain")return fl(i).split(`
`).reduce((f,m,y)=>(y!==0&&f.insert(`
`,{[Er.blotName]:l}),f.insert(m)),new me);let u=this.quill.root.ownerDocument.createElement("div");return u.classList.add(Er.className),u.innerHTML=((f,m,y)=>{if(typeof f.versionString=="string"){let w=f.versionString.split(".")[0];if(parseInt(w,10)>=11)return f.highlight(y,{language:m}).value}return f.highlight(m,y).value})(this.options.hljs,l,i),th(this.quill.scroll,u,[(f,m)=>{let y=$o.value(f);return y?m.compose(new me().retain(m.length(),{[zn.blotName]:y})):m}],[(f,m)=>f.data.split(`
`).reduce((y,w,k)=>(k!==0&&y.insert(`
`,{[Er.blotName]:l}),y.insert(w)),m)],new WeakMap)}}Lm.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class vn extends rr{static{a(this,"wo")}static blotName="table";static tagName="TD";static create(i){let l=super.create();return i?l.setAttribute("data-row",i):l.setAttribute("data-row",oh()),l}static formats(i){if(i.hasAttribute("data-row"))return i.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(i,l){i===vn.blotName&&l?this.domNode.setAttribute("data-row",l):super.format(i,l)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class es extends Xi{static{a(this,"Eo")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let i=this.children.head.formats(),l=this.children.tail.formats(),u=this.next.children.head.formats(),f=this.next.children.tail.formats();return i.table===l.table&&i.table===u.table&&i.table===f.table}return!1}optimize(i){super.optimize(i),this.children.forEach(l=>{if(l.next==null)return;let u=l.formats(),f=l.next.formats();if(u.table!==f.table){let m=this.splitAfter(l);m&&m.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class bi extends Xi{static{a(this,"Ao")}static blotName="table-body";static tagName="TBODY"}class Tl extends Xi{static{a(this,"qo")}static blotName="table-container";static tagName="TABLE";balanceCells(){let i=this.descendants(es),l=i.reduce((u,f)=>Math.max(f.children.length,u),0);i.forEach(u=>{new Array(l-u.children.length).fill(0).forEach(()=>{let f;u.children.head!=null&&(f=vn.formats(u.children.head.domNode));let m=this.scroll.create(vn.blotName,f);u.appendChild(m),m.optimize()})})}cells(i){return this.rows().map(l=>l.children.at(i))}deleteColumn(i){let[l]=this.descendant(bi);l!=null&&l.children.head!=null&&l.children.forEach(u=>{let f=u.children.at(i);f?.remove()})}insertColumn(i){let[l]=this.descendant(bi);l!=null&&l.children.head!=null&&l.children.forEach(u=>{let f=u.children.at(i),m=vn.formats(u.children.head.domNode),y=this.scroll.create(vn.blotName,m);u.insertBefore(y,f)})}insertRow(i){let[l]=this.descendant(bi);if(l==null||l.children.head==null)return;let u=oh(),f=this.scroll.create(es.blotName);l.children.head.children.forEach(()=>{let y=this.scroll.create(vn.blotName,u);f.appendChild(y)});let m=l.children.at(i);l.insertBefore(f,m)}rows(){let i=this.children.head;return i==null?[]:i.children.map(l=>l)}}function oh(){return`row-${Math.random().toString(36).slice(2,6)}`}a(oh,"ko"),Tl.allowedChildren=[bi],bi.requiredContainer=Tl,bi.allowedChildren=[es],es.requiredContainer=bi,es.allowedChildren=[vn],vn.requiredContainer=es;let _x=class extends gn{static{a(this,"_o")}static register(){Y.register(vn),Y.register(es),Y.register(bi),Y.register(Tl)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Tl).forEach(o=>{o.balanceCells()})}deleteColumn(){let[o,,i]=this.getTable();i!=null&&(o.deleteColumn(i.cellOffset()),this.quill.update(Y.sources.USER))}deleteRow(){let[,o]=this.getTable();o!=null&&(o.remove(),this.quill.update(Y.sources.USER))}deleteTable(){let[o]=this.getTable();if(o==null)return;let i=o.offset();o.remove(),this.quill.update(Y.sources.USER),this.quill.setSelection(i,Y.sources.SILENT)}getTable(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(o==null)return[null,null,null,-1];let[i,l]=this.quill.getLine(o.index);if(i==null||i.statics.blotName!==vn.blotName)return[null,null,null,-1];let u=i.parent;return[u.parent.parent,u,i,l]}insertColumn(o){let i=this.quill.getSelection();if(!i)return;let[l,u,f]=this.getTable(i);if(f==null)return;let m=f.cellOffset();l.insertColumn(m+o),this.quill.update(Y.sources.USER);let y=u.rowOffset();o===0&&(y+=1),this.quill.setSelection(i.index+y,i.length,Y.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(o){let i=this.quill.getSelection();if(!i)return;let[l,u,f]=this.getTable(i);if(f==null)return;let m=u.rowOffset();l.insertRow(m+o),this.quill.update(Y.sources.USER),o>0?this.quill.setSelection(i,Y.sources.SILENT):this.quill.setSelection(i.index+u.children.length,i.length,Y.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(o,i){let l=this.quill.getSelection();if(l==null)return;let u=new Array(o).fill(0).reduce(f=>{let m=new Array(i).fill(`
`).join("");return f.insert(m,{table:oh()})},new me().retain(l.index));this.quill.updateContents(u,Y.sources.USER),this.quill.setSelection(l.index,Y.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Y.events.SCROLL_OPTIMIZE,o=>{o.some(i=>!!["TD","TR","TBODY","TABLE"].includes(i.target.tagName)&&(this.quill.once(Y.events.TEXT_CHANGE,(l,u,f)=>{f===Y.sources.USER&&this.balanceTables()}),!0))})}},Om=Zi("quill:toolbar");class ah extends gn{static{a(this,"Oo")}constructor(i,l){if(super(i,l),Array.isArray(this.options.container)){let u=document.createElement("div");u.setAttribute("role","toolbar"),function(f,m){Array.isArray(m[0])||(m=[m]),m.forEach(y=>{let w=document.createElement("span");w.classList.add("ql-formats"),y.forEach(k=>{if(typeof k=="string")km(w,k);else{let z=Object.keys(k)[0],Q=k[z];Array.isArray(Q)?function(ge,be,Se){let Ae=document.createElement("select");Ae.classList.add(`ql-${be}`),Se.forEach(De=>{let ht=document.createElement("option");De!==!1?ht.setAttribute("value",String(De)):ht.setAttribute("selected","selected"),Ae.appendChild(ht)}),ge.appendChild(Ae)}(w,z,Q):km(w,z,Q)}}),f.appendChild(w)})}(u,this.options.container),i.container?.parentNode?.insertBefore(u,i.container),this.container=u}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(u=>{let f=this.options.handlers?.[u];f&&this.addHandler(u,f)}),Array.from(this.container.querySelectorAll("button, select")).forEach(u=>{this.attach(u)}),this.quill.on(Y.events.EDITOR_CHANGE,()=>{let[u]=this.quill.selection.getRange();this.update(u)})):Om.error("Container required for toolbar",this.options)}addHandler(i,l){this.handlers[i]=l}attach(i){let l=Array.from(i.classList).find(f=>f.indexOf("ql-")===0);if(!l)return;if(l=l.slice(3),i.tagName==="BUTTON"&&i.setAttribute("type","button"),this.handlers[l]==null&&this.quill.scroll.query(l)==null)return void Om.warn("ignoring attaching to nonexistent format",l,i);let u=i.tagName==="SELECT"?"change":"click";i.addEventListener(u,f=>{let m;if(i.tagName==="SELECT"){if(i.selectedIndex<0)return;let w=i.options[i.selectedIndex];m=!w.hasAttribute("selected")&&(w.value||!1)}else m=!i.classList.contains("ql-active")&&(i.value||!i.hasAttribute("value")),f.preventDefault();this.quill.focus();let[y]=this.quill.selection.getRange();if(this.handlers[l]!=null)this.handlers[l].call(this,m);else if(this.quill.scroll.query(l).prototype instanceof Vr){if(m=prompt(`Enter ${l}`),!m)return;this.quill.updateContents(new me().retain(y.index).delete(y.length).insert({[l]:m}),Y.sources.USER)}else this.quill.format(l,m,Y.sources.USER);this.update(y)}),this.controls.push([l,i])}update(i){let l=i==null?{}:this.quill.getFormat(i);this.controls.forEach(u=>{let[f,m]=u;if(m.tagName==="SELECT"){let y=null;if(i==null)y=null;else if(l[f]==null)y=m.querySelector("option[selected]");else if(!Array.isArray(l[f])){let w=l[f];typeof w=="string"&&(w=w.replace(/"/g,'\\"')),y=m.querySelector(`option[value="${w}"]`)}y==null?(m.value="",m.selectedIndex=-1):y.selected=!0}else if(i==null)m.classList.remove("ql-active"),m.setAttribute("aria-pressed","false");else if(m.hasAttribute("value")){let y=l[f],w=y===m.getAttribute("value")||y!=null&&y.toString()===m.getAttribute("value")||y==null&&!m.getAttribute("value");m.classList.toggle("ql-active",w),m.setAttribute("aria-pressed",w.toString())}else{let y=l[f]!=null;m.classList.toggle("ql-active",y),m.setAttribute("aria-pressed",y.toString())}})}}function km(o,i,l){let u=document.createElement("button");u.setAttribute("type","button"),u.classList.add(`ql-${i}`),u.setAttribute("aria-pressed","false"),l!=null?(u.value=l,u.setAttribute("aria-label",`${i}: ${l}`)):u.setAttribute("aria-label",i),o.appendChild(u)}a(km,"To"),ah.DEFAULTS={},ah.DEFAULTS={container:null,handlers:{clean(){let o=this.quill.getSelection();if(o!=null)if(o.length===0){let i=this.quill.getFormat();Object.keys(i).forEach(l=>{this.quill.scroll.query(l,Ee.INLINE)!=null&&this.quill.format(l,!1,Y.sources.USER)})}else this.quill.removeFormat(o.index,o.length,Y.sources.USER)},direction(o){let{align:i}=this.quill.getFormat();o==="rtl"&&i==null?this.quill.format("align","right",Y.sources.USER):o||i!=="right"||this.quill.format("align",!1,Y.sources.USER),this.quill.format("direction",o,Y.sources.USER)},indent(o){let i=this.quill.getSelection(),l=this.quill.getFormat(i),u=parseInt(l.indent||0,10);if(o==="+1"||o==="-1"){let f=o==="+1"?1:-1;l.direction==="rtl"&&(f*=-1),this.quill.format("indent",u+f,Y.sources.USER)}},link(o){o===!0&&(o=prompt("Enter link URL:")),this.quill.format("link",o,Y.sources.USER)},list(o){let i=this.quill.getSelection(),l=this.quill.getFormat(i);o==="check"?l.list==="checked"||l.list==="unchecked"?this.quill.format("list",!1,Y.sources.USER):this.quill.format("list","unchecked",Y.sources.USER):this.quill.format("list",o,Y.sources.USER)}}};let _m='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Ko={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:_m,"code-block":_m,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},qm=0;function Mm(o,i){o.setAttribute(i,`${o.getAttribute(i)!=="true"}`)}a(Mm,"Ro");let Al=class{static{a(this,"Io")}constructor(o){this.select=o,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),i.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Mm(this.label,"aria-expanded"),Mm(this.options,"aria-hidden")}buildItem(o){let i=document.createElement("span");i.tabIndex="0",i.setAttribute("role","button"),i.classList.add("ql-picker-item");let l=o.getAttribute("value");return l&&i.setAttribute("data-value",l),o.textContent&&i.setAttribute("data-label",o.textContent),i.addEventListener("click",()=>{this.selectItem(i,!0)}),i.addEventListener("keydown",u=>{switch(u.key){case"Enter":this.selectItem(i,!0),u.preventDefault();break;case"Escape":this.escape(),u.preventDefault()}}),i}buildLabel(){let o=document.createElement("span");return o.classList.add("ql-picker-label"),o.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',o.tabIndex="0",o.setAttribute("role","button"),o.setAttribute("aria-expanded","false"),this.container.appendChild(o),o}buildOptions(){let o=document.createElement("span");o.classList.add("ql-picker-options"),o.setAttribute("aria-hidden","true"),o.tabIndex="-1",o.id=`ql-picker-options-${qm}`,qm+=1,this.label.setAttribute("aria-controls",o.id),this.options=o,Array.from(this.select.options).forEach(i=>{let l=this.buildItem(i);o.appendChild(l),i.selected===!0&&this.selectItem(l)}),this.container.appendChild(o)}buildPicker(){Array.from(this.select.attributes).forEach(o=>{this.container.setAttribute(o.name,o.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(o){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],l=this.container.querySelector(".ql-selected");o!==l&&(l?.classList.remove("ql-selected"),o!=null&&(o.classList.add("ql-selected"),this.select.selectedIndex=Array.from(o.parentNode.children).indexOf(o),o.hasAttribute("data-value")?this.label.setAttribute("data-value",o.getAttribute("data-value")):this.label.removeAttribute("data-value"),o.hasAttribute("data-label")?this.label.setAttribute("data-label",o.getAttribute("data-label")):this.label.removeAttribute("data-label"),i&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let o;if(this.select.selectedIndex>-1){let l=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];o=this.select.options[this.select.selectedIndex],this.selectItem(l)}else this.selectItem(null);let i=o!=null&&o!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",i)}},Im=class extends Al{static{a(this,"Mo")}constructor(o,i){super(o),this.label.innerHTML=i,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(l=>{l.classList.add("ql-primary")})}buildItem(o){let i=super.buildItem(o);return i.style.backgroundColor=o.getAttribute("value")||"",i}selectItem(o,i){super.selectItem(o,i);let l=this.label.querySelector(".ql-color-label"),u=o&&o.getAttribute("data-value")||"";l&&(l.tagName==="line"?l.style.stroke=u:l.style.fill=u)}},Dm=class extends Al{static{a(this,"Bo")}constructor(o,i){super(o),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(l=>{l.innerHTML=i[l.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(o,i){super.selectItem(o,i);let l=o||this.defaultItem;if(l!=null){if(this.label.innerHTML===l.innerHTML)return;this.label.innerHTML=l.innerHTML}}},Rm=class{static{a(this,"Uo")}constructor(o,i){this.quill=o,this.boundsContainer=i||document.body,this.root=o.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(l=>{let{overflowY:u}=getComputedStyle(l,null);return u!=="visible"&&u!=="clip"})(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(o){let i=o.left+o.width/2-this.root.offsetWidth/2,l=o.bottom+this.quill.root.scrollTop;this.root.style.left=`${i}px`,this.root.style.top=`${l}px`,this.root.classList.remove("ql-flip");let u=this.boundsContainer.getBoundingClientRect(),f=this.root.getBoundingClientRect(),m=0;if(f.right>u.right&&(m=u.right-f.right,this.root.style.left=`${i+m}px`),f.left<u.left&&(m=u.left-f.left,this.root.style.left=`${i+m}px`),f.bottom>u.bottom){let y=f.bottom-f.top,w=o.bottom-o.top+y;this.root.style.top=l-w+"px",this.root.classList.add("ql-flip")}return m}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},qx=[!1,"center","right","justify"],Mx=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ix=[!1,"serif","monospace"],Dx=["1","2","3",!1],Rx=["small",!1,"large","huge"];class Go extends gl{static{a(this,"$o")}constructor(i,l){super(i,l);let u=a(f=>{document.body.contains(i.root)?(this.tooltip==null||this.tooltip.root.contains(f.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(m=>{m.container.contains(f.target)||m.close()})):document.body.removeEventListener("click",u)},"n");i.emitter.listenDOM("click",document.body,u)}addModule(i){let l=super.addModule(i);return i==="toolbar"&&this.extendToolbar(l),l}buildButtons(i,l){Array.from(i).forEach(u=>{(u.getAttribute("class")||"").split(/\s+/).forEach(f=>{if(f.startsWith("ql-")&&(f=f.slice(3),l[f]!=null))if(f==="direction")u.innerHTML=l[f][""]+l[f].rtl;else if(typeof l[f]=="string")u.innerHTML=l[f];else{let m=u.value||"";m!=null&&l[f][m]&&(u.innerHTML=l[f][m])}})})}buildPickers(i,l){this.pickers=Array.from(i).map(u=>{if(u.classList.contains("ql-align")&&(u.querySelector("option")==null&&Yo(u,qx),typeof l.align=="object"))return new Dm(u,l.align);if(u.classList.contains("ql-background")||u.classList.contains("ql-color")){let f=u.classList.contains("ql-background")?"background":"color";return u.querySelector("option")==null&&Yo(u,Mx,f==="background"?"#ffffff":"#000000"),new Im(u,l[f])}return u.querySelector("option")==null&&(u.classList.contains("ql-font")?Yo(u,Ix):u.classList.contains("ql-header")?Yo(u,Dx):u.classList.contains("ql-size")&&Yo(u,Rx)),new Al(u)}),this.quill.on(Te.events.EDITOR_CHANGE,()=>{this.pickers.forEach(u=>{u.update()})})}}Go.DEFAULTS=Ur({},gl.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let o=this.container.querySelector("input.ql-image[type=file]");o==null&&(o=document.createElement("input"),o.setAttribute("type","file"),o.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),o.classList.add("ql-image"),o.addEventListener("change",()=>{let i=this.quill.getSelection(!0);this.quill.uploader.upload(i,o.files),o.value=""}),this.container.appendChild(o)),o.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Pm extends Rm{static{a(this,"Vo")}constructor(i,l){super(i,l),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",i=>{i.key==="Enter"?(this.save(),i.preventDefault()):i.key==="Escape"&&(this.cancel(),i.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;l!=null?this.textbox.value=l:i!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let u=this.quill.getBounds(this.quill.selection.savedRange);u!=null&&this.position(u),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${i}`)||""),this.root.setAttribute("data-mode",i)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:i}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:l}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",i,Te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",i,Te.sources.USER)),this.quill.root.scrollTop=l;break}case"video":i=function(l){let u=l.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||l.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return u?`${u[1]||"https"}://www.youtube.com/embed/${u[2]}?showinfo=0`:(u=l.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${u[1]||"https"}://player.vimeo.com/video/${u[2]}/`:l}(i);case"formula":{if(!i)break;let l=this.quill.getSelection(!0);if(l!=null){let u=l.index+l.length;this.quill.insertEmbed(u,this.root.getAttribute("data-mode"),i,Te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(u+1," ",Te.sources.USER),this.quill.setSelection(u+2,Te.sources.USER)}break}}this.textbox.value="",this.hide()}}function Yo(o,i){let l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];i.forEach(u=>{let f=document.createElement("option");u===l?f.setAttribute("selected","selected"):f.setAttribute("value",String(u)),o.appendChild(f)})}a(Yo,"Ko");let Px=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class jx extends Pm{static{a(this,"Zo")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(i,l){super(i,l),this.quill.on(Te.events.EDITOR_CHANGE,(u,f,m,y)=>{if(u===Te.events.SELECTION_CHANGE)if(f!=null&&f.length>0&&y===Te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let w=this.quill.getLines(f.index,f.length);if(w.length===1){let k=this.quill.getBounds(f);k!=null&&this.position(k)}else{let k=w[w.length-1],z=this.quill.getIndex(k),Q=Math.min(k.length()-1,f.index+f.length-z),ge=this.quill.getBounds(new mi(z,Q));ge!=null&&this.position(ge)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let i=this.quill.getSelection();if(i!=null){let l=this.quill.getBounds(i);l!=null&&this.position(l)}},1)})}cancel(){this.show()}position(i){let l=super.position(i),u=this.root.querySelector(".ql-tooltip-arrow");return u.style.marginLeft="",l!==0&&(u.style.marginLeft=-1*l-u.offsetWidth/2+"px"),l}}class jm extends Go{static{a(this,"Go")}constructor(i,l){l.modules.toolbar!=null&&l.modules.toolbar.container==null&&(l.modules.toolbar.container=Px),super(i,l),this.quill.container.classList.add("ql-bubble")}extendToolbar(i){this.tooltip=new jx(this.quill,this.options.bounds),i.container!=null&&(this.tooltip.root.appendChild(i.container),this.buildButtons(i.container.querySelectorAll("button"),Ko),this.buildPickers(i.container.querySelectorAll("select"),Ko))}}jm.DEFAULTS=Ur({},Go.DEFAULTS,{modules:{toolbar:{handlers:{link(o){o?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Y.sources.USER)}}}}});let Bx=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Fx extends Pm{static{a(this,"Qo")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",i=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),i.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",i=>{if(this.linkRange!=null){let l=this.linkRange;this.restoreFocus(),this.quill.formatText(l,"link",!1,Te.sources.USER),delete this.linkRange}i.preventDefault(),this.hide()}),this.quill.on(Te.events.SELECTION_CHANGE,(i,l,u)=>{if(i!=null){if(i.length===0&&u===Te.sources.USER){let[f,m]=this.quill.scroll.descendant(El,i.index);if(f!=null){this.linkRange=new mi(i.index-m,f.length());let y=El.formats(f.domNode);this.preview.textContent=y,this.preview.setAttribute("href",y),this.show();let w=this.quill.getBounds(this.linkRange);return void(w!=null&&this.position(w))}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class Bm extends Go{static{a(this,"Yo")}constructor(i,l){l.modules.toolbar!=null&&l.modules.toolbar.container==null&&(l.modules.toolbar.container=Bx),super(i,l),this.quill.container.classList.add("ql-snow")}extendToolbar(i){i.container!=null&&(i.container.classList.add("ql-snow"),this.buildButtons(i.container.querySelectorAll("button"),Ko),this.buildPickers(i.container.querySelectorAll("select"),Ko),this.tooltip=new Fx(this.quill,this.options.bounds),i.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(l,u)=>{i.handlers.link.call(i,!u.format.link)}))}}Bm.DEFAULTS=Ur({},Go.DEFAULTS,{modules:{toolbar:{handlers:{link(o){if(o){let i=this.quill.getSelection();if(i==null||i.length===0)return;let l=this.quill.getText(i);/^\S+@\S+\.\S+$/.test(l)&&l.indexOf("mailto:")!==0&&(l=`mailto:${l}`);let{tooltip:u}=this.quill.theme;u.edit("link",l)}else this.quill.format("link",!1,Y.sources.USER)}}}}});let Hx=Bm;ih.register({"attributors/attribute/direction":cm,"attributors/class/align":om,"attributors/class/background":ex,"attributors/class/color":Qw,"attributors/class/direction":um,"attributors/class/font":fm,"attributors/class/size":mm,"attributors/style/align":am,"attributors/style/background":Zu,"attributors/style/color":Yu,"attributors/style/direction":hm,"attributors/style/font":pm,"attributors/style/size":gm},!0),ih.register({"formats/align":om,"formats/direction":um,"formats/indent":xx,"formats/background":Zu,"formats/color":Yu,"formats/font":fm,"formats/size":mm,"formats/blockquote":Ex,"formats/code-block":Er,"formats/header":Tx,"formats/list":zo,"formats/bold":sh,"formats/code":Xu,"formats/italic":Ax,"formats/link":El,"formats/script":Sx,"formats/strike":Nx,"formats/underline":Cx,"formats/formula":Lx,"formats/image":Ox,"formats/video":kx,"modules/syntax":Lm,"modules/table":_x,"modules/toolbar":ah,"themes/bubble":jm,"themes/snow":Hx,"ui/icons":Ko,"ui/picker":Al,"ui/icon-picker":Dm,"ui/color-picker":Im,"ui/tooltip":Rm},!0);let Ux=ih}},e={};function t(n){var s=e[n];if(s!==void 0)return s.exports;var c=e[n]={id:n,loaded:!1,exports:{}};return r[n].call(c.exports,c,c.exports,t),c.loaded=!0,c.exports}return a(t,"n"),t.d=(n,s)=>{for(var c in s)t.o(s,c)&&!t.o(n,c)&&Object.defineProperty(n,c,{enumerable:!0,get:s[c]})},t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t.o=(n,s)=>Object.prototype.hasOwnProperty.call(n,s),t.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),t(190)})())});var Uh={};ch(Uh,{FetchEnctype:()=>wi,FetchMethod:()=>zr,FetchRequest:()=>Ei,FetchResponse:()=>Vs,FrameElement:()=>wn,FrameLoadingStyle:()=>rs,FrameRenderer:()=>Ws,PageRenderer:()=>ss,PageSnapshot:()=>Qr,StreamActions:()=>Hh,StreamElement:()=>Pl,StreamSourceElement:()=>jl,cache:()=>ag,clearCache:()=>dg,connectStreamSource:()=>ea,disconnectStreamSource:()=>ta,fetch:()=>Bh,fetchEnctypeFromString:()=>ng,fetchMethodFromString:()=>Bl,isSafe:()=>Fl,navigator:()=>lg,registerAdapter:()=>cg,renderStreamMessage:()=>hg,session:()=>Ot,setConfirmMethod:()=>pg,setFormMode:()=>mg,setProgressBarDelay:()=>fg,start:()=>Fh,visit:()=>ug});(function(r){if(typeof r.requestSubmit=="function")return;r.requestSubmit=function(n){n?(e(n,this),n.click()):(n=document.createElement("input"),n.type="submit",n.hidden=!0,this.appendChild(n),n.click(),this.removeChild(n))};function e(n,s){n instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),n.type=="submit"||t(TypeError,"The specified element is not a submit button"),n.form==s||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}a(e,"validateSubmitter");function t(n,s,c){throw new n("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+s+".",c)}a(t,"raise")})(HTMLFormElement.prototype);var Km=new WeakMap;function Zx(r){let e=r instanceof Element?r:r instanceof Node?r.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}a(Zx,"findSubmitterFromClickTarget");function Xx(r){let e=Zx(r.target);e&&e.form&&Km.set(e.form,e)}a(Xx,"clickCaptured");(function(){if("submitter"in Event.prototype)return;let r=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))r=e;else return}addEventListener("click",Xx,!0),Object.defineProperty(r,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Km.get(this.target)}})})();var rs={eager:"eager",lazy:"lazy"},wn=class r extends HTMLElement{static{a(this,"FrameElement")}static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new r.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get loading(){return Jx(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function Jx(r){switch(r.toLowerCase()){case"lazy":return rs.lazy;default:return rs.eager}}a(Jx,"frameLoadingStyleFromString");function Qt(r){return new URL(r.toString(),document.baseURI)}a(Qt,"expandURL");function ns(r){let e;if(r.hash)return r.hash.slice(1);if(e=r.href.match(/#(.*)$/))return e[1]}a(ns,"getAnchor");function Ph(r,e){let t=e?.getAttribute("formaction")||r.getAttribute("action")||r.action;return Qt(t)}a(Ph,"getAction$1");function Qx(r){return(iE(r).match(/\.[^.]*$/)||[])[0]||""}a(Qx,"getExtension");function eE(r){return!!Qx(r).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}a(eE,"isHTML");function tE(r,e){let t=sE(e);return r.href===Qt(t).href||r.href.startsWith(t)}a(tE,"isPrefixedBy");function yi(r,e){return tE(r,e)&&eE(r)}a(yi,"locationIsVisitable");function uh(r){let e=ns(r);return e!=null?r.href.slice(0,-(e.length+1)):r.href}a(uh,"getRequestURL");function Nl(r){return uh(r)}a(Nl,"toCacheKey");function rE(r,e){return Qt(r).href==Qt(e).href}a(rE,"urlsAreEqual");function nE(r){return r.pathname.split("/").slice(1)}a(nE,"getPathComponents");function iE(r){return nE(r).slice(-1)[0]}a(iE,"getLastPathComponent");function sE(r){return oE(r.origin+r.pathname)}a(sE,"getPrefix");function oE(r){return r.endsWith("/")?r:r+"/"}a(oE,"addTrailingSlash");var Vs=class{static{a(this,"FetchResponse")}constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Qt(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function Zo(r){if(r.getAttribute("data-turbo-eval")=="false")return r;{let e=document.createElement("script"),t=zs("csp-nonce");return t&&(e.nonce=t),e.textContent=r.textContent,e.async=!1,aE(e,r),e}}a(Zo,"activateScriptElement");function aE(r,e){for(let{name:t,value:n}of e.attributes)r.setAttribute(t,n)}a(aE,"copyElementAttributes");function lE(r){let e=document.createElement("template");return e.innerHTML=r,e.content}a(lE,"createDocumentFragment");function Mt(r,{target:e,cancelable:t,detail:n}={}){let s=new CustomEvent(r,{cancelable:t,bubbles:!0,composed:!0,detail:n});return e&&e.isConnected?e.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}a(Mt,"dispatch");function Fs(){return document.visibilityState==="hidden"?Ym():Gm()}a(Fs,"nextRepaint");function Gm(){return new Promise(r=>requestAnimationFrame(()=>r()))}a(Gm,"nextAnimationFrame");function Ym(){return new Promise(r=>setTimeout(()=>r(),0))}a(Ym,"nextEventLoopTick");function cE(){return Promise.resolve()}a(cE,"nextMicrotask");function Zm(r=""){return new DOMParser().parseFromString(r,"text/html")}a(Zm,"parseHTMLDocument");function Xm(r,...e){let t=uE(r,e).replace(/^\n/,"").split(`
`),n=t[0].match(/^\s+/),s=n?n[0].length:0;return t.map(c=>c.slice(s)).join(`
`)}a(Xm,"unindent");function uE(r,e){return r.reduce((t,n,s)=>{let c=e[s]==null?"":e[s];return t+n+c},"")}a(uE,"interpolate");function xi(){return Array.from({length:36}).map((r,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}a(xi,"uuid");function Ll(r,...e){for(let t of e.map(n=>n?.getAttribute(r)))if(typeof t=="string")return t;return null}a(Ll,"getAttribute");function hE(r,...e){return e.some(t=>t&&t.hasAttribute(r))}a(hE,"hasAttribute");function Ol(...r){for(let e of r)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}a(Ol,"markAsBusy");function kl(...r){for(let e of r)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}a(kl,"clearBusyState");function dE(r,e=2e3){return new Promise(t=>{let n=a(()=>{r.removeEventListener("error",n),r.removeEventListener("load",n),t()},"onComplete");r.addEventListener("load",n,{once:!0}),r.addEventListener("error",n,{once:!0}),setTimeout(t,e)})}a(dE,"waitForLoad");function Jm(r){switch(r){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}a(Jm,"getHistoryMethodForAction");function fE(r){return r=="advance"||r=="replace"||r=="restore"}a(fE,"isAction");function is(...r){let e=Ll("data-turbo-action",...r);return fE(e)?e:null}a(is,"getVisitAction");function Qm(r){return document.querySelector(`meta[name="${r}"]`)}a(Qm,"getMetaElement");function zs(r){let e=Qm(r);return e&&e.content}a(zs,"getMetaContent");function pE(r,e){let t=Qm(r);return t||(t=document.createElement("meta"),t.setAttribute("name",r),document.head.appendChild(t)),t.setAttribute("content",e),t}a(pE,"setMetaContent");function Hs(r,e){if(r instanceof Element)return r.closest(e)||Hs(r.assignedSlot||r.getRootNode()?.host,e)}a(Hs,"findClosestRecursively");function jh(r){return!!r&&r.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof r.focus=="function"}a(jh,"elementIsFocusable");function eg(r){return Array.from(r.querySelectorAll("[autofocus]")).find(jh)}a(eg,"queryAutofocusableElement");async function mE(r,e){let t=e();r(),await Gm();let n=e();return[t,n]}a(mE,"around");function gE(r){if(r.hasAttribute("target")){for(let e of document.getElementsByName(r.target))if(e instanceof HTMLIFrameElement)return!1}return!0}a(gE,"doesNotTargetIFrame");function bE(r){return Hs(r,"a[href]:not([target^=_]):not([download])")}a(bE,"findLinkFromClickTarget");function tg(r){return Qt(r.getAttribute("href")||"")}a(tg,"getLocationForLink");function vE(r,e){let t=null;return(...n)=>{let s=a(()=>r.apply(this,n),"callback");clearTimeout(t),t=setTimeout(s,e)}}a(vE,"debounce");var hh=class extends Set{static{a(this,"LimitedSet")}constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let n=this.values().next().value;this.delete(n)}super.add(e)}},rg=new hh(20),yE=window.fetch;function Bh(r,e={}){let t=new Headers(e.headers||{}),n=xi();return rg.add(n),t.append("X-Turbo-Request-Id",n),yE(r,{...e,headers:t})}a(Bh,"fetchWithTurboHeaders");function Bl(r){switch(r.toLowerCase()){case"get":return zr.get;case"post":return zr.post;case"put":return zr.put;case"patch":return zr.patch;case"delete":return zr.delete}}a(Bl,"fetchMethodFromString");var zr={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function ng(r){switch(r.toLowerCase()){case wi.multipart:return wi.multipart;case wi.plain:return wi.plain;default:return wi.urlEncoded}}a(ng,"fetchEnctypeFromString");var wi={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Ei=class{static{a(this,"FetchRequest")}abortController=new AbortController;#e=e=>{};constructor(e,t,n,s=new URLSearchParams,c=null,h=wi.urlEncoded){let[d,p]=Um(Qt(n),t,s,h);this.delegate=e,this.url=d,this.target=c,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t,headers:{...this.defaultHeaders},body:p,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=h}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,n=Bl(e)||zr.get;this.url.search="";let[s,c]=Um(this.url,n,t,this.enctype);this.url=s,this.fetchOptions.body=c,this.fetchOptions.method=n}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=Bh(this.url.href,e);let n=await this.response;return await this.receive(n)}catch(n){if(n.name!=="AbortError")throw this.#r(n)&&this.delegate.requestErrored(this,n),n}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new Vs(e);return Mt("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Fl(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let t=new Promise(s=>this.#e=s),n=Mt("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=n.detail.url,n.defaultPrevented&&await t,n}#r(e){return!Mt("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function Fl(r){return Bl(r)==zr.get}a(Fl,"isSafe");function Um(r,e,t,n){let s=Array.from(t).length>0?new URLSearchParams(ig(t)):r.searchParams;return Fl(e)?[wE(r,s),null]:n==wi.urlEncoded?[r,s]:[r,t]}a(Um,"buildResourceAndBody");function ig(r){let e=[];for(let[t,n]of r)n instanceof File||e.push([t,n]);return e}a(ig,"entriesExcludingFiles");function wE(r,e){let t=new URLSearchParams(ig(e));return r.search=t.toString(),r}a(wE,"mergeIntoURLSearchParams");var dh=class{static{a(this,"AppearanceObserver")}started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Ti=class{static{a(this,"StreamMessage")}static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(lE(e)):e}constructor(e){this.fragment=xE(e)}};function xE(r){for(let e of r.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let n of t.templateElement.content.querySelectorAll("script"))n.replaceWith(Zo(n));e.replaceWith(t)}return r}a(xE,"importStreamElements");var EE=100,fh=class{static{a(this,"PrefetchCache")}#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,t,n){this.clear(),this.#e=setTimeout(()=>{t.perform(),this.set(e,t,n),this.#e=null},EE)}set(e,t,n){this.#t={url:e,request:t,expire:new Date(new Date().getTime()+n)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},TE=10*1e3,Bs=new fh,js={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},Xo=class r{static{a(this,"FormSubmission")}state=js.initialized;static confirmMethod(e,t,n){return Promise.resolve(confirm(e))}constructor(e,t,n,s=!1){let c=OE(t,n),h=LE(CE(t,n),c),d=AE(t,n),p=kE(t,n);this.delegate=e,this.formElement=t,this.submitter=n,this.fetchRequest=new Ei(this,c,h,d,t,p),this.mustRedirect=s}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=Qt(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=js,n=Ll("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof n=="string"&&!await r.confirmMethod(n,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=js;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=SE(zs("csrf-param"))||zs("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Ti.contentType)}requestStarted(e){this.state=js.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),Ol(this.formElement),Mt("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){Bs.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(Bs.clear(),this.requestMustRedirect(e)&&NE(t)){let n=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,n)}else this.state=js.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=js.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),kl(this.formElement),Mt("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||hE("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function AE(r,e){let t=new FormData(r),n=e?.getAttribute("name"),s=e?.getAttribute("value");return n&&t.append(n,s||""),t}a(AE,"buildFormData");function SE(r){if(r!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(n=>n.startsWith(r));if(t){let n=t.split("=").slice(1).join("=");return n?decodeURIComponent(n):void 0}}}a(SE,"getCookieValue");function NE(r){return r.statusCode==200&&!r.redirected}a(NE,"responseSucceededWithoutRedirect");function CE(r,e){let t=typeof r.action=="string"?r.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":r.getAttribute("action")||t||""}a(CE,"getFormAction");function LE(r,e){let t=Qt(r);return Fl(e)&&(t.search=""),t}a(LE,"getAction");function OE(r,e){let t=e?.getAttribute("formmethod")||r.getAttribute("method")||"";return Bl(t.toLowerCase())||zr.get}a(OE,"getMethod");function kE(r,e){return ng(e?.getAttribute("formenctype")||r.enctype)}a(kE,"getEnctype");var $s=class{static{a(this,"Snapshot")}constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return eg(this.element)}get permanentElements(){return og(this.element)}getPermanentElementById(e){return sg(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let n of this.permanentElements){let{id:s}=n,c=e.getPermanentElementById(s);c&&(t[s]=[n,c])}return t}};function sg(r,e){return r.querySelector(`#${e}[data-turbo-permanent]`)}a(sg,"getPermanentElementById");function og(r){return r.querySelectorAll("[id][data-turbo-permanent]")}a(og,"queryPermanentElementsAll");var Jo=class{static{a(this,"FormSubmitObserver")}started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,n=e.submitter||void 0;t&&_E(t,n)&&qE(t,n)&&this.delegate.willSubmitForm(t,n)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,n))}}};function _E(r,e){return(e?.getAttribute("formmethod")||r.getAttribute("method"))!="dialog"}a(_E,"submissionDoesNotDismissDialog");function qE(r,e){if(e?.hasAttribute("formtarget")||r.hasAttribute("target")){let t=e?.getAttribute("formtarget")||r.target;for(let n of document.getElementsByName(t))if(n instanceof HTMLIFrameElement)return!1;return!0}else return!0}a(qE,"submissionDoesNotTargetIFrame");var _l=class{static{a(this,"View")}#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(ns(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:n,willRender:s,newSnapshot:c}=e,h=s;if(n)try{this.renderPromise=new Promise(b=>this.#e=b),this.renderer=e,await this.prepareToRenderSnapshot(e);let d=new Promise(b=>this.#t=b),p={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(c,p)||await d,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(c,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else h&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},ph=class extends _l{static{a(this,"FrameView")}missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new $s(this.element)}},ql=class{static{a(this,"LinkInterceptor")}constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};respondsToEventTarget(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}},Ml=class{static{a(this,"LinkClickObserver")}started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,n=bE(t);if(n&&gE(n)){let s=tg(n);this.delegate.willFollowLinkToLocation(n,s,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(n,s))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},Il=class{static{a(this,"FormLinkClickObserver")}constructor(e,t){this.delegate=e,this.linkInterceptor=new Ml(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,n){return this.delegate.willSubmitFormLinkToLocation(e,t,n)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let n=document.createElement("form"),s="hidden";for(let[v,E]of t.searchParams)n.append(Object.assign(document.createElement("input"),{type:s,name:v,value:E}));let c=Object.assign(t,{search:""});n.setAttribute("data-turbo","true"),n.setAttribute("action",c.href),n.setAttribute("hidden","");let h=e.getAttribute("data-turbo-method");h&&n.setAttribute("method",h);let d=e.getAttribute("data-turbo-frame");d&&n.setAttribute("data-turbo-frame",d);let p=is(e);p&&n.setAttribute("data-turbo-action",p);let g=e.getAttribute("data-turbo-confirm");g&&n.setAttribute("data-turbo-confirm",g),e.hasAttribute("data-turbo-stream")&&n.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,n),document.body.appendChild(n),n.addEventListener("turbo:submit-end",()=>n.remove(),{once:!0}),requestAnimationFrame(()=>n.requestSubmit())}},Dl=class{static{a(this,"Bardo")}static async preservingPermanentElements(e,t,n){let s=new this(e,t);s.enter(),await n(),s.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,n]=this.permanentElementMap[e];this.delegate.enteringBardo(t,n),this.replaceNewPermanentElementWithPlaceholder(n)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=ME(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function ME(r){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",r.id),e}a(ME,"createPlaceholderForPermanentElement");var Qo=class{static{a(this,"Renderer")}#e=null;constructor(e,t,n,s,c=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=s,this.willRender=c,this.renderElement=n,this.promise=new Promise((h,d)=>this.resolvingFunctions={resolve:h,reject:d})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await Dl.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},Ws=class extends Qo{static{a(this,"FrameRenderer")}static renderElement(e,t){let n=document.createRange();n.selectNodeContents(e),n.deleteContents();let s=t,c=s.ownerDocument?.createRange();c&&(c.selectNodeContents(s),e.appendChild(c.extractContents()))}constructor(e,t,n,s,c,h=!0){super(t,n,s,c,h),this.delegate=e}get shouldRender(){return!0}async render(){await Fs(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Fs(),this.focusFirstAutofocusableElement(),await Fs(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=IE(this.currentElement.getAttribute("data-autoscroll-block"),"end"),n=DE(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:n}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=Zo(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function IE(r,e){return r=="end"||r=="start"||r=="center"||r=="nearest"?r:e}a(IE,"readScrollLogicalPosition");function DE(r,e){return r=="auto"||r=="smooth"?r:e}a(DE,"readScrollBehavior");var mh=class r{static{a(this,"ProgressBar")}static animationDuration=300;static get defaultCSS(){return Xm`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${r.animationDuration}ms ease-out,
          opacity ${r.animationDuration/2}ms ${r.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,r.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,r.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=r.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return zs("csp-nonce")}},gh=class extends $s{static{a(this,"HeadSnapshot")}detailsByOuterHTML=this.children.filter(e=>!BE(e)).map(e=>UE(e)).reduce((e,t)=>{let{outerHTML:n}=t,s=n in e?e[n]:{type:RE(t),tracked:PE(t),elements:[]};return{...e,[n]:{...s,elements:[...s.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(n=>!(n in t.detailsByOuterHTML)).map(n=>this.detailsByOuterHTML[n]).filter(({type:n})=>n==e).map(({elements:[n]})=>n)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:n,tracked:s,elements:c}=this.detailsByOuterHTML[t];return n==null&&!s?[...e,...c]:c.length>1?[...e,...c.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,n)=>{let{elements:[s]}=this.detailsByOuterHTML[n];return HE(s,e)?s:t},void 0|void 0)}};function RE(r){if(jE(r))return"script";if(FE(r))return"stylesheet"}a(RE,"elementType");function PE(r){return r.getAttribute("data-turbo-track")=="reload"}a(PE,"elementIsTracked");function jE(r){return r.localName=="script"}a(jE,"elementIsScript");function BE(r){return r.localName=="noscript"}a(BE,"elementIsNoscript");function FE(r){let e=r.localName;return e=="style"||e=="link"&&r.getAttribute("rel")=="stylesheet"}a(FE,"elementIsStylesheet");function HE(r,e){return r.localName=="meta"&&r.getAttribute("name")==e}a(HE,"elementIsMetaElementWithName");function UE(r){return r.hasAttribute("nonce")&&r.setAttribute("nonce",""),r}a(UE,"elementWithoutNonce");var Qr=class r extends $s{static{a(this,"PageSnapshot")}static fromHTMLString(e=""){return this.fromDocument(Zm(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:n}){return new this(e,t,new gh(n))}constructor(e,t,n){super(t),this.documentElement=e,this.headSnapshot=n}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),n=e.querySelectorAll("select");for(let[s,c]of t.entries()){let h=n[s];for(let d of h.selectedOptions)d.selected=!1;for(let d of c.selectedOptions)h.options[d.index].selected=!0}for(let s of e.querySelectorAll('input[type="password"]'))s.value="";return new r(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return Qt(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},bh=class{static{a(this,"ViewTransitioner")}#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},VE={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},Cl={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},$n={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Us={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},zE={advance:"forward",restore:"back",replace:"none"},vh=class{static{a(this,"Visit")}identifier=xi();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=$n.initialized;viewTransitioner=new bh;constructor(e,t,n,s={}){this.delegate=e,this.location=t,this.restorationIdentifier=n||xi();let{action:c,historyChanged:h,referrer:d,snapshot:p,snapshotHTML:g,response:b,visitCachedSnapshot:v,willRender:E,updateHistory:A,shouldCacheSnapshot:N,acceptsStreamResponse:P,direction:T}={...VE,...s};this.action=c,this.historyChanged=h,this.referrer=d,this.snapshot=p,this.snapshotHTML=g,this.response=b,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=v,this.willRender=E,this.updateHistory=A,this.scrolled=!E,this.shouldCacheSnapshot=N,this.acceptsStreamResponse=P,this.direction=T||zE[c]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==$n.initialized&&(this.recordTimingMetric(Cl.visitStart),this.state=$n.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==$n.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=$n.canceled)}complete(){this.state==$n.started&&(this.recordTimingMetric(Cl.visitEnd),this.adapter.visitCompleted(this),this.state=$n.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==$n.started&&(this.state=$n.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=Jm(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Ei(this,zr.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Cl.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;Vm(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(Cl.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,Vm(e)&&t!=null){let n=Qr.fromHTMLString(t);await this.renderPageSnapshot(n,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Qr.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!ns(this.location)||e.hasAnchor(ns(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Qr.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Ti.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let n=await t.responseHTML,{redirected:s,statusCode:c}=t;n==null?this.recordResponse({statusCode:Us.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:c,responseHTML:n,redirected:s}))}async requestFailedWithResponse(e,t){let n=await t.responseHTML,{redirected:s,statusCode:c}=t;n==null?this.recordResponse({statusCode:Us.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:c,responseHTML:n,redirected:s})}requestErrored(e,t){this.recordResponse({statusCode:Us.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=ns(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),this.frame=await Fs(),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function Vm(r){return r>=200&&r<300}a(Vm,"isSuccessful");var yh=class{static{a(this,"BrowserAdapter")}progressBar=new mh;constructor(e){this.session=e}visitProposedToLocation(e,t){yi(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||xi(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Us.networkFailure:case Us.timeoutFailure:case Us.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){Mt("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},wh=class{static{a(this,"CacheObserver")}selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},xh=class{static{a(this,"FrameRedirector")}constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new ql(this,t),this.formSubmitObserver=new Jo(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,n){return this.#t(e)}linkClickIntercepted(e,t,n){let s=this.#r(e);s&&s.delegate.linkClickIntercepted(e,t,n)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let n=this.#r(e,t);n&&n.delegate.formSubmitted(e,t)}#e(e,t){let n=Ph(e,t),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),c=Qt(s?.content??"/");return this.#t(e,t)&&yi(n,c)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let s=this.#r(e,t);return s?s!=e.closest("turbo-frame"):!1}else return!1}#r(e,t){let n=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(n&&n!="_top"){let s=this.element.querySelector(`#${n}:not([disabled])`);if(s instanceof wn)return s}}},Eh=class{static{a(this,"History")}location;restorationIdentifier=xi();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,n=xi()){e===history.pushState&&++this.currentIndex;let s={turbo:{restorationIdentifier:n,restorationIndex:this.currentIndex}};e.call(history,s,"",t.href),this.location=t,this.restorationIdentifier=n}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,n=this.restorationData[t];this.restorationData[t]={...n,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);let{restorationIdentifier:n,restorationIndex:s}=t;this.restorationIdentifier=n;let c=s>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,n,c),this.currentIndex=s}}};onPageLoad=async e=>{await cE(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Th=class{static{a(this,"LinkPrefetchObserver")}started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#n,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#n,!0),this.started=!0};#r=e=>{if(zs("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#a(t)){let s=t,c=tg(s);if(this.delegate.canPrefetchRequestToLocation(s,c)){this.#e=s;let h=new Ei(this,zr.get,c,new URLSearchParams,t);Bs.setLater(c.toString(),h,this.#o)}}};#i=e=>{e.target===this.#e&&this.#s()};#s=()=>{Bs.clear(),this.#e=null};#n=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="get"){let t=Bs.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),Bs.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let n=t.closest("turbo-frame"),s=t.getAttribute("data-turbo-frame")||n?.getAttribute("target")||n?.id;s&&s!=="_top"&&(e.headers["Turbo-Frame"]=s)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#o(){return Number(zs("turbo-prefetch-cache-time"))||TE}#a(e){return!(!e.getAttribute("href")||$E(e)||WE(e)||KE(e)||GE(e)||ZE(e))}},$E=a(r=>r.origin!==document.location.origin||!["http:","https:"].includes(r.protocol)||r.hasAttribute("target"),"unfetchableLink"),WE=a(r=>r.pathname+r.search===document.location.pathname+document.location.search||r.href.startsWith("#"),"linkToTheSamePage"),KE=a(r=>{if(r.getAttribute("data-turbo-prefetch")==="false"||r.getAttribute("data-turbo")==="false")return!0;let e=Hs(r,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},"linkOptsOut"),GE=a(r=>{let e=r.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||YE(r)||r.hasAttribute("data-turbo-confirm")||r.hasAttribute("data-turbo-stream"))},"nonSafeLink"),YE=a(r=>r.hasAttribute("data-remote")||r.hasAttribute("data-behavior")||r.hasAttribute("data-confirm")||r.hasAttribute("data-method"),"isUJS"),ZE=a(r=>Mt("turbo:before-prefetch",{target:r,cancelable:!0}).defaultPrevented,"eventPrevented"),Ah=class{static{a(this,"Navigator")}constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,n={}){this.stop(),this.currentVisit=new vh(this,Qt(e),t,{referrer:this.location,...n}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new Xo(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let n=await t.responseHTML;if(n){let s=e.isSafe;s||this.view.clearSnapshotCache();let{statusCode:c,redirected:h}=t,p={action:this.#e(e,t),shouldCacheSnapshot:s,response:{statusCode:c,responseHTML:n,redirected:h}};this.proposeVisit(t.location,p)}}}async formSubmissionFailedWithResponse(e,t){let n=await t.responseHTML;if(n){let s=Qr.fromHTMLString(n);t.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),s.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){let n=ns(e),s=ns(this.view.lastRenderedLocation),c=t==="restore"&&typeof n>"u";return t!=="replace"&&uh(e)===uh(this.view.lastRenderedLocation)&&(c||n!=null&&n!==s)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:n,formElement:s}=e;return is(n,s)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},ts={initial:0,loading:1,interactive:2,complete:3},Sh=class{static{a(this,"PageObserver")}stage=ts.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==ts.initial&&(this.stage=ts.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==ts.loading&&(this.stage=ts.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==ts.interactive&&(this.stage=ts.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Nh=class{static{a(this,"ScrollObserver")}started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Ch=class{static{a(this,"StreamMessageRenderer")}render({fragment:e}){Dl.preservingPermanentElements(this,XE(e),()=>{JE(e,()=>{QE(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function XE(r){let e=og(document.documentElement),t={};for(let n of e){let{id:s}=n;for(let c of r.querySelectorAll("turbo-stream")){let h=sg(c.templateElement.content,s);h&&(t[s]=[n,h])}}return t}a(XE,"getPermanentElementMapForFragment");async function JE(r,e){let t=`turbo-stream-autofocus-${xi()}`,n=r.querySelectorAll("turbo-stream"),s=eT(n),c=null;if(s&&(s.id?c=s.id:c=t,s.id=c),e(),await Fs(),(document.activeElement==null||document.activeElement==document.body)&&c){let d=document.getElementById(c);jh(d)&&d.focus(),d&&d.id==t&&d.removeAttribute("id")}}a(JE,"withAutofocusFromFragment");async function QE(r){let[e,t]=await mE(r,()=>document.activeElement),n=e&&e.id;if(n){let s=document.getElementById(n);jh(s)&&s!=t&&s.focus()}}a(QE,"withPreservedFocus");function eT(r){for(let e of r){let t=eg(e.templateElement.content);if(t)return t}return null}a(eT,"firstAutofocusableElementInStreams");var Lh=class{static{a(this,"StreamObserver")}sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=tT(e);t&&rT(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Ti.wrap(e))}};function tT(r){let e=r.detail?.fetchResponse;if(e instanceof Vs)return e}a(tT,"fetchResponseFromEvent");function rT(r){return(r.contentType??"").startsWith(Ti.contentType)}a(rT,"fetchResponseIsStream");var Rl=class extends Qo{static{a(this,"ErrorRenderer")}static renderElement(e,t){let{documentElement:n,body:s}=document;n.replaceChild(t,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let n=Zo(e);t.replaceChild(n,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},nT=function(){let r=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E},head:{style:"merge",shouldPreserve:function(q){return q.getAttribute("im-preserve")==="true"},shouldReAppend:function(q){return q.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function t(q,I,C={}){q instanceof Document&&(q=q.documentElement),typeof I=="string"&&(I=U(I));let $=Z(I),W=N(q,$,C);return n(q,$,W)}a(t,"morph");function n(q,I,C){if(C.head.block){let $=q.querySelector("head"),W=I.querySelector("head");if($&&W){let ne=v(W,$,C);Promise.all(ne).then(function(){n(q,I,Object.assign(C,{head:{block:!1,ignore:!0}}))});return}}if(C.morphStyle==="innerHTML")return h(I,q,C),q.children;if(C.morphStyle==="outerHTML"||C.morphStyle==null){let $=ee(I,q,C),W=$?.previousSibling,ne=$?.nextSibling,xe=c(q,$,C);return $?se(W,xe,ne):[]}else throw"Do not understand how to morph style "+C.morphStyle}a(n,"morphNormalizedContent");function s(q,I){return I.ignoreActiveValue&&q===document.activeElement&&q!==document.body}a(s,"ignoreValueOfActiveElement");function c(q,I,C){if(!(C.ignoreActive&&q===document.activeElement))return I==null?C.callbacks.beforeNodeRemoved(q)===!1?q:(q.remove(),C.callbacks.afterNodeRemoved(q),null):T(q,I)?(C.callbacks.beforeNodeMorphed(q,I)===!1||(q instanceof HTMLHeadElement&&C.head.ignore||(q instanceof HTMLHeadElement&&C.head.style!=="morph"?v(I,q,C):(p(I,q,C),s(q,C)||h(I,q,C))),C.callbacks.afterNodeMorphed(q,I)),q):C.callbacks.beforeNodeRemoved(q)===!1||C.callbacks.beforeNodeAdded(I)===!1?q:(q.parentElement.replaceChild(I,q),C.callbacks.afterNodeAdded(I),C.callbacks.afterNodeRemoved(q),I)}a(c,"morphOldNodeTo");function h(q,I,C){let $=q.firstChild,W=I.firstChild,ne;for(;$;){if(ne=$,$=ne.nextSibling,W==null){if(C.callbacks.beforeNodeAdded(ne)===!1)return;I.appendChild(ne),C.callbacks.afterNodeAdded(ne),V(C,ne);continue}if(P(ne,W,C)){c(W,ne,C),W=W.nextSibling,V(C,ne);continue}let xe=j(q,I,ne,W,C);if(xe){W=O(W,xe,C),c(xe,ne,C),V(C,ne);continue}let ue=F(q,I,ne,W,C);if(ue){W=O(W,ue,C),c(ue,ne,C),V(C,ne);continue}if(C.callbacks.beforeNodeAdded(ne)===!1)return;I.insertBefore(ne,W),C.callbacks.afterNodeAdded(ne),V(C,ne)}for(;W!==null;){let xe=W;W=W.nextSibling,X(xe,C)}}a(h,"morphChildren");function d(q,I,C,$){return q==="value"&&$.ignoreActiveValue&&I===document.activeElement?!0:$.callbacks.beforeAttributeUpdated(q,I,C)===!1}a(d,"ignoreAttribute");function p(q,I,C){let $=q.nodeType;if($===1){let W=q.attributes,ne=I.attributes;for(let xe of W)d(xe.name,I,"update",C)||I.getAttribute(xe.name)!==xe.value&&I.setAttribute(xe.name,xe.value);for(let xe=ne.length-1;0<=xe;xe--){let ue=ne[xe];d(ue.name,I,"remove",C)||q.hasAttribute(ue.name)||I.removeAttribute(ue.name)}}($===8||$===3)&&I.nodeValue!==q.nodeValue&&(I.nodeValue=q.nodeValue),s(I,C)||b(q,I,C)}a(p,"syncNodeFrom");function g(q,I,C,$){if(q[C]!==I[C]){let W=d(C,I,"update",$);W||(I[C]=q[C]),q[C]?W||I.setAttribute(C,q[C]):d(C,I,"remove",$)||I.removeAttribute(C)}}a(g,"syncBooleanAttribute");function b(q,I,C){if(q instanceof HTMLInputElement&&I instanceof HTMLInputElement&&q.type!=="file"){let $=q.value,W=I.value;g(q,I,"checked",C),g(q,I,"disabled",C),q.hasAttribute("value")?$!==W&&(d("value",I,"update",C)||(I.setAttribute("value",$),I.value=$)):d("value",I,"remove",C)||(I.value="",I.removeAttribute("value"))}else if(q instanceof HTMLOptionElement)g(q,I,"selected",C);else if(q instanceof HTMLTextAreaElement&&I instanceof HTMLTextAreaElement){let $=q.value,W=I.value;if(d("value",I,"update",C))return;$!==W&&(I.value=$),I.firstChild&&I.firstChild.nodeValue!==$&&(I.firstChild.nodeValue=$)}}a(b,"syncInputValue");function v(q,I,C){let $=[],W=[],ne=[],xe=[],ue=C.head.style,Be=new Map;for(let ke of q.children)Be.set(ke.outerHTML,ke);for(let ke of I.children){let je=Be.has(ke.outerHTML),Ve=C.head.shouldReAppend(ke),Ge=C.head.shouldPreserve(ke);je||Ge?Ve?W.push(ke):(Be.delete(ke.outerHTML),ne.push(ke)):ue==="append"?Ve&&(W.push(ke),xe.push(ke)):C.head.shouldRemove(ke)!==!1&&W.push(ke)}xe.push(...Be.values());let Fe=[];for(let ke of xe){let je=document.createRange().createContextualFragment(ke.outerHTML).firstChild;if(C.callbacks.beforeNodeAdded(je)!==!1){if(je.href||je.src){let Ve=null,Ge=new Promise(function(ft){Ve=ft});je.addEventListener("load",function(){Ve()}),Fe.push(Ge)}I.appendChild(je),C.callbacks.afterNodeAdded(je),$.push(je)}}for(let ke of W)C.callbacks.beforeNodeRemoved(ke)!==!1&&(I.removeChild(ke),C.callbacks.afterNodeRemoved(ke));return C.head.afterHeadMorphed(I,{added:$,kept:ne,removed:W}),Fe}a(v,"handleHeadElement");function E(){}a(E,"noOp");function A(q){let I={};return Object.assign(I,e),Object.assign(I,q),I.callbacks={},Object.assign(I.callbacks,e.callbacks),Object.assign(I.callbacks,q.callbacks),I.head={},Object.assign(I.head,e.head),Object.assign(I.head,q.head),I}a(A,"mergeDefaults");function N(q,I,C){return C=A(C),{target:q,newContent:I,config:C,morphStyle:C.morphStyle,ignoreActive:C.ignoreActive,ignoreActiveValue:C.ignoreActiveValue,idMap:ae(q,I),deadIds:new Set,callbacks:C.callbacks,head:C.head}}a(N,"createMorphContext");function P(q,I,C){return q==null||I==null?!1:q.nodeType===I.nodeType&&q.tagName===I.tagName?q.id!==""&&q.id===I.id?!0:re(C,q,I)>0:!1}a(P,"isIdSetMatch");function T(q,I){return q==null||I==null?!1:q.nodeType===I.nodeType&&q.tagName===I.tagName}a(T,"isSoftMatch");function O(q,I,C){for(;q!==I;){let $=q;q=q.nextSibling,X($,C)}return V(C,I),I.nextSibling}a(O,"removeNodesBetween");function j(q,I,C,$,W){let ne=re(W,C,I),xe=null;if(ne>0){let ue=$,Be=0;for(;ue!=null;){if(P(C,ue,W))return ue;if(Be+=re(W,ue,q),Be>ne)return null;ue=ue.nextSibling}}return xe}a(j,"findIdSetMatch");function F(q,I,C,$,W){let ne=$,xe=C.nextSibling,ue=0;for(;ne!=null;){if(re(W,ne,q)>0)return null;if(T(C,ne))return ne;if(T(xe,ne)&&(ue++,xe=xe.nextSibling,ue>=2))return null;ne=ne.nextSibling}return ne}a(F,"findSoftMatch");function U(q){let I=new DOMParser,C=q.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(C.match(/<\/html>/)||C.match(/<\/head>/)||C.match(/<\/body>/)){let $=I.parseFromString(q,"text/html");if(C.match(/<\/html>/))return $.generatedByIdiomorph=!0,$;{let W=$.firstChild;return W?(W.generatedByIdiomorph=!0,W):null}}else{let W=I.parseFromString("<body><template>"+q+"</template></body>","text/html").body.querySelector("template").content;return W.generatedByIdiomorph=!0,W}}a(U,"parseContent");function Z(q){if(q==null)return document.createElement("div");if(q.generatedByIdiomorph)return q;if(q instanceof Node){let I=document.createElement("div");return I.append(q),I}else{let I=document.createElement("div");for(let C of[...q])I.append(C);return I}}a(Z,"normalizeContent");function se(q,I,C){let $=[],W=[];for(;q!=null;)$.push(q),q=q.previousSibling;for(;$.length>0;){let ne=$.pop();W.push(ne),I.parentElement.insertBefore(ne,I)}for(W.push(I);C!=null;)$.push(C),W.push(C),C=C.nextSibling;for(;$.length>0;)I.parentElement.insertBefore($.pop(),I.nextSibling);return W}a(se,"insertSiblings");function ee(q,I,C){let $;$=q.firstChild;let W=$,ne=0;for(;$;){let xe=_($,I,C);xe>ne&&(W=$,ne=xe),$=$.nextSibling}return W}a(ee,"findBestNodeMatch");function _(q,I,C){return T(q,I)?.5+re(C,q,I):0}a(_,"scoreElement");function X(q,I){V(I,q),I.callbacks.beforeNodeRemoved(q)!==!1&&(q.remove(),I.callbacks.afterNodeRemoved(q))}a(X,"removeNode");function de(q,I){return!q.deadIds.has(I)}a(de,"isIdInConsideration");function D(q,I,C){return(q.idMap.get(C)||r).has(I)}a(D,"idIsWithinNode");function V(q,I){let C=q.idMap.get(I)||r;for(let $ of C)q.deadIds.add($)}a(V,"removeIdsFromConsideration");function re(q,I,C){let $=q.idMap.get(I)||r,W=0;for(let ne of $)de(q,ne)&&D(q,ne,C)&&++W;return W}a(re,"getIdIntersectionCount");function J(q,I){let C=q.parentElement,$=q.querySelectorAll("[id]");for(let W of $){let ne=W;for(;ne!==C&&ne!=null;){let xe=I.get(ne);xe==null&&(xe=new Set,I.set(ne,xe)),xe.add(W.id),ne=ne.parentElement}}}a(J,"populateIdMapForNode");function ae(q,I){let C=new Map;return J(q,C),J(I,C),C}return a(ae,"createIdMap"),{morph:t,defaults:e}}(),ss=class extends Qo{static{a(this,"PageRenderer")}static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:t}=this.newSnapshot;t?e.setAttribute("lang",t):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(dE(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(Zo(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[n,s]of t.entries()){if(e.tagName=="TITLE"){if(s.tagName!="TITLE")continue;if(e.innerHTML==s.innerHTML)return t.splice(n,1),!0}if(s.isEqualNode(e))return t.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=Zo(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Oh=class extends ss{static{a(this,"MorphRenderer")}async render(){this.willRender&&await this.#e()}get renderMethod(){return"morph"}async#e(){this.#t(this.currentElement,this.newElement),this.#a(),Mt("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#t(e,t,n="outerHTML"){this.isMorphingTurboFrame=this.#l(e),nT.morph(e,t,{morphStyle:n,callbacks:{beforeNodeAdded:this.#r,beforeNodeMorphed:this.#i,beforeAttributeUpdated:this.#s,beforeNodeRemoved:this.#o,afterNodeMorphed:this.#n}})}#r=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));#i=(e,t)=>{if(e instanceof HTMLElement)return!e.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#l(e))?!Mt("turbo:before-morph-element",{cancelable:!0,target:e,detail:{newElement:t}}).defaultPrevented:!1};#s=(e,t,n)=>!Mt("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:n}}).defaultPrevented;#n=(e,t)=>{t instanceof HTMLElement&&Mt("turbo:morph-element",{target:e,detail:{newElement:t}})};#o=e=>this.#i(e);#a(){this.#d().forEach(e=>{this.#l(e)&&(this.#u(e),e.reload())})}#u(e){e.addEventListener("turbo:before-frame-render",t=>{t.detail.render=this.#h},{once:!0})}#h=(e,t)=>{Mt("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),this.#t(e,t.children,"innerHTML")};#l(e){return e.src&&e.refresh==="morph"}#d(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(e=>!e.closest("[data-turbo-permanent]"))}},kh=class{static{a(this,"SnapshotCache")}keys=[];snapshots={};constructor(e){this.size=e}has(e){return Nl(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[Nl(e)]}write(e,t){this.snapshots[Nl(e)]=t}touch(e){let t=Nl(e),n=this.keys.indexOf(t);n>-1&&this.keys.splice(n,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},_h=class extends _l{static{a(this,"PageView")}snapshotCache=new kh(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,n=!0,s){let h=this.isPageRefresh(s)&&this.snapshot.shouldMorphPage?Oh:ss,d=new h(this.snapshot,e,ss.renderElement,t,n);return d.shouldRender?s?.changeHistory():this.forceReloaded=!0,this.render(d)}renderError(e,t){t?.changeHistory();let n=new Rl(this.snapshot,e,Rl.renderElement,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await Ym();let n=e.clone();return this.snapshotCache.put(t,n),n}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return Qr.fromElement(this.element)}},qh=class{static{a(this,"Preloader")}selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new Ei(this,zr.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let n=await t.responseHTML,s=Qr.fromHTMLString(n);this.snapshotCache.put(e.url,s)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},Mh=class{static{a(this,"Cache")}constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){pE("turbo-cache-control",e)}},Ih=class{static{a(this,"Session")}navigator=new Ah(this);history=new Eh(this);view=new _h(this,document.documentElement);adapter=new yh(this);pageObserver=new Sh(this);cacheObserver=new wh;linkPrefetchObserver=new Th(this,document);linkClickObserver=new Ml(this,window);formSubmitObserver=new Jo(this,document);scrollObserver=new Nh(this);streamObserver=new Lh(this);formLinkClickObserver=new Il(this,document.documentElement);frameRedirector=new xh(this,document.documentElement);streamMessageRenderer=new Ch;cache=new Mh(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#e=150;constructor(e){this.recentRequests=e,this.preloader=new qh(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let n=t.frame?document.getElementById(t.frame):null;if(n instanceof wn){let s=t.action||is(n);n.delegate.proposeVisitIfNavigatedWithAction(n,s),n.src=e.toString()}else this.navigator.proposeVisit(Qt(e),t)}refresh(e,t){t&&this.recentRequests.has(t)||this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Ti.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=vE(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),n=e.hasAttribute("data-turbo-stream"),s=e.getAttribute("data-turbo-frame"),c=s=="_top"?null:document.getElementById(s)||Hs(e,"turbo-frame:not([disabled])");if(t||n||c instanceof wn)return!1;{let h=new URL(e.href);return this.elementIsNavigatable(e)&&yi(h,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,n){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:n}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&yi(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&yi(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,n){return this.elementIsNavigatable(e)&&yi(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,n)}followedLinkToLocation(e,t){let n=this.getActionForLink(e),s=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:n,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){zm(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(Ol(document.documentElement),this.view.markVisitDirection(e.direction)),zm(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),kl(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let n=Ph(e,t);return this.submissionIsNavigatable(e,t)&&yi(Qt(n),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let n=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:s,detail:{render:c}}=n;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!s}viewRenderedSnapshot(e,t,n){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(n)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,n){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,n).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,n){return Mt("turbo:click",{target:e,detail:{url:t.href,originalEvent:n},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return Mt("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return Mt("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return Mt("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return Mt("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return Mt("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return Mt("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return Mt("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return Mt("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{let n=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?n&&e.closest('[data-turbo="true"]')!=null:n&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Hs(e,"[data-turbo]"),n=Hs(e,"turbo-frame");return this.drive||n?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return is(e)||"advance"}get snapshot(){return this.view.snapshot}};function zm(r){Object.defineProperties(r,iT)}a(zm,"extendURLWithDeprecatedProperties");var iT={absoluteURL:{get(){return this.toString()}}},Ot=new Ih(rg),{cache:ag,navigator:lg}=Ot;function Fh(){Ot.start()}a(Fh,"start");function cg(r){Ot.registerAdapter(r)}a(cg,"registerAdapter");function ug(r,e){Ot.visit(r,e)}a(ug,"visit");function ea(r){Ot.connectStreamSource(r)}a(ea,"connectStreamSource");function ta(r){Ot.disconnectStreamSource(r)}a(ta,"disconnectStreamSource");function hg(r){Ot.renderStreamMessage(r)}a(hg,"renderStreamMessage");function dg(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Ot.clearCache()}a(dg,"clearCache");function fg(r){Ot.setProgressBarDelay(r)}a(fg,"setProgressBarDelay");function pg(r){Xo.confirmMethod=r}a(pg,"setConfirmMethod");function mg(r){Ot.setFormMode(r)}a(mg,"setFormMode");var sT=Object.freeze({__proto__:null,navigator:lg,session:Ot,cache:ag,PageRenderer:ss,PageSnapshot:Qr,FrameRenderer:Ws,fetch:Bh,start:Fh,registerAdapter:cg,visit:ug,connectStreamSource:ea,disconnectStreamSource:ta,renderStreamMessage:hg,clearCache:dg,setProgressBarDelay:fg,setConfirmMethod:pg,setFormMode:mg}),Dh=class extends Error{static{a(this,"TurboFrameMissingError")}},Rh=class{static{a(this,"FrameController")}fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#r=!1;#i=!1;#s=new Set;action=null;constructor(e){this.element=e,this.view=new ph(this,this.element),this.appearanceObserver=new dh(this,this.element),this.formLinkClickObserver=new Il(this,this.element),this.linkInterceptor=new ql(this,this.element),this.restorationIdentifier=xi(),this.formSubmitObserver=new Jo(this,this.element)}connect(){this.#r||(this.#r=!0,this.loadingStyle==rs.lazy?this.appearanceObserver.start():this.#n(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#r&&(this.#r=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==rs.eager&&this.#n()}sourceURLChanged(){this.#b("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==rs.eager||this.#i)&&this.#n())}sourceURLReloaded(){let{src:e}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==rs.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#n())}async#n(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#a(Qt(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#i=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let n=Zm(t);Qr.fromDocument(n).isVisitable?await this.#o(e,n):await this.#h(e)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,is(e)),this.#n()}willSubmitFormLinkToLocation(e){return this.#f(e)}submittedFormLinkToLocation(e,t,n){let s=this.#c(e);s&&n.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(e,t,n){return this.#f(e)}linkClickIntercepted(e,t){this.#u(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#f(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Xo(this,e,t);let{fetchRequest:n}=this.formSubmission;this.prepareRequest(n),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Ti.contentType)}requestStarted(e){Ol(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){kl(this.element)}formSubmissionStarted({formElement:e}){Ol(e,this.#c(e))}formSubmissionSucceededWithResponse(e,t){let n=this.#c(e.formElement,e.submitter);n.delegate.proposeVisitIfNavigatedWithAction(n,is(e.submitter,e.formElement,n)),n.delegate.loadResponse(t),e.isSafe||Ot.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),Ot.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){kl(e,this.#c(e))}allowsImmediateRender({element:e},t){let n=Mt("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:s,detail:{render:c}}=n;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!s}viewRenderedSnapshot(e,t,n){}preloadOnLoadLinksForView(e){Ot.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#o(e,t){let n=await this.extractForeignFrameElement(t.body);if(n){let s=new $s(n),c=new Ws(this,this.view.snapshot,s,Ws.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(c),this.complete=!0,Ot.frameRendered(e,this.element),Ot.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#l(e)&&this.#d(e)}async#a(e){let t=new Ei(this,zr.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(n=>{this.#t=()=>{this.#t=()=>{},this.#e=null,n()},t.perform()})}#u(e,t,n){let s=this.#c(e,n);s.delegate.proposeVisitIfNavigatedWithAction(s,is(n,e,s)),this.#y(e,()=>{s.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let n=Qr.fromElement(e).clone(),{visitCachedSnapshot:s}=e.delegate;e.delegate.fetchResponseLoaded=async c=>{if(e.src){let{statusCode:h,redirected:d}=c,p=await c.responseHTML,b={response:{statusCode:h,redirected:d,responseHTML:p},visitCachedSnapshot:s,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:n};this.action&&(b.action=this.action),Ot.visit(e.src,b)}}}}changeHistory(){if(this.action){let e=Jm(this.action);Ot.history.update(e,Qt(this.element.src||""),this.restorationIdentifier)}}async#h(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#p(e.response)}#l(e){this.element.setAttribute("complete","");let t=e.response,n=a(async(c,h)=>{c instanceof Response?this.#p(c):Ot.visit(c,h)},"visit");return!Mt("turbo:frame-missing",{target:this.element,detail:{response:t,visit:n},cancelable:!0}).defaultPrevented}#d(e){this.view.missing(),this.#m(e)}#m(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Dh(t)}async#p(e){let t=new Vs(e),n=await t.responseHTML,{location:s,redirected:c,statusCode:h}=t;return Ot.visit(s,{response:{redirected:c,statusCode:h,responseHTML:n}})}#c(e,t){let n=Ll("data-turbo-frame",t,e)||this.element.getAttribute("target");return $m(n)??this.element}async extractForeignFrameElement(e){let t,n=CSS.escape(this.id);try{if(t=Wm(e.querySelector(`turbo-frame#${n}`),this.sourceURL),t)return t;if(t=Wm(e.querySelector(`turbo-frame[src][recurse~=${n}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(s){return console.error(s),new wn}return null}#g(e,t){let n=Ph(e,t);return yi(Qt(n),this.rootLocation)}#f(e,t){let n=Ll("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#g(e,t)||!this.enabled||n=="_top")return!1;if(n){let s=$m(n);if(s)return!s.disabled}return!(!Ot.elementIsNavigatable(e)||t&&!Ot.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#v("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#r}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return Qt(t)}#b(e){return this.#s.has(e)}#v(e,t){this.#s.add(e),t(),this.#s.delete(e)}#y(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function $m(r){if(r!=null){let e=document.getElementById(r);if(e instanceof wn)return e}}a($m,"getFrameElementById");function Wm(r,e){if(r){let t=r.getAttribute("src");if(t!=null&&e!=null&&rE(t,e))throw new Error(`Matching <turbo-frame id="${r.id}"> element has a source URL which references itself`);if(r.ownerDocument!==document&&(r=document.importNode(r,!0)),r instanceof wn)return r.connectedCallback(),r.disconnectedCallback(),r}}a(Wm,"activateElement");var Hh={after(){this.targetElements.forEach(r=>r.parentElement?.insertBefore(this.templateContent,r.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.append(this.templateContent))},before(){this.targetElements.forEach(r=>r.parentElement?.insertBefore(this.templateContent,r))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.prepend(this.templateContent))},remove(){this.targetElements.forEach(r=>r.remove())},replace(){this.targetElements.forEach(r=>r.replaceWith(this.templateContent))},update(){this.targetElements.forEach(r=>{r.innerHTML="",r.append(this.templateContent)})},refresh(){Ot.refresh(this.baseURI,this.requestId)}},Pl=class r extends HTMLElement{static{a(this,"StreamElement")}static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Fs(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(n=>[...n.children]).filter(n=>!!n.id),t=[...this.templateContent?.children||[]].filter(n=>!!n.id).map(n=>n.id);return e.filter(n=>t.includes(n.id))}get performAction(){if(this.action){let e=Hh[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:r.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},jl=class extends HTMLElement{static{a(this,"StreamSourceElement")}streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),ea(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),ta(this.streamSource))}get src(){return this.getAttribute("src")||""}};wn.delegateConstructor=Rh;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",wn);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Pl);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",jl);(()=>{let r=document.currentScript;if(r&&!r.hasAttribute("data-turbo-suppress-warning"))for(r=r.parentElement;r;){if(r==document.body)return console.warn(Xm`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,r.outerHTML);r=r.parentElement}})();window.Turbo={...sT,StreamActions:Hh};Fh();var Eg;async function cT(){return Eg||xg(uT().then(xg))}a(cT,"getConsumer");function xg(r){return Eg=r}a(xg,"setConsumer");async function uT(){let{createConsumer:r}=await Promise.resolve().then(()=>(wg(),yg));return r()}a(uT,"createConsumer");async function Tg(r,e){let{subscriptions:t}=await cT();return t.create(r,e)}a(Tg,"subscribeTo");function aa(r){return!r||typeof r!="object"||r instanceof Date||r instanceof RegExp?r:Array.isArray(r)?r.map(aa):Object.keys(r).reduce(function(e,t){var n=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(s,c){return"_"+c.toLowerCase()});return e[n]=aa(r[t]),e},{})}a(aa,"walk");var Jh=class extends HTMLElement{static{a(this,"TurboCableStreamSourceElement")}async connectedCallback(){ea(this),this.subscription=await Tg(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){ta(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:t,...aa({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",Jh);function Ag(r){if(r.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=r;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:n}}})=>{let s=pT(t.body)?t.body:new URLSearchParams,c=dT(n,s,e);/get/i.test(c)||(/post/i.test(c)?s.delete("_method"):s.set("_method",c),t.method="post")},{once:!0})}}a(Ag,"encodeMethodIntoRequestBody");function dT(r,e,t){let n=fT(r),s=e.get("_method"),c=t.getAttribute("method")||"get";return typeof n=="string"?n:typeof s=="string"?s:c}a(dT,"determineFetchMethod");function fT(r){return r instanceof HTMLButtonElement||r instanceof HTMLInputElement?r.name==="_method"?r.value:r.hasAttribute("formmethod")?r.formMethod:null:null}a(fT,"determineFormMethod");function pT(r){return r instanceof FormData||r instanceof URLSearchParams}a(pT,"isBodyInit");window.Turbo=Uh;addEventListener("turbo:before-fetch-request",Ag);var Sg={camelize:function(r){return r.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())},dasherize:function(r){let e=r.replace(/([A-Z])/g,(t,n)=>`-${n.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}},Ng=class{static{a(this,"Application")}constructor(){this.controllers={}}start(r){this.window=window,this.document=document,this.connect()}connect(){for(let r in this.controllers)this.window.customElements.define(r,this.controllers[r])}register(r){let e=this.dasherize(r.name.replace("Default",""));this.controllers[e]=r}};Object.assign(Ng.prototype,Sg);var cr=new Ng,lt=class extends window.HTMLElement{static{a(this,"Controller")}constructor(){super(),this.element=this,this.descriptorPattern=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/}bindAction(r){r.identifier==this.name&&(r.boundFn=this[r.methodName].bind(this),r.listener=r.eventTarget.addEventListener(r.eventName||this.defaultEventName(r.eventTarget),r.boundFn,!1))}parseAction(r){return r.dataset.action.split(" ").map(this.parseActionDescriptorString(r).bind(this))}parseActionDescriptorString(r){return function(e){let n=e.trim().match(this.descriptorPattern)||[],s=n[1],c=n[2];return c&&!["keydown","keyup","keypress"].includes(s)&&(s+=`.${c}`,c=""),{eventTarget:this.parseEventTarget(n[3])||r,eventName:s,eventOptions:n[6]?this.parseEventOptions(n[6]):{},identifier:n[4],methodName:n[5],keyFilter:c}}}parseEventTarget(r){if(r=="window")return window;if(r=="document")return document}parseEventOptions(r){return r.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}defineTargets(){this.constructor.targets!=null&&this.constructor.targets.forEach(this.mapTargets.bind(this))}mapTargets(r){let e=this.querySelectorAll(`[data-${this.name}-target="${r}"]`);this[r+"Targets"]=Array.from(e),this[r+"Target"]=e[0]}defineValues(){if(this.constructor.values==null)return;Object.keys(this.constructor.values).forEach(this.mapValues(this.constructor.values).bind(this))}mapValues(r){return function(e){this[e+"Value"]=this.parseValue(e,r[e])}}parseValue(r,e){let t=this.camelize(`${this.name}-${r}-value`),n=this.dataset[t];if(n!=null)switch(e){case Array:return JSON.parse(n);case Boolean:return!(n=="0"||n=="false");case Number:return Number(n);case Object:return JSON.parse(n);default:return n}}attachActions(){let r=Array.from(this.querySelectorAll("[data-action]"));this.dataset.action&&r.push(this),this.actions=r.flatMap(this.parseAction.bind(this)),this.actions.forEach(this.bindAction.bind(this))}connectedCallback(){this.name=this.dasherize(this.constructor.name).replace("-controller-default","").replace("-controller",""),this.attachActions(),this.defineValues(),this.defineTargets(),this.connect&&this.connect()}disconnectedCallback(){this.disconnect&&this.disconnect()}dasherize(r){let e=r.replace(/([A-Z])/g,(t,n)=>`-${n.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}defaultEventName(r){switch(r.nodeName){case"DETAILS":return"toggle";case"FORM":return"submit";case"INPUT":return r.type.toLowerCase()=="submit"?"click":"input";case"SELECT":return"change";case"TEXTAREA":return"change";default:return"click"}}};Object.assign(lt.prototype,Sg);var la=class extends lt{static{a(this,"AdminTabController")}connect(){document.querySelectorAll("admin-tab-controller label").forEach(this.setCurrent.bind(this))}mark(e){document.querySelectorAll("admin-tab-controller label").forEach(this.unselect),this.select(e.target)}setCurrent(e){document.getElementById(e.getAttribute("for")).checked?this.select(e):this.unselect(e)}unselect(e){e.classList.add("bg-neutral-200","hover:bg-neutral-300"),e.classList.remove("bg-cyan-200")}select(e){e.classList.remove("bg-neutral-200","hover:bg-neutral-300"),e.classList.add("bg-cyan-200")}};var ca=class extends lt{static{a(this,"AdminCleaveController")}connect(){let e=this.querySelector("input");e.autocomplete=="cc-number"?this.cc({target:e}):this.cleave({target:e})}cleave(e){let t=parseInt(e.target.value.replaceAll(" ",""));isNaN(t)||(e.target.value=parseInt(t).toLocaleString("en").replaceAll(","," "))}cc(e){let t=e.target.value.replaceAll(" ",""),n=[];for(let s=0;s<t.length;s+=4)n.push(t.slice(s,s+4));e.target.value=n.join(" ")}};function Wl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}a(Wl,"assign");var mT={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Qh(r,e){function t(s,c,h){if(!(typeof document>"u")){h=Wl({},e,h),typeof h.expires=="number"&&(h.expires=new Date(Date.now()+h.expires*864e5)),h.expires&&(h.expires=h.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var p in h)h[p]&&(d+="; "+p,h[p]!==!0&&(d+="="+h[p].split(";")[0]));return document.cookie=s+"="+r.write(c,s)+d}}a(t,"set");function n(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var c=document.cookie?document.cookie.split("; "):[],h={},d=0;d<c.length;d++){var p=c[d].split("="),g=p.slice(1).join("=");try{var b=decodeURIComponent(p[0]);if(h[b]=r.read(g,b),s===b)break}catch{}}return s?h[s]:h}}return a(n,"get"),Object.create({set:t,get:n,remove:function(s,c){t(s,"",Wl({},c,{expires:-1}))},withAttributes:function(s){return Qh(this.converter,Wl({},this.attributes,s))},withConverter:function(s){return Qh(Wl({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}a(Qh,"init");var Cg=Qh(mT,{path:"/"});var ua=class extends lt{static{a(this,"BackToScopeController")}click(e){let t=this.dataset.resource,n=Cg.get(`return_to_${t}_tab`);n&&(e.preventDefault(),window.Turbo.visit(e.target.href+"?scope="+n))}};var ha=class extends lt{static{a(this,"BatchActionController")}static targets=["actionbar","all","checkbox"];checkbox(e){this.checkboxTargets.some(this.isChecked)?this.showActions():this.hideActions()}isChecked(e){return e.checked}showActions(){this.actionbarTarget.classList.remove("hidden"),this.allTarget.checked=!0}hideActions(){this.actionbarTarget.classList.add("hidden"),this.allTarget.checked=!1}};var da=class extends lt{static{a(this,"ClickableRowController")}connect(){this.querySelectorAll("[data-link]").forEach(this.addHoverClasses)}addHoverClasses(e){e.classList.add("cursor-pointer","hover:bg-neutral-200")}click(e){if(e.target.tagName=="A"||e.target.tagName=="INPUT")return!0;let t=e.target.closest("tr").dataset.link;e.which==2||e.which==4||e.metaKey||e.ctrlKey?window.open(t,"_blank"):(e.preventDefault(),window.Turbo.visit(t))}};var fa=class extends lt{static{a(this,"HamburgerMenuController")}connect(){this.classList.add("cursor-pointer")}toggle(e){document.getElementById("left-menu").classList.toggle("-translate-x-full"),document.getElementById("main").classList.toggle("blur-sm")}};var Og=lr(td());var pa=class extends lt{static{a(this,"GeoSearchController")}static targets=["lat","lng","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,Og.default)(this.fetchData.bind(this),500)}change(e){this.debouncedFetchData(e.target.value)}fetchData(e,t){fetch("https://nominatim.openstreetmap.org/search?"+new URLSearchParams({q:e,format:"jsonv2"})).then(n=>n.json()).then(n=>this.display(n))}buildMarkup(e){return e.map(function(t){return`
        <div>
          <span
            class="block p-2 cursor-pointer hover:bg-neutral-100"
            data-info='${JSON.stringify(t)}'
            data-action="click->geo-search#select"
          >${t.display_name}</span>
        </div>`}).join("")}display(e){this.resultsTarget.innerHTML=this.buildMarkup(e),this.bindNewActions(this.resultsTarget)}bindNewActions(e){Array.from(e.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(e){let t=JSON.parse(e.currentTarget.dataset.info);this.visibleFieldTarget.value=t.name||t.display_name,this.latTarget.value=t.lat,this.lngTarget.value=t.lon,this.resultsTarget.innerHTML=""}};var Kl=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Si={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(r){return typeof console<"u"&&console.warn(r)},getWeek:function(r){var e=new Date(r.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Gl={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(r){var e=r%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Yl=Gl;var ur=a(function(r,e){return e===void 0&&(e=2),("000"+r).slice(e*-1)},"pad"),qr=a(function(r){return r===!0?1:0},"int");function rd(r,e){var t;return function(){var n=this,s=arguments;clearTimeout(t),t=setTimeout(function(){return r.apply(n,s)},e)}}a(rd,"debounce");var Zl=a(function(r){return r instanceof Array?r:[r]},"arrayify");function hr(r,e,t){if(t===!0)return r.classList.add(e);r.classList.remove(e)}a(hr,"toggleClass");function et(r,e,t){var n=window.document.createElement(r);return e=e||"",t=t||"",n.className=e,t!==void 0&&(n.textContent=t),n}a(et,"createElement");function ma(r){for(;r.firstChild;)r.removeChild(r.firstChild)}a(ma,"clearNode");function nd(r,e){if(e(r))return r;if(r.parentNode)return nd(r.parentNode,e)}a(nd,"findParent");function ga(r,e){var t=et("div","numInputWrapper"),n=et("input","numInput "+r),s=et("span","arrowUp"),c=et("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),e!==void 0)for(var h in e)n.setAttribute(h,e[h]);return t.appendChild(n),t.appendChild(s),t.appendChild(c),t}a(ga,"createNumberInput");function Mr(r){try{if(typeof r.composedPath=="function"){var e=r.composedPath();return e[0]}return r.target}catch{return r.target}}a(Mr,"getEventTarget");var id=a(function(){},"doNothing"),ba=a(function(r,e,t){return t.months[e?"shorthand":"longhand"][r]},"monthToStr"),kg={D:id,F:function(r,e,t){r.setMonth(t.months.longhand.indexOf(e))},G:function(r,e){r.setHours((r.getHours()>=12?12:0)+parseFloat(e))},H:function(r,e){r.setHours(parseFloat(e))},J:function(r,e){r.setDate(parseFloat(e))},K:function(r,e,t){r.setHours(r.getHours()%12+12*qr(new RegExp(t.amPM[1],"i").test(e)))},M:function(r,e,t){r.setMonth(t.months.shorthand.indexOf(e))},S:function(r,e){r.setSeconds(parseFloat(e))},U:function(r,e){return new Date(parseFloat(e)*1e3)},W:function(r,e,t){var n=parseInt(e),s=new Date(r.getFullYear(),0,2+(n-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+t.firstDayOfWeek),s},Y:function(r,e){r.setFullYear(parseFloat(e))},Z:function(r,e){return new Date(e)},d:function(r,e){r.setDate(parseFloat(e))},h:function(r,e){r.setHours((r.getHours()>=12?12:0)+parseFloat(e))},i:function(r,e){r.setMinutes(parseFloat(e))},j:function(r,e){r.setDate(parseFloat(e))},l:id,m:function(r,e){r.setMonth(parseFloat(e)-1)},n:function(r,e){r.setMonth(parseFloat(e)-1)},s:function(r,e){r.setSeconds(parseFloat(e))},u:function(r,e){return new Date(parseFloat(e))},w:id,y:function(r,e){r.setFullYear(2e3+parseFloat(e))}},Wn={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Ys={Z:function(r){return r.toISOString()},D:function(r,e,t){return e.weekdays.shorthand[Ys.w(r,e,t)]},F:function(r,e,t){return ba(Ys.n(r,e,t)-1,!1,e)},G:function(r,e,t){return ur(Ys.h(r,e,t))},H:function(r){return ur(r.getHours())},J:function(r,e){return e.ordinal!==void 0?r.getDate()+e.ordinal(r.getDate()):r.getDate()},K:function(r,e){return e.amPM[qr(r.getHours()>11)]},M:function(r,e){return ba(r.getMonth(),!0,e)},S:function(r){return ur(r.getSeconds())},U:function(r){return r.getTime()/1e3},W:function(r,e,t){return t.getWeek(r)},Y:function(r){return ur(r.getFullYear(),4)},d:function(r){return ur(r.getDate())},h:function(r){return r.getHours()%12?r.getHours()%12:12},i:function(r){return ur(r.getMinutes())},j:function(r){return r.getDate()},l:function(r,e){return e.weekdays.longhand[r.getDay()]},m:function(r){return ur(r.getMonth()+1)},n:function(r){return r.getMonth()+1},s:function(r){return r.getSeconds()},u:function(r){return r.getTime()},w:function(r){return r.getDay()},y:function(r){return String(r.getFullYear()).substring(2)}};var sd=a(function(r){var e=r.config,t=e===void 0?Si:e,n=r.l10n,s=n===void 0?Gl:n,c=r.isMobile,h=c===void 0?!1:c;return function(d,p,g){var b=g||s;return t.formatDate!==void 0&&!h?t.formatDate(d,p,b):p.split("").map(function(v,E,A){return Ys[v]&&A[E-1]!=="\\"?Ys[v](d,b,t):v!=="\\"?v:""}).join("")}},"createDateFormatter"),Xl=a(function(r){var e=r.config,t=e===void 0?Si:e,n=r.l10n,s=n===void 0?Gl:n;return function(c,h,d,p){if(!(c!==0&&!c)){var g=p||s,b,v=c;if(c instanceof Date)b=new Date(c.getTime());else if(typeof c!="string"&&c.toFixed!==void 0)b=new Date(c);else if(typeof c=="string"){var E=h||(t||Si).dateFormat,A=String(c).trim();if(A==="today")b=new Date,d=!0;else if(t&&t.parseDate)b=t.parseDate(c,E);else if(/Z$/.test(A)||/GMT$/.test(A))b=new Date(c);else{for(var N=void 0,P=[],T=0,O=0,j="";T<E.length;T++){var F=E[T],U=F==="\\",Z=E[T-1]==="\\"||U;if(Wn[F]&&!Z){j+=Wn[F];var se=new RegExp(j).exec(c);se&&(N=!0)&&P[F!=="Y"?"push":"unshift"]({fn:kg[F],val:se[++O]})}else U||(j+=".")}b=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),P.forEach(function(ee){var _=ee.fn,X=ee.val;return b=_(b,X,g)||b}),b=N?b:void 0}}if(!(b instanceof Date&&!isNaN(b.getTime()))){t.errorHandler(new Error("Invalid date provided: "+v));return}return d===!0&&b.setHours(0,0,0,0),b}}},"createDateParser");function Ir(r,e,t){return t===void 0&&(t=!0),t!==!1?new Date(r.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):r.getTime()-e.getTime()}a(Ir,"compareDates");var _g=a(function(r,e,t){return r>Math.min(e,t)&&r<Math.max(e,t)},"isBetween"),Jl=a(function(r,e,t){return r*3600+e*60+t},"calculateSecondsSinceMidnight"),qg=a(function(r){var e=Math.floor(r/3600),t=(r-e*3600)/60;return[e,t,r-e*3600-t*60]},"parseSeconds"),Mg={DAY:864e5};function Ql(r){var e=r.defaultHour,t=r.defaultMinute,n=r.defaultSeconds;if(r.minDate!==void 0){var s=r.minDate.getHours(),c=r.minDate.getMinutes(),h=r.minDate.getSeconds();e<s&&(e=s),e===s&&t<c&&(t=c),e===s&&t===c&&n<h&&(n=r.minDate.getSeconds())}if(r.maxDate!==void 0){var d=r.maxDate.getHours(),p=r.maxDate.getMinutes();e=Math.min(e,d),e===d&&(t=Math.min(p,t)),e===d&&t===p&&(n=r.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:n}}a(Ql,"getDefaultHours");typeof Object.assign!="function"&&(Object.assign=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!r)throw TypeError("Cannot convert undefined or null to object");for(var n=a(function(d){d&&Object.keys(d).forEach(function(p){return r[p]=d[p]})},"_loop_1"),s=0,c=e;s<c.length;s++){var h=c[s];n(h)}return r});var dr=function(){return dr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},dr.apply(this,arguments)},Ig=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),s=0,e=0;e<t;e++)for(var c=arguments[e],h=0,d=c.length;h<d;h++,s++)n[s]=c[h];return n},gT=300;function bT(r,e){var t={config:dr(dr({},Si),Vt.defaultConfig),l10n:Yl};t.parseDate=Xl({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=P,t._setHoursFromDate=E,t._positionCalendar=$e,t.changeMonth=ne,t.changeYear=je,t.clear=xe,t.close=ue,t.onMouseOver=qe,t._createElement=et,t.createDay=se,t.destroy=Be,t.isEnabled=Ve,t.jumpToDate=j,t.updateValue=yr,t.open=Ce,t.redraw=wt,t.set=St,t.setDate=Ze,t.toggle=nt;function n(){t.utils={getDaysInMonth:function(x,S){return x===void 0&&(x=t.currentMonth),S===void 0&&(S=t.currentYear),x===1&&(S%4===0&&S%100!==0||S%400===0)?29:t.l10n.daysInMonth[x]}}}a(n,"setupHelperFunctions");function s(){t.element=t.input=r,t.isOpen=!1,Re(),it(),kt(),Ct(),n(),t.isMobile||Z(),O(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&E(t.config.noCalendar?t.latestSelectedDateObj:void 0),yr(!1)),d();var x=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&x&&$e(),Me("onReady")}a(s,"init");function c(){var x;return((x=t.calendarContainer)===null||x===void 0?void 0:x.getRootNode()).activeElement||document.activeElement}a(c,"getClosestActiveElement");function h(x){return x.bind(t)}a(h,"bindToInstance");function d(){var x=t.config;x.weekNumbers===!1&&x.showMonths===1||x.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var S=(t.days.offsetWidth+1)*x.showMonths;t.daysContainer.style.width=S+"px",t.calendarContainer.style.width=S+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}a(d,"setCalendarWidth");function p(x){if(t.selectedDates.length===0){var S=t.config.minDate===void 0||Ir(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),M=Ql(t.config);S.setHours(M.hours,M.minutes,M.seconds,S.getMilliseconds()),t.selectedDates=[S],t.latestSelectedDateObj=S}x!==void 0&&x.type!=="blur"&&jn(x);var H=t._input.value;v(),yr(),t._input.value!==H&&t._debouncedChange()}a(p,"updateTime");function g(x,S){return x%12+12*qr(S===t.l10n.amPM[1])}a(g,"ampm2military");function b(x){switch(x%24){case 0:case 12:return 12;default:return x%12}}a(b,"military2ampm");function v(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var x=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,S=(parseInt(t.minuteElement.value,10)||0)%60,M=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(x=g(x,t.amPM.textContent));var H=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Ir(t.latestSelectedDateObj,t.config.minDate,!0)===0,te=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Ir(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var oe=Jl(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Le=Jl(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),we=Jl(x,S,M);if(we>Le&&we<oe){var Oe=qg(oe);x=Oe[0],S=Oe[1],M=Oe[2]}}else{if(te){var fe=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;x=Math.min(x,fe.getHours()),x===fe.getHours()&&(S=Math.min(S,fe.getMinutes())),S===fe.getMinutes()&&(M=Math.min(M,fe.getSeconds()))}if(H){var Ne=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;x=Math.max(x,Ne.getHours()),x===Ne.getHours()&&S<Ne.getMinutes()&&(S=Ne.getMinutes()),S===Ne.getMinutes()&&(M=Math.max(M,Ne.getSeconds()))}}A(x,S,M)}}a(v,"setHoursFromInputs");function E(x){var S=x||t.latestSelectedDateObj;S&&S instanceof Date&&A(S.getHours(),S.getMinutes(),S.getSeconds())}a(E,"setHoursFromDate");function A(x,S,M){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(x%24,S,M||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=ur(t.config.time_24hr?x:(12+x)%12+12*qr(x%12===0)),t.minuteElement.value=ur(S),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[qr(x>=12)]),t.secondElement!==void 0&&(t.secondElement.value=ur(M)))}a(A,"setHours");function N(x){var S=Mr(x),M=parseInt(S.value)+(x.delta||0);(M/1e3>1||x.key==="Enter"&&!/[^\d]/.test(M.toString()))&&je(M)}a(N,"onYearInput");function P(x,S,M,H){if(S instanceof Array)return S.forEach(function(te){return P(x,te,M,H)});if(x instanceof Array)return x.forEach(function(te){return P(te,S,M,H)});x.addEventListener(S,M,H),t._handlers.push({remove:function(){return x.removeEventListener(S,M,H)}})}a(P,"bind");function T(){Me("onChange")}a(T,"triggerChange");function O(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(M){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+M+"]"),function(H){return P(H,"click",t[M])})}),t.isMobile){Ue();return}var x=rd(Xe,50);if(t._debouncedChange=rd(T,gT),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&P(t.daysContainer,"mouseover",function(M){t.config.mode==="range"&&qe(Mr(M))}),P(t._input,"keydown",Ye),t.calendarContainer!==void 0&&P(t.calendarContainer,"keydown",Ye),!t.config.inline&&!t.config.static&&P(window,"resize",x),window.ontouchstart!==void 0?P(window.document,"touchstart",ke):P(window.document,"mousedown",ke),P(window.document,"focus",ke,{capture:!0}),t.config.clickOpens===!0&&(P(t._input,"focus",t.open),P(t._input,"click",t.open)),t.daysContainer!==void 0&&(P(t.monthNav,"click",ui),P(t.monthNav,["keyup","increment"],N),P(t.daysContainer,"click",xt)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var S=a(function(M){return Mr(M).select()},"selText");P(t.timeContainer,["increment"],p),P(t.timeContainer,"blur",p,{capture:!0}),P(t.timeContainer,"click",F),P([t.hourElement,t.minuteElement],["focus","click"],S),t.secondElement!==void 0&&P(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&P(t.amPM,"click",function(M){p(M)})}t.config.allowInput&&P(t._input,"blur",ft)}a(O,"bindEvents");function j(x,S){var M=x!==void 0?t.parseDate(x):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),H=t.currentYear,te=t.currentMonth;try{M!==void 0&&(t.currentYear=M.getFullYear(),t.currentMonth=M.getMonth())}catch(oe){oe.message="Invalid date supplied: "+M,t.config.errorHandler(oe)}S&&t.currentYear!==H&&(Me("onYearChange"),re()),S&&(t.currentYear!==H||t.currentMonth!==te)&&Me("onMonthChange"),t.redraw()}a(j,"jumpToDate");function F(x){var S=Mr(x);~S.className.indexOf("arrow")&&U(x,S.classList.contains("arrowUp")?1:-1)}a(F,"timeIncrement");function U(x,S,M){var H=x&&Mr(x),te=M||H&&H.parentNode&&H.parentNode.firstChild,oe=We("increment");oe.delta=S,te&&te.dispatchEvent(oe)}a(U,"incrementNumInput");function Z(){var x=window.document.createDocumentFragment();if(t.calendarContainer=et("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(x.appendChild(q()),t.innerContainer=et("div","flatpickr-innerContainer"),t.config.weekNumbers){var S=W(),M=S.weekWrapper,H=S.weekNumbers;t.innerContainer.appendChild(M),t.weekNumbers=H,t.weekWrapper=M}t.rContainer=et("div","flatpickr-rContainer"),t.rContainer.appendChild(C()),t.daysContainer||(t.daysContainer=et("div","flatpickr-days"),t.daysContainer.tabIndex=-1),V(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),x.appendChild(t.innerContainer)}t.config.enableTime&&x.appendChild(I()),hr(t.calendarContainer,"rangeMode",t.config.mode==="range"),hr(t.calendarContainer,"animate",t.config.animate===!0),hr(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(x);var te=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!te&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var oe=et("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(oe,t.element),oe.appendChild(t.element),t.altInput&&oe.appendChild(t.altInput),oe.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}a(Z,"build");function se(x,S,M,H){var te=Ve(S,!0),oe=et("span",x,S.getDate().toString());return oe.dateObj=S,oe.$i=H,oe.setAttribute("aria-label",t.formatDate(S,t.config.ariaDateFormat)),x.indexOf("hidden")===-1&&Ir(S,t.now)===0&&(t.todayDateElem=oe,oe.classList.add("today"),oe.setAttribute("aria-current","date")),te?(oe.tabIndex=-1,Yt(S)&&(oe.classList.add("selected"),t.selectedDateElem=oe,t.config.mode==="range"&&(hr(oe,"startRange",t.selectedDates[0]&&Ir(S,t.selectedDates[0],!0)===0),hr(oe,"endRange",t.selectedDates[1]&&Ir(S,t.selectedDates[1],!0)===0),x==="nextMonthDay"&&oe.classList.add("inRange")))):oe.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Gr(S)&&!Yt(S)&&oe.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&x!=="prevMonthDay"&&H%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(S)+"</span>"),Me("onDayCreate",oe),oe}a(se,"createDay");function ee(x){x.focus(),t.config.mode==="range"&&qe(x)}a(ee,"focusOnDayElem");function _(x){for(var S=x>0?0:t.config.showMonths-1,M=x>0?t.config.showMonths:-1,H=S;H!=M;H+=x)for(var te=t.daysContainer.children[H],oe=x>0?0:te.children.length-1,Le=x>0?te.children.length:-1,we=oe;we!=Le;we+=x){var Oe=te.children[we];if(Oe.className.indexOf("hidden")===-1&&Ve(Oe.dateObj))return Oe}}a(_,"getFirstAvailableDay");function X(x,S){for(var M=x.className.indexOf("Month")===-1?x.dateObj.getMonth():t.currentMonth,H=S>0?t.config.showMonths:-1,te=S>0?1:-1,oe=M-t.currentMonth;oe!=H;oe+=te)for(var Le=t.daysContainer.children[oe],we=M-t.currentMonth===oe?x.$i+S:S<0?Le.children.length-1:0,Oe=Le.children.length,fe=we;fe>=0&&fe<Oe&&fe!=(S>0?Oe:-1);fe+=te){var Ne=Le.children[fe];if(Ne.className.indexOf("hidden")===-1&&Ve(Ne.dateObj)&&Math.abs(x.$i-fe)>=Math.abs(S))return ee(Ne)}t.changeMonth(te),de(_(te),0)}a(X,"getNextAvailableDay");function de(x,S){var M=c(),H=Ge(M||document.body),te=x!==void 0?x:H?M:t.selectedDateElem!==void 0&&Ge(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Ge(t.todayDateElem)?t.todayDateElem:_(S>0?1:-1);te===void 0?t._input.focus():H?X(te,S):ee(te)}a(de,"focusOnDay");function D(x,S){for(var M=(new Date(x,S,1).getDay()-t.l10n.firstDayOfWeek+7)%7,H=t.utils.getDaysInMonth((S-1+12)%12,x),te=t.utils.getDaysInMonth(S,x),oe=window.document.createDocumentFragment(),Le=t.config.showMonths>1,we=Le?"prevMonthDay hidden":"prevMonthDay",Oe=Le?"nextMonthDay hidden":"nextMonthDay",fe=H+1-M,Ne=0;fe<=H;fe++,Ne++)oe.appendChild(se("flatpickr-day "+we,new Date(x,S-1,fe),fe,Ne));for(fe=1;fe<=te;fe++,Ne++)oe.appendChild(se("flatpickr-day",new Date(x,S,fe),fe,Ne));for(var Je=te+1;Je<=42-M&&(t.config.showMonths===1||Ne%7!==0);Je++,Ne++)oe.appendChild(se("flatpickr-day "+Oe,new Date(x,S+1,Je%te),Je,Ne));var Ht=et("div","dayContainer");return Ht.appendChild(oe),Ht}a(D,"buildMonthDays");function V(){if(t.daysContainer!==void 0){ma(t.daysContainer),t.weekNumbers&&ma(t.weekNumbers);for(var x=document.createDocumentFragment(),S=0;S<t.config.showMonths;S++){var M=new Date(t.currentYear,t.currentMonth,1);M.setMonth(t.currentMonth+S),x.appendChild(D(M.getFullYear(),M.getMonth()))}t.daysContainer.appendChild(x),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&qe()}}a(V,"buildDays");function re(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var x=a(function(H){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&H<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&H>t.config.maxDate.getMonth())},"shouldBuildMonth");t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var S=0;S<12;S++)if(x(S)){var M=et("option","flatpickr-monthDropdown-month");M.value=new Date(t.currentYear,S).getMonth().toString(),M.textContent=ba(S,t.config.shorthandCurrentMonth,t.l10n),M.tabIndex=-1,t.currentMonth===S&&(M.selected=!0),t.monthsDropdownContainer.appendChild(M)}}}a(re,"buildMonthSwitch");function J(){var x=et("div","flatpickr-month"),S=window.document.createDocumentFragment(),M;t.config.showMonths>1||t.config.monthSelectorType==="static"?M=et("span","cur-month"):(t.monthsDropdownContainer=et("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),P(t.monthsDropdownContainer,"change",function(Le){var we=Mr(Le),Oe=parseInt(we.value,10);t.changeMonth(Oe-t.currentMonth),Me("onMonthChange")}),re(),M=t.monthsDropdownContainer);var H=ga("cur-year",{tabindex:"-1"}),te=H.getElementsByTagName("input")[0];te.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&te.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(te.setAttribute("max",t.config.maxDate.getFullYear().toString()),te.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var oe=et("div","flatpickr-current-month");return oe.appendChild(M),oe.appendChild(H),S.appendChild(oe),x.appendChild(S),{container:x,yearElement:te,monthElement:M}}a(J,"buildMonth");function ae(){ma(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var x=t.config.showMonths;x--;){var S=J();t.yearElements.push(S.yearElement),t.monthElements.push(S.monthElement),t.monthNav.appendChild(S.container)}t.monthNav.appendChild(t.nextMonthNav)}a(ae,"buildMonths");function q(){return t.monthNav=et("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=et("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=et("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,ae(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(x){t.__hidePrevMonthArrow!==x&&(hr(t.prevMonthNav,"flatpickr-disabled",x),t.__hidePrevMonthArrow=x)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(x){t.__hideNextMonthArrow!==x&&(hr(t.nextMonthNav,"flatpickr-disabled",x),t.__hideNextMonthArrow=x)}}),t.currentYearElement=t.yearElements[0],sr(),t.monthNav}a(q,"buildMonthNav");function I(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var x=Ql(t.config);t.timeContainer=et("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var S=et("span","flatpickr-time-separator",":"),M=ga("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=M.getElementsByTagName("input")[0];var H=ga("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=H.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=ur(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?x.hours:b(x.hours)),t.minuteElement.value=ur(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():x.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(M),t.timeContainer.appendChild(S),t.timeContainer.appendChild(H),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var te=ga("flatpickr-second");t.secondElement=te.getElementsByTagName("input")[0],t.secondElement.value=ur(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():x.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(et("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(te)}return t.config.time_24hr||(t.amPM=et("span","flatpickr-am-pm",t.l10n.amPM[qr((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}a(I,"buildTime");function C(){t.weekdayContainer?ma(t.weekdayContainer):t.weekdayContainer=et("div","flatpickr-weekdays");for(var x=t.config.showMonths;x--;){var S=et("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(S)}return $(),t.weekdayContainer}a(C,"buildWeekdays");function $(){if(t.weekdayContainer){var x=t.l10n.firstDayOfWeek,S=Ig(t.l10n.weekdays.shorthand);x>0&&x<S.length&&(S=Ig(S.splice(x,S.length),S.splice(0,x)));for(var M=t.config.showMonths;M--;)t.weekdayContainer.children[M].innerHTML=`
      <span class='flatpickr-weekday'>
        `+S.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}a($,"updateWeekdays");function W(){t.calendarContainer.classList.add("hasWeeks");var x=et("div","flatpickr-weekwrapper");x.appendChild(et("span","flatpickr-weekday",t.l10n.weekAbbreviation));var S=et("div","flatpickr-weeks");return x.appendChild(S),{weekWrapper:x,weekNumbers:S}}a(W,"buildWeeks");function ne(x,S){S===void 0&&(S=!0);var M=S?x:x-t.currentMonth;M<0&&t._hidePrevMonthArrow===!0||M>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=M,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Me("onYearChange"),re()),V(),Me("onMonthChange"),sr())}a(ne,"changeMonth");function xe(x,S){if(x===void 0&&(x=!0),S===void 0&&(S=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,S===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var M=Ql(t.config),H=M.hours,te=M.minutes,oe=M.seconds;A(H,te,oe)}t.redraw(),x&&Me("onChange")}a(xe,"clear");function ue(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Me("onClose")}a(ue,"close");function Be(){t.config!==void 0&&Me("onDestroy");for(var x=t._handlers.length;x--;)t._handlers[x].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var S=t.calendarContainer.parentNode;if(S.lastChild&&S.removeChild(S.lastChild),S.parentNode){for(;S.firstChild;)S.parentNode.insertBefore(S.firstChild,S);S.parentNode.removeChild(S)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(M){try{delete t[M]}catch{}})}a(Be,"destroy");function Fe(x){return t.calendarContainer.contains(x)}a(Fe,"isCalendarElem");function ke(x){if(t.isOpen&&!t.config.inline){var S=Mr(x),M=Fe(S),H=S===t.input||S===t.altInput||t.element.contains(S)||x.path&&x.path.indexOf&&(~x.path.indexOf(t.input)||~x.path.indexOf(t.altInput)),te=!H&&!M&&!Fe(x.relatedTarget),oe=!t.config.ignoredFocusElements.some(function(Le){return Le.contains(S)});te&&oe&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&p(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}a(ke,"documentClick");function je(x){if(!(!x||t.config.minDate&&x<t.config.minDate.getFullYear()||t.config.maxDate&&x>t.config.maxDate.getFullYear())){var S=x,M=t.currentYear!==S;t.currentYear=S||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),M&&(t.redraw(),Me("onYearChange"),re())}}a(je,"changeYear");function Ve(x,S){var M;S===void 0&&(S=!0);var H=t.parseDate(x,void 0,S);if(t.config.minDate&&H&&Ir(H,t.config.minDate,S!==void 0?S:!t.minDateHasTime)<0||t.config.maxDate&&H&&Ir(H,t.config.maxDate,S!==void 0?S:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(H===void 0)return!1;for(var te=!!t.config.enable,oe=(M=t.config.enable)!==null&&M!==void 0?M:t.config.disable,Le=0,we=void 0;Le<oe.length;Le++){if(we=oe[Le],typeof we=="function"&&we(H))return te;if(we instanceof Date&&H!==void 0&&we.getTime()===H.getTime())return te;if(typeof we=="string"){var Oe=t.parseDate(we,void 0,!0);return Oe&&Oe.getTime()===H.getTime()?te:!te}else if(typeof we=="object"&&H!==void 0&&we.from&&we.to&&H.getTime()>=we.from.getTime()&&H.getTime()<=we.to.getTime())return te}return!te}a(Ve,"isEnabled");function Ge(x){return t.daysContainer!==void 0?x.className.indexOf("hidden")===-1&&x.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(x):!1}a(Ge,"isInView");function ft(x){var S=x.target===t._input,M=t._input.value.trimEnd()!==an();S&&M&&!(x.relatedTarget&&Fe(x.relatedTarget))&&t.setDate(t._input.value,!0,x.target===t.altInput?t.config.altFormat:t.config.dateFormat)}a(ft,"onBlur");function Ye(x){var S=Mr(x),M=t.config.wrap?r.contains(S):S===t._input,H=t.config.allowInput,te=t.isOpen&&(!H||!M),oe=t.config.inline&&M&&!H;if(x.keyCode===13&&M){if(H)return t.setDate(t._input.value,!0,S===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),S.blur();t.open()}else if(Fe(S)||te||oe){var Le=!!t.timeContainer&&t.timeContainer.contains(S);switch(x.keyCode){case 13:Le?(x.preventDefault(),p(),jt()):xt(x);break;case 27:x.preventDefault(),jt();break;case 8:case 46:M&&!t.config.allowInput&&(x.preventDefault(),t.clear());break;case 37:case 39:if(!Le&&!M){x.preventDefault();var we=c();if(t.daysContainer!==void 0&&(H===!1||we&&Ge(we))){var Oe=x.keyCode===39?1:-1;x.ctrlKey?(x.stopPropagation(),ne(Oe),de(_(1),0)):de(void 0,Oe)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:x.preventDefault();var fe=x.keyCode===40?1:-1;t.daysContainer&&S.$i!==void 0||S===t.input||S===t.altInput?x.ctrlKey?(x.stopPropagation(),je(t.currentYear-fe),de(_(1),0)):Le||de(void 0,fe*7):S===t.currentYearElement?je(t.currentYear-fe):t.config.enableTime&&(!Le&&t.hourElement&&t.hourElement.focus(),p(x),t._debouncedChange());break;case 9:if(Le){var Ne=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Pt){return Pt}),Je=Ne.indexOf(S);if(Je!==-1){var Ht=Ne[Je+(x.shiftKey?-1:1)];x.preventDefault(),(Ht||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(S)&&x.shiftKey&&(x.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&S===t.amPM)switch(x.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],v(),yr();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],v(),yr();break}(M||Fe(S))&&Me("onKeyDown",x)}a(Ye,"onKeyDown");function qe(x,S){if(S===void 0&&(S="flatpickr-day"),!(t.selectedDates.length!==1||x&&(!x.classList.contains(S)||x.classList.contains("flatpickr-disabled")))){for(var M=x?x.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),H=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),te=Math.min(M,t.selectedDates[0].getTime()),oe=Math.max(M,t.selectedDates[0].getTime()),Le=!1,we=0,Oe=0,fe=te;fe<oe;fe+=Mg.DAY)Ve(new Date(fe),!0)||(Le=Le||fe>te&&fe<oe,fe<H&&(!we||fe>we)?we=fe:fe>H&&(!Oe||fe<Oe)&&(Oe=fe));var Ne=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+S));Ne.forEach(function(Je){var Ht=Je.dateObj,Pt=Ht.getTime(),_t=we>0&&Pt<we||Oe>0&&Pt>Oe;if(_t){Je.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Bt){Je.classList.remove(Bt)});return}else if(Le&&!_t)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Bt){Je.classList.remove(Bt)}),x!==void 0&&(x.classList.add(M<=t.selectedDates[0].getTime()?"startRange":"endRange"),H<M&&Pt===H?Je.classList.add("startRange"):H>M&&Pt===H&&Je.classList.add("endRange"),Pt>=we&&(Oe===0||Pt<=Oe)&&_g(Pt,H,M)&&Je.classList.add("inRange"))})}}a(qe,"onMouseOver");function Xe(){t.isOpen&&!t.config.static&&!t.config.inline&&$e()}a(Xe,"onResize");function Ce(x,S){if(S===void 0&&(S=t._positionElement),t.isMobile===!0){if(x){x.preventDefault();var M=Mr(x);M&&M.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Me("onOpen");return}else if(t._input.disabled||t.config.inline)return;var H=t.isOpen;t.isOpen=!0,H||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Me("onOpen"),$e(S)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(x===void 0||!t.timeContainer.contains(x.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}a(Ce,"open");function He(x){return function(S){var M=t.config["_"+x+"Date"]=t.parseDate(S,t.config.dateFormat),H=t.config["_"+(x==="min"?"max":"min")+"Date"];M!==void 0&&(t[x==="min"?"minDateHasTime":"maxDateHasTime"]=M.getHours()>0||M.getMinutes()>0||M.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(te){return Ve(te)}),!t.selectedDates.length&&x==="min"&&E(M),yr()),t.daysContainer&&(wt(),M!==void 0?t.currentYearElement[x]=M.getFullYear().toString():t.currentYearElement.removeAttribute(x),t.currentYearElement.disabled=!!H&&M!==void 0&&H.getFullYear()===M.getFullYear())}}a(He,"minMaxDateSetter");function Re(){var x=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],S=dr(dr({},JSON.parse(JSON.stringify(r.dataset||{}))),e),M={};t.config.parseDate=S.parseDate,t.config.formatDate=S.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Ne){t.config._enable=Nt(Ne)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Ne){t.config._disable=Nt(Ne)}});var H=S.mode==="time";if(!S.dateFormat&&(S.enableTime||H)){var te=Vt.defaultConfig.dateFormat||Si.dateFormat;M.dateFormat=S.noCalendar||H?"H:i"+(S.enableSeconds?":S":""):te+" H:i"+(S.enableSeconds?":S":"")}if(S.altInput&&(S.enableTime||H)&&!S.altFormat){var oe=Vt.defaultConfig.altFormat||Si.altFormat;M.altFormat=S.noCalendar||H?"h:i"+(S.enableSeconds?":S K":" K"):oe+(" h:i"+(S.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:He("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:He("max")});var Le=a(function(Ne){return function(Je){t.config[Ne==="min"?"_minTime":"_maxTime"]=t.parseDate(Je,"H:i:S")}},"minMaxTimeSetter");Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Le("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Le("max")}),S.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,M,S);for(var we=0;we<x.length;we++)t.config[x[we]]=t.config[x[we]]===!0||t.config[x[we]]==="true";Kl.filter(function(Ne){return t.config[Ne]!==void 0}).forEach(function(Ne){t.config[Ne]=Zl(t.config[Ne]||[]).map(h)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var we=0;we<t.config.plugins.length;we++){var Oe=t.config.plugins[we](t)||{};for(var fe in Oe)Kl.indexOf(fe)>-1?t.config[fe]=Zl(Oe[fe]).map(h).concat(t.config[fe]):typeof S[fe]>"u"&&(t.config[fe]=Oe[fe])}S.altInputClass||(t.config.altInputClass=Ie().className+" "+t.config.altInputClass),Me("onParseConfig")}a(Re,"parseConfig");function Ie(){return t.config.wrap?r.querySelector("[data-input]"):r}a(Ie,"getInputElem");function it(){typeof t.config.locale!="object"&&typeof Vt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=dr(dr({},Vt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Vt.l10ns[t.config.locale]:void 0),Wn.D="("+t.l10n.weekdays.shorthand.join("|")+")",Wn.l="("+t.l10n.weekdays.longhand.join("|")+")",Wn.M="("+t.l10n.months.shorthand.join("|")+")",Wn.F="("+t.l10n.months.longhand.join("|")+")",Wn.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var x=dr(dr({},e),JSON.parse(JSON.stringify(r.dataset||{})));x.time_24hr===void 0&&Vt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=sd(t),t.parseDate=Xl({config:t.config,l10n:t.l10n})}a(it,"setupLocale");function $e(x){if(typeof t.config.position=="function")return void t.config.position(t,x);if(t.calendarContainer!==void 0){Me("onPreCalendarPosition");var S=x||t._positionElement,M=Array.prototype.reduce.call(t.calendarContainer.children,function(Bn,Nn){return Bn+Nn.offsetHeight},0),H=t.calendarContainer.offsetWidth,te=t.config.position.split(" "),oe=te[0],Le=te.length>1?te[1]:null,we=S.getBoundingClientRect(),Oe=window.innerHeight-we.bottom,fe=oe==="above"||oe!=="below"&&Oe<M&&we.top>M,Ne=window.pageYOffset+we.top+(fe?-M-2:S.offsetHeight+2);if(hr(t.calendarContainer,"arrowTop",!fe),hr(t.calendarContainer,"arrowBottom",fe),!t.config.inline){var Je=window.pageXOffset+we.left,Ht=!1,Pt=!1;Le==="center"?(Je-=(H-we.width)/2,Ht=!0):Le==="right"&&(Je-=H-we.width,Pt=!0),hr(t.calendarContainer,"arrowLeft",!Ht&&!Pt),hr(t.calendarContainer,"arrowCenter",Ht),hr(t.calendarContainer,"arrowRight",Pt);var _t=window.document.body.offsetWidth-(window.pageXOffset+we.right),Bt=Je+H>window.document.body.offsetWidth,Lr=_t+H>window.document.body.offsetWidth;if(hr(t.calendarContainer,"rightMost",Bt),!t.config.static)if(t.calendarContainer.style.top=Ne+"px",!Bt)t.calendarContainer.style.left=Je+"px",t.calendarContainer.style.right="auto";else if(!Lr)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=_t+"px";else{var wr=ct();if(wr===void 0)return;var Or=window.document.body.offsetWidth,An=Math.max(0,Or/2-H/2),Et=".flatpickr-calendar.centerMost:before",Sn=".flatpickr-calendar.centerMost:after",Yr=wr.cssRules.length,ln="{left:"+we.left+"px;right:auto;}";hr(t.calendarContainer,"rightMost",!1),hr(t.calendarContainer,"centerMost",!0),wr.insertRule(Et+","+Sn+ln,Yr),t.calendarContainer.style.left=An+"px",t.calendarContainer.style.right="auto"}}}}a($e,"positionCalendar");function ct(){for(var x=null,S=0;S<document.styleSheets.length;S++){var M=document.styleSheets[S];if(M.cssRules){try{M.cssRules}catch{continue}x=M;break}}return x??ut()}a(ct,"getDocumentStyleSheet");function ut(){var x=document.createElement("style");return document.head.appendChild(x),x.sheet}a(ut,"createStyleSheet");function wt(){t.config.noCalendar||t.isMobile||(re(),sr(),V())}a(wt,"redraw");function jt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}a(jt,"focusAndClose");function xt(x){x.preventDefault(),x.stopPropagation();var S=a(function(Ne){return Ne.classList&&Ne.classList.contains("flatpickr-day")&&!Ne.classList.contains("flatpickr-disabled")&&!Ne.classList.contains("notAllowed")},"isSelectable"),M=nd(Mr(x),S);if(M!==void 0){var H=M,te=t.latestSelectedDateObj=new Date(H.dateObj.getTime()),oe=(te.getMonth()<t.currentMonth||te.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=H,t.config.mode==="single")t.selectedDates=[te];else if(t.config.mode==="multiple"){var Le=Yt(te);Le?t.selectedDates.splice(parseInt(Le),1):t.selectedDates.push(te)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=te,t.selectedDates.push(te),Ir(te,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Ne,Je){return Ne.getTime()-Je.getTime()}));if(v(),oe){var we=t.currentYear!==te.getFullYear();t.currentYear=te.getFullYear(),t.currentMonth=te.getMonth(),we&&(Me("onYearChange"),re()),Me("onMonthChange")}if(sr(),V(),yr(),!oe&&t.config.mode!=="range"&&t.config.showMonths===1?ee(H):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Oe=t.config.mode==="single"&&!t.config.enableTime,fe=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Oe||fe)&&jt()}T()}}a(xt,"selectDate");var st={locale:[it,$],showMonths:[ae,d,C],minDate:[j],maxDate:[j],positionElement:[Lt],clickOpens:[function(){t.config.clickOpens===!0?(P(t._input,"focus",t.open),P(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function St(x,S){if(x!==null&&typeof x=="object"){Object.assign(t.config,x);for(var M in x)st[M]!==void 0&&st[M].forEach(function(H){return H()})}else t.config[x]=S,st[x]!==void 0?st[x].forEach(function(H){return H()}):Kl.indexOf(x)>-1&&(t.config[x]=Zl(S));t.redraw(),yr(!0)}a(St,"set");function Rt(x,S){var M=[];if(x instanceof Array)M=x.map(function(H){return t.parseDate(H,S)});else if(x instanceof Date||typeof x=="number")M=[t.parseDate(x,S)];else if(typeof x=="string")switch(t.config.mode){case"single":case"time":M=[t.parseDate(x,S)];break;case"multiple":M=x.split(t.config.conjunction).map(function(H){return t.parseDate(H,S)});break;case"range":M=x.split(t.l10n.rangeSeparator).map(function(H){return t.parseDate(H,S)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(x)));t.selectedDates=t.config.allowInvalidPreload?M:M.filter(function(H){return H instanceof Date&&Ve(H,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(H,te){return H.getTime()-te.getTime()})}a(Rt,"setSelectedDate");function Ze(x,S,M){if(S===void 0&&(S=!1),M===void 0&&(M=t.config.dateFormat),x!==0&&!x||x instanceof Array&&x.length===0)return t.clear(S);Rt(x,M),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),j(void 0,S),E(),t.selectedDates.length===0&&t.clear(!1),yr(S),S&&Me("onChange")}a(Ze,"setDate");function Nt(x){return x.slice().map(function(S){return typeof S=="string"||typeof S=="number"||S instanceof Date?t.parseDate(S,void 0,!0):S&&typeof S=="object"&&S.from&&S.to?{from:t.parseDate(S.from,void 0),to:t.parseDate(S.to,void 0)}:S}).filter(function(S){return S})}a(Nt,"parseDateRules");function Ct(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var x=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);x&&Rt(x,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}a(Ct,"setupDates");function kt(){if(t.input=Ie(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=et(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Lt()}a(kt,"setupInputs");function Lt(){t._positionElement=t.config.positionElement||t._input}a(Lt,"updatePositionElement");function Ue(){var x=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=et("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=x,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=x==="datetime-local"?"Y-m-d\\TH:i:S":x==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}P(t.mobileInput,"change",function(S){t.setDate(Mr(S).value,!1,t.mobileFormatStr),Me("onChange"),Me("onClose")})}a(Ue,"setupMobile");function nt(x){if(t.isOpen===!0)return t.close();t.open(x)}a(nt,"toggle");function Me(x,S){if(t.config!==void 0){var M=t.config[x];if(M!==void 0&&M.length>0)for(var H=0;M[H]&&H<M.length;H++)M[H](t.selectedDates,t.input.value,t,S);x==="onChange"&&(t.input.dispatchEvent(We("change")),t.input.dispatchEvent(We("input")))}}a(Me,"triggerEvent");function We(x){var S=document.createEvent("Event");return S.initEvent(x,!0,!0),S}a(We,"createEvent");function Yt(x){for(var S=0;S<t.selectedDates.length;S++){var M=t.selectedDates[S];if(M instanceof Date&&Ir(M,x)===0)return""+S}return!1}a(Yt,"isDateSelected");function Gr(x){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Ir(x,t.selectedDates[0])>=0&&Ir(x,t.selectedDates[1])<=0}a(Gr,"isDateInRange");function sr(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(x,S){var M=new Date(t.currentYear,t.currentMonth,1);M.setMonth(t.currentMonth+S),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[S].textContent=ba(M.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=M.getMonth().toString(),x.value=M.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}a(sr,"updateNavigationCurrentMonth");function an(x){var S=x||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(M){return t.formatDate(M,S)}).filter(function(M,H,te){return t.config.mode!=="range"||t.config.enableTime||te.indexOf(M)===H}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}a(an,"getDateStr");function yr(x){x===void 0&&(x=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=an(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=an(t.config.altFormat)),x!==!1&&Me("onValueUpdate")}a(yr,"updateValue");function ui(x){var S=Mr(x),M=t.prevMonthNav.contains(S),H=t.nextMonthNav.contains(S);M||H?ne(M?-1:1):t.yearElements.indexOf(S)>=0?S.select():S.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):S.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}a(ui,"onMonthNavClick");function jn(x){x.preventDefault();var S=x.type==="keydown",M=Mr(x),H=M;t.amPM!==void 0&&M===t.amPM&&(t.amPM.textContent=t.l10n.amPM[qr(t.amPM.textContent===t.l10n.amPM[0])]);var te=parseFloat(H.getAttribute("min")),oe=parseFloat(H.getAttribute("max")),Le=parseFloat(H.getAttribute("step")),we=parseInt(H.value,10),Oe=x.delta||(S?x.which===38?1:-1:0),fe=we+Le*Oe;if(typeof H.value<"u"&&H.value.length===2){var Ne=H===t.hourElement,Je=H===t.minuteElement;fe<te?(fe=oe+fe+qr(!Ne)+(qr(Ne)&&qr(!t.amPM)),Je&&U(void 0,-1,t.hourElement)):fe>oe&&(fe=H===t.hourElement?fe-oe-qr(!t.amPM):te,Je&&U(void 0,1,t.hourElement)),t.amPM&&Ne&&(Le===1?fe+we===23:Math.abs(fe-we)>Le)&&(t.amPM.textContent=t.l10n.amPM[qr(t.amPM.textContent===t.l10n.amPM[0])]),H.value=ur(fe)}}return a(jn,"timeWrapper"),s(),t}a(bT,"FlatpickrInstance");function Zs(r,e){for(var t=Array.prototype.slice.call(r).filter(function(h){return h instanceof HTMLElement}),n=[],s=0;s<t.length;s++){var c=t[s];try{if(c.getAttribute("data-fp-omit")!==null)continue;c._flatpickr!==void 0&&(c._flatpickr.destroy(),c._flatpickr=void 0),c._flatpickr=bT(c,e||{}),n.push(c._flatpickr)}catch(h){console.error(h)}}return n.length===1?n[0]:n}a(Zs,"_flatpickr");typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(r){return Zs(this,r)},HTMLElement.prototype.flatpickr=function(r){return Zs([this],r)});var Vt=a(function(r,e){return typeof r=="string"?Zs(window.document.querySelectorAll(r),e):r instanceof Node?Zs([r],e):Zs(r,e)},"flatpickr");Vt.defaultConfig={};Vt.l10ns={en:dr({},Yl),default:dr({},Yl)};Vt.localize=function(r){Vt.l10ns.default=dr(dr({},Vt.l10ns.default),r)};Vt.setDefaults=function(r){Vt.defaultConfig=dr(dr({},Vt.defaultConfig),r)};Vt.parseDate=Xl({});Vt.formatDate=sd({});Vt.compareDates=Ir;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(r){return Zs(this,r)});Date.prototype.fp_incr=function(r){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof r=="string"?parseInt(r,10):r))};typeof window<"u"&&(window.flatpickr=Vt);var Dg=Vt;var va=class extends lt{static{a(this,"DatetimeSelectController")}connect(){let e={enableTime:!0,time_24hr:!0,defaultMinute:0},t=Dg(this.querySelector("input"),Object.assign(e,this.appendage()))}appendage(){return this.dataset.inline?{inline:!0}:{}}};var ya=class extends lt{static{a(this,"ImagePreviewController")}static targets=["container"];preview(e){let t=e.currentTarget.files[0];if(!t.type.startsWith("image/"))return;let n=this.imageElement(t);this.containerTarget.innerHTML="",this.containerTarget.appendChild(n),this.generatePreview(t,n)}generatePreview(e,t){let n=new FileReader;n.onload=function(s){return function(c){s.src=c.target.result}}(t),n.readAsDataURL(e)}imageElement(e){let t=document.createElement("img");return t.file=e,t}};var Rg=lr(td());var wa=class extends lt{static{a(this,"RelationSearchController")}static targets=["field","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,Rg.default)(this.fetchData.bind(this),500)}change(e){this.debouncedFetchData(e.target.value)}fetchData(e,t){fetch("/admin/relations?"+new URLSearchParams({m:this.modelValue,q:e})).then(n=>n.text()).then(n=>this.display(n))}display(e){this.resultsTarget.innerHTML=e,this.bindNewActions(this.resultsTarget)}bindNewActions(e){Array.from(e.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(e){let t=e.currentTarget;this.visibleFieldTarget.value=t.getAttribute("name"),this.fieldTarget.value=t.id,this.resultsTarget.innerHTML=""}};var vT=typeof global=="object"&&global&&global.Object===Object&&global,ec=vT;var yT=typeof self=="object"&&self&&self.Object===Object&&self,wT=ec||yT||Function("return this")(),zt=wT;var xT=zt.Symbol,en=xT;var Pg=Object.prototype,ET=Pg.hasOwnProperty,TT=Pg.toString,xa=en?en.toStringTag:void 0;function AT(r){var e=ET.call(r,xa),t=r[xa];try{r[xa]=void 0;var n=!0}catch{}var s=TT.call(r);return n&&(e?r[xa]=t:delete r[xa]),s}a(AT,"getRawTag");var jg=AT;var ST=Object.prototype,NT=ST.toString;function CT(r){return NT.call(r)}a(CT,"objectToString");var Bg=CT;var LT="[object Null]",OT="[object Undefined]",Fg=en?en.toStringTag:void 0;function kT(r){return r==null?r===void 0?OT:LT:Fg&&Fg in Object(r)?jg(r):Bg(r)}a(kT,"baseGetTag");var xn=kT;function _T(r){return r!=null&&typeof r=="object"}a(_T,"isObjectLike");var ir=_T;var qT=Array.isArray,tn=qT;function MT(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}a(MT,"isObject");var fr=MT;function IT(r){return r}a(IT,"identity");var tc=IT;var DT="[object AsyncFunction]",RT="[object Function]",PT="[object GeneratorFunction]",jT="[object Proxy]";function BT(r){if(!fr(r))return!1;var e=xn(r);return e==RT||e==PT||e==DT||e==jT}a(BT,"isFunction");var Xs=BT;var FT=zt["__core-js_shared__"],rc=FT;var Hg=function(){var r=/[^.]+$/.exec(rc&&rc.keys&&rc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function HT(r){return!!Hg&&Hg in r}a(HT,"isMasked");var Ug=HT;var UT=Function.prototype,VT=UT.toString;function zT(r){if(r!=null){try{return VT.call(r)}catch{}try{return r+""}catch{}}return""}a(zT,"toSource");var Kn=zT;var $T=/[\\^$.*+?()[\]{}|]/g,WT=/^\[object .+?Constructor\]$/,KT=Function.prototype,GT=Object.prototype,YT=KT.toString,ZT=GT.hasOwnProperty,XT=RegExp("^"+YT.call(ZT).replace($T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JT(r){if(!fr(r)||Ug(r))return!1;var e=Xs(r)?XT:WT;return e.test(Kn(r))}a(JT,"baseIsNative");var Vg=JT;function QT(r,e){return r?.[e]}a(QT,"getValue");var zg=QT;function eA(r,e){var t=zg(r,e);return Vg(t)?t:void 0}a(eA,"getNative");var Dr=eA;var tA=Dr(zt,"WeakMap"),nc=tA;var $g=Object.create,rA=function(){function r(){}return a(r,"object"),function(e){if(!fr(e))return{};if($g)return $g(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),Wg=rA;function nA(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}a(nA,"apply");var Kg=nA;function iA(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}a(iA,"copyArray");var ic=iA;var sA=800,oA=16,aA=Date.now;function lA(r){var e=0,t=0;return function(){var n=aA(),s=oA-(n-t);if(t=n,s>0){if(++e>=sA)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}a(lA,"shortOut");var Gg=lA;function cA(r){return function(){return r}}a(cA,"constant");var Yg=cA;var uA=function(){try{var r=Dr(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Js=uA;var hA=Js?function(r,e){return Js(r,"toString",{configurable:!0,enumerable:!1,value:Yg(e),writable:!0})}:tc,Zg=hA;var dA=Gg(Zg),Xg=dA;function fA(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}a(fA,"arrayEach");var Jg=fA;var pA=9007199254740991,mA=/^(?:0|[1-9]\d*)$/;function gA(r,e){var t=typeof r;return e=e??pA,!!e&&(t=="number"||t!="symbol"&&mA.test(r))&&r>-1&&r%1==0&&r<e}a(gA,"isIndex");var sc=gA;function bA(r,e,t){e=="__proto__"&&Js?Js(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}a(bA,"baseAssignValue");var Qs=bA;function vA(r,e){return r===e||r!==r&&e!==e}a(vA,"eq");var kn=vA;var yA=Object.prototype,wA=yA.hasOwnProperty;function xA(r,e,t){var n=r[e];(!(wA.call(r,e)&&kn(n,t))||t===void 0&&!(e in r))&&Qs(r,e,t)}a(xA,"assignValue");var oc=xA;function EA(r,e,t,n){var s=!t;t||(t={});for(var c=-1,h=e.length;++c<h;){var d=e[c],p=n?n(t[d],r[d],d,t,r):void 0;p===void 0&&(p=r[d]),s?Qs(t,d,p):oc(t,d,p)}return t}a(EA,"copyObject");var _n=EA;var Qg=Math.max;function TA(r,e,t){return e=Qg(e===void 0?r.length-1:e,0),function(){for(var n=arguments,s=-1,c=Qg(n.length-e,0),h=Array(c);++s<c;)h[s]=n[e+s];s=-1;for(var d=Array(e+1);++s<e;)d[s]=n[s];return d[e]=t(h),Kg(r,this,d)}}a(TA,"overRest");var eb=TA;function AA(r,e){return Xg(eb(r,e,tc),r+"")}a(AA,"baseRest");var tb=AA;var SA=9007199254740991;function NA(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=SA}a(NA,"isLength");var ac=NA;function CA(r){return r!=null&&ac(r.length)&&!Xs(r)}a(CA,"isArrayLike");var Ni=CA;function LA(r,e,t){if(!fr(t))return!1;var n=typeof e;return(n=="number"?Ni(t)&&sc(e,t.length):n=="string"&&e in t)?kn(t[e],r):!1}a(LA,"isIterateeCall");var rb=LA;function OA(r){return tb(function(e,t){var n=-1,s=t.length,c=s>1?t[s-1]:void 0,h=s>2?t[2]:void 0;for(c=r.length>3&&typeof c=="function"?(s--,c):void 0,h&&rb(t[0],t[1],h)&&(c=s<3?void 0:c,s=1),e=Object(e);++n<s;){var d=t[n];d&&r(e,d,n,c)}return e})}a(OA,"createAssigner");var nb=OA;var kA=Object.prototype;function _A(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||kA;return r===t}a(_A,"isPrototype");var eo=_A;function qA(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}a(qA,"baseTimes");var ib=qA;var MA="[object Arguments]";function IA(r){return ir(r)&&xn(r)==MA}a(IA,"baseIsArguments");var od=IA;var sb=Object.prototype,DA=sb.hasOwnProperty,RA=sb.propertyIsEnumerable,PA=od(function(){return arguments}())?od:function(r){return ir(r)&&DA.call(r,"callee")&&!RA.call(r,"callee")},Ea=PA;function jA(){return!1}a(jA,"stubFalse");var ob=jA;var cb=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ab=cb&&typeof module=="object"&&module&&!module.nodeType&&module,BA=ab&&ab.exports===cb,lb=BA?zt.Buffer:void 0,FA=lb?lb.isBuffer:void 0,HA=FA||ob,Gn=HA;var UA="[object Arguments]",VA="[object Array]",zA="[object Boolean]",$A="[object Date]",WA="[object Error]",KA="[object Function]",GA="[object Map]",YA="[object Number]",ZA="[object Object]",XA="[object RegExp]",JA="[object Set]",QA="[object String]",eS="[object WeakMap]",tS="[object ArrayBuffer]",rS="[object DataView]",nS="[object Float32Array]",iS="[object Float64Array]",sS="[object Int8Array]",oS="[object Int16Array]",aS="[object Int32Array]",lS="[object Uint8Array]",cS="[object Uint8ClampedArray]",uS="[object Uint16Array]",hS="[object Uint32Array]",Tt={};Tt[nS]=Tt[iS]=Tt[sS]=Tt[oS]=Tt[aS]=Tt[lS]=Tt[cS]=Tt[uS]=Tt[hS]=!0;Tt[UA]=Tt[VA]=Tt[tS]=Tt[zA]=Tt[rS]=Tt[$A]=Tt[WA]=Tt[KA]=Tt[GA]=Tt[YA]=Tt[ZA]=Tt[XA]=Tt[JA]=Tt[QA]=Tt[eS]=!1;function dS(r){return ir(r)&&ac(r.length)&&!!Tt[xn(r)]}a(dS,"baseIsTypedArray");var ub=dS;function fS(r){return function(e){return r(e)}}a(fS,"baseUnary");var to=fS;var hb=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ta=hb&&typeof module=="object"&&module&&!module.nodeType&&module,pS=Ta&&Ta.exports===hb,ad=pS&&ec.process,mS=function(){try{var r=Ta&&Ta.require&&Ta.require("util").types;return r||ad&&ad.binding&&ad.binding("util")}catch{}}(),Yn=mS;var db=Yn&&Yn.isTypedArray,gS=db?to(db):ub,ro=gS;var bS=Object.prototype,vS=bS.hasOwnProperty;function yS(r,e){var t=tn(r),n=!t&&Ea(r),s=!t&&!n&&Gn(r),c=!t&&!n&&!s&&ro(r),h=t||n||s||c,d=h?ib(r.length,String):[],p=d.length;for(var g in r)(e||vS.call(r,g))&&!(h&&(g=="length"||s&&(g=="offset"||g=="parent")||c&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||sc(g,p)))&&d.push(g);return d}a(yS,"arrayLikeKeys");var lc=yS;function wS(r,e){return function(t){return r(e(t))}}a(wS,"overArg");var cc=wS;var xS=cc(Object.keys,Object),fb=xS;var ES=Object.prototype,TS=ES.hasOwnProperty;function AS(r){if(!eo(r))return fb(r);var e=[];for(var t in Object(r))TS.call(r,t)&&t!="constructor"&&e.push(t);return e}a(AS,"baseKeys");var pb=AS;function SS(r){return Ni(r)?lc(r):pb(r)}a(SS,"keys");var no=SS;function NS(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}a(NS,"nativeKeysIn");var mb=NS;var CS=Object.prototype,LS=CS.hasOwnProperty;function OS(r){if(!fr(r))return mb(r);var e=eo(r),t=[];for(var n in r)n=="constructor"&&(e||!LS.call(r,n))||t.push(n);return t}a(OS,"baseKeysIn");var gb=OS;function kS(r){return Ni(r)?lc(r,!0):gb(r)}a(kS,"keysIn");var qn=kS;var _S=Dr(Object,"create"),Zn=_S;function qS(){this.__data__=Zn?Zn(null):{},this.size=0}a(qS,"hashClear");var bb=qS;function MS(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}a(MS,"hashDelete");var vb=MS;var IS="__lodash_hash_undefined__",DS=Object.prototype,RS=DS.hasOwnProperty;function PS(r){var e=this.__data__;if(Zn){var t=e[r];return t===IS?void 0:t}return RS.call(e,r)?e[r]:void 0}a(PS,"hashGet");var yb=PS;var jS=Object.prototype,BS=jS.hasOwnProperty;function FS(r){var e=this.__data__;return Zn?e[r]!==void 0:BS.call(e,r)}a(FS,"hashHas");var wb=FS;var HS="__lodash_hash_undefined__";function US(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Zn&&e===void 0?HS:e,this}a(US,"hashSet");var xb=US;function io(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(io,"Hash");io.prototype.clear=bb;io.prototype.delete=vb;io.prototype.get=yb;io.prototype.has=wb;io.prototype.set=xb;var ld=io;function VS(){this.__data__=[],this.size=0}a(VS,"listCacheClear");var Eb=VS;function zS(r,e){for(var t=r.length;t--;)if(kn(r[t][0],e))return t;return-1}a(zS,"assocIndexOf");var Ci=zS;var $S=Array.prototype,WS=$S.splice;function KS(r){var e=this.__data__,t=Ci(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():WS.call(e,t,1),--this.size,!0}a(KS,"listCacheDelete");var Tb=KS;function GS(r){var e=this.__data__,t=Ci(e,r);return t<0?void 0:e[t][1]}a(GS,"listCacheGet");var Ab=GS;function YS(r){return Ci(this.__data__,r)>-1}a(YS,"listCacheHas");var Sb=YS;function ZS(r,e){var t=this.__data__,n=Ci(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}a(ZS,"listCacheSet");var Nb=ZS;function so(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(so,"ListCache");so.prototype.clear=Eb;so.prototype.delete=Tb;so.prototype.get=Ab;so.prototype.has=Sb;so.prototype.set=Nb;var Li=so;var XS=Dr(zt,"Map"),Oi=XS;function JS(){this.size=0,this.__data__={hash:new ld,map:new(Oi||Li),string:new ld}}a(JS,"mapCacheClear");var Cb=JS;function QS(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}a(QS,"isKeyable");var Lb=QS;function eN(r,e){var t=r.__data__;return Lb(e)?t[typeof e=="string"?"string":"hash"]:t.map}a(eN,"getMapData");var ki=eN;function tN(r){var e=ki(this,r).delete(r);return this.size-=e?1:0,e}a(tN,"mapCacheDelete");var Ob=tN;function rN(r){return ki(this,r).get(r)}a(rN,"mapCacheGet");var kb=rN;function nN(r){return ki(this,r).has(r)}a(nN,"mapCacheHas");var _b=nN;function iN(r,e){var t=ki(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}a(iN,"mapCacheSet");var qb=iN;function oo(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}a(oo,"MapCache");oo.prototype.clear=Cb;oo.prototype.delete=Ob;oo.prototype.get=kb;oo.prototype.has=_b;oo.prototype.set=qb;var uc=oo;function sN(r,e){for(var t=-1,n=e.length,s=r.length;++t<n;)r[s+t]=e[t];return r}a(sN,"arrayPush");var hc=sN;var oN=cc(Object.getPrototypeOf,Object),ao=oN;var aN="[object Object]",lN=Function.prototype,cN=Object.prototype,Mb=lN.toString,uN=cN.hasOwnProperty,hN=Mb.call(Object);function dN(r){if(!ir(r)||xn(r)!=aN)return!1;var e=ao(r);if(e===null)return!0;var t=uN.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Mb.call(t)==hN}a(dN,"isPlainObject");var Ib=dN;function fN(){this.__data__=new Li,this.size=0}a(fN,"stackClear");var Db=fN;function pN(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}a(pN,"stackDelete");var Rb=pN;function mN(r){return this.__data__.get(r)}a(mN,"stackGet");var Pb=mN;function gN(r){return this.__data__.has(r)}a(gN,"stackHas");var jb=gN;var bN=200;function vN(r,e){var t=this.__data__;if(t instanceof Li){var n=t.__data__;if(!Oi||n.length<bN-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new uc(n)}return t.set(r,e),this.size=t.size,this}a(vN,"stackSet");var Bb=vN;function lo(r){var e=this.__data__=new Li(r);this.size=e.size}a(lo,"Stack");lo.prototype.clear=Db;lo.prototype.delete=Rb;lo.prototype.get=Pb;lo.prototype.has=jb;lo.prototype.set=Bb;var _i=lo;function yN(r,e){return r&&_n(e,no(e),r)}a(yN,"baseAssign");var Fb=yN;function wN(r,e){return r&&_n(e,qn(e),r)}a(wN,"baseAssignIn");var Hb=wN;var $b=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ub=$b&&typeof module=="object"&&module&&!module.nodeType&&module,xN=Ub&&Ub.exports===$b,Vb=xN?zt.Buffer:void 0,zb=Vb?Vb.allocUnsafe:void 0;function EN(r,e){if(e)return r.slice();var t=r.length,n=zb?zb(t):new r.constructor(t);return r.copy(n),n}a(EN,"cloneBuffer");var dc=EN;function TN(r,e){for(var t=-1,n=r==null?0:r.length,s=0,c=[];++t<n;){var h=r[t];e(h,t,r)&&(c[s++]=h)}return c}a(TN,"arrayFilter");var Wb=TN;function AN(){return[]}a(AN,"stubArray");var fc=AN;var SN=Object.prototype,NN=SN.propertyIsEnumerable,Kb=Object.getOwnPropertySymbols,CN=Kb?function(r){return r==null?[]:(r=Object(r),Wb(Kb(r),function(e){return NN.call(r,e)}))}:fc,co=CN;function LN(r,e){return _n(r,co(r),e)}a(LN,"copySymbols");var Gb=LN;var ON=Object.getOwnPropertySymbols,kN=ON?function(r){for(var e=[];r;)hc(e,co(r)),r=ao(r);return e}:fc,pc=kN;function _N(r,e){return _n(r,pc(r),e)}a(_N,"copySymbolsIn");var Yb=_N;function qN(r,e,t){var n=e(r);return tn(r)?n:hc(n,t(r))}a(qN,"baseGetAllKeys");var mc=qN;function MN(r){return mc(r,no,co)}a(MN,"getAllKeys");var Aa=MN;function IN(r){return mc(r,qn,pc)}a(IN,"getAllKeysIn");var Zb=IN;var DN=Dr(zt,"DataView"),gc=DN;var RN=Dr(zt,"Promise"),bc=RN;var PN=Dr(zt,"Set"),vc=PN;var Xb="[object Map]",jN="[object Object]",Jb="[object Promise]",Qb="[object Set]",ev="[object WeakMap]",tv="[object DataView]",BN=Kn(gc),FN=Kn(Oi),HN=Kn(bc),UN=Kn(vc),VN=Kn(nc),ls=xn;(gc&&ls(new gc(new ArrayBuffer(1)))!=tv||Oi&&ls(new Oi)!=Xb||bc&&ls(bc.resolve())!=Jb||vc&&ls(new vc)!=Qb||nc&&ls(new nc)!=ev)&&(ls=a(function(r){var e=xn(r),t=e==jN?r.constructor:void 0,n=t?Kn(t):"";if(n)switch(n){case BN:return tv;case FN:return Xb;case HN:return Jb;case UN:return Qb;case VN:return ev}return e},"getTag"));var Xn=ls;var zN=Object.prototype,$N=zN.hasOwnProperty;function WN(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&$N.call(r,"index")&&(t.index=r.index,t.input=r.input),t}a(WN,"initCloneArray");var rv=WN;var KN=zt.Uint8Array,uo=KN;function GN(r){var e=new r.constructor(r.byteLength);return new uo(e).set(new uo(r)),e}a(GN,"cloneArrayBuffer");var ho=GN;function YN(r,e){var t=e?ho(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}a(YN,"cloneDataView");var nv=YN;var ZN=/\w*$/;function XN(r){var e=new r.constructor(r.source,ZN.exec(r));return e.lastIndex=r.lastIndex,e}a(XN,"cloneRegExp");var iv=XN;var sv=en?en.prototype:void 0,ov=sv?sv.valueOf:void 0;function JN(r){return ov?Object(ov.call(r)):{}}a(JN,"cloneSymbol");var av=JN;function QN(r,e){var t=e?ho(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}a(QN,"cloneTypedArray");var yc=QN;var eC="[object Boolean]",tC="[object Date]",rC="[object Map]",nC="[object Number]",iC="[object RegExp]",sC="[object Set]",oC="[object String]",aC="[object Symbol]",lC="[object ArrayBuffer]",cC="[object DataView]",uC="[object Float32Array]",hC="[object Float64Array]",dC="[object Int8Array]",fC="[object Int16Array]",pC="[object Int32Array]",mC="[object Uint8Array]",gC="[object Uint8ClampedArray]",bC="[object Uint16Array]",vC="[object Uint32Array]";function yC(r,e,t){var n=r.constructor;switch(e){case lC:return ho(r);case eC:case tC:return new n(+r);case cC:return nv(r,t);case uC:case hC:case dC:case fC:case pC:case mC:case gC:case bC:case vC:return yc(r,t);case rC:return new n;case nC:case oC:return new n(r);case iC:return iv(r);case sC:return new n;case aC:return av(r)}}a(yC,"initCloneByTag");var lv=yC;function wC(r){return typeof r.constructor=="function"&&!eo(r)?Wg(ao(r)):{}}a(wC,"initCloneObject");var wc=wC;var xC="[object Map]";function EC(r){return ir(r)&&Xn(r)==xC}a(EC,"baseIsMap");var cv=EC;var uv=Yn&&Yn.isMap,TC=uv?to(uv):cv,hv=TC;var AC="[object Set]";function SC(r){return ir(r)&&Xn(r)==AC}a(SC,"baseIsSet");var dv=SC;var fv=Yn&&Yn.isSet,NC=fv?to(fv):dv,pv=NC;var CC=1,LC=2,OC=4,mv="[object Arguments]",kC="[object Array]",_C="[object Boolean]",qC="[object Date]",MC="[object Error]",gv="[object Function]",IC="[object GeneratorFunction]",DC="[object Map]",RC="[object Number]",bv="[object Object]",PC="[object RegExp]",jC="[object Set]",BC="[object String]",FC="[object Symbol]",HC="[object WeakMap]",UC="[object ArrayBuffer]",VC="[object DataView]",zC="[object Float32Array]",$C="[object Float64Array]",WC="[object Int8Array]",KC="[object Int16Array]",GC="[object Int32Array]",YC="[object Uint8Array]",ZC="[object Uint8ClampedArray]",XC="[object Uint16Array]",JC="[object Uint32Array]",bt={};bt[mv]=bt[kC]=bt[UC]=bt[VC]=bt[_C]=bt[qC]=bt[zC]=bt[$C]=bt[WC]=bt[KC]=bt[GC]=bt[DC]=bt[RC]=bt[bv]=bt[PC]=bt[jC]=bt[BC]=bt[FC]=bt[YC]=bt[ZC]=bt[XC]=bt[JC]=!0;bt[MC]=bt[gv]=bt[HC]=!1;function xc(r,e,t,n,s,c){var h,d=e&CC,p=e&LC,g=e&OC;if(t&&(h=s?t(r,n,s,c):t(r)),h!==void 0)return h;if(!fr(r))return r;var b=tn(r);if(b){if(h=rv(r),!d)return ic(r,h)}else{var v=Xn(r),E=v==gv||v==IC;if(Gn(r))return dc(r,d);if(v==bv||v==mv||E&&!s){if(h=p||E?{}:wc(r),!d)return p?Yb(r,Hb(h,r)):Gb(r,Fb(h,r))}else{if(!bt[v])return s?r:{};h=lv(r,v,d)}}c||(c=new _i);var A=c.get(r);if(A)return A;c.set(r,h),pv(r)?r.forEach(function(T){h.add(xc(T,e,t,T,r,c))}):hv(r)&&r.forEach(function(T,O){h.set(O,xc(T,e,t,O,r,c))});var N=g?p?Zb:Aa:p?qn:no,P=b?void 0:N(r);return Jg(P||r,function(T,O){P&&(O=T,T=r[O]),oc(h,O,xc(T,e,t,O,r,c))}),h}a(xc,"baseClone");var vv=xc;var QC=1,eL=4;function tL(r){return vv(r,QC|eL)}a(tL,"cloneDeep");var Mn=tL;var rL="__lodash_hash_undefined__";function nL(r){return this.__data__.set(r,rL),this}a(nL,"setCacheAdd");var yv=nL;function iL(r){return this.__data__.has(r)}a(iL,"setCacheHas");var wv=iL;function Ec(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new uc;++e<t;)this.add(r[e])}a(Ec,"SetCache");Ec.prototype.add=Ec.prototype.push=yv;Ec.prototype.has=wv;var xv=Ec;function sL(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}a(sL,"arraySome");var Ev=sL;function oL(r,e){return r.has(e)}a(oL,"cacheHas");var Tv=oL;var aL=1,lL=2;function cL(r,e,t,n,s,c){var h=t&aL,d=r.length,p=e.length;if(d!=p&&!(h&&p>d))return!1;var g=c.get(r),b=c.get(e);if(g&&b)return g==e&&b==r;var v=-1,E=!0,A=t&lL?new xv:void 0;for(c.set(r,e),c.set(e,r);++v<d;){var N=r[v],P=e[v];if(n)var T=h?n(P,N,v,e,r,c):n(N,P,v,r,e,c);if(T!==void 0){if(T)continue;E=!1;break}if(A){if(!Ev(e,function(O,j){if(!Tv(A,j)&&(N===O||s(N,O,t,n,c)))return A.push(j)})){E=!1;break}}else if(!(N===P||s(N,P,t,n,c))){E=!1;break}}return c.delete(r),c.delete(e),E}a(cL,"equalArrays");var Tc=cL;function uL(r){var e=-1,t=Array(r.size);return r.forEach(function(n,s){t[++e]=[s,n]}),t}a(uL,"mapToArray");var Av=uL;function hL(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}a(hL,"setToArray");var Sv=hL;var dL=1,fL=2,pL="[object Boolean]",mL="[object Date]",gL="[object Error]",bL="[object Map]",vL="[object Number]",yL="[object RegExp]",wL="[object Set]",xL="[object String]",EL="[object Symbol]",TL="[object ArrayBuffer]",AL="[object DataView]",Nv=en?en.prototype:void 0,cd=Nv?Nv.valueOf:void 0;function SL(r,e,t,n,s,c,h){switch(t){case AL:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case TL:return!(r.byteLength!=e.byteLength||!c(new uo(r),new uo(e)));case pL:case mL:case vL:return kn(+r,+e);case gL:return r.name==e.name&&r.message==e.message;case yL:case xL:return r==e+"";case bL:var d=Av;case wL:var p=n&dL;if(d||(d=Sv),r.size!=e.size&&!p)return!1;var g=h.get(r);if(g)return g==e;n|=fL,h.set(r,e);var b=Tc(d(r),d(e),n,s,c,h);return h.delete(r),b;case EL:if(cd)return cd.call(r)==cd.call(e)}return!1}a(SL,"equalByTag");var Cv=SL;var NL=1,CL=Object.prototype,LL=CL.hasOwnProperty;function OL(r,e,t,n,s,c){var h=t&NL,d=Aa(r),p=d.length,g=Aa(e),b=g.length;if(p!=b&&!h)return!1;for(var v=p;v--;){var E=d[v];if(!(h?E in e:LL.call(e,E)))return!1}var A=c.get(r),N=c.get(e);if(A&&N)return A==e&&N==r;var P=!0;c.set(r,e),c.set(e,r);for(var T=h;++v<p;){E=d[v];var O=r[E],j=e[E];if(n)var F=h?n(j,O,E,e,r,c):n(O,j,E,r,e,c);if(!(F===void 0?O===j||s(O,j,t,n,c):F)){P=!1;break}T||(T=E=="constructor")}if(P&&!T){var U=r.constructor,Z=e.constructor;U!=Z&&"constructor"in r&&"constructor"in e&&!(typeof U=="function"&&U instanceof U&&typeof Z=="function"&&Z instanceof Z)&&(P=!1)}return c.delete(r),c.delete(e),P}a(OL,"equalObjects");var Lv=OL;var kL=1,Ov="[object Arguments]",kv="[object Array]",Ac="[object Object]",_L=Object.prototype,_v=_L.hasOwnProperty;function qL(r,e,t,n,s,c){var h=tn(r),d=tn(e),p=h?kv:Xn(r),g=d?kv:Xn(e);p=p==Ov?Ac:p,g=g==Ov?Ac:g;var b=p==Ac,v=g==Ac,E=p==g;if(E&&Gn(r)){if(!Gn(e))return!1;h=!0,b=!1}if(E&&!b)return c||(c=new _i),h||ro(r)?Tc(r,e,t,n,s,c):Cv(r,e,p,t,n,s,c);if(!(t&kL)){var A=b&&_v.call(r,"__wrapped__"),N=v&&_v.call(e,"__wrapped__");if(A||N){var P=A?r.value():r,T=N?e.value():e;return c||(c=new _i),s(P,T,t,n,c)}}return E?(c||(c=new _i),Lv(r,e,t,n,s,c)):!1}a(qL,"baseIsEqualDeep");var qv=qL;function Mv(r,e,t,n,s){return r===e?!0:r==null||e==null||!ir(r)&&!ir(e)?r!==r&&e!==e:qv(r,e,t,n,Mv,s)}a(Mv,"baseIsEqual");var Iv=Mv;function ML(r){return function(e,t,n){for(var s=-1,c=Object(e),h=n(e),d=h.length;d--;){var p=h[r?d:++s];if(t(c[p],p,c)===!1)break}return e}}a(ML,"createBaseFor");var Dv=ML;var IL=Dv(),Rv=IL;function DL(r,e,t){(t!==void 0&&!kn(r[e],t)||t===void 0&&!(e in r))&&Qs(r,e,t)}a(DL,"assignMergeValue");var Sa=DL;function RL(r){return ir(r)&&Ni(r)}a(RL,"isArrayLikeObject");var Pv=RL;function PL(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}a(PL,"safeGet");var Na=PL;function jL(r){return _n(r,qn(r))}a(jL,"toPlainObject");var jv=jL;function BL(r,e,t,n,s,c,h){var d=Na(r,t),p=Na(e,t),g=h.get(p);if(g){Sa(r,t,g);return}var b=c?c(d,p,t+"",r,e,h):void 0,v=b===void 0;if(v){var E=tn(p),A=!E&&Gn(p),N=!E&&!A&&ro(p);b=p,E||A||N?tn(d)?b=d:Pv(d)?b=ic(d):A?(v=!1,b=dc(p,!0)):N?(v=!1,b=yc(p,!0)):b=[]:Ib(p)||Ea(p)?(b=d,Ea(d)?b=jv(d):(!fr(d)||Xs(d))&&(b=wc(p))):v=!1}v&&(h.set(p,b),s(b,p,n,c,h),h.delete(p)),Sa(r,t,b)}a(BL,"baseMergeDeep");var Bv=BL;function Fv(r,e,t,n,s){r!==e&&Rv(e,function(c,h){if(s||(s=new _i),fr(c))Bv(r,e,h,t,Fv,n,s);else{var d=n?n(Na(r,h),c,h+"",r,e,s):void 0;d===void 0&&(d=c),Sa(r,h,d)}},qn)}a(Fv,"baseMerge");var Hv=Fv;function FL(r,e){return Iv(r,e)}a(FL,"isEqual");var cs=FL;var HL=nb(function(r,e,t){Hv(r,e,t)}),Rr=HL;var Oa={};ch(Oa,{Attributor:()=>Tr,AttributorStore:()=>Ca,BlockBlot:()=>us,ClassAttributor:()=>$t,ContainerBlot:()=>bo,EmbedBlot:()=>It,InlineBlot:()=>Sc,LeafBlot:()=>Wt,ParentBlot:()=>Pr,Registry:()=>Ii,Scope:()=>ce,ScrollBlot:()=>La,StyleAttributor:()=>jr,TextBlot:()=>vo});var ce=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(ce||{}),Tr=class{static{a(this,"Attributor")}constructor(e,t,n={}){this.attrName=e,this.keyName=t;let s=ce.TYPE&ce.ATTRIBUTE;this.scope=n.scope!=null?n.scope&ce.LEVEL|s:ce.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){let t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}},Mi=class extends Error{static{a(this,"ParchmentError")}constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}},zv=class hd{static{a(this,"_Registry")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let n=null;try{n=e.parentNode}catch{return null}return this.find(n,t)}return null}create(e,t,n){let s=this.query(t);if(s==null)throw new Mi(`Unable to create ${t} blot`);let c=s,h=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:c.create(n),d=new c(e,h,n);return hd.blots.set(d.domNode,d),d}find(e,t=!1){return hd.find(e,t)}query(e,t=ce.ANY){let n;return typeof e=="string"?n=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?n=this.types.text:typeof e=="number"?e&ce.LEVEL&ce.BLOCK?n=this.types.block:e&ce.LEVEL&ce.INLINE&&(n=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[e.tagName]),n==null?null:"scope"in n&&t&ce.LEVEL&n.scope&&t&ce.TYPE&n.scope?n:null}register(...e){return e.map(t=>{let n="blotName"in t,s="attrName"in t;if(!n&&!s)throw new Mi("Invalid definition");if(n&&t.blotName==="abstract")throw new Mi("Cannot register abstract class");let c=n?t.blotName:s?t.attrName:void 0;return this.types[c]=t,s?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):n&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(h=>h.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(h=>{(this.tags[h]==null||t.className==null)&&(this.tags[h]=t)}))),t})}};zv.blots=new WeakMap;var Ii=zv;function Uv(r,e){return(r.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}a(Uv,"match");var dd=class extends Tr{static{a(this,"ClassAttributor")}static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){Uv(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){let t=(Uv(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}},$t=dd;function ud(r){let e=r.split("-"),t=e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return e[0]+t}a(ud,"camelize");var fd=class extends Tr{static{a(this,"StyleAttributor")}static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[ud(this.keyName)]=t,!0):!1}remove(e){e.style[ud(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){let t=e.style[ud(this.keyName)];return this.canAdd(e,t)?t:""}},jr=fd,pd=class{static{a(this,"AttributorStore")}constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};let e=Ii.find(this.domNode);if(e==null)return;let t=Tr.keys(this.domNode),n=$t.keys(this.domNode),s=jr.keys(this.domNode);t.concat(n).concat(s).forEach(c=>{let h=e.scroll.query(c,ce.ATTRIBUTE);h instanceof Tr&&(this.attributes[h.attrName]=h)})}copy(e){Object.keys(this.attributes).forEach(t=>{let n=this.attributes[t].value(this.domNode);e.format(t,n)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}},Ca=pd,$v=class{static{a(this,"_ShadowBlot")}constructor(e,t){this.scroll=e,this.domNode=t,Ii.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Mi("Blot definition missing tagName");let t,n;return Array.isArray(this.tagName)?(typeof e=="string"?(n=e.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof e=="number"&&(n=e),typeof n=="number"?t=document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?t=document.createElement(n):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){let e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Ii.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,n,s){let c=this.isolate(e,t);if(this.scroll.query(n,ce.BLOT)!=null&&s)c.wrap(n,s);else if(this.scroll.query(n,ce.ATTRIBUTE)!=null){let h=this.scroll.create(this.statics.scope);c.wrap(h),h.format(n,s)}}insertAt(e,t,n){let s=n==null?this.scroll.create("text",t):this.scroll.create(t,n),c=this.split(e);this.parent.insertBefore(s,c||void 0)}isolate(e,t){let n=this.split(e);if(n==null)throw new Error("Attempt to isolate at end");return n.split(t),n}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){let n=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){let n=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new Mi(`Cannot wrap ${e}`);return n.appendChild(this),n}};$v.blotName="abstract";var Wv=$v,Kv=class extends Wv{static{a(this,"_LeafBlot")}static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Kv.scope=ce.INLINE_BLOT;var UL=Kv,Wt=UL,md=class{static{a(this,"LinkedList")}constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){let t=e.slice(1);this.append(...t)}}at(e){let t=this.iterator(),n=t();for(;n&&e>0;)e-=1,n=t();return n}contains(e){let t=this.iterator(),n=t();for(;n;){if(n===e)return!0;n=t()}return!1}indexOf(e){let t=this.iterator(),n=t(),s=0;for(;n;){if(n===e)return s;s+=1,n=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,n=this.head;for(;n!=null;){if(n===e)return t;t+=n.length(),n=n.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{let t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){let n=this.iterator(),s=n();for(;s;){let c=s.length();if(e<c||t&&e===c&&(s.next==null||s.next.length()!==0))return[s,e];e-=c,s=n()}return[null,0]}forEach(e){let t=this.iterator(),n=t();for(;n;)e(n),n=t()}forEachAt(e,t,n){if(t<=0)return;let[s,c]=this.find(e),h=e-c,d=this.iterator(s),p=d();for(;p&&h<e+t;){let g=p.length();e>h?n(p,e-h,Math.min(t,h+g-e)):n(p,0,Math.min(g,e+t-h)),h+=g,p=d()}}map(e){return this.reduce((t,n)=>(t.push(e(n)),t),[])}reduce(e,t){let n=this.iterator(),s=n();for(;s;)t=e(t,s),s=n();return t}};function Vv(r,e){let t=e.find(r);if(t)return t;try{return e.create(r)}catch{let n=e.create(ce.INLINE);return Array.from(r.childNodes).forEach(s=>{n.domNode.appendChild(s)}),r.parentNode&&r.parentNode.replaceChild(n.domNode,r),n.attach(),n}}a(Vv,"makeAttachedBlot");var Gv=class qi extends Wv{static{a(this,"_ParentBlot")}constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,qi.uiClass&&this.uiNode.classList.add(qi.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new md,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{let t=Vv(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof Mi)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(n,s,c)=>{n.deleteAt(s,c)})}descendant(e,t=0){let[n,s]=this.children.find(t);return e.blotName==null&&e(n)||e.blotName!=null&&n instanceof e?[n,s]:n instanceof qi?n.descendant(e,s):[null,-1]}descendants(e,t=0,n=Number.MAX_VALUE){let s=[],c=n;return this.children.forEachAt(t,n,(h,d,p)=>{(e.blotName==null&&e(h)||e.blotName!=null&&h instanceof e)&&s.push(h),h instanceof qi&&(s=s.concat(h.descendants(e,d,c))),c-=p}),s}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(n=>t instanceof n)||(t.statics.scope===ce.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof qi?t.unwrap():t.remove())})}formatAt(e,t,n,s){this.children.forEachAt(e,t,(c,h,d)=>{c.formatAt(h,d,n,s)})}insertAt(e,t,n){let[s,c]=this.children.find(e);if(s)s.insertAt(c,t,n);else{let h=n==null?this.scroll.create("text",t):this.scroll.create(t,n);this.appendChild(h)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let n=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(n=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(e.domNode,n),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(n=>{e.insertBefore(n,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){let[n,s]=this.children.find(e,t),c=[[this,e]];return n instanceof qi?c.concat(n.path(s,t)):(n!=null&&c.push([n,s]),c)}removeChild(e){this.children.remove(e)}replaceWith(e,t){let n=typeof e=="string"?this.scroll.create(e,t):e;return n instanceof qi&&this.moveChildren(n),super.replaceWith(n)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(e,this.length(),(s,c,h)=>{let d=s.split(c,t);d!=null&&n.appendChild(d)}),n}splitAfter(e){let t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){let n=[],s=[];e.forEach(c=>{c.target===this.domNode&&c.type==="childList"&&(n.push(...c.addedNodes),s.push(...c.removedNodes))}),s.forEach(c=>{if(c.parentNode!=null&&c.tagName!=="IFRAME"&&document.body.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let h=this.scroll.find(c);h!=null&&(h.domNode.parentNode==null||h.domNode.parentNode===this.domNode)&&h.detach()}),n.filter(c=>c.parentNode===this.domNode&&c!==this.uiNode).sort((c,h)=>c===h?0:c.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(c=>{let h=null;c.nextSibling!=null&&(h=this.scroll.find(c.nextSibling));let d=Vv(c,this.scroll);(d.next!==h||d.next==null)&&(d.parent!=null&&d.parent.removeChild(this),this.insertBefore(d,h||void 0))}),this.enforceAllowedChildren()}};Gv.uiClass="";var VL=Gv,Pr=VL;function zL(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}a(zL,"isEqual");var fo=class po extends Pr{static{a(this,"_InlineBlot")}static create(e){return super.create(e)}static formats(e,t){let n=t.query(po.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Ca(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(n=>{n instanceof po||(n=n.wrap(po.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{let n=this.scroll.query(e,ce.INLINE);if(n==null)return;n instanceof Tr?this.attributes.attribute(n,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,s){this.formats()[n]!=null||this.scroll.query(n,ce.ATTRIBUTE)?this.isolate(e,t).format(n,s):super.formatAt(e,t,n,s)}optimize(e){super.optimize(e);let t=this.formats();if(Object.keys(t).length===0)return this.unwrap();let n=this.next;n instanceof po&&n.prev===this&&zL(t,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(e,t){let n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(e,t){let n=super.wrap(e,t);return n instanceof po&&this.attributes.move(n),n}};fo.allowedChildren=[fo,Wt],fo.blotName="inline",fo.scope=ce.INLINE_BLOT,fo.tagName="SPAN";var $L=fo,Sc=$L,mo=class gd extends Pr{static{a(this,"_BlockBlot")}static create(e){return super.create(e)}static formats(e,t){let n=t.query(gd.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Ca(this.domNode)}format(e,t){let n=this.scroll.query(e,ce.BLOCK);n!=null&&(n instanceof Tr?this.attributes.attribute(n,t):e===this.statics.blotName&&!t?this.replaceWith(gd.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,s){this.scroll.query(n,ce.BLOCK)!=null?this.format(n,s):super.formatAt(e,t,n,s)}insertAt(e,t,n){if(n==null||this.scroll.query(t,ce.INLINE)!=null)super.insertAt(e,t,n);else{let s=this.split(e);if(s!=null){let c=this.scroll.create(t,n);s.parent.insertBefore(c,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){let n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};mo.blotName="block",mo.scope=ce.BLOCK_BLOT,mo.tagName="P",mo.allowedChildren=[Sc,mo,Wt];var WL=mo,us=WL,bd=class extends Pr{static{a(this,"_ContainerBlot")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,n,s){super.formatAt(e,t,n,s),this.enforceAllowedChildren()}insertAt(e,t,n){super.insertAt(e,t,n),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};bd.blotName="container",bd.scope=ce.BLOCK_BLOT;var KL=bd,bo=KL,vd=class extends Wt{static{a(this,"EmbedBlot")}static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,n,s){e===0&&t===this.length()?this.format(n,s):super.formatAt(e,t,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}},It=vd,GL={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},YL=100,go=class extends Pr{static{a(this,"_ScrollBlot")}constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,GL),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){let n=this.registry.find(e,t);return n?n.scroll===this?n:t?this.find(n.scroll.domNode.parentNode,!0):null:null}query(e,t=ce.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(e,t)}formatAt(e,t,n,s){this.update(),super.formatAt(e,t,n,s)}insertAt(e,t,n){this.update(),super.insertAt(e,t,n)}optimize(e=[],t={}){super.optimize(t);let n=t.mutationsMap||new WeakMap,s=Array.from(this.observer.takeRecords());for(;s.length>0;)e.push(s.pop());let c=a((p,g=!0)=>{p==null||p===this||p.domNode.parentNode!=null&&(n.has(p.domNode)||n.set(p.domNode,[]),g&&c(p.parent))},"mark"),h=a(p=>{n.has(p.domNode)&&(p instanceof Pr&&p.children.forEach(h),n.delete(p.domNode),p.optimize(t))},"optimize"),d=e;for(let p=0;d.length>0;p+=1){if(p>=YL)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach(g=>{let b=this.find(g.target,!0);b!=null&&(b.domNode===g.target&&(g.type==="childList"?(c(this.find(g.previousSibling,!1)),Array.from(g.addedNodes).forEach(v=>{let E=this.find(v,!1);c(E,!1),E instanceof Pr&&E.children.forEach(A=>{c(A,!1)})})):g.type==="attributes"&&c(b.prev)),c(b))}),this.children.forEach(h),d=Array.from(this.observer.takeRecords()),s=d.slice();s.length>0;)e.push(s.pop())}}update(e,t={}){e=e||this.observer.takeRecords();let n=new WeakMap;e.map(s=>{let c=this.find(s.target,!0);return c==null?null:n.has(c.domNode)?(n.get(c.domNode).push(s),null):(n.set(c.domNode,[s]),c)}).forEach(s=>{s!=null&&s!==this&&n.has(s.domNode)&&s.update(n.get(s.domNode)||[],t)}),t.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),t),this.optimize(e,t)}};go.blotName="scroll",go.defaultChild=us,go.allowedChildren=[us,bo],go.scope=ce.BLOCK_BLOT,go.tagName="DIV";var ZL=go,La=ZL,yd=class Yv extends Wt{static{a(this,"_TextBlot")}static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,n){n==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Yv&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let n=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(e,t){e.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};yd.blotName="text",yd.scope=ce.INLINE_BLOT;var XL=yd,vo=XL;var Bi=lr(Wr(),1);var Dt=lr(Wr(),1);var of=lr(Wr(),1);var Ba=class extends It{static{a(this,"Break")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};Ba.blotName="break";Ba.tagName="BR";var pr=Ba;var Ft=class extends vo{static{a(this,"Text")}};function ys(r){return r.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}a(ys,"escapeText");var sf=class r extends Sc{static{a(this,"Inline")}static allowedChildren=[r,pr,It,Ft];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){let n=r.order.indexOf(e),s=r.order.indexOf(t);return n>=0||s>=0?n-s:e===t?0:e<t?-1:1}formatAt(e,t,n,s){if(r.compare(this.statics.blotName,n)<0&&this.scroll.query(n,ce.BLOT)){let c=this.isolate(e,t);s&&c.wrap(n,s)}else super.formatAt(e,t,n,s)}optimize(e){if(super.optimize(e),this.parent instanceof r&&r.compare(this.statics.blotName,this.parent.statics.blotName)>0){let t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}},mr=sf;var q1=1,dt=class extends us{static{a(this,"Block")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=af(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,n,s){t<=0||(this.scroll.query(n,ce.BLOCK)?e+t===this.length()&&this.format(n,s):super.formatAt(e,Math.min(t,this.length()-e-1),n,s),this.cache={})}insertAt(e,t,n){if(n!=null){super.insertAt(e,t,n),this.cache={};return}if(t.length===0)return;let s=t.split(`
`),c=s.shift();c.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),c):this.children.tail.insertAt(this.children.tail.length(),c),this.cache={});let h=this;s.reduce((d,p)=>(h=h.split(d,!0),h.insertAt(0,p),p.length),e+c.length)}insertBefore(e,t){let{head:n}=this.children;super.insertBefore(e,t),n instanceof pr&&n.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+q1),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-q1)){let s=this.clone();return e===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}let n=super.split(e,t);return this.cache={},n}};dt.blotName="block";dt.tagName="P";dt.defaultChild=pr;dt.allowedChildren=[pr,mr,It,Ft];var Xt=class extends It{static{a(this,"BlockEmbed")}attach(){super.attach(),this.attributes=new Ca(this.domNode)}delta(){return new of.default().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){let n=this.scroll.query(e,ce.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,t)}formatAt(e,t,n,s){this.format(n,s)}insertAt(e,t,n){if(n!=null){super.insertAt(e,t,n);return}let s=t.split(`
`),c=s.pop(),h=s.map(p=>{let g=this.scroll.create(dt.blotName);return g.insertAt(0,p),g}),d=this.split(e);h.forEach(p=>{this.parent.insertBefore(p,d)}),c&&this.parent.insertBefore(this.scroll.create("text",c),d)}};Xt.scope=ce.BLOCK_BLOT;function af(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(Wt).reduce((t,n)=>n.length()===0?t:t.insert(n.value(),Br(n,{},e)),new of.default).insert(`
`,Br(r))}a(af,"blockDelta");function Br(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(e={...e,...r.formats()},t&&delete e["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?e:Br(r.parent,e,t)}a(Br,"bubbleFormats");var lf=class r extends It{static{a(this,"Cursor")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,n){super(e,t),this.selection=n,this.textNode=document.createTextNode(r.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==ce.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=r.CONTENTS.length,n.optimize(),n.formatAt(s,r.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let t=this.prev instanceof Ft?this.prev:null,n=t?t.length():0,s=this.next instanceof Ft?this.next:null,c=s?s.text:"",{textNode:h}=this,d=h.data.split(r.CONTENTS).join("");h.data=r.CONTENTS;let p;if(t)p=t,(d||s)&&(t.insertAt(t.length(),d+c),s&&s.remove());else if(s)p=s,s.insertAt(0,d);else{let g=document.createTextNode(d);p=this.scroll.create(g),this.parent.insertBefore(p,this)}if(this.remove(),e){let g=a((E,A)=>t&&E===t.domNode?A:E===h?n+A-1:s&&E===s.domNode?n+d.length+A:null,"remapOffset"),b=g(e.start.node,e.start.offset),v=g(e.end.node,e.end.offset);if(b!==null&&v!==null)return{startNode:p.domNode,startOffset:b,endNode:p.domNode,endOffset:v}}return null}update(e,t){if(e.some(n=>n.type==="characterData"&&n.target===this.textNode)){let n=this.restore();n&&(t.range=n)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=r.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}},ji=lf;var uf=lr(I1(),1);var Ha=new WeakMap;var hf=["error","warn","log","info"],df="warn";function D1(r){if(df&&hf.indexOf(r)<=hf.indexOf(df)){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];console[r](...t)}}a(D1,"debug");function ff(r){return hf.reduce((e,t)=>(e[t]=D1.bind(console,t,r),e),{})}a(ff,"namespace");ff.level=r=>{df=r};D1.level=ff.level;var Kr=ff;var pf=Kr("quill:events"),gq=["selectionchange","mousedown","mouseup","click"];gq.forEach(r=>{document.addEventListener(r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{let c=Ha.get(s);c&&c.emitter&&c.emitter.handleDOM(...t)})})});var mf=class extends uf.default{static{a(this,"Emitter")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",pf.error)}emit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pf.log.call(pf,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];(this.domListeners[e.type]||[]).forEach(c=>{let{node:h,handler:d}=c;(e.target===h||h.contains(e.target))&&d(e,...n)})}listenDOM(e,t,n){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:n})}},ye=mf;var gf=Kr("quill:selection"),Nr=class{static{a(this,"Range")}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}},vf=class{static{a(this,"Selection")}constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Nr(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,ye.sources.USER),1)}),this.emitter.on(ye.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(ye.events.SCROLL_UPDATE,(s,c)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);let h=c.some(d=>d.type==="characterData"||d.type==="childList"||d.type==="attributes"&&d.target===this.root);this.update(h?ye.sources.SILENT:s)}catch{}})}),this.emitter.on(ye.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){let{startNode:c,startOffset:h,endNode:d,endOffset:p}=s.range;this.setNativeRange(c,h,d,p),this.update(ye.sources.SILENT)}}),this.update(ye.sources.SILENT)}handleComposition(){this.emitter.on(ye.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(ye.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(ye.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();let n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(e,ce.BLOCK))){if(n.start.node!==this.cursor.textNode){let s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof Wt){let c=s.split(n.start.offset);s.parent.insertBefore(this.cursor,c)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;let s,[c,h]=this.scroll.leaf(e);if(c==null)return null;if(t>0&&h===c.length()){let[b]=this.scroll.leaf(e+1);if(b){let[v]=this.scroll.line(e),[E]=this.scroll.line(e+1);v===E&&(c=b,h=0)}}[s,h]=c.position(h,!0);let d=document.createRange();if(t>0)return d.setStart(s,h),[c,h]=this.scroll.leaf(e+t),c==null?null:([s,h]=c.position(h,!0),d.setEnd(s,h),d.getBoundingClientRect());let p="left",g;if(s instanceof Text){if(!s.data.length)return null;h<s.data.length?(d.setStart(s,h),d.setEnd(s,h+1)):(d.setStart(s,h-1),d.setEnd(s,h),p="right"),g=d.getBoundingClientRect()}else{if(!(c.domNode instanceof Element))return null;g=c.domNode.getBoundingClientRect(),h>0&&(p="right")}return{bottom:g.top+g.height,height:g.height,left:g[p],right:g[p],top:g.top,width:0}}getNativeRange(){let e=document.getSelection();if(e==null||e.rangeCount<=0)return null;let t=e.getRangeAt(0);if(t==null)return null;let n=this.normalizeNative(t);return gf.info("getNativeRange",n),n}getRange(){let e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];let t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&bf(this.root,document.activeElement)}normalizedToRange(e){let t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);let n=t.map(h=>{let[d,p]=h,g=this.scroll.find(d,!0),b=g.offset(this.scroll);return p===0?b:g instanceof Wt?b+g.index(d,p):b+g.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),c=Math.min(s,...n);return new Nr(c,s-c)}normalizeNative(e){if(!bf(this.root,e.startContainer)||!e.collapsed&&!bf(this.root,e.endContainer))return null;let t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(n=>{let{node:s,offset:c}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>c)s=s.childNodes[c],c=0;else if(s.childNodes.length===c)s=s.lastChild,s instanceof Text?c=s.data.length:s.childNodes.length>0?c=s.childNodes.length:c=s.childNodes.length+1;else break;n.node=s,n.offset=c}),t}rangeToNative(e){let t=this.scroll.length(),n=a((s,c)=>{s=Math.min(t-1,s);let[h,d]=this.scroll.leaf(s);return h?h.position(d,c):[null,-1]},"getPosition");return[...n(e.index,!1),...n(e.index+e.length,!0)]}setNativeRange(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(gf.info("setNativeRange",e,t,n,s),e!=null&&(this.root.parentNode==null||e.parentNode==null||n.parentNode==null))return;let h=document.getSelection();if(h!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:d}=this.getNativeRange()||{};if(d==null||c||e!==d.startContainer||t!==d.startOffset||n!==d.endContainer||s!==d.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);let p=document.createRange();p.setStart(e,t),p.setEnd(n,s),h.removeAllRanges(),h.addRange(p)}}else h.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ye.sources.API;if(typeof t=="string"&&(n=t,t=!1),gf.info("setRange",e),e!=null){let s=this.rangeToNative(e);this.setNativeRange(...s,t)}else this.setNativeRange(null);this.update(n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ye.sources.USER,t=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!cs(t,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){let h=this.cursor.restore();h&&this.setNativeRange(h.startNode,h.startOffset,h.endNode,h.endOffset)}let c=[ye.events.SELECTION_CHANGE,Mn(this.lastRange),Mn(t),e];this.emitter.emit(ye.events.EDITOR_CHANGE,...c),e!==ye.sources.SILENT&&this.emitter.emit(...c)}}};function bf(r,e){try{e.parentNode}catch{return!1}return r.contains(e)}a(bf,"contains");var R1=vf;var bq=/^[ -~]*$/,wf=class{static{a(this,"Editor")}constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();let n=P1(e),s=new Dt.default;return yq(n.ops.slice()).reduce((h,d)=>{let p=Dt.Op.length(d),g=d.attributes||{},b=!1,v=!1;if(d.insert!=null){if(s.retain(p),typeof d.insert=="string"){let N=d.insert;v=!N.endsWith(`
`)&&(t<=h||!!this.scroll.descendant(Xt,h)[0]),this.scroll.insertAt(h,N);let[P,T]=this.scroll.line(h),O=Rr({},Br(P));if(P instanceof dt){let[j]=P.descendant(Wt,T);j&&(O=Rr(O,Br(j)))}g=Dt.AttributeMap.diff(O,g)||{}}else if(typeof d.insert=="object"){let N=Object.keys(d.insert)[0];if(N==null)return h;let P=this.scroll.query(N,ce.INLINE)!=null;if(P)(t<=h||this.scroll.descendant(Xt,h)[0])&&(v=!0);else if(h>0){let[T,O]=this.scroll.descendant(Wt,h-1);T instanceof Ft?T.value()[O]!==`
`&&(b=!0):T instanceof It&&T.statics.scope===ce.INLINE_BLOT&&(b=!0)}if(this.scroll.insertAt(h,N,d.insert[N]),P){let[T]=this.scroll.descendant(Wt,h);if(T){let O=Rr({},Br(T));g=Dt.AttributeMap.diff(O,g)||{}}}}t+=p}else if(s.push(d),d.retain!==null&&typeof d.retain=="object"){let N=Object.keys(d.retain)[0];if(N==null)return h;this.scroll.updateEmbedAt(h,N,d.retain[N])}Object.keys(g).forEach(N=>{this.scroll.formatAt(h,p,N,g[N])});let E=b?1:0,A=v?1:0;return t+=E+A,s.retain(E),s.delete(A),h+p+E+A},0),s.reduce((h,d)=>typeof d.delete=="number"?(this.scroll.deleteAt(h,d.delete),h):h+Dt.Op.length(d),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Dt.default().retain(e).delete(t))}formatLine(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(c=>{this.scroll.lines(e,Math.max(t,1)).forEach(h=>{h.format(c,n[c])})}),this.scroll.optimize();let s=new Dt.default().retain(e).retain(t,Mn(n));return this.update(s)}formatText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(c=>{this.scroll.formatAt(e,t,c,n[c])});let s=new Dt.default().retain(e).retain(t,Mn(n));return this.update(s)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Dt.default)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];t===0?this.scroll.path(e).forEach(d=>{let[p]=d;p instanceof dt?n.push(p):p instanceof Wt&&s.push(p)}):(n=this.scroll.lines(e,t),s=this.scroll.descendants(Wt,e,t));let[c,h]=[n,s].map(d=>{let p=d.shift();if(p==null)return{};let g=Br(p);for(;Object.keys(g).length>0;){let b=d.shift();if(b==null)return g;g=vq(Br(b),g)}return g});return{...c,...h}}getHTML(e,t){let[n,s]=this.scroll.line(e);if(n){let c=n.length();return n.length()>=s+t&&!(s===0&&t===c)?Ua(n,s,t,!0):Ua(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(e,t){let n=P1(t),s=new Dt.default().retain(e).concat(n);return this.scroll.insertContents(e,n),this.update(s)}insertEmbed(e,t,n){return this.scroll.insertAt(e,t,n),this.update(new Dt.default().retain(e).insert({[t]:n}))}insertText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(n).forEach(s=>{this.scroll.formatAt(e,t.length,s,n[s])}),this.update(new Dt.default().retain(e).insert(t,Mn(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let e=this.scroll.children.head;if(e?.statics.blotName!==dt.blotName)return!1;let t=e;return t.children.length>1?!1:t.children.head instanceof pr}removeFormat(e,t){let n=this.getText(e,t),[s,c]=this.scroll.line(e+t),h=0,d=new Dt.default;s!=null&&(h=s.length()-c,d=s.delta().slice(c,c+h-1).insert(`
`));let g=this.getContents(e,t+h).diff(new Dt.default().insert(n).concat(d)),b=new Dt.default().retain(e).concat(g);return this.applyDelta(b)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(bq)&&this.scroll.find(t[0].target)){let c=this.scroll.find(t[0].target),h=Br(c),d=c.offset(this.scroll),p=t[0].oldValue.replace(ji.CONTENTS,""),g=new Dt.default().insert(p),b=new Dt.default().insert(c.value()),v=n&&{oldRange:j1(n.oldRange,-d),newRange:j1(n.newRange,-d)};e=new Dt.default().retain(d).concat(g.diff(b,v)).reduce((A,N)=>N.insert?A.insert(N.insert,h):A.push(N),new Dt.default),this.delta=s.compose(e)}else this.delta=this.getDelta(),(!e||!cs(s.compose(e),this.delta))&&(e=s.diff(this.delta,n));return e}};function No(r,e,t){if(r.length===0){let[A]=yf(t.pop());return e<=0?`</li></${A}>`:`</li></${A}>${No([],e-1,t)}`}let[{child:n,offset:s,length:c,indent:h,type:d},...p]=r,[g,b]=yf(d);if(h>e)return t.push(d),h===e+1?`<${g}><li${b}>${Ua(n,s,c)}${No(p,h,t)}`:`<${g}><li>${No(r,e+1,t)}`;let v=t[t.length-1];if(h===e&&d===v)return`</li><li${b}>${Ua(n,s,c)}${No(p,h,t)}`;let[E]=yf(t.pop());return`</li></${E}>${No(r,e-1,t)}`}a(No,"convertListHTML");function Ua(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(e,t);if(r instanceof Ft)return ys(r.value().slice(e,e+t));if(r instanceof Pr){if(r.statics.blotName==="list-container"){let g=[];return r.children.forEachAt(e,t,(b,v,E)=>{let A="formats"in b&&typeof b.formats=="function"?b.formats():{};g.push({child:b,offset:v,length:E,indent:A.indent||0,type:A.list})}),No(g,-1,[])}let s=[];if(r.children.forEachAt(e,t,(g,b,v)=>{s.push(Ua(g,b,v))}),n||r.statics.blotName==="list")return s.join("");let{outerHTML:c,innerHTML:h}=r.domNode,[d,p]=c.split(`>${h}<`);return d==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${p}`:`${d}>${s.join("")}<${p}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}a(Ua,"convertHTML");function vq(r,e){return Object.keys(e).reduce((t,n)=>{if(r[n]==null)return t;let s=e[n];return s===r[n]?t[n]=s:Array.isArray(s)?s.indexOf(r[n])<0?t[n]=s.concat([r[n]]):t[n]=s:t[n]=[s,r[n]],t},{})}a(vq,"combineFormats");function yf(r){let e=r==="ordered"?"ol":"ul";switch(r){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}a(yf,"getListType");function P1(r){return r.reduce((e,t)=>{if(typeof t.insert=="string"){let n=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(n,t.attributes)}return e.push(t)},new Dt.default)}a(P1,"normalizeDelta");function j1(r,e){let{index:t,length:n}=r;return new Nr(t+e,n)}a(j1,"shiftRange");function yq(r){let e=[];return r.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((s,c)=>{c&&e.push({insert:`
`,attributes:t.attributes}),s&&e.push({insert:s,attributes:t.attributes})}):e.push(t)}),e}a(yq,"splitOpLines");var B1=wf;var xf=class{static{a(this,"Module")}static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}},Kt=xf;var Zc="\uFEFF",Ef=class extends It{static{a(this,"Embed")}constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(Zc),this.rightGuard=document.createTextNode(Zc),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,n,s=e.data.split(Zc).join("");if(e===this.leftGuard)if(this.prev instanceof Ft){let c=this.prev.length();this.prev.insertAt(c,s),t={startNode:this.prev.domNode,startOffset:c+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),t={startNode:n,startOffset:s.length};else e===this.rightGuard&&(this.next instanceof Ft?(this.next.insertAt(0,s),t={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),t={startNode:n,startOffset:s.length}));return e.data=Zc,t}update(e,t){e.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){let s=this.restore(n.target);s&&(t.range=s)}})}},Co=Ef;var Tf=class{static{a(this,"Composition")}isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){let t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof Co)&&(this.emitter.emit(ye.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(ye.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(ye.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(ye.events.COMPOSITION_END,e),this.isComposing=!1}},F1=Tf;var Af=class r{static{a(this,"Theme")}static DEFAULTS={modules:{}};static themes={default:r};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){let t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}},Lo=Af;var wq=a(r=>r.parentElement||r.getRootNode().host||null,"getParentElement"),xq=a(r=>{let e=r.getBoundingClientRect(),t="offsetWidth"in r&&Math.abs(e.width)/r.offsetWidth||1,n="offsetHeight"in r&&Math.abs(e.height)/r.offsetHeight||1;return{top:e.top,right:e.left+r.clientWidth*t,bottom:e.top+r.clientHeight*n,left:e.left}},"getElementRect"),Xc=a(r=>{let e=parseInt(r,10);return Number.isNaN(e)?0:e},"paddingValueToInt"),H1=a((r,e,t,n,s,c)=>r<t&&e>n?0:r<t?-(t-r+s):e>n?e-r>n-t?r+s-t:e-n+c:0,"getScrollDistance"),Eq=a((r,e)=>{let t=r.ownerDocument,n=e,s=r;for(;s;){let c=s===t.body,h=c?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:xq(s),d=getComputedStyle(s),p=H1(n.left,n.right,h.left,h.right,Xc(d.scrollPaddingLeft),Xc(d.scrollPaddingRight)),g=H1(n.top,n.bottom,h.top,h.bottom,Xc(d.scrollPaddingTop),Xc(d.scrollPaddingBottom));if(p||g)if(c)t.defaultView?.scrollBy(p,g);else{let{scrollLeft:b,scrollTop:v}=s;g&&(s.scrollTop+=g),p&&(s.scrollLeft+=p);let E=s.scrollLeft-b,A=s.scrollTop-v;n={left:n.left-E,top:n.top-A,right:n.right-E,bottom:n.bottom-A}}s=c||d.position==="fixed"?null:wq(s)}},"scrollRectIntoView"),U1=Eq;var Tq=100,Aq=["block","break","cursor","inline","scroll","text"],Sq=a((r,e,t)=>{let n=new Ii;return Aq.forEach(s=>{let c=e.query(s);c&&n.register(c)}),r.forEach(s=>{let c=e.query(s);c||t.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let h=0;for(;c;)if(n.register(c),c="blotName"in c?c.requiredContainer??null:null,h+=1,h>Tq){t.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},"createRegistryWithFormats"),V1=Sq;var Oo=Kr("quill"),Jc=new Ii;Pr.uiClass="ql-ui";var K=class r{static{a(this,"Quill")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Jc,theme:"default"};static events=ye.events;static sources=ye.sources;static version="2.0.0";static imports={delta:Bi.default,parchment:Oa,"core/module":Kt,"core/theme":Lo};static debug(e){e===!0&&(e="log"),Kr.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ha.get(e)||Jc.find(e,t)}static import(e){return this.imports[e]==null&&Oo.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof e!="string"){let s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,t):Object.keys(e).forEach(c=>{this.register(c,e[c],t)})}else this.imports[e]!=null&&!n&&Oo.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Jc.register(t),typeof t.register=="function"&&t.register(Jc)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Nq(e,t),this.container=this.options.container,this.container==null){Oo.error("Invalid Quill container",e);return}this.options.debug&&r.debug(this.options.debug);let n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Ha.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new ye;let s=La.blotName,c=this.options.registry.query(s);if(!c||!("blotName"in c))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new c(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new B1(this.scroll),this.selection=new R1(this.scroll,this.emitter),this.composition=new F1(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(ye.events.EDITOR_CHANGE,h=>{h===ye.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(ye.events.SCROLL_UPDATE,(h,d)=>{let p=this.selection.lastRange,[g]=this.selection.getRange(),b=p&&g?{oldRange:p,newRange:g}:void 0;En.call(this,()=>this.editor.update(null,d,b),h)}),this.emitter.on(ye.events.SCROLL_EMBED_UPDATE,(h,d)=>{let p=this.selection.lastRange,[g]=this.selection.getRange(),b=p&&g?{oldRange:p,newRange:g}:void 0;En.call(this,()=>{let v=new Bi.default().retain(h.offset(this)).retain({[h.statics.blotName]:d});return this.editor.update(v,[],b)},r.sources.USER)}),n){let h=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(h)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){let n=e;e=document.createElement("div"),e.classList.add(n)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,n){return[e,t,,n]=si(e,t,n),En.call(this,()=>this.editor.deleteText(e,t),n,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;let t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ye.sources.API;return En.call(this,()=>{let s=this.getSelection(!0),c=new Bi.default;if(s==null)return c;if(this.scroll.query(e,ce.BLOCK))c=this.editor.formatLine(s.index,s.length,{[e]:t});else{if(s.length===0)return this.selection.format(e,t),c;c=this.editor.formatText(s.index,s.length,{[e]:t})}return this.setSelection(s,ye.sources.SILENT),c},n)}formatLine(e,t,n,s,c){let h;return[e,t,h,c]=si(e,t,n,s,c),En.call(this,()=>this.editor.formatLine(e,t,h),c,e,0)}formatText(e,t,n,s,c){let h;return[e,t,h,c]=si(e,t,n,s,c),En.call(this,()=>this.editor.formatText(e,t,h),c,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof e=="number"?n=this.selection.getBounds(e,t):n=this.selection.getBounds(e.index,e.length),!n)return null;let s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=si(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=si(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=si(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r.sources.API;return En.call(this,()=>this.editor.insertEmbed(e,t,n),s,e)}insertText(e,t,n,s,c){let h;return[e,,h,c]=si(e,0,n,s,c),En.call(this,()=>this.editor.insertText(e,t,h),c,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,n){return[e,t,,n]=si(e,t,n),En.call(this,()=>this.editor.removeFormat(e,t),n,e)}scrollRectIntoView(e){U1(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ye.sources.API;return En.call(this,()=>{e=new Bi.default(e);let n=this.getLength(),s=this.editor.deleteText(0,n),c=this.editor.insertContents(0,e),h=this.editor.deleteText(this.getLength()-1,1);return s.compose(c).compose(h)},t)}setSelection(e,t,n){e==null?this.selection.setRange(null,t||r.sources.API):([e,t,,n]=si(e,t,n),this.selection.setRange(new Nr(Math.max(0,e),t),n),n!==ye.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ye.sources.API,n=new Bi.default().insert(e);return this.setContents(n,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ye.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ye.sources.API;return En.call(this,()=>(e=new Bi.default(e),this.editor.applyDelta(e)),t,!0)}};function z1(r){return typeof r=="string"?document.querySelector(r):r}a(z1,"resolveSelector");function Sf(r){return Object.entries(r??{}).reduce((e,t)=>{let[n,s]=t;return{...e,[n]:s===!0?{}:s}},{})}a(Sf,"expandModuleConfig");function $1(r){return Object.fromEntries(Object.entries(r).filter(e=>e[1]!==void 0))}a($1,"omitUndefinedValuesFromOptions");function Nq(r,e){let t=z1(r);if(!t)throw new Error("Invalid Quill container");let s=!e.theme||e.theme===K.DEFAULTS.theme?Lo:K.import(`themes/${e.theme}`);if(!s)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);let{modules:c,...h}=K.DEFAULTS,{modules:d,...p}=s.DEFAULTS,g=Rr({},Sf(c),Sf(d),Sf(e.modules));g!=null&&g.toolbar&&g.toolbar.constructor!==Object&&(g.toolbar={container:g.toolbar});let b={...h,...$1(p),...$1(e)},v=e.registry;return v?e.formats&&Oo.warn('Ignoring "formats" option because "registry" is specified'):v=e.formats?V1(e.formats,b.registry,Oo):b.registry,{...b,registry:v,container:t,theme:s,modules:Object.entries(g).reduce((E,A)=>{let[N,P]=A;if(!P)return E;let T=K.import(`modules/${N}`);return T==null?(Oo.error(`Cannot load ${N} module. Are you sure you registered it?`),E):{...E,[N]:Rr({},T.DEFAULTS||{},P)}},{}),bounds:z1(b.bounds)}}a(Nq,"expandConfig");function En(r,e,t,n){if(!this.isEnabled()&&e===ye.sources.USER&&!this.allowReadOnlyEdits)return new Bi.default;let s=t==null?null:this.getSelection(),c=this.editor.delta,h=r();if(s!=null&&(t===!0&&(t=s.index),n==null?s=W1(s,h,e):n!==0&&(s=W1(s,t,n,e)),this.setSelection(s,ye.sources.SILENT)),h.length()>0){let d=[ye.events.TEXT_CHANGE,h,c,e];this.emitter.emit(ye.events.EDITOR_CHANGE,...d),e!==ye.sources.SILENT&&this.emitter.emit(...d)}return h}a(En,"modify");function si(r,e,t,n,s){let c={};return typeof r.index=="number"&&typeof r.length=="number"?typeof e!="number"?(s=n,n=t,t=e,e=r.length,r=r.index):(e=r.length,r=r.index):typeof e!="number"&&(s=n,n=t,t=e,e=0),typeof t=="object"?(c=t,s=n):typeof t=="string"&&(n!=null?c[t]=n:s=t),s=s||ye.sources.API,[r,e,c,s]}a(si,"overload");function W1(r,e,t,n){let s=typeof t=="number"?t:0;if(r==null)return null;let c,h;return e&&typeof e.transformPosition=="function"?[c,h]=[r.index,r.index+r.length].map(d=>e.transformPosition(d,n!==ye.sources.USER)):[c,h]=[r.index,r.index+r.length].map(d=>d<e||d===e&&n===ye.sources.USER?d:s>=0?d+s:Math.max(e,d+s)),new Nr(c,h-c)}a(W1,"shiftRange");var Nf=class extends bo{static{a(this,"Container")}},nn=Nf;var sn=lr(Wr(),1);function K1(r){return r instanceof dt||r instanceof Xt}a(K1,"isLine");function G1(r){return typeof r.updateContent=="function"}a(G1,"isUpdatable");var Lf=class extends La{static{a(this,"Scroll")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=dt;static allowedChildren=[dt,Xt,nn];constructor(e,t,n){let{emitter:s}=n;super(e,t),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",c=>this.handleDragStart(c))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(ye.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(ye.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(ye.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){let[n,s]=this.line(e),[c]=this.line(e+t);if(super.deleteAt(e,t),c!=null&&n!==c&&s>0){if(n instanceof Xt||c instanceof Xt){this.optimize();return}let h=c.children.head instanceof pr?null:c.children.head;n.moveChildren(c,h),n.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,n,s){super.formatAt(e,t,n,s),this.optimize()}insertAt(e,t,n){if(e>=this.length())if(n==null||this.scroll.query(t,ce.BLOCK)==null){let s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&t.endsWith(`
`)?s.insertAt(0,t.slice(0,-1),n):s.insertAt(0,t,n)}else{let s=this.scroll.create(t,n);this.appendChild(s)}else super.insertAt(e,t,n);this.optimize()}insertBefore(e,t){if(e.statics.scope===ce.INLINE_BLOT){let n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(e),super.insertBefore(n,t)}else super.insertBefore(e,t)}insertContents(e,t){let n=this.deltaToRenderBlocks(t.concat(new sn.default().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();let c=n.shift();if(c){let p=c.type==="block"&&(c.delta.length()===0||!this.descendant(Xt,e)[0]&&e<this.length()),g=c.type==="block"?c.delta:new sn.default().insert({[c.key]:c.value});Cf(this,e,g);let b=c.type==="block"?1:0,v=e+g.length()+b;p&&this.insertAt(v-1,`
`);let E=Br(this.line(e)[0]),A=sn.AttributeMap.diff(E,c.attributes)||{};Object.keys(A).forEach(N=>{this.formatAt(v-1,1,N,A[N])}),e=v}let[h,d]=this.children.find(e);if(n.length&&(h&&(h=h.split(d),d=0),n.forEach(p=>{if(p.type==="block"){let g=this.createBlock(p.attributes,h||void 0);Cf(g,0,p.delta)}else{let g=this.create(p.key,p.value);this.insertBefore(g,h||void 0),Object.keys(p.attributes).forEach(b=>{g.format(b,p.attributes[b])})}})),s.type==="block"&&s.delta.length()){let p=h?h.offset(h.scroll)+d:this.length();Cf(this,p,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){let t=this.path(e).pop();if(!t)return[null,-1];let[n,s]=t;return n instanceof Wt?[n,s]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(K1,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,n=a((s,c,h)=>{let d=[],p=h;return s.children.forEachAt(c,h,(g,b,v)=>{K1(g)?d.push(g):g instanceof bo&&(d=d.concat(n(g,b,p))),p-=v}),d},"getLines");return n(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(ye.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=ye.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(n=>{let{target:s}=n,c=this.find(s,!0);return c&&!G1(c)}),e.length>0&&this.emitter.emit(ye.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(ye.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,n){let[s]=this.descendant(c=>c instanceof Xt,e);s&&s.statics.blotName===t&&G1(s)&&s.updateContent(n)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){let t=[],n=new sn.default;return e.forEach(s=>{let c=s?.insert;if(c)if(typeof c=="string"){let h=c.split(`
`);h.slice(0,-1).forEach(p=>{n.insert(p,s.attributes),t.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new sn.default});let d=h[h.length-1];d&&n.insert(d,s.attributes)}else{let h=Object.keys(c)[0];if(!h)return;this.query(h,ce.INLINE)?n.push(s):(n.length()&&t.push({type:"block",delta:n,attributes:{}}),n=new sn.default,t.push({type:"blockEmbed",key:h,value:c[h],attributes:s.attributes??{}}))}}),n.length()&&t.push({type:"block",delta:n,attributes:{}}),t}createBlock(e,t){let n,s={};Object.entries(e).forEach(d=>{let[p,g]=d;this.query(p,ce.BLOCK&ce.BLOT)!=null?n=p:s[p]=g});let c=this.create(n||this.statics.defaultChild.blotName,n?e[n]:void 0);this.insertBefore(c,t||void 0);let h=c.length();return Object.entries(s).forEach(d=>{let[p,g]=d;c.formatAt(0,h,p,g)}),c}};function Cf(r,e,t){t.reduce((n,s)=>{let c=sn.Op.length(s),h=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){let d=s.insert;r.insertAt(n,d);let[p]=r.descendant(Wt,n),g=Br(p);h=sn.AttributeMap.diff(g,h)||{}}else if(typeof s.insert=="object"){let d=Object.keys(s.insert)[0];if(d==null)return n;if(r.insertAt(n,d,s.insert[d]),r.scroll.query(d,ce.INLINE)!=null){let[g]=r.descendant(Wt,n),b=Br(g);h=sn.AttributeMap.diff(b,h)||{}}}}return Object.keys(h).forEach(d=>{r.formatAt(n,c,d,h[d])}),n+c},e)}a(Cf,"insertInlineContents");var Y1=Lf;var Fr=lr(Wr(),1);var Of={scope:ce.BLOCK,whitelist:["right","center","justify"]},Z1=new Tr("align","align",Of),kf=new $t("align","ql-align",Of),Qc=new jr("align","text-align",Of);var Va=class extends jr{static{a(this,"ColorAttributor")}value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):t}},X1=new $t("color","ql-color",{scope:ce.INLINE}),za=new Va("color","color",{scope:ce.INLINE});var J1=new $t("background","ql-bg",{scope:ce.INLINE}),$a=new Va("background","background-color",{scope:ce.INLINE});var Dn=class extends nn{static{a(this,"CodeBlockContainer")}static create(e){let t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${ys(this.code(e,t))}
</pre>`}},Gt=class extends dt{static{a(this,"CodeBlock")}static TAB="  ";static register(){K.register(Dn)}},ko=class extends mr{static{a(this,"Code")}};ko.blotName="code";ko.tagName="CODE";Gt.blotName="code-block";Gt.className="ql-code-block";Gt.tagName="DIV";Dn.blotName="code-block-container";Dn.className="ql-code-block-container";Dn.tagName="DIV";Dn.allowedChildren=[Gt];Gt.allowedChildren=[Ft,pr,ji];Gt.requiredContainer=Dn;var _f={scope:ce.BLOCK,whitelist:["rtl"]},eu=new Tr("direction","dir",_f),qf=new $t("direction","ql-direction",_f),tu=new jr("direction","direction",_f);var Q1={scope:ce.INLINE,whitelist:["serif","monospace"]},If=new $t("font","ql-font",Q1),Mf=class extends jr{static{a(this,"FontStyleAttributor")}value(e){return super.value(e).replace(/["']/g,"")}},ru=new Mf("font","font-family",Q1);var Df=new $t("size","ql-size",{scope:ce.INLINE,whitelist:["small","large","huge"]}),nu=new jr("size","font-size",{scope:ce.INLINE,whitelist:["10px","18px","32px"]});var br=lr(Wr(),1);var Cq=Kr("quill:keyboard"),Lq=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Wa=class r extends Kt{static{a(this,"Keyboard")}static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!t[n]!==e[n]&&t[n]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=kq(e);if(s==null){Cq.warn("Attempted to add invalid keyboard binding",s);return}typeof t=="function"&&(t={handler:t}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(h=>{let d={...s,key:h,...t,...n};this.bindings[d.key]=this.bindings[d.key]||[],this.bindings[d.key].push(d)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing)return;let n=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(T=>r.match(e,T));if(n.length===0)return;let s=K.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;let c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;let[h,d]=this.quill.getLine(c.index),[p,g]=this.quill.getLeaf(c.index),[b,v]=c.length===0?[p,g]:this.quill.getLeaf(c.index+c.length),E=p instanceof vo?p.value().slice(0,g):"",A=b instanceof vo?b.value().slice(v):"",N={collapsed:c.length===0,empty:c.length===0&&h.length()<=1,format:this.quill.getFormat(c),line:h,offset:d,prefix:E,suffix:A,event:e};n.some(T=>{if(T.collapsed!=null&&T.collapsed!==N.collapsed||T.empty!=null&&T.empty!==N.empty||T.offset!=null&&T.offset!==N.offset)return!1;if(Array.isArray(T.format)){if(T.format.every(O=>N.format[O]==null))return!1}else if(typeof T.format=="object"&&!Object.keys(T.format).every(O=>T.format[O]===!0?N.format[O]!=null:T.format[O]===!1?N.format[O]==null:cs(T.format[O],N.format[O])))return!1;return T.prefix!=null&&!T.prefix.test(N.prefix)||T.suffix!=null&&!T.suffix.test(N.suffix)?!1:T.handler.call(this,c,N,T)!==!0})&&e.preventDefault()})}handleBackspace(e,t){let n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let s={},[c]=this.quill.getLine(e.index),h=new br.default().retain(e.index-n).delete(n);if(t.offset===0){let[d]=this.quill.getLine(e.index-1);if(d&&!(d.statics.blotName==="block"&&d.length()<=1)){let g=c.formats(),b=this.quill.getFormat(e.index-1,1);if(s=br.AttributeMap.diff(g,b)||{},Object.keys(s).length>0){let v=new br.default().retain(e.index+c.length()-2).retain(1,s);h=h.compose(v)}}}this.quill.updateContents(h,K.sources.USER),this.quill.focus()}handleDelete(e,t){let n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-n)return;let s={},[c]=this.quill.getLine(e.index),h=new br.default().retain(e.index).delete(n);if(t.offset>=c.length()-1){let[d]=this.quill.getLine(e.index+1);if(d){let p=c.formats(),g=this.quill.getFormat(e.index,1);s=br.AttributeMap.diff(p,g)||{},Object.keys(s).length>0&&(h=h.retain(d.length()-1).retain(1,s))}}this.quill.updateContents(h,K.sources.USER),this.quill.focus()}handleDeleteRange(e){Ka({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){let n=Object.keys(t.format).reduce((c,h)=>(this.quill.scroll.query(h,ce.BLOCK)&&!Array.isArray(t.format[h])&&(c[h]=t.format[h]),c),{}),s=new br.default().retain(e.index).delete(e.length).insert(`
`,n);this.quill.updateContents(s,K.sources.USER),this.quill.setSelection(e.index+1,K.sources.SILENT),this.quill.focus()}},Oq={bindings:{bold:Rf("bold"),italic:Rf("italic"),underline:Rf("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",K.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",K.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,e){e.format.indent!=null?this.quill.format("indent","-1",K.sources.USER):e.format.list!=null&&this.quill.format("list",!1,K.sources.USER)}},"indent code-block":ey(!0),"outdent code-block":ey(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,K.sources.USER)}},tab:{key:"Tab",handler(r,e){if(e.format.table)return!0;this.quill.history.cutoff();let t=new br.default().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(t,K.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,K.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,K.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,e){let t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(r.index,r.length,t,K.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){let[e,t]=this.quill.getLine(r.index),n={...e.formats(),list:"checked"},s=new br.default().retain(r.index).insert(`
`,n).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,K.sources.USER),this.quill.setSelection(r.index+1,K.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,e){let[t,n]=this.quill.getLine(r.index),s=new br.default().retain(r.index).insert(`
`,e.format).retain(t.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,K.sources.USER),this.quill.setSelection(r.index+1,K.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){let e=this.quill.getModule("table");if(e){let[t,n,s,c]=e.getTable(r),h=_q(t,n,s,c);if(h==null)return;let d=t.offset();if(h<0){let p=new br.default().retain(d).insert(`
`);this.quill.updateContents(p,K.sources.USER),this.quill.setSelection(r.index+1,r.length,K.sources.SILENT)}else if(h>0){d+=t.length();let p=new br.default().retain(d).insert(`
`);this.quill.updateContents(p,K.sources.USER),this.quill.setSelection(d,K.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,e){let{event:t,line:n}=e,s=n.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(s-1,K.sources.USER):this.quill.setSelection(s+n.length(),K.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,e){if(this.quill.scroll.query("list")==null)return!0;let{length:t}=e.prefix,[n,s]=this.quill.getLine(r.index);if(s>t)return!0;let c;switch(e.prefix.trim()){case"[]":case"[ ]":c="unchecked";break;case"[x]":c="checked";break;case"-":case"*":c="bullet";break;default:c="ordered"}this.quill.insertText(r.index," ",K.sources.USER),this.quill.history.cutoff();let h=new br.default().retain(r.index-s).delete(t+1).retain(n.length()-2-s).retain(1,{list:c});return this.quill.updateContents(h,K.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-t,K.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){let[e,t]=this.quill.getLine(r.index),n=2,s=e;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){let c=new br.default().retain(r.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(c,K.sources.USER),this.quill.setSelection(r.index-1,K.sources.SILENT),!1}return!0}},"embed left":iu("ArrowLeft",!1),"embed left shift":iu("ArrowLeft",!0),"embed right":iu("ArrowRight",!1),"embed right shift":iu("ArrowRight",!0),"table down":ty(!1),"table up":ty(!0)}};Wa.DEFAULTS=Oq;function ey(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(e,t){let{event:n}=t,s=this.quill.scroll.query("code-block"),{TAB:c}=s;if(e.length===0&&!n.shiftKey){this.quill.insertText(e.index,c,K.sources.USER),this.quill.setSelection(e.index+c.length,K.sources.SILENT);return}let h=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e),{index:d,length:p}=e;h.forEach((g,b)=>{r?(g.insertAt(0,c),b===0?d+=c.length:p+=c.length):g.domNode.textContent.startsWith(c)&&(g.deleteAt(0,c.length),b===0?d-=c.length:p-=c.length)}),this.quill.update(K.sources.USER),this.quill.setSelection(d,p,K.sources.SILENT)}}}a(ey,"makeCodeBlockHandler");function iu(r,e){return{key:r,shiftKey:e,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(n){let{index:s}=n;r==="ArrowRight"&&(s+=n.length+1);let[c]=this.quill.getLeaf(s);return c instanceof It?(r==="ArrowLeft"?e?this.quill.setSelection(n.index-1,n.length+1,K.sources.USER):this.quill.setSelection(n.index-1,K.sources.USER):e?this.quill.setSelection(n.index,n.length+1,K.sources.USER):this.quill.setSelection(n.index+n.length+1,K.sources.USER),!1):!0}}}a(iu,"makeEmbedArrowHandler");function Rf(r){return{key:r[0],shortKey:!0,handler(e,t){this.quill.format(r,!t.format[r],K.sources.USER)}}}a(Rf,"makeFormatHandler");function ty(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){let n=r?"prev":"next",s=t.line,c=s.parent[n];if(c!=null){if(c.statics.blotName==="table-row"){let h=c.children.head,d=s;for(;d.prev!=null;)d=d.prev,h=h.next;let p=h.offset(this.quill.scroll)+Math.min(t.offset,h.length()-1);this.quill.setSelection(p,0,K.sources.USER)}}else{let h=s.table()[n];h!=null&&(r?this.quill.setSelection(h.offset(this.quill.scroll)+h.length()-1,0,K.sources.USER):this.quill.setSelection(h.offset(this.quill.scroll),0,K.sources.USER))}return!1}}}a(ty,"makeTableArrowHandler");function kq(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=Mn(r);else return null;return r.shortKey&&(r[Lq]=r.shortKey,delete r.shortKey),r}a(kq,"normalize");function Ka(r){let{quill:e,range:t}=r,n=e.getLines(t),s={};if(n.length>1){let c=n[0].formats(),h=n[n.length-1].formats();s=br.AttributeMap.diff(h,c)||{}}e.deleteText(t,K.sources.USER),Object.keys(s).length>0&&e.formatLine(t.index,1,s,K.sources.USER),e.setSelection(t.index,K.sources.SILENT)}a(Ka,"deleteRange");function _q(r,e,t,n){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?n===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}a(_q,"tableSide");var qq=/font-weight:\s*normal/,Mq=["P","OL","UL"],ry=a(r=>r&&Mq.includes(r.tagName),"isBlockElement"),Iq=a(r=>{Array.from(r.querySelectorAll("br")).filter(e=>ry(e.previousElementSibling)&&ry(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},"normalizeEmptyLines"),Dq=a(r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(qq)).forEach(e=>{let t=r.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})},"normalizeFontWeight");function Pf(r){r.querySelector('[id^="docs-internal-guid-"]')&&(Dq(r),Iq(r))}a(Pf,"normalize");var Rq=/\bmso-list:[^;]*ignore/i,Pq=/\bmso-list:[^;]*\bl(\d+)/i,jq=/\bmso-list:[^;]*\blevel(\d+)/i,Bq=a((r,e)=>{let t=r.getAttribute("style"),n=t?.match(Pq);if(!n)return null;let s=Number(n[1]),c=t?.match(jq),h=c?Number(c[1]):1,d=new RegExp(`@list l${s}:level${h}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),p=e.match(d),g=p&&p[1]==="bullet"?"bullet":"ordered";return{id:s,indent:h,type:g,element:r}},"parseListItem"),Fq=a(r=>{let e=Array.from(r.querySelectorAll("[style*=mso-list]")),t=[],n=[];e.forEach(h=>{(h.getAttribute("style")||"").match(Rq)?t.push(h):n.push(h)}),t.forEach(h=>h.parentNode?.removeChild(h));let s=r.documentElement.innerHTML,c=n.map(h=>Bq(h,s)).filter(h=>h);for(;c.length;){let h=[],d=c.shift();for(;d;)h.push(d),d=c.length&&c[0]?.element===d.element.nextElementSibling&&c[0].id===d.id?c.shift():null;let p=document.createElement("ul");h.forEach(v=>{let E=document.createElement("li");E.setAttribute("data-list",v.type),v.indent>1&&E.setAttribute("class",`ql-indent-${v.indent-1}`),E.innerHTML=v.element.innerHTML,p.appendChild(E)});let g=h[0]?.element,{parentNode:b}=g??{};g&&b?.replaceChild(p,g),h.slice(1).forEach(v=>{let{element:E}=v;b?.removeChild(E)})}},"normalizeListItem");function jf(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Fq(r)}a(jf,"normalize");var Hq=[jf,Pf],Uq=a(r=>{r.documentElement&&Hq.forEach(e=>{e(r)})},"normalizeExternalHTML"),ny=Uq;var Vq=Kr("quill:clipboard"),zq=[[Node.TEXT_NODE,rM],[Node.TEXT_NODE,sy],["br",Yq],[Node.ELEMENT_NODE,sy],[Node.ELEMENT_NODE,Gq],[Node.ELEMENT_NODE,Kq],[Node.ELEMENT_NODE,eM],["li",Jq],["ol, ul",Qq],["pre",Zq],["tr",tM],["b",Bf("bold")],["i",Bf("italic")],["strike",Bf("strike")],["style",Xq]],$q=[Z1,eu].reduce((r,e)=>(r[e.keyName]=e,r),{}),iy=[Qc,$a,za,tu,ru,nu].reduce((r,e)=>(r[e.keyName]=e,r),{}),ou=class extends Kt{static{a(this,"Clipboard")}static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],zq.concat(this.options.matchers??[]).forEach(n=>{let[s,c]=n;this.addMatcher(s,c)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:n}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[Gt.blotName])return new Fr.default().insert(n||"",{[Gt.blotName]:s[Gt.blotName]});if(!t)return new Fr.default().insert(n||"",s);let c=this.convertHTML(t);return Ga(c,`
`)&&(c.ops[c.ops.length-1].attributes==null||s.table)?c.compose(new Fr.default().retain(c.length()-1).delete(1)):c}normalizeHTML(e){ny(e)}convertHTML(e){let t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);let n=t.body,s=new WeakMap,[c,h]=this.prepareMatching(n,s);return au(this.quill.scroll,n,c,h,s)}dangerouslyPasteHTML(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K.sources.API;if(typeof e=="string"){let s=this.convert({html:e,text:""});this.quill.setContents(s,t),this.quill.setSelection(0,K.sources.SILENT)}else{let s=this.convert({html:t,text:""});this.quill.updateContents(new Fr.default().retain(e).concat(s),n),this.quill.setSelection(e+s.length(),K.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();let[n]=this.quill.selection.getRange();if(n==null)return;let{html:s,text:c}=this.onCopy(n,t);e.clipboardData?.setData("text/plain",c),e.clipboardData?.setData("text/html",s),t&&Ka({range:n,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();let t=this.quill.getSelection(!0);if(t==null)return;let n=e.clipboardData?.getData("text/html"),s=e.clipboardData?.getData("text/plain");if(!n&&!s){let h=e.clipboardData?.getData("text/uri-list");h&&(s=this.normalizeURIList(h))}let c=Array.from(e.clipboardData?.files||[]);if(!n&&c.length>0){this.quill.uploader.upload(t,c);return}if(n&&c.length>0){let h=new DOMParser().parseFromString(n,"text/html");if(h.body.childElementCount===1&&h.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,c);return}}this.onPaste(t,{html:n,text:s})}onCopy(e){let t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:n,html:s}=t,c=this.quill.getFormat(e.index),h=this.convert({text:n,html:s},c);Vq.log("onPaste",h,{text:n,html:s});let d=new Fr.default().retain(e.index).delete(e.length).concat(h);this.quill.updateContents(d,K.sources.USER),this.quill.setSelection(d.length()-e.length,K.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){let n=[],s=[];return this.matchers.forEach(c=>{let[h,d]=c;switch(h){case Node.TEXT_NODE:s.push(d);break;case Node.ELEMENT_NODE:n.push(d);break;default:Array.from(e.querySelectorAll(h)).forEach(p=>{t.has(p)?t.get(p)?.push(d):t.set(p,[d])});break}}),[n,s]}};function ws(r,e,t,n){return n.query(e)?r.reduce((s,c)=>{if(!c.insert)return s;if(c.attributes&&c.attributes[e])return s.push(c);let h=t?{[e]:t}:{};return s.insert(c.insert,{...h,...c.attributes})},new Fr.default):r}a(ws,"applyFormat");function Ga(r,e){let t="";for(let n=r.ops.length-1;n>=0&&t.length<e.length;--n){let s=r.ops[n];if(typeof s.insert!="string")break;t=s.insert+t}return t.slice(-1*e.length)===e}a(Ga,"deltaEndsWith");function Fi(r,e){if(!(r instanceof Element))return!1;let t=e.query(r);return t&&t.prototype instanceof It?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}a(Fi,"isLine");function Wq(r,e){return r.previousElementSibling&&r.nextElementSibling&&!Fi(r.previousElementSibling,e)&&!Fi(r.nextElementSibling,e)}a(Wq,"isBetweenInlineElements");var su=new WeakMap;function oy(r){return r==null?!1:(su.has(r)||(r.tagName==="PRE"?su.set(r,!0):su.set(r,oy(r.parentNode))),su.get(r))}a(oy,"isPre");function au(r,e,t,n,s){return e.nodeType===e.TEXT_NODE?n.reduce((c,h)=>h(e,c,r),new Fr.default):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((c,h)=>{let d=au(r,h,t,n,s);return h.nodeType===e.ELEMENT_NODE&&(d=t.reduce((p,g)=>g(h,p,r),d),d=(s.get(h)||[]).reduce((p,g)=>g(h,p,r),d)),c.concat(d)},new Fr.default):new Fr.default}a(au,"traverse");function Bf(r){return(e,t,n)=>ws(t,r,!0,n)}a(Bf,"createMatchAlias");function Kq(r,e,t){let n=Tr.keys(r),s=$t.keys(r),c=jr.keys(r),h={};return n.concat(s).concat(c).forEach(d=>{let p=t.query(d,ce.ATTRIBUTE);p!=null&&(h[p.attrName]=p.value(r),h[p.attrName])||(p=$q[d],p!=null&&(p.attrName===d||p.keyName===d)&&(h[p.attrName]=p.value(r)||void 0),p=iy[d],p!=null&&(p.attrName===d||p.keyName===d)&&(p=iy[d],h[p.attrName]=p.value(r)||void 0))}),Object.entries(h).reduce((d,p)=>{let[g,b]=p;return ws(d,g,b,t)},e)}a(Kq,"matchAttributor");function Gq(r,e,t){let n=t.query(r);if(n==null)return e;if(n.prototype instanceof It){let s={},c=n.value(r);if(c!=null)return s[n.blotName]=c,new Fr.default().insert(s,n.formats(r,t))}else if(n.prototype instanceof us&&!Ga(e,`
`)&&e.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return ws(e,n.blotName,n.formats(r,t),t);return e}a(Gq,"matchBlot");function Yq(r,e){return Ga(e,`
`)||e.insert(`
`),e}a(Yq,"matchBreak");function Zq(r,e,t){let n=t.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(r,t):!0;return ws(e,"code-block",s,t)}a(Zq,"matchCodeBlock");function Xq(){return new Fr.default}a(Xq,"matchIgnore");function Jq(r,e,t){let n=t.query(r);if(n==null||n.blotName!=="list"||!Ga(e,`
`))return e;let s=-1,c=r.parentNode;for(;c!=null;)["OL","UL"].includes(c.tagName)&&(s+=1),c=c.parentNode;return s<=0?e:e.reduce((h,d)=>d.insert?d.attributes&&typeof d.attributes.indent=="number"?h.push(d):h.insert(d.insert,{indent:s,...d.attributes||{}}):h,new Fr.default)}a(Jq,"matchIndent");function Qq(r,e,t){let n=r,s=n.tagName==="OL"?"ordered":"bullet",c=n.getAttribute("data-checked");return c&&(s=c==="true"?"checked":"unchecked"),ws(e,"list",s,t)}a(Qq,"matchList");function sy(r,e,t){if(!Ga(e,`
`)){if(Fi(r,t)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&r.nextSibling){let n=r.nextSibling;for(;n!=null;){if(Fi(n,t))return e.insert(`
`);let s=t.query(n);if(s&&s.prototype instanceof Xt)return e.insert(`
`);n=n.firstChild}}}return e}a(sy,"matchNewline");function eM(r,e,t){let n={},s=r.style||{};return s.fontStyle==="italic"&&(n.italic=!0),s.textDecoration==="underline"&&(n.underline=!0),s.textDecoration==="line-through"&&(n.strike=!0),(s.fontWeight?.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(n.bold=!0),e=Object.entries(n).reduce((c,h)=>{let[d,p]=h;return ws(c,d,p,t)},e),parseFloat(s.textIndent||0)>0?new Fr.default().insert("	").concat(e):e}a(eM,"matchStyles");function tM(r,e,t){let n=r.parentElement?.tagName==="TABLE"?r.parentElement:r.parentElement?.parentElement;if(n!=null){let c=Array.from(n.querySelectorAll("tr")).indexOf(r)+1;return ws(e,"table",c,t)}return e}a(tM,"matchTable");function rM(r,e,t){let n=r.data;if(r.parentElement?.tagName==="O:P")return e.insert(n.trim());if(!oy(r)){if(n.trim().length===0&&n.includes(`
`)&&!Wq(r,t))return e;let s=a((c,h)=>{let d=h.replace(/[^\u00a0]/g,"");return d.length<1&&c?" ":d},"replacer");n=n.replace(/\r\n/g," ").replace(/\n/g," "),n=n.replace(/\s\s+/g,s.bind(s,!0)),(r.previousSibling==null&&r.parentElement!=null&&Fi(r.parentElement,t)||r.previousSibling instanceof Element&&Fi(r.previousSibling,t))&&(n=n.replace(/^\s+/,s.bind(s,!1))),(r.nextSibling==null&&r.parentElement!=null&&Fi(r.parentElement,t)||r.nextSibling instanceof Element&&Fi(r.nextSibling,t))&&(n=n.replace(/\s+$/,s.bind(s,!1)))}return e.insert(n)}a(rM,"matchText");var lu=class extends Kt{static{a(this,"History")}static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(K.events.EDITOR_CHANGE,(n,s,c,h)=>{n===K.events.SELECTION_CHANGE?s&&h!==K.sources.SILENT&&(this.currentRange=s):n===K.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||h===K.sources.USER?this.record(s,c):this.transform(s)),this.currentRange=Ff(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",n=>{n.inputType==="historyUndo"?(this.undo(),n.preventDefault()):n.inputType==="historyRedo"&&(this.redo(),n.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;let n=this.stack[e].pop();if(!n)return;let s=this.quill.getContents(),c=n.delta.invert(s);this.stack[t].push({delta:c,range:Ff(n.range,c)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,K.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let n=e.invert(t),s=this.currentRange,c=Date.now();if(this.lastRecorded+this.options.delay>c&&this.stack.undo.length>0){let h=this.stack.undo.pop();h&&(n=n.compose(h.delta),s=h.range)}else this.lastRecorded=c;n.length()!==0&&(this.stack.undo.push({delta:n,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){ay(this.stack.undo,e),ay(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,K.sources.USER);else{let t=iM(this.quill.scroll,e.delta);this.quill.setSelection(t,K.sources.USER)}}};function ay(r,e){let t=e;for(let n=r.length-1;n>=0;n-=1){let s=r[n];r[n]={delta:t.transform(s.delta,!0),range:s.range&&Ff(s.range,t)},t=s.delta.transform(t),r[n].delta.length()===0&&r.splice(n,1)}}a(ay,"transformStack");function nM(r,e){let t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(n=>r.query(n,ce.BLOCK)!=null):!1}a(nM,"endsWithNewlineChange");function iM(r,e){let t=e.reduce((s,c)=>s+(c.delete||0),0),n=e.length()-t;return nM(r,e)&&(n-=1),n}a(iM,"getLastChangeIndex");function Ff(r,e){if(!r)return r;let t=e.transformPosition(r.index),n=e.transformPosition(r.index+r.length);return{index:t,length:n-t}}a(Ff,"transformRange");var ly=lr(Wr(),1);var cu=class extends Kt{static{a(this,"Uploader")}constructor(e,t){super(e,t),e.root.addEventListener("drop",n=>{n.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){let h=document.caretPositionFromPoint(n.clientX,n.clientY);s=document.createRange(),s.setStart(h.offsetNode,h.offset),s.setEnd(h.offsetNode,h.offset)}let c=s&&e.selection.normalizeNative(s);if(c){let h=e.selection.normalizedToRange(c);n.dataTransfer?.files&&this.upload(h,n.dataTransfer.files)}})}upload(e,t){let n=[];Array.from(t).forEach(s=>{s&&this.options.mimetypes?.includes(s.type)&&n.push(s)}),n.length>0&&this.options.handler.call(this,e,n)}};cu.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,e){let t=e.map(n=>new Promise(s=>{let c=new FileReader;c.onload=h=>{s(h.target.result)},c.readAsDataURL(n)}));Promise.all(t).then(n=>{let s=n.reduce((c,h)=>c.insert({image:h}),new ly.default().retain(r.index).delete(r.length));this.quill.updateContents(s,ye.sources.USER),this.quill.setSelection(r.index+n.length,ye.sources.SILENT)})}};var cy=cu;var uu=lr(Wr(),1);var uy=lr(Wr(),1);var sM=["insertText","insertReplacementText"],Hf=class extends Kt{static{a(this,"Input")}constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||e.on(K.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Ka({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){let n=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new uy.default().retain(e.index).insert(t,n),K.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,K.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!sM.includes(e.inputType))return;let t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;let n=oM(e);if(n==null)return;let s=this.quill.selection.normalizeNative(t),c=s?this.quill.selection.normalizedToRange(s):null;c&&this.replaceText(c,n)&&e.preventDefault()}handleCompositionStart(){let e=this.quill.getSelection();e&&this.replaceText(e)}};function oM(r){return typeof r.data=="string"?r.data:r.dataTransfer?.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}a(oM,"getPlainTextFromInputEvent");var hy=Hf;var aM=/Mac/i.test(navigator.platform),lM=100,cM=a(r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||aM&&r.key==="a"&&r.ctrlKey===!0),"canMoveCaretBeforeUINode"),Uf=class extends Kt{static{a(this,"UINode")}isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:n,event:s}=t;if(!(n instanceof Pr)||!n.uiNode)return!0;let c=getComputedStyle(n.domNode).direction==="rtl";return c&&s.key!=="ArrowRight"||!c&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(s.shiftKey?1:0),K.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&cM(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+lM,this.isListening)return;this.isListening=!0;let e=a(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},"listener");document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){let e=document.getSelection();if(!e)return;let t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;let n=this.quill.scroll.find(t.startContainer);if(!(n instanceof Pr)||!n.uiNode)return;let s=document.createRange();s.setStartAfter(n.uiNode),s.setEndAfter(n.uiNode),e.removeAllRanges(),e.addRange(s)}},dy=Uf;K.register({"blots/block":dt,"blots/block/embed":Xt,"blots/break":pr,"blots/container":nn,"blots/cursor":ji,"blots/embed":Co,"blots/inline":mr,"blots/scroll":Y1,"blots/text":Ft,"modules/clipboard":ou,"modules/history":lu,"modules/keyboard":Wa,"modules/uploader":cy,"modules/input":hy,"modules/uiNode":dy});var hu=K;var Vf=class extends $t{static{a(this,"IndentAttributor")}add(e,t){let n=0;if(t==="+1"||t==="-1"){let s=this.value(e)||0;n=t==="+1"?s+1:s-1}else typeof t=="number"&&(n=t);return n===0?(this.remove(e),!0):super.add(e,n.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}},uM=new Vf("indent","ql-indent",{scope:ce.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),fy=uM;var zf=class extends dt{static{a(this,"Blockquote")}static blotName="blockquote";static tagName="blockquote"},py=zf;var $f=class extends dt{static{a(this,"Header")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}},my=$f;var xs=class extends nn{static{a(this,"ListContainer")}};xs.blotName="list-container";xs.tagName="OL";var Hi=class extends dt{static{a(this,"ListItem")}static create(e){let t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){K.register(xs)}constructor(e,t){super(e,t);let n=t.ownerDocument.createElement("span"),s=a(c=>{if(!e.isEnabled())return;let h=this.statics.formats(t,e);h==="checked"?(this.format("list","unchecked"),c.preventDefault()):h==="unchecked"&&(this.format("list","checked"),c.preventDefault())},"listEventHandler");n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}};Hi.blotName="list";Hi.tagName="LI";xs.allowedChildren=[Hi];Hi.requiredContainer=xs;var Wf=class extends mr{static{a(this,"Bold")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},_o=Wf;var Kf=class extends _o{static{a(this,"Italic")}static blotName="italic";static tagName=["EM","I"]},gy=Kf;var oi=class extends mr{static{a(this,"Link")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){let t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return Gf(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}};function Gf(r,e){let t=document.createElement("a");t.href=r;let n=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(n)>-1}a(Gf,"sanitize");var Yf=class extends mr{static{a(this,"Script")}static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}},by=Yf;var Zf=class extends _o{static{a(this,"Strike")}static blotName="strike";static tagName=["S","STRIKE"]},vy=Zf;var Xf=class extends mr{static{a(this,"Underline")}static blotName="underline";static tagName="U"},yy=Xf;var Jf=class extends Co{static{a(this,"Formula")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){let{formula:e}=this.value();return`<span>${e}</span>`}},wy=Jf;var xy=["alt","height","width"],Qf=class extends It{static{a(this,"Image")}static blotName="image";static tagName="IMG";static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return xy.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return Gf(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){xy.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}},Ey=Qf;var Ty=["height","width"],ep=class extends Xt{static{a(this,"Video")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){let t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Ty.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static sanitize(e){return oi.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){Ty.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){let{video:e}=this.value();return`<a href="${e}">${e}</a>`}},Ay=ep;var du=lr(Wr(),1);var Ya=new $t("code-token","hljs",{scope:ce.INLINE}),ai=class r extends mr{static{a(this,"CodeToken")}static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Gt.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,n){super(e,t,n),Ya.add(this.domNode,n)}format(e,t){e!==r.blotName?super.format(e,t):t?Ya.add(this.domNode,t):(Ya.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ya.value(this.domNode)||this.unwrap()}};ai.blotName="code-token";ai.className="ql-token";var Hr=class extends Gt{static{a(this,"SyntaxCodeBlock")}static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),ai.blotName,!1),super.replaceWith(e,t)}},Es=class extends Dn{static{a(this,"SyntaxCodeBlockContainer")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Hr.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(e,t)}))}formatAt(e,t,n,s){n===Hr.blotName&&(this.forceNext=!0),super.formatAt(e,t,n,s)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let s=`${Array.from(this.domNode.childNodes).filter(h=>h!==this.uiNode).map(h=>h.textContent).join(`
`)}
`,c=Hr.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){let h=this.children.reduce((p,g)=>p.concat(af(g,!1)),new du.default),d=e(s,c);h.diff(d).reduce((p,g)=>{let{retain:b,attributes:v}=g;return b?(v&&Object.keys(v).forEach(E=>{[Hr.blotName,ai.blotName].includes(E)&&this.formatAt(p,b,E,v[E])}),p+b):p},0)}this.cachedText=s,this.forceNext=!1}}html(e,t){let[n]=this.children.find(e);return`<pre data-language="${n?Hr.formats(n.domNode):"plain"}">
${ys(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let t=Hr.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}};Es.allowedChildren=[Hr];Hr.requiredContainer=Es;Hr.allowedChildren=[ai,ji,Ft,pr];var hM=a((r,e,t)=>{if(typeof r.versionString=="string"){let n=r.versionString.split(".")[0];if(parseInt(n,10)>=11)return r.highlight(t,{language:e}).value}return r.highlight(e,t).value},"highlight"),Za=class extends Kt{static{a(this,"Syntax")}static register(){K.register(ai,!0),K.register(Hr,!0),K.register(Es,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:c}=s;return n[c]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(K.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Es))return;let t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:c}=n,h=t.ownerDocument.createElement("option");h.textContent=c,h.setAttribute("value",s),t.appendChild(h)}),t.addEventListener("change",()=>{e.format(Hr.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Hr.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(K.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(K.sources.USER);let n=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Es):[e]).forEach(c=>{c.highlight(this.highlightBlot,t)}),this.quill.update(K.sources.SILENT),n!=null&&this.quill.setSelection(n,K.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return ys(e).split(`
`).reduce((s,c,h)=>(h!==0&&s.insert(`
`,{[Gt.blotName]:t}),s.insert(c)),new du.default);let n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Gt.className),n.innerHTML=hM(this.options.hljs,t,e),au(this.quill.scroll,n,[(s,c)=>{let h=Ya.value(s);return h?c.compose(new du.default().retain(c.length(),{[ai.blotName]:h})):c}],[(s,c)=>s.data.split(`
`).reduce((h,d,p)=>(p!==0&&h.insert(`
`,{[Gt.blotName]:t}),h.insert(d)),c)],new WeakMap)}};Za.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var Sy=lr(Wr(),1);var on=class r extends dt{static{a(this,"TableCell")}static blotName="table";static tagName="TD";static create(e){let t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",fu()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===r.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},Rn=class extends nn{static{a(this,"TableRow")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let e=this.children.head.formats(),t=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return e.table===t.table&&e.table===n.table&&e.table===s.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;let n=t.formats(),s=t.next.formats();if(n.table!==s.table){let c=this.splitAfter(t);c&&c.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}},Tn=class extends nn{static{a(this,"TableBody")}static blotName="table-body";static tagName="TBODY"},Ts=class extends nn{static{a(this,"TableContainer")}static blotName="table-container";static tagName="TABLE";balanceCells(){let e=this.descendants(Rn),t=e.reduce((n,s)=>Math.max(s.children.length,n),0);e.forEach(n=>{new Array(t-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=on.formats(n.children.head.domNode));let c=this.scroll.create(on.blotName,s);n.appendChild(c),c.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){let[t]=this.descendant(Tn);t==null||t.children.head==null||t.children.forEach(n=>{let s=n.children.at(e);s?.remove()})}insertColumn(e){let[t]=this.descendant(Tn);t==null||t.children.head==null||t.children.forEach(n=>{let s=n.children.at(e),c=on.formats(n.children.head.domNode),h=this.scroll.create(on.blotName,c);n.insertBefore(h,s)})}insertRow(e){let[t]=this.descendant(Tn);if(t==null||t.children.head==null)return;let n=fu(),s=this.scroll.create(Rn.blotName);t.children.head.children.forEach(()=>{let h=this.scroll.create(on.blotName,n);s.appendChild(h)});let c=t.children.at(e);t.insertBefore(s,c)}rows(){let e=this.children.head;return e==null?[]:e.children.map(t=>t)}};Ts.allowedChildren=[Tn];Tn.requiredContainer=Ts;Tn.allowedChildren=[Rn];Rn.requiredContainer=Tn;Rn.allowedChildren=[on];on.requiredContainer=Rn;function fu(){return`row-${Math.random().toString(36).slice(2,6)}`}a(fu,"tableId");var tp=class extends Kt{static{a(this,"Table")}static register(){K.register(on),K.register(Rn),K.register(Tn),K.register(Ts)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Ts).forEach(e=>{e.balanceCells()})}deleteColumn(){let[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(K.sources.USER))}deleteRow(){let[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(K.sources.USER))}deleteTable(){let[e]=this.getTable();if(e==null)return;let t=e.offset();e.remove(),this.quill.update(K.sources.USER),this.quill.setSelection(t,K.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];let[t,n]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==on.blotName)return[null,null,null,-1];let s=t.parent;return[s.parent.parent,s,t,n]}insertColumn(e){let t=this.quill.getSelection();if(!t)return;let[n,s,c]=this.getTable(t);if(c==null)return;let h=c.cellOffset();n.insertColumn(h+e),this.quill.update(K.sources.USER);let d=s.rowOffset();e===0&&(d+=1),this.quill.setSelection(t.index+d,t.length,K.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection();if(!t)return;let[n,s,c]=this.getTable(t);if(c==null)return;let h=s.rowOffset();n.insertRow(h+e),this.quill.update(K.sources.USER),e>0?this.quill.setSelection(t,K.sources.SILENT):this.quill.setSelection(t.index+s.children.length,t.length,K.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){let n=this.quill.getSelection();if(n==null)return;let s=new Array(e).fill(0).reduce(c=>{let h=new Array(t).fill(`
`).join("");return c.insert(h,{table:fu()})},new Sy.default().retain(n.index));this.quill.updateContents(s,K.sources.USER),this.quill.setSelection(n.index,K.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(K.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(K.events.TEXT_CHANGE,(n,s,c)=>{c===K.sources.USER&&this.balanceTables()}),!0):!1)})}},Ny=tp;var Oy=lr(Wr(),1);var Cy=Kr("quill:toolbar"),qo=class extends Kt{static{a(this,"Toolbar")}constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){let n=document.createElement("div");n.setAttribute("role","toolbar"),dM(n,this.options.container),e.container?.parentNode?.insertBefore(n,e.container),this.container=n}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Cy.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(n=>{let s=this.options.handlers?.[n];s&&this.addHandler(n,s)}),Array.from(this.container.querySelectorAll("button, select")).forEach(n=>{this.attach(n)}),this.quill.on(K.events.EDITOR_CHANGE,()=>{let[n]=this.quill.selection.getRange();this.update(n)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(s=>s.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){Cy.warn("ignoring attaching to nonexistent format",t,e);return}let n=e.tagName==="SELECT"?"change":"click";e.addEventListener(n,s=>{let c;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;let d=e.options[e.selectedIndex];d.hasAttribute("selected")?c=!1:c=d.value||!1}else e.classList.contains("ql-active")?c=!1:c=e.value||!e.hasAttribute("value"),s.preventDefault();this.quill.focus();let[h]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,c);else if(this.quill.scroll.query(t).prototype instanceof It){if(c=prompt(`Enter ${t}`),!c)return;this.quill.updateContents(new Oy.default().retain(h.index).delete(h.length).insert({[t]:c}),K.sources.USER)}else this.quill.format(t,c,K.sources.USER);this.update(h)}),this.controls.push([t,e])}update(e){let t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(n=>{let[s,c]=n;if(c.tagName==="SELECT"){let h=null;if(e==null)h=null;else if(t[s]==null)h=c.querySelector("option[selected]");else if(!Array.isArray(t[s])){let d=t[s];typeof d=="string"&&(d=d.replace(/"/g,'\\"')),h=c.querySelector(`option[value="${d}"]`)}h==null?(c.value="",c.selectedIndex=-1):h.selected=!0}else if(e==null)c.classList.remove("ql-active"),c.setAttribute("aria-pressed","false");else if(c.hasAttribute("value")){let h=t[s],d=h===c.getAttribute("value")||h!=null&&h.toString()===c.getAttribute("value")||h==null&&!c.getAttribute("value");c.classList.toggle("ql-active",d),c.setAttribute("aria-pressed",d.toString())}else{let h=t[s]!=null;c.classList.toggle("ql-active",h),c.setAttribute("aria-pressed",h.toString())}})}};qo.DEFAULTS={};function Ly(r,e,t){let n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${e}`),n.setAttribute("aria-pressed","false"),t!=null?(n.value=t,n.setAttribute("aria-label",`${e}: ${t}`)):n.setAttribute("aria-label",e),r.appendChild(n)}a(Ly,"addButton");function dM(r,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{let n=document.createElement("span");n.classList.add("ql-formats"),t.forEach(s=>{if(typeof s=="string")Ly(n,s);else{let c=Object.keys(s)[0],h=s[c];Array.isArray(h)?fM(n,c,h):Ly(n,c,h)}}),r.appendChild(n)})}a(dM,"addControls");function fM(r,e,t){let n=document.createElement("select");n.classList.add(`ql-${e}`),t.forEach(s=>{let c=document.createElement("option");s!==!1?c.setAttribute("value",String(s)):c.setAttribute("selected","selected"),n.appendChild(c)}),r.appendChild(n)}a(fM,"addSelect");qo.DEFAULTS={container:null,handlers:{clean(){let r=this.quill.getSelection();if(r!=null)if(r.length===0){let e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,ce.INLINE)!=null&&this.quill.format(t,!1,K.sources.USER)})}else this.quill.removeFormat(r,K.sources.USER)},direction(r){let{align:e}=this.quill.getFormat();r==="rtl"&&e==null?this.quill.format("align","right",K.sources.USER):!r&&e==="right"&&this.quill.format("align",!1,K.sources.USER),this.quill.format("direction",r,K.sources.USER)},indent(r){let e=this.quill.getSelection(),t=this.quill.getFormat(e),n=parseInt(t.indent||0,10);if(r==="+1"||r==="-1"){let s=r==="+1"?1:-1;t.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,K.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,K.sources.USER)},list(r){let e=this.quill.getSelection(),t=this.quill.getFormat(e);r==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,K.sources.USER):this.quill.format("list","unchecked",K.sources.USER):this.quill.format("list",r,K.sources.USER)}}};var pM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',mM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',gM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',bM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',vM='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',yM='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',wM='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',xM='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',ky='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',EM='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',TM='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',AM='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',SM='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',NM='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',CM='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',LM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',OM='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',kM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',_M='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',qM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',MM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',IM='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',DM='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',RM='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',PM='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',jM='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',BM='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',FM='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',HM='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Ui={align:{"":pM,center:mM,right:gM,justify:bM},background:vM,blockquote:yM,bold:wM,clean:xM,code:ky,"code-block":ky,color:EM,direction:{"":TM,rtl:AM},formula:SM,header:{1:NM,2:CM},italic:LM,image:OM,indent:{"+1":kM,"-1":_M},link:qM,list:{bullet:MM,check:IM,ordered:DM},script:{sub:RM,super:PM},strike:jM,table:BM,underline:FM,video:HM};var UM='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',_y=0;function qy(r,e){r.setAttribute(e,`${r.getAttribute(e)!=="true"}`)}a(qy,"toggleAriaAttribute");var rp=class{static{a(this,"Picker")}constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),qy(this.label,"aria-expanded"),qy(this.options,"aria-hidden")}buildItem(e){let t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");let n=e.getAttribute("value");return n&&t.setAttribute("data-value",n),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(t,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break;default:}}),t}buildLabel(){let e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=UM,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){let e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${_y}`,_y+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{let n=this.buildItem(t);e.appendChild(n),t.selected===!0&&this.selectItem(n)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.container.querySelector(".ql-selected");e!==n&&(n?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){let n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);let t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}},Vi=rp;var np=class extends Vi{static{a(this,"ColorPicker")}constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(e){let t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);let n=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}},pu=np;var ip=class extends Vi{static{a(this,"IconPicker")}constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=t[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);let n=e||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},mu=ip;var VM=a(r=>{let{overflowY:e}=getComputedStyle(r,null);return e!=="visible"&&e!=="clip"},"isScrollable"),sp=class{static{a(this,"Tooltip")}constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,VM(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){let t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");let s=this.boundsContainer.getBoundingClientRect(),c=this.root.getBoundingClientRect(),h=0;if(c.right>s.right&&(h=s.right-c.right,this.root.style.left=`${t+h}px`),c.left<s.left&&(h=s.left-c.left,this.root.style.left=`${t+h}px`),c.bottom>s.bottom){let d=c.bottom-c.top,p=e.bottom-e.top+d;this.root.style.top=`${n-p}px`,this.root.classList.add("ql-flip")}return h}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},gu=sp;var zM=[!1,"center","right","justify"],$M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],WM=[!1,"serif","monospace"],KM=["1","2","3",!1],GM=["small",!1,"large","huge"],li=class extends Lo{static{a(this,"BaseTheme")}constructor(e,t){super(e,t);let n=a(s=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(c=>{c.container.contains(s.target)||c.close()})},"listener");e.emitter.listenDOM("click",document.body,n)}addModule(e){let t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(c=>{if(c.startsWith("ql-")&&(c=c.slice(3),t[c]!=null))if(c==="direction")n.innerHTML=t[c][""]+t[c].rtl;else if(typeof t[c]=="string")n.innerHTML=t[c];else{let h=n.value||"";h!=null&&t[c][h]&&(n.innerHTML=t[c][h])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Xa(s,zM),typeof t.align=="object"))return new mu(s,t.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){let c=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Xa(s,$M,c==="background"?"#ffffff":"#000000"),new pu(s,t[c])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Xa(s,WM):s.classList.contains("ql-header")?Xa(s,KM):s.classList.contains("ql-size")&&Xa(s,GM)),new Vi(s)});let n=a(()=>{this.pickers.forEach(s=>{s.update()})},"update");this.quill.on(ye.events.EDITOR_CHANGE,n)}};li.DEFAULTS=Rr({},Lo.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{let e=this.quill.getSelection(!0);this.quill.uploader.upload(e,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var Mo=class extends gu{static{a(this,"BaseTooltip")}constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,ye.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,ye.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=YM(e);case"formula":{if(!e)break;let t=this.quill.getSelection(!0);if(t!=null){let n=t.index+t.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,ye.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",ye.sources.USER),this.quill.setSelection(n+2,ye.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function YM(r){let e=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:r}a(YM,"extractVideoUrl");function Xa(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(n=>{let s=document.createElement("option");n===t?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),r.appendChild(s)})}a(Xa,"fillSelect");var ZM=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],op=class extends Mo{static{a(this,"BubbleTooltip")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(ye.events.EDITOR_CHANGE,(n,s,c,h)=>{if(n===ye.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&h===ye.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let d=this.quill.getLines(s.index,s.length);if(d.length===1){let p=this.quill.getBounds(s);p!=null&&this.position(p)}else{let p=d[d.length-1],g=this.quill.getIndex(p),b=Math.min(p.length()-1,s.index+s.length-g),v=this.quill.getBounds(new Nr(g,b));v!=null&&this.position(v)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(ye.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let e=this.quill.getSelection();if(e!=null){let t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){let t=super.position(e),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",t!==0&&(n.style.marginLeft=`${-1*t-n.offsetWidth/2}px`),t}},Ja=class extends li{static{a(this,"BubbleTheme")}constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=ZM),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new op(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Ui),this.buildPickers(e.container.querySelectorAll("select"),Ui))}};Ja.DEFAULTS=Rr({},li.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var XM=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],ap=class extends Mo{static{a(this,"SnowTooltip")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){let t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,ye.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(ye.events.SELECTION_CHANGE,(e,t,n)=>{if(e!=null){if(e.length===0&&n===ye.sources.USER){let[s,c]=this.quill.scroll.descendant(oi,e.index);if(s!=null){this.linkRange=new Nr(e.index-c,s.length());let h=oi.formats(s.domNode);this.preview.textContent=h,this.preview.setAttribute("href",h),this.show();let d=this.quill.getBounds(this.linkRange);d!=null&&this.position(d);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}},bu=class extends li{static{a(this,"SnowTheme")}constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=XM),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Ui),this.buildPickers(e.container.querySelectorAll("select"),Ui),this.tooltip=new ap(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,n)=>{e.handlers.link.call(e,!n.format.link)}))}};bu.DEFAULTS=Rr({},li.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){let e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);let{tooltip:n}=this.quill.theme;n.edit("link",t)}else this.quill.format("link",!1)}}}}});var My=bu;hu.register({"attributors/attribute/direction":eu,"attributors/class/align":kf,"attributors/class/background":J1,"attributors/class/color":X1,"attributors/class/direction":qf,"attributors/class/font":If,"attributors/class/size":Df,"attributors/style/align":Qc,"attributors/style/background":$a,"attributors/style/color":za,"attributors/style/direction":tu,"attributors/style/font":ru,"attributors/style/size":nu},!0);hu.register({"formats/align":kf,"formats/direction":qf,"formats/indent":fy,"formats/background":$a,"formats/color":za,"formats/font":If,"formats/size":Df,"formats/blockquote":py,"formats/code-block":Gt,"formats/header":my,"formats/list":Hi,"formats/bold":_o,"formats/code":ko,"formats/italic":gy,"formats/link":oi,"formats/script":by,"formats/strike":vy,"formats/underline":yy,"formats/formula":wy,"formats/image":Ey,"formats/video":Ay,"modules/syntax":Za,"modules/table":Ny,"modules/toolbar":qo,"themes/bubble":Ja,"themes/snow":My,"ui/icons":Ui,"ui/picker":Vi,"ui/icon-picker":mu,"ui/color-picker":pu,"ui/tooltip":gu},!0);var lp=hu;var Ry=lr(Dy());lp.register("modules/htmlEditButton",Ry.default);var Qa=class extends lt{static{a(this,"RichTextEditorController")}static targets=["field"];connect(){let e=this.fieldTarget;this.quill=new lp(this.querySelector(".quill"),{theme:"snow",modules:{htmlEditButton:{}}}),this.quill.on("text-change",(t,n,s)=>{this.fieldTarget.value=this.quill.root.innerHTML})}disconnect(){delete this.quill}};var el=class extends lt{static{a(this,"SlugonatorController")}static targets=["slug"];onChange(e){this.slugTarget.value=this.slugonate(e.target.value)}slugonate(e){return e.toLowerCase().normalize("NFD").replaceAll(/[\u0300-\u036f]/g,"").replaceAll(/[.,!@#$%^&*()]/g,"").replaceAll(" ","-")}};var tl=class extends lt{static{a(this,"SelectAllController")}static targets=["resource"];change(e){let t=new Event("change");this.resourceTargets.forEach(n=>n.checked=e.target.checked),this.resourceTargets[0].dispatchEvent(t)}};var Py="&#8203;";function hp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}a(hp,"e");function jy(r){return function(e){if(Array.isArray(e))return hp(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return hp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hp(e,t)}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(jy,"i");var Wi={isEnabled:function(){var r;return(r=window.TAGIFY_DEBUG)===null||r===void 0||r},log:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n;this.isEnabled()&&(n=console).log.apply(n,["[Tagify]:"].concat(jy(e)))},warn:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n;this.isEnabled()&&(n=console).warn.apply(n,["[Tagify]:"].concat(jy(e)))}},nl=a(function(r,e,t,n){return r=""+r,e=""+e,n&&(r=r.trim(),e=e.trim()),t?r==e:r.toLowerCase()==e.toLowerCase()},"s"),By=a(function(r,e){return r&&Array.isArray(r)&&r.map(function(t){return yp(t,e)})},"a");function yp(r,e){var t,n={};for(t in r)e.indexOf(t)<0&&(n[t]=r[t]);return n}a(yp,"o");function Fy(r){var e=document.createElement("div");return r.replace(/\&#?[0-9a-z]+;/gi,function(t){return e.innerHTML=t,e.innerText})}a(Fy,"r");function dp(r){return new DOMParser().parseFromString(r.trim(),"text/html").body.firstElementChild}a(dp,"l");function Hy(r,e){for(e=e||"previous";r=r[e+"Sibling"];)if(r.nodeType==3)return r}a(Hy,"d");function Ss(r){return typeof r=="string"?r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):r}a(Ss,"c");function Pn(r){var e=Object.prototype.toString.call(r).split(" ")[1].slice(0,-1);return r===Object(r)&&e!="Array"&&e!="Function"&&e!="RegExp"&&e!="HTMLUnknownElement"}a(Pn,"u");function Jt(r,e,t){var n,s;function c(h,d){for(var p in d)if(d.hasOwnProperty(p)){if(Pn(d[p])){Pn(h[p])?c(h[p],d[p]):h[p]=Object.assign({},d[p]);continue}if(Array.isArray(d[p])){h[p]=Object.assign([],d[p]);continue}h[p]=d[p]}}return a(c,"a"),n=r,((s=Object)!=null&&typeof Symbol<"u"&&s[Symbol.hasInstance]?s[Symbol.hasInstance](n):n instanceof s)||(r={}),c(r,e),t&&c(r,t),r}a(Jt,"g");function Uy(){var r=[],e={},t=!0,n=!1,s=void 0;try{for(var c,h=arguments[Symbol.iterator]();!(t=(c=h.next()).done);t=!0){var d=c.value,p=!0,g=!1,b=void 0;try{for(var v,E=d[Symbol.iterator]();!(p=(v=E.next()).done);p=!0){var A=v.value;Pn(A)?e[A.value]||(r.push(A),e[A.value]=1):r.includes(A)||r.push(A)}}catch(N){g=!0,b=N}finally{try{p||E.return==null||E.return()}finally{if(g)throw b}}}}catch(N){n=!0,s=N}finally{try{t||h.return==null||h.return()}finally{if(n)throw s}}return r}a(Uy,"h");function vu(r){return String.prototype.normalize?typeof r=="string"?r.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:r}a(vu,"p");var Vy=a(function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)},"f");function zy(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(r){return(r^crypto.getRandomValues(new Uint8Array(1))[0]&15>>r/4).toString(16)})}a(zy,"m");function Ns(r){return r&&r.classList&&r.classList.contains(this.settings.classNames.tag)}a(Ns,"v");function $y(r){return r&&r.closest(this.settings.classNames.tagSelector)}a($y,"b");function Xy(r,e){var t=window.getSelection();return e=e||t.getRangeAt(0),typeof r=="string"&&(r=document.createTextNode(r)),e&&(e.deleteContents(),e.insertNode(r)),r}a(Xy,"w");function yt(r,e,t){return r?(e&&(r.__tagifyTagData=t?e:Jt({},r.__tagifyTagData||{},e)),r.__tagifyTagData):(Wi.warn("tag element doesn't exist",{tagElm:r,data:e}),e)}a(yt,"y");function $i(r){if(r&&r.parentNode){var e=r,t=window.getSelection(),n=t.getRangeAt(0);t.rangeCount&&(n.setStartAfter(e),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}a($i,"T");function Jy(r,e){r.forEach(function(t){if(yt(t.previousSibling)||!t.previousSibling){var n=document.createTextNode("\u200B");t.before(n),e&&$i(n)}})}a(Jy,"O");var fp={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function JM(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}a(JM,"D");function QM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){JM(r,s,t[s])})}return r}a(QM,"S");function eI(r,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):function(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable})),s.push.apply(s,c)}return s}(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r}a(eI,"I");function pp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}a(pp,"M");function tI(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}a(tI,"E");function rI(r){return function(e){if(Array.isArray(e))return pp(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return pp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pp(e,t)}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(rI,"N");function nI(){for(var r in this.dropdown={},this._dropdown)this.dropdown[r]=typeof this._dropdown[r]=="function"?this._dropdown[r].bind(this):this._dropdown[r];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}a(nI,"_");var yu,Do,Wy,iI=(yu=function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){tI(r,s,t[s])})}return r}({},{events:{binding:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.dropdown.events.callbacks,t=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},n=r?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[n]("scroll",t.position,!0),window[n]("resize",t.position),window[n]("keydown",t.onKeyDown)),this.DOM.dropdown[n]("mouseover",t.onMouseOver),this.DOM.dropdown[n]("mouseleave",t.onMouseLeave),this.DOM.dropdown[n]("mousedown",t.onClick),this.DOM.dropdown.content[n]("scroll",t.onScroll)},callbacks:{onKeyDown:function(r){var e=this;if(this.state.hasFocus&&!this.state.composing){var t=this.settings,n=this.DOM.dropdown.querySelector(t.classNames.dropdownItemActiveSelector),s=this.dropdown.getSuggestionDataByNode(n),c=t.mode=="mix",h=t.mode=="select";t.hooks.beforeKeyDown(r,{tagify:this}).then(function(d){switch(r.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":r.preventDefault();var p=e.dropdown.getAllSuggestionsRefs(),g=r.key=="ArrowUp"||r.key=="Up";n&&(n=e.dropdown.getNextOrPrevOption(n,!g)),n&&n.matches(t.classNames.dropdownItemSelector)||(n=p[g?p.length-1:0]),e.dropdown.highlightOption(n,!0);break;case"Escape":case"Esc":e.dropdown.hide();break;case"ArrowRight":if(e.state.actions.ArrowLeft)return;case"Tab":var b=!t.autoComplete.rightKey||!t.autoComplete.tabKey;if(!c&&!h&&n&&b&&!e.state.editing){r.preventDefault();var v=e.dropdown.getMappedValue(s);return e.input.autocomplete.set.call(e,v),!1}return!0;case"Enter":r.preventDefault(),t.hooks.suggestionClick(r,{tagify:e,tagData:s,suggestionElm:n}).then(function(){if(n)return e.dropdown.selectOption(n),n=e.dropdown.getNextOrPrevOption(n,!g),void e.dropdown.highlightOption(n);e.dropdown.hide(),c||e.addTags(e.state.inputText.trim(),!0)}).catch(function(A){return Wi.warn(A)});break;case"Backspace":if(c||e.state.editing.scope)return;var E=e.input.raw.call(e);E!=""&&E.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0))}})}},onMouseOver:function(r){var e=r.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(e)},onMouseLeave:function(r){this.dropdown.highlightOption()},onClick:function(r){var e=this;if(r.button==0&&r.target!=this.DOM.dropdown&&r.target!=this.DOM.dropdown.content){var t=r.target.closest(this.settings.classNames.dropdownItemSelector),n=this.dropdown.getSuggestionDataByNode(t);this.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},50),this.settings.hooks.suggestionClick(r,{tagify:this,tagData:n,suggestionElm:t}).then(function(){t?e.dropdown.selectOption(t,r):e.dropdown.hide()}).catch(function(s){return Wi.warn(s)})}},onScroll:function(r){var e=r.target,t=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(t)})}}},refilter:function(r){r=r||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(r),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(r){var e=r&&r.getAttribute("value");return this.suggestedListItems.find(function(t){return t.value==e})||null},getNextOrPrevOption:function(r){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.dropdown.getAllSuggestionsRefs(),n=t.findIndex(function(s){return s===r});return e?t[n+1]:t[n-1]},highlightOption:function(r,e){var t,n=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(n),this.state.ddItemElm.removeAttribute("aria-selected")),!r)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);t=this.dropdown.getSuggestionDataByNode(r),this.state.ddItemData=t,this.state.ddItemElm=r,r.classList.add(n),r.setAttribute("aria-selected",!0),e&&(r.parentNode.scrollTop=r.clientHeight+r.offsetTop-r.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,t),this.dropdown.position())},selectOption:function(r,e){var t=this,n=this.settings,s=n.dropdown,c=s.clearOnSelect,h=s.closeOnSelect;if(!r)return this.addTags(this.state.inputText,!0),void(h&&this.dropdown.hide());e=e||{};var d=r.getAttribute("value"),p=d=="noMatch",g=n.mode=="mix",b=this.suggestedListItems.find(function(E){var A;return((A=E.value)!==null&&A!==void 0?A:E)==d});if(this.trigger("dropdown:select",{data:b,elm:r,event:e}),d&&(b||p)){if(this.state.editing){var v=this.normalizeTags([b])[0];b=n.transformTag.call(this,v)||v,this.onEditTagDone(null,Jt({__isValid:!0},b))}else this[g?"addMixTags":"addTags"]([b||this.input.raw.call(this)],c);(g||this.DOM.input.parentNode)&&(setTimeout(function(){t.DOM.input.focus(),t.toggleFocusClass(!0)}),h&&setTimeout(this.dropdown.hide.bind(this)),r.addEventListener("transitionend",function(){t.dropdown.fillHeaderFooter(),setTimeout(function(){r.remove(),t.dropdown.refilter()},100)},{once:!0}),r.classList.add(this.settings.classNames.dropdownItemHidden))}else h&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(r){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return r||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems:function(r,e){var t,n,s,c,h,d,p=a(function(){var j,F,U=void 0,Z=void 0;j=N[O],n=((F=Object)!=null&&typeof Symbol<"u"&&F[Symbol.hasInstance]?F[Symbol.hasInstance](j):j instanceof F)?N[O]:{value:N[O]};var se,ee=Object.keys(n).some(function(_){return T.includes(_)})?T:["value"];v.fuzzySearch&&!e.exact?(c=ee.reduce(function(_,X){return _+" "+(n[X]||"")},"").toLowerCase().trim(),v.accentedSearch&&(c=vu(c),d=vu(d)),U=c.indexOf(d)==0,Z=c===d,se=c,s=d.toLowerCase().split(" ").every(function(_){return se.includes(_.toLowerCase())})):(U=!0,s=ee.some(function(_){var X=""+(n[_]||"");return v.accentedSearch&&(X=vu(X),d=vu(d)),v.caseSensitive||(X=X.toLowerCase()),Z=X===d,e.exact?X===d:X.indexOf(d)==0})),h=!v.includeSelectedTags&&t.isTagDuplicate(Pn(n)?n.value:n),s&&!h&&(Z&&U?A.push(n):v.sortby=="startsWith"&&U?E.unshift(n):E.push(n))},"l"),g=this,b=this.settings,v=b.dropdown,E=(e=e||{},[]),A=[],N=b.whitelist,P=v.maxItems>=0?v.maxItems:1/0,T=v.searchKeys,O=0;if(!(r=b.mode=="select"&&this.value.length&&this.value[0][b.tagTextProp]==r?"":r)||!T.length)return E=v.includeSelectedTags?N:N.filter(function(j){return!g.isTagDuplicate(Pn(j)?j.value:j)}),this.state.dropdown.suggestions=E,E.slice(0,P);for(d=v.caseSensitive?""+r:(""+r).toLowerCase();O<N.length;O++)t=this,p();return this.state.dropdown.suggestions=A.concat(E),typeof v.sortby=="function"?v.sortby(A.concat(E),d):A.concat(E).slice(0,P)},getMappedValue:function(r){var e=this.settings.dropdown.mapValueTo;return e?typeof e=="function"?e(r):r[e]||r.value:r.value},createListHTML:function(r){var e=this;return Jt([],r).map(function(t,n){typeof t!="string"&&typeof t!="number"||(t={value:t});var s=e.dropdown.getMappedValue(t);return s=typeof s=="string"&&e.settings.dropdown.escapeHTML?Ss(s):s,e.settings.templates.dropdownItem.apply(e,[eI(QM({},t),{mappedValue:s}),e])}).join("")}}),Do=(Do={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return rI(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(r){var e,t,n,s=this,c=this.settings,h=c.mode=="mix"&&!c.enforceWhitelist,d=!c.whitelist||!c.whitelist.length,p=c.dropdown.position=="manual";if(r=r===void 0?this.state.inputText:r,!(d&&!h&&!c.templates.dropdownItemNoMatch||c.dropdown.enable===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(r),r&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",r),c.templates.dropdownItemNoMatch&&(n=c.templates.dropdownItemNoMatch.call(this,{value:r}))),!n){if(this.suggestedListItems.length)r&&h&&!this.state.editing.scope&&!nl(this.suggestedListItems[0].value,r)&&this.suggestedListItems.unshift({value:r});else{if(!r||!h||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:r}]}t=""+(Pn(e=this.suggestedListItems[0])?e.value:e),c.autoComplete&&t&&t.indexOf(r)==0&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(n),c.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(c.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=r||!0,this.state.dropdown.query=r,this.setStateSelection(),p||setTimeout(function(){s.dropdown.position(),s.dropdown.render()}),setTimeout(function(){s.trigger("dropdown:show",s.DOM.dropdown)})}},hide:function(r){var e=this,t=this.DOM,n=t.scope,s=t.dropdown,c=this.settings.dropdown.position=="manual"&&!r;if(s&&document.body.contains(s)&&!c)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),n.setAttribute("aria-expanded",!1),s.parentNode.removeChild(s),setTimeout(function(){e.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",s),this},toggle:function(r){this.dropdown[this.state.dropdown.visible&&!r?"hide":"show"]()},getAppendTarget:function(){var r=this.settings.dropdown;return typeof r.appendTarget=="function"?r.appendTarget():r.appendTarget},render:function(){var r,e,t,n=this,s=(r=this.DOM.dropdown,(t=r.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(t),e=t.clientHeight,t.parentNode.removeChild(t),e),c=this.settings,h=typeof c.dropdown.enabled=="number"&&c.dropdown.enabled>=0,d=this.dropdown.getAppendTarget();return h?(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(c.classNames.dropdownInital),this.dropdown.position(s),d.appendChild(this.DOM.dropdown),setTimeout(function(){return n.DOM.dropdown.classList.remove(c.classNames.dropdownInital)})),this):this},fill:function(r){r=typeof r=="string"?r:this.dropdown.createListHTML(r||this.suggestedListItems);var e,t=this.settings.templates.dropdownContent.call(this,r);this.DOM.dropdown.content.innerHTML=(e=t)?e.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var r=this.dropdown.filterListItems(this.state.dropdown.query),e=this.parseTemplate("dropdownHeader",[r]),t=this.parseTemplate("dropdownFooter",[r]),n=this.dropdown.getHeaderRef(),s=this.dropdown.getFooterRef();e&&n?.parentNode.replaceChild(e,n),t&&s?.parentNode.replaceChild(t,s)},position:function(r){var e=this.settings.dropdown,t=this.dropdown.getAppendTarget();if(e.position!="manual"&&t){var n,s,c,h,d,p,g,b,v,E=this.DOM.dropdown,A=e.RTL,N=t===document.body,P=t===this.DOM.scope,T=N?window.pageYOffset:t.scrollTop,O=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,j=O.clientHeight,F=Math.max(O.clientWidth||0,window.innerWidth||0)>480?e.position:"all",U=this.DOM[F=="input"?"input":"scope"];if(r=r||E.clientHeight,this.state.dropdown.visible){if(F=="text"?(c=(n=function(){var ee=document.getSelection();if(ee.rangeCount){var _,X,de=ee.getRangeAt(0),D=de.startContainer,V=de.startOffset;if(V>0)return(X=document.createRange()).setStart(D,V-1),X.setEnd(D,V),{left:(_=X.getBoundingClientRect()).right,top:_.top,bottom:_.bottom};if(D.getBoundingClientRect)return D.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,s=n.top,h=n.left,d="auto"):(p=function(ee){var _=0,X=0;for(ee=ee.parentNode;ee&&ee!=O;)_+=ee.offsetTop||0,X+=ee.offsetLeft||0,ee=ee.parentNode;return{top:_,left:X}}(t),n=U.getBoundingClientRect(),s=P?-1:n.top-p.top,c=(P?n.height:n.bottom-p.top)-1,h=P?-1:n.left-p.left,d=n.width+"px"),!N){var Z=function(){for(var ee=0,_=e.appendTarget.parentNode;_;)ee+=_.scrollTop||0,_=_.parentNode;return ee}();s+=Z,c+=Z}var se;s=Math.floor(s),c=Math.ceil(c),b=((g=(se=e.placeAbove)!==null&&se!==void 0?se:j-n.bottom<r)?s:c)+T,v="left: ".concat(h+(A&&n.width||0)+window.pageXOffset,"px;"),E.style.cssText="".concat(v,"; top: ").concat(b,"px; min-width: ").concat(d,"; max-width: ").concat(d),E.setAttribute("placement",g?"top":"bottom"),E.setAttribute("position",F)}}}})!=null?Do:{},Object.getOwnPropertyDescriptors?Object.defineProperties(yu,Object.getOwnPropertyDescriptors(Do)):function(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}(Object(Do)).forEach(function(r){Object.defineProperty(yu,r,Object.getOwnPropertyDescriptor(Do,r))}),yu),rl="@yaireo/tagify/",sI={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},oI={wrapper:function(r,e){return'<tags class="'.concat(e.classNames.namespace," ").concat(e.mode?"".concat(e.classNames[e.mode+"Mode"]):""," ").concat(r.className,`"
                    `).concat(e.readonly?"readonly":"",`
                    `).concat(e.disabled?"disabled":"",`
                    `).concat(e.required?"required":"",`
                    `).concat(e.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(Py,`
        </tags>`)},input:function(){var r=this.settings,e=r.placeholder||Py;return"<span ".concat(!r.readonly&&r.userInput?"contenteditable":"",' tabIndex="0" data-placeholder="').concat(e,'" aria-placeholder="').concat(r.placeholder||"",`"
                    class="`).concat(r.classNames.input,`"
                    role="textbox"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(r.mode=="mix",'"></span>')},tag:function(r,e){var t=e.settings;return'<tag title="'.concat(r.title||r.value,`"
                    contenteditable='false'
                    spellcheck='false'
                    tabIndex="`).concat(t.a11y.focusableTags?0:-1,`"
                    class="`).concat(t.classNames.tag," ").concat(r.class||"",`"
                    `).concat(this.getAttributes(r),`>
            <x title='' tabIndex="`).concat(t.a11y.focusableTags?0:-1,'" class="').concat(t.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(t.mode==="select"&&t.userInput?"contenteditable='true'":"",' class="').concat(t.classNames.tagText,'">').concat(r[t.tagTextProp]||r.value,`</span>
            </div>
        </tag>`)},dropdown:function(r){var e=r.dropdown,t=e.position=="manual";return'<div class="'.concat(t?"":r.classNames.dropdown," ").concat(e.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(e.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(r.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(r){var e=this.settings.templates,t=this.state.dropdown.suggestions;return`
            `.concat(e.dropdownHeader.call(this,t),`
            `).concat(r,`
            `).concat(e.dropdownFooter.call(this,t),`
        `)},dropdownItem:function(r){return"<div ".concat(this.getAttributes(r),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(r.class||"",`'
                    tabindex="0"
                    role="option">`).concat(r.mappedValue||r.value,"</div>")},dropdownHeader:function(r){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(r){var e=r.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(e,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function Ky(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}a(Ky,"F");function Gy(r,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):r instanceof e}a(Gy,"R");function aI(r,e){return function(t){if(Array.isArray(t))return t}(r)||function(t,n){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var c,h,d=[],p=!0,g=!1;try{for(s=s.call(t);!(p=(c=s.next()).done)&&(d.push(c.value),!n||d.length!==n);p=!0);}catch(b){g=!0,h=b}finally{try{p||s.return==null||s.return()}finally{if(g)throw h}}return d}}(r,e)||function(t,n){if(t){if(typeof t=="string")return Ky(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(s);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Ky(t,n)}}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(aI,"H");function mp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}a(mp,"B");function As(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}a(As,"W");function Yy(r,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):r instanceof e}a(Yy,"U");function lI(r,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):function(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable})),s.push.apply(s,c)}return s}(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r}a(lI,"q");function gp(r){return function(e){if(Array.isArray(e))return mp(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mp(e,t)}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(gp,"K");var cI={customBinding:function(){var r=this;this.customEventsList.forEach(function(e){r.on(e,r.settings.callbacks[e])})},binding:function(){var r,e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=this.settings,n=this.events.callbacks,s=e?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!e){for(var c in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),r=this.listeners.main=this.listeners.main||{keydown:["input",n.onKeydown.bind(this)],click:["scope",n.onClickScope.bind(this)],dblclick:t.mode!="select"&&["scope",n.onDoubleClickScope.bind(this)],paste:["input",n.onPaste.bind(this)],drop:["input",n.onDrop.bind(this)],compositionstart:["input",n.onCompositionStart.bind(this)],compositionend:["input",n.onCompositionEnd.bind(this)]})r[c]&&this.DOM[r[c][0]][s](c,r[c][1]);var h=this.listeners.main.inputMutationObserver||new MutationObserver(n.onInputDOMChange.bind(this));h.disconnect(),t.mode=="mix"&&h.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(r){var e=(r||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),e))},bindGlobal:function(r){var e,t=this.events.callbacks,n=r?"removeEventListener":"addEventListener";if(this.listeners&&(r||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:t[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:t.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"click",target:document,cb:t.onClickAnywhere.bind(this),useCapture:!0}];var s=!0,c=!1,h=void 0;try{for(var d,p=this.listeners.global[Symbol.iterator]();!(s=(d=p.next()).done);s=!0)(e=d.value).target[n](e.type,e.cb,!!e.useCapture)}catch(g){c=!0,h=g}finally{try{s||p.return==null||p.return()}finally{if(c)throw h}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(r){var e,t,n,s=$y.call(this,r.target),c=Ns.call(this,r.target),h=r.type=="focusin",d=r.type=="focusout";(e=r.target)===null||e===void 0||e.closest(this.settings.classNames.tagTextSelector),s&&h&&!c&&this.toggleFocusClass(this.state.hasFocus=+new Date);var p=this.settings,g=r.target?this.trim(this.DOM.input.textContent):"",b=(n=this.value)===null||n===void 0||(t=n[0])===null||t===void 0?void 0:t[p.tagTextProp],v=p.dropdown.enabled>=0,E={relatedTarget:r.relatedTarget},A=this.state.actions.selectOption&&(v||!p.dropdown.closeOnSelect),N=this.state.actions.addNew&&v;if(d){if(r.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate()}if(!A&&!N)if(h||s?(this.state.hasFocus=+new Date,this.toggleFocusClass(this.state.hasFocus)):this.state.hasFocus=!1,p.mode!="mix"){if(h){if(!p.focusable)return;var P=p.dropdown.enabled===0&&!this.state.dropdown.visible;return this.toggleFocusClass(!0),this.trigger("focus",E),void(!P||c&&p.mode!=="select"||this.dropdown.show(this.value.length?"":void 0))}if(d){if(this.trigger("blur",E),this.loading(!1),p.mode=="select"){if(this.value.length){var T=this.getTagElms()[0];g=this.trim(T.textContent)}b===g&&(g="")}g&&!this.state.actions.selectOption&&p.addTagOnBlur&&p.addTagOn.includes("blur")&&this.addTags(g,!0)}s||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else h?this.trigger("focus",E):d&&(this.trigger("blur",E),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(r){this.state.composing=!0},onCompositionEnd:function(r){this.state.composing=!1},onWindowKeyDown:function(r){var e,t=this.settings,n=document.activeElement,s=$y.call(this,n)&&this.DOM.scope.contains(document.activeElement),c=s&&n.hasAttribute("readonly");if(this.state.hasFocus||s&&!c){e=n.nextElementSibling;var h=r.target.classList.contains(t.classNames.tagX);switch(r.key){case"Backspace":t.readonly||this.state.editing||(this.removeTags(n),(e||this.DOM.input).focus());break;case"Enter":if(h)return void this.removeTags(r.target.parentNode);t.a11y.focusableTags&&Ns.call(this,n)&&setTimeout(this.editTag.bind(this),0,n);break;case"ArrowDown":this.state.dropdown.visible||t.mode=="mix"||this.dropdown.show()}}},onKeydown:function(r){var e=this,t=this.settings;if(!this.state.composing&&t.userInput){t.mode=="select"&&t.enforceWhitelist&&this.value.length&&r.key!="Tab"&&r.preventDefault();var n=this.trim(r.target.textContent);this.trigger("keydown",{event:r}),t.hooks.beforeKeyDown(r,{tagify:this}).then(function(s){if(t.mode=="mix"){switch(r.key){case"Left":case"ArrowLeft":e.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(e.state.editing)return;var c=document.getSelection(),h=r.key=="Delete"&&c.anchorOffset==(c.anchorNode.length||0),d=c.anchorNode.previousSibling,p=c.anchorNode.nodeType==1||!c.anchorOffset&&d&&d.nodeType==1&&c.anchorNode.previousSibling;Fy(e.DOM.input.innerHTML);var g,b,v,E=e.getTagElms(),A=c.anchorNode.length===1&&c.anchorNode.nodeValue=="\u200B";if(t.backspace=="edit"&&p)return g=c.anchorNode.nodeType==1?null:c.anchorNode.previousElementSibling,setTimeout(e.editTag.bind(e),0,g),void r.preventDefault();if(Vy()&&Yy(p,Element))return v=Hy(p),p.hasAttribute("readonly")||p.remove(),e.DOM.input.focus(),void setTimeout(function(){$i(v),e.DOM.input.click()});if(c.anchorNode.nodeName=="BR")return;if((h||p)&&c.anchorNode.nodeType==1?b=c.anchorOffset==0?h?E[0]:null:E[Math.min(E.length,c.anchorOffset)-1]:h?b=c.anchorNode.nextElementSibling:Yy(p,Element)&&(b=p),c.anchorNode.nodeType==3&&!c.anchorNode.nodeValue&&c.anchorNode.previousElementSibling&&r.preventDefault(),(p||h)&&!t.backspace||c.type!="Range"&&!c.anchorOffset&&c.anchorNode==e.DOM.input&&r.key!="Delete")return void r.preventDefault();if(c.type!="Range"&&b&&b.hasAttribute("readonly"))return void $i(Hy(b));r.key=="Delete"&&A&&yt(c.anchorNode.nextSibling)&&e.removeTags(c.anchorNode.nextSibling),clearTimeout(Wy),Wy=setTimeout(function(){var O=document.getSelection();Fy(e.DOM.input.innerHTML),!h&&O.anchorNode.previousSibling,e.value=[].map.call(E,function(j,F){var U=yt(j);if(j.parentNode||U.readonly)return U;e.trigger("remove",{tag:j,index:F,data:U})}).filter(function(j){return j})},20)}return!0}var N=t.dropdown.position=="manual";switch(r.key){case"Backspace":t.mode=="select"&&t.enforceWhitelist&&e.value.length?e.removeTags():e.state.dropdown.visible&&t.dropdown.position!="manual"||r.target.textContent!=""&&n.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0));break;case"Esc":case"Escape":if(e.state.dropdown.visible)return;r.target.blur();break;case"Down":case"ArrowDown":e.state.dropdown.visible||e.dropdown.show();break;case"ArrowRight":var P=e.state.inputSuggestion||e.state.ddItemData;if(P&&t.autoComplete.rightKey)return void e.addTags([P],!0);break;case"Tab":var T=t.mode=="select";if(!n||T)return!0;r.preventDefault();case"Enter":if(e.state.dropdown.visible&&!N)return;r.preventDefault(),setTimeout(function(){e.state.dropdown.visible&&!N||e.state.actions.selectOption||!t.addTagOn.includes(r.key.toLowerCase())||e.addTags(n,!0)})}}).catch(function(s){return s})}},onInput:function(r){this.postUpdate();var e=this.settings;if(e.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,r);var t=this.input.normalize.call(this,void 0,{trim:!1}),n=t.length>=e.dropdown.enabled,s={value:t,inputElm:this.DOM.input},c=this.validateTag({value:t});e.mode=="select"&&this.toggleScopeValidation(c),s.isValid=c,this.state.inputText!=t&&(this.input.set.call(this,t,!1),t.search(e.delimiters)!=-1?this.addTags(t)&&this.input.set.call(this):e.dropdown.enabled>=0&&this.dropdown[n?"show":"hide"](t),this.trigger("input",s))},onMixTagsInput:function(r){var e,t,n,s,c,h,d,p,g=this,b=this.settings,v=this.value.length,E=this.getTagElms(),A=document.createDocumentFragment(),N=window.getSelection().getRangeAt(0),P=[].map.call(E,function(T){return yt(T).value});if(r.inputType=="deleteContentBackward"&&Vy()&&this.events.callbacks.onKeydown.call(this,{target:r.target,key:"Backspace"}),Jy(this.getTagElms()),this.value.slice().forEach(function(T){T.readonly&&!P.includes(T.value)&&A.appendChild(g.createTagElem(T))}),A.childNodes.length&&(N.insertNode(A),this.setRangeAtStartEnd(!1,A.lastChild)),E.length!=v)return this.value=[].map.call(this.getTagElms(),function(T){return yt(T)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(h=window.getSelection()).rangeCount>0&&h.anchorNode.nodeType==3){if((N=h.getRangeAt(0).cloneRange()).collapse(!0),N.setStart(h.focusNode,0),n=(e=N.toString().slice(0,N.endOffset)).split(b.pattern).length-1,(t=e.match(b.pattern))&&(s=e.slice(e.lastIndexOf(t[t.length-1]))),s){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:s.match(b.pattern)[0],value:s.replace(b.pattern,"")},this.state.tag.baseOffset=h.baseOffset-this.state.tag.value.length,p=this.state.tag.value.match(b.delimiters))return this.state.tag.value=this.state.tag.value.replace(b.delimiters,""),this.state.tag.delimiters=p[0],this.addTags(this.state.tag.value,b.dropdown.clearOnSelect),void this.dropdown.hide();c=this.state.tag.value.length>=b.dropdown.enabled;try{d=(d=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&d.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(d||n<this.state.mixMode.matchedPatternCount)&&(c=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=n}setTimeout(function(){g.update({withoutChangeEvent:!0}),g.trigger("input",Jt({},g.state.tag,{textContent:g.DOM.input.textContent})),g.state.tag&&g.dropdown[c?"show":"hide"](g.state.tag.value)},10)},onInputIE:function(r){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,r)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(r){r.target==this.DOM.scope||this.DOM.scope.contains(r.target)||(this.toggleFocusClass(!1),this.state.hasFocus=!1,r.target.closest(".tagify__dropdown")&&r.target.closest(".tagify__dropdown").__tagify!=this&&this.dropdown.hide())},onClickScope:function(r){var e=this.settings,t=r.target.closest("."+e.classNames.tag),n=r.target===this.DOM.scope,s=+new Date-this.state.hasFocus;if(n&&e.mode!="select")this.DOM.input.focus();else{if(!r.target.classList.contains(e.classNames.tagX))return t&&!this.state.editing?(this.trigger("click",{tag:t,index:this.getNodeIndex(t),data:yt(t),event:r}),void(e.editTags!==1&&e.editTags.clicks!==1&&e.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,r))):void(r.target==this.DOM.input&&(e.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),s>500||!e.focusable)?this.state.dropdown.visible?this.dropdown.hide():e.dropdown.enabled===0&&e.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):e.mode!="select"||e.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,lI(function(c){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{},p=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(d).filter(function(g){return Object.getOwnPropertyDescriptor(d,g).enumerable}))),p.forEach(function(g){As(c,g,d[g])})}return c}({},r),{target:this.getTagElms()[0]})),!e.userInput&&this.dropdown.show()));this.removeTags(r.target.parentNode)}},onPaste:function(r){var e=this;r.preventDefault();var t,n,s,c=this.settings;if(c.mode=="select"&&c.enforceWhitelist||!c.userInput)return!1;c.readonly||(n=r.clipboardData||window.clipboardData,s=n.getData("Text"),c.hooks.beforePaste(r,{tagify:this,pastedText:s,clipboardData:n}).then(function(h){h===void 0&&(h=s),h&&(e.injectAtCaret(h,window.getSelection().getRangeAt(0)),e.settings.mode=="mix"?e.events.callbacks.onMixTagsInput.call(e,r):e.settings.pasteAsTags?t=e.addTags(e.state.inputText+h,!0):(e.state.inputText=h,e.dropdown.show(h))),e.trigger("paste",{event:r,pastedText:s,clipboardData:n,tagsElems:t})}).catch(function(h){return h}))},onDrop:function(r){r.preventDefault()},onEditTagInput:function(r,e){var t,n=r.closest("."+this.settings.classNames.tag),s=this.getNodeIndex(n),c=yt(n),h=this.input.normalize.call(this,r),d=(As(t={},this.settings.tagTextProp,h),As(t,"__tagId",c.__tagId),t),p=this.validateTag(d);this.editTagChangeDetected(Jt(c,d))||r.originalIsValid!==!0||(p=!0),n.classList.toggle(this.settings.classNames.tagInvalid,p!==!0),c.__isValid=p,n.title=p===!0?c.title||c.value:p,h.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=h),this.dropdown.show(h)),this.trigger("edit:input",{tag:n,index:s,data:Jt({},this.value[s],{newValue:h}),event:e})},onEditTagPaste:function(r,e){var t=(e.clipboardData||window.clipboardData).getData("Text");e.preventDefault();var n=Xy(t);this.setRangeAtStartEnd(!1,n)},onEditTagClick:function(r,e){this.events.callbacks.onClickScope.call(this,e)},onEditTagFocus:function(r){this.state.editing={scope:r,input:r.querySelector("[contenteditable]")}},onEditTagBlur:function(r,e){var t=Ns.call(this,e.relatedTarget);if(this.settings.mode=="select"&&t&&e.relatedTarget.contains(e.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(r))){var n,s,c,h=this.settings,d=r.closest("."+h.classNames.tag),p=yt(d),g=this.input.normalize.call(this,r),b=(As(n={},h.tagTextProp,g),As(n,"__tagId",p.__tagId),n),v=p.__originalData,E=this.editTagChangeDetected(Jt(p,b)),A=this.validateTag(b);if(g)if(E){var N;if(s=this.hasMaxTags(),c=Jt({},v,(As(N={},h.tagTextProp,this.trim(g)),As(N,"__isValid",A),N)),h.transformTag.call(this,c,v),(A=(!s||v.__isValid===!0)&&this.validateTag(c))!==!0){if(this.trigger("invalid",{data:c,tag:d,message:A}),h.editTags.keepInvalid)return;h.keepInvalidTags?c.__isValid=A:c=v}else h.keepInvalidTags&&(delete c.title,delete c["aria-invalid"],delete c.class);this.onEditTagDone(d,c)}else this.onEditTagDone(d,v);else this.onEditTagDone(d)}},onEditTagkeydown:function(r,e){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:r}),r.key){case"Esc":case"Escape":this.state.editing=!1,e.__tagifyTagData.__originalData.value?e.parentNode.replaceChild(e.__tagifyTagData.__originalHTML,e):e.remove();break;case"Enter":case"Tab":r.preventDefault(),setTimeout(function(){return r.target.blur()},0)}},onDoubleClickScope:function(r){var e,t,n=r.target.closest("."+this.settings.classNames.tag),s=yt(n),c=this.settings;n&&s.editable!==!1&&(e=n.classList.contains(this.settings.classNames.tagEditing),t=n.hasAttribute("readonly"),c.readonly||e||t||!this.settings.editTags||!c.userInput||(this.events.callbacks.onEditTagFocus.call(this,n),this.editTag(n)),this.toggleFocusClass(!0),c.mode!="select"&&this.trigger("dblclick",{tag:n,index:this.getNodeIndex(n),data:yt(n)}))},onInputDOMChange:function(r){var e=this;r.forEach(function(n){n.addedNodes.forEach(function(s){if(s.outerHTML=="<div><br></div>")s.replaceWith(document.createElement("br"));else if(s.nodeType==1&&s.querySelector(e.settings.classNames.tagSelector)){var c,h=document.createTextNode("");s.childNodes[0].nodeType==3&&s.previousSibling.nodeName!="BR"&&(h=document.createTextNode(`
`)),(c=s).replaceWith.apply(c,gp([h].concat(gp(gp(s.childNodes).slice(0,-1))))),$i(h)}else if(Ns.call(e,s)){var d;if(((d=s.previousSibling)===null||d===void 0?void 0:d.nodeType)!=3||s.previousSibling.textContent||s.previousSibling.remove(),s.previousSibling&&s.previousSibling.nodeName=="BR"){s.previousSibling.replaceWith(`
\u200B`);for(var p=s.nextSibling,g="";p;)g+=p.textContent,p=p.nextSibling;g.trim()&&$i(s.previousSibling)}else s.previousSibling&&!yt(s.previousSibling)||s.before("\u200B")}}),n.removedNodes.forEach(function(s){s&&s.nodeName=="BR"&&Ns.call(e,t)&&(e.removeTags(t),e.fixFirefoxLastTagNoCaret())})});var t=this.DOM.input.lastChild;t&&t.nodeValue==""&&t.remove(),t&&t.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function bp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}a(bp,"X");function wp(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}a(wp,"J");function ci(r,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):r instanceof e}a(ci,"G");function Zy(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){wp(r,s,t[s])})}return r}a(Zy,"$");function vp(r){return function(e){if(Array.isArray(e))return bp(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return bp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bp(e,t)}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a(vp,"Q");function il(r,e){if(!r){Wi.warn("input element not found",r);var t=new Proxy(this,{get:function(){return function(){return t}}});return t}if(r.__tagify)return Wi.warn("input element is already Tagified - Same instance is returned.",r),r.__tagify;var n;Jt(this,function(s){var c=document.createTextNode(""),h={};function d(p,g,b){b&&g.split(/\s+/g).forEach(function(v){return c[p+"EventListener"].call(c,v,b)})}return a(d,"s"),{removeAllCustomListeners:function(){Object.entries(h).forEach(function(p){var g=aI(p,2),b=g[0];g[1].forEach(function(v){return d("remove",b,v)})}),h={}},off:function(p,g){return p&&(g?d("remove",p,g):p.split(/\s+/g).forEach(function(b){var v;(v=h[b])===null||v===void 0||v.forEach(function(E){return d("remove",b,E)}),delete h[b]})),this},on:function(p,g){return g&&typeof g=="function"&&(p.split(/\s+/g).forEach(function(b){Array.isArray(h[b])?h[b].push(g):h[b]=[g]}),d("add",p,g)),this},trigger:function(p,g,b){var v;if(b=b||{cloneData:!0},p)if(s.settings.isJQueryPlugin)p=="remove"&&(p="removeTag"),jQuery(s.DOM.originalInput).triggerHandler(p,[g]);else{try{var E=typeof g=="object"?g:{value:g};if((E=b.cloneData?Jt({},E):E).tagify=this,g.event&&(E.event=this.cloneEvent(g.event)),Gy(g,Object))for(var A in g)Gy(g[A],HTMLElement)&&(E[A]=g[A]);v=new CustomEvent(p,{detail:E})}catch(N){Wi.warn(N)}c.dispatchEvent(v)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(n=e.id,function(s){var c,h="/"+s;if(localStorage.getItem(rl+n+"/v",1)==1)try{c=JSON.parse(localStorage[rl+n+h])}catch{}return c}),this.setPersistedData=function(s){return s?(localStorage.setItem(rl+s+"/v",1),function(c,h){var d="/"+h,p=JSON.stringify(c);c&&h&&(localStorage.setItem(rl+s+d,p),dispatchEvent(new Event("storage")))}):function(){}}(e.id),this.clearPersistedData=function(s){return function(c){var h=rl+"/"+s+"/";if(c)localStorage.removeItem(h+c);else for(var d in localStorage)d.includes(h)&&localStorage.removeItem(d)}}(e.id),this.applySettings(r,e),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(r),nI.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),r.autofocus&&this.DOM.input.focus(),r.__tagify=this}a(il,"Y");il.prototype={_dropdown:iI,placeCaretAfterNode:$i,getSetTagData:yt,helpers:{sameStr:nl,removeCollectionProp:By,omit:yp,isObject:Pn,parseHTML:dp,escapeHTML:Ss,extend:Jt,concatWithoutDups:Uy,getUID:zy,isNodeTag:Ns},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(r){return this.settings.trim&&r&&typeof r=="string"?r.trim():r},parseHTML:dp,templates:oI,parseTemplate:function(r,e){return dp((r=this.settings.templates[r]||r).apply(this,e))},set whitelist(r){var e=r&&Array.isArray(r);this.settings.whitelist=e?r:[],this.setPersistedData(e?r:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(r){this.settings.userInput=!!r,this.setContentEditable(!!r)},get userInput(){return this.settings.userInput},generateClassSelectors:function(r){var e=a(function(n){var s=n;Object.defineProperty(r,s+"Selector",{get:function(){return"."+this[s].split(" ")[0]}})},"e");for(var t in r)e(t)},applySettings:function(r,e){var t,n;fp.templates=this.templates;var s=Jt({},fp,e.mode=="mix"?{dropdown:{position:"text"}}:{}),c=this.settings=Jt({},s,e);if(c.disabled=r.hasAttribute("disabled"),c.readonly=c.readonly||r.hasAttribute("readonly"),c.placeholder=Ss(r.getAttribute("placeholder")||c.placeholder||""),c.required=r.hasAttribute("required"),this.generateClassSelectors(c.classNames),c.dropdown.includeSelectedTags===void 0&&(c.dropdown.includeSelectedTags=c.duplicates),this.isIE&&(c.autoComplete=!1),["whitelist","blacklist"].forEach(function(d){var p=r.getAttribute("data-"+d);p&&ci(p=p.split(c.delimiters),Array)&&(c[d]=p)}),"autoComplete"in e&&!Pn(e.autoComplete)&&(c.autoComplete=fp.autoComplete,c.autoComplete.enabled=e.autoComplete),c.mode=="mix"&&(c.pattern=c.pattern||/@/,c.autoComplete.rightKey=!0,c.delimiters=e.delimiters||null,c.tagTextProp&&!c.dropdown.searchKeys.includes(c.tagTextProp)&&c.dropdown.searchKeys.push(c.tagTextProp)),r.pattern)try{c.pattern=new RegExp(r.pattern)}catch{}if(c.delimiters){c._delimiters=c.delimiters;try{c.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}c.disabled&&(c.userInput=!1),this.TEXTS=Zy({},sI,c.texts||{}),(c.mode!="select"||!((t=e.dropdown)===null||t===void 0)&&t.enabled)&&c.userInput||(c.dropdown.enabled=0),c.dropdown.appendTarget=((n=e.dropdown)===null||n===void 0?void 0:n.appendTarget)||document.body;var h=this.getPersistedData("whitelist");Array.isArray(h)&&(this.whitelist=Array.isArray(c.whitelist)?Uy(c.whitelist,h):h)},getAttributes:function(r){var e,t=this.getCustomAttributes(r),n="";for(e in t)n+=" "+e+(r[e]!==void 0?'="'.concat(t[e],'"'):"");return n},getCustomAttributes:function(r){if(!Pn(r))return"";var e,t={};for(e in r)e.slice(0,2)!="__"&&e!="class"&&r.hasOwnProperty(e)&&r[e]!==void 0&&(t[e]=Ss(r[e]));return t},setStateSelection:function(){var r=window.getSelection(),e={anchorOffset:r.anchorOffset,anchorNode:r.anchorNode,range:r.getRangeAt&&r.rangeCount&&r.getRangeAt(0)};return this.state.selection=e,e},getCSSVars:function(){var r,e,t,n=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(r=function(s){if(!s)return{};var c=(s=s.trim().split(" ")[0]).split(/\d+/g).filter(function(h){return h}).pop().trim();return{value:+s.split(c).filter(function(h){return h})[0].trim(),unit:c}}((t="tag-hide-transition",n.getPropertyValue("--"+t))),e=r.value,r.unit=="s"?1e3*e:e)}},build:function(r){var e=this.DOM,t=r.closest("label");this.settings.mixMode.integrated?(e.originalInput=null,e.scope=r,e.input=r):(e.originalInput=r,e.originalInput_tabIndex=r.tabIndex,e.scope=this.parseTemplate("wrapper",[r,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),r.parentNode.insertBefore(e.scope,r),r.tabIndex=-1),t&&t.setAttribute("for","")},destroy:function(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(r){var e,t=this.settings;if(this.state.blockChangeEvent=!0,r===void 0){var n=this.getPersistedData("value");r=n&&!this.DOM.originalInput.value?n:t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),r)if(t.mode=="mix")this.parseMixTags(r),(e=this.DOM.input.lastChild)&&e.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{ci(JSON.parse(r),Array)&&(r=JSON.parse(r))}catch{}this.addTags(r,!0).forEach(function(s){return s&&s.classList.add(t.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=t.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(r){var e={};for(var t in r)t!="path"&&(e[t]=r[t]);return e},loading:function(r){return this.state.isLoading=r,this.DOM.scope.classList[r?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(r,e){return r&&r.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(r,e){typeof r=="string"&&this.DOM.scope.classList.toggle(r,e)},toggleScopeValidation:function(r){var e=r===!0||r===void 0;!this.settings.required&&r&&r===this.TEXTS.empty&&(e=!0),this.toggleClass(this.settings.classNames.tagInvalid,!e),this.DOM.scope.title=e?"":r},toggleFocusClass:function(r){this.toggleClass(this.settings.classNames.focus,!!r)},setPlaceholder:function(r){var e=this;["data","aria"].forEach(function(t){return e.DOM.input.setAttribute("".concat(t,"-placeholder"),r)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var r=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==r.value,t=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=r.value,t.simulated=!0,r._valueTracker&&r._valueTracker.setValue(Math.random()),r.dispatchEvent(t),this.trigger("change",this.state.lastOriginalValueReported),r.value=this.state.lastOriginalValueReported)}},events:cI,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(r,e){if(e){r=typeof r=="number"?r:!!r,e=e.lastChild||e;var t=document.getSelection();if(ci(t.focusNode,Element)&&!this.DOM.input.contains(t.focusNode))return!0;try{t.rangeCount>=1&&["Start","End"].forEach(function(n){return t.getRangeAt(0)["set"+n](e,r||e.length)})}catch(n){console.warn(n)}}},insertAfterTag:function(r,e){if(e=e||this.settings.mixMode.insertAfterTag,r&&r.parentNode&&e)return e=typeof e=="string"?document.createTextNode(e):e,r.parentNode.insertBefore(e,r.nextSibling),e},editTagChangeDetected:function(r){var e=r.__originalData;for(var t in e)if(!this.dataProps.includes(t)&&r[t]!=e[t])return!0;return!1},getTagTextNode:function(r){return r.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(r,e){this.getTagTextNode(r).innerHTML=Ss(e)},editTag:function(r,e){var t=this;r=r||this.getLastTag(),e=e||{};var n=this.settings,s=this.getTagTextNode(r),c=this.getNodeIndex(r),h=yt(r),d=this.events.callbacks,p=!0,g=n.mode=="select";if(!g&&this.dropdown.hide(),s){if(!ci(h,Object)||!("editable"in h)||h.editable)return h=yt(r,{__originalData:Jt({},h),__originalHTML:r.cloneNode(!0)}),yt(h.__originalHTML,h.__originalData),s.setAttribute("contenteditable",!0),r.classList.add(n.classNames.tagEditing),s.addEventListener("click",d.onEditTagClick.bind(this,r)),s.addEventListener("blur",d.onEditTagBlur.bind(this,this.getTagTextNode(r))),s.addEventListener("input",d.onEditTagInput.bind(this,s)),s.addEventListener("paste",d.onEditTagPaste.bind(this,s)),s.addEventListener("keydown",function(b){return d.onEditTagkeydown.call(t,b,r)}),s.addEventListener("compositionstart",d.onCompositionStart.bind(this)),s.addEventListener("compositionend",d.onCompositionEnd.bind(this)),e.skipValidation||(p=this.editTagToggleValidity(r)),s.originalIsValid=p,this.trigger("edit:start",{tag:r,index:c,data:h,isValid:p}),s.focus(),!g&&this.setRangeAtStartEnd(!1,s),n.dropdown.enabled===0&&!g&&this.dropdown.show(),this.state.hasFocus=!0,this}else Wi.warn("Cannot find element in Tag template: .",n.classNames.tagTextSelector)},editTagToggleValidity:function(r,e){var t;if(e=e||yt(r))return(t=!("__isValid"in e)||e.__isValid===!0)||this.removeTagsFromValue(r),this.update(),r.classList.toggle(this.settings.classNames.tagNotAllowed,!t),e.__isValid=t,e.__isValid;Wi.warn("tag has no data: ",r,e)},onEditTagDone:function(r,e){r=r||this.state.editing.scope,e=e||{};var t,n,s={tag:r,index:this.getNodeIndex(r),previousData:yt(r),data:e},c=this.settings;this.trigger("edit:beforeUpdate",s,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,r&&((n=e[c.tagTextProp])!==void 0?!((t=(n+="").trim)===null||t===void 0)&&t.call(n):!(c.tagTextProp in e)&&e.value)?(r=this.replaceTag(r,e),this.editTagToggleValidity(r,e),c.a11y.focusableTags?r.focus():c.mode!="select"&&$i(r)):r&&this.removeTags(r),this.trigger("edit:updated",s),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(r,e){e&&e.value!==""&&e.value!==void 0||(e=r.__tagifyTagData),e.__isValid&&e.__isValid!=1&&Jt(e,this.getInvalidTagAttrs(e,e.__isValid));var t=this.createTagElem(e);return r.parentNode.replaceChild(t,r),this.updateValueByDOMTags(),t},updateValueByDOMTags:function(){var r=this;this.value.length=0,[].forEach.call(this.getTagElms(),function(e){e.classList.contains(r.settings.classNames.tagNotAllowed.split(" ")[0])||r.value.push(yt(e))}),this.update()},injectAtCaret:function(r,e){var t;if(!(e=e||((t=this.state.selection)===null||t===void 0?void 0:t.range))&&r)return this.appendMixTags(r),this;var n=Xy(r,e);return this.setRangeAtStartEnd(!1,n),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.settings.dropdown.closeOnSelect;this.state.inputText=r,e&&(this.DOM.input.innerHTML=Ss(""+r)),!r&&t&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var r=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!r),r},normalize:function(r,e){var t=r||this.DOM.input,n=[];t.childNodes.forEach(function(s){return s.nodeType==3&&n.push(s.nodeValue)}),n=n.join(`
`);try{n=n.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return n=n.replace(/\s/g," "),e?.trim?this.trim(n):n},autocomplete:{suggest:function(r){if(this.settings.autoComplete.enabled){typeof(r=r||{value:""})!="object"&&(r={value:r});var e=this.dropdown.getMappedValue(r);if(typeof e!="number"){var t=this.state.inputText.toLowerCase(),n=e.substr(0,this.state.inputText.length).toLowerCase(),s=e.substring(this.state.inputText.length);e&&this.state.inputText&&n==t?(this.DOM.input.setAttribute("data-suggest",s),this.state.inputSuggestion=r):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(r){var e=this.DOM.input.getAttribute("data-suggest"),t=r||(e?this.state.inputText+e:null);return!!t&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+t)):(this.input.set.call(this,t),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(r){return this.value.findIndex(function(e){return e.__tagId==(r||{}).__tagId})},getNodeIndex:function(r){var e=0;if(r)for(;r=r.previousElementSibling;)e++;return e},getTagElms:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n="."+vp(this.settings.classNames.tag.split(" ")).concat(vp(e)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(n))},getLastTag:function(){var r=this.settings.classNames,e=this.DOM.scope.querySelectorAll("".concat(r.tagSelector,":not(.").concat(r.tagHide,"):not([readonly])"));return e[e.length-1]},isTagDuplicate:function(r,e,t){var n=0;if(this.settings.mode=="select")return!1;var s=!0,c=!1,h=void 0;try{for(var d,p=this.value[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var g=d.value;nl(this.trim(""+r),g.value,e)&&t!=g.__tagId&&n++}}catch(b){c=!0,h=b}finally{try{s||p.return==null||p.return()}finally{if(c)throw h}}return n},getTagIndexByValue:function(r){var e=this,t=[],n=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(s,c){s.__tagifyTagData&&nl(e.trim(s.__tagifyTagData.value),r,n)&&t.push(c)}),t},getTagElmByValue:function(r){var e=this.getTagIndexByValue(r)[0];return this.getTagElms()[e]},flashTag:function(r){var e=this;r&&(r.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){r.classList.remove(e.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(r){return r=this.trim(r.toLowerCase()),this.settings.blacklist.filter(function(e){return(""+e).toLowerCase()==r}).length},isTagWhitelisted:function(r){return!!this.getWhitelistItem(r)},getWhitelistItem:function(r,e,t){e=e||"value";var n,s=this.settings;return(t=t||s.whitelist).some(function(c){var h=typeof c=="object"?c[e]||c.value:c;if(nl(h,r,s.dropdown.caseSensitive,s.trim))return n=typeof c=="object"?c:{value:c},!0}),n||e!="value"||s.tagTextProp=="value"||(n=this.getWhitelistItem(r,s.tagTextProp,t)),n},validateTag:function(r){var e=this.settings,t="value"in r?"value":e.tagTextProp,n=this.trim(r[t]+"");return(r[t]+"").trim()?e.mode!="mix"&&e.pattern&&ci(e.pattern,RegExp)&&!e.pattern.test(n)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(n,e.dropdown.caseSensitive,r.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(n)||e.enforceWhitelist&&!this.isTagWhitelisted(n)?this.TEXTS.notAllowed:!e.validate||e.validate(r):this.TEXTS.empty},getInvalidTagAttrs:function(r,e){return{"aria-invalid":!0,class:"".concat(r.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:e}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(r,e){var t=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),t[e||"readonly"]=r,this.DOM.scope[(r?"set":"remove")+"Attribute"](e||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!r)},setContentEditable:function(r){this.DOM.input.contentEditable=r,this.DOM.input.tabIndex=r?0:-1},setDisabled:function(r){this.setReadonly(r,"disabled")},normalizeTags:function(r){var e=this,t=this.settings,n=t.whitelist,s=t.delimiters,c=t.mode,h=t.tagTextProp,d=[],p=!!n&&ci(n[0],Object),g=Array.isArray(r),b=g&&r[0].value,v=a(function(E){return(E+"").split(s).reduce(function(A,N){var P,T=e.trim(N);return T&&A.push((wp(P={},h,T),wp(P,"value",T),P)),A},[])},"h");if(typeof r=="number"&&(r=r.toString()),typeof r=="string"){if(!r.trim())return[];r=v(r)}else g&&(r=r.reduce(function(E,A){if(Pn(A)){var N=Jt({},A);N[h]=e.trim(N[h]),N[h]&&E.push(N)}else if(A){var P;(P=E).push.apply(P,vp(v(A)))}return E},[]));return p&&!b&&(r.forEach(function(E){var A=d.map(function(T){return T.value}),N=e.dropdown.filterListItems.call(e,E[h],{exact:!0});e.settings.duplicates||(N=N.filter(function(T){return!A.includes(T.value)}));var P=N.length>1?e.getWhitelistItem(E[h],h,N):N[0];P&&ci(P,Object)?d.push(P):c!="mix"&&(E.value==null&&(E.value=E[h]),d.push(E))}),d.length&&(r=d)),r},parseMixTags:function(r){var e=this,t=this.settings,n=t.mixTagsInterpolator,s=t.duplicates,c=t.transformTag,h=t.enforceWhitelist,d=t.maxTags,p=t.tagTextProp,g=[];r=r.split(n[0]).map(function(v,E){var A,N,P,T=v.split(n[1]),O=T[0],j=g.length==d;try{if(O==+O)throw Error;N=JSON.parse(O)}catch{N=e.normalizeTags(O)[0]||{value:O}}if(c.call(e,N),j||!(T.length>1)||h&&!e.isTagWhitelisted(N.value)||!s&&e.isTagDuplicate(N.value)){if(v)return E?n[0]+v:v}else N[A=N[p]?p:"value"]=e.trim(N[A]),P=e.createTagElem(N),g.push(N),P.classList.add(e.settings.classNames.tagNoAnimation),T[0]=P.outerHTML,e.value.push(N);return T.join("")}).join(""),this.DOM.input.innerHTML=r,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var b=this.getTagElms();return b.forEach(function(v,E){return yt(v,g[E])}),this.update({withoutChangeEvent:!0}),Jy(b,this.state.hasFocus),r},replaceTextWithNode:function(r,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var t,n,s=this.state.selection||window.getSelection(),c=s.anchorNode,h=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return c.splitText(s.anchorOffset-h),(t=c.nodeValue.lastIndexOf(e))==-1||(n=c.splitText(t),r&&c.parentNode.replaceChild(r,n)),!0}},prepareNewTagNode:function(r,e){e=e||{};var t=this.settings,n=[],s={},c=Object.assign({},r,{value:r.value+""});if(r=Object.assign({},c),t.transformTag.call(this,r),r.__isValid=this.hasMaxTags()||this.validateTag(r),r.__isValid!==!0){if(e.skipInvalid)return;if(Jt(s,this.getInvalidTagAttrs(r,r.__isValid),{__preInvalidData:c}),r.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(r.value)),!t.createInvalidTags)return void n.push(r.value)}return"readonly"in r&&(r.readonly?s["aria-readonly"]=!0:delete r.readonly),{tagElm:this.createTagElem(r,s),tagData:r,aggregatedInvalidInput:n}},postProcessNewTagNode:function(r,e){var t=this,n=this.settings,s=e.__isValid;s&&s===!0?(this.value.push(e),this.trigger("add",{tag:r,index:this.value.length-1,data:e})):(this.trigger("invalid",{data:e,index:this.value.length,tag:r,message:s}),n.keepInvalidTags||setTimeout(function(){return t.removeTags(r,!0)},1e3)),this.dropdown.position()},selectTag:function(r,e){var t=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(e.value)){this.state.actions.selectOption&&setTimeout(function(){return t.setRangeAtStartEnd(!1,t.DOM.input)});var n=this.getLastTag();return n?this.replaceTag(n,e):this.appendTag(r),this.value[0]=e,this.update(),this.trigger("add",{tag:r,data:e}),[r]}},addEmptyTag:function(r){var e=Jt({value:""},r||{}),t=this.createTagElem(e);yt(t,e),this.appendTag(t),this.editTag(t,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(r,e,t){var n=this,s=[],c=this.settings,h=[],d=document.createDocumentFragment();if(!r||r.length==0)return s;switch(r=this.normalizeTags(r),c.mode){case"mix":return this.addMixTags(r);case"select":e=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),r.forEach(function(p){var g=n.prepareNewTagNode(p,{skipInvalid:t||c.skipInvalid});if(g){var b=g.tagElm;if(p=g.tagData,h=g.aggregatedInvalidInput,s.push(b),c.mode=="select")return n.selectTag(b,p);d.appendChild(b),n.postProcessNewTagNode(b,p)}}),this.appendTag(d),this.update(),r.length&&e&&(this.input.set.call(this,c.createInvalidTags?"":h.join(c._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),c.dropdown.enabled&&this.dropdown.refilter(),s},addMixTags:function(r){var e=this;if((r=this.normalizeTags(r))[0].prefix||this.state.tag)return this.prefixedTextToTag(r[0]);var t=document.createDocumentFragment();return r.forEach(function(n){var s=e.prepareNewTagNode(n);t.appendChild(s.tagElm),e.insertAfterTag(s.tagElm),e.postProcessNewTagNode(s.tagElm,s.tagData)}),this.appendMixTags(t),t.children},appendMixTags:function(r){var e=!!this.state.selection;e?this.injectAtCaret(r):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(r),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(r){var e,t,n,s=this,c=this.settings,h=(e=this.state.tag)===null||e===void 0?void 0:e.delimiters;if(r.prefix=r.prefix||this.state.tag?this.state.tag.prefix:(c.pattern.source||c.pattern)[0],n=this.prepareNewTagNode(r),t=n.tagElm,this.replaceTextWithNode(t)||this.DOM.input.appendChild(t),setTimeout(function(){return t.classList.add(s.settings.classNames.tagNoAnimation)},300),this.value.push(n.tagData),this.update(),!h){var d=this.insertAfterTag(t)||t;setTimeout($i,0,d)}return this.state.tag=null,this.postProcessNewTagNode(t,n.tagData),t},appendTag:function(r){var e=this.DOM,t=e.input;e.scope.insertBefore(r,t)},createTagElem:function(r,e){r.__tagId=zy();var t,n=Jt({},r,Zy({value:Ss(r.value+"")},e));return function(s){for(var c,h=document.createNodeIterator(s,NodeFilter.SHOW_TEXT,null,!1);c=h.nextNode();)c.textContent.trim()||c.parentNode.removeChild(c)}(t=this.parseTemplate("tag",[n,this])),yt(t,r),t},reCheckInvalidTags:function(){var r=this,e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(function(t,n){var s=yt(t),c=r.hasMaxTags(),h=r.validateTag(s),d=h===!0&&!c;if(e.mode=="select"&&r.toggleScopeValidation(h),d)return s=s.__preInvalidData?s.__preInvalidData:{value:s.value},r.replaceTag(t,s);t.title=c||h})},removeTags:function(r,e,t){var n,s=this,c=this.settings;if(r=r&&ci(r,HTMLElement)?[r]:ci(r,Array)?r:r?[r]:[this.getLastTag()].filter(function(h){return h}),n=r.reduce(function(h,d){d&&typeof d=="string"&&(d=s.getTagElmByValue(d));var p=yt(d);return d&&p&&!p.readonly&&h.push({node:d,idx:s.getTagIdx(p),data:yt(d,{__removed:!0})}),h},[]),t=typeof t=="number"?t:this.CSSVars.tagHideTransition,c.mode=="select"&&(t=0,this.input.set.call(this)),n.length==1&&c.mode!="select"&&n[0].node.classList.contains(c.classNames.tagNotAllowed)&&(e=!0),n.length)return c.hooks.beforeRemoveTag(n,{tagify:this}).then(function(){var h=a(function(d){d.node.parentNode&&(d.node.parentNode.removeChild(d.node),e?c.keepInvalidTags&&this.trigger("remove",{tag:d.node,index:d.idx}):(this.trigger("remove",{tag:d.node,index:d.idx,data:d.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),c.keepInvalidTags&&this.reCheckInvalidTags()))},"t");t&&t>10&&n.length==1?function(d){d.node.style.width=parseFloat(window.getComputedStyle(d.node).width)+"px",document.body.clientTop,d.node.classList.add(c.classNames.tagHide),setTimeout(h.bind(this),t,d)}.call(s,n[0]):n.forEach(h.bind(s)),e||(s.removeTagsFromValue(n.map(function(d){return d.node})),s.update(),c.mode=="select"&&c.userInput&&s.setContentEditable(!0))}).catch(function(h){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(r){return r.remove()})},removeTagsFromValue:function(r){var e=this;(r=Array.isArray(r)?r:[r]).forEach(function(t){var n=yt(t),s=e.getTagIdx(n);s>-1&&e.value.splice(s,1)})},removeAllTags:function(r){var e=this;r=r||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){e.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(r)},postUpdate:function(){this.state.blockChangeEvent=!1;var r,e,t=this.settings,n=t.classNames,s=t.mode=="mix"?t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(n.hasMaxTags,this.value.length>=t.maxTags),this.toggleClass(n.hasNoTags,!this.value.length),this.toggleClass(n.empty,!s),t.mode=="select"&&this.toggleScopeValidation((e=this.value)===null||e===void 0||(r=e[0])===null||r===void 0?void 0:r.__isValid)},setOriginalInputValue:function(r){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=r,e.tagifyValue=e.value,this.setPersistedData(r,"value"))},update:function(r){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var e=this.getInputValue();this.setOriginalInputValue(e),this.settings.onChangeAfterBlur&&(r||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var r=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(r):r.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(r):JSON.stringify(r):""},getCleanValue:function(r){return By(r||this.value,this.dataProps)},getMixedTagsAsString:function(){var r="",e=this,t=this.settings,n=t.originalInputValueFormat||JSON.stringify,s=t.mixTagsInterpolator;return a(function c(h){h.childNodes.forEach(function(d){if(d.nodeType==1){var p=yt(d);if(d.tagName=="BR"&&(r+=`\r
`),p&&Ns.call(e,d)){if(p.__removed)return;r+=s[0]+n(yp(p,e.dataProps))+s[1]}else d.getAttribute("style")||["B","I","U"].includes(d.tagName)?r+=d.textContent:d.tagName!="DIV"&&d.tagName!="P"||(r+=`\r
`,c(d))}else r+=d.textContent})},"i")(this.DOM.input),r}},il.prototype.removeTag=il.prototype.removeTags;var sl=class extends lt{static{a(this,"TagFieldController")}connect(){this.tagify=new il(this.querySelector("textarea"),this.opticons())}opticons(){let e=JSON.parse(this.dataset.tagify||"{}");return Object.assign({originalInputValueFormat:this.mapValue},e)}mapValue(e){return e.map(t=>t.value).join(",")}};cr.register(la);cr.register(ca);cr.register(ua);cr.register(ha);cr.register(da);cr.register(fa);cr.register(pa);cr.register(va);cr.register(ya);cr.register(wa);cr.register(Qa);cr.register(el);cr.register(tl);cr.register(sl);cr.start();})();
/*! Bundled license information:

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.4
  Copyright  2024 37signals LLC
   *)

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
