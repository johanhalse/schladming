(()=>{var dB=Object.create;var Om=Object.defineProperty;var fB=Object.getOwnPropertyDescriptor;var hB=Object.getOwnPropertyNames;var mB=Object.getPrototypeOf,pB=Object.prototype.hasOwnProperty;var s=(n,e)=>Om(n,"name",{value:e,configurable:!0});var yo=(n,e)=>()=>(n&&(e=n(n=0)),e);var Dn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Ev=(n,e)=>{for(var t in e)Om(n,t,{get:e[t],enumerable:!0})},gB=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hB(e))!pB.call(n,i)&&i!==t&&Om(n,i,{get:()=>e[i],enumerable:!(r=fB(e,i))||r.enumerable});return n};var Qn=(n,e,t)=>(t=n!=null?dB(mB(n)):{},gB(e||!n||!n.__esModule?Om(t,"default",{value:n,enumerable:!0}):t,n));var Da,Vm=yo(()=>{Da={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var pn,Qc=yo(()=>{Vm();pn={log(...n){this.enabled&&(n.push(Date.now()),Da.logger.log("[ActionCable]",...n))}}});var nf,Km,rf,Wm,r0=yo(()=>{Qc();nf=s(()=>new Date().getTime(),"now"),Km=s(n=>(nf()-n)/1e3,"secondsSince"),rf=class{static{s(this,"ConnectionMonitor")}constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=nf(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),pn.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=nf(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),pn.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=nf()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,pn.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=nf(),pn.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,r=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),a=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*r*(1+a)}reconnectIfStale(){this.connectionIsStale()&&(pn.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Km(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?pn.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Km(this.disconnectedAt)} s`):(pn.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Km(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Km(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(pn.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};rf.staleThreshold=6;rf.reconnectionBackoffRate=.15;Wm=rf});var sf,i0=yo(()=>{sf={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var of,s0,T3,pS,af,Gm,o0=yo(()=>{Vm();r0();i0();Qc();({message_types:of,protocols:s0}=sf),T3=s0.slice(0,s0.length-1),pS=[].indexOf,af=class{static{s(this,"Connection")}constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Wm(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return pn.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...s0,...this.consumer.subprotocols||[]];return pn.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new Da.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(pn.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){pn.log("Failed to reopen WebSocket",e)}finally{pn.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return pS.call(T3,this.getProtocol())>=0}isState(...e){return pS.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in Da.WebSocket)if(Da.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};af.reopenDelay=500;af.prototype.events={message(n){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:r,reconnect:i,type:a}=JSON.parse(n.data);switch(a){case of.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case of.disconnect:return pn.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:i});case of.ping:return this.monitor.recordPing();case of.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case of.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(pn.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return pn.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(n){if(pn.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){pn.log("WebSocket onerror event")}};Gm=af});var k3,Wl,a0=yo(()=>{k3=s(function(n,e){if(e!=null)for(let t in e){let r=e[t];n[t]=r}return n},"extend"),Wl=class{static{s(this,"Subscription")}constructor(e,t={},r){this.consumer=e,this.identifier=JSON.stringify(t),k3(this,r)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var l0,Zm,c0=yo(()=>{Qc();l0=class{static{s(this,"SubscriptionGuarantor")}constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(pn.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):pn.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){pn.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{pn.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},Zm=l0});var Gl,u0=yo(()=>{a0();c0();Qc();Gl=class{static{s(this,"Subscriptions")}constructor(e){this.consumer=e,this.guarantor=new Zm(this),this.subscriptions=[]}create(e,t){let r=e,i=typeof r=="object"?r:{channel:r},a=new Wl(this.consumer,i,t);return this.add(a)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(r=>this.notify(r,e,...t))}notify(e,t,...r){let i;return typeof e=="string"?i=this.findAll(e):i=[e],i.map(a=>typeof a[t]=="function"?a[t](...r):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){pn.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:r}=e;return this.consumer.send({command:t,identifier:r})}}});function d0(n){if(typeof n=="function"&&(n=n()),n&&!/^wss?:/i.test(n)){let e=document.createElement("a");return e.href=n,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return n}var Jc,gS=yo(()=>{o0();u0();Jc=class{static{s(this,"Consumer")}constructor(e){this._url=e,this.subscriptions=new Gl(this),this.connection=new Gm(this),this.subprotocols=[]}get url(){return d0(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}};s(d0,"createWebSocketURL")});var bS={};Ev(bS,{Connection:()=>Gm,ConnectionMonitor:()=>Wm,Consumer:()=>Jc,INTERNAL:()=>sf,Subscription:()=>Wl,SubscriptionGuarantor:()=>Zm,Subscriptions:()=>Gl,adapters:()=>Da,createConsumer:()=>O3,createWebSocketURL:()=>d0,getConfig:()=>yS,logger:()=>pn});function O3(n=yS("url")||sf.default_mount_path){return new Jc(n)}function yS(n){let e=document.head.querySelector(`meta[name='action-cable-${n}']`);if(e)return e.getAttribute("content")}var vS=yo(()=>{o0();r0();gS();i0();a0();u0();c0();Vm();Qc();s(O3,"createConsumer");s(yS,"getConfig")});var N0=Dn((AY,O0)=>{function oC(n,e=100,t={}){if(typeof n!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof n}\`.`);if(e<0)throw new RangeError("`wait` must not be negative.");let{immediate:r}=typeof t=="boolean"?{immediate:t}:t,i,a,l,d,m;function g(){let _=Date.now()-d;if(_<e&&_>=0)l=setTimeout(g,e-_);else if(l=void 0,!r){let E=i,C=a;i=void 0,a=void 0,m=n.apply(E,C)}}s(g,"later");let v=s(function(..._){if(i&&this!==i)throw new Error("Debounced method called with different contexts.");i=this,a=_,d=Date.now();let E=r&&!l;if(l||(l=setTimeout(g,e)),E){let C=i,k=a;i=void 0,a=void 0,m=n.apply(C,k)}return m},"debounced");return v.clear=()=>{l&&(clearTimeout(l),l=void 0)},v.flush=()=>{if(!l)return;let _=i,E=a;i=void 0,a=void 0,m=n.apply(_,E),clearTimeout(l),l=void 0},v}s(oC,"debounce");O0.exports.debounce=oC;O0.exports=oC});var cC=Dn((RY,lC)=>{function R0(n,e,t){var r,i,a,l,d;e==null&&(e=100);function m(){var v=Date.now()-l;v<e&&v>=0?r=setTimeout(m,e-v):(r=null,t||(d=n.apply(a,i),a=i=null))}s(m,"later");var g=s(function(){a=this,i=arguments,l=Date.now();var v=t&&!r;return r||(r=setTimeout(m,e)),v&&(d=n.apply(a,i),a=i=null),d},"debounced");return g.clear=function(){r&&(clearTimeout(r),r=null)},g.flush=function(){r&&(d=n.apply(a,i),a=i=null,clearTimeout(r),r=null)},g}s(R0,"debounce");R0.debounce=R0;lC.exports=R0});var yC=Dn((Np,gC)=>{(function(n,e){typeof Np=="object"&&typeof gC<"u"?e(Np):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Np,function(n){"use strict";var e="1.9.4";function t(o){var u,p,b,A;for(p=1,b=arguments.length;p<b;p++){A=arguments[p];for(u in A)o[u]=A[u]}return o}s(t,"extend");var r=Object.create||function(){function o(){}return s(o,"F"),function(u){return o.prototype=u,new o}}();function i(o,u){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var b=p.call(arguments,2);return function(){return o.apply(u,b.length?b.concat(p.call(arguments)):arguments)}}s(i,"bind");var a=0;function l(o){return"_leaflet_id"in o||(o._leaflet_id=++a),o._leaflet_id}s(l,"stamp");function d(o,u,p){var b,A,R,$;return $=s(function(){b=!1,A&&(R.apply(p,A),A=!1)},"later"),R=s(function(){b?A=arguments:(o.apply(p,arguments),setTimeout($,u),b=!0)},"wrapperFn"),R}s(d,"throttle");function m(o,u,p){var b=u[1],A=u[0],R=b-A;return o===b&&p?o:((o-A)%R+R)%R+A}s(m,"wrapNum");function g(){return!1}s(g,"falseFn");function v(o,u){if(u===!1)return o;var p=Math.pow(10,u===void 0?6:u);return Math.round(o*p)/p}s(v,"formatNum");function _(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}s(_,"trim");function E(o){return _(o).split(/\s+/)}s(E,"splitWords");function C(o,u){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?r(o.options):{});for(var p in u)o.options[p]=u[p];return o.options}s(C,"setOptions");function k(o,u,p){var b=[];for(var A in o)b.push(encodeURIComponent(p?A.toUpperCase():A)+"="+encodeURIComponent(o[A]));return(!u||u.indexOf("?")===-1?"?":"&")+b.join("&")}s(k,"getParamString");var D=/\{ *([\w_ -]+) *\}/g;function O(o,u){return o.replace(D,function(p,b){var A=u[b];if(A===void 0)throw new Error("No value provided for variable "+p);return typeof A=="function"&&(A=A(u)),A})}s(O,"template");var P=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function j(o,u){for(var p=0;p<o.length;p++)if(o[p]===u)return p;return-1}s(j,"indexOf");var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}s(Z,"getPrefixed");var ae=0;function he(o){var u=+new Date,p=Math.max(0,16-(u-ae));return ae=u+p,window.setTimeout(o,p)}s(he,"timeoutDefer");var fe=window.requestAnimationFrame||Z("RequestAnimationFrame")||he,z=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function se(o,u,p){if(p&&fe===he)o.call(u);else return fe.call(window,i(o,u))}s(se,"requestAnimFrame");function Te(o){o&&z.call(window,o)}s(Te,"cancelAnimFrame");var K={__proto__:null,extend:t,create:r,bind:i,get lastId(){return a},stamp:l,throttle:d,wrapNum:m,falseFn:g,formatNum:v,trim:_,splitWords:E,setOptions:C,getParamString:k,template:O,isArray:P,indexOf:j,emptyImageUrl:W,requestFn:fe,cancelFn:z,requestAnimFrame:se,cancelAnimFrame:Te};function ne(){}s(ne,"Class"),ne.extend=function(o){var u=s(function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},"NewClass"),p=u.__super__=this.prototype,b=r(p);b.constructor=u,u.prototype=b;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(u[A]=this[A]);return o.statics&&t(u,o.statics),o.includes&&(be(o.includes),t.apply(null,[b].concat(o.includes))),t(b,o),delete b.statics,delete b.includes,b.options&&(b.options=p.options?r(p.options):{},t(b.options,o.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,$=b._initHooks.length;R<$;R++)b._initHooks[R].call(this)}},u},ne.include=function(o){var u=this.prototype.options;return t(this.prototype,o),o.options&&(this.prototype.options=u,this.mergeOptions(o.options)),this},ne.mergeOptions=function(o){return t(this.prototype.options,o),this},ne.addInitHook=function(o){var u=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function be(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=P(o)?o:[o];for(var u=0;u<o.length;u++)o[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}s(be,"checkDeprecatedMixinEvents");var de={on:function(o,u,p){if(typeof o=="object")for(var b in o)this._on(b,o[b],u);else{o=E(o);for(var A=0,R=o.length;A<R;A++)this._on(o[A],u,p)}return this},off:function(o,u,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var b in o)this._off(b,o[b],u);else{o=E(o);for(var A=arguments.length===1,R=0,$=o.length;R<$;R++)A?this._off(o[R]):this._off(o[R],u,p)}return this},_on:function(o,u,p,b){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(o,u,p)===!1){p===this&&(p=void 0);var A={fn:u,ctx:p};b&&(A.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(A)}},_off:function(o,u,p){var b,A,R;if(this._events&&(b=this._events[o],!!b)){if(arguments.length===1){if(this._firingCount)for(A=0,R=b.length;A<R;A++)b[A].fn=g;delete this._events[o];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var $=this._listens(o,u,p);if($!==!1){var ee=b[$];this._firingCount&&(ee.fn=g,this._events[o]=b=b.slice()),b.splice($,1)}}},fire:function(o,u,p){if(!this.listens(o,p))return this;var b=t({},u,{type:o,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var A=this._events[o];if(A){this._firingCount=this._firingCount+1||1;for(var R=0,$=A.length;R<$;R++){var ee=A[R],oe=ee.fn;ee.once&&this.off(o,oe,ee.ctx),oe.call(ee.ctx||this,b)}this._firingCount--}}return p&&this._propagateEvent(b),this},listens:function(o,u,p,b){typeof o!="string"&&console.warn('"string" type argument expected');var A=u;typeof u!="function"&&(b=!!u,A=void 0,p=void 0);var R=this._events&&this._events[o];if(R&&R.length&&this._listens(o,A,p)!==!1)return!0;if(b){for(var $ in this._eventParents)if(this._eventParents[$].listens(o,u,p,b))return!0}return!1},_listens:function(o,u,p){if(!this._events)return!1;var b=this._events[o]||[];if(!u)return!!b.length;p===this&&(p=void 0);for(var A=0,R=b.length;A<R;A++)if(b[A].fn===u&&b[A].ctx===p)return A;return!1},once:function(o,u,p){if(typeof o=="object")for(var b in o)this._on(b,o[b],u,!0);else{o=E(o);for(var A=0,R=o.length;A<R;A++)this._on(o[A],u,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[l(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[l(o)],this},_propagateEvent:function(o){for(var u in this._eventParents)this._eventParents[u].fire(o.type,t({layer:o.target,propagatedFrom:o.target},o),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var Ne=ne.extend(de);function F(o,u,p){this.x=p?Math.round(o):o,this.y=p?Math.round(u):u}s(F,"Point");var G=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(o){return this.clone()._add(B(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(B(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new F(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new F(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(o){o=B(o);var u=o.x-this.x,p=o.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(o){return o=B(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=B(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function B(o,u,p){return o instanceof F?o:P(o)?new F(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new F(o.x,o.y):new F(o,u,p)}s(B,"toPoint");function ie(o,u){if(o)for(var p=u?[o,u]:o,b=0,A=p.length;b<A;b++)this.extend(p[b])}s(ie,"Bounds"),ie.prototype={extend:function(o){var u,p;if(!o)return this;if(o instanceof F||typeof o[0]=="number"||"x"in o)u=p=B(o);else if(o=le(o),u=o.min,p=o.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var u,p;return typeof o[0]=="number"||o instanceof F?o=B(o):o=le(o),o instanceof ie?(u=o.min,p=o.max):u=p=o,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=le(o);var u=this.min,p=this.max,b=o.min,A=o.max,R=A.x>=u.x&&b.x<=p.x,$=A.y>=u.y&&b.y<=p.y;return R&&$},overlaps:function(o){o=le(o);var u=this.min,p=this.max,b=o.min,A=o.max,R=A.x>u.x&&b.x<p.x,$=A.y>u.y&&b.y<p.y;return R&&$},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var u=this.min,p=this.max,b=Math.abs(u.x-p.x)*o,A=Math.abs(u.y-p.y)*o;return le(B(u.x-b,u.y-A),B(p.x+b,p.y+A))},equals:function(o){return o?(o=le(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function le(o,u){return!o||o instanceof ie?o:new ie(o,u)}s(le,"toBounds");function ge(o,u){if(o)for(var p=u?[o,u]:o,b=0,A=p.length;b<A;b++)this.extend(p[b])}s(ge,"LatLngBounds"),ge.prototype={extend:function(o){var u=this._southWest,p=this._northEast,b,A;if(o instanceof Se)b=o,A=o;else if(o instanceof ge){if(b=o._southWest,A=o._northEast,!b||!A)return this}else return o?this.extend(Fe(o)||Ie(o)):this;return!u&&!p?(this._southWest=new Se(b.lat,b.lng),this._northEast=new Se(A.lat,A.lng)):(u.lat=Math.min(b.lat,u.lat),u.lng=Math.min(b.lng,u.lng),p.lat=Math.max(A.lat,p.lat),p.lng=Math.max(A.lng,p.lng)),this},pad:function(o){var u=this._southWest,p=this._northEast,b=Math.abs(u.lat-p.lat)*o,A=Math.abs(u.lng-p.lng)*o;return new ge(new Se(u.lat-b,u.lng-A),new Se(p.lat+b,p.lng+A))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Se||"lat"in o?o=Fe(o):o=Ie(o);var u=this._southWest,p=this._northEast,b,A;return o instanceof ge?(b=o.getSouthWest(),A=o.getNorthEast()):b=A=o,b.lat>=u.lat&&A.lat<=p.lat&&b.lng>=u.lng&&A.lng<=p.lng},intersects:function(o){o=Ie(o);var u=this._southWest,p=this._northEast,b=o.getSouthWest(),A=o.getNorthEast(),R=A.lat>=u.lat&&b.lat<=p.lat,$=A.lng>=u.lng&&b.lng<=p.lng;return R&&$},overlaps:function(o){o=Ie(o);var u=this._southWest,p=this._northEast,b=o.getSouthWest(),A=o.getNorthEast(),R=A.lat>u.lat&&b.lat<p.lat,$=A.lng>u.lng&&b.lng<p.lng;return R&&$},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,u){return o?(o=Ie(o),this._southWest.equals(o.getSouthWest(),u)&&this._northEast.equals(o.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ie(o,u){return o instanceof ge?o:new ge(o,u)}s(Ie,"toLatLngBounds");function Se(o,u,p){if(isNaN(o)||isNaN(u))throw new Error("Invalid LatLng object: ("+o+", "+u+")");this.lat=+o,this.lng=+u,p!==void 0&&(this.alt=+p)}s(Se,"LatLng"),Se.prototype={equals:function(o,u){if(!o)return!1;o=Fe(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(u===void 0?1e-9:u)},toString:function(o){return"LatLng("+v(this.lat,o)+", "+v(this.lng,o)+")"},distanceTo:function(o){return tt.distance(this,Fe(o))},wrap:function(){return tt.wrapLatLng(this)},toBounds:function(o){var u=180*o/40075017,p=u/Math.cos(Math.PI/180*this.lat);return Ie([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function Fe(o,u,p){return o instanceof Se?o:P(o)&&typeof o[0]!="object"?o.length===3?new Se(o[0],o[1],o[2]):o.length===2?new Se(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Se(o.lat,"lng"in o?o.lng:o.lon,o.alt):u===void 0?null:new Se(o,u,p)}s(Fe,"toLatLng");var it={latLngToPoint:function(o,u){var p=this.projection.project(o),b=this.scale(u);return this.transformation._transform(p,b)},pointToLatLng:function(o,u){var p=this.scale(u),b=this.transformation.untransform(o,p);return this.projection.unproject(b)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(o),b=this.transformation.transform(u.min,p),A=this.transformation.transform(u.max,p);return new ie(b,A)},infinite:!1,wrapLatLng:function(o){var u=this.wrapLng?m(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?m(o.lat,this.wrapLat,!0):o.lat,b=o.alt;return new Se(p,u,b)},wrapLatLngBounds:function(o){var u=o.getCenter(),p=this.wrapLatLng(u),b=u.lat-p.lat,A=u.lng-p.lng;if(b===0&&A===0)return o;var R=o.getSouthWest(),$=o.getNorthEast(),ee=new Se(R.lat-b,R.lng-A),oe=new Se($.lat-b,$.lng-A);return new ge(ee,oe)}},tt=t({},it,{wrapLng:[-180,180],R:6371e3,distance:function(o,u){var p=Math.PI/180,b=o.lat*p,A=u.lat*p,R=Math.sin((u.lat-o.lat)*p/2),$=Math.sin((u.lng-o.lng)*p/2),ee=R*R+Math.cos(b)*Math.cos(A)*$*$,oe=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*oe}}),at=6378137,lt={R:at,MAX_LATITUDE:85.0511287798,project:function(o){var u=Math.PI/180,p=this.MAX_LATITUDE,b=Math.max(Math.min(p,o.lat),-p),A=Math.sin(b*u);return new F(this.R*o.lng*u,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(o){var u=180/Math.PI;return new Se((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*u,o.x*u/this.R)},bounds:function(){var o=at*Math.PI;return new ie([-o,-o],[o,o])}()};function _t(o,u,p,b){if(P(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=u,this._c=p,this._d=b}s(_t,"Transformation"),_t.prototype={transform:function(o,u){return this._transform(o.clone(),u)},_transform:function(o,u){return u=u||1,o.x=u*(this._a*o.x+this._b),o.y=u*(this._c*o.y+this._d),o},untransform:function(o,u){return u=u||1,new F((o.x/u-this._b)/this._a,(o.y/u-this._d)/this._c)}};function Ht(o,u,p,b){return new _t(o,u,p,b)}s(Ht,"toTransformation");var At=t({},tt,{code:"EPSG:3857",projection:lt,transformation:function(){var o=.5/(Math.PI*lt.R);return Ht(o,.5,-o,.5)}()}),st=t({},At,{code:"EPSG:900913"});function Mt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}s(Mt,"svgCreate");function nt(o,u){var p="",b,A,R,$,ee,oe;for(b=0,R=o.length;b<R;b++){for(ee=o[b],A=0,$=ee.length;A<$;A++)oe=ee[A],p+=(A?"L":"M")+oe.x+" "+oe.y;p+=u?Y.svg?"z":"x":""}return p||"M0 0"}s(nt,"pointsToPath");var pt=document.documentElement.style,ct="ActiveXObject"in window,ut=ct&&!document.addEventListener,jt="msLaunchUri"in navigator&&!("documentMode"in document),gt=Re("webkit"),Vt=Re("android"),Zt=Re("android 2")||Re("android 3"),ln=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xn=Vt&&Re("Google")&&ln<537&&!("AudioNode"in window),Yt=!!window.opera,It=!jt&&Re("chrome"),hn=Re("gecko")&&!gt&&!Yt&&!ct,wn=!It&&Re("safari"),Nt=Re("phantom"),cn="OTransition"in pt,gn=navigator.platform.indexOf("Win")===0,yn=ct&&"transition"in pt,tn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zt,bt="MozPerspective"in pt,zt=!window.L_DISABLE_3D&&(yn||tn||bt)&&!cn&&!Nt,Ue=typeof orientation<"u"||Re("mobile"),Et=Ue&&gt,In=Ue&&tn,Fr=!window.PointerEvent&&window.MSPointerEvent,qn=!!(window.PointerEvent||Fr),Tr="ontouchstart"in window||!!window.TouchEvent,En=!window.L_NO_TOUCH&&(Tr||qn),xs=Ue&&Yt,ss=Ue&&hn,w=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,S=function(){var o=!1;try{var u=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",g,u),window.removeEventListener("testPassiveEventSupport",g,u)}catch{}return o}(),M=function(){return!!document.createElement("canvas").getContext}(),q=!!(document.createElementNS&&Mt("svg").createSVGRect),J=!!q&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),te=!q&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var u=o.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Le=navigator.platform.indexOf("Mac")===0,ue=navigator.platform.indexOf("Linux")===0;function Re(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}s(Re,"userAgentContains");var Y={ie:ct,ielt9:ut,edge:jt,webkit:gt,android:Vt,android23:Zt,androidStock:xn,opera:Yt,chrome:It,gecko:hn,safari:wn,phantom:Nt,opera12:cn,win:gn,ie3d:yn,webkit3d:tn,gecko3d:bt,any3d:zt,mobile:Ue,mobileWebkit:Et,mobileWebkit3d:In,msPointer:Fr,pointer:qn,touch:En,touchNative:Tr,mobileOpera:xs,mobileGecko:ss,retina:w,passiveEvents:S,canvas:M,svg:q,vml:te,inlineSvg:J,mac:Le,linux:ue},Ee=Y.msPointer?"MSPointerDown":"pointerdown",Je=Y.msPointer?"MSPointerMove":"pointermove",$t=Y.msPointer?"MSPointerUp":"pointerup",Rt=Y.msPointer?"MSPointerCancel":"pointercancel",Kt={touchstart:Ee,touchmove:Je,touchend:$t,touchcancel:Rt},nn={touchstart:Di,touchmove:Gr,touchend:Gr,touchcancel:Gr},Hn={},Zn=!1;function kr(o,u,p){return u==="touchstart"&&gi(),nn[u]?(p=nn[u].bind(this,p),o.addEventListener(Kt[u],p,!1),p):(console.warn("wrong event specified:",u),g)}s(kr,"addPointerListener");function Li(o,u,p){if(!Kt[u]){console.warn("wrong event specified:",u);return}o.removeEventListener(Kt[u],p,!1)}s(Li,"removePointerListener");function mn(o){Hn[o.pointerId]=o}s(mn,"_globalPointerDown");function Ii(o){Hn[o.pointerId]&&(Hn[o.pointerId]=o)}s(Ii,"_globalPointerMove");function Ur(o){delete Hn[o.pointerId]}s(Ur,"_globalPointerUp");function gi(){Zn||(document.addEventListener(Ee,mn,!0),document.addEventListener(Je,Ii,!0),document.addEventListener($t,Ur,!0),document.addEventListener(Rt,Ur,!0),Zn=!0)}s(gi,"_addPointerDocListener");function Gr(o,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in Hn)u.touches.push(Hn[p]);u.changedTouches=[u],o(u)}}s(Gr,"_handlePointer");function Di(o,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&or(u),Gr(o,u)}s(Di,"_onPointerStart");function ws(o){var u={},p,b;for(b in o)p=o[b],u[b]=p&&p.bind?p.bind(o):p;return o=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}s(ws,"makeDblclick");var Us=200;function Q(o,u){o.addEventListener("dblclick",u);var p=0,b;function A(R){if(R.detail!==1){b=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var $=bd(R);if(!($.some(function(oe){return oe instanceof HTMLLabelElement&&oe.attributes.for})&&!$.some(function(oe){return oe instanceof HTMLInputElement||oe instanceof HTMLSelectElement}))){var ee=Date.now();ee-p<=Us?(b++,b===2&&u(ws(R))):b=1,p=ee}}}return s(A,"simDblclick"),o.addEventListener("click",A),{dblclick:u,simDblclick:A}}s(Q,"addDoubleTapListener");function ve(o,u){o.removeEventListener("dblclick",u.dblclick),o.removeEventListener("click",u.simDblclick)}s(ve,"removeDoubleTapListener");var Be=St(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),H=St(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),re=H==="webkitTransition"||H==="OTransition"?H+"End":"transitionend";function ke(o){return typeof o=="string"?document.getElementById(o):o}s(ke,"get");function De(o,u){var p=o.style[u]||o.currentStyle&&o.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(o,null);p=b?b[u]:null}return p==="auto"?null:p}s(De,"getStyle");function Ae(o,u,p){var b=document.createElement(o);return b.className=u||"",p&&p.appendChild(b),b}s(Ae,"create$1");function ze(o){var u=o.parentNode;u&&u.removeChild(o)}s(ze,"remove");function Tt(o){for(;o.firstChild;)o.removeChild(o.firstChild)}s(Tt,"empty");function Wt(o){var u=o.parentNode;u&&u.lastChild!==o&&u.appendChild(o)}s(Wt,"toFront");function Sn(o){var u=o.parentNode;u&&u.firstChild!==o&&u.insertBefore(o,u.firstChild)}s(Sn,"toBack");function un(o,u){if(o.classList!==void 0)return o.classList.contains(u);var p=Ft(o);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}s(un,"hasClass");function xe(o,u){if(o.classList!==void 0)for(var p=E(u),b=0,A=p.length;b<A;b++)o.classList.add(p[b]);else if(!un(o,u)){var R=Ft(o);Dt(o,(R?R+" ":"")+u)}}s(xe,"addClass");function Xe(o,u){o.classList!==void 0?o.classList.remove(u):Dt(o,_((" "+Ft(o)+" ").replace(" "+u+" "," ")))}s(Xe,"removeClass");function Dt(o,u){o.className.baseVal===void 0?o.className=u:o.className.baseVal=u}s(Dt,"setClass");function Ft(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}s(Ft,"getClass");function dn(o,u){"opacity"in o.style?o.style.opacity=u:"filter"in o.style&&Or(o,u)}s(dn,"setOpacity");function Or(o,u){var p=!1,b="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(b)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):o.style.filter+=" progid:"+b+"(opacity="+u+")"}s(Or,"_setOpacityIE");function St(o){for(var u=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in u)return o[p];return!1}s(St,"testProp");function rn(o,u,p){var b=u||new F(0,0);o.style[Be]=(Y.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(p?" scale("+p+")":"")}s(rn,"setTransform");function Lt(o,u){o._leaflet_pos=u,Y.any3d?rn(o,u):(o.style.left=u.x+"px",o.style.top=u.y+"px")}s(Lt,"setPosition");function br(o){return o._leaflet_pos||new F(0,0)}s(br,"getPosition");var Mo,co,Gt;if("onselectstart"in document)Mo=s(function(){ft(window,"selectstart",or)},"disableTextSelection"),co=s(function(){sn(window,"selectstart",or)},"enableTextSelection");else{var Pt=St(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Mo=s(function(){if(Pt){var o=document.documentElement.style;Gt=o[Pt],o[Pt]="none"}},"disableTextSelection"),co=s(function(){Pt&&(document.documentElement.style[Pt]=Gt,Gt=void 0)},"enableTextSelection")}function uo(){ft(window,"dragstart",or)}s(uo,"disableImageDrag");function Nr(){sn(window,"dragstart",or)}s(Nr,"enableImageDrag");var fo,Rr;function yi(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Zr(),fo=o,Rr=o.style.outlineStyle,o.style.outlineStyle="none",ft(window,"keydown",Zr))}s(yi,"preventOutline");function Zr(){fo&&(fo.style.outlineStyle=Rr,fo=void 0,Rr=void 0,sn(window,"keydown",Zr))}s(Zr,"restoreOutline");function ho(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}s(ho,"getSizedParentNode");function js(o){var u=o.getBoundingClientRect();return{x:u.width/o.offsetWidth||1,y:u.height/o.offsetHeight||1,boundingClientRect:u}}s(js,"getScale");var _l={__proto__:null,TRANSFORM:Be,TRANSITION:H,TRANSITION_END:re,get:ke,getStyle:De,create:Ae,remove:ze,empty:Tt,toFront:Wt,toBack:Sn,hasClass:un,addClass:xe,removeClass:Xe,setClass:Dt,getClass:Ft,setOpacity:dn,testProp:St,setTransform:rn,setPosition:Lt,getPosition:br,get disableTextSelection(){return Mo},get enableTextSelection(){return co},disableImageDrag:uo,enableImageDrag:Nr,preventOutline:yi,restoreOutline:Zr,getSizedParentNode:ho,getScale:js};function ft(o,u,p,b){if(u&&typeof u=="object")for(var A in u)mo(o,A,u[A],p);else{u=E(u);for(var R=0,$=u.length;R<$;R++)mo(o,u[R],p,b)}return this}s(ft,"on");var sr="_leaflet_events";function sn(o,u,p,b){if(arguments.length===1)Lo(o),delete o[sr];else if(u&&typeof u=="object")for(var A in u)jr(o,A,u[A],p);else if(u=E(u),arguments.length===2)Lo(o,function(ee){return j(u,ee)!==-1});else for(var R=0,$=u.length;R<$;R++)jr(o,u[R],p,b);return this}s(sn,"off");function Lo(o,u){for(var p in o[sr]){var b=p.split(/\d/)[0];(!u||u(b))&&jr(o,b,null,null,p)}}s(Lo,"batchRemove");var Io={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function mo(o,u,p,b){var A=u+l(p)+(b?"_"+l(b):"");if(o[sr]&&o[sr][A])return this;var R=s(function(ee){return p.call(b||o,ee||window.event)},"handler"),$=R;!Y.touchNative&&Y.pointer&&u.indexOf("touch")===0?R=kr(o,u,R):Y.touch&&u==="dblclick"?R=Q(o,R):"addEventListener"in o?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?o.addEventListener(Io[u]||u,R,Y.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(R=s(function(ee){ee=ee||window.event,ya(o,ee)&&$(ee)},"handler"),o.addEventListener(Io[u],R,!1)):o.addEventListener(u,$,!1):o.attachEvent("on"+u,R),o[sr]=o[sr]||{},o[sr][A]=R}s(mo,"addOne");function jr(o,u,p,b,A){A=A||u+l(p)+(b?"_"+l(b):"");var R=o[sr]&&o[sr][A];if(!R)return this;!Y.touchNative&&Y.pointer&&u.indexOf("touch")===0?Li(o,u,R):Y.touch&&u==="dblclick"?ve(o,R):"removeEventListener"in o?o.removeEventListener(Io[u]||u,R,!1):o.detachEvent("on"+u,R),o[sr][A]=null}s(jr,"removeOne");function Ke(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}s(Ke,"stopPropagation");function vr(o){return mo(o,"wheel",Ke),this}s(vr,"disableScrollPropagation");function Hr(o){return ft(o,"mousedown touchstart dblclick contextmenu",Ke),o._leaflet_disable_click=!0,this}s(Hr,"disableClickPropagation");function or(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}s(or,"preventDefault");function Pi(o){return or(o),Ke(o),this}s(Pi,"stop");function bd(o){if(o.composedPath)return o.composedPath();for(var u=[],p=o.target;p;)u.push(p),p=p.parentNode;return u}s(bd,"getPropagationPath");function Bi(o,u){if(!u)return new F(o.clientX,o.clientY);var p=js(u),b=p.boundingClientRect;return new F((o.clientX-b.left)/p.x-u.clientLeft,(o.clientY-b.top)/p.y-u.clientTop)}s(Bi,"getMousePosition");var vd=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Hs(o){return Y.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/vd:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}s(Hs,"getWheelDelta");function ya(o,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}s(ya,"isExternalTarget");var om={__proto__:null,on:ft,off:sn,stopPropagation:Ke,disableScrollPropagation:vr,disableClickPropagation:Hr,preventDefault:or,stop:Pi,getPropagationPath:bd,getMousePosition:Bi,getWheelDelta:Hs,isExternalTarget:ya,addListener:ft,removeListener:sn},_d=Ne.extend({run:function(o,u,p,b){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=br(o),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=se(this._animate,this),this._step()},_step:function(o){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,u){var p=this._startPos.add(this._offset.multiplyBy(o));u&&p._round(),Lt(this._el,p),this.fire("step")},_complete:function(){Te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Bt=Ne.extend({options:{crs:At,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,u){u=C(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Fe(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=H&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ft(this._proxy,re,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),o=this._limitCenter(Fe(o),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=t({animate:p.animate},p.zoom),p.pan=t({animate:p.animate,duration:p.duration},p.pan));var b=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,u,p.zoom):this._tryAnimatedPan(o,p.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(o,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,u){return this._loaded?this.setView(this.getCenter(),o,{zoom:u}):(this._zoom=o,this)},zoomIn:function(o,u){return o=o||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,u)},zoomOut:function(o,u){return o=o||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,u)},setZoomAround:function(o,u,p){var b=this.getZoomScale(u),A=this.getSize().divideBy(2),R=o instanceof F?o:this.latLngToContainerPoint(o),$=R.subtract(A).multiplyBy(1-1/b),ee=this.containerPointToLatLng(A.add($));return this.setView(ee,u,{zoom:p})},_getBoundsCenterZoom:function(o,u){u=u||{},o=o.getBounds?o.getBounds():Ie(o);var p=B(u.paddingTopLeft||u.padding||[0,0]),b=B(u.paddingBottomRight||u.padding||[0,0]),A=this.getBoundsZoom(o,!1,p.add(b));if(A=typeof u.maxZoom=="number"?Math.min(u.maxZoom,A):A,A===1/0)return{center:o.getCenter(),zoom:A};var R=b.subtract(p).divideBy(2),$=this.project(o.getSouthWest(),A),ee=this.project(o.getNorthEast(),A),oe=this.unproject($.add(ee).divideBy(2).add(R),A);return{center:oe,zoom:A}},fitBounds:function(o,u){if(o=Ie(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,u){return this.setView(o,this._zoom,{pan:u})},panBy:function(o,u){if(o=B(o).round(),u=u||{},!o.x&&!o.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _d,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,u,p){if(p=p||{},p.animate===!1||!Y.any3d)return this.setView(o,u,p);this._stop();var b=this.project(this.getCenter()),A=this.project(o),R=this.getSize(),$=this._zoom;o=Fe(o),u=u===void 0?$:u;var ee=Math.max(R.x,R.y),oe=ee*this.getZoomScale($,u),we=A.distanceTo(b)||1,je=1.42,dt=je*je;function Ct(zn){var Hc=zn?-1:1,iv=zn?oe:ee,sv=oe*oe-ee*ee+Hc*dt*dt*we*we,Ca=2*iv*dt*we,Aa=sv/Ca,_e=Math.sqrt(Aa*Aa+1)-Aa,wm=_e<1e-9?-18:Math.log(_e);return wm}s(Ct,"r");function Lr(zn){return(Math.exp(zn)-Math.exp(-zn))/2}s(Lr,"sinh");function Xn(zn){return(Math.exp(zn)+Math.exp(-zn))/2}s(Xn,"cosh");function ji(zn){return Lr(zn)/Xn(zn)}s(ji,"tanh");var Tn=Ct(0);function Gs(zn){return ee*(Xn(Tn)/Xn(Tn+je*zn))}s(Gs,"w");function Ud(zn){return ee*(Xn(Tn)*ji(Tn+je*zn)-Lr(Tn))/dt}s(Ud,"u");function nv(zn){return 1-Math.pow(1-zn,1.5)}s(nv,"easeOut");var jd=Date.now(),Pl=(Ct(1)-Tn)/je,rv=p.duration?1e3*p.duration:1e3*Pl*.8;function Bl(){var zn=(Date.now()-jd)/rv,Hc=nv(zn)*Pl;zn<=1?(this._flyToFrame=se(Bl,this),this._move(this.unproject(b.add(A.subtract(b).multiplyBy(Ud(Hc)/we)),$),this.getScaleZoom(ee/Gs(Hc),$),{flyTo:!0})):this._move(o,u)._moveEnd(!0)}return s(Bl,"frame"),this._moveStart(!0,p.noMoveStart),Bl.call(this),this},flyToBounds:function(o,u){var p=this._getBoundsCenterZoom(o,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(o){return o=Ie(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var u=this.options.minZoom;return this.options.minZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var u=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,u){this._enforcingBounds=!0;var p=this.getCenter(),b=this._limitCenter(p,this._zoom,Ie(o));return p.equals(b)||this.panTo(b,u),this._enforcingBounds=!1,this},panInside:function(o,u){u=u||{};var p=B(u.paddingTopLeft||u.padding||[0,0]),b=B(u.paddingBottomRight||u.padding||[0,0]),A=this.project(this.getCenter()),R=this.project(o),$=this.getPixelBounds(),ee=le([$.min.add(p),$.max.subtract(b)]),oe=ee.getSize();if(!ee.contains(R)){this._enforcingBounds=!0;var we=R.subtract(ee.getCenter()),je=ee.extend(R).getSize().subtract(oe);A.x+=we.x<0?-je.x:je.x,A.y+=we.y<0?-je.y:je.y,this.panTo(this.unproject(A),u),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=t({animate:!1,pan:!0},o===!0?{animate:!0}:o);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),b=u.divideBy(2).round(),A=p.divideBy(2).round(),R=b.subtract(A);return!R.x&&!R.y?this:(o.animate&&o.pan?this.panBy(R):(o.pan&&this._rawPanBy(R),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=t({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=i(this._handleGeolocationResponse,this),p=i(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,o):navigator.geolocation.getCurrentPosition(u,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var u=o.code,p=o.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var u=o.coords.latitude,p=o.coords.longitude,b=new Se(u,p),A=b.toBounds(o.coords.accuracy*2),R=this._locateOptions;if(R.setView){var $=this.getBoundsZoom(A);this.setView(b,R.maxZoom?Math.min($,R.maxZoom):$)}var ee={latlng:b,bounds:A,timestamp:o.timestamp};for(var oe in o.coords)typeof o.coords[oe]=="number"&&(ee[oe]=o.coords[oe]);this.fire("locationfound",ee)}},addHandler:function(o,u){if(!u)return this;var p=this[o]=new u(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ze(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)ze(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,u){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),b=Ae("div",p,u||this._mapPane);return o&&(this._panes[o]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),u=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new ge(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,u,p){o=Ie(o),p=B(p||[0,0]);var b=this.getZoom()||0,A=this.getMinZoom(),R=this.getMaxZoom(),$=o.getNorthWest(),ee=o.getSouthEast(),oe=this.getSize().subtract(p),we=le(this.project(ee,b),this.project($,b)).getSize(),je=Y.any3d?this.options.zoomSnap:1,dt=oe.x/we.x,Ct=oe.y/we.y,Lr=u?Math.max(dt,Ct):Math.min(dt,Ct);return b=this.getScaleZoom(Lr,b),je&&(b=Math.round(b/(je/100))*(je/100),b=u?Math.ceil(b/je)*je:Math.floor(b/je)*je),Math.max(A,Math.min(R,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,u){var p=this._getTopLeftPoint(o,u);return new ie(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(o)/p.scale(u)},getScaleZoom:function(o,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var b=p.zoom(o*p.scale(u));return isNaN(b)?1/0:b},project:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Fe(o),u)},unproject:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(B(o),u)},layerPointToLatLng:function(o){var u=B(o).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(o){var u=this.project(Fe(o))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Fe(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Ie(o))},distance:function(o,u){return this.options.crs.distance(Fe(o),Fe(u))},containerPointToLayerPoint:function(o){return B(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return B(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var u=this.containerPointToLayerPoint(B(o));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Fe(o)))},mouseEventToContainerPoint:function(o){return Bi(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var u=this._container=ke(o);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ft(u,"scroll",this._onScroll,this),this._containerId=l(u)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,xe(o,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=De(o,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(o.markerPane,"leaflet-zoom-hide"),xe(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,u,p){Lt(this._mapPane,new F(0,0));var b=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var A=this._zoom!==u;this._moveStart(A,p)._move(o,u)._moveEnd(A),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(o,u){return o&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(o,u,p,b){u===void 0&&(u=this._zoom);var A=this._zoom!==u;return this._zoom=u,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),b?p&&p.pinch&&this.fire("zoom",p):((A||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Lt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[l(this._container)]=this;var u=o?sn:ft;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Te(this._resizeRequest),this._resizeRequest=se(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,u){for(var p=[],b,A=u==="mouseout"||u==="mouseover",R=o.target||o.srcElement,$=!1;R;){if(b=this._targets[l(R)],b&&(u==="click"||u==="preclick")&&this._draggableMoved(b)){$=!0;break}if(b&&b.listens(u,!0)&&(A&&!ya(R,o)||(p.push(b),A))||R===this._container)break;R=R.parentNode}return!p.length&&!$&&!A&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var u=o.target||o.srcElement;if(!(!this._loaded||u._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(u))){var p=o.type;p==="mousedown"&&yi(u),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,u,p){if(o.type==="click"){var b=t({},o);b.type="preclick",this._fireDOMEvent(b,b.type,p)}var A=this._findEventTargets(o,u);if(p){for(var R=[],$=0;$<p.length;$++)p[$].listens(u,!0)&&R.push(p[$]);A=R.concat(A)}if(A.length){u==="contextmenu"&&or(o);var ee=A[0],oe={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var we=ee.getLatLng&&(!ee._radius||ee._radius<=10);oe.containerPoint=we?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(o),oe.layerPoint=this.containerPointToLayerPoint(oe.containerPoint),oe.latlng=we?ee.getLatLng():this.layerPointToLatLng(oe.layerPoint)}for($=0;$<A.length;$++)if(A[$].fire(u,oe,!0),oe.originalEvent._stopped||A[$].options.bubblingMouseEvents===!1&&j(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,u=this._handlers.length;o<u;o++)this._handlers[o].disable()},whenReady:function(o,u){return this._loaded?o.call(u||this,{target:this}):this.on("load",o,u),this},_getMapPanePos:function(){return br(this._mapPane)||new F(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,u){var p=o&&u!==void 0?this._getNewPixelOrigin(o,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,u){var p=this.getSize()._divideBy(2);return this.project(o,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,u,p){var b=this._getNewPixelOrigin(p,u);return this.project(o,u)._subtract(b)},_latLngBoundsToNewLayerBounds:function(o,u,p){var b=this._getNewPixelOrigin(p,u);return le([this.project(o.getSouthWest(),u)._subtract(b),this.project(o.getNorthWest(),u)._subtract(b),this.project(o.getSouthEast(),u)._subtract(b),this.project(o.getNorthEast(),u)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,u,p){if(!p)return o;var b=this.project(o,u),A=this.getSize().divideBy(2),R=new ie(b.subtract(A),b.add(A)),$=this._getBoundsOffset(R,p,u);return Math.abs($.x)<=1&&Math.abs($.y)<=1?o:this.unproject(b.add($),u)},_limitOffset:function(o,u){if(!u)return o;var p=this.getPixelBounds(),b=new ie(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(b,u))},_getBoundsOffset:function(o,u,p){var b=le(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),A=b.min.subtract(o.min),R=b.max.subtract(o.max),$=this._rebound(A.x,-R.x),ee=this._rebound(A.y,-R.y);return new F($,ee)},_rebound:function(o,u){return o+u>0?Math.round(o-u)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(u))},_limitZoom:function(o){var u=this.getMinZoom(),p=this.getMaxZoom(),b=Y.any3d?this.options.zoomSnap:1;return b&&(o=Math.round(o/b)*b),Math.max(u,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,u){var p=this._getCenterOffset(o)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var o=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(u){var p=Be,b=this._proxy.style[p];rn(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),b===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ze(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),u=this.getZoom();rn(this._proxy,this.project(o,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(u),A=this._getCenterOffset(o)._divideBy(1-1/b);return p.animate!==!0&&!this.getSize().contains(A)?!1:(se(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,u,!0)},this),!0)},_animateZoom:function(o,u,p,b){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=u,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:u,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mr(o,u){return new Bt(o,u)}s(Mr,"createMap");var os=ne.extend({options:{position:"topright"},initialize:function(o){C(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var u=this._map;return u&&u.removeControl(this),this.options.position=o,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var u=this._container=this.onAdd(o),p=this.getPosition(),b=o._controlCorners[p];return xe(u,"leaflet-control"),p.indexOf("bottom")!==-1?b.insertBefore(u,b.firstChild):b.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ze(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),ba=s(function(o){return new os(o)},"control");Bt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},u="leaflet-",p=this._controlContainer=Ae("div",u+"control-container",this._container);function b(A,R){var $=u+A+" "+u+R;o[A+R]=Ae("div",$,p)}s(b,"createCorner"),b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)ze(this._controlCorners[o]);ze(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var xd=os.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,u,p,b){return p<b?-1:b<p?1:0}},initialize:function(o,u,p){C(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in o)this._addLayer(o[b],b);for(b in u)this._addLayer(u[b],b,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return os.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,u){return this._addLayer(o,u),this._map?this._update():this},addOverlay:function(o,u){return this._addLayer(o,u,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var u=this._getLayer(l(o));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",u=this._container=Ae("div",o),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Hr(u),vr(u);var b=this._section=Ae("section",o+"-list");p&&(this._map.on("click",this.collapse,this),ft(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Ae("a",o+"-toggle",u);A.href="#",A.title="Layers",A.setAttribute("role","button"),ft(A,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){or(R),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Ae("div",o+"-base",b),this._separator=Ae("div",o+"-separator",b),this._overlaysList=Ae("div",o+"-overlays",b),u.appendChild(b)},_getLayer:function(o){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&l(this._layers[u].layer)===o)return this._layers[u]},_addLayer:function(o,u,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(i(function(b,A){return this.options.sortFunction(b.layer,A.layer,b.name,A.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tt(this._baseLayersList),Tt(this._overlaysList),this._layerControlInputs=[];var o,u,p,b,A=0;for(p=0;p<this._layers.length;p++)b=this._layers[p],this._addItem(b),u=u||b.overlay,o=o||!b.overlay,A+=b.overlay?0:1;return this.options.hideSingleBase&&(o=o&&A>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=u&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var u=this._getLayer(l(o.target)),p=u.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(o,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(u?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=p,b.firstChild},_addItem:function(o){var u=document.createElement("label"),p=this._map.hasLayer(o.layer),b;o.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=p):b=this._createRadioElement("leaflet-base-layers_"+l(this),p),this._layerControlInputs.push(b),b.layerId=l(o.layer),ft(b,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+o.name;var R=document.createElement("span");u.appendChild(R),R.appendChild(b),R.appendChild(A);var $=o.overlay?this._overlaysList:this._baseLayersList;return $.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,u,p,b=[],A=[];this._handlingClick=!0;for(var R=o.length-1;R>=0;R--)u=o[R],p=this._getLayer(u.layerId).layer,u.checked?b.push(p):u.checked||A.push(p);for(R=0;R<A.length;R++)this._map.hasLayer(A[R])&&this._map.removeLayer(A[R]);for(R=0;R<b.length;R++)this._map.hasLayer(b[R])||this._map.addLayer(b[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,u,p,b=this._map.getZoom(),A=o.length-1;A>=0;A--)u=o[A],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&b<p.options.minZoom||p.options.maxZoom!==void 0&&b>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ft(o,"click",or),this.expand();var u=this;setTimeout(function(){sn(o,"click",or),u._preventClick=!1})}}),as=s(function(o,u,p){return new xd(o,u,p)},"layers"),po=os.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var u="leaflet-control-zoom",p=Ae("div",u+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,u,p,b,A){var R=Ae("a",p,b);return R.innerHTML=o,R.href="#",R.title=u,R.setAttribute("role","button"),R.setAttribute("aria-label",u),Hr(R),ft(R,"click",Pi),ft(R,"click",A,this),ft(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var o=this._map,u="leaflet-disabled";Xe(this._zoomInButton,u),Xe(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(xe(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(xe(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bt.mergeOptions({zoomControl:!0}),Bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new po,this.addControl(this.zoomControl))});var wd=s(function(o){return new po(o)},"zoom"),Do=os.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var u="leaflet-control-scale",p=Ae("div",u),b=this.options;return this._addScales(b,u+"-line",p),o.on(b.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,u,p){o.metric&&(this._mScale=Ae("div",u,p)),o.imperial&&(this._iScale=Ae("div",u,p))},_update:function(){var o=this._map,u=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,u]),o.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var u=this._getRoundNum(o),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/o)},_updateImperial:function(o){var u=o*3.2808399,p,b,A;u>5280?(p=u/5280,b=this._getRoundNum(p),this._updateScale(this._iScale,b+" mi",b/p)):(A=this._getRoundNum(u),this._updateScale(this._iScale,A+" ft",A/u))},_updateScale:function(o,u,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=u},_getRoundNum:function(o){var u=Math.pow(10,(Math.floor(o)+"").length-1),p=o/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),xl=s(function(o){return new Do(o)},"scale"),Ed='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',va=os.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?Ed+" ":"")+"Leaflet</a>"},initialize:function(o){C(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),Hr(this._container);for(var u in o._layers)o._layers[u].getAttribution&&this.addAttribution(o._layers[u].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var u in this._attributions)this._attributions[u]&&o.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Bt.mergeOptions({attributionControl:!0}),Bt.addInitHook(function(){this.options.attributionControl&&new va().addTo(this)});var bi=s(function(o){return new va(o)},"attribution");os.Layers=xd,os.Zoom=po,os.Scale=Do,os.Attribution=va,ba.layers=as,ba.zoom=wd,ba.scale=xl,ba.attribution=bi;var Es=ne.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Es.addTo=function(o,u){return o.addHandler(u,this),this};var _a={Events:de},Lc=Y.touch?"touchstart mousedown":"mousedown",Ss=Ne.extend({options:{clickTolerance:3},initialize:function(o,u,p,b){C(this,b),this._element=o,this._dragStartTarget=u||o,this._preventOutline=p},enable:function(){this._enabled||(ft(this._dragStartTarget,Lc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ss._dragging===this&&this.finishDrag(!0),sn(this._dragStartTarget,Lc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!un(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Ss._dragging===this&&this.finishDrag();return}if(!(Ss._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Ss._dragging=this,this._preventOutline&&yi(this._element),uo(),Mo(),!this._moving)){this.fire("down");var u=o.touches?o.touches[0]:o,p=ho(this._element);this._startPoint=new F(u.clientX,u.clientY),this._startPos=br(this._element),this._parentScale=js(p);var b=o.type==="mousedown";ft(document,b?"mousemove":"touchmove",this._onMove,this),ft(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var u=o.touches&&o.touches.length===1?o.touches[0]:o,p=new F(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,or(o),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Lt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xe(document.body,"leaflet-dragging"),this._lastTarget&&(Xe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),sn(document,"mousemove touchmove",this._onMove,this),sn(document,"mouseup touchend touchcancel",this._onUp,this),Nr(),co();var u=this._moved&&this._moving;this._moving=!1,Ss._dragging=!1,u&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function wl(o,u,p){var b,A=[1,4,2,8],R,$,ee,oe,we,je,dt,Ct;for(R=0,je=o.length;R<je;R++)o[R]._code=zs(o[R],u);for(ee=0;ee<4;ee++){for(dt=A[ee],b=[],R=0,je=o.length,$=je-1;R<je;$=R++)oe=o[R],we=o[$],oe._code&dt?we._code&dt||(Ct=El(we,oe,dt,u,p),Ct._code=zs(Ct,u),b.push(Ct)):(we._code&dt&&(Ct=El(we,oe,dt,u,p),Ct._code=zs(Ct,u),b.push(Ct)),b.push(oe));o=b}return o}s(wl,"clipPolygon");function He(o,u){var p,b,A,R,$,ee,oe,we,je;if(!o||o.length===0)throw new Error("latlngs not passed");vi(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var dt=Fe([0,0]),Ct=Ie(o),Lr=Ct.getNorthWest().distanceTo(Ct.getSouthWest())*Ct.getNorthEast().distanceTo(Ct.getNorthWest());Lr<1700&&(dt=Sd(o));var Xn=o.length,ji=[];for(p=0;p<Xn;p++){var Tn=Fe(o[p]);ji.push(u.project(Fe([Tn.lat-dt.lat,Tn.lng-dt.lng])))}for(ee=oe=we=0,p=0,b=Xn-1;p<Xn;b=p++)A=ji[p],R=ji[b],$=A.y*R.x-R.y*A.x,oe+=(A.x+R.x)*$,we+=(A.y+R.y)*$,ee+=$*3;ee===0?je=ji[0]:je=[oe/ee,we/ee];var Gs=u.unproject(B(je));return Fe([Gs.lat+dt.lat,Gs.lng+dt.lng])}s(He,"polygonCenter");function Sd(o){for(var u=0,p=0,b=0,A=0;A<o.length;A++){var R=Fe(o[A]);u+=R.lat,p+=R.lng,b++}return Fe([u/b,p/b])}s(Sd,"centroid");var jb={__proto__:null,clipPolygon:wl,polygonCenter:He,centroid:Sd};function am(o,u){if(!u||!o.length)return o.slice();var p=u*u;return o=zb(o,p),o=Hb(o,p),o}s(am,"simplify");function lm(o,u,p){return Math.sqrt(xa(o,u,p,!0))}s(lm,"pointToSegmentDistance");function Cd(o,u,p){return xa(o,u,p)}s(Cd,"closestPointOnSegment");function Hb(o,u){var p=o.length,b=typeof Uint8Array<"u"?Uint8Array:Array,A=new b(p);A[0]=A[p-1]=1,Ad(o,A,u,0,p-1);var R,$=[];for(R=0;R<p;R++)A[R]&&$.push(o[R]);return $}s(Hb,"_simplifyDP");function Ad(o,u,p,b,A){var R=0,$,ee,oe;for(ee=b+1;ee<=A-1;ee++)oe=xa(o[ee],o[b],o[A],!0),oe>R&&($=ee,R=oe);R>p&&(u[$]=1,Ad(o,u,p,b,$),Ad(o,u,p,$,A))}s(Ad,"_simplifyDPStep");function zb(o,u){for(var p=[o[0]],b=1,A=0,R=o.length;b<R;b++)$b(o[b],o[A])>u&&(p.push(o[b]),A=b);return A<R-1&&p.push(o[R-1]),p}s(zb,"_reducePoints");var Td;function cm(o,u,p,b,A){var R=b?Td:zs(o,p),$=zs(u,p),ee,oe,we;for(Td=$;;){if(!(R|$))return[o,u];if(R&$)return!1;ee=R||$,oe=El(o,u,ee,p,A),we=zs(oe,p),ee===R?(o=oe,R=we):(u=oe,$=we)}}s(cm,"clipSegment");function El(o,u,p,b,A){var R=u.x-o.x,$=u.y-o.y,ee=b.min,oe=b.max,we,je;return p&8?(we=o.x+R*(oe.y-o.y)/$,je=oe.y):p&4?(we=o.x+R*(ee.y-o.y)/$,je=ee.y):p&2?(we=oe.x,je=o.y+$*(oe.x-o.x)/R):p&1&&(we=ee.x,je=o.y+$*(ee.x-o.x)/R),new F(we,je,A)}s(El,"_getEdgeIntersection");function zs(o,u){var p=0;return o.x<u.min.x?p|=1:o.x>u.max.x&&(p|=2),o.y<u.min.y?p|=4:o.y>u.max.y&&(p|=8),p}s(zs,"_getBitCode");function $b(o,u){var p=u.x-o.x,b=u.y-o.y;return p*p+b*b}s($b,"_sqDist");function xa(o,u,p,b){var A=u.x,R=u.y,$=p.x-A,ee=p.y-R,oe=$*$+ee*ee,we;return oe>0&&(we=((o.x-A)*$+(o.y-R)*ee)/oe,we>1?(A=p.x,R=p.y):we>0&&(A+=$*we,R+=ee*we)),$=o.x-A,ee=o.y-R,b?$*$+ee*ee:new F(A,R)}s(xa,"_sqClosestPointOnSegment");function vi(o){return!P(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}s(vi,"isFlat");function um(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vi(o)}s(um,"_flat");function kd(o,u){var p,b,A,R,$,ee,oe,we;if(!o||o.length===0)throw new Error("latlngs not passed");vi(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var je=Fe([0,0]),dt=Ie(o),Ct=dt.getNorthWest().distanceTo(dt.getSouthWest())*dt.getNorthEast().distanceTo(dt.getNorthWest());Ct<1700&&(je=Sd(o));var Lr=o.length,Xn=[];for(p=0;p<Lr;p++){var ji=Fe(o[p]);Xn.push(u.project(Fe([ji.lat-je.lat,ji.lng-je.lng])))}for(p=0,b=0;p<Lr-1;p++)b+=Xn[p].distanceTo(Xn[p+1])/2;if(b===0)we=Xn[0];else for(p=0,R=0;p<Lr-1;p++)if($=Xn[p],ee=Xn[p+1],A=$.distanceTo(ee),R+=A,R>b){oe=(R-b)/A,we=[ee.x-oe*(ee.x-$.x),ee.y-oe*(ee.y-$.y)];break}var Tn=u.unproject(B(we));return Fe([Tn.lat+je.lat,Tn.lng+je.lng])}s(kd,"polylineCenter");var Od={__proto__:null,simplify:am,pointToSegmentDistance:lm,closestPointOnSegment:Cd,clipSegment:cm,_getEdgeIntersection:El,_getBitCode:zs,_sqClosestPointOnSegment:xa,isFlat:vi,_flat:um,polylineCenter:kd},Nd={project:function(o){return new F(o.lng,o.lat)},unproject:function(o){return new Se(o.y,o.x)},bounds:new ie([-180,-90],[180,90])},Sl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var u=Math.PI/180,p=this.R,b=o.lat*u,A=this.R_MINOR/p,R=Math.sqrt(1-A*A),$=R*Math.sin(b),ee=Math.tan(Math.PI/4-b/2)/Math.pow((1-$)/(1+$),R/2);return b=-p*Math.log(Math.max(ee,1e-10)),new F(o.lng*u*p,b)},unproject:function(o){for(var u=180/Math.PI,p=this.R,b=this.R_MINOR/p,A=Math.sqrt(1-b*b),R=Math.exp(-o.y/p),$=Math.PI/2-2*Math.atan(R),ee=0,oe=.1,we;ee<15&&Math.abs(oe)>1e-7;ee++)we=A*Math.sin($),we=Math.pow((1-we)/(1+we),A/2),oe=Math.PI/2-2*Math.atan(R*we)-$,$+=oe;return new Se($*u,o.x*u/p)}},Rd={__proto__:null,LonLat:Nd,Mercator:Sl,SphericalMercator:lt},Md=t({},tt,{code:"EPSG:3395",projection:Sl,transformation:function(){var o=.5/(Math.PI*Sl.R);return Ht(o,.5,-o,.5)}()}),Ic=t({},tt,{code:"EPSG:4326",projection:Nd,transformation:Ht(1/180,1,-1/180,.5)}),dm=t({},it,{projection:Nd,transformation:Ht(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,u){var p=u.lng-o.lng,b=u.lat-o.lat;return Math.sqrt(p*p+b*b)},infinite:!0});it.Earth=tt,it.EPSG3395=Md,it.EPSG3857=At,it.EPSG900913=st,it.EPSG4326=Ic,it.Simple=dm;var qi=Ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[l(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[l(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var u=o.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Bt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var u=l(o);return this._layers[u]?this:(this._layers[u]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var u=l(o);return this._layers[u]?(this._loaded&&o.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return l(o)in this._layers},eachLayer:function(o,u){for(var p in this._layers)o.call(u,this._layers[p]);return this},_addLayers:function(o){o=o?P(o)?o:[o]:[];for(var u=0,p=o.length;u<p;u++)this.addLayer(o[u])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[l(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var u=l(o);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,u=-1/0,p=this._getZoomSpan();for(var b in this._zoomBoundLayers){var A=this._zoomBoundLayers[b].options;o=A.minZoom===void 0?o:Math.min(o,A.minZoom),u=A.maxZoom===void 0?u:Math.max(u,A.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Po=qi.extend({initialize:function(o,u){C(this,u),this._layers={};var p,b;if(o)for(p=0,b=o.length;p<b;p++)this.addLayer(o[p])},addLayer:function(o){var u=this.getLayerId(o);return this._layers[u]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var u=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(o){var u=typeof o=="number"?o:this.getLayerId(o);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var u=Array.prototype.slice.call(arguments,1),p,b;for(p in this._layers)b=this._layers[p],b[o]&&b[o].apply(b,u);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,u){for(var p in this._layers)o.call(u,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return l(o)}}),fm=s(function(o,u){return new Po(o,u)},"layerGroup"),Cs=Po.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Po.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Po.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ge;for(var u in this._layers){var p=this._layers[u];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),Vb=s(function(o,u){return new Cs(o,u)},"featureGroup"),wa=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){C(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,u){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(b,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(o,u){var p=this.options,b=p[u+"Size"];typeof b=="number"&&(b=[b,b]);var A=B(b),R=B(u==="shadow"&&p.shadowAnchor||p.iconAnchor||A&&A.divideBy(2,!0));o.className="leaflet-marker-"+u+" "+(p.className||""),R&&(o.style.marginLeft=-R.x+"px",o.style.marginTop=-R.y+"px"),A&&(o.style.width=A.x+"px",o.style.height=A.y+"px")},_createImg:function(o,u){return u=u||document.createElement("img"),u.src=o,u},_getIconUrl:function(o){return Y.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Kb(o){return new wa(o)}s(Kb,"icon");var Cl=wa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Cl.imagePath!="string"&&(Cl.imagePath=this._detectIconPath()),(this.options.imagePath||Cl.imagePath)+wa.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var u=s(function(p,b,A){var R=b.exec(p);return R&&R[A]},"strip");return o=u(o,/^url\((['"])?(.+)\1\)$/,2),o&&u(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Ae("div","leaflet-default-icon-path",document.body),u=De(o,"background-image")||De(o,"backgroundImage");if(document.body.removeChild(o),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),hm=Es.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Ss(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var u=this._marker,p=u._map,b=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,R=br(u._icon),$=p.getPixelBounds(),ee=p.getPixelOrigin(),oe=le($.min._subtract(ee).add(A),$.max._subtract(ee).subtract(A));if(!oe.contains(R)){var we=B((Math.max(oe.max.x,R.x)-oe.max.x)/($.max.x-oe.max.x)-(Math.min(oe.min.x,R.x)-oe.min.x)/($.min.x-oe.min.x),(Math.max(oe.max.y,R.y)-oe.max.y)/($.max.y-oe.max.y)-(Math.min(oe.min.y,R.y)-oe.min.y)/($.min.y-oe.min.y)).multiplyBy(b);p.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),Lt(u._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=se(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(Te(this._panRequest),this._panRequest=se(this._adjustPan.bind(this,o)))},_onDrag:function(o){var u=this._marker,p=u._shadow,b=br(u._icon),A=u._map.layerPointToLatLng(b);p&&Lt(p,b),u._latlng=A,o.latlng=A,o.oldLatLng=this._oldLatLng,u.fire("move",o).fire("drag",o)},_onDragEnd:function(o){Te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),As=qi.extend({options:{icon:new Cl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,u){C(this,u),this._latlng=Fe(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var u=this._latlng;return this._latlng=Fe(o),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),b=!1;p!==this._icon&&(this._icon&&this._removeIcon(),b=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),xe(p,u),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ft(p,"focus",this._panOnFocus,this);var A=o.icon.createShadow(this._shadow),R=!1;A!==this._shadow&&(this._removeShadow(),R=!0),A&&(xe(A,u),A.alt=""),this._shadow=A,o.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&R&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&sn(this._icon,"focus",this._panOnFocus,this),ze(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ze(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Lt(this._icon,o),this._shadow&&Lt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hm)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hm(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&dn(this._icon,o),this._shadow&&dn(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var u=this.options.icon.options,p=u.iconSize?B(u.iconSize):B(0,0),b=u.iconAnchor?B(u.iconAnchor):B(0,0);o.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:p.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Al(o,u){return new As(o,u)}s(Al,"marker");var go=qi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return C(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Dc=go.extend({options:{fill:!0,radius:10},initialize:function(o,u){C(this,u),this._latlng=Fe(o),this._radius=this.options.radius},setLatLng:function(o){var u=this._latlng;return this._latlng=Fe(o),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var u=o&&o.radius||this._radius;return go.prototype.setStyle.call(this,o),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,u=this._radiusY||o,p=this._clickTolerance(),b=[o+p,u+p];this._pxBounds=new ie(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Wb(o,u){return new Dc(o,u)}s(Wb,"circleMarker");var Ld=Dc.extend({initialize:function(o,u,p){if(typeof u=="number"&&(u=t({},p,{radius:u})),C(this,u),this._latlng=Fe(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ge(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:go.prototype.setStyle,_project:function(){var o=this._latlng.lng,u=this._latlng.lat,p=this._map,b=p.options.crs;if(b.distance===tt.distance){var A=Math.PI/180,R=this._mRadius/tt.R/A,$=p.project([u+R,o]),ee=p.project([u-R,o]),oe=$.add(ee).divideBy(2),we=p.unproject(oe).lat,je=Math.acos((Math.cos(R*A)-Math.sin(u*A)*Math.sin(we*A))/(Math.cos(u*A)*Math.cos(we*A)))/A;(isNaN(je)||je===0)&&(je=R/Math.cos(Math.PI/180*u)),this._point=oe.subtract(p.getPixelOrigin()),this._radius=isNaN(je)?0:oe.x-p.project([we,o-je]).x,this._radiusY=oe.y-$.y}else{var dt=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(dt).x}this._updateBounds()}});function Gb(o,u,p){return new Ld(o,u,p)}s(Gb,"circle");var Ts=go.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,u){C(this,u),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var u=1/0,p=null,b=xa,A,R,$=0,ee=this._parts.length;$<ee;$++)for(var oe=this._parts[$],we=1,je=oe.length;we<je;we++){A=oe[we-1],R=oe[we];var dt=b(o,A,R,!0);dt<u&&(u=dt,p=b(o,A,R))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kd(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,u){return u=u||this._defaultShape(),o=Fe(o),u.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ge,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return vi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var u=[],p=vi(o),b=0,A=o.length;b<A;b++)p?(u[b]=Fe(o[b]),this._bounds.extend(u[b])):u[b]=this._convertLatLngs(o[b]);return u},_project:function(){var o=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),u=new F(o,o);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(o,u,p){var b=o[0]instanceof Se,A=o.length,R,$;if(b){for($=[],R=0;R<A;R++)$[R]=this._map.latLngToLayerPoint(o[R]),p.extend($[R]);u.push($)}else for(R=0;R<A;R++)this._projectLatlngs(o[R],u,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,b,A,R,$,ee,oe;for(p=0,A=0,R=this._rings.length;p<R;p++)for(oe=this._rings[p],b=0,$=oe.length;b<$-1;b++)ee=cm(oe[b],oe[b+1],o,b,!0),ee&&(u[A]=u[A]||[],u[A].push(ee[0]),(ee[1]!==oe[b+1]||b===$-2)&&(u[A].push(ee[1]),A++))}},_simplifyPoints:function(){for(var o=this._parts,u=this.options.smoothFactor,p=0,b=o.length;p<b;p++)o[p]=am(o[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,u){var p,b,A,R,$,ee,oe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,R=this._parts.length;p<R;p++)for(ee=this._parts[p],b=0,$=ee.length,A=$-1;b<$;A=b++)if(!(!u&&b===0)&&lm(o,ee[A],ee[b])<=oe)return!0;return!1}});function mm(o,u){return new Ts(o,u)}s(mm,"polyline"),Ts._flat=um;var Ea=Ts.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return He(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var u=Ts.prototype._convertLatLngs.call(this,o),p=u.length;return p>=2&&u[0]instanceof Se&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(o){Ts.prototype._setLatLngs.call(this,o),vi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,u=this.options.weight,p=new F(u,u);if(o=new ie(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,A=this._rings.length,R;b<A;b++)R=wl(this._rings[b],o,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var u=!1,p,b,A,R,$,ee,oe,we;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(R=0,oe=this._parts.length;R<oe;R++)for(p=this._parts[R],$=0,we=p.length,ee=we-1;$<we;ee=$++)b=p[$],A=p[ee],b.y>o.y!=A.y>o.y&&o.x<(A.x-b.x)*(o.y-b.y)/(A.y-b.y)+b.x&&(u=!u);return u||Ts.prototype._containsPoint.call(this,o,!0)}});function Zb(o,u){return new Ea(o,u)}s(Zb,"polygon");var $s=Cs.extend({initialize:function(o,u){C(this,u),this._layers={},o&&this.addData(o)},addData:function(o){var u=P(o)?o:o.features,p,b,A;if(u){for(p=0,b=u.length;p<b;p++)A=u[p],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var R=this.options;if(R.filter&&!R.filter(o))return this;var $=Tl(o,R);return $?($.feature=Nl(o),$.defaultOptions=$.options,this.resetStyle($),R.onEachFeature&&R.onEachFeature(o,$),this.addLayer($)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=t({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(u){this._setLayerStyle(u,o)},this)},_setLayerStyle:function(o,u){o.setStyle&&(typeof u=="function"&&(u=u(o.feature)),o.setStyle(u))}});function Tl(o,u){var p=o.type==="Feature"?o.geometry:o,b=p?p.coordinates:null,A=[],R=u&&u.pointToLayer,$=u&&u.coordsToLatLng||Id,ee,oe,we,je;if(!b&&!p)return null;switch(p.type){case"Point":return ee=$(b),pm(R,o,ee,u);case"MultiPoint":for(we=0,je=b.length;we<je;we++)ee=$(b[we]),A.push(pm(R,o,ee,u));return new Cs(A);case"LineString":case"MultiLineString":return oe=kl(b,p.type==="LineString"?0:1,$),new Ts(oe,u);case"Polygon":case"MultiPolygon":return oe=kl(b,p.type==="Polygon"?1:2,$),new Ea(oe,u);case"GeometryCollection":for(we=0,je=p.geometries.length;we<je;we++){var dt=Tl({geometry:p.geometries[we],type:"Feature",properties:o.properties},u);dt&&A.push(dt)}return new Cs(A);case"FeatureCollection":for(we=0,je=p.features.length;we<je;we++){var Ct=Tl(p.features[we],u);Ct&&A.push(Ct)}return new Cs(A);default:throw new Error("Invalid GeoJSON object.")}}s(Tl,"geometryToLayer");function pm(o,u,p,b){return o?o(u,p):new As(p,b&&b.markersInheritOptions&&b)}s(pm,"_pointToLayer");function Id(o){return new Se(o[1],o[0],o[2])}s(Id,"coordsToLatLng");function kl(o,u,p){for(var b=[],A=0,R=o.length,$;A<R;A++)$=u?kl(o[A],u-1,p):(p||Id)(o[A]),b.push($);return b}s(kl,"coordsToLatLngs");function Dd(o,u){return o=Fe(o),o.alt!==void 0?[v(o.lng,u),v(o.lat,u),v(o.alt,u)]:[v(o.lng,u),v(o.lat,u)]}s(Dd,"latLngToCoords");function Ol(o,u,p,b){for(var A=[],R=0,$=o.length;R<$;R++)A.push(u?Ol(o[R],vi(o[R])?0:u-1,p,b):Dd(o[R],b));return!u&&p&&A.length>0&&A.push(A[0].slice()),A}s(Ol,"latLngsToCoords");function Bo(o,u){return o.feature?t({},o.feature,{geometry:u}):Nl(u)}s(Bo,"getFeature");function Nl(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}s(Nl,"asFeature");var fn={toGeoJSON:function(o){return Bo(this,{type:"Point",coordinates:Dd(this.getLatLng(),o)})}};As.include(fn),Ld.include(fn),Dc.include(fn),Ts.include({toGeoJSON:function(o){var u=!vi(this._latlngs),p=Ol(this._latlngs,u?1:0,!1,o);return Bo(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),Ea.include({toGeoJSON:function(o){var u=!vi(this._latlngs),p=u&&!vi(this._latlngs[0]),b=Ol(this._latlngs,p?2:u?1:0,!0,o);return u||(b=[b]),Bo(this,{type:(p?"Multi":"")+"Polygon",coordinates:b})}}),Po.include({toMultiPoint:function(o){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(o).geometry.coordinates)}),Bo(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(o){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(o);var p=u==="GeometryCollection",b=[];return this.eachLayer(function(A){if(A.toGeoJSON){var R=A.toGeoJSON(o);if(p)b.push(R.geometry);else{var $=Nl(R);$.type==="FeatureCollection"?b.push.apply(b,$.features):b.push($)}}}),p?Bo(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function gm(o,u){return new $s(o,u)}s(gm,"geoJSON");var Sa=gm,Pc=qi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,u,p){this._url=o,this._bounds=Ie(u),C(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ze(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Wt(this._image),this},bringToBack:function(){return this._map&&Sn(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Ie(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",u=this._image=o?this._url:Ae("img");if(xe(u,"leaflet-image-layer"),this._zoomAnimated&&xe(u,"leaflet-zoom-animated"),this.options.className&&xe(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onload=i(this.fire,this,"load"),u.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(o){var u=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;rn(this._image,p,u)},_reset:function(){var o=this._image,u=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();Lt(o,u.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){dn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Yb=s(function(o,u,p){return new Pc(o,u,p)},"imageOverlay"),Rl=Pc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",u=this._image=o?this._url:Ae("video");if(xe(u,"leaflet-image-layer"),this._zoomAnimated&&xe(u,"leaflet-zoom-animated"),this.options.className&&xe(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onloadeddata=i(this.fire,this,"load"),o){for(var p=u.getElementsByTagName("source"),b=[],A=0;A<p.length;A++)b.push(p[A].src);this._url=p.length>0?b:[u.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var $=Ae("source");$.src=this._url[R],u.appendChild($)}}});function Xb(o,u,p){return new Rl(o,u,p)}s(Xb,"videoOverlay");var ym=Pc.extend({_initImage:function(){var o=this._image=this._url;xe(o,"leaflet-image-layer"),this._zoomAnimated&&xe(o,"leaflet-zoom-animated"),this.options.className&&xe(o,this.options.className),o.onselectstart=g,o.onmousemove=g}});function Qb(o,u,p){return new ym(o,u,p)}s(Qb,"svgOverlay");var ls=qi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,u){o&&(o instanceof Se||P(o))?(this._latlng=Fe(o),C(this,u)):(C(this,o),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&dn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&dn(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(dn(this._container,0),this._removeTimeout=setTimeout(i(ze,void 0,this._container),200)):ze(this._container),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Fe(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Wt(this._container),this},bringToBack:function(){return this._map&&Sn(this._container),this},_prepareOpen:function(o){var u=this._source;if(!u._map)return!1;if(u instanceof Cs){u=null;var p=this._source._layers;for(var b in p)if(p[b]._map){u=p[b];break}if(!u)return!1;this._source=u}if(!o)if(u.getCenter)o=u.getCenter();else if(u.getLatLng)o=u.getLatLng();else if(u.getBounds)o=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")o.innerHTML=u;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),u=B(this.options.offset),p=this._getAnchor();this._zoomAnimated?Lt(this._container,o.add(p)):u=u.add(o).add(p);var b=this._containerBottom=-u.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=b+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});Bt.include({_initOverlay:function(o,u,p,b){var A=u;return A instanceof o||(A=new o(b).setContent(u)),p&&A.setLatLng(p),A}}),qi.include({_initOverlay:function(o,u,p,b){var A=p;return A instanceof o?(C(A,b),A._source=this):(A=u&&!b?u:new o(b,this),A.setContent(p)),A}});var Bc=ls.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,ls.prototype.openOn.call(this,o)},onAdd:function(o){ls.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof go||this._source.on("preclick",Ke))},onRemove:function(o){ls.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof go||this._source.off("preclick",Ke))},getEvents:function(){var o=ls.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",u=this._container=Ae("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Ae("div",o+"-content-wrapper",u);if(this._contentNode=Ae("div",o+"-content",p),Hr(u),vr(this._contentNode),ft(u,"contextmenu",Ke),this._tipContainer=Ae("div",o+"-tip-container",u),this._tip=Ae("div",o+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=Ae("a",o+"-close-button",u);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',ft(b,"click",function(A){or(A),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,u=o.style;u.width="",u.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var b=o.offsetHeight,A=this.options.maxHeight,R="leaflet-popup-scrolled";A&&b>A?(u.height=A+"px",xe(o,R)):Xe(o,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();Lt(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,u=parseInt(De(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,b=this._containerWidth,A=new F(this._containerLeft,-p-this._containerBottom);A._add(br(this._container));var R=o.layerPointToContainerPoint(A),$=B(this.options.autoPanPadding),ee=B(this.options.autoPanPaddingTopLeft||$),oe=B(this.options.autoPanPaddingBottomRight||$),we=o.getSize(),je=0,dt=0;R.x+b+oe.x>we.x&&(je=R.x+b-we.x+oe.x),R.x-je-ee.x<0&&(je=R.x-ee.x),R.y+p+oe.y>we.y&&(dt=R.y+p-we.y+oe.y),R.y-dt-ee.y<0&&(dt=R.y-ee.y),(je||dt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([je,dt]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Jb=s(function(o,u){return new Bc(o,u)},"popup");Bt.mergeOptions({closePopupOnClick:!0}),Bt.include({openPopup:function(o,u,p){return this._initOverlay(Bc,o,u,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),qi.include({bindPopup:function(o,u){return this._popup=this._initOverlay(Bc,this._popup,o,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Cs||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Pi(o);var u=o.layer||o.target;if(this._popup._source===u&&!(u instanceof go)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=u,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Ml=ls.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){ls.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){ls.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=ls.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",u=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var u,p,b=this._map,A=this._container,R=b.latLngToContainerPoint(b.getCenter()),$=b.layerPointToContainerPoint(o),ee=this.options.direction,oe=A.offsetWidth,we=A.offsetHeight,je=B(this.options.offset),dt=this._getAnchor();ee==="top"?(u=oe/2,p=we):ee==="bottom"?(u=oe/2,p=0):ee==="center"?(u=oe/2,p=we/2):ee==="right"?(u=0,p=we/2):ee==="left"?(u=oe,p=we/2):$.x<R.x?(ee="right",u=0,p=we/2):(ee="left",u=oe+(je.x+dt.x)*2,p=we/2),o=o.subtract(B(u,p,!0)).add(je).add(dt),Xe(A,"leaflet-tooltip-right"),Xe(A,"leaflet-tooltip-left"),Xe(A,"leaflet-tooltip-top"),Xe(A,"leaflet-tooltip-bottom"),xe(A,"leaflet-tooltip-"+ee),Lt(A,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&dn(this._container,o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(u)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pd=s(function(o,u){return new Ml(o,u)},"tooltip");Bt.include({openTooltip:function(o,u,p){return this._initOverlay(Ml,o,u,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),qi.include({bindTooltip:function(o,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ml,this._tooltip,o,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var u=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Cs||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&(ft(u,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ft(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var u=o.latlng,p,b;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),b=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(u)}});var bm=wa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var u=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Tt(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var b=B(p.bgPos);u.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function ev(o){return new bm(o)}s(ev,"divIcon"),wa.Default=Cl;var Ll=qi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){C(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),ze(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Wt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof F?o:new F(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var u=this.getPane().children,p=-o(-1/0,1/0),b=0,A=u.length,R;b<A;b++)R=u[b].style.zIndex,u[b]!==this._container&&R&&(p=o(p,+R));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){dn(this._container,this.options.opacity);var o=+new Date,u=!1,p=!1;for(var b in this._tiles){var A=this._tiles[b];if(!(!A.current||!A.loaded)){var R=Math.min(1,(o-A.loaded)/200);dn(A.el,R),R<1?u=!0:(A.active?p=!0:this._onOpaqueTile(A),A.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(Te(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,u=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=u-Math.abs(o-p),this._onUpdateLevel(p)):(ze(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var b=this._levels[o],A=this._map;return b||(b=this._levels[o]={},b.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=u,b.origin=A.project(A.unproject(A.getPixelOrigin()),o).round(),b.zoom=o,this._setZoomTransform(b,A.getCenter(),A.getZoom()),g(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var o,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)u=this._tiles[o],u.retain=u.current;for(o in this._tiles)if(u=this._tiles[o],u.current&&!u.active){var b=u.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var u in this._tiles)this._tiles[u].coords.z===o&&this._removeTile(u)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)ze(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,u,p,b){var A=Math.floor(o/2),R=Math.floor(u/2),$=p-1,ee=new F(+A,+R);ee.z=+$;var oe=this._tileCoordsToKey(ee),we=this._tiles[oe];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),$>b?this._retainParent(A,R,$,b):!1)},_retainChildren:function(o,u,p,b){for(var A=2*o;A<2*o+2;A++)for(var R=2*u;R<2*u+2;R++){var $=new F(A,R);$.z=p+1;var ee=this._tileCoordsToKey($),oe=this._tiles[ee];if(oe&&oe.active){oe.retain=!0;continue}else oe&&oe.loaded&&(oe.retain=!0);p+1<b&&this._retainChildren(A,R,p+1,b)}},_resetView:function(o){var u=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var u=this.options;return u.minNativeZoom!==void 0&&o<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<o?u.maxNativeZoom:o},_setView:function(o,u,p,b){var A=Math.round(u);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var R=this.options.updateWhenZooming&&A!==this._tileZoom;(!b||R)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,u)},_setZoomTransforms:function(o,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,u)},_setZoomTransform:function(o,u,p){var b=this._map.getZoomScale(p,o.zoom),A=o.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(u,p)).round();Y.any3d?rn(o.el,A,b):Lt(o.el,A)},_resetGrid:function(){var o=this._map,u=o.options.crs,p=this._tileSize=this.getTileSize(),b=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,u.wrapLng[0]],b).x/p.x),Math.ceil(o.project([0,u.wrapLng[1]],b).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([u.wrapLat[0],0],b).y/p.x),Math.ceil(o.project([u.wrapLat[1],0],b).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),b=u.getZoomScale(p,this._tileZoom),A=u.project(o,this._tileZoom).floor(),R=u.getSize().divideBy(b*2);return new ie(A.subtract(R),A.add(R))},_update:function(o){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(o===void 0&&(o=u.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(o),A=this._pxBoundsToTileRange(b),R=A.getCenter(),$=[],ee=this.options.keepBuffer,oe=new ie(A.getBottomLeft().subtract([ee,-ee]),A.getTopRight().add([ee,-ee]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var je=this._tiles[we].coords;(je.z!==this._tileZoom||!oe.contains(new F(je.x,je.y)))&&(this._tiles[we].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var dt=A.min.y;dt<=A.max.y;dt++)for(var Ct=A.min.x;Ct<=A.max.x;Ct++){var Lr=new F(Ct,dt);if(Lr.z=this._tileZoom,!!this._isValidTile(Lr)){var Xn=this._tiles[this._tileCoordsToKey(Lr)];Xn?Xn.current=!0:$.push(Lr)}}if($.sort(function(Tn,Gs){return Tn.distanceTo(R)-Gs.distanceTo(R)}),$.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ji=document.createDocumentFragment();for(Ct=0;Ct<$.length;Ct++)this._addTile($[Ct],ji);this._level.el.appendChild(ji)}}}},_isValidTile:function(o){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!u.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(o);return Ie(this.options.bounds).overlaps(b)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var u=this._map,p=this.getTileSize(),b=o.scaleBy(p),A=b.add(p),R=u.unproject(b,o.z),$=u.unproject(A,o.z);return[R,$]},_tileCoordsToBounds:function(o){var u=this._tileCoordsToNwSe(o),p=new ge(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var u=o.split(":"),p=new F(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(o){var u=this._tiles[o];u&&(ze(u.el),delete this._tiles[o],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){xe(o,"leaflet-tile");var u=this.getTileSize();o.style.width=u.x+"px",o.style.height=u.y+"px",o.onselectstart=g,o.onmousemove=g,Y.ielt9&&this.options.opacity<1&&dn(o,this.options.opacity)},_addTile:function(o,u){var p=this._getTilePos(o),b=this._tileCoordsToKey(o),A=this.createTile(this._wrapCoords(o),i(this._tileReady,this,o));this._initTile(A),this.createTile.length<2&&se(i(this._tileReady,this,o,null,A)),Lt(A,p),this._tiles[b]={el:A,coords:o,current:!0},u.appendChild(A),this.fire("tileloadstart",{tile:A,coords:o})},_tileReady:function(o,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:o});var b=this._tileCoordsToKey(o);p=this._tiles[b],p&&(p.loaded=+new Date,this._map._fadeAnimated?(dn(p.el,0),Te(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(xe(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?se(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var u=new F(this._wrapX?m(o.x,this._wrapX):o.x,this._wrapY?m(o.y,this._wrapY):o.y);return u.z=o.z,u},_pxBoundsToTileRange:function(o){var u=this.getTileSize();return new ie(o.min.unscaleBy(u).floor(),o.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function vm(o){return new Ll(o)}s(vm,"gridLayer");var qo=Ll.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,u){this._url=o,u=C(this,u),u.detectRetina&&Y.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,u){return this._url===o&&u===void 0&&(u=!0),this._url=o,u||this.redraw(),this},createTile:function(o,u){var p=document.createElement("img");return ft(p,"load",i(this._tileOnLoad,this,u,p)),ft(p,"error",i(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var u={r:Y.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(u.y=p),u["-y"]=p}return O(this._url,t(u,this.options))},_tileOnLoad:function(o,u){Y.ielt9?setTimeout(i(o,this,null,u),0):o(null,u)},_tileOnError:function(o,u,p){var b=this.options.errorTileUrl;b&&u.getAttribute("src")!==b&&(u.src=b),o(p,u)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,b=this.options.zoomOffset;return p&&(o=u-o),o+b},_getSubdomain:function(o){var u=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var o,u;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(u=this._tiles[o].el,u.onload=g,u.onerror=g,!u.complete)){u.src=W;var p=this._tiles[o].coords;ze(u),delete this._tiles[o],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(o){var u=this._tiles[o];if(u)return u.el.setAttribute("src",W),Ll.prototype._removeTile.call(this,o)},_tileReady:function(o,u,p){if(!(!this._map||p&&p.getAttribute("src")===W))return Ll.prototype._tileReady.call(this,o,u,p)}});function Il(o,u){return new qo(o,u)}s(Il,"tileLayer");var Bd=qo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,u){this._url=o;var p=t({},this.defaultWmsParams);for(var b in u)b in this.options||(p[b]=u[b]);u=C(this,u);var A=u.detectRetina&&Y.retina?2:1,R=this.getTileSize();p.width=R.x*A,p.height=R.y*A,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,qo.prototype.onAdd.call(this,o)},getTileUrl:function(o){var u=this._tileCoordsToNwSe(o),p=this._crs,b=le(p.project(u[0]),p.project(u[1])),A=b.min,R=b.max,$=(this._wmsVersion>=1.3&&this._crs===Ic?[A.y,A.x,R.y,R.x]:[A.x,A.y,R.x,R.y]).join(","),ee=qo.prototype.getTileUrl.call(this,o);return ee+k(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$},setParams:function(o,u){return t(this.wmsParams,o),u||this.redraw(),this}});function tv(o,u){return new Bd(o,u)}s(tv,"tileLayerWMS"),qo.WMS=Bd,Il.wms=tv;var Vs=qi.extend({options:{padding:.1},initialize:function(o){C(this,o),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,u){var p=this._map.getZoomScale(u,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,u),R=b.multiplyBy(-p).add(A).subtract(this._map._getNewPixelOrigin(o,u));Y.any3d?rn(this._container,R,p):Lt(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-o)).round();this._bounds=new ie(p,p.add(u.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qc=Vs.extend({options:{tolerance:0},getEvents:function(){var o=Vs.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ft(o,"mousemove",this._onMouseMove,this),ft(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ft(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){Te(this._redrawRequest),delete this._ctx,ze(this._container),sn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var u in this._layers)o=this._layers[u],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vs.prototype._update.call(this);var o=this._bounds,u=this._container,p=o.getSize(),b=Y.retina?2:1;Lt(u,o.min),u.width=b*p.x,u.height=b*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Vs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[l(o)]=o;var u=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var u=o._order,p=u.next,b=u.prev;p?p.prev=b:this._drawLast=b,b?b.next=p:this._drawFirst=p,delete o._order,delete this._layers[l(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var u=o.options.dashArray.split(/[, ]+/),p=[],b,A;for(A=0;A<u.length;A++){if(b=Number(u[A]),isNaN(b))return;p.push(b)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||se(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var u=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(o._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(o._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var u=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)o=b.layer,(!u||o._pxBounds&&o._pxBounds.intersects(u))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,u){if(this._drawing){var p,b,A,R,$=o._parts,ee=$.length,oe=this._ctx;if(ee){for(oe.beginPath(),p=0;p<ee;p++){for(b=0,A=$[p].length;b<A;b++)R=$[p][b],oe[b?"lineTo":"moveTo"](R.x,R.y);u&&oe.closePath()}this._fillStroke(oe,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var u=o._point,p=this._ctx,b=Math.max(Math.round(o._radius),1),A=(Math.max(Math.round(o._radiusY),1)||b)/b;A!==1&&(p.save(),p.scale(1,A)),p.beginPath(),p.arc(u.x,u.y/A,b,0,Math.PI*2,!1),A!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,u){var p=u.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(u.options&&u.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var u=this._map.mouseEventToLayerPoint(o),p,b,A=this._drawFirst;A;A=A.next)p=A.layer,p.options.interactive&&p._containsPoint(u)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(b=p);this._fireEvent(b?[b]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,u)}},_handleMouseOut:function(o){var u=this._hoveredLayer;u&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([u],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,u){if(!this._mouseHoverThrottled){for(var p,b,A=this._drawFirst;A;A=A.next)p=A.layer,p.options.interactive&&p._containsPoint(u)&&(b=p);b!==this._hoveredLayer&&(this._handleMouseOut(o),b&&(xe(this._container,"leaflet-interactive"),this._fireEvent([b],o,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,u,p){this._map._fireDOMEvent(u,p||u.type,o)},_bringToFront:function(o){var u=o._order;if(u){var p=u.next,b=u.prev;if(p)p.prev=b;else return;b?b.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(o)}},_bringToBack:function(o){var u=o._order;if(u){var p=u.next,b=u.prev;if(b)b.next=p;else return;p?p.prev=b:b&&(this._drawLast=b),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(o)}}});function Fc(o){return Y.canvas?new qc(o):null}s(Fc,"canvas");var _i=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),cs={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vs.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var u=o._container=_i("shape");xe(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",o._path=_i("path"),u.appendChild(o._path),this._updateStyle(o),this._layers[l(o)]=o},_addPath:function(o){var u=o._container;this._container.appendChild(u),o.options.interactive&&o.addInteractiveTarget(u)},_removePath:function(o){var u=o._container;ze(u),o.removeInteractiveTarget(u),delete this._layers[l(o)]},_updateStyle:function(o){var u=o._stroke,p=o._fill,b=o.options,A=o._container;A.stroked=!!b.stroke,A.filled=!!b.fill,b.stroke?(u||(u=o._stroke=_i("stroke")),A.appendChild(u),u.weight=b.weight+"px",u.color=b.color,u.opacity=b.opacity,b.dashArray?u.dashStyle=P(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=b.lineCap.replace("butt","flat"),u.joinstyle=b.lineJoin):u&&(A.removeChild(u),o._stroke=null),b.fill?(p||(p=o._fill=_i("fill")),A.appendChild(p),p.color=b.fillColor||b.color,p.opacity=b.fillOpacity):p&&(A.removeChild(p),o._fill=null)},_updateCircle:function(o){var u=o._point.round(),p=Math.round(o._radius),b=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+b+" 0,"+65535*360)},_setPath:function(o,u){o._path.v=u},_bringToFront:function(o){Wt(o._container)},_bringToBack:function(o){Sn(o._container)}},Fo=Y.vml?_i:Mt,Fi=Vs.extend({_initContainer:function(){this._container=Fo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Fo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ze(this._container),sn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vs.prototype._update.call(this);var o=this._bounds,u=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),Lt(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(o){var u=o._path=Fo("path");o.options.className&&xe(u,o.options.className),o.options.interactive&&xe(u,"leaflet-interactive"),this._updateStyle(o),this._layers[l(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){ze(o._path),o.removeInteractiveTarget(o._path),delete this._layers[l(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var u=o._path,p=o.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(o,u){this._setPath(o,nt(o._parts,u))},_updateCircle:function(o){var u=o._point,p=Math.max(Math.round(o._radius),1),b=Math.max(Math.round(o._radiusY),1)||p,A="a"+p+","+b+" 0 1,0 ",R=o._empty()?"M0 0":"M"+(u.x-p)+","+u.y+A+p*2+",0 "+A+-p*2+",0 ";this._setPath(o,R)},_setPath:function(o,u){o._path.setAttribute("d",u)},_bringToFront:function(o){Wt(o._path)},_bringToBack:function(o){Sn(o._path)}});Y.vml&&Fi.include(cs);function Ks(o){return Y.svg||Y.vml?new Fi(o):null}s(Ks,"svg"),Bt.include({getRenderer:function(o){var u=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var u=this._paneRenderers[o];return u===void 0&&(u=this._createRenderer({pane:o}),this._paneRenderers[o]=u),u},_createRenderer:function(o){return this.options.preferCanvas&&Fc(o)||Ks(o)}});var ar=Ea.extend({initialize:function(o,u){Ea.prototype.initialize.call(this,this._boundsToLatLngs(o),u)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Ie(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Ui(o,u){return new ar(o,u)}s(Ui,"rectangle"),Fi.create=Fo,Fi.pointsToPath=nt,$s.geometryToLayer=Tl,$s.coordsToLatLng=Id,$s.coordsToLatLngs=kl,$s.latLngToCoords=Dd,$s.latLngsToCoords=Ol,$s.getFeature=Bo,$s.asFeature=Nl,Bt.mergeOptions({boxZoom:!0});var qd=Es.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){sn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ze(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Mo(),uo(),this._startPoint=this._map.mouseEventToContainerPoint(o),ft(document,{contextmenu:Pi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var u=new ie(this._point,this._startPoint),p=u.getSize();Lt(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(ze(this._box),Xe(this._container,"leaflet-crosshair")),co(),Nr(),sn(document,{contextmenu:Pi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var u=new ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bt.addInitHook("addHandler","boxZoom",qd),Bt.mergeOptions({doubleClickZoom:!0});var xi=Es.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var u=this._map,p=u.getZoom(),b=u.options.zoomDelta,A=o.originalEvent.shiftKey?p-b:p+b;u.options.doubleClickZoom==="center"?u.setZoom(A):u.setZoomAround(o.containerPoint,A)}});Bt.addInitHook("addHandler","doubleClickZoom",xi),Bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ws=Es.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Ss(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xe(this._map._container,"leaflet-grab"),Xe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Ie(this._map.options.maxBounds);this._offsetLimit=le(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,u){return o-(o-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;o.x<u.min.x&&(o.x=this._viscousLimit(o.x,u.min.x)),o.y<u.min.y&&(o.y=this._viscousLimit(o.y,u.min.y)),o.x>u.max.x&&(o.x=this._viscousLimit(o.x,u.max.x)),o.y>u.max.y&&(o.y=this._viscousLimit(o.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,u=Math.round(o/2),p=this._initialWorldOffset,b=this._draggable._newPos.x,A=(b-u+p)%o+u-p,R=(b+u+p)%o-u-p,$=Math.abs(A+p)<Math.abs(R+p)?A:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$},_onDragEnd:function(o){var u=this._map,p=u.options,b=!p.inertia||o.noInertia||this._times.length<2;if(u.fire("dragend",o),b)u.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,$=p.easeLinearity,ee=A.multiplyBy($/R),oe=ee.distanceTo([0,0]),we=Math.min(p.inertiaMaxSpeed,oe),je=ee.multiplyBy(we/oe),dt=we/(p.inertiaDeceleration*$),Ct=je.multiplyBy(-dt/2).round();!Ct.x&&!Ct.y?u.fire("moveend"):(Ct=u._limitOffset(Ct,u.options.maxBounds),se(function(){u.panBy(Ct,{duration:dt,easeLinearity:$,noMoveStart:!0,animate:!0})}))}}});Bt.addInitHook("addHandler","dragging",Ws),Bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Dl=Es.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ft(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),sn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,u=document.documentElement,p=o.scrollTop||u.scrollTop,b=o.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(b,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var u=this._panKeys={},p=this.keyCodes,b,A;for(b=0,A=p.left.length;b<A;b++)u[p.left[b]]=[-1*o,0];for(b=0,A=p.right.length;b<A;b++)u[p.right[b]]=[o,0];for(b=0,A=p.down.length;b<A;b++)u[p.down[b]]=[0,o];for(b=0,A=p.up.length;b<A;b++)u[p.up[b]]=[0,-1*o]},_setZoomDelta:function(o){var u=this._zoomKeys={},p=this.keyCodes,b,A;for(b=0,A=p.zoomIn.length;b<A;b++)u[p.zoomIn[b]]=o;for(b=0,A=p.zoomOut.length;b<A;b++)u[p.zoomOut[b]]=-o},_addHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){sn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var u=o.keyCode,p=this._map,b;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(b=this._panKeys[u],o.shiftKey&&(b=B(b).multiplyBy(3)),p.options.maxBounds&&(b=p._limitOffset(B(b),p.options.maxBounds)),p.options.worldCopyJump){var A=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(b)));p.panTo(A)}else p.panBy(b)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Pi(o)}}});Bt.addInitHook("addHandler","keyboard",Dl),Bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _m=Es.extend({addHooks:function(){ft(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){sn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var u=Hs(o),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var b=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),b),Pi(o)},_performZoom:function(){var o=this._map,u=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,R=p?Math.ceil(A/p)*p:A,$=o._limitZoom(u+(this._delta>0?R:-R))-u;this._delta=0,this._startTime=null,$&&(o.options.scrollWheelZoom==="center"?o.setZoom(u+$):o.setZoomAround(this._lastMousePos,u+$))}});Bt.addInitHook("addHandler","scrollWheelZoom",_m);var Fd=600;Bt.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var Uc=Es.extend({addHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){sn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var u=o.touches[0];this._startPos=this._newPos=new F(u.clientX,u.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(ft(document,"touchend",or),ft(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Fd),ft(document,"touchend touchcancel contextmenu",this._cancel,this),ft(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:s(function o(){sn(document,"touchend",or),sn(document,"touchend touchcancel",o)},"cancelClickPrevent"),_cancel:function(){clearTimeout(this._holdTimeout),sn(document,"touchend touchcancel contextmenu",this._cancel,this),sn(document,"touchmove",this._onMove,this)},_onMove:function(o){var u=o.touches[0];this._newPos=new F(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,u){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});Bt.addInitHook("addHandler","tapHold",Uc),Bt.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var jc=Es.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),sn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var u=this._map;if(!(!o.touches||o.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(o.touches[0]),b=u.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(b)._divideBy(2))),this._startDist=p.distanceTo(b),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),ft(document,"touchmove",this._onTouchMove,this),ft(document,"touchend touchcancel",this._onTouchEnd,this),or(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(o.touches[0]),b=u.mouseEventToContainerPoint(o.touches[1]),A=p.distanceTo(b)/this._startDist;if(this._zoom=u.getScaleZoom(A,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&A<1||this._zoom>u.getMaxZoom()&&A>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var R=p._add(b)._divideBy(2)._subtract(this._centerPoint);if(A===1&&R.x===0&&R.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),Te(this._animRequest);var $=i(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=se($,this,!0),or(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Te(this._animRequest),sn(document,"touchmove",this._onTouchMove,this),sn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bt.addInitHook("addHandler","touchZoom",jc),Bt.BoxZoom=qd,Bt.DoubleClickZoom=xi,Bt.Drag=Ws,Bt.Keyboard=Dl,Bt.ScrollWheelZoom=_m,Bt.TapHold=Uc,Bt.TouchZoom=jc,n.Bounds=ie,n.Browser=Y,n.CRS=it,n.Canvas=qc,n.Circle=Ld,n.CircleMarker=Dc,n.Class=ne,n.Control=os,n.DivIcon=bm,n.DivOverlay=ls,n.DomEvent=om,n.DomUtil=_l,n.Draggable=Ss,n.Evented=Ne,n.FeatureGroup=Cs,n.GeoJSON=$s,n.GridLayer=Ll,n.Handler=Es,n.Icon=wa,n.ImageOverlay=Pc,n.LatLng=Se,n.LatLngBounds=ge,n.Layer=qi,n.LayerGroup=Po,n.LineUtil=Od,n.Map=Bt,n.Marker=As,n.Mixin=_a,n.Path=go,n.Point=F,n.PolyUtil=jb,n.Polygon=Ea,n.Polyline=Ts,n.Popup=Bc,n.PosAnimation=_d,n.Projection=Rd,n.Rectangle=ar,n.Renderer=Vs,n.SVG=Fi,n.SVGOverlay=ym,n.TileLayer=qo,n.Tooltip=Ml,n.Transformation=_t,n.Util=K,n.VideoOverlay=Rl,n.bind=i,n.bounds=le,n.canvas=Fc,n.circle=Gb,n.circleMarker=Wb,n.control=ba,n.divIcon=ev,n.extend=t,n.featureGroup=Vb,n.geoJSON=gm,n.geoJson=Sa,n.gridLayer=vm,n.icon=Kb,n.imageOverlay=Yb,n.latLng=Fe,n.latLngBounds=Ie,n.layerGroup=fm,n.map=Mr,n.marker=Al,n.point=B,n.polygon=Zb,n.polyline=mm,n.popup=Jb,n.rectangle=Ui,n.setOptions=C,n.stamp=l,n.svg=Ks,n.svgOverlay=Qb,n.tileLayer=Il,n.tooltip=Pd,n.transformation=Ht,n.version=e,n.videoOverlay=Xb;var xm=window.L;n.noConflict=function(){return window.L=xm,this},window.L=n})});var HT=Dn((Eae,jT)=>{var hs=-1,Ci=1,wr=0;function Xf(n,e,t,r,i){if(n===e)return n?[[wr,n]]:[];if(t!=null){var a=eU(n,e,t);if(a)return a}var l=X0(n,e),d=n.substring(0,l);n=n.substring(l),e=e.substring(l),l=rg(n,e);var m=n.substring(n.length-l);n=n.substring(0,n.length-l),e=e.substring(0,e.length-l);var g=K8(n,e);return d&&g.unshift([wr,d]),m&&g.push([wr,m]),Q0(g,i),r&&Z8(g),g}s(Xf,"diff_main");function K8(n,e){var t;if(!n)return[[Ci,e]];if(!e)return[[hs,n]];var r=n.length>e.length?n:e,i=n.length>e.length?e:n,a=r.indexOf(i);if(a!==-1)return t=[[Ci,r.substring(0,a)],[wr,i],[Ci,r.substring(a+i.length)]],n.length>e.length&&(t[0][0]=t[2][0]=hs),t;if(i.length===1)return[[hs,n],[Ci,e]];var l=G8(n,e);if(l){var d=l[0],m=l[1],g=l[2],v=l[3],_=l[4],E=Xf(d,g),C=Xf(m,v);return E.concat([[wr,_]],C)}return W8(n,e)}s(K8,"diff_compute_");function W8(n,e){for(var t=n.length,r=e.length,i=Math.ceil((t+r)/2),a=i,l=2*i,d=new Array(l),m=new Array(l),g=0;g<l;g++)d[g]=-1,m[g]=-1;d[a+1]=0,m[a+1]=0;for(var v=t-r,_=v%2!==0,E=0,C=0,k=0,D=0,O=0;O<i;O++){for(var P=-O+E;P<=O-C;P+=2){var j=a+P,W;P===-O||P!==O&&d[j-1]<d[j+1]?W=d[j+1]:W=d[j-1]+1;for(var Z=W-P;W<t&&Z<r&&n.charAt(W)===e.charAt(Z);)W++,Z++;if(d[j]=W,W>t)C+=2;else if(Z>r)E+=2;else if(_){var ae=a+v-P;if(ae>=0&&ae<l&&m[ae]!==-1){var he=t-m[ae];if(W>=he)return MT(n,e,W,Z)}}}for(var fe=-O+k;fe<=O-D;fe+=2){var ae=a+fe,he;fe===-O||fe!==O&&m[ae-1]<m[ae+1]?he=m[ae+1]:he=m[ae-1]+1;for(var z=he-fe;he<t&&z<r&&n.charAt(t-he-1)===e.charAt(r-z-1);)he++,z++;if(m[ae]=he,he>t)D+=2;else if(z>r)k+=2;else if(!_){var j=a+v-fe;if(j>=0&&j<l&&d[j]!==-1){var W=d[j],Z=a+W-j;if(he=t-he,W>=he)return MT(n,e,W,Z)}}}}return[[hs,n],[Ci,e]]}s(W8,"diff_bisect_");function MT(n,e,t,r){var i=n.substring(0,t),a=e.substring(0,r),l=n.substring(t),d=e.substring(r),m=Xf(i,a),g=Xf(l,d);return m.concat(g)}s(MT,"diff_bisectSplit_");function X0(n,e){if(!n||!e||n.charAt(0)!==e.charAt(0))return 0;for(var t=0,r=Math.min(n.length,e.length),i=r,a=0;t<i;)n.substring(a,i)==e.substring(a,i)?(t=i,a=t):r=i,i=Math.floor((r-t)/2+t);return BT(n.charCodeAt(i-1))&&i--,i}s(X0,"diff_commonPrefix");function LT(n,e){var t=n.length,r=e.length;if(t==0||r==0)return 0;t>r?n=n.substring(t-r):t<r&&(e=e.substring(0,t));var i=Math.min(t,r);if(n==e)return i;for(var a=0,l=1;;){var d=n.substring(i-l),m=e.indexOf(d);if(m==-1)return a;l+=m,(m==0||n.substring(i-l)==e.substring(0,l))&&(a=l,l++)}}s(LT,"diff_commonOverlap_");function rg(n,e){if(!n||!e||n.slice(-1)!==e.slice(-1))return 0;for(var t=0,r=Math.min(n.length,e.length),i=r,a=0;t<i;)n.substring(n.length-i,n.length-a)==e.substring(e.length-i,e.length-a)?(t=i,a=t):r=i,i=Math.floor((r-t)/2+t);return qT(n.charCodeAt(n.length-i))&&i--,i}s(rg,"diff_commonSuffix");function G8(n,e){var t=n.length>e.length?n:e,r=n.length>e.length?e:n;if(t.length<4||r.length*2<t.length)return null;function i(C,k,D){for(var O=C.substring(D,D+Math.floor(C.length/4)),P=-1,j="",W,Z,ae,he;(P=k.indexOf(O,P+1))!==-1;){var fe=X0(C.substring(D),k.substring(P)),z=rg(C.substring(0,D),k.substring(0,P));j.length<z+fe&&(j=k.substring(P-z,P)+k.substring(P,P+fe),W=C.substring(0,D-z),Z=C.substring(D+fe),ae=k.substring(0,P-z),he=k.substring(P+fe))}return j.length*2>=C.length?[W,Z,ae,he,j]:null}s(i,"diff_halfMatchI_");var a=i(t,r,Math.ceil(t.length/4)),l=i(t,r,Math.ceil(t.length/2)),d;if(!a&&!l)return null;l?a?d=a[4].length>l[4].length?a:l:d=l:d=a;var m,g,v,_;n.length>e.length?(m=d[0],g=d[1],v=d[2],_=d[3]):(v=d[0],_=d[1],m=d[2],g=d[3]);var E=d[4];return[m,g,v,_,E]}s(G8,"diff_halfMatch_");function Z8(n){for(var e=!1,t=[],r=0,i=null,a=0,l=0,d=0,m=0,g=0;a<n.length;)n[a][0]==wr?(t[r++]=a,l=m,d=g,m=0,g=0,i=n[a][1]):(n[a][0]==Ci?m+=n[a][1].length:g+=n[a][1].length,i&&i.length<=Math.max(l,d)&&i.length<=Math.max(m,g)&&(n.splice(t[r-1],0,[hs,i]),n[t[r-1]+1][0]=Ci,r--,r--,a=r>0?t[r-1]:-1,l=0,d=0,m=0,g=0,i=null,e=!0)),a++;for(e&&Q0(n),Q8(n),a=1;a<n.length;){if(n[a-1][0]==hs&&n[a][0]==Ci){var v=n[a-1][1],_=n[a][1],E=LT(v,_),C=LT(_,v);E>=C?(E>=v.length/2||E>=_.length/2)&&(n.splice(a,0,[wr,_.substring(0,E)]),n[a-1][1]=v.substring(0,v.length-E),n[a+1][1]=_.substring(E),a++):(C>=v.length/2||C>=_.length/2)&&(n.splice(a,0,[wr,v.substring(0,C)]),n[a-1][0]=Ci,n[a-1][1]=_.substring(0,_.length-C),n[a+1][0]=hs,n[a+1][1]=v.substring(C),a++),a++}a++}}s(Z8,"diff_cleanupSemantic");var IT=/[^a-zA-Z0-9]/,DT=/\s/,PT=/[\r\n]/,Y8=/\n\r?\n$/,X8=/^\r?\n\r?\n/;function Q8(n){function e(C,k){if(!C||!k)return 6;var D=C.charAt(C.length-1),O=k.charAt(0),P=D.match(IT),j=O.match(IT),W=P&&D.match(DT),Z=j&&O.match(DT),ae=W&&D.match(PT),he=Z&&O.match(PT),fe=ae&&C.match(Y8),z=he&&k.match(X8);return fe||z?5:ae||he?4:P&&!W&&Z?3:W||Z?2:P||j?1:0}s(e,"diff_cleanupSemanticScore_");for(var t=1;t<n.length-1;){if(n[t-1][0]==wr&&n[t+1][0]==wr){var r=n[t-1][1],i=n[t][1],a=n[t+1][1],l=rg(r,i);if(l){var d=i.substring(i.length-l);r=r.substring(0,r.length-l),i=d+i.substring(0,i.length-l),a=d+a}for(var m=r,g=i,v=a,_=e(r,i)+e(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var E=e(r,i)+e(i,a);E>=_&&(_=E,m=r,g=i,v=a)}n[t-1][1]!=m&&(m?n[t-1][1]=m:(n.splice(t-1,1),t--),n[t][1]=g,v?n[t+1][1]=v:(n.splice(t+1,1),t--))}t++}}s(Q8,"diff_cleanupSemanticLossless");function Q0(n,e){n.push([wr,""]);for(var t=0,r=0,i=0,a="",l="",d;t<n.length;){if(t<n.length-1&&!n[t][1]){n.splice(t,1);continue}switch(n[t][0]){case Ci:i++,l+=n[t][1],t++;break;case hs:r++,a+=n[t][1],t++;break;case wr:var m=t-i-r-1;if(e){if(m>=0&&UT(n[m][1])){var g=n[m][1].slice(-1);if(n[m][1]=n[m][1].slice(0,-1),a=g+a,l=g+l,!n[m][1]){n.splice(m,1),t--;var v=m-1;n[v]&&n[v][0]===Ci&&(i++,l=n[v][1]+l,v--),n[v]&&n[v][0]===hs&&(r++,a=n[v][1]+a,v--),m=v}}if(FT(n[t][1])){var g=n[t][1].charAt(0);n[t][1]=n[t][1].slice(1),a+=g,l+=g}}if(t<n.length-1&&!n[t][1]){n.splice(t,1);break}if(a.length>0||l.length>0){a.length>0&&l.length>0&&(d=X0(l,a),d!==0&&(m>=0?n[m][1]+=l.substring(0,d):(n.splice(0,0,[wr,l.substring(0,d)]),t++),l=l.substring(d),a=a.substring(d)),d=rg(l,a),d!==0&&(n[t][1]=l.substring(l.length-d)+n[t][1],l=l.substring(0,l.length-d),a=a.substring(0,a.length-d)));var _=i+r;a.length===0&&l.length===0?(n.splice(t-_,_),t=t-_):a.length===0?(n.splice(t-_,_,[Ci,l]),t=t-_+1):l.length===0?(n.splice(t-_,_,[hs,a]),t=t-_+1):(n.splice(t-_,_,[hs,a],[Ci,l]),t=t-_+2)}t!==0&&n[t-1][0]===wr?(n[t-1][1]+=n[t][1],n.splice(t,1)):t++,i=0,r=0,a="",l="";break}}n[n.length-1][1]===""&&n.pop();var E=!1;for(t=1;t<n.length-1;)n[t-1][0]===wr&&n[t+1][0]===wr&&(n[t][1].substring(n[t][1].length-n[t-1][1].length)===n[t-1][1]?(n[t][1]=n[t-1][1]+n[t][1].substring(0,n[t][1].length-n[t-1][1].length),n[t+1][1]=n[t-1][1]+n[t+1][1],n.splice(t-1,1),E=!0):n[t][1].substring(0,n[t+1][1].length)==n[t+1][1]&&(n[t-1][1]+=n[t+1][1],n[t][1]=n[t][1].substring(n[t+1][1].length)+n[t+1][1],n.splice(t+1,1),E=!0)),t++;E&&Q0(n,e)}s(Q0,"diff_cleanupMerge");function BT(n){return n>=55296&&n<=56319}s(BT,"is_surrogate_pair_start");function qT(n){return n>=56320&&n<=57343}s(qT,"is_surrogate_pair_end");function FT(n){return qT(n.charCodeAt(0))}s(FT,"starts_with_pair_end");function UT(n){return BT(n.charCodeAt(n.length-1))}s(UT,"ends_with_pair_start");function J8(n){for(var e=[],t=0;t<n.length;t++)n[t][1].length>0&&e.push(n[t]);return e}s(J8,"remove_empty_tuples");function Y0(n,e,t,r){return UT(n)||FT(r)?null:J8([[wr,n],[hs,e],[Ci,t],[wr,r]])}s(Y0,"make_edit_splice");function eU(n,e,t){var r=typeof t=="number"?{index:t,length:0}:t.oldRange,i=typeof t=="number"?null:t.newRange,a=n.length,l=e.length;if(r.length===0&&(i===null||i.length===0)){var d=r.index,m=n.slice(0,d),g=n.slice(d),v=i?i.index:null;e:{var _=d+l-a;if(v!==null&&v!==_||_<0||_>l)break e;var E=e.slice(0,_),C=e.slice(_);if(C!==g)break e;var k=Math.min(d,_),D=m.slice(0,k),O=E.slice(0,k);if(D!==O)break e;var P=m.slice(k),j=E.slice(k);return Y0(D,P,j,g)}e:{if(v!==null&&v!==d)break e;var W=d,E=e.slice(0,W),C=e.slice(W);if(E!==m)break e;var Z=Math.min(a-W,l-W),ae=g.slice(g.length-Z),he=C.slice(C.length-Z);if(ae!==he)break e;var P=g.slice(0,g.length-Z),j=C.slice(0,C.length-Z);return Y0(m,P,j,ae)}}if(r.length>0&&i&&i.length===0)e:{var D=n.slice(0,r.index),ae=n.slice(r.index+r.length),k=D.length,Z=ae.length;if(l<k+Z)break e;var O=e.slice(0,k),he=e.slice(l-Z);if(D!==O||ae!==he)break e;var P=n.slice(k,a-Z),j=e.slice(k,l-Z);return Y0(D,P,j,ae)}return null}s(eU,"find_cursor_edit_diff");function ig(n,e,t,r){return Xf(n,e,t,r,!0)}s(ig,"diff");ig.INSERT=Ci;ig.DELETE=hs;ig.EQUAL=wr;jT.exports=ig});var h_=Dn((Qf,Ru)=>{var tU=200,ek="__lodash_hash_undefined__",tk=9007199254740991,o_="[object Arguments]",nU="[object Array]",nk="[object Boolean]",rk="[object Date]",rU="[object Error]",a_="[object Function]",ik="[object GeneratorFunction]",sg="[object Map]",sk="[object Number]",l_="[object Object]",zT="[object Promise]",ok="[object RegExp]",og="[object Set]",ak="[object String]",lk="[object Symbol]",e_="[object WeakMap]",ck="[object ArrayBuffer]",ag="[object DataView]",uk="[object Float32Array]",dk="[object Float64Array]",fk="[object Int8Array]",hk="[object Int16Array]",mk="[object Int32Array]",pk="[object Uint8Array]",gk="[object Uint8ClampedArray]",yk="[object Uint16Array]",bk="[object Uint32Array]",iU=/[\\^$.*+?()[\]{}|]/g,sU=/\w*$/,oU=/^\[object .+?Constructor\]$/,aU=/^(?:0|[1-9]\d*)$/,On={};On[o_]=On[nU]=On[ck]=On[ag]=On[nk]=On[rk]=On[uk]=On[dk]=On[fk]=On[hk]=On[mk]=On[sg]=On[sk]=On[l_]=On[ok]=On[og]=On[ak]=On[lk]=On[pk]=On[gk]=On[yk]=On[bk]=!0;On[rU]=On[a_]=On[e_]=!1;var lU=typeof global=="object"&&global&&global.Object===Object&&global,cU=typeof self=="object"&&self&&self.Object===Object&&self,Qo=lU||cU||Function("return this")(),vk=typeof Qf=="object"&&Qf&&!Qf.nodeType&&Qf,$T=vk&&typeof Ru=="object"&&Ru&&!Ru.nodeType&&Ru,uU=$T&&$T.exports===vk;function dU(n,e){return n.set(e[0],e[1]),n}s(dU,"addMapEntry");function fU(n,e){return n.add(e),n}s(fU,"addSetEntry");function hU(n,e){for(var t=-1,r=n?n.length:0;++t<r&&e(n[t],t,n)!==!1;);return n}s(hU,"arrayEach");function mU(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}s(mU,"arrayPush");function _k(n,e,t,r){var i=-1,a=n?n.length:0;for(r&&a&&(t=n[++i]);++i<a;)t=e(t,n[i],i,n);return t}s(_k,"arrayReduce");function pU(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}s(pU,"baseTimes");function gU(n,e){return n?.[e]}s(gU,"getValue");function xk(n){var e=!1;if(n!=null&&typeof n.toString!="function")try{e=!!(n+"")}catch{}return e}s(xk,"isHostObject");function VT(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}s(VT,"mapToArray");function c_(n,e){return function(t){return n(e(t))}}s(c_,"overArg");function KT(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}s(KT,"setToArray");var yU=Array.prototype,bU=Function.prototype,lg=Object.prototype,J0=Qo["__core-js_shared__"],WT=function(){var n=/[^.]+$/.exec(J0&&J0.keys&&J0.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),wk=bU.toString,Xa=lg.hasOwnProperty,cg=lg.toString,vU=RegExp("^"+wk.call(Xa).replace(iU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),GT=uU?Qo.Buffer:void 0,ZT=Qo.Symbol,YT=Qo.Uint8Array,_U=c_(Object.getPrototypeOf,Object),xU=Object.create,wU=lg.propertyIsEnumerable,EU=yU.splice,XT=Object.getOwnPropertySymbols,SU=GT?GT.isBuffer:void 0,CU=c_(Object.keys,Object),t_=Iu(Qo,"DataView"),Jf=Iu(Qo,"Map"),n_=Iu(Qo,"Promise"),r_=Iu(Qo,"Set"),i_=Iu(Qo,"WeakMap"),eh=Iu(Object,"create"),AU=rc(t_),TU=rc(Jf),kU=rc(n_),OU=rc(r_),NU=rc(i_),QT=ZT?ZT.prototype:void 0,JT=QT?QT.valueOf:void 0;function nc(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(nc,"Hash");function RU(){this.__data__=eh?eh(null):{}}s(RU,"hashClear");function MU(n){return this.has(n)&&delete this.__data__[n]}s(MU,"hashDelete");function LU(n){var e=this.__data__;if(eh){var t=e[n];return t===ek?void 0:t}return Xa.call(e,n)?e[n]:void 0}s(LU,"hashGet");function IU(n){var e=this.__data__;return eh?e[n]!==void 0:Xa.call(e,n)}s(IU,"hashHas");function DU(n,e){var t=this.__data__;return t[n]=eh&&e===void 0?ek:e,this}s(DU,"hashSet");nc.prototype.clear=RU;nc.prototype.delete=MU;nc.prototype.get=LU;nc.prototype.has=IU;nc.prototype.set=DU;function Jo(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(Jo,"ListCache");function PU(){this.__data__=[]}s(PU,"listCacheClear");function BU(n){var e=this.__data__,t=ug(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():EU.call(e,t,1),!0}s(BU,"listCacheDelete");function qU(n){var e=this.__data__,t=ug(e,n);return t<0?void 0:e[t][1]}s(qU,"listCacheGet");function FU(n){return ug(this.__data__,n)>-1}s(FU,"listCacheHas");function UU(n,e){var t=this.__data__,r=ug(t,n);return r<0?t.push([n,e]):t[r][1]=e,this}s(UU,"listCacheSet");Jo.prototype.clear=PU;Jo.prototype.delete=BU;Jo.prototype.get=qU;Jo.prototype.has=FU;Jo.prototype.set=UU;function Mu(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(Mu,"MapCache");function jU(){this.__data__={hash:new nc,map:new(Jf||Jo),string:new nc}}s(jU,"mapCacheClear");function HU(n){return dg(this,n).delete(n)}s(HU,"mapCacheDelete");function zU(n){return dg(this,n).get(n)}s(zU,"mapCacheGet");function $U(n){return dg(this,n).has(n)}s($U,"mapCacheHas");function VU(n,e){return dg(this,n).set(n,e),this}s(VU,"mapCacheSet");Mu.prototype.clear=jU;Mu.prototype.delete=HU;Mu.prototype.get=zU;Mu.prototype.has=$U;Mu.prototype.set=VU;function Lu(n){this.__data__=new Jo(n)}s(Lu,"Stack");function KU(){this.__data__=new Jo}s(KU,"stackClear");function WU(n){return this.__data__.delete(n)}s(WU,"stackDelete");function GU(n){return this.__data__.get(n)}s(GU,"stackGet");function ZU(n){return this.__data__.has(n)}s(ZU,"stackHas");function YU(n,e){var t=this.__data__;if(t instanceof Jo){var r=t.__data__;if(!Jf||r.length<tU-1)return r.push([n,e]),this;t=this.__data__=new Mu(r)}return t.set(n,e),this}s(YU,"stackSet");Lu.prototype.clear=KU;Lu.prototype.delete=WU;Lu.prototype.get=GU;Lu.prototype.has=ZU;Lu.prototype.set=YU;function XU(n,e){var t=d_(n)||xj(n)?pU(n.length,String):[],r=t.length,i=!!r;for(var a in n)(e||Xa.call(n,a))&&!(i&&(a=="length"||yj(a,r)))&&t.push(a);return t}s(XU,"arrayLikeKeys");function Ek(n,e,t){var r=n[e];(!(Xa.call(n,e)&&Tk(r,t))||t===void 0&&!(e in n))&&(n[e]=t)}s(Ek,"assignValue");function ug(n,e){for(var t=n.length;t--;)if(Tk(n[t][0],e))return t;return-1}s(ug,"assocIndexOf");function QU(n,e){return n&&Sk(e,f_(e),n)}s(QU,"baseAssign");function s_(n,e,t,r,i,a,l){var d;if(r&&(d=a?r(n,i,a,l):r(n)),d!==void 0)return d;if(!fg(n))return n;var m=d_(n);if(m){if(d=mj(n),!e)return dj(n,d)}else{var g=tc(n),v=g==a_||g==ik;if(Ej(n))return ij(n,e);if(g==l_||g==o_||v&&!a){if(xk(n))return a?n:{};if(d=pj(v?{}:n),!e)return fj(n,QU(d,n))}else{if(!On[g])return a?n:{};d=gj(n,g,s_,e)}}l||(l=new Lu);var _=l.get(n);if(_)return _;if(l.set(n,d),!m)var E=t?hj(n):f_(n);return hU(E||n,function(C,k){E&&(k=C,C=n[k]),Ek(d,k,s_(C,e,t,r,k,n,l))}),d}s(s_,"baseClone");function JU(n){return fg(n)?xU(n):{}}s(JU,"baseCreate");function ej(n,e,t){var r=e(n);return d_(n)?r:mU(r,t(n))}s(ej,"baseGetAllKeys");function tj(n){return cg.call(n)}s(tj,"baseGetTag");function nj(n){if(!fg(n)||vj(n))return!1;var e=Ok(n)||xk(n)?vU:oU;return e.test(rc(n))}s(nj,"baseIsNative");function rj(n){if(!Ak(n))return CU(n);var e=[];for(var t in Object(n))Xa.call(n,t)&&t!="constructor"&&e.push(t);return e}s(rj,"baseKeys");function ij(n,e){if(e)return n.slice();var t=new n.constructor(n.length);return n.copy(t),t}s(ij,"cloneBuffer");function u_(n){var e=new n.constructor(n.byteLength);return new YT(e).set(new YT(n)),e}s(u_,"cloneArrayBuffer");function sj(n,e){var t=e?u_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}s(sj,"cloneDataView");function oj(n,e,t){var r=e?t(VT(n),!0):VT(n);return _k(r,dU,new n.constructor)}s(oj,"cloneMap");function aj(n){var e=new n.constructor(n.source,sU.exec(n));return e.lastIndex=n.lastIndex,e}s(aj,"cloneRegExp");function lj(n,e,t){var r=e?t(KT(n),!0):KT(n);return _k(r,fU,new n.constructor)}s(lj,"cloneSet");function cj(n){return JT?Object(JT.call(n)):{}}s(cj,"cloneSymbol");function uj(n,e){var t=e?u_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}s(uj,"cloneTypedArray");function dj(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}s(dj,"copyArray");function Sk(n,e,t,r){t||(t={});for(var i=-1,a=e.length;++i<a;){var l=e[i],d=r?r(t[l],n[l],l,t,n):void 0;Ek(t,l,d===void 0?n[l]:d)}return t}s(Sk,"copyObject");function fj(n,e){return Sk(n,Ck(n),e)}s(fj,"copySymbols");function hj(n){return ej(n,f_,Ck)}s(hj,"getAllKeys");function dg(n,e){var t=n.__data__;return bj(e)?t[typeof e=="string"?"string":"hash"]:t.map}s(dg,"getMapData");function Iu(n,e){var t=gU(n,e);return nj(t)?t:void 0}s(Iu,"getNative");var Ck=XT?c_(XT,Object):Aj,tc=tj;(t_&&tc(new t_(new ArrayBuffer(1)))!=ag||Jf&&tc(new Jf)!=sg||n_&&tc(n_.resolve())!=zT||r_&&tc(new r_)!=og||i_&&tc(new i_)!=e_)&&(tc=s(function(n){var e=cg.call(n),t=e==l_?n.constructor:void 0,r=t?rc(t):void 0;if(r)switch(r){case AU:return ag;case TU:return sg;case kU:return zT;case OU:return og;case NU:return e_}return e},"getTag"));function mj(n){var e=n.length,t=n.constructor(e);return e&&typeof n[0]=="string"&&Xa.call(n,"index")&&(t.index=n.index,t.input=n.input),t}s(mj,"initCloneArray");function pj(n){return typeof n.constructor=="function"&&!Ak(n)?JU(_U(n)):{}}s(pj,"initCloneObject");function gj(n,e,t,r){var i=n.constructor;switch(e){case ck:return u_(n);case nk:case rk:return new i(+n);case ag:return sj(n,r);case uk:case dk:case fk:case hk:case mk:case pk:case gk:case yk:case bk:return uj(n,r);case sg:return oj(n,r,t);case sk:case ak:return new i(n);case ok:return aj(n);case og:return lj(n,r,t);case lk:return cj(n)}}s(gj,"initCloneByTag");function yj(n,e){return e=e??tk,!!e&&(typeof n=="number"||aU.test(n))&&n>-1&&n%1==0&&n<e}s(yj,"isIndex");function bj(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}s(bj,"isKeyable");function vj(n){return!!WT&&WT in n}s(vj,"isMasked");function Ak(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||lg;return n===t}s(Ak,"isPrototype");function rc(n){if(n!=null){try{return wk.call(n)}catch{}try{return n+""}catch{}}return""}s(rc,"toSource");function _j(n){return s_(n,!0,!0)}s(_j,"cloneDeep");function Tk(n,e){return n===e||n!==n&&e!==e}s(Tk,"eq");function xj(n){return wj(n)&&Xa.call(n,"callee")&&(!wU.call(n,"callee")||cg.call(n)==o_)}s(xj,"isArguments");var d_=Array.isArray;function kk(n){return n!=null&&Sj(n.length)&&!Ok(n)}s(kk,"isArrayLike");function wj(n){return Cj(n)&&kk(n)}s(wj,"isArrayLikeObject");var Ej=SU||Tj;function Ok(n){var e=fg(n)?cg.call(n):"";return e==a_||e==ik}s(Ok,"isFunction");function Sj(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=tk}s(Sj,"isLength");function fg(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}s(fg,"isObject");function Cj(n){return!!n&&typeof n=="object"}s(Cj,"isObjectLike");function f_(n){return kk(n)?XU(n):rj(n)}s(f_,"keys");function Aj(){return[]}s(Aj,"stubArray");function Tj(){return!1}s(Tj,"stubFalse");Ru.exports=_j});var C_=Dn((th,Pu)=>{var kj=200,S_="__lodash_hash_undefined__",_g=1,jk=2,Hk=9007199254740991,hg="[object Arguments]",y_="[object Array]",Oj="[object AsyncFunction]",zk="[object Boolean]",$k="[object Date]",Vk="[object Error]",Kk="[object Function]",Nj="[object GeneratorFunction]",mg="[object Map]",Wk="[object Number]",Rj="[object Null]",Du="[object Object]",Nk="[object Promise]",Mj="[object Proxy]",Gk="[object RegExp]",pg="[object Set]",Zk="[object String]",Lj="[object Symbol]",Ij="[object Undefined]",b_="[object WeakMap]",Yk="[object ArrayBuffer]",gg="[object DataView]",Dj="[object Float32Array]",Pj="[object Float64Array]",Bj="[object Int8Array]",qj="[object Int16Array]",Fj="[object Int32Array]",Uj="[object Uint8Array]",jj="[object Uint8ClampedArray]",Hj="[object Uint16Array]",zj="[object Uint32Array]",$j=/[\\^$.*+?()[\]{}|]/g,Vj=/^\[object .+?Constructor\]$/,Kj=/^(?:0|[1-9]\d*)$/,Bn={};Bn[Dj]=Bn[Pj]=Bn[Bj]=Bn[qj]=Bn[Fj]=Bn[Uj]=Bn[jj]=Bn[Hj]=Bn[zj]=!0;Bn[hg]=Bn[y_]=Bn[Yk]=Bn[zk]=Bn[gg]=Bn[$k]=Bn[Vk]=Bn[Kk]=Bn[mg]=Bn[Wk]=Bn[Du]=Bn[Gk]=Bn[pg]=Bn[Zk]=Bn[b_]=!1;var Xk=typeof global=="object"&&global&&global.Object===Object&&global,Wj=typeof self=="object"&&self&&self.Object===Object&&self,ea=Xk||Wj||Function("return this")(),Qk=typeof th=="object"&&th&&!th.nodeType&&th,Rk=Qk&&typeof Pu=="object"&&Pu&&!Pu.nodeType&&Pu,Jk=Rk&&Rk.exports===Qk,m_=Jk&&Xk.process,Mk=function(){try{return m_&&m_.binding&&m_.binding("util")}catch{}}(),Lk=Mk&&Mk.isTypedArray;function Gj(n,e){for(var t=-1,r=n==null?0:n.length,i=0,a=[];++t<r;){var l=n[t];e(l,t,n)&&(a[i++]=l)}return a}s(Gj,"arrayFilter");function Zj(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}s(Zj,"arrayPush");function Yj(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}s(Yj,"arraySome");function Xj(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}s(Xj,"baseTimes");function Qj(n){return function(e){return n(e)}}s(Qj,"baseUnary");function Jj(n,e){return n.has(e)}s(Jj,"cacheHas");function eH(n,e){return n?.[e]}s(eH,"getValue");function tH(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}s(tH,"mapToArray");function nH(n,e){return function(t){return n(e(t))}}s(nH,"overArg");function rH(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}s(rH,"setToArray");var iH=Array.prototype,sH=Function.prototype,xg=Object.prototype,p_=ea["__core-js_shared__"],eO=sH.toString,Eo=xg.hasOwnProperty,Ik=function(){var n=/[^.]+$/.exec(p_&&p_.keys&&p_.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),tO=xg.toString,oH=RegExp("^"+eO.call(Eo).replace($j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dk=Jk?ea.Buffer:void 0,yg=ea.Symbol,Pk=ea.Uint8Array,nO=xg.propertyIsEnumerable,aH=iH.splice,ic=yg?yg.toStringTag:void 0,Bk=Object.getOwnPropertySymbols,lH=Dk?Dk.isBuffer:void 0,cH=nH(Object.keys,Object),v_=Bu(ea,"DataView"),nh=Bu(ea,"Map"),__=Bu(ea,"Promise"),x_=Bu(ea,"Set"),w_=Bu(ea,"WeakMap"),rh=Bu(Object,"create"),uH=ac(v_),dH=ac(nh),fH=ac(__),hH=ac(x_),mH=ac(w_),qk=yg?yg.prototype:void 0,g_=qk?qk.valueOf:void 0;function sc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(sc,"Hash");function pH(){this.__data__=rh?rh(null):{},this.size=0}s(pH,"hashClear");function gH(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}s(gH,"hashDelete");function yH(n){var e=this.__data__;if(rh){var t=e[n];return t===S_?void 0:t}return Eo.call(e,n)?e[n]:void 0}s(yH,"hashGet");function bH(n){var e=this.__data__;return rh?e[n]!==void 0:Eo.call(e,n)}s(bH,"hashHas");function vH(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=rh&&e===void 0?S_:e,this}s(vH,"hashSet");sc.prototype.clear=pH;sc.prototype.delete=gH;sc.prototype.get=yH;sc.prototype.has=bH;sc.prototype.set=vH;function ta(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(ta,"ListCache");function _H(){this.__data__=[],this.size=0}s(_H,"listCacheClear");function xH(n){var e=this.__data__,t=wg(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():aH.call(e,t,1),--this.size,!0}s(xH,"listCacheDelete");function wH(n){var e=this.__data__,t=wg(e,n);return t<0?void 0:e[t][1]}s(wH,"listCacheGet");function EH(n){return wg(this.__data__,n)>-1}s(EH,"listCacheHas");function SH(n,e){var t=this.__data__,r=wg(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}s(SH,"listCacheSet");ta.prototype.clear=_H;ta.prototype.delete=xH;ta.prototype.get=wH;ta.prototype.has=EH;ta.prototype.set=SH;function oc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(oc,"MapCache");function CH(){this.size=0,this.__data__={hash:new sc,map:new(nh||ta),string:new sc}}s(CH,"mapCacheClear");function AH(n){var e=Eg(this,n).delete(n);return this.size-=e?1:0,e}s(AH,"mapCacheDelete");function TH(n){return Eg(this,n).get(n)}s(TH,"mapCacheGet");function kH(n){return Eg(this,n).has(n)}s(kH,"mapCacheHas");function OH(n,e){var t=Eg(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}s(OH,"mapCacheSet");oc.prototype.clear=CH;oc.prototype.delete=AH;oc.prototype.get=TH;oc.prototype.has=kH;oc.prototype.set=OH;function bg(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new oc;++e<t;)this.add(n[e])}s(bg,"SetCache");function NH(n){return this.__data__.set(n,S_),this}s(NH,"setCacheAdd");function RH(n){return this.__data__.has(n)}s(RH,"setCacheHas");bg.prototype.add=bg.prototype.push=NH;bg.prototype.has=RH;function Ja(n){var e=this.__data__=new ta(n);this.size=e.size}s(Ja,"Stack");function MH(){this.__data__=new ta,this.size=0}s(MH,"stackClear");function LH(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}s(LH,"stackDelete");function IH(n){return this.__data__.get(n)}s(IH,"stackGet");function DH(n){return this.__data__.has(n)}s(DH,"stackHas");function PH(n,e){var t=this.__data__;if(t instanceof ta){var r=t.__data__;if(!nh||r.length<kj-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new oc(r)}return t.set(n,e),this.size=t.size,this}s(PH,"stackSet");Ja.prototype.clear=MH;Ja.prototype.delete=LH;Ja.prototype.get=IH;Ja.prototype.has=DH;Ja.prototype.set=PH;function BH(n,e){var t=vg(n),r=!t&&QH(n),i=!t&&!r&&E_(n),a=!t&&!r&&!i&&cO(n),l=t||r||i||a,d=l?Xj(n.length,String):[],m=d.length;for(var g in n)(e||Eo.call(n,g))&&!(l&&(g=="length"||i&&(g=="offset"||g=="parent")||a&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||WH(g,m)))&&d.push(g);return d}s(BH,"arrayLikeKeys");function wg(n,e){for(var t=n.length;t--;)if(sO(n[t][0],e))return t;return-1}s(wg,"assocIndexOf");function qH(n,e,t){var r=e(n);return vg(n)?r:Zj(r,t(n))}s(qH,"baseGetAllKeys");function sh(n){return n==null?n===void 0?Ij:Rj:ic&&ic in Object(n)?VH(n):XH(n)}s(sh,"baseGetTag");function Fk(n){return ih(n)&&sh(n)==hg}s(Fk,"baseIsArguments");function rO(n,e,t,r,i){return n===e?!0:n==null||e==null||!ih(n)&&!ih(e)?n!==n&&e!==e:FH(n,e,t,r,rO,i)}s(rO,"baseIsEqual");function FH(n,e,t,r,i,a){var l=vg(n),d=vg(e),m=l?y_:Qa(n),g=d?y_:Qa(e);m=m==hg?Du:m,g=g==hg?Du:g;var v=m==Du,_=g==Du,E=m==g;if(E&&E_(n)){if(!E_(e))return!1;l=!0,v=!1}if(E&&!v)return a||(a=new Ja),l||cO(n)?iO(n,e,t,r,i,a):zH(n,e,m,t,r,i,a);if(!(t&_g)){var C=v&&Eo.call(n,"__wrapped__"),k=_&&Eo.call(e,"__wrapped__");if(C||k){var D=C?n.value():n,O=k?e.value():e;return a||(a=new Ja),i(D,O,t,r,a)}}return E?(a||(a=new Ja),$H(n,e,t,r,i,a)):!1}s(FH,"baseIsEqualDeep");function UH(n){if(!lO(n)||ZH(n))return!1;var e=oO(n)?oH:Vj;return e.test(ac(n))}s(UH,"baseIsNative");function jH(n){return ih(n)&&aO(n.length)&&!!Bn[sh(n)]}s(jH,"baseIsTypedArray");function HH(n){if(!YH(n))return cH(n);var e=[];for(var t in Object(n))Eo.call(n,t)&&t!="constructor"&&e.push(t);return e}s(HH,"baseKeys");function iO(n,e,t,r,i,a){var l=t&_g,d=n.length,m=e.length;if(d!=m&&!(l&&m>d))return!1;var g=a.get(n);if(g&&a.get(e))return g==e;var v=-1,_=!0,E=t&jk?new bg:void 0;for(a.set(n,e),a.set(e,n);++v<d;){var C=n[v],k=e[v];if(r)var D=l?r(k,C,v,e,n,a):r(C,k,v,n,e,a);if(D!==void 0){if(D)continue;_=!1;break}if(E){if(!Yj(e,function(O,P){if(!Jj(E,P)&&(C===O||i(C,O,t,r,a)))return E.push(P)})){_=!1;break}}else if(!(C===k||i(C,k,t,r,a))){_=!1;break}}return a.delete(n),a.delete(e),_}s(iO,"equalArrays");function zH(n,e,t,r,i,a,l){switch(t){case gg:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Yk:return!(n.byteLength!=e.byteLength||!a(new Pk(n),new Pk(e)));case zk:case $k:case Wk:return sO(+n,+e);case Vk:return n.name==e.name&&n.message==e.message;case Gk:case Zk:return n==e+"";case mg:var d=tH;case pg:var m=r&_g;if(d||(d=rH),n.size!=e.size&&!m)return!1;var g=l.get(n);if(g)return g==e;r|=jk,l.set(n,e);var v=iO(d(n),d(e),r,i,a,l);return l.delete(n),v;case Lj:if(g_)return g_.call(n)==g_.call(e)}return!1}s(zH,"equalByTag");function $H(n,e,t,r,i,a){var l=t&_g,d=Uk(n),m=d.length,g=Uk(e),v=g.length;if(m!=v&&!l)return!1;for(var _=m;_--;){var E=d[_];if(!(l?E in e:Eo.call(e,E)))return!1}var C=a.get(n);if(C&&a.get(e))return C==e;var k=!0;a.set(n,e),a.set(e,n);for(var D=l;++_<m;){E=d[_];var O=n[E],P=e[E];if(r)var j=l?r(P,O,E,e,n,a):r(O,P,E,n,e,a);if(!(j===void 0?O===P||i(O,P,t,r,a):j)){k=!1;break}D||(D=E=="constructor")}if(k&&!D){var W=n.constructor,Z=e.constructor;W!=Z&&"constructor"in n&&"constructor"in e&&!(typeof W=="function"&&W instanceof W&&typeof Z=="function"&&Z instanceof Z)&&(k=!1)}return a.delete(n),a.delete(e),k}s($H,"equalObjects");function Uk(n){return qH(n,t9,KH)}s(Uk,"getAllKeys");function Eg(n,e){var t=n.__data__;return GH(e)?t[typeof e=="string"?"string":"hash"]:t.map}s(Eg,"getMapData");function Bu(n,e){var t=eH(n,e);return UH(t)?t:void 0}s(Bu,"getNative");function VH(n){var e=Eo.call(n,ic),t=n[ic];try{n[ic]=void 0;var r=!0}catch{}var i=tO.call(n);return r&&(e?n[ic]=t:delete n[ic]),i}s(VH,"getRawTag");var KH=Bk?function(n){return n==null?[]:(n=Object(n),Gj(Bk(n),function(e){return nO.call(n,e)}))}:n9,Qa=sh;(v_&&Qa(new v_(new ArrayBuffer(1)))!=gg||nh&&Qa(new nh)!=mg||__&&Qa(__.resolve())!=Nk||x_&&Qa(new x_)!=pg||w_&&Qa(new w_)!=b_)&&(Qa=s(function(n){var e=sh(n),t=e==Du?n.constructor:void 0,r=t?ac(t):"";if(r)switch(r){case uH:return gg;case dH:return mg;case fH:return Nk;case hH:return pg;case mH:return b_}return e},"getTag"));function WH(n,e){return e=e??Hk,!!e&&(typeof n=="number"||Kj.test(n))&&n>-1&&n%1==0&&n<e}s(WH,"isIndex");function GH(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}s(GH,"isKeyable");function ZH(n){return!!Ik&&Ik in n}s(ZH,"isMasked");function YH(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||xg;return n===t}s(YH,"isPrototype");function XH(n){return tO.call(n)}s(XH,"objectToString");function ac(n){if(n!=null){try{return eO.call(n)}catch{}try{return n+""}catch{}}return""}s(ac,"toSource");function sO(n,e){return n===e||n!==n&&e!==e}s(sO,"eq");var QH=Fk(function(){return arguments}())?Fk:function(n){return ih(n)&&Eo.call(n,"callee")&&!nO.call(n,"callee")},vg=Array.isArray;function JH(n){return n!=null&&aO(n.length)&&!oO(n)}s(JH,"isArrayLike");var E_=lH||r9;function e9(n,e){return rO(n,e)}s(e9,"isEqual");function oO(n){if(!lO(n))return!1;var e=sh(n);return e==Kk||e==Nj||e==Oj||e==Mj}s(oO,"isFunction");function aO(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Hk}s(aO,"isLength");function lO(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}s(lO,"isObject");function ih(n){return n!=null&&typeof n=="object"}s(ih,"isObjectLike");var cO=Lk?Qj(Lk):jH;function t9(n){return JH(n)?BH(n):HH(n)}s(t9,"keys");function n9(){return[]}s(n9,"stubArray");function r9(){return!1}s(r9,"stubFalse");Pu.exports=e9});var uO=Dn(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0});var i9=h_(),s9=C_(),A_;(function(n){function e(a={},l={},d=!1){typeof a!="object"&&(a={}),typeof l!="object"&&(l={});let m=i9(l);d||(m=Object.keys(m).reduce((g,v)=>(m[v]!=null&&(g[v]=m[v]),g),{}));for(let g in a)a[g]!==void 0&&l[g]===void 0&&(m[g]=a[g]);return Object.keys(m).length>0?m:void 0}s(e,"compose"),n.compose=e;function t(a={},l={}){typeof a!="object"&&(a={}),typeof l!="object"&&(l={});let d=Object.keys(a).concat(Object.keys(l)).reduce((m,g)=>(s9(a[g],l[g])||(m[g]=l[g]===void 0?null:l[g]),m),{});return Object.keys(d).length>0?d:void 0}s(t,"diff"),n.diff=t;function r(a={},l={}){a=a||{};let d=Object.keys(l).reduce((m,g)=>(l[g]!==a[g]&&a[g]!==void 0&&(m[g]=l[g]),m),{});return Object.keys(a).reduce((m,g)=>(a[g]!==l[g]&&l[g]===void 0&&(m[g]=null),m),d)}s(r,"invert"),n.invert=r;function i(a,l,d=!1){if(typeof a!="object")return l;if(typeof l!="object")return;if(!d)return l;let m=Object.keys(l).reduce((g,v)=>(a[v]===void 0&&(g[v]=l[v]),g),{});return Object.keys(m).length>0?m:void 0}s(i,"transform"),n.transform=i})(A_||(A_={}));T_.default=A_});var N_=Dn(O_=>{"use strict";Object.defineProperty(O_,"__esModule",{value:!0});var k_;(function(n){function e(t){return typeof t.delete=="number"?t.delete:typeof t.retain=="number"?t.retain:typeof t.retain=="object"&&t.retain!==null?1:typeof t.insert=="string"?t.insert.length:1}s(e,"length"),n.length=e})(k_||(k_={}));O_.default=k_});var fO=Dn(M_=>{"use strict";Object.defineProperty(M_,"__esModule",{value:!0});var dO=N_(),R_=class{static{s(this,"Iterator")}constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);let t=this.ops[this.index];if(t){let r=this.offset,i=dO.default.length(t);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof t.delete=="number")return{delete:e};{let a={};return t.attributes&&(a.attributes=t.attributes),typeof t.retain=="number"?a.retain=e:typeof t.retain=="object"&&t.retain!==null?a.retain=t.retain:typeof t.insert=="string"?a.insert=t.insert.substr(r,e):a.insert=t.insert,a}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?dO.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let e=this.offset,t=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(i)}}else return[]}};M_.default=R_});var ms=Dn((ra,Cg)=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.AttributeMap=ra.OpIterator=ra.Op=void 0;var Sg=HT(),o9=h_(),L_=C_(),lc=uO();ra.AttributeMap=lc.default;var na=N_();ra.Op=na.default;var Ls=fO();ra.OpIterator=Ls.default;var a9="\0",hO=s((n,e)=>{if(typeof n!="object"||n===null)throw new Error(`cannot retain a ${typeof n}`);if(typeof e!="object"||e===null)throw new Error(`cannot retain a ${typeof e}`);let t=Object.keys(n)[0];if(!t||t!==Object.keys(e)[0])throw new Error(`embed types not matched: ${t} != ${Object.keys(e)[0]}`);return[t,n[t],e[t]]},"getEmbedTypeAndData"),ia=class n{static{s(this,"Delta")}constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}static registerEmbed(e,t){this.handlers[e]=t}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let t=this.handlers[e];if(!t)throw new Error(`no handlers for embed type "${e}"`);return t}insert(e,t){let r={};return typeof e=="string"&&e.length===0?this:(r.insert=e,t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if(typeof e=="number"&&e<=0)return this;let r={retain:e};return t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)}push(e){let t=this.ops.length,r=this.ops[t-1];if(e=o9(e),typeof r=="object"){if(typeof e.delete=="number"&&typeof r.delete=="number")return this.ops[t-1]={delete:r.delete+e.delete},this;if(typeof r.delete=="number"&&e.insert!=null&&(t-=1,r=this.ops[t-1],typeof r!="object"))return this.ops.unshift(e),this;if(L_(e.attributes,r.attributes)){if(typeof e.insert=="string"&&typeof r.insert=="string")return this.ops[t-1]={insert:r.insert+e.insert},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof r.retain=="number")return this.ops[t-1]={retain:r.retain+e.retain},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain=="number"&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let t=[],r=[];return this.forEach(i=>{(e(i)?t:r).push(i)}),[t,r]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce((e,t)=>t.insert?e+na.default.length(t):t.delete?e-t.delete:e,0)}length(){return this.reduce((e,t)=>e+na.default.length(t),0)}slice(e=0,t=1/0){let r=[],i=new Ls.default(this.ops),a=0;for(;a<t&&i.hasNext();){let l;a<e?l=i.next(e-a):(l=i.next(t-a),r.push(l)),a+=na.default.length(l)}return new n(r)}compose(e){let t=new Ls.default(this.ops),r=new Ls.default(e.ops),i=[],a=r.peek();if(a!=null&&typeof a.retain=="number"&&a.attributes==null){let d=a.retain;for(;t.peekType()==="insert"&&t.peekLength()<=d;)d-=t.peekLength(),i.push(t.next());a.retain-d>0&&r.next(a.retain-d)}let l=new n(i);for(;t.hasNext()||r.hasNext();)if(r.peekType()==="insert")l.push(r.next());else if(t.peekType()==="delete")l.push(t.next());else{let d=Math.min(t.peekLength(),r.peekLength()),m=t.next(d),g=r.next(d);if(g.retain){let v={};if(typeof m.retain=="number")v.retain=typeof g.retain=="number"?d:g.retain;else if(typeof g.retain=="number")m.retain==null?v.insert=m.insert:v.retain=m.retain;else{let E=m.retain==null?"insert":"retain",[C,k,D]=hO(m[E],g.retain),O=n.getHandler(C);v[E]={[C]:O.compose(k,D,E==="retain")}}let _=lc.default.compose(m.attributes,g.attributes,typeof m.retain=="number");if(_&&(v.attributes=_),l.push(v),!r.hasNext()&&L_(l.ops[l.ops.length-1],v)){let E=new n(t.rest());return l.concat(E).chop()}}else typeof g.delete=="number"&&(typeof m.retain=="number"||typeof m.retain=="object"&&m.retain!==null)&&l.push(g)}return l.chop()}concat(e){let t=new n(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t}diff(e,t){if(this.ops===e.ops)return new n;let r=[this,e].map(m=>m.map(g=>{if(g.insert!=null)return typeof g.insert=="string"?g.insert:a9;let v=m===e?"on":"with";throw new Error("diff() called "+v+" non-document")}).join("")),i=new n,a=Sg(r[0],r[1],t,!0),l=new Ls.default(this.ops),d=new Ls.default(e.ops);return a.forEach(m=>{let g=m[1].length;for(;g>0;){let v=0;switch(m[0]){case Sg.INSERT:v=Math.min(d.peekLength(),g),i.push(d.next(v));break;case Sg.DELETE:v=Math.min(g,l.peekLength()),l.next(v),i.delete(v);break;case Sg.EQUAL:v=Math.min(l.peekLength(),d.peekLength(),g);let _=l.next(v),E=d.next(v);L_(_.insert,E.insert)?i.retain(v,lc.default.diff(_.attributes,E.attributes)):i.push(E).delete(v);break}g-=v}}),i.chop()}eachLine(e,t=`
`){let r=new Ls.default(this.ops),i=new n,a=0;for(;r.hasNext();){if(r.peekType()!=="insert")return;let l=r.peek(),d=na.default.length(l)-r.peekLength(),m=typeof l.insert=="string"?l.insert.indexOf(t,d)-d:-1;if(m<0)i.push(r.next());else if(m>0)i.push(r.next(m));else{if(e(i,r.next(1).attributes||{},a)===!1)return;a+=1,i=new n}}i.length()>0&&e(i,{},a)}invert(e){let t=new n;return this.reduce((r,i)=>{if(i.insert)t.delete(na.default.length(i));else{if(typeof i.retain=="number"&&i.attributes==null)return t.retain(i.retain),r+i.retain;if(i.delete||typeof i.retain=="number"){let a=i.delete||i.retain;return e.slice(r,r+a).forEach(d=>{i.delete?t.push(d):i.retain&&i.attributes&&t.retain(na.default.length(d),lc.default.invert(i.attributes,d.attributes))}),r+a}else if(typeof i.retain=="object"&&i.retain!==null){let a=e.slice(r,r+1),l=new Ls.default(a.ops).next(),[d,m,g]=hO(i.retain,l.insert),v=n.getHandler(d);return t.retain({[d]:v.invert(m,g)},lc.default.invert(i.attributes,l.attributes)),r+1}}return r},0),t.chop()}transform(e,t=!1){if(t=!!t,typeof e=="number")return this.transformPosition(e,t);let r=e,i=new Ls.default(this.ops),a=new Ls.default(r.ops),l=new n;for(;i.hasNext()||a.hasNext();)if(i.peekType()==="insert"&&(t||a.peekType()!=="insert"))l.retain(na.default.length(i.next()));else if(a.peekType()==="insert")l.push(a.next());else{let d=Math.min(i.peekLength(),a.peekLength()),m=i.next(d),g=a.next(d);if(m.delete)continue;if(g.delete)l.push(g);else{let v=m.retain,_=g.retain,E=typeof _=="object"&&_!==null?_:d;if(typeof v=="object"&&v!==null&&typeof _=="object"&&_!==null){let C=Object.keys(v)[0];if(C===Object.keys(_)[0]){let k=n.getHandler(C);k&&(E={[C]:k.transform(v[C],_[C],t)})}}l.retain(E,lc.default.transform(m.attributes,g.attributes,t))}}return l.chop()}transformPosition(e,t=!1){t=!!t;let r=new Ls.default(this.ops),i=0;for(;r.hasNext()&&i<=e;){let a=r.peekLength(),l=r.peekType();if(r.next(),l==="delete"){e-=Math.min(a,e-i);continue}else l==="insert"&&(i<e||!t)&&(e+=a);i+=a}return e}};ia.Op=na.default;ia.OpIterator=Ls.default;ia.AttributeMap=lc.default;ia.handlers={};ra.default=ia;typeof Cg=="object"&&(Cg.exports=ia,Cg.exports.default=ia)});var gO=Dn((tle,q_)=>{"use strict";var l9=Object.prototype.hasOwnProperty,Ai="~";function ah(){}s(ah,"Events");Object.create&&(ah.prototype=Object.create(null),new ah().__proto__||(Ai=!1));function c9(n,e,t){this.fn=n,this.context=e,this.once=t||!1}s(c9,"EE");function pO(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var a=new c9(t,r||n,i),l=Ai?Ai+e:e;return n._events[l]?n._events[l].fn?n._events[l]=[n._events[l],a]:n._events[l].push(a):(n._events[l]=a,n._eventsCount++),n}s(pO,"addListener");function Ag(n,e){--n._eventsCount===0?n._events=new ah:delete n._events[e]}s(Ag,"clearEvent");function oi(){this._events=new ah,this._eventsCount=0}s(oi,"EventEmitter");oi.prototype.eventNames=s(function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)l9.call(t,r)&&e.push(Ai?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},"eventNames");oi.prototype.listeners=s(function(e){var t=Ai?Ai+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,l=new Array(a);i<a;i++)l[i]=r[i].fn;return l},"listeners");oi.prototype.listenerCount=s(function(e){var t=Ai?Ai+e:e,r=this._events[t];return r?r.fn?1:r.length:0},"listenerCount");oi.prototype.emit=s(function(e,t,r,i,a,l){var d=Ai?Ai+e:e;if(!this._events[d])return!1;var m=this._events[d],g=arguments.length,v,_;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,t),!0;case 3:return m.fn.call(m.context,t,r),!0;case 4:return m.fn.call(m.context,t,r,i),!0;case 5:return m.fn.call(m.context,t,r,i,a),!0;case 6:return m.fn.call(m.context,t,r,i,a,l),!0}for(_=1,v=new Array(g-1);_<g;_++)v[_-1]=arguments[_];m.fn.apply(m.context,v)}else{var E=m.length,C;for(_=0;_<E;_++)switch(m[_].once&&this.removeListener(e,m[_].fn,void 0,!0),g){case 1:m[_].fn.call(m[_].context);break;case 2:m[_].fn.call(m[_].context,t);break;case 3:m[_].fn.call(m[_].context,t,r);break;case 4:m[_].fn.call(m[_].context,t,r,i);break;default:if(!v)for(C=1,v=new Array(g-1);C<g;C++)v[C-1]=arguments[C];m[_].fn.apply(m[_].context,v)}}return!0},"emit");oi.prototype.on=s(function(e,t,r){return pO(this,e,t,r,!1)},"on");oi.prototype.once=s(function(e,t,r){return pO(this,e,t,r,!0)},"once");oi.prototype.removeListener=s(function(e,t,r,i){var a=Ai?Ai+e:e;if(!this._events[a])return this;if(!t)return Ag(this,a),this;var l=this._events[a];if(l.fn)l.fn===t&&(!i||l.once)&&(!r||l.context===r)&&Ag(this,a);else{for(var d=0,m=[],g=l.length;d<g;d++)(l[d].fn!==t||i&&!l[d].once||r&&l[d].context!==r)&&m.push(l[d]);m.length?this._events[a]=m.length===1?m[0]:m:Ag(this,a)}return this},"removeListener");oi.prototype.removeAllListeners=s(function(e){var t;return e?(t=Ai?Ai+e:e,this._events[t]&&Ag(this,t)):(this._events=new ah,this._eventsCount=0),this},"removeAllListeners");oi.prototype.off=oi.prototype.removeListener;oi.prototype.addListener=oi.prototype.on;oi.prefixed=Ai;oi.EventEmitter=oi;typeof q_<"u"&&(q_.exports=oi)});var yN=Dn((li,ki)=>{(function(n,e){if(typeof li=="object"&&typeof ki=="object")ki.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t=e();for(var r in t)(typeof li=="object"?li:n)[r]=t[r]}})(self,()=>(()=>{var n={64:(r,i,a)=>{(r.exports=a(765)(!1)).push([r.id,`.ql-html-overlayContainer {
  background: #0000007d;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
}

.ql-html-popupContainer {
  background: #ddd;
  position: absolute;
  top: 5%;
  left: 5%;
  right: 5%;
  bottom: 5%;
  border-radius: 10px;
}

.ql-html-textContainer {
  position: relative;
  height: calc(100% - 40px);
  padding: 20px;
}

.ql-html-textArea {
  background: #fff;
  position: absolute;
  left: 15px;
  width: calc(100% - 30px);
  height: calc(100% - 60px) !important;
}

.ql-html-textArea .ql-syntax {
  word-break: break-all;
  white-space: pre-wrap;
}

.ql-html-buttonCancel {
  margin-right: 20px;
}

.ql-html-popupTitle {
  margin: 0;
  display: block;
  font-style: italic;
}

.ql-html-buttonGroup {
  position: absolute;
  bottom: 20px;
  transform: scale(1.5);
  left: calc(50% - 60px);
}
`,""])},765:r=>{r.exports=function(i){var a=[];return a.toString=function(){return this.map(function(l){var d=function(m,g){var v=m[1]||"",_=m[3];if(!_)return v;if(g&&typeof btoa=="function"){var E=(k=_,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(k))))+" */"),C=_.sources.map(function(D){return"/*# sourceURL="+_.sourceRoot+D+" */"});return[v].concat(C).concat([E]).join(`
`)}var k;return[v].join(`
`)}(l,i);return l[2]?"@media "+l[2]+"{"+d+"}":d}).join("")},a.i=function(l,d){typeof l=="string"&&(l=[[null,l,""]]);for(var m={},g=0;g<this.length;g++){var v=this[g][0];typeof v=="number"&&(m[v]=!0)}for(g=0;g<l.length;g++){var _=l[g];typeof _[0]=="number"&&m[_[0]]||(d&&!_[2]?_[2]=d:d&&(_[2]="("+_[2]+") and ("+d+")"),a.push(_))}},a}},228:r=>{"use strict";var i=Object.prototype.hasOwnProperty,a="~";function l(){}s(l,"r");function d(_,E,C){this.fn=_,this.context=E,this.once=C||!1}s(d,"s");function m(_,E,C,k,D){if(typeof C!="function")throw new TypeError("The listener must be a function");var O=new d(C,k||_,D),P=a?a+E:E;return _._events[P]?_._events[P].fn?_._events[P]=[_._events[P],O]:_._events[P].push(O):(_._events[P]=O,_._eventsCount++),_}s(m,"i");function g(_,E){--_._eventsCount==0?_._events=new l:delete _._events[E]}s(g,"o");function v(){this._events=new l,this._eventsCount=0}s(v,"l"),Object.create&&(l.prototype=Object.create(null),new l().__proto__||(a=!1)),v.prototype.eventNames=function(){var _,E,C=[];if(this._eventsCount===0)return C;for(E in _=this._events)i.call(_,E)&&C.push(a?E.slice(1):E);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(_)):C},v.prototype.listeners=function(_){var E=a?a+_:_,C=this._events[E];if(!C)return[];if(C.fn)return[C.fn];for(var k=0,D=C.length,O=new Array(D);k<D;k++)O[k]=C[k].fn;return O},v.prototype.listenerCount=function(_){var E=a?a+_:_,C=this._events[E];return C?C.fn?1:C.length:0},v.prototype.emit=function(_,E,C,k,D,O){var P=a?a+_:_;if(!this._events[P])return!1;var j,W,Z=this._events[P],ae=arguments.length;if(Z.fn){switch(Z.once&&this.removeListener(_,Z.fn,void 0,!0),ae){case 1:return Z.fn.call(Z.context),!0;case 2:return Z.fn.call(Z.context,E),!0;case 3:return Z.fn.call(Z.context,E,C),!0;case 4:return Z.fn.call(Z.context,E,C,k),!0;case 5:return Z.fn.call(Z.context,E,C,k,D),!0;case 6:return Z.fn.call(Z.context,E,C,k,D,O),!0}for(W=1,j=new Array(ae-1);W<ae;W++)j[W-1]=arguments[W];Z.fn.apply(Z.context,j)}else{var he,fe=Z.length;for(W=0;W<fe;W++)switch(Z[W].once&&this.removeListener(_,Z[W].fn,void 0,!0),ae){case 1:Z[W].fn.call(Z[W].context);break;case 2:Z[W].fn.call(Z[W].context,E);break;case 3:Z[W].fn.call(Z[W].context,E,C);break;case 4:Z[W].fn.call(Z[W].context,E,C,k);break;default:if(!j)for(he=1,j=new Array(ae-1);he<ae;he++)j[he-1]=arguments[he];Z[W].fn.apply(Z[W].context,j)}}return!0},v.prototype.on=function(_,E,C){return m(this,_,E,C,!1)},v.prototype.once=function(_,E,C){return m(this,_,E,C,!0)},v.prototype.removeListener=function(_,E,C,k){var D=a?a+_:_;if(!this._events[D])return this;if(!E)return g(this,D),this;var O=this._events[D];if(O.fn)O.fn!==E||k&&!O.once||C&&O.context!==C||g(this,D);else{for(var P=0,j=[],W=O.length;P<W;P++)(O[P].fn!==E||k&&!O[P].once||C&&O[P].context!==C)&&j.push(O[P]);j.length?this._events[D]=j.length===1?j[0]:j:g(this,D)}return this},v.prototype.removeAllListeners=function(_){var E;return _?(E=a?a+_:_,this._events[E]&&g(this,E)):(this._events=new l,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=a,v.EventEmitter=v,r.exports=v},606:r=>{var i=-1,a=1,l=0;function d(z,se,Te,K,ne){if(z===se)return z?[[l,z]]:[];if(Te!=null){var be=function(B,ie,le){var ge=typeof le=="number"?{index:le,length:0}:le.oldRange,Ie=typeof le=="number"?null:le.newRange,Se=B.length,Fe=ie.length;if(ge.length===0&&(Ie===null||Ie.length===0)){var it=ge.index,tt=B.slice(0,it),at=B.slice(it),lt=Ie?Ie.index:null,_t=it+Fe-Se;if((lt===null||lt===_t)&&!(_t<0||_t>Fe)){var Ht=ie.slice(0,_t);if((Mt=ie.slice(_t))===at){var At=Math.min(it,_t);if((pt=tt.slice(0,At))===(ut=Ht.slice(0,At)))return he(pt,tt.slice(At),Ht.slice(At),at)}}if(lt===null||lt===it){var st=it,Mt=(Ht=ie.slice(0,st),ie.slice(st));if(Ht===tt){var nt=Math.min(Se-st,Fe-st);if((ct=at.slice(at.length-nt))===(jt=Mt.slice(Mt.length-nt)))return he(tt,at.slice(0,at.length-nt),Mt.slice(0,Mt.length-nt),ct)}}}if(ge.length>0&&Ie&&Ie.length===0){var pt=B.slice(0,ge.index),ct=B.slice(ge.index+ge.length);if(!(Fe<(At=pt.length)+(nt=ct.length))){var ut=ie.slice(0,At),jt=ie.slice(Fe-nt);if(pt===ut&&ct===jt)return he(pt,B.slice(At,Se-nt),ie.slice(At,Fe-nt),ct)}}return null}(z,se,Te);if(be)return be}var de=g(z,se),Ne=z.substring(0,de);de=_(z=z.substring(de),se=se.substring(de));var F=z.substring(z.length-de),G=function(B,ie){var le;if(!B)return[[a,ie]];if(!ie)return[[i,B]];var ge=B.length>ie.length?B:ie,Ie=B.length>ie.length?ie:B,Se=ge.indexOf(Ie);if(Se!==-1)return le=[[a,ge.substring(0,Se)],[l,Ie],[a,ge.substring(Se+Ie.length)]],B.length>ie.length&&(le[0][0]=le[2][0]=i),le;if(Ie.length===1)return[[i,B],[a,ie]];var Fe=function(st,Mt){var nt=st.length>Mt.length?st:Mt,pt=st.length>Mt.length?Mt:st;if(nt.length<4||2*pt.length<nt.length)return null;function ct(It,hn,wn){for(var Nt,cn,gn,yn,tn=It.substring(wn,wn+Math.floor(It.length/4)),bt=-1,zt="";(bt=hn.indexOf(tn,bt+1))!==-1;){var Ue=g(It.substring(wn),hn.substring(bt)),Et=_(It.substring(0,wn),hn.substring(0,bt));zt.length<Et+Ue&&(zt=hn.substring(bt-Et,bt)+hn.substring(bt,bt+Ue),Nt=It.substring(0,wn-Et),cn=It.substring(wn+Ue),gn=hn.substring(0,bt-Et),yn=hn.substring(bt+Ue))}return 2*zt.length>=It.length?[Nt,cn,gn,yn,zt]:null}s(ct,"s");var ut,jt,gt,Vt,Zt,ln=ct(nt,pt,Math.ceil(nt.length/4)),xn=ct(nt,pt,Math.ceil(nt.length/2));if(!ln&&!xn)return null;ut=xn?ln&&ln[4].length>xn[4].length?ln:xn:ln,st.length>Mt.length?(jt=ut[0],gt=ut[1],Vt=ut[2],Zt=ut[3]):(Vt=ut[0],Zt=ut[1],jt=ut[2],gt=ut[3]);var Yt=ut[4];return[jt,gt,Vt,Zt,Yt]}(B,ie);if(Fe){var it=Fe[0],tt=Fe[1],at=Fe[2],lt=Fe[3],_t=Fe[4],Ht=d(it,at),At=d(tt,lt);return Ht.concat([[l,_t]],At)}return function(st,Mt){for(var nt=st.length,pt=Mt.length,ct=Math.ceil((nt+pt)/2),ut=ct,jt=2*ct,gt=new Array(jt),Vt=new Array(jt),Zt=0;Zt<jt;Zt++)gt[Zt]=-1,Vt[Zt]=-1;gt[ut+1]=0,Vt[ut+1]=0;for(var ln=nt-pt,xn=ln%2!=0,Yt=0,It=0,hn=0,wn=0,Nt=0;Nt<ct;Nt++){for(var cn=-Nt+Yt;cn<=Nt-It;cn+=2){for(var gn=ut+cn,yn=(Et=cn===-Nt||cn!==Nt&&gt[gn-1]<gt[gn+1]?gt[gn+1]:gt[gn-1]+1)-cn;Et<nt&&yn<pt&&st.charAt(Et)===Mt.charAt(yn);)Et++,yn++;if(gt[gn]=Et,Et>nt)It+=2;else if(yn>pt)Yt+=2;else if(xn&&(zt=ut+ln-cn)>=0&&zt<jt&&Vt[zt]!==-1&&Et>=(bt=nt-Vt[zt]))return m(st,Mt,Et,yn)}for(var tn=-Nt+hn;tn<=Nt-wn;tn+=2){for(var bt,zt=ut+tn,Ue=(bt=tn===-Nt||tn!==Nt&&Vt[zt-1]<Vt[zt+1]?Vt[zt+1]:Vt[zt-1]+1)-tn;bt<nt&&Ue<pt&&st.charAt(nt-bt-1)===Mt.charAt(pt-Ue-1);)bt++,Ue++;if(Vt[zt]=bt,bt>nt)wn+=2;else if(Ue>pt)hn+=2;else if(!xn&&(gn=ut+ln-tn)>=0&&gn<jt&&gt[gn]!==-1){var Et;if(yn=ut+(Et=gt[gn])-gn,Et>=(bt=nt-bt))return m(st,Mt,Et,yn)}}}return[[i,st],[a,Mt]]}(B,ie)}(z=z.substring(0,z.length-de),se=se.substring(0,se.length-de));return Ne&&G.unshift([l,Ne]),F&&G.push([l,F]),P(G,ne),K&&function(B){for(var ie=!1,le=[],ge=0,Ie=null,Se=0,Fe=0,it=0,tt=0,at=0;Se<B.length;)B[Se][0]==l?(le[ge++]=Se,Fe=tt,it=at,tt=0,at=0,Ie=B[Se][1]):(B[Se][0]==a?tt+=B[Se][1].length:at+=B[Se][1].length,Ie&&Ie.length<=Math.max(Fe,it)&&Ie.length<=Math.max(tt,at)&&(B.splice(le[ge-1],0,[i,Ie]),B[le[ge-1]+1][0]=a,ge--,Se=--ge>0?le[ge-1]:-1,Fe=0,it=0,tt=0,at=0,Ie=null,ie=!0)),Se++;for(ie&&P(B),function(st){function Mt(It,hn){if(!It||!hn)return 6;var wn=It.charAt(It.length-1),Nt=hn.charAt(0),cn=wn.match(E),gn=Nt.match(E),yn=cn&&wn.match(C),tn=gn&&Nt.match(C),bt=yn&&wn.match(k),zt=tn&&Nt.match(k),Ue=bt&&It.match(D),Et=zt&&hn.match(O);return Ue||Et?5:bt||zt?4:cn&&!yn&&tn?3:yn||tn?2:cn||gn?1:0}s(Mt,"e");for(var nt=1;nt<st.length-1;){if(st[nt-1][0]==l&&st[nt+1][0]==l){var pt=st[nt-1][1],ct=st[nt][1],ut=st[nt+1][1],jt=_(pt,ct);if(jt){var gt=ct.substring(ct.length-jt);pt=pt.substring(0,pt.length-jt),ct=gt+ct.substring(0,ct.length-jt),ut=gt+ut}for(var Vt=pt,Zt=ct,ln=ut,xn=Mt(pt,ct)+Mt(ct,ut);ct.charAt(0)===ut.charAt(0);){pt+=ct.charAt(0),ct=ct.substring(1)+ut.charAt(0),ut=ut.substring(1);var Yt=Mt(pt,ct)+Mt(ct,ut);Yt>=xn&&(xn=Yt,Vt=pt,Zt=ct,ln=ut)}st[nt-1][1]!=Vt&&(Vt?st[nt-1][1]=Vt:(st.splice(nt-1,1),nt--),st[nt][1]=Zt,ln?st[nt+1][1]=ln:(st.splice(nt+1,1),nt--))}nt++}}(B),Se=1;Se<B.length;){if(B[Se-1][0]==i&&B[Se][0]==a){var lt=B[Se-1][1],_t=B[Se][1],Ht=v(lt,_t),At=v(_t,lt);Ht>=At?(Ht>=lt.length/2||Ht>=_t.length/2)&&(B.splice(Se,0,[l,_t.substring(0,Ht)]),B[Se-1][1]=lt.substring(0,lt.length-Ht),B[Se+1][1]=_t.substring(Ht),Se++):(At>=lt.length/2||At>=_t.length/2)&&(B.splice(Se,0,[l,lt.substring(0,At)]),B[Se-1][0]=a,B[Se-1][1]=_t.substring(0,_t.length-At),B[Se+1][0]=i,B[Se+1][1]=lt.substring(At),Se++),Se++}Se++}}(G),G}s(d,"s");function m(z,se,Te,K){var ne=z.substring(0,Te),be=se.substring(0,K),de=z.substring(Te),Ne=se.substring(K),F=d(ne,be),G=d(de,Ne);return F.concat(G)}s(m,"i");function g(z,se){if(!z||!se||z.charAt(0)!==se.charAt(0))return 0;for(var Te=0,K=Math.min(z.length,se.length),ne=K,be=0;Te<ne;)z.substring(be,ne)==se.substring(be,ne)?be=Te=ne:K=ne,ne=Math.floor((K-Te)/2+Te);return j(z.charCodeAt(ne-1))&&ne--,ne}s(g,"o");function v(z,se){var Te=z.length,K=se.length;if(Te==0||K==0)return 0;Te>K?z=z.substring(Te-K):Te<K&&(se=se.substring(0,Te));var ne=Math.min(Te,K);if(z==se)return ne;for(var be=0,de=1;;){var Ne=z.substring(ne-de),F=se.indexOf(Ne);if(F==-1)return be;de+=F,F!=0&&z.substring(ne-de)!=se.substring(0,de)||(be=de,de++)}}s(v,"l");function _(z,se){if(!z||!se||z.slice(-1)!==se.slice(-1))return 0;for(var Te=0,K=Math.min(z.length,se.length),ne=K,be=0;Te<ne;)z.substring(z.length-ne,z.length-be)==se.substring(se.length-ne,se.length-be)?be=Te=ne:K=ne,ne=Math.floor((K-Te)/2+Te);return W(z.charCodeAt(z.length-ne))&&ne--,ne}s(_,"a");var E=/[^a-zA-Z0-9]/,C=/\s/,k=/[\r\n]/,D=/\n\r?\n$/,O=/^\r?\n\r?\n/;function P(z,se){z.push([l,""]);for(var Te,K=0,ne=0,be=0,de="",Ne="";K<z.length;)if(K<z.length-1&&!z[K][1])z.splice(K,1);else switch(z[K][0]){case a:be++,Ne+=z[K][1],K++;break;case i:ne++,de+=z[K][1],K++;break;case l:var F=K-be-ne-1;if(se){if(F>=0&&ae(z[F][1])){var G=z[F][1].slice(-1);if(z[F][1]=z[F][1].slice(0,-1),de=G+de,Ne=G+Ne,!z[F][1]){z.splice(F,1),K--;var B=F-1;z[B]&&z[B][0]===a&&(be++,Ne=z[B][1]+Ne,B--),z[B]&&z[B][0]===i&&(ne++,de=z[B][1]+de,B--),F=B}}Z(z[K][1])&&(G=z[K][1].charAt(0),z[K][1]=z[K][1].slice(1),de+=G,Ne+=G)}if(K<z.length-1&&!z[K][1]){z.splice(K,1);break}if(de.length>0||Ne.length>0){de.length>0&&Ne.length>0&&((Te=g(Ne,de))!==0&&(F>=0?z[F][1]+=Ne.substring(0,Te):(z.splice(0,0,[l,Ne.substring(0,Te)]),K++),Ne=Ne.substring(Te),de=de.substring(Te)),(Te=_(Ne,de))!==0&&(z[K][1]=Ne.substring(Ne.length-Te)+z[K][1],Ne=Ne.substring(0,Ne.length-Te),de=de.substring(0,de.length-Te)));var ie=be+ne;de.length===0&&Ne.length===0?(z.splice(K-ie,ie),K-=ie):de.length===0?(z.splice(K-ie,ie,[a,Ne]),K=K-ie+1):Ne.length===0?(z.splice(K-ie,ie,[i,de]),K=K-ie+1):(z.splice(K-ie,ie,[i,de],[a,Ne]),K=K-ie+2)}K!==0&&z[K-1][0]===l?(z[K-1][1]+=z[K][1],z.splice(K,1)):K++,be=0,ne=0,de="",Ne=""}z[z.length-1][1]===""&&z.pop();var le=!1;for(K=1;K<z.length-1;)z[K-1][0]===l&&z[K+1][0]===l&&(z[K][1].substring(z[K][1].length-z[K-1][1].length)===z[K-1][1]?(z[K][1]=z[K-1][1]+z[K][1].substring(0,z[K][1].length-z[K-1][1].length),z[K+1][1]=z[K-1][1]+z[K+1][1],z.splice(K-1,1),le=!0):z[K][1].substring(0,z[K+1][1].length)==z[K+1][1]&&(z[K-1][1]+=z[K+1][1],z[K][1]=z[K][1].substring(z[K+1][1].length)+z[K+1][1],z.splice(K+1,1),le=!0)),K++;le&&P(z,se)}s(P,"p");function j(z){return z>=55296&&z<=56319}s(j,"g");function W(z){return z>=56320&&z<=57343}s(W,"m");function Z(z){return W(z.charCodeAt(0))}s(Z,"b");function ae(z){return j(z.charCodeAt(z.length-1))}s(ae,"y");function he(z,se,Te,K){return ae(z)||Z(K)?null:function(ne){for(var be=[],de=0;de<ne.length;de++)ne[de][1].length>0&&be.push(ne[de]);return be}([[l,z],[i,se],[a,Te],[l,K]])}s(he,"v");function fe(z,se,Te,K){return d(z,se,Te,K,!0)}s(fe,"x"),fe.INSERT=a,fe.DELETE=i,fe.EQUAL=l,r.exports=fe},193:(r,i,a)=>{r=a.nmd(r);var l="__lodash_hash_undefined__",d=9007199254740991,m="[object Arguments]",g="[object Boolean]",v="[object Date]",_="[object Function]",E="[object GeneratorFunction]",C="[object Map]",k="[object Number]",D="[object Object]",O="[object Promise]",P="[object RegExp]",j="[object Set]",W="[object String]",Z="[object Symbol]",ae="[object WeakMap]",he="[object ArrayBuffer]",fe="[object DataView]",z="[object Float32Array]",se="[object Float64Array]",Te="[object Int8Array]",K="[object Int16Array]",ne="[object Int32Array]",be="[object Uint8Array]",de="[object Uint8ClampedArray]",Ne="[object Uint16Array]",F="[object Uint32Array]",G=/\w*$/,B=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,le={};le[m]=le["[object Array]"]=le[he]=le[fe]=le[g]=le[v]=le[z]=le[se]=le[Te]=le[K]=le[ne]=le[C]=le[k]=le[D]=le[P]=le[j]=le[W]=le[Z]=le[be]=le[de]=le[Ne]=le[F]=!0,le["[object Error]"]=le[_]=le[ae]=!1;var ge=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,Ie=typeof self=="object"&&self&&self.Object===Object&&self,Se=ge||Ie||Function("return this")(),Fe=i&&!i.nodeType&&i,it=Fe&&r&&!r.nodeType&&r,tt=it&&it.exports===Fe;function at(Q,ve){return Q.set(ve[0],ve[1]),Q}s(at,"P");function lt(Q,ve){return Q.add(ve),Q}s(lt,"z");function _t(Q,ve,Be,H){var re=-1,ke=Q?Q.length:0;for(H&&ke&&(Be=Q[++re]);++re<ke;)Be=ve(Be,Q[re],re,Q);return Be}s(_t,"H");function Ht(Q){var ve=!1;if(Q!=null&&typeof Q.toString!="function")try{ve=!!(Q+"")}catch{}return ve}s(Ht,"F");function At(Q){var ve=-1,Be=Array(Q.size);return Q.forEach(function(H,re){Be[++ve]=[re,H]}),Be}s(At,"$");function st(Q,ve){return function(Be){return Q(ve(Be))}}s(st,"V");function Mt(Q){var ve=-1,Be=Array(Q.size);return Q.forEach(function(H){Be[++ve]=H}),Be}s(Mt,"K");var nt,pt=Array.prototype,ct=Function.prototype,ut=Object.prototype,jt=Se["__core-js_shared__"],gt=(nt=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||""))?"Symbol(src)_1."+nt:"",Vt=ct.toString,Zt=ut.hasOwnProperty,ln=ut.toString,xn=RegExp("^"+Vt.call(Zt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yt=tt?Se.Buffer:void 0,It=Se.Symbol,hn=Se.Uint8Array,wn=st(Object.getPrototypeOf,Object),Nt=Object.create,cn=ut.propertyIsEnumerable,gn=pt.splice,yn=Object.getOwnPropertySymbols,tn=Yt?Yt.isBuffer:void 0,bt=st(Object.keys,Object),zt=nn(Se,"DataView"),Ue=nn(Se,"Map"),Et=nn(Se,"Promise"),In=nn(Se,"Set"),Fr=nn(Se,"WeakMap"),qn=nn(Object,"create"),Tr=mn(zt),En=mn(Ue),xs=mn(Et),ss=mn(In),w=mn(Fr),S=It?It.prototype:void 0,M=S?S.valueOf:void 0;function q(Q){var ve=-1,Be=Q?Q.length:0;for(this.clear();++ve<Be;){var H=Q[ve];this.set(H[0],H[1])}}s(q,"kt");function J(Q){var ve=-1,Be=Q?Q.length:0;for(this.clear();++ve<Be;){var H=Q[ve];this.set(H[0],H[1])}}s(J,"_t");function te(Q){var ve=-1,Be=Q?Q.length:0;for(this.clear();++ve<Be;){var H=Q[ve];this.set(H[0],H[1])}}s(te,"Lt");function Le(Q){this.__data__=new J(Q)}s(Le,"Ot");function ue(Q,ve){var Be=Ur(Q)||function(De){return function(Ae){return function(ze){return!!ze&&typeof ze=="object"}(Ae)&&gi(Ae)}(De)&&Zt.call(De,"callee")&&(!cn.call(De,"callee")||ln.call(De)==m)}(Q)?function(De,Ae){for(var ze=-1,Tt=Array(De);++ze<De;)Tt[ze]=Ae(ze);return Tt}(Q.length,String):[],H=Be.length,re=!!H;for(var ke in Q)!ve&&!Zt.call(Q,ke)||re&&(ke=="length"||kr(ke,H))||Be.push(ke);return Be}s(ue,"Tt");function Re(Q,ve,Be){var H=Q[ve];Zt.call(Q,ve)&&Ii(H,Be)&&(Be!==void 0||ve in Q)||(Q[ve]=Be)}s(Re,"St");function Y(Q,ve){for(var Be=Q.length;Be--;)if(Ii(Q[Be][0],ve))return Be;return-1}s(Y,"Ct");function Ee(Q,ve,Be,H,re,ke,De){var Ae;if(H&&(Ae=ke?H(Q,re,ke,De):H(Q)),Ae!==void 0)return Ae;if(!ws(Q))return Q;var ze=Ur(Q);if(ze){if(Ae=function(xe){var Xe=xe.length,Dt=xe.constructor(Xe);return Xe&&typeof xe[0]=="string"&&Zt.call(xe,"index")&&(Dt.index=xe.index,Dt.input=xe.input),Dt}(Q),!ve)return function(xe,Xe){var Dt=-1,Ft=xe.length;for(Xe||(Xe=Array(Ft));++Dt<Ft;)Xe[Dt]=xe[Dt];return Xe}(Q,Ae)}else{var Tt=Zn(Q),Wt=Tt==_||Tt==E;if(Gr(Q))return function(xe,Xe){if(Xe)return xe.slice();var Dt=new xe.constructor(xe.length);return xe.copy(Dt),Dt}(Q,ve);if(Tt==D||Tt==m||Wt&&!ke){if(Ht(Q))return ke?Q:{};if(Ae=function(xe){return typeof xe.constructor!="function"||Li(xe)?{}:(Xe=wn(xe),ws(Xe)?Nt(Xe):{});var Xe}(Wt?{}:Q),!ve)return function(xe,Xe){return Rt(xe,Hn(xe),Xe)}(Q,function(xe,Xe){return xe&&Rt(Xe,Us(Xe),xe)}(Ae,Q))}else{if(!le[Tt])return ke?Q:{};Ae=function(xe,Xe,Dt,Ft){var dn=xe.constructor;switch(Xe){case he:return $t(xe);case g:case v:return new dn(+xe);case fe:return function(St,rn){var Lt=rn?$t(St.buffer):St.buffer;return new St.constructor(Lt,St.byteOffset,St.byteLength)}(xe,Ft);case z:case se:case Te:case K:case ne:case be:case de:case Ne:case F:return function(St,rn){var Lt=rn?$t(St.buffer):St.buffer;return new St.constructor(Lt,St.byteOffset,St.length)}(xe,Ft);case C:return function(St,rn,Lt){var br=rn?Lt(At(St),!0):At(St);return _t(br,at,new St.constructor)}(xe,Ft,Dt);case k:case W:return new dn(xe);case P:return function(St){var rn=new St.constructor(St.source,G.exec(St));return rn.lastIndex=St.lastIndex,rn}(xe);case j:return function(St,rn,Lt){var br=rn?Lt(Mt(St),!0):Mt(St);return _t(br,lt,new St.constructor)}(xe,Ft,Dt);case Z:return Or=xe,M?Object(M.call(Or)):{}}var Or}(Q,Tt,Ee,ve)}}De||(De=new Le);var Sn=De.get(Q);if(Sn)return Sn;if(De.set(Q,Ae),!ze)var un=Be?function(xe){return function(Xe,Dt,Ft){var dn=Dt(Xe);return Ur(Xe)?dn:function(Or,St){for(var rn=-1,Lt=St.length,br=Or.length;++rn<Lt;)Or[br+rn]=St[rn];return Or}(dn,Ft(Xe))}(xe,Us,Hn)}(Q):Us(Q);return function(xe,Xe){for(var Dt=-1,Ft=xe?xe.length:0;++Dt<Ft&&Xe(xe[Dt],Dt,xe)!==!1;);}(un||Q,function(xe,Xe){un&&(xe=Q[Xe=xe]),Re(Ae,Xe,Ee(xe,ve,Be,H,Xe,Q,De))}),Ae}s(Ee,"jt");function Je(Q){return!(!ws(Q)||(ve=Q,gt&&gt in ve))&&(Di(Q)||Ht(Q)?xn:B).test(mn(Q));var ve}s(Je,"Rt");function $t(Q){var ve=new Q.constructor(Q.byteLength);return new hn(ve).set(new hn(Q)),ve}s($t,"It");function Rt(Q,ve,Be,H){Be||(Be={});for(var re=-1,ke=ve.length;++re<ke;){var De=ve[re],Ae=H?H(Be[De],Q[De],De,Be,Q):void 0;Re(Be,De,Ae===void 0?Q[De]:Ae)}return Be}s(Rt,"Mt");function Kt(Q,ve){var Be,H,re=Q.__data__;return((H=typeof(Be=ve))=="string"||H=="number"||H=="symbol"||H=="boolean"?Be!=="__proto__":Be===null)?re[typeof ve=="string"?"string":"hash"]:re.map}s(Kt,"Bt");function nn(Q,ve){var Be=function(H,re){return H?.[re]}(Q,ve);return Je(Be)?Be:void 0}s(nn,"Ut"),q.prototype.clear=function(){this.__data__=qn?qn(null):{}},q.prototype.delete=function(Q){return this.has(Q)&&delete this.__data__[Q]},q.prototype.get=function(Q){var ve=this.__data__;if(qn){var Be=ve[Q];return Be===l?void 0:Be}return Zt.call(ve,Q)?ve[Q]:void 0},q.prototype.has=function(Q){var ve=this.__data__;return qn?ve[Q]!==void 0:Zt.call(ve,Q)},q.prototype.set=function(Q,ve){return this.__data__[Q]=qn&&ve===void 0?l:ve,this},J.prototype.clear=function(){this.__data__=[]},J.prototype.delete=function(Q){var ve=this.__data__,Be=Y(ve,Q);return!(Be<0)&&(Be==ve.length-1?ve.pop():gn.call(ve,Be,1),!0)},J.prototype.get=function(Q){var ve=this.__data__,Be=Y(ve,Q);return Be<0?void 0:ve[Be][1]},J.prototype.has=function(Q){return Y(this.__data__,Q)>-1},J.prototype.set=function(Q,ve){var Be=this.__data__,H=Y(Be,Q);return H<0?Be.push([Q,ve]):Be[H][1]=ve,this},te.prototype.clear=function(){this.__data__={hash:new q,map:new(Ue||J),string:new q}},te.prototype.delete=function(Q){return Kt(this,Q).delete(Q)},te.prototype.get=function(Q){return Kt(this,Q).get(Q)},te.prototype.has=function(Q){return Kt(this,Q).has(Q)},te.prototype.set=function(Q,ve){return Kt(this,Q).set(Q,ve),this},Le.prototype.clear=function(){this.__data__=new J},Le.prototype.delete=function(Q){return this.__data__.delete(Q)},Le.prototype.get=function(Q){return this.__data__.get(Q)},Le.prototype.has=function(Q){return this.__data__.has(Q)},Le.prototype.set=function(Q,ve){var Be=this.__data__;if(Be instanceof J){var H=Be.__data__;if(!Ue||H.length<199)return H.push([Q,ve]),this;Be=this.__data__=new te(H)}return Be.set(Q,ve),this};var Hn=yn?st(yn,Object):function(){return[]},Zn=s(function(Q){return ln.call(Q)},"Pt");function kr(Q,ve){return!!(ve=ve??d)&&(typeof Q=="number"||ie.test(Q))&&Q>-1&&Q%1==0&&Q<ve}s(kr,"zt");function Li(Q){var ve=Q&&Q.constructor;return Q===(typeof ve=="function"&&ve.prototype||ut)}s(Li,"Ht");function mn(Q){if(Q!=null){try{return Vt.call(Q)}catch{}try{return Q+""}catch{}}return""}s(mn,"Ft");function Ii(Q,ve){return Q===ve||Q!=Q&&ve!=ve}s(Ii,"$t"),(zt&&Zn(new zt(new ArrayBuffer(1)))!=fe||Ue&&Zn(new Ue)!=C||Et&&Zn(Et.resolve())!=O||In&&Zn(new In)!=j||Fr&&Zn(new Fr)!=ae)&&(Zn=s(function(Q){var ve=ln.call(Q),Be=ve==D?Q.constructor:void 0,H=Be?mn(Be):void 0;if(H)switch(H){case Tr:return fe;case En:return C;case xs:return O;case ss:return j;case w:return ae}return ve},"Pt"));var Ur=Array.isArray;function gi(Q){return Q!=null&&function(ve){return typeof ve=="number"&&ve>-1&&ve%1==0&&ve<=d}(Q.length)&&!Di(Q)}s(gi,"Kt");var Gr=tn||function(){return!1};function Di(Q){var ve=ws(Q)?ln.call(Q):"";return ve==_||ve==E}s(Di,"Zt");function ws(Q){var ve=typeof Q;return!!Q&&(ve=="object"||ve=="function")}s(ws,"Gt");function Us(Q){return gi(Q)?ue(Q):function(ve){if(!Li(ve))return bt(ve);var Be=[];for(var H in Object(ve))Zt.call(ve,H)&&H!="constructor"&&Be.push(H);return Be}(Q)}s(Us,"Xt"),r.exports=function(Q){return Ee(Q,!0,!0)}},142:(r,i,a)=>{r=a.nmd(r);var l="__lodash_hash_undefined__",d=1,m=2,g=9007199254740991,v="[object Arguments]",_="[object Array]",E="[object AsyncFunction]",C="[object Boolean]",k="[object Date]",D="[object Error]",O="[object Function]",P="[object GeneratorFunction]",j="[object Map]",W="[object Number]",Z="[object Null]",ae="[object Object]",he="[object Promise]",fe="[object Proxy]",z="[object RegExp]",se="[object Set]",Te="[object String]",K="[object Symbol]",ne="[object Undefined]",be="[object WeakMap]",de="[object ArrayBuffer]",Ne="[object DataView]",F=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,B={};B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B[v]=B[_]=B[de]=B[C]=B[Ne]=B[k]=B[D]=B[O]=B[j]=B[W]=B[ae]=B[z]=B[se]=B[Te]=B[be]=!1;var ie=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,le=typeof self=="object"&&self&&self.Object===Object&&self,ge=ie||le||Function("return this")(),Ie=i&&!i.nodeType&&i,Se=Ie&&r&&!r.nodeType&&r,Fe=Se&&Se.exports===Ie,it=Fe&&ie.process,tt=function(){try{return it&&it.binding&&it.binding("util")}catch{}}(),at=tt&&tt.isTypedArray;function lt(H,re){for(var ke=-1,De=H==null?0:H.length;++ke<De;)if(re(H[ke],ke,H))return!0;return!1}s(lt,"z");function _t(H){var re=-1,ke=Array(H.size);return H.forEach(function(De,Ae){ke[++re]=[Ae,De]}),ke}s(_t,"H");function Ht(H){var re=-1,ke=Array(H.size);return H.forEach(function(De){ke[++re]=De}),ke}s(Ht,"F");var At,st,Mt,nt=Array.prototype,pt=Function.prototype,ct=Object.prototype,ut=ge["__core-js_shared__"],jt=pt.toString,gt=ct.hasOwnProperty,Vt=(At=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+At:"",Zt=ct.toString,ln=RegExp("^"+jt.call(gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xn=Fe?ge.Buffer:void 0,Yt=ge.Symbol,It=ge.Uint8Array,hn=ct.propertyIsEnumerable,wn=nt.splice,Nt=Yt?Yt.toStringTag:void 0,cn=Object.getOwnPropertySymbols,gn=xn?xn.isBuffer:void 0,yn=(st=Object.keys,Mt=Object,function(H){return st(Mt(H))}),tn=Hn(ge,"DataView"),bt=Hn(ge,"Map"),zt=Hn(ge,"Promise"),Ue=Hn(ge,"Set"),Et=Hn(ge,"WeakMap"),In=Hn(Object,"create"),Fr=mn(tn),qn=mn(bt),Tr=mn(zt),En=mn(Ue),xs=mn(Et),ss=Yt?Yt.prototype:void 0,w=ss?ss.valueOf:void 0;function S(H){var re=-1,ke=H==null?0:H.length;for(this.clear();++re<ke;){var De=H[re];this.set(De[0],De[1])}}s(S,"At");function M(H){var re=-1,ke=H==null?0:H.length;for(this.clear();++re<ke;){var De=H[re];this.set(De[0],De[1])}}s(M,"qt");function q(H){var re=-1,ke=H==null?0:H.length;for(this.clear();++re<ke;){var De=H[re];this.set(De[0],De[1])}}s(q,"kt");function J(H){var re=-1,ke=H==null?0:H.length;for(this.__data__=new q;++re<ke;)this.add(H[re])}s(J,"_t");function te(H){var re=this.__data__=new M(H);this.size=re.size}s(te,"Lt");function Le(H,re){var ke=gi(H),De=!ke&&Ur(H),Ae=!ke&&!De&&Gr(H),ze=!ke&&!De&&!Ae&&ve(H),Tt=ke||De||Ae||ze,Wt=Tt?function(xe,Xe){for(var Dt=-1,Ft=Array(xe);++Dt<xe;)Ft[Dt]=Xe(Dt);return Ft}(H.length,String):[],Sn=Wt.length;for(var un in H)!re&&!gt.call(H,un)||Tt&&(un=="length"||Ae&&(un=="offset"||un=="parent")||ze&&(un=="buffer"||un=="byteLength"||un=="byteOffset")||Li(un,Sn))||Wt.push(un);return Wt}s(Le,"Ot");function ue(H,re){for(var ke=H.length;ke--;)if(Ii(H[ke][0],re))return ke;return-1}s(ue,"Tt");function Re(H){return H==null?H===void 0?ne:Z:Nt&&Nt in Object(H)?function(re){var ke=gt.call(re,Nt),De=re[Nt];try{re[Nt]=void 0;var Ae=!0}catch{}var ze=Zt.call(re);return Ae&&(ke?re[Nt]=De:delete re[Nt]),ze}(H):function(re){return Zt.call(re)}(H)}s(Re,"St");function Y(H){return Q(H)&&Re(H)==v}s(Y,"Ct");function Ee(H,re,ke,De,Ae){return H===re||(H==null||re==null||!Q(H)&&!Q(re)?H!=H&&re!=re:function(ze,Tt,Wt,Sn,un,xe){var Xe=gi(ze),Dt=gi(Tt),Ft=Xe?_:kr(ze),dn=Dt?_:kr(Tt),Or=(Ft=Ft==v?ae:Ft)==ae,St=(dn=dn==v?ae:dn)==ae,rn=Ft==dn;if(rn&&Gr(ze)){if(!Gr(Tt))return!1;Xe=!0,Or=!1}if(rn&&!Or)return xe||(xe=new te),Xe||ve(ze)?Rt(ze,Tt,Wt,Sn,un,xe):function(Gt,Pt,uo,Nr,fo,Rr,yi){switch(uo){case Ne:if(Gt.byteLength!=Pt.byteLength||Gt.byteOffset!=Pt.byteOffset)return!1;Gt=Gt.buffer,Pt=Pt.buffer;case de:return!(Gt.byteLength!=Pt.byteLength||!Rr(new It(Gt),new It(Pt)));case C:case k:case W:return Ii(+Gt,+Pt);case D:return Gt.name==Pt.name&&Gt.message==Pt.message;case z:case Te:return Gt==Pt+"";case j:var Zr=_t;case se:var ho=Nr&d;if(Zr||(Zr=Ht),Gt.size!=Pt.size&&!ho)return!1;var js=yi.get(Gt);if(js)return js==Pt;Nr|=m,yi.set(Gt,Pt);var _l=Rt(Zr(Gt),Zr(Pt),Nr,fo,Rr,yi);return yi.delete(Gt),_l;case K:if(w)return w.call(Gt)==w.call(Pt)}return!1}(ze,Tt,Ft,Wt,Sn,un,xe);if(!(Wt&d)){var Lt=Or&&gt.call(ze,"__wrapped__"),br=St&&gt.call(Tt,"__wrapped__");if(Lt||br){var Mo=Lt?ze.value():ze,co=br?Tt.value():Tt;return xe||(xe=new te),un(Mo,co,Wt,Sn,xe)}}return rn?(xe||(xe=new te),function(Gt,Pt,uo,Nr,fo,Rr){var yi=uo&d,Zr=Kt(Gt),ho=Zr.length,js=Kt(Pt),_l=js.length;if(ho!=_l&&!yi)return!1;for(var ft=ho;ft--;){var sr=Zr[ft];if(!(yi?sr in Pt:gt.call(Pt,sr)))return!1}var sn=Rr.get(Gt);if(sn&&Rr.get(Pt))return sn==Pt;var Lo=!0;Rr.set(Gt,Pt),Rr.set(Pt,Gt);for(var Io=yi;++ft<ho;){var mo=Gt[sr=Zr[ft]],jr=Pt[sr];if(Nr)var Ke=yi?Nr(jr,mo,sr,Pt,Gt,Rr):Nr(mo,jr,sr,Gt,Pt,Rr);if(!(Ke===void 0?mo===jr||fo(mo,jr,uo,Nr,Rr):Ke)){Lo=!1;break}Io||(Io=sr=="constructor")}if(Lo&&!Io){var vr=Gt.constructor,Hr=Pt.constructor;vr==Hr||!("constructor"in Gt)||!("constructor"in Pt)||typeof vr=="function"&&vr instanceof vr&&typeof Hr=="function"&&Hr instanceof Hr||(Lo=!1)}return Rr.delete(Gt),Rr.delete(Pt),Lo}(ze,Tt,Wt,Sn,un,xe)):!1}(H,re,ke,De,Ee,Ae))}s(Ee,"jt");function Je(H){return!(!Us(H)||function(re){return!!Vt&&Vt in re}(H))&&(Di(H)?ln:F).test(mn(H))}s(Je,"Rt");function $t(H){if(ke=(re=H)&&re.constructor,De=typeof ke=="function"&&ke.prototype||ct,re!==De)return yn(H);var re,ke,De,Ae=[];for(var ze in Object(H))gt.call(H,ze)&&ze!="constructor"&&Ae.push(ze);return Ae}s($t,"It");function Rt(H,re,ke,De,Ae,ze){var Tt=ke&d,Wt=H.length,Sn=re.length;if(Wt!=Sn&&!(Tt&&Sn>Wt))return!1;var un=ze.get(H);if(un&&ze.get(re))return un==re;var xe=-1,Xe=!0,Dt=ke&m?new J:void 0;for(ze.set(H,re),ze.set(re,H);++xe<Wt;){var Ft=H[xe],dn=re[xe];if(De)var Or=Tt?De(dn,Ft,xe,re,H,ze):De(Ft,dn,xe,H,re,ze);if(Or!==void 0){if(Or)continue;Xe=!1;break}if(Dt){if(!lt(re,function(St,rn){if(Lt=rn,!Dt.has(Lt)&&(Ft===St||Ae(Ft,St,ke,De,ze)))return Dt.push(rn);var Lt})){Xe=!1;break}}else if(Ft!==dn&&!Ae(Ft,dn,ke,De,ze)){Xe=!1;break}}return ze.delete(H),ze.delete(re),Xe}s(Rt,"Mt");function Kt(H){return function(re,ke,De){var Ae=ke(re);return gi(re)?Ae:function(ze,Tt){for(var Wt=-1,Sn=Tt.length,un=ze.length;++Wt<Sn;)ze[un+Wt]=Tt[Wt];return ze}(Ae,De(re))}(H,Be,Zn)}s(Kt,"Bt");function nn(H,re){var ke,De,Ae=H.__data__;return((De=typeof(ke=re))=="string"||De=="number"||De=="symbol"||De=="boolean"?ke!=="__proto__":ke===null)?Ae[typeof re=="string"?"string":"hash"]:Ae.map}s(nn,"Ut");function Hn(H,re){var ke=function(De,Ae){return De?.[Ae]}(H,re);return Je(ke)?ke:void 0}s(Hn,"Dt"),S.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},S.prototype.delete=function(H){var re=this.has(H)&&delete this.__data__[H];return this.size-=re?1:0,re},S.prototype.get=function(H){var re=this.__data__;if(In){var ke=re[H];return ke===l?void 0:ke}return gt.call(re,H)?re[H]:void 0},S.prototype.has=function(H){var re=this.__data__;return In?re[H]!==void 0:gt.call(re,H)},S.prototype.set=function(H,re){var ke=this.__data__;return this.size+=this.has(H)?0:1,ke[H]=In&&re===void 0?l:re,this},M.prototype.clear=function(){this.__data__=[],this.size=0},M.prototype.delete=function(H){var re=this.__data__,ke=ue(re,H);return!(ke<0)&&(ke==re.length-1?re.pop():wn.call(re,ke,1),--this.size,!0)},M.prototype.get=function(H){var re=this.__data__,ke=ue(re,H);return ke<0?void 0:re[ke][1]},M.prototype.has=function(H){return ue(this.__data__,H)>-1},M.prototype.set=function(H,re){var ke=this.__data__,De=ue(ke,H);return De<0?(++this.size,ke.push([H,re])):ke[De][1]=re,this},q.prototype.clear=function(){this.size=0,this.__data__={hash:new S,map:new(bt||M),string:new S}},q.prototype.delete=function(H){var re=nn(this,H).delete(H);return this.size-=re?1:0,re},q.prototype.get=function(H){return nn(this,H).get(H)},q.prototype.has=function(H){return nn(this,H).has(H)},q.prototype.set=function(H,re){var ke=nn(this,H),De=ke.size;return ke.set(H,re),this.size+=ke.size==De?0:1,this},J.prototype.add=J.prototype.push=function(H){return this.__data__.set(H,l),this},J.prototype.has=function(H){return this.__data__.has(H)},te.prototype.clear=function(){this.__data__=new M,this.size=0},te.prototype.delete=function(H){var re=this.__data__,ke=re.delete(H);return this.size=re.size,ke},te.prototype.get=function(H){return this.__data__.get(H)},te.prototype.has=function(H){return this.__data__.has(H)},te.prototype.set=function(H,re){var ke=this.__data__;if(ke instanceof M){var De=ke.__data__;if(!bt||De.length<199)return De.push([H,re]),this.size=++ke.size,this;ke=this.__data__=new q(De)}return ke.set(H,re),this.size=ke.size,this};var Zn=cn?function(H){return H==null?[]:(H=Object(H),function(re,ke){for(var De=-1,Ae=re==null?0:re.length,ze=0,Tt=[];++De<Ae;){var Wt=re[De];ke(Wt,De,re)&&(Tt[ze++]=Wt)}return Tt}(cn(H),function(re){return hn.call(H,re)}))}:function(){return[]},kr=Re;function Li(H,re){return!!(re=re??g)&&(typeof H=="number"||G.test(H))&&H>-1&&H%1==0&&H<re}s(Li,"Ht");function mn(H){if(H!=null){try{return jt.call(H)}catch{}try{return H+""}catch{}}return""}s(mn,"Ft");function Ii(H,re){return H===re||H!=H&&re!=re}s(Ii,"$t"),(tn&&kr(new tn(new ArrayBuffer(1)))!=Ne||bt&&kr(new bt)!=j||zt&&kr(zt.resolve())!=he||Ue&&kr(new Ue)!=se||Et&&kr(new Et)!=be)&&(kr=s(function(H){var re=Re(H),ke=re==ae?H.constructor:void 0,De=ke?mn(ke):"";if(De)switch(De){case Fr:return Ne;case qn:return j;case Tr:return he;case En:return se;case xs:return be}return re},"zt"));var Ur=Y(function(){return arguments}())?Y:function(H){return Q(H)&&gt.call(H,"callee")&&!hn.call(H,"callee")},gi=Array.isArray,Gr=gn||function(){return!1};function Di(H){if(!Us(H))return!1;var re=Re(H);return re==O||re==P||re==E||re==fe}s(Di,"Zt");function ws(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=g}s(ws,"Gt");function Us(H){var re=typeof H;return H!=null&&(re=="object"||re=="function")}s(Us,"Xt");function Q(H){return H!=null&&typeof H=="object"}s(Q,"Qt");var ve=at?function(H){return function(re){return H(re)}}(at):function(H){return Q(H)&&ws(H.length)&&!!B[Re(H)]};function Be(H){return(re=H)!=null&&ws(re.length)&&!Di(re)?Le(H):$t(H);var re}s(Be,"Jt"),r.exports=function(H,re){return Ee(H,re)}},106:(r,i,a)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let l=a(193),d=a(142);var m;(function(g){g.compose=function(v={},_={},E=!1){typeof v!="object"&&(v={}),typeof _!="object"&&(_={});let C=l(_);E||(C=Object.keys(C).reduce((k,D)=>(C[D]!=null&&(k[D]=C[D]),k),{}));for(let k in v)v[k]!==void 0&&_[k]===void 0&&(C[k]=v[k]);return Object.keys(C).length>0?C:void 0},g.diff=function(v={},_={}){typeof v!="object"&&(v={}),typeof _!="object"&&(_={});let E=Object.keys(v).concat(Object.keys(_)).reduce((C,k)=>(d(v[k],_[k])||(C[k]=_[k]===void 0?null:_[k]),C),{});return Object.keys(E).length>0?E:void 0},g.invert=function(v={},_={}){v=v||{};let E=Object.keys(_).reduce((C,k)=>(_[k]!==v[k]&&v[k]!==void 0&&(C[k]=_[k]),C),{});return Object.keys(v).reduce((C,k)=>(v[k]!==_[k]&&_[k]===void 0&&(C[k]=null),C),E)},g.transform=function(v,_,E=!1){if(typeof v!="object")return _;if(typeof _!="object")return;if(!E)return _;let C=Object.keys(_).reduce((k,D)=>(v[D]===void 0&&(k[D]=_[D]),k),{});return Object.keys(C).length>0?C:void 0}})(m||(m={})),i.default=m},660:(r,i,a)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AttributeMap=i.OpIterator=i.Op=void 0;let l=a(606),d=a(193),m=a(142),g=a(106);i.AttributeMap=g.default;let v=a(759);i.Op=v.default;let _=a(317);i.OpIterator=_.default;let E="\0",C=s((D,O)=>{if(typeof D!="object"||D===null)throw new Error("cannot retain a "+typeof D);if(typeof O!="object"||O===null)throw new Error("cannot retain a "+typeof O);let P=Object.keys(D)[0];if(!P||P!==Object.keys(O)[0])throw new Error(`embed types not matched: ${P} != ${Object.keys(O)[0]}`);return[P,D[P],O[P]]},"u");class k{static{s(this,"h")}constructor(O){Array.isArray(O)?this.ops=O:O!=null&&Array.isArray(O.ops)?this.ops=O.ops:this.ops=[]}static registerEmbed(O,P){this.handlers[O]=P}static unregisterEmbed(O){delete this.handlers[O]}static getHandler(O){let P=this.handlers[O];if(!P)throw new Error(`no handlers for embed type "${O}"`);return P}insert(O,P){let j={};return typeof O=="string"&&O.length===0?this:(j.insert=O,P!=null&&typeof P=="object"&&Object.keys(P).length>0&&(j.attributes=P),this.push(j))}delete(O){return O<=0?this:this.push({delete:O})}retain(O,P){if(typeof O=="number"&&O<=0)return this;let j={retain:O};return P!=null&&typeof P=="object"&&Object.keys(P).length>0&&(j.attributes=P),this.push(j)}push(O){let P=this.ops.length,j=this.ops[P-1];if(O=d(O),typeof j=="object"){if(typeof O.delete=="number"&&typeof j.delete=="number")return this.ops[P-1]={delete:j.delete+O.delete},this;if(typeof j.delete=="number"&&O.insert!=null&&(P-=1,j=this.ops[P-1],typeof j!="object"))return this.ops.unshift(O),this;if(m(O.attributes,j.attributes)){if(typeof O.insert=="string"&&typeof j.insert=="string")return this.ops[P-1]={insert:j.insert+O.insert},typeof O.attributes=="object"&&(this.ops[P-1].attributes=O.attributes),this;if(typeof O.retain=="number"&&typeof j.retain=="number")return this.ops[P-1]={retain:j.retain+O.retain},typeof O.attributes=="object"&&(this.ops[P-1].attributes=O.attributes),this}}return P===this.ops.length?this.ops.push(O):this.ops.splice(P,0,O),this}chop(){let O=this.ops[this.ops.length-1];return O&&typeof O.retain=="number"&&!O.attributes&&this.ops.pop(),this}filter(O){return this.ops.filter(O)}forEach(O){this.ops.forEach(O)}map(O){return this.ops.map(O)}partition(O){let P=[],j=[];return this.forEach(W=>{(O(W)?P:j).push(W)}),[P,j]}reduce(O,P){return this.ops.reduce(O,P)}changeLength(){return this.reduce((O,P)=>P.insert?O+v.default.length(P):P.delete?O-P.delete:O,0)}length(){return this.reduce((O,P)=>O+v.default.length(P),0)}slice(O=0,P=1/0){let j=[],W=new _.default(this.ops),Z=0;for(;Z<P&&W.hasNext();){let ae;Z<O?ae=W.next(O-Z):(ae=W.next(P-Z),j.push(ae)),Z+=v.default.length(ae)}return new k(j)}compose(O){let P=new _.default(this.ops),j=new _.default(O.ops),W=[],Z=j.peek();if(Z!=null&&typeof Z.retain=="number"&&Z.attributes==null){let he=Z.retain;for(;P.peekType()==="insert"&&P.peekLength()<=he;)he-=P.peekLength(),W.push(P.next());Z.retain-he>0&&j.next(Z.retain-he)}let ae=new k(W);for(;P.hasNext()||j.hasNext();)if(j.peekType()==="insert")ae.push(j.next());else if(P.peekType()==="delete")ae.push(P.next());else{let he=Math.min(P.peekLength(),j.peekLength()),fe=P.next(he),z=j.next(he);if(z.retain){let se={};if(typeof fe.retain=="number")se.retain=typeof z.retain=="number"?he:z.retain;else if(typeof z.retain=="number")fe.retain==null?se.insert=fe.insert:se.retain=fe.retain;else{let K=fe.retain==null?"insert":"retain",[ne,be,de]=C(fe[K],z.retain),Ne=k.getHandler(ne);se[K]={[ne]:Ne.compose(be,de,K==="retain")}}let Te=g.default.compose(fe.attributes,z.attributes,typeof fe.retain=="number");if(Te&&(se.attributes=Te),ae.push(se),!j.hasNext()&&m(ae.ops[ae.ops.length-1],se)){let K=new k(P.rest());return ae.concat(K).chop()}}else typeof z.delete=="number"&&(typeof fe.retain=="number"||typeof fe.retain=="object"&&fe.retain!==null)&&ae.push(z)}return ae.chop()}concat(O){let P=new k(this.ops.slice());return O.ops.length>0&&(P.push(O.ops[0]),P.ops=P.ops.concat(O.ops.slice(1))),P}diff(O,P){if(this.ops===O.ops)return new k;let j=[this,O].map(fe=>fe.map(z=>{if(z.insert!=null)return typeof z.insert=="string"?z.insert:E;throw new Error("diff() called "+(fe===O?"on":"with")+" non-document")}).join("")),W=new k,Z=l(j[0],j[1],P,!0),ae=new _.default(this.ops),he=new _.default(O.ops);return Z.forEach(fe=>{let z=fe[1].length;for(;z>0;){let se=0;switch(fe[0]){case l.INSERT:se=Math.min(he.peekLength(),z),W.push(he.next(se));break;case l.DELETE:se=Math.min(z,ae.peekLength()),ae.next(se),W.delete(se);break;case l.EQUAL:se=Math.min(ae.peekLength(),he.peekLength(),z);let Te=ae.next(se),K=he.next(se);m(Te.insert,K.insert)?W.retain(se,g.default.diff(Te.attributes,K.attributes)):W.push(K).delete(se)}z-=se}}),W.chop()}eachLine(O,P=`
`){let j=new _.default(this.ops),W=new k,Z=0;for(;j.hasNext();){if(j.peekType()!=="insert")return;let ae=j.peek(),he=v.default.length(ae)-j.peekLength(),fe=typeof ae.insert=="string"?ae.insert.indexOf(P,he)-he:-1;if(fe<0)W.push(j.next());else if(fe>0)W.push(j.next(fe));else{if(O(W,j.next(1).attributes||{},Z)===!1)return;Z+=1,W=new k}}W.length()>0&&O(W,{},Z)}invert(O){let P=new k;return this.reduce((j,W)=>{if(W.insert)P.delete(v.default.length(W));else{if(typeof W.retain=="number"&&W.attributes==null)return P.retain(W.retain),j+W.retain;if(W.delete||typeof W.retain=="number"){let Z=W.delete||W.retain;return O.slice(j,j+Z).forEach(ae=>{W.delete?P.push(ae):W.retain&&W.attributes&&P.retain(v.default.length(ae),g.default.invert(W.attributes,ae.attributes))}),j+Z}if(typeof W.retain=="object"&&W.retain!==null){let Z=O.slice(j,j+1),ae=new _.default(Z.ops).next(),[he,fe,z]=C(W.retain,ae.insert),se=k.getHandler(he);return P.retain({[he]:se.invert(fe,z)},g.default.invert(W.attributes,ae.attributes)),j+1}}return j},0),P.chop()}transform(O,P=!1){if(P=!!P,typeof O=="number")return this.transformPosition(O,P);let j=O,W=new _.default(this.ops),Z=new _.default(j.ops),ae=new k;for(;W.hasNext()||Z.hasNext();)if(W.peekType()!=="insert"||!P&&Z.peekType()==="insert")if(Z.peekType()==="insert")ae.push(Z.next());else{let he=Math.min(W.peekLength(),Z.peekLength()),fe=W.next(he),z=Z.next(he);if(fe.delete)continue;if(z.delete)ae.push(z);else{let se=fe.retain,Te=z.retain,K=typeof Te=="object"&&Te!==null?Te:he;if(typeof se=="object"&&se!==null&&typeof Te=="object"&&Te!==null){let ne=Object.keys(se)[0];if(ne===Object.keys(Te)[0]){let be=k.getHandler(ne);be&&(K={[ne]:be.transform(se[ne],Te[ne],P)})}}ae.retain(K,g.default.transform(fe.attributes,z.attributes,P))}}else ae.retain(v.default.length(W.next()));return ae.chop()}transformPosition(O,P=!1){P=!!P;let j=new _.default(this.ops),W=0;for(;j.hasNext()&&W<=O;){let Z=j.peekLength(),ae=j.peekType();j.next(),ae!=="delete"?(ae==="insert"&&(W<O||!P)&&(O+=Z),W+=Z):O-=Math.min(Z,O-W)}return O}}k.Op=v.default,k.OpIterator=_.default,k.AttributeMap=g.default,k.handlers={},i.default=k,r.exports=k,r.exports.default=k},759:(r,i)=>{"use strict";var a;Object.defineProperty(i,"__esModule",{value:!0}),function(l){l.length=function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.retain=="object"&&d.retain!==null?1:typeof d.insert=="string"?d.insert.length:1}}(a||(a={})),i.default=a},317:(r,i,a)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let l=a(759);i.default=class{constructor(d){this.ops=d,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(d){d||(d=1/0);let m=this.ops[this.index];if(m){let g=this.offset,v=l.default.length(m);if(d>=v-g?(d=v-g,this.index+=1,this.offset=0):this.offset+=d,typeof m.delete=="number")return{delete:d};{let _={};return m.attributes&&(_.attributes=m.attributes),typeof m.retain=="number"?_.retain=d:typeof m.retain=="object"&&m.retain!==null?_.retain=m.retain:typeof m.insert=="string"?_.insert=m.insert.substr(g,d):_.insert=m.insert,_}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?l.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let d=this.ops[this.index];return d?typeof d.delete=="number"?"delete":typeof d.retain=="number"||typeof d.retain=="object"&&d.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let d=this.offset,m=this.index,g=this.next(),v=this.ops.slice(this.index);return this.offset=d,this.index=m,[g].concat(v)}}return[]}}},968:(r,i,a)=>{var l=a(64);typeof l=="string"&&(l=[[r.id,l,""]]);var d={hmr:!0,transform:void 0};a(27)(l,d),l.locals&&(r.exports=l.locals)},27:(r,i,a)=>{var l,d,m={},g=(l=s(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return d===void 0&&(d=l.apply(this,arguments)),d}),v=function(K){var ne={};return function(be){if(ne[be]===void 0){var de=K.call(this,be);if(de instanceof window.HTMLIFrameElement)try{de=de.contentDocument.head}catch{de=null}ne[be]=de}return ne[be]}}(function(K){return document.querySelector(K)}),_=null,E=0,C=[],k=a(874);function D(K,ne){for(var be=0;be<K.length;be++){var de=K[be],Ne=m[de.id];if(Ne){Ne.refs++;for(var F=0;F<Ne.parts.length;F++)Ne.parts[F](de.parts[F]);for(;F<de.parts.length;F++)Ne.parts.push(ae(de.parts[F],ne))}else{var G=[];for(F=0;F<de.parts.length;F++)G.push(ae(de.parts[F],ne));m[de.id]={id:de.id,refs:1,parts:G}}}}s(D,"d");function O(K,ne){for(var be=[],de={},Ne=0;Ne<K.length;Ne++){var F=K[Ne],G=ne.base?F[0]+ne.base:F[0],B={css:F[1],media:F[2],sourceMap:F[3]};de[G]?de[G].parts.push(B):be.push(de[G]={id:G,parts:[B]})}return be}s(O,"f");function P(K,ne){var be=v(K.insertInto);if(!be)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var de=C[C.length-1];if(K.insertAt==="top")de?de.nextSibling?be.insertBefore(ne,de.nextSibling):be.appendChild(ne):be.insertBefore(ne,be.firstChild),C.push(ne);else if(K.insertAt==="bottom")be.appendChild(ne);else{if(typeof K.insertAt!="object"||!K.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var Ne=v(K.insertInto+" "+K.insertAt.before);be.insertBefore(ne,Ne)}}s(P,"p");function j(K){if(K.parentNode===null)return!1;K.parentNode.removeChild(K);var ne=C.indexOf(K);ne>=0&&C.splice(ne,1)}s(j,"g");function W(K){var ne=document.createElement("style");return K.attrs.type="text/css",Z(ne,K.attrs),P(K,ne),ne}s(W,"m");function Z(K,ne){Object.keys(ne).forEach(function(be){K.setAttribute(be,ne[be])})}s(Z,"b");function ae(K,ne){var be,de,Ne,F;if(ne.transform&&K.css){if(!(F=ne.transform(K.css)))return function(){};K.css=F}if(ne.singleton){var G=E++;be=_||(_=W(ne)),de=z.bind(null,be,G,!1),Ne=z.bind(null,be,G,!0)}else K.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(be=function(B){var ie=document.createElement("link");return B.attrs.type="text/css",B.attrs.rel="stylesheet",Z(ie,B.attrs),P(B,ie),ie}(ne),de=Te.bind(null,be,ne),Ne=s(function(){j(be),be.href&&URL.revokeObjectURL(be.href)},"s")):(be=W(ne),de=se.bind(null,be),Ne=s(function(){j(be)},"s"));return de(K),function(B){if(B){if(B.css===K.css&&B.media===K.media&&B.sourceMap===K.sourceMap)return;de(K=B)}else Ne()}}s(ae,"y"),r.exports=function(K,ne){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(ne=ne||{}).attrs=typeof ne.attrs=="object"?ne.attrs:{},ne.singleton||typeof ne.singleton=="boolean"||(ne.singleton=g()),ne.insertInto||(ne.insertInto="head"),ne.insertAt||(ne.insertAt="bottom");var be=O(K,ne);return D(be,ne),function(de){for(var Ne=[],F=0;F<be.length;F++){var G=be[F];(B=m[G.id]).refs--,Ne.push(B)}for(de&&D(O(de,ne),ne),F=0;F<Ne.length;F++){var B;if((B=Ne[F]).refs===0){for(var ie=0;ie<B.parts.length;ie++)B.parts[ie]();delete m[B.id]}}}};var he,fe=(he=[],function(K,ne){return he[K]=ne,he.filter(Boolean).join(`
`)});function z(K,ne,be,de){var Ne=be?"":de.css;if(K.styleSheet)K.styleSheet.cssText=fe(ne,Ne);else{var F=document.createTextNode(Ne),G=K.childNodes;G[ne]&&K.removeChild(G[ne]),G.length?K.insertBefore(F,G[ne]):K.appendChild(F)}}s(z,"N");function se(K,ne){var be=ne.css,de=ne.media;if(de&&K.setAttribute("media",de),K.styleSheet)K.styleSheet.cssText=be;else{for(;K.firstChild;)K.removeChild(K.firstChild);K.appendChild(document.createTextNode(be))}}s(se,"w");function Te(K,ne,be){var de=be.css,Ne=be.sourceMap,F=ne.convertToAbsoluteUrls===void 0&&Ne;(ne.convertToAbsoluteUrls||F)&&(de=k(de)),Ne&&(de+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Ne))))+" */");var G=new Blob([de],{type:"text/css"}),B=K.href;K.href=URL.createObjectURL(G),B&&URL.revokeObjectURL(B)}s(Te,"E")},874:r=>{r.exports=function(i){var a=typeof window<"u"&&window.location;if(!a)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var l=a.protocol+"//"+a.host,d=l+a.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(m,g){var v,_=g.trim().replace(/^"(.*)"$/,function(E,C){return C}).replace(/^'(.*)'$/,function(E,C){return C});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(_)?m:(v=_.indexOf("//")===0?_:_.indexOf("/")===0?l+_:d+_.replace(/^\.\//,""),"url("+JSON.stringify(v)+")")})}},676:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FormatHTMLStringIndentation=function(a,l){for(var d=" ".repeat(2),m=0,g=`
`,v=null,_=null,E=null,C="",k=0;k<=a.length;k++){v=_,_=a.substr(k,1),E=a.substr(k+1,1);var D=a.substr(k,4)==="<br>",O=_==="<"&&E!=="/"&&!D,P=_==="<"&&E==="/"&&!D,j=v===">"&&_!=="<"&&m>0,W=!D&&!O&&!P&&j&&a.substr(k,a.substr(k).indexOf("<")).trim()==="";D&&(C+=g,m--,k+=4),O?(C+=g+d.repeat(m),m++):P?(--m<0&&(m=0),C+=g+d.repeat(m)):(_===" "&&E===" "||_===g&&a.substr(k,a.substr(k).indexOf("<")).trim()==="")&&(_=""),j&&!W&&(C+=g+d.repeat(m)),C+=_}return l.log("formatHTML",{before:a,after:C}),C}},795:(r,i)=>{"use strict";function a(_){return _.replace(/\s+/g," ").trim()}s(a,"n");function l(_){return _.replace(/<br([\s]*[\/]?>)/g,"<p> </p>")}s(l,"r");function d(_){return _.replace(/<p><\/p>/g,"<p> </p>")}s(d,"s");function m(_){return _.replace(/(<(?!\/)[\w=\."'\s]*>) /g,"$1")}s(m,"i");function g(_){return _.replace(/ (<\/[\w]+>)/g,"$1")}s(g,"o");function v(_,E){return _.reduce(function(C,k){return k(C)},E)}s(v,"l"),Object.defineProperty(i,"__esModule",{value:!0}),i.OutputHTMLParser=function(_){return v([a,m,g,l,d],_)},i.ConvertMultipleSpacesToSingle=a,i.PreserveNewlinesBr=l,i.PreserveNewlinesPTags=d,i.FixTagSpaceOpenTag=m,i.FixTagSpaceCloseTag=g,i.Compose=v},614:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuillHtmlLogger=void 0;var a=function(){function l(){this.debug=!1}return s(l,"t"),l.prototype.setDebug=function(d){this.debug=d},l.prototype.prefixString=function(){return"</> quill-html-edit-button: "},Object.defineProperty(l.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){for(var d=[],m=0;m<arguments.length;m++)d[m]=arguments[m]}},enumerable:!1,configurable:!0}),l}();i.QuillHtmlLogger=a},190:function(r,i,a){"use strict";var l=this&&this.__assign||function(){return l=Object.assign||function(O){for(var P,j=1,W=arguments.length;j<W;j++)for(var Z in P=arguments[j])Object.prototype.hasOwnProperty.call(P,Z)&&(O[Z]=P[Z]);return O},l.apply(this,arguments)},d=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(i,"__esModule",{value:!0}),i.htmlEditButton=void 0;var m=a(614);a(968);var g=d(a(429)),v=a(795),_=a(676);function E(O){return document.createElement(O)}s(E,"c");function C(O,P,j){return O.setAttribute(P,j)}s(C,"u");var k=new m.QuillHtmlLogger,D=s(function(O,P){var j=P||{},W=!(!j||!j.debug);k.setDebug(W),k.log("logging enabled");var Z=O.getModule("toolbar");if(!Z)throw new Error('quill.htmlEditButton requires the "toolbar" module to be included too');var ae=Z.container,he=E("span");C(he,"class","ql-formats");var fe=E("button");fe.innerHTML=j.buttonHTML||"&lt;&gt;",fe.title=j.buttonTitle||"Show HTML source",fe.type="button";var z=s(function(se){O.clipboard.dangerouslyPasteHTML(se)},"g");fe.onclick=function(se){se.preventDefault(),function(Te,K,ne){var be=Te.container.querySelector(".ql-editor").innerHTML,de=E("div"),Ne=E("div"),F=K.msg||`Edit HTML here, when you click "OK" the quill editor's contents will be replaced`,G=K.cancelText||"Cancel",B=K.okText||"Ok",ie=K.closeOnClickOverlay!==!1;C(Ne,"class","ql-html-overlayContainer"),C(de,"class","ql-html-popupContainer");var le=E("span");C(le,"class","ql-html-popupTitle"),le.innerText=F;var ge=E("div");ge.appendChild(le),C(ge,"class","ql-html-textContainer");var Ie=E("pre");C(Ie,"data-language","xml"),Ie.innerText=(0,_.FormatHTMLStringIndentation)(be,k);var Se=E("div");C(Se,"class","ql-html-textArea");var Fe=E("button");Fe.innerHTML=G,C(Fe,"class","ql-html-buttonCancel");var it=E("button");it.innerHTML=B,C(it,"class","ql-html-buttonOk");var tt=E("div");C(tt,"class","ql-html-buttonGroup");var at=document.querySelector(K.prependSelector);tt.appendChild(Fe),tt.appendChild(it),Se.appendChild(Ie),ge.appendChild(Se),ge.appendChild(tt),de.appendChild(ge),Ne.appendChild(de),at?at.prepend(Ne):document.body.appendChild(Ne);var lt=K&&K.editorModules,_t=lt&&Object.keys(lt).length?lt:{},Ht=new g.default(Se,{modules:l({syntax:K.syntax},_t)});Fe.onclick=function(){at?at.removeChild(Ne):document.body.removeChild(Ne)},ie&&(Ne.onclick=Fe.onclick),de.onclick=function(At){At.preventDefault(),At.stopPropagation()},it.onclick=function(){var At=Ht.container.querySelector(".ql-editor").innerText,st=(0,v.OutputHTMLParser)(At);k.log("OutputHTMLParser",{htmlInputFromPopup:At,htmlOutputFormatted:st}),ne(st),at?at.removeChild(Ne):document.body.removeChild(Ne)}}(O,j,z)},he.appendChild(fe),ae?.appendChild(he)},"d");i.htmlEditButton=D,window.htmlEditButton=D,i.default=D},429:(r,i,a)=>{"use strict";a.r(i),a.d(i,{Module:()=>Tn,Parchment:()=>l,Range:()=>R,default:()=>cB});var l={};a.r(l),a.d(l,{Attributor:()=>vr,AttributorStore:()=>ya,BlockBlot:()=>xl,ClassAttributor:()=>Bi,ContainerBlot:()=>va,EmbedBlot:()=>bi,InlineBlot:()=>wd,LeafBlot:()=>Mr,ParentBlot:()=>as,Registry:()=>Pi,Scope:()=>Ke,ScrollBlot:()=>Lc,StyleAttributor:()=>Hs,TextBlot:()=>wl});let d=s(function(){this.__data__=[],this.size=0},"s"),m=s(function(f,c){return f===c||f!=f&&c!=c},"i"),g=s(function(f,c){for(var h=f.length;h--;)if(m(f[h][0],c))return h;return-1},"o");var v=Array.prototype.splice;let _=s(function(f){var c=this.__data__,h=g(c,f);return!(h<0)&&(h==c.length-1?c.pop():v.call(c,h,1),--this.size,!0)},"a"),E=s(function(f){var c=this.__data__,h=g(c,f);return h<0?void 0:c[h][1]},"c"),C=s(function(f){return g(this.__data__,f)>-1},"u"),k=s(function(f,c){var h=this.__data__,y=g(h,f);return y<0?(++this.size,h.push([f,c])):h[y][1]=c,this},"h");function D(f){var c=-1,h=f==null?0:f.length;for(this.clear();++c<h;){var y=f[c];this.set(y[0],y[1])}}s(D,"d"),D.prototype.clear=d,D.prototype.delete=_,D.prototype.get=E,D.prototype.has=C,D.prototype.set=k;let O=D,P=s(function(){this.__data__=new O,this.size=0},"p"),j=s(function(f){var c=this.__data__,h=c.delete(f);return this.size=c.size,h},"g"),W=s(function(f){return this.__data__.get(f)},"m"),Z=s(function(f){return this.__data__.has(f)},"b"),ae=typeof global=="object"&&global&&global.Object===Object&&global;var he=typeof self=="object"&&self&&self.Object===Object&&self;let fe=ae||he||Function("return this")(),z=fe.Symbol;var se=Object.prototype,Te=se.hasOwnProperty,K=se.toString,ne=z?z.toStringTag:void 0;let be=s(function(f){var c=Te.call(f,ne),h=f[ne];try{f[ne]=void 0;var y=!0}catch{}var x=K.call(f);return y&&(c?f[ne]=h:delete f[ne]),x},"k");var de=Object.prototype.toString;let Ne=s(function(f){return de.call(f)},"L");var F=z?z.toStringTag:void 0;let G=s(function(f){return f==null?f===void 0?"[object Undefined]":"[object Null]":F&&F in Object(f)?be(f):Ne(f)},"T"),B=s(function(f){var c=typeof f;return f!=null&&(c=="object"||c=="function")},"S"),ie=s(function(f){if(!B(f))return!1;var c=G(f);return c=="[object Function]"||c=="[object GeneratorFunction]"||c=="[object AsyncFunction]"||c=="[object Proxy]"},"C"),le=fe["__core-js_shared__"];var ge,Ie=(ge=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+ge:"";let Se=s(function(f){return!!Ie&&Ie in f},"M");var Fe=Function.prototype.toString;let it=s(function(f){if(f!=null){try{return Fe.call(f)}catch{}try{return f+""}catch{}}return""},"U");var tt=/^\[object .+?Constructor\]$/,at=Function.prototype,lt=Object.prototype,_t=at.toString,Ht=lt.hasOwnProperty,At=RegExp("^"+_t.call(Ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let st=s(function(f){return!(!B(f)||Se(f))&&(ie(f)?At:tt).test(it(f))},"V"),Mt=s(function(f,c){return f?.[c]},"K"),nt=s(function(f,c){var h=Mt(f,c);return st(h)?h:void 0},"W"),pt=nt(fe,"Map"),ct=nt(Object,"create"),ut=s(function(){this.__data__=ct?ct(null):{},this.size=0},"X"),jt=s(function(f){var c=this.has(f)&&delete this.__data__[f];return this.size-=c?1:0,c},"Q");var gt=Object.prototype.hasOwnProperty;let Vt=s(function(f){var c=this.__data__;if(ct){var h=c[f];return h==="__lodash_hash_undefined__"?void 0:h}return gt.call(c,f)?c[f]:void 0},"J");var Zt=Object.prototype.hasOwnProperty;let ln=s(function(f){var c=this.__data__;return ct?c[f]!==void 0:Zt.call(c,f)},"et"),xn=s(function(f,c){var h=this.__data__;return this.size+=this.has(f)?0:1,h[f]=ct&&c===void 0?"__lodash_hash_undefined__":c,this},"nt");function Yt(f){var c=-1,h=f==null?0:f.length;for(this.clear();++c<h;){var y=f[c];this.set(y[0],y[1])}}s(Yt,"rt"),Yt.prototype.clear=ut,Yt.prototype.delete=jt,Yt.prototype.get=Vt,Yt.prototype.has=ln,Yt.prototype.set=xn;let It=Yt,hn=s(function(){this.size=0,this.__data__={hash:new It,map:new(pt||O),string:new It}},"it"),wn=s(function(f){var c=typeof f;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?f!=="__proto__":f===null},"ot"),Nt=s(function(f,c){var h=f.__data__;return wn(c)?h[typeof c=="string"?"string":"hash"]:h.map},"lt"),cn=s(function(f){var c=Nt(this,f).delete(f);return this.size-=c?1:0,c},"at"),gn=s(function(f){return Nt(this,f).get(f)},"ct"),yn=s(function(f){return Nt(this,f).has(f)},"ut"),tn=s(function(f,c){var h=Nt(this,f),y=h.size;return h.set(f,c),this.size+=h.size==y?0:1,this},"ht");function bt(f){var c=-1,h=f==null?0:f.length;for(this.clear();++c<h;){var y=f[c];this.set(y[0],y[1])}}s(bt,"dt"),bt.prototype.clear=hn,bt.prototype.delete=cn,bt.prototype.get=gn,bt.prototype.has=yn,bt.prototype.set=tn;let zt=bt,Ue=s(function(f,c){var h=this.__data__;if(h instanceof O){var y=h.__data__;if(!pt||y.length<199)return y.push([f,c]),this.size=++h.size,this;h=this.__data__=new zt(y)}return h.set(f,c),this.size=h.size,this},"pt");function Et(f){var c=this.__data__=new O(f);this.size=c.size}s(Et,"gt"),Et.prototype.clear=P,Et.prototype.delete=j,Et.prototype.get=W,Et.prototype.has=Z,Et.prototype.set=Ue;let In=Et,Fr=function(){try{var f=nt(Object,"defineProperty");return f({},"",{}),f}catch{}}(),qn=s(function(f,c,h){c=="__proto__"&&Fr?Fr(f,c,{configurable:!0,enumerable:!0,value:h,writable:!0}):f[c]=h},"yt"),Tr=s(function(f,c,h){(h!==void 0&&!m(f[c],h)||h===void 0&&!(c in f))&&qn(f,c,h)},"vt"),En=function(f){return function(c,h,y){for(var x=-1,T=Object(c),N=y(c),I=N.length;I--;){var V=N[f?I:++x];if(h(T[V],V,T)===!1)break}return c}}();var xs=typeof li=="object"&&li&&!li.nodeType&&li,ss=xs&&typeof ki=="object"&&ki&&!ki.nodeType&&ki,w=ss&&ss.exports===xs?fe.Buffer:void 0,S=w?w.allocUnsafe:void 0;let M=s(function(f,c){if(c)return f.slice();var h=f.length,y=S?S(h):new f.constructor(h);return f.copy(y),y},"qt"),q=fe.Uint8Array,J=s(function(f){var c=new f.constructor(f.byteLength);return new q(c).set(new q(f)),c},"_t"),te=s(function(f,c){var h=c?J(f.buffer):f.buffer;return new f.constructor(h,f.byteOffset,f.length)},"Lt"),Le=s(function(f,c){var h=-1,y=f.length;for(c||(c=Array(y));++h<y;)c[h]=f[h];return c},"Ot");var ue=Object.create;let Re=function(){function f(){}return s(f,"t"),function(c){if(!B(c))return{};if(ue)return ue(c);f.prototype=c;var h=new f;return f.prototype=void 0,h}}(),Y=s(function(f,c){return function(h){return f(c(h))}},"Ct"),Ee=Y(Object.getPrototypeOf,Object);var Je=Object.prototype;let $t=s(function(f){var c=f&&f.constructor;return f===(typeof c=="function"&&c.prototype||Je)},"It"),Rt=s(function(f){return typeof f.constructor!="function"||$t(f)?{}:Re(Ee(f))},"Mt"),Kt=s(function(f){return f!=null&&typeof f=="object"},"Bt"),nn=s(function(f){return Kt(f)&&G(f)=="[object Arguments]"},"Ut");var Hn=Object.prototype,Zn=Hn.hasOwnProperty,kr=Hn.propertyIsEnumerable;let Li=nn(function(){return arguments}())?nn:function(f){return Kt(f)&&Zn.call(f,"callee")&&!kr.call(f,"callee")},mn=Array.isArray,Ii=s(function(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=9007199254740991},"$t"),Ur=s(function(f){return f!=null&&Ii(f.length)&&!ie(f)},"Vt"),gi=s(function(f){return Kt(f)&&Ur(f)},"Kt"),Gr=s(function(){return!1},"Wt");var Di=typeof li=="object"&&li&&!li.nodeType&&li,ws=Di&&typeof ki=="object"&&ki&&!ki.nodeType&&ki,Us=ws&&ws.exports===Di?fe.Buffer:void 0;let Q=(Us?Us.isBuffer:void 0)||Gr;var ve=Function.prototype,Be=Object.prototype,H=ve.toString,re=Be.hasOwnProperty,ke=H.call(Object);let De=s(function(f){if(!Kt(f)||G(f)!="[object Object]")return!1;var c=Ee(f);if(c===null)return!0;var h=re.call(c,"constructor")&&c.constructor;return typeof h=="function"&&h instanceof h&&H.call(h)==ke},"re");var Ae={};Ae["[object Float32Array]"]=Ae["[object Float64Array]"]=Ae["[object Int8Array]"]=Ae["[object Int16Array]"]=Ae["[object Int32Array]"]=Ae["[object Uint8Array]"]=Ae["[object Uint8ClampedArray]"]=Ae["[object Uint16Array]"]=Ae["[object Uint32Array]"]=!0,Ae["[object Arguments]"]=Ae["[object Array]"]=Ae["[object ArrayBuffer]"]=Ae["[object Boolean]"]=Ae["[object DataView]"]=Ae["[object Date]"]=Ae["[object Error]"]=Ae["[object Function]"]=Ae["[object Map]"]=Ae["[object Number]"]=Ae["[object Object]"]=Ae["[object RegExp]"]=Ae["[object Set]"]=Ae["[object String]"]=Ae["[object WeakMap]"]=!1;let ze=s(function(f){return Kt(f)&&Ii(f.length)&&!!Ae[G(f)]},"ie"),Tt=s(function(f){return function(c){return f(c)}},"oe");var Wt=typeof li=="object"&&li&&!li.nodeType&&li,Sn=Wt&&typeof ki=="object"&&ki&&!ki.nodeType&&ki,un=Sn&&Sn.exports===Wt&&ae.process;let xe=function(){try{var f=Sn&&Sn.require&&Sn.require("util").types;return f||un&&un.binding&&un.binding("util")}catch{}}();var Xe=xe&&xe.isTypedArray;let Dt=Xe?Tt(Xe):ze,Ft=s(function(f,c){if((c!=="constructor"||typeof f[c]!="function")&&c!="__proto__")return f[c]},"fe");var dn=Object.prototype.hasOwnProperty;let Or=s(function(f,c,h){var y=f[c];dn.call(f,c)&&m(y,h)&&(h!==void 0||c in f)||qn(f,c,h)},"ge"),St=s(function(f,c,h,y){var x=!h;h||(h={});for(var T=-1,N=c.length;++T<N;){var I=c[T],V=y?y(h[I],f[I],I,h,f):void 0;V===void 0&&(V=f[I]),x?qn(h,I,V):Or(h,I,V)}return h},"me"),rn=s(function(f,c){for(var h=-1,y=Array(f);++h<f;)y[h]=c(h);return y},"be");var Lt=/^(?:0|[1-9]\d*)$/;let br=s(function(f,c){var h=typeof f;return!!(c=c??9007199254740991)&&(h=="number"||h!="symbol"&&Lt.test(f))&&f>-1&&f%1==0&&f<c},"ve");var Mo=Object.prototype.hasOwnProperty;let co=s(function(f,c){var h=mn(f),y=!h&&Li(f),x=!h&&!y&&Q(f),T=!h&&!y&&!x&&Dt(f),N=h||y||x||T,I=N?rn(f.length,String):[],V=I.length;for(var ce in f)!c&&!Mo.call(f,ce)||N&&(ce=="length"||x&&(ce=="offset"||ce=="parent")||T&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||br(ce,V))||I.push(ce);return I},"Ne"),Gt=s(function(f){var c=[];if(f!=null)for(var h in Object(f))c.push(h);return c},"we");var Pt=Object.prototype.hasOwnProperty;let uo=s(function(f){if(!B(f))return Gt(f);var c=$t(f),h=[];for(var y in f)(y!="constructor"||!c&&Pt.call(f,y))&&h.push(y);return h},"Ae"),Nr=s(function(f){return Ur(f)?co(f,!0):uo(f)},"qe"),fo=s(function(f){return St(f,Nr(f))},"ke"),Rr=s(function(f,c,h,y,x,T,N){var I=Ft(f,h),V=Ft(c,h),ce=N.get(V);if(ce)Tr(f,h,ce);else{var Oe=T?T(I,V,h+"",f,c,N):void 0,$e=Oe===void 0;if($e){var Ve=mn(V),rt=!Ve&&Q(V),et=!Ve&&!rt&&Dt(V);Oe=V,Ve||rt||et?mn(I)?Oe=I:gi(I)?Oe=Le(I):rt?($e=!1,Oe=M(V,!0)):et?($e=!1,Oe=te(V,!0)):Oe=[]:De(V)||Li(V)?(Oe=I,Li(I)?Oe=fo(I):B(I)&&!ie(I)||(Oe=Rt(V))):$e=!1}$e&&(N.set(V,Oe),x(Oe,V,y,T,N),N.delete(V)),Tr(f,h,Oe)}},"_e"),yi=s(function f(c,h,y,x,T){c!==h&&En(h,function(N,I){if(T||(T=new In),B(N))Rr(c,h,I,y,f,x,T);else{var V=x?x(Ft(c,I),N,I+"",c,h,T):void 0;V===void 0&&(V=N),Tr(c,I,V)}},Nr)},"t"),Zr=s(function(f){return f},"Oe"),ho=s(function(f,c,h){switch(h.length){case 0:return f.call(c);case 1:return f.call(c,h[0]);case 2:return f.call(c,h[0],h[1]);case 3:return f.call(c,h[0],h[1],h[2])}return f.apply(c,h)},"Te");var js=Math.max;let _l=s(function(f,c,h){return c=js(c===void 0?f.length-1:c,0),function(){for(var y=arguments,x=-1,T=js(y.length-c,0),N=Array(T);++x<T;)N[x]=y[c+x];x=-1;for(var I=Array(c+1);++x<c;)I[x]=y[x];return I[c]=h(N),ho(f,this,I)}},"Ce"),ft=s(function(f){return function(){return f}},"je"),sr=Fr?function(f,c){return Fr(f,"toString",{configurable:!0,enumerable:!1,value:ft(c),writable:!0})}:Zr;var sn=Date.now;let Lo=function(f){var c=0,h=0;return function(){var y=sn(),x=16-(y-h);if(h=y,x>0){if(++c>=800)return arguments[0]}else c=0;return f.apply(void 0,arguments)}}(sr),Io=s(function(f,c){return Lo(_l(f,c,Zr),f+"")},"Be"),mo=s(function(f,c,h){if(!B(h))return!1;var y=typeof c;return!!(y=="number"?Ur(h)&&br(c,h.length):y=="string"&&c in h)&&m(h[c],f)},"Ue"),jr=function(f){return Io(function(c,h){var y=-1,x=h.length,T=x>1?h[x-1]:void 0,N=x>2?h[2]:void 0;for(T=f.length>3&&typeof T=="function"?(x--,T):void 0,N&&mo(h[0],h[1],N)&&(T=x<3?void 0:T,x=1),c=Object(c);++y<x;){var I=h[y];I&&f(c,I,y,T)}return c})}(function(f,c,h){yi(f,c,h)});var Ke=(f=>(f[f.TYPE=3]="TYPE",f[f.LEVEL=12]="LEVEL",f[f.ATTRIBUTE=13]="ATTRIBUTE",f[f.BLOT=14]="BLOT",f[f.INLINE=7]="INLINE",f[f.BLOCK=11]="BLOCK",f[f.BLOCK_BLOT=10]="BLOCK_BLOT",f[f.INLINE_BLOT=6]="INLINE_BLOT",f[f.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",f[f.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",f[f.ANY=15]="ANY",f))(Ke||{});class vr{static{s(this,"ze")}constructor(c,h,y={}){this.attrName=c,this.keyName=h;let x=Ke.TYPE&Ke.ATTRIBUTE;this.scope=y.scope!=null?y.scope&Ke.LEVEL|x:Ke.ATTRIBUTE,y.whitelist!=null&&(this.whitelist=y.whitelist)}static keys(c){return Array.from(c.attributes).map(h=>h.name)}add(c,h){return!!this.canAdd(c,h)&&(c.setAttribute(this.keyName,h),!0)}canAdd(c,h){return this.whitelist==null||(typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1)}remove(c){c.removeAttribute(this.keyName)}value(c){let h=c.getAttribute(this.keyName);return this.canAdd(c,h)&&h?h:""}}class Hr extends Error{static{s(this,"He")}constructor(c){super(c="[Parchment] "+c),this.message=c,this.name=this.constructor.name}}let or=class Bx{static{s(this,"t")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(c,h=!1){if(c==null)return null;if(this.blots.has(c))return this.blots.get(c)||null;if(h){let y=null;try{y=c.parentNode}catch{return null}return this.find(y,h)}return null}create(c,h,y){let x=this.query(h);if(x==null)throw new Hr(`Unable to create ${h} blot`);let T=x,N=h instanceof Node||h.nodeType===Node.TEXT_NODE?h:T.create(y),I=new T(c,N,y);return Bx.blots.set(I.domNode,I),I}find(c,h=!1){return Bx.find(c,h)}query(c,h=Ke.ANY){let y;return typeof c=="string"?y=this.types[c]||this.attributes[c]:c instanceof Text||c.nodeType===Node.TEXT_NODE?y=this.types.text:typeof c=="number"?c&Ke.LEVEL&Ke.BLOCK?y=this.types.block:c&Ke.LEVEL&Ke.INLINE&&(y=this.types.inline):c instanceof Element&&((c.getAttribute("class")||"").split(/\s+/).some(x=>(y=this.classes[x],!!y)),y=y||this.tags[c.tagName]),y==null?null:"scope"in y&&h&Ke.LEVEL&y.scope&&h&Ke.TYPE&y.scope?y:null}register(...c){return c.map(h=>{let y="blotName"in h,x="attrName"in h;if(!y&&!x)throw new Hr("Invalid definition");if(y&&h.blotName==="abstract")throw new Hr("Cannot register abstract class");let T=y?h.blotName:x?h.attrName:void 0;return this.types[T]=h,x?typeof h.keyName=="string"&&(this.attributes[h.keyName]=h):y&&(h.className&&(this.classes[h.className]=h),h.tagName&&(Array.isArray(h.tagName)?h.tagName=h.tagName.map(N=>N.toUpperCase()):h.tagName=h.tagName.toUpperCase(),(Array.isArray(h.tagName)?h.tagName:[h.tagName]).forEach(N=>{(this.tags[N]==null||h.className==null)&&(this.tags[N]=h)}))),h})}};or.blots=new WeakMap;let Pi=or;function bd(f,c){return(f.getAttribute("class")||"").split(/\s+/).filter(h=>h.indexOf(`${c}-`)===0)}s(bd,"Ve");let Bi=class extends vr{static{s(this,"Ke")}static keys(f){return(f.getAttribute("class")||"").split(/\s+/).map(c=>c.split("-").slice(0,-1).join("-"))}add(f,c){return!!this.canAdd(f,c)&&(this.remove(f),f.classList.add(`${this.keyName}-${c}`),!0)}remove(f){bd(f,this.keyName).forEach(c=>{f.classList.remove(c)}),f.classList.length===0&&f.removeAttribute("class")}value(f){let c=(bd(f,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(f,c)?c:""}};function vd(f){let c=f.split("-"),h=c.slice(1).map(y=>y[0].toUpperCase()+y.slice(1)).join("");return c[0]+h}s(vd,"We");let Hs=class extends vr{static{s(this,"Ze")}static keys(f){return(f.getAttribute("style")||"").split(";").map(c=>c.split(":")[0].trim())}add(f,c){return!!this.canAdd(f,c)&&(f.style[vd(this.keyName)]=c,!0)}remove(f){f.style[vd(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")}value(f){let c=f.style[vd(this.keyName)];return this.canAdd(f,c)?c:""}},ya=class{static{s(this,"Ge")}constructor(f){this.attributes={},this.domNode=f,this.build()}attribute(f,c){c?f.add(this.domNode,c)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])}build(){this.attributes={};let f=Pi.find(this.domNode);if(f==null)return;let c=vr.keys(this.domNode),h=Bi.keys(this.domNode),y=Hs.keys(this.domNode);c.concat(h).concat(y).forEach(x=>{let T=f.scroll.query(x,Ke.ATTRIBUTE);T instanceof vr&&(this.attributes[T.attrName]=T)})}copy(f){Object.keys(this.attributes).forEach(c=>{let h=this.attributes[c].value(this.domNode);f.format(c,h)})}move(f){this.copy(f),Object.keys(this.attributes).forEach(c=>{this.attributes[c].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((f,c)=>(f[c]=this.attributes[c].value(this.domNode),f),{})}},om=class{static{s(this,"Xe")}constructor(f,c){this.scroll=f,this.domNode=c,Pi.blots.set(c,this),this.prev=null,this.next=null}static create(f){if(this.tagName==null)throw new Hr("Blot definition missing tagName");let c,h;return Array.isArray(this.tagName)?(typeof f=="string"?(h=f.toUpperCase(),parseInt(h,10).toString()===h&&(h=parseInt(h,10))):typeof f=="number"&&(h=f),c=typeof h=="number"?document.createElement(this.tagName[h-1]):h&&this.tagName.indexOf(h)>-1?document.createElement(h):document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c}get statics(){return this.constructor}attach(){}clone(){let f=this.domNode.cloneNode(!1);return this.scroll.create(f)}detach(){this.parent!=null&&this.parent.removeChild(this),Pi.blots.delete(this.domNode)}deleteAt(f,c){this.isolate(f,c).remove()}formatAt(f,c,h,y){let x=this.isolate(f,c);if(this.scroll.query(h,Ke.BLOT)!=null&&y)x.wrap(h,y);else if(this.scroll.query(h,Ke.ATTRIBUTE)!=null){let T=this.scroll.create(this.statics.scope);x.wrap(T),T.format(h,y)}}insertAt(f,c,h){let y=h==null?this.scroll.create("text",c):this.scroll.create(c,h),x=this.split(f);this.parent.insertBefore(y,x||void 0)}isolate(f,c){let h=this.split(f);if(h==null)throw new Error("Attempt to isolate at end");return h.split(c),h}length(){return 1}offset(f=this.parent){return this.parent==null||this===f?0:this.parent.children.offset(this)+this.parent.offset(f)}optimize(f){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(f,c){let h=typeof f=="string"?this.scroll.create(f,c):f;return this.parent!=null&&(this.parent.insertBefore(h,this.next||void 0),this.remove()),h}split(f,c){return f===0?this:this.next}update(f,c){}wrap(f,c){let h=typeof f=="string"?this.scroll.create(f,c):f;if(this.parent!=null&&this.parent.insertBefore(h,this.next||void 0),typeof h.appendChild!="function")throw new Hr(`Cannot wrap ${f}`);return h.appendChild(this),h}};om.blotName="abstract";let _d=om,Bt=class extends _d{static{s(this,"Ye")}static value(f){return!0}index(f,c){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(c,1):-1}position(f,c){let h=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return f>0&&(h+=1),[this.parent.domNode,h]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Bt.scope=Ke.INLINE_BLOT;let Mr=Bt;class os{static{s(this,"tn")}constructor(){this.head=null,this.tail=null,this.length=0}append(...c){if(this.insertBefore(c[0],null),c.length>1){let h=c.slice(1);this.append(...h)}}at(c){let h=this.iterator(),y=h();for(;y&&c>0;)c-=1,y=h();return y}contains(c){let h=this.iterator(),y=h();for(;y;){if(y===c)return!0;y=h()}return!1}indexOf(c){let h=this.iterator(),y=h(),x=0;for(;y;){if(y===c)return x;x+=1,y=h()}return-1}insertBefore(c,h){c!=null&&(this.remove(c),c.next=h,h!=null?(c.prev=h.prev,h.prev!=null&&(h.prev.next=c),h.prev=c,h===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)}offset(c){let h=0,y=this.head;for(;y!=null;){if(y===c)return h;h+=y.length(),y=y.next}return-1}remove(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)}iterator(c=this.head){return()=>{let h=c;return c!=null&&(c=c.next),h}}find(c,h=!1){let y=this.iterator(),x=y();for(;x;){let T=x.length();if(c<T||h&&c===T&&(x.next==null||x.next.length()!==0))return[x,c];c-=T,x=y()}return[null,0]}forEach(c){let h=this.iterator(),y=h();for(;y;)c(y),y=h()}forEachAt(c,h,y){if(h<=0)return;let[x,T]=this.find(c),N=c-T,I=this.iterator(x),V=I();for(;V&&N<c+h;){let ce=V.length();c>N?y(V,c-N,Math.min(h,N+ce-c)):y(V,0,Math.min(ce,c+h-N)),N+=ce,V=I()}}map(c){return this.reduce((h,y)=>(h.push(c(y)),h),[])}reduce(c,h){let y=this.iterator(),x=y();for(;x;)h=c(h,x),x=y();return h}}function ba(f,c){let h=c.find(f);if(h)return h;try{return c.create(f)}catch{let y=c.create(Ke.INLINE);return Array.from(f.childNodes).forEach(x=>{y.domNode.appendChild(x)}),f.parentNode&&f.parentNode.replaceChild(y.domNode,f),y.attach(),y}}s(ba,"en");let xd=class ol extends _d{static{s(this,"t")}constructor(c,h){super(c,h),this.uiNode=null,this.build()}appendChild(c){this.insertBefore(c)}attach(){super.attach(),this.children.forEach(c=>{c.attach()})}attachUI(c){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=c,ol.uiClass&&this.uiNode.classList.add(ol.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new os,Array.from(this.domNode.childNodes).filter(c=>c!==this.uiNode).reverse().forEach(c=>{try{let h=ba(c,this.scroll);this.insertBefore(h,this.children.head||void 0)}catch(h){if(h instanceof Hr)return;throw h}})}deleteAt(c,h){if(c===0&&h===this.length())return this.remove();this.children.forEachAt(c,h,(y,x,T)=>{y.deleteAt(x,T)})}descendant(c,h=0){let[y,x]=this.children.find(h);return c.blotName==null&&c(y)||c.blotName!=null&&y instanceof c?[y,x]:y instanceof ol?y.descendant(c,x):[null,-1]}descendants(c,h=0,y=Number.MAX_VALUE){let x=[],T=y;return this.children.forEachAt(h,y,(N,I,V)=>{(c.blotName==null&&c(N)||c.blotName!=null&&N instanceof c)&&x.push(N),N instanceof ol&&(x=x.concat(N.descendants(c,I,T))),T-=V}),x}detach(){this.children.forEach(c=>{c.detach()}),super.detach()}enforceAllowedChildren(){let c=!1;this.children.forEach(h=>{c||this.statics.allowedChildren.some(y=>h instanceof y)||(h.statics.scope===Ke.BLOCK_BLOT?(h.next!=null&&this.splitAfter(h),h.prev!=null&&this.splitAfter(h.prev),h.parent.unwrap(),c=!0):h instanceof ol?h.unwrap():h.remove())})}formatAt(c,h,y,x){this.children.forEachAt(c,h,(T,N,I)=>{T.formatAt(N,I,y,x)})}insertAt(c,h,y){let[x,T]=this.children.find(c);if(x)x.insertAt(T,h,y);else{let N=y==null?this.scroll.create("text",h):this.scroll.create(h,y);this.appendChild(N)}}insertBefore(c,h){c.parent!=null&&c.parent.children.remove(c);let y=null;this.children.insertBefore(c,h||null),c.parent=this,h!=null&&(y=h.domNode),(this.domNode.parentNode!==c.domNode||this.domNode.nextSibling!==y)&&this.domNode.insertBefore(c.domNode,y),c.attach()}length(){return this.children.reduce((c,h)=>c+h.length(),0)}moveChildren(c,h){this.children.forEach(y=>{c.insertBefore(y,h)})}optimize(c){if(super.optimize(c),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let h=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(h)}else this.remove()}path(c,h=!1){let[y,x]=this.children.find(c,h),T=[[this,c]];return y instanceof ol?T.concat(y.path(x,h)):(y!=null&&T.push([y,x]),T)}removeChild(c){this.children.remove(c)}replaceWith(c,h){let y=typeof c=="string"?this.scroll.create(c,h):c;return y instanceof ol&&this.moveChildren(y),super.replaceWith(y)}split(c,h=!1){if(!h){if(c===0)return this;if(c===this.length())return this.next}let y=this.clone();return this.parent&&this.parent.insertBefore(y,this.next||void 0),this.children.forEachAt(c,this.length(),(x,T,N)=>{let I=x.split(T,h);I!=null&&y.appendChild(I)}),y}splitAfter(c){let h=this.clone();for(;c.next!=null;)h.appendChild(c.next);return this.parent&&this.parent.insertBefore(h,this.next||void 0),h}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(c,h){let y=[],x=[];c.forEach(T=>{T.target===this.domNode&&T.type==="childList"&&(y.push(...T.addedNodes),x.push(...T.removedNodes))}),x.forEach(T=>{if(T.parentNode!=null&&T.tagName!=="IFRAME"&&document.body.compareDocumentPosition(T)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let N=this.scroll.find(T);N!=null&&(N.domNode.parentNode==null||N.domNode.parentNode===this.domNode)&&N.detach()}),y.filter(T=>T.parentNode===this.domNode&&T!==this.uiNode).sort((T,N)=>T===N?0:T.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(T=>{let N=null;T.nextSibling!=null&&(N=this.scroll.find(T.nextSibling));let I=ba(T,this.scroll);(I.next!==N||I.next==null)&&(I.parent!=null&&I.parent.removeChild(this),this.insertBefore(I,N||void 0))}),this.enforceAllowedChildren()}};xd.uiClass="";let as=xd,po=class Ku extends as{static{s(this,"t")}static create(c){return super.create(c)}static formats(c,h){let y=h.query(Ku.blotName);if(y==null||c.tagName!==y.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return c.tagName.toLowerCase()}}constructor(c,h){super(c,h),this.attributes=new ya(this.domNode)}format(c,h){if(c!==this.statics.blotName||h){let y=this.scroll.query(c,Ke.INLINE);if(y==null)return;y instanceof vr?this.attributes.attribute(y,h):h&&(c!==this.statics.blotName||this.formats()[c]!==h)&&this.replaceWith(c,h)}else this.children.forEach(y=>{y instanceof Ku||(y=y.wrap(Ku.blotName,!0)),this.attributes.copy(y)}),this.unwrap()}formats(){let c=this.attributes.values(),h=this.statics.formats(this.domNode,this.scroll);return h!=null&&(c[this.statics.blotName]=h),c}formatAt(c,h,y,x){this.formats()[y]!=null||this.scroll.query(y,Ke.ATTRIBUTE)?this.isolate(c,h).format(y,x):super.formatAt(c,h,y,x)}optimize(c){super.optimize(c);let h=this.formats();if(Object.keys(h).length===0)return this.unwrap();let y=this.next;y instanceof Ku&&y.prev===this&&function(x,T){if(Object.keys(x).length!==Object.keys(T).length)return!1;for(let N in x)if(x[N]!==T[N])return!1;return!0}(h,y.formats())&&(y.moveChildren(this),y.remove())}replaceWith(c,h){let y=super.replaceWith(c,h);return this.attributes.copy(y),y}update(c,h){super.update(c,h),c.some(y=>y.target===this.domNode&&y.type==="attributes")&&this.attributes.build()}wrap(c,h){let y=super.wrap(c,h);return y instanceof Ku&&this.attributes.move(y),y}};po.allowedChildren=[po,Mr],po.blotName="inline",po.scope=Ke.INLINE_BLOT,po.tagName="SPAN";let wd=po,Do=class qx extends as{static{s(this,"t")}static create(c){return super.create(c)}static formats(c,h){let y=h.query(qx.blotName);if(y==null||c.tagName!==y.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return c.tagName.toLowerCase()}}constructor(c,h){super(c,h),this.attributes=new ya(this.domNode)}format(c,h){let y=this.scroll.query(c,Ke.BLOCK);y!=null&&(y instanceof vr?this.attributes.attribute(y,h):c!==this.statics.blotName||h?h&&(c!==this.statics.blotName||this.formats()[c]!==h)&&this.replaceWith(c,h):this.replaceWith(qx.blotName))}formats(){let c=this.attributes.values(),h=this.statics.formats(this.domNode,this.scroll);return h!=null&&(c[this.statics.blotName]=h),c}formatAt(c,h,y,x){this.scroll.query(y,Ke.BLOCK)!=null?this.format(y,x):super.formatAt(c,h,y,x)}insertAt(c,h,y){if(y==null||this.scroll.query(h,Ke.INLINE)!=null)super.insertAt(c,h,y);else{let x=this.split(c);if(x==null)throw new Error("Attempt to insertAt after block boundaries");{let T=this.scroll.create(h,y);x.parent.insertBefore(T,x)}}}replaceWith(c,h){let y=super.replaceWith(c,h);return this.attributes.copy(y),y}update(c,h){super.update(c,h),c.some(y=>y.target===this.domNode&&y.type==="attributes")&&this.attributes.build()}};Do.blotName="block",Do.scope=Ke.BLOCK_BLOT,Do.tagName="P",Do.allowedChildren=[wd,Do,Mr];let xl=Do,Ed=class extends as{static{s(this,"cn")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(f,c){super.deleteAt(f,c),this.enforceAllowedChildren()}formatAt(f,c,h,y){super.formatAt(f,c,h,y),this.enforceAllowedChildren()}insertAt(f,c,h){super.insertAt(f,c,h),this.enforceAllowedChildren()}optimize(f){super.optimize(f),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ed.blotName="container",Ed.scope=Ke.BLOCK_BLOT;let va=Ed,bi=class extends Mr{static{s(this,"hn")}static formats(f,c){}format(f,c){super.formatAt(0,this.length(),f,c)}formatAt(f,c,h,y){f===0&&c===this.length()?this.format(h,y):super.formatAt(f,c,h,y)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Es={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},_a=class extends as{static{s(this,"fn")}constructor(f,c){super(null,c),this.registry=f,this.scroll=this,this.build(),this.observer=new MutationObserver(h=>{this.update(h)}),this.observer.observe(this.domNode,Es),this.attach()}create(f,c){return this.registry.create(this,f,c)}find(f,c=!1){let h=this.registry.find(f,c);return h?h.scroll===this?h:c?this.find(h.scroll.domNode.parentNode,!0):null:null}query(f,c=Ke.ANY){return this.registry.query(f,c)}register(...f){return this.registry.register(...f)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(f,c){this.update(),f===0&&c===this.length()?this.children.forEach(h=>{h.remove()}):super.deleteAt(f,c)}formatAt(f,c,h,y){this.update(),super.formatAt(f,c,h,y)}insertAt(f,c,h){this.update(),super.insertAt(f,c,h)}optimize(f=[],c={}){super.optimize(c);let h=c.mutationsMap||new WeakMap,y=Array.from(this.observer.takeRecords());for(;y.length>0;)f.push(y.pop());let x=s((I,V=!0)=>{I==null||I===this||I.domNode.parentNode!=null&&(h.has(I.domNode)||h.set(I.domNode,[]),V&&x(I.parent))},"s"),T=s(I=>{h.has(I.domNode)&&(I instanceof as&&I.children.forEach(T),h.delete(I.domNode),I.optimize(c))},"i"),N=f;for(let I=0;N.length>0;I+=1){if(I>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(N.forEach(V=>{let ce=this.find(V.target,!0);ce!=null&&(ce.domNode===V.target&&(V.type==="childList"?(x(this.find(V.previousSibling,!1)),Array.from(V.addedNodes).forEach(Oe=>{let $e=this.find(Oe,!1);x($e,!1),$e instanceof as&&$e.children.forEach(Ve=>{x(Ve,!1)})})):V.type==="attributes"&&x(ce.prev)),x(ce))}),this.children.forEach(T),N=Array.from(this.observer.takeRecords()),y=N.slice();y.length>0;)f.push(y.pop())}}update(f,c={}){f=f||this.observer.takeRecords();let h=new WeakMap;f.map(y=>{let x=this.find(y.target,!0);return x==null?null:h.has(x.domNode)?(h.get(x.domNode).push(y),null):(h.set(x.domNode,[y]),x)}).forEach(y=>{y!=null&&y!==this&&h.has(y.domNode)&&y.update(h.get(y.domNode)||[],c)}),c.mutationsMap=h,h.has(this.domNode)&&super.update(h.get(this.domNode),c),this.optimize(f,c)}};_a.blotName="scroll",_a.defaultChild=xl,_a.allowedChildren=[xl,va],_a.scope=Ke.BLOCK_BLOT,_a.tagName="DIV";let Lc=_a,Ss=class gN extends Mr{static{s(this,"t")}static create(c){return document.createTextNode(c)}static value(c){return c.data}constructor(c,h){super(c,h),this.text=this.statics.value(this.domNode)}deleteAt(c,h){this.domNode.data=this.text=this.text.slice(0,c)+this.text.slice(c+h)}index(c,h){return this.domNode===c?h:-1}insertAt(c,h,y){y==null?(this.text=this.text.slice(0,c)+h+this.text.slice(c),this.domNode.data=this.text):super.insertAt(c,h,y)}length(){return this.text.length}optimize(c){super.optimize(c),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof gN&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(c,h=!1){return[this.domNode,c]}split(c,h=!1){if(!h){if(c===0)return this;if(c===this.length())return this.next}let y=this.scroll.create(this.domNode.splitText(c));return this.parent.insertBefore(y,this.next||void 0),this.text=this.statics.value(this.domNode),y}update(c,h){c.some(y=>y.type==="characterData"&&y.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Ss.blotName="text",Ss.scope=Ke.INLINE_BLOT;let wl=Ss;var He=a(660);let Sd=s(function(f,c){for(var h=-1,y=f==null?0:f.length;++h<y&&c(f[h],h,f)!==!1;);return f},"yn"),jb=Y(Object.keys,Object);var am=Object.prototype.hasOwnProperty;let lm=s(function(f){if(!$t(f))return jb(f);var c=[];for(var h in Object(f))am.call(f,h)&&h!="constructor"&&c.push(h);return c},"Nn"),Cd=s(function(f){return Ur(f)?co(f):lm(f)},"wn"),Hb=s(function(f,c){return f&&St(c,Cd(c),f)},"En"),Ad=s(function(f,c){return f&&St(c,Nr(c),f)},"An"),zb=s(function(f,c){for(var h=-1,y=f==null?0:f.length,x=0,T=[];++h<y;){var N=f[h];c(N,h,f)&&(T[x++]=N)}return T},"qn"),Td=s(function(){return[]},"kn");var cm=Object.prototype.propertyIsEnumerable,El=Object.getOwnPropertySymbols;let zs=El?function(f){return f==null?[]:(f=Object(f),zb(El(f),function(c){return cm.call(f,c)}))}:Td,$b=s(function(f,c){return St(f,zs(f),c)},"Tn"),xa=s(function(f,c){for(var h=-1,y=c.length,x=f.length;++h<y;)f[x+h]=c[h];return f},"Sn"),vi=Object.getOwnPropertySymbols?function(f){for(var c=[];f;)xa(c,zs(f)),f=Ee(f);return c}:Td,um=s(function(f,c){return St(f,vi(f),c)},"jn"),kd=s(function(f,c,h){var y=c(f);return mn(f)?y:xa(y,h(f))},"Rn"),Od=s(function(f){return kd(f,Cd,zs)},"In"),Nd=s(function(f){return kd(f,Nr,vi)},"Mn"),Sl=nt(fe,"DataView"),Rd=nt(fe,"Promise"),Md=nt(fe,"Set"),Ic=nt(fe,"WeakMap");var dm="[object Map]",qi="[object Promise]",Po="[object Set]",fm="[object WeakMap]",Cs="[object DataView]",Vb=it(Sl),wa=it(pt),Kb=it(Rd),Cl=it(Md),hm=it(Ic),As=G;(Sl&&As(new Sl(new ArrayBuffer(1)))!=Cs||pt&&As(new pt)!=dm||Rd&&As(Rd.resolve())!=qi||Md&&As(new Md)!=Po||Ic&&As(new Ic)!=fm)&&(As=s(function(f){var c=G(f),h=c=="[object Object]"?f.constructor:void 0,y=h?it(h):"";if(y)switch(y){case Vb:return Cs;case wa:return dm;case Kb:return qi;case Cl:return Po;case hm:return fm}return c},"Qn"));let Al=As;var go=Object.prototype.hasOwnProperty;let Dc=s(function(f){var c=f.length,h=new f.constructor(c);return c&&typeof f[0]=="string"&&go.call(f,"index")&&(h.index=f.index,h.input=f.input),h},"tr"),Wb=s(function(f,c){var h=c?J(f.buffer):f.buffer;return new f.constructor(h,f.byteOffset,f.byteLength)},"er");var Ld=/\w*$/;let Gb=s(function(f){var c=new f.constructor(f.source,Ld.exec(f));return c.lastIndex=f.lastIndex,c},"rr");var Ts=z?z.prototype:void 0,mm=Ts?Ts.valueOf:void 0;let Ea=s(function(f){return mm?Object(mm.call(f)):{}},"or"),Zb=s(function(f,c,h){var y=f.constructor;switch(c){case"[object ArrayBuffer]":return J(f);case"[object Boolean]":case"[object Date]":return new y(+f);case"[object DataView]":return Wb(f,h);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return te(f,h);case"[object Map]":case"[object Set]":return new y;case"[object Number]":case"[object String]":return new y(f);case"[object RegExp]":return Gb(f);case"[object Symbol]":return Ea(f)}},"lr"),$s=s(function(f){return Kt(f)&&Al(f)=="[object Map]"},"ar");var Tl=xe&&xe.isMap;let pm=Tl?Tt(Tl):$s,Id=s(function(f){return Kt(f)&&Al(f)=="[object Set]"},"hr");var kl=xe&&xe.isSet;let Dd=kl?Tt(kl):Id;var Ol="[object Arguments]",Bo="[object Function]",Nl="[object Object]",fn={};fn[Ol]=fn["[object Array]"]=fn["[object ArrayBuffer]"]=fn["[object DataView]"]=fn["[object Boolean]"]=fn["[object Date]"]=fn["[object Float32Array]"]=fn["[object Float64Array]"]=fn["[object Int8Array]"]=fn["[object Int16Array]"]=fn["[object Int32Array]"]=fn["[object Map]"]=fn["[object Number]"]=fn[Nl]=fn["[object RegExp]"]=fn["[object Set]"]=fn["[object String]"]=fn["[object Symbol]"]=fn["[object Uint8Array]"]=fn["[object Uint8ClampedArray]"]=fn["[object Uint16Array]"]=fn["[object Uint32Array]"]=!0,fn["[object Error]"]=fn[Bo]=fn["[object WeakMap]"]=!1;let gm=s(function f(c,h,y,x,T,N){var I,V=1&h,ce=2&h,Oe=4&h;if(y&&(I=T?y(c,x,T,N):y(c)),I!==void 0)return I;if(!B(c))return c;var $e=mn(c);if($e){if(I=Dc(c),!V)return Le(c,I)}else{var Ve=Al(c),rt=Ve==Bo||Ve=="[object GeneratorFunction]";if(Q(c))return M(c,V);if(Ve==Nl||Ve==Ol||rt&&!T){if(I=ce||rt?{}:Rt(c),!V)return ce?um(c,Ad(I,c)):$b(c,Hb(I,c))}else{if(!fn[Ve])return T?c:{};I=Zb(c,Ve,V)}}N||(N=new In);var et=N.get(c);if(et)return et;N.set(c,I),Dd(c)?c.forEach(function(Cn){I.add(f(Cn,h,y,Cn,c,N))}):pm(c)&&c.forEach(function(Cn,zr){I.set(zr,f(Cn,h,y,zr,c,N))});var vt=$e?void 0:(Oe?ce?Nd:Od:ce?Nr:Cd)(c);return Sd(vt||c,function(Cn,zr){vt&&(Cn=c[zr=Cn]),Or(I,zr,f(Cn,h,y,zr,c,N))}),I},"t"),Sa=s(function(f){return gm(f,5)},"vr"),Pc=s(function(f){return this.__data__.set(f,"__lodash_hash_undefined__"),this},"xr"),Yb=s(function(f){return this.__data__.has(f)},"Nr");function Rl(f){var c=-1,h=f==null?0:f.length;for(this.__data__=new zt;++c<h;)this.add(f[c])}s(Rl,"wr"),Rl.prototype.add=Rl.prototype.push=Pc,Rl.prototype.has=Yb;let Xb=Rl,ym=s(function(f,c){for(var h=-1,y=f==null?0:f.length;++h<y;)if(c(f[h],h,f))return!0;return!1},"Ar"),Qb=s(function(f,c){return f.has(c)},"qr"),ls=s(function(f,c,h,y,x,T){var N=1&h,I=f.length,V=c.length;if(I!=V&&!(N&&V>I))return!1;var ce=T.get(f),Oe=T.get(c);if(ce&&Oe)return ce==c&&Oe==f;var $e=-1,Ve=!0,rt=2&h?new Xb:void 0;for(T.set(f,c),T.set(c,f);++$e<I;){var et=f[$e],vt=c[$e];if(y)var Cn=N?y(vt,et,$e,c,f,T):y(et,vt,$e,f,c,T);if(Cn!==void 0){if(Cn)continue;Ve=!1;break}if(rt){if(!ym(c,function(zr,Xs){if(!Qb(rt,Xs)&&(et===zr||x(et,zr,h,y,T)))return rt.push(Xs)})){Ve=!1;break}}else if(et!==vt&&!x(et,vt,h,y,T)){Ve=!1;break}}return T.delete(f),T.delete(c),Ve},"kr"),Bc=s(function(f){var c=-1,h=Array(f.size);return f.forEach(function(y,x){h[++c]=[x,y]}),h},"_r"),Jb=s(function(f){var c=-1,h=Array(f.size);return f.forEach(function(y){h[++c]=y}),h},"Lr");var Ml=z?z.prototype:void 0,Pd=Ml?Ml.valueOf:void 0;let bm=s(function(f,c,h,y,x,T,N){switch(h){case"[object DataView]":if(f.byteLength!=c.byteLength||f.byteOffset!=c.byteOffset)return!1;f=f.buffer,c=c.buffer;case"[object ArrayBuffer]":return!(f.byteLength!=c.byteLength||!T(new q(f),new q(c)));case"[object Boolean]":case"[object Date]":case"[object Number]":return m(+f,+c);case"[object Error]":return f.name==c.name&&f.message==c.message;case"[object RegExp]":case"[object String]":return f==c+"";case"[object Map]":var I=Bc;case"[object Set]":var V=1&y;if(I||(I=Jb),f.size!=c.size&&!V)return!1;var ce=N.get(f);if(ce)return ce==c;y|=2,N.set(f,c);var Oe=ls(I(f),I(c),y,x,T,N);return N.delete(f),Oe;case"[object Symbol]":if(Pd)return Pd.call(f)==Pd.call(c)}return!1},"Sr");var ev=Object.prototype.hasOwnProperty;let Ll=s(function(f,c,h,y,x,T){var N=1&h,I=Od(f),V=I.length;if(V!=Od(c).length&&!N)return!1;for(var ce=V;ce--;){var Oe=I[ce];if(!(N?Oe in c:ev.call(c,Oe)))return!1}var $e=T.get(f),Ve=T.get(c);if($e&&Ve)return $e==c&&Ve==f;var rt=!0;T.set(f,c),T.set(c,f);for(var et=N;++ce<V;){var vt=f[Oe=I[ce]],Cn=c[Oe];if(y)var zr=N?y(Cn,vt,Oe,c,f,T):y(vt,Cn,Oe,f,c,T);if(!(zr===void 0?vt===Cn||x(vt,Cn,h,y,T):zr)){rt=!1;break}et||(et=Oe=="constructor")}if(rt&&!et){var Xs=f.constructor,Oa=c.constructor;Xs==Oa||!("constructor"in f)||!("constructor"in c)||typeof Xs=="function"&&Xs instanceof Xs&&typeof Oa=="function"&&Oa instanceof Oa||(rt=!1)}return T.delete(f),T.delete(c),rt},"jr");var vm="[object Arguments]",qo="[object Array]",Il="[object Object]",Bd=Object.prototype.hasOwnProperty;let tv=s(function(f,c,h,y,x,T){var N=mn(f),I=mn(c),V=N?qo:Al(f),ce=I?qo:Al(c),Oe=(V=V==vm?Il:V)==Il,$e=(ce=ce==vm?Il:ce)==Il,Ve=V==ce;if(Ve&&Q(f)){if(!Q(c))return!1;N=!0,Oe=!1}if(Ve&&!Oe)return T||(T=new In),N||Dt(f)?ls(f,c,h,y,x,T):bm(f,c,V,h,y,x,T);if(!(1&h)){var rt=Oe&&Bd.call(f,"__wrapped__"),et=$e&&Bd.call(c,"__wrapped__");if(rt||et){var vt=rt?f.value():f,Cn=et?c.value():c;return T||(T=new In),x(vt,Cn,h,y,T)}}return!!Ve&&(T||(T=new In),Ll(f,c,h,y,x,T))},"Ur"),Vs=s(function f(c,h,y,x,T){return c===h||(c==null||h==null||!Kt(c)&&!Kt(h)?c!=c&&h!=h:tv(c,h,y,x,f,T))},"t"),qc=s(function(f,c){return Vs(f,c)},"Pr");class Fc extends bi{static{s(this,"zr")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Fc.blotName="break",Fc.tagName="BR";let _i=Fc;class cs extends wl{static{s(this,"Fr")}}function Fo(f){return f.replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[c])}s(Fo,"$r");class Fi extends wd{static{s(this,"Vr")}static allowedChildren=[Fi,_i,bi,cs];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(c,h){let y=Fi.order.indexOf(c),x=Fi.order.indexOf(h);return y>=0||x>=0?y-x:c===h?0:c<h?-1:1}formatAt(c,h,y,x){if(Fi.compare(this.statics.blotName,y)<0&&this.scroll.query(y,Ke.BLOT)){let T=this.isolate(c,h);x&&T.wrap(y,x)}else super.formatAt(c,h,y,x)}optimize(c){if(super.optimize(c),this.parent instanceof Fi&&Fi.compare(this.statics.blotName,this.parent.statics.blotName)>0){let h=this.parent.isolate(this.offset(),this.length());this.moveChildren(h),h.wrap(this)}}}let Ks=Fi;class ar extends xl{static{s(this,"Wr")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=qd(this)),this.cache.delta}deleteAt(c,h){super.deleteAt(c,h),this.cache={}}formatAt(c,h,y,x){h<=0||(this.scroll.query(y,Ke.BLOCK)?c+h===this.length()&&this.format(y,x):super.formatAt(c,Math.min(h,this.length()-c-1),y,x),this.cache={})}insertAt(c,h,y){if(y!=null)return super.insertAt(c,h,y),void(this.cache={});if(h.length===0)return;let x=h.split(`
`),T=x.shift();T.length>0&&(c<this.length()-1||this.children.tail==null?super.insertAt(Math.min(c,this.length()-1),T):this.children.tail.insertAt(this.children.tail.length(),T),this.cache={});let N=this;x.reduce((I,V)=>(N=N.split(I,!0),N.insertAt(0,V),V.length),c+T.length)}insertBefore(c,h){let{head:y}=this.children;super.insertBefore(c,h),y instanceof _i&&y.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(c,h){super.moveChildren(c,h),this.cache={}}optimize(c){super.optimize(c),this.cache={}}path(c){return super.path(c,!0)}removeChild(c){super.removeChild(c),this.cache={}}split(c){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(h&&(c===0||c>=this.length()-1)){let x=this.clone();return c===0?(this.parent.insertBefore(x,this),this):(this.parent.insertBefore(x,this.next),x)}let y=super.split(c,h);return this.cache={},y}}ar.blotName="block",ar.tagName="P",ar.defaultChild=_i,ar.allowedChildren=[_i,Ks,bi,cs];class Ui extends bi{static{s(this,"Zr")}attach(){super.attach(),this.attributes=new ya(this.domNode)}delta(){return new He().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(c,h){let y=this.scroll.query(c,Ke.BLOCK_ATTRIBUTE);y!=null&&this.attributes.attribute(y,h)}formatAt(c,h,y,x){this.format(y,x)}insertAt(c,h,y){if(y!=null)return void super.insertAt(c,h,y);let x=h.split(`
`),T=x.pop(),N=x.map(V=>{let ce=this.scroll.create(ar.blotName);return ce.insertAt(0,V),ce}),I=this.split(c);N.forEach(V=>{this.parent.insertBefore(V,I)}),T&&this.parent.insertBefore(this.scroll.create("text",T),I)}}function qd(f){let c=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return f.descendants(Mr).reduce((h,y)=>y.length()===0?h:h.insert(y.value(),xi(y,{},c)),new He).insert(`
`,xi(f))}s(qd,"Gr");function xi(f){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return f==null?c:("formats"in f&&typeof f.formats=="function"&&(c={...c,...f.formats()},h&&delete c["code-token"]),f.parent==null||f.parent.statics.blotName==="scroll"||f.parent.statics.scope!==f.statics.scope?c:xi(f.parent,c,h))}s(xi,"Xr"),Ui.scope=Ke.BLOCK_BLOT;class Ws extends bi{static{s(this,"Qr")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(c,h,y){super(c,h),this.selection=y,this.textNode=document.createTextNode(Ws.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(c,h){if(this.savedLength!==0)return void super.format(c,h);let y=this,x=0;for(;y!=null&&y.statics.scope!==Ke.BLOCK_BLOT;)x+=y.offset(y.parent),y=y.parent;y!=null&&(this.savedLength=Ws.CONTENTS.length,y.optimize(),y.formatAt(x,Ws.CONTENTS.length,c,h),this.savedLength=0)}index(c,h){return c===this.textNode?0:super.index(c,h)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let c=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let h=this.prev instanceof cs?this.prev:null,y=h?h.length():0,x=this.next instanceof cs?this.next:null,T=x?x.text:"",{textNode:N}=this,I=N.data.split(Ws.CONTENTS).join(""),V;if(N.data=Ws.CONTENTS,h)V=h,(I||x)&&(h.insertAt(h.length(),I+T),x&&x.remove());else if(x)V=x,x.insertAt(0,I);else{let ce=document.createTextNode(I);V=this.scroll.create(ce),this.parent.insertBefore(V,this)}if(this.remove(),c){let ce=s((Ve,rt)=>h&&Ve===h.domNode?rt:Ve===N?y+rt-1:x&&Ve===x.domNode?y+I.length+rt:null,"s"),Oe=ce(c.start.node,c.start.offset),$e=ce(c.end.node,c.end.offset);if(Oe!==null&&$e!==null)return{startNode:V.domNode,startOffset:Oe,endNode:V.domNode,endOffset:$e}}return null}update(c,h){if(c.some(y=>y.type==="characterData"&&y.target===this.textNode)){let y=this.restore();y&&(h.range=y)}}optimize(c){super.optimize(c);let{parent:h}=this;for(;h;){if(h.domNode.tagName==="A"){this.savedLength=Ws.CONTENTS.length,h.isolate(this.offset(h),this.length()).unwrap(),this.savedLength=0;break}h=h.parent}}value(){return""}}let Dl=Ws;var _m=a(228);let Fd=new WeakMap,Uc=["error","warn","log","info"],jc="warn";function xm(f){if(jc&&Uc.indexOf(f)<=Uc.indexOf(jc)){for(var c=arguments.length,h=new Array(c>1?c-1:0),y=1;y<c;y++)h[y-1]=arguments[y];console[f](...h)}}s(xm,"rs");function o(f){return Uc.reduce((c,h)=>(c[h]=xm.bind(console,h,f),c),{})}s(o,"ss"),o.level=f=>{jc=f},xm.level=o.level;let u=o,p=u("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(f=>{document.addEventListener(f,function(){for(var c=arguments.length,h=new Array(c),y=0;y<c;y++)h[y]=arguments[y];Array.from(document.querySelectorAll(".ql-container")).forEach(x=>{let T=Fd.get(x);T&&T.emitter&&T.emitter.handleDOM(...h)})})});let b=class extends _m{static{s(this,"ls")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",p.error)}emit(){for(var f=arguments.length,c=new Array(f),h=0;h<f;h++)c[h]=arguments[h];return p.log.call(p,...c),super.emit(...c)}handleDOM(f){for(var c=arguments.length,h=new Array(c>1?c-1:0),y=1;y<c;y++)h[y-1]=arguments[y];(this.domListeners[f.type]||[]).forEach(x=>{let{node:T,handler:N}=x;(f.target===T||T.contains(f.target))&&N(f,...h)})}listenDOM(f,c,h){this.domListeners[f]||(this.domListeners[f]=[]),this.domListeners[f].push({node:c,handler:h})}},A=u("quill:selection");class R{static{s(this,"cs")}constructor(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=c,this.length=h}}function $(f,c){try{c.parentNode}catch{return!1}return f.contains(c)}s($,"us");let ee=class{static{s(this,"hs")}constructor(f,c){this.emitter=c,this.scroll=f,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new R(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,b.sources.USER),1)}),this.emitter.on(b.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let h=this.getNativeRange();h!=null&&h.start.node!==this.cursor.textNode&&this.emitter.once(b.events.SCROLL_UPDATE,(y,x)=>{try{this.root.contains(h.start.node)&&this.root.contains(h.end.node)&&this.setNativeRange(h.start.node,h.start.offset,h.end.node,h.end.offset);let T=x.some(N=>N.type==="characterData"||N.type==="childList"||N.type==="attributes"&&N.target===this.root);this.update(T?b.sources.SILENT:y)}catch{}})}),this.emitter.on(b.events.SCROLL_OPTIMIZE,(h,y)=>{if(y.range){let{startNode:x,startOffset:T,endNode:N,endOffset:I}=y.range;this.setNativeRange(x,T,N,I),this.update(b.sources.SILENT)}}),this.update(b.sources.SILENT)}handleComposition(){this.emitter.on(b.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(b.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let f=this.cursor.restore();if(!f)return;setTimeout(()=>{this.setNativeRange(f.startNode,f.startOffset,f.endNode,f.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(b.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(f,c){this.scroll.update();let h=this.getNativeRange();if(h!=null&&h.native.collapsed&&!this.scroll.query(f,Ke.BLOCK)){if(h.start.node!==this.cursor.textNode){let y=this.scroll.find(h.start.node,!1);if(y==null)return;if(y instanceof Mr){let x=y.split(h.start.offset);y.parent.insertBefore(this.cursor,x)}else y.insertBefore(this.cursor,h.start.node);this.cursor.attach()}this.cursor.format(f,c),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(f){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=this.scroll.length(),y;f=Math.min(f,h-1),c=Math.min(f+c,h-1)-f;let[x,T]=this.scroll.leaf(f);if(x==null)return null;if(c>0&&T===x.length()){let[ce]=this.scroll.leaf(f+1);if(ce){let[Oe]=this.scroll.line(f),[$e]=this.scroll.line(f+1);Oe===$e&&(x=ce,T=0)}}[y,T]=x.position(T,!0);let N=document.createRange();if(c>0)return N.setStart(y,T),[x,T]=this.scroll.leaf(f+c),x==null?null:([y,T]=x.position(T,!0),N.setEnd(y,T),N.getBoundingClientRect());let I,V="left";if(y instanceof Text){if(!y.data.length)return null;T<y.data.length?(N.setStart(y,T),N.setEnd(y,T+1)):(N.setStart(y,T-1),N.setEnd(y,T),V="right"),I=N.getBoundingClientRect()}else{if(!(x.domNode instanceof Element))return null;I=x.domNode.getBoundingClientRect(),T>0&&(V="right")}return{bottom:I.top+I.height,height:I.height,left:I[V],right:I[V],top:I.top,width:0}}getNativeRange(){let f=document.getSelection();if(f==null||f.rangeCount<=0)return null;let c=f.getRangeAt(0);if(c==null)return null;let h=this.normalizeNative(c);return A.info("getNativeRange",h),h}getRange(){let f=this.scroll.domNode;if("isConnected"in f&&!f.isConnected)return[null,null];let c=this.getNativeRange();return c==null?[null,null]:[this.normalizedToRange(c),c]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&$(this.root,document.activeElement)}normalizedToRange(f){let c=[[f.start.node,f.start.offset]];f.native.collapsed||c.push([f.end.node,f.end.offset]);let h=c.map(T=>{let[N,I]=T,V=this.scroll.find(N,!0),ce=V.offset(this.scroll);return I===0?ce:V instanceof Mr?ce+V.index(N,I):ce+V.length()}),y=Math.min(Math.max(...h),this.scroll.length()-1),x=Math.min(y,...h);return new R(x,y-x)}normalizeNative(f){if(!$(this.root,f.startContainer)||!f.collapsed&&!$(this.root,f.endContainer))return null;let c={start:{node:f.startContainer,offset:f.startOffset},end:{node:f.endContainer,offset:f.endOffset},native:f};return[c.start,c.end].forEach(h=>{let{node:y,offset:x}=h;for(;!(y instanceof Text)&&y.childNodes.length>0;)if(y.childNodes.length>x)y=y.childNodes[x],x=0;else{if(y.childNodes.length!==x)break;y=y.lastChild,x=y instanceof Text?y.data.length:y.childNodes.length>0?y.childNodes.length:y.childNodes.length+1}h.node=y,h.offset=x}),c}rangeToNative(f){let c=this.scroll.length(),h=s((y,x)=>{y=Math.min(c-1,y);let[T,N]=this.scroll.leaf(y);return T?T.position(N,x):[null,-1]},"n");return[...h(f.index,!1),...h(f.index+f.length,!0)]}setNativeRange(f,c){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:c,x=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(A.info("setNativeRange",f,c,h,y),f!=null&&(this.root.parentNode==null||f.parentNode==null||h.parentNode==null))return;let T=document.getSelection();if(T!=null)if(f!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:N}=this.getNativeRange()||{};if(N==null||x||f!==N.startContainer||c!==N.startOffset||h!==N.endContainer||y!==N.endOffset){f instanceof Element&&f.tagName==="BR"&&(c=Array.from(f.parentNode.childNodes).indexOf(f),f=f.parentNode),h instanceof Element&&h.tagName==="BR"&&(y=Array.from(h.parentNode.childNodes).indexOf(h),h=h.parentNode);let I=document.createRange();I.setStart(f,c),I.setEnd(h,y),T.removeAllRanges(),T.addRange(I)}}else T.removeAllRanges(),this.root.blur()}setRange(f){let c=arguments.length>1&&arguments[1]!==void 0&&arguments[1],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.sources.API;if(typeof c=="string"&&(h=c,c=!1),A.info("setRange",f),f!=null){let y=this.rangeToNative(f);this.setNativeRange(...y,c)}else this.setNativeRange(null);this.update(h)}update(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.sources.USER,c=this.lastRange,[h,y]=this.getRange();if(this.lastRange=h,this.lastNative=y,this.lastRange!=null&&(this.savedRange=this.lastRange),!qc(c,this.lastRange)){if(!this.composing&&y!=null&&y.native.collapsed&&y.start.node!==this.cursor.textNode){let T=this.cursor.restore();T&&this.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)}let x=[b.events.SELECTION_CHANGE,Sa(this.lastRange),Sa(c),f];this.emitter.emit(b.events.EDITOR_CHANGE,...x),f!==b.sources.SILENT&&this.emitter.emit(...x)}}},oe=/^[ -~]*$/;function we(f,c,h){if(f.length===0){let[rt]=Ct(h.pop());return c<=0?`</li></${rt}>`:`</li></${rt}>${we([],c-1,h)}`}let[{child:y,offset:x,length:T,indent:N,type:I},...V]=f,[ce,Oe]=Ct(I);if(N>c)return h.push(I),N===c+1?`<${ce}><li${Oe}>${je(y,x,T)}${we(V,N,h)}`:`<${ce}><li>${we(f,c+1,h)}`;let $e=h[h.length-1];if(N===c&&I===$e)return`</li><li${Oe}>${je(y,x,T)}${we(V,N,h)}`;let[Ve]=Ct(h.pop());return`</li></${Ve}>${we(f,c-1,h)}`}s(we,"fs");function je(f,c,h){let y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if("html"in f&&typeof f.html=="function")return f.html(c,h);if(f instanceof cs)return Fo(f.value().slice(c,c+h));if(f instanceof as){if(f.statics.blotName==="list-container"){let ce=[];return f.children.forEachAt(c,h,(Oe,$e,Ve)=>{let rt="formats"in Oe&&typeof Oe.formats=="function"?Oe.formats():{};ce.push({child:Oe,offset:$e,length:Ve,indent:rt.indent||0,type:rt.list})}),we(ce,-1,[])}let x=[];if(f.children.forEachAt(c,h,(ce,Oe,$e)=>{x.push(je(ce,Oe,$e))}),y||f.statics.blotName==="list")return x.join("");let{outerHTML:T,innerHTML:N}=f.domNode,[I,V]=T.split(`>${N}<`);return I==="<table"?`<table style="border: 1px solid #000;">${x.join("")}<${V}`:`${I}>${x.join("")}<${V}`}return f.domNode instanceof Element?f.domNode.outerHTML:""}s(je,"ps");function dt(f,c){return Object.keys(c).reduce((h,y)=>{if(f[y]==null)return h;let x=c[y];return x===f[y]?h[y]=x:Array.isArray(x)?x.indexOf(f[y])<0?h[y]=x.concat([f[y]]):h[y]=x:h[y]=[x,f[y]],h},{})}s(dt,"gs");function Ct(f){let c=f==="ordered"?"ol":"ul";switch(f){case"checked":return[c,' data-list="checked"'];case"unchecked":return[c,' data-list="unchecked"'];default:return[c,""]}}s(Ct,"ms");function Lr(f){return f.reduce((c,h)=>{if(typeof h.insert=="string"){let y=h.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return c.insert(y,h.attributes)}return c.push(h)},new He)}s(Lr,"bs");function Xn(f,c){let{index:h,length:y}=f;return new R(h+c,y)}s(Xn,"ys");let ji=class{static{s(this,"vs")}constructor(f){this.scroll=f,this.delta=this.getDelta()}applyDelta(f){this.scroll.update();let c=this.scroll.length();this.scroll.batchStart();let h=Lr(f),y=new He;return function(x){let T=[];return x.forEach(N=>{typeof N.insert=="string"?N.insert.split(`
`).forEach((I,V)=>{V&&T.push({insert:`
`,attributes:N.attributes}),I&&T.push({insert:I,attributes:N.attributes})}):T.push(N)}),T}(h.ops.slice()).reduce((x,T)=>{let N=He.Op.length(T),I=T.attributes||{},V=!1,ce=!1;if(T.insert!=null){if(y.retain(N),typeof T.insert=="string"){let Ve=T.insert;ce=!Ve.endsWith(`
`)&&(c<=x||!!this.scroll.descendant(Ui,x)[0]),this.scroll.insertAt(x,Ve);let[rt,et]=this.scroll.line(x),vt=jr({},xi(rt));if(rt instanceof ar){let[Cn]=rt.descendant(Mr,et);Cn&&(vt=jr(vt,xi(Cn)))}I=He.AttributeMap.diff(vt,I)||{}}else if(typeof T.insert=="object"){let Ve=Object.keys(T.insert)[0];if(Ve==null)return x;let rt=this.scroll.query(Ve,Ke.INLINE)!=null;if(rt)(c<=x||this.scroll.descendant(Ui,x)[0])&&(ce=!0);else if(x>0){let[et,vt]=this.scroll.descendant(Mr,x-1);et instanceof cs?et.value()[vt]!==`
`&&(V=!0):et instanceof bi&&et.statics.scope===Ke.INLINE_BLOT&&(V=!0)}if(this.scroll.insertAt(x,Ve,T.insert[Ve]),rt){let[et]=this.scroll.descendant(Mr,x);if(et){let vt=jr({},xi(et));I=He.AttributeMap.diff(vt,I)||{}}}}c+=N}else if(y.push(T),T.retain!==null&&typeof T.retain=="object"){let Ve=Object.keys(T.retain)[0];if(Ve==null)return x;this.scroll.updateEmbedAt(x,Ve,T.retain[Ve])}Object.keys(I).forEach(Ve=>{this.scroll.formatAt(x,N,Ve,I[Ve])});let Oe=V?1:0,$e=ce?1:0;return c+=Oe+$e,y.retain(Oe),y.delete($e),x+N+Oe+$e},0),y.reduce((x,T)=>typeof T.delete=="number"?(this.scroll.deleteAt(x,T.delete),x):x+He.Op.length(T),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(h)}deleteText(f,c){return this.scroll.deleteAt(f,c),this.update(new He().retain(f).delete(c))}formatLine(f,c){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(h).forEach(x=>{this.scroll.lines(f,Math.max(c,1)).forEach(T=>{T.format(x,h[x])})}),this.scroll.optimize();let y=new He().retain(f).retain(c,Sa(h));return this.update(y)}formatText(f,c){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(h).forEach(x=>{this.scroll.formatAt(f,c,x,h[x])});let y=new He().retain(f).retain(c,Sa(h));return this.update(y)}getContents(f,c){return this.delta.slice(f,f+c)}getDelta(){return this.scroll.lines().reduce((f,c)=>f.concat(c.delta()),new He)}getFormat(f){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=[],y=[];c===0?this.scroll.path(f).forEach(N=>{let[I]=N;I instanceof ar?h.push(I):I instanceof Mr&&y.push(I)}):(h=this.scroll.lines(f,c),y=this.scroll.descendants(Mr,f,c));let[x,T]=[h,y].map(N=>{let I=N.shift();if(I==null)return{};let V=xi(I);for(;Object.keys(V).length>0;){let ce=N.shift();if(ce==null)return V;V=dt(xi(ce),V)}return V});return{...x,...T}}getHTML(f,c){let[h,y]=this.scroll.line(f);if(h){let x=h.length();return!(h.length()>=y+c)||y===0&&c===x?je(this.scroll,f,c,!0):je(h,y,c,!0)}return""}getText(f,c){return this.getContents(f,c).filter(h=>typeof h.insert=="string").map(h=>h.insert).join("")}insertContents(f,c){let h=Lr(c),y=new He().retain(f).concat(h);return this.scroll.insertContents(f,h),this.update(y)}insertEmbed(f,c,h){return this.scroll.insertAt(f,c,h),this.update(new He().retain(f).insert({[c]:h}))}insertText(f,c){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c=c.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(f,c),Object.keys(h).forEach(y=>{this.scroll.formatAt(f,c.length,y,h[y])}),this.update(new He().retain(f).insert(c,Sa(h)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let f=this.scroll.children.head;if(f?.statics.blotName!==ar.blotName)return!1;let c=f;return!(c.children.length>1)&&c.children.head instanceof _i}removeFormat(f,c){let h=this.getText(f,c),[y,x]=this.scroll.line(f+c),T=0,N=new He;y!=null&&(T=y.length()-x,N=y.delta().slice(x,x+T-1).insert(`
`));let I=this.getContents(f,c+T).diff(new He().insert(h).concat(N)),V=new He().retain(f).concat(I);return this.applyDelta(V)}update(f){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,y=this.delta;if(c.length===1&&c[0].type==="characterData"&&c[0].target.data.match(oe)&&this.scroll.find(c[0].target)){let x=this.scroll.find(c[0].target),T=xi(x),N=x.offset(this.scroll),I=c[0].oldValue.replace(Dl.CONTENTS,""),V=new He().insert(I),ce=new He().insert(x.value()),Oe=h&&{oldRange:Xn(h.oldRange,-N),newRange:Xn(h.newRange,-N)};f=new He().retain(N).concat(V.diff(ce,Oe)).reduce(($e,Ve)=>Ve.insert?$e.insert(Ve.insert,T):$e.push(Ve),new He),this.delta=y.compose(f)}else this.delta=this.getDelta(),f&&qc(y.compose(f),this.delta)||(f=y.diff(this.delta,h));return f}},Tn=class{static{s(this,"xs")}static DEFAULTS={};constructor(f){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=f,this.options=c}},Gs="\uFEFF",Ud=class extends bi{static{s(this,"ws")}constructor(f,c){super(f,c),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(h=>{this.contentNode.appendChild(h)}),this.leftGuard=document.createTextNode(Gs),this.rightGuard=document.createTextNode(Gs),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(f,c){return f===this.leftGuard?0:f===this.rightGuard?1:super.index(f,c)}restore(f){let c,h=null,y=f.data.split(Gs).join("");if(f===this.leftGuard)if(this.prev instanceof cs){let x=this.prev.length();this.prev.insertAt(x,y),h={startNode:this.prev.domNode,startOffset:x+y.length}}else c=document.createTextNode(y),this.parent.insertBefore(this.scroll.create(c),this),h={startNode:c,startOffset:y.length};else f===this.rightGuard&&(this.next instanceof cs?(this.next.insertAt(0,y),h={startNode:this.next.domNode,startOffset:y.length}):(c=document.createTextNode(y),this.parent.insertBefore(this.scroll.create(c),this.next),h={startNode:c,startOffset:y.length}));return f.data=Gs,h}update(f,c){f.forEach(h=>{if(h.type==="characterData"&&(h.target===this.leftGuard||h.target===this.rightGuard)){let y=this.restore(h.target);y&&(c.range=y)}})}},nv=class{static{s(this,"Es")}isComposing=!1;constructor(f,c){this.scroll=f,this.emitter=c,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",f=>{this.isComposing||this.handleCompositionStart(f)}),this.scroll.domNode.addEventListener("compositionend",f=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(f)})})}handleCompositionStart(f){let c=f.target instanceof Node?this.scroll.find(f.target,!0):null;!c||c instanceof Ud||(this.emitter.emit(b.events.COMPOSITION_BEFORE_START,f),this.scroll.batchStart(),this.emitter.emit(b.events.COMPOSITION_START,f),this.isComposing=!0)}handleCompositionEnd(f){this.emitter.emit(b.events.COMPOSITION_BEFORE_END,f),this.scroll.batchEnd(),this.emitter.emit(b.events.COMPOSITION_END,f),this.isComposing=!1}};class jd{static{s(this,"As")}static DEFAULTS={modules:{}};static themes={default:jd};modules={};constructor(c,h){this.quill=c,this.options=h}init(){Object.keys(this.options.modules).forEach(c=>{this.modules[c]==null&&this.addModule(c)})}addModule(c){let h=this.quill.constructor.import(`modules/${c}`);return this.modules[c]=new h(this.quill,this.options.modules[c]||{}),this.modules[c]}}let Pl=jd,rv=s(f=>{let c=f.getBoundingClientRect(),h="offsetWidth"in f&&Math.abs(c.width)/f.offsetWidth||1,y="offsetHeight"in f&&Math.abs(c.height)/f.offsetHeight||1;return{top:c.top,right:c.left+f.clientWidth*h,bottom:c.top+f.clientHeight*y,left:c.left}},"ks"),Bl=s(f=>{let c=parseInt(f,10);return Number.isNaN(c)?0:c},"_s"),zn=s((f,c,h,y,x,T)=>f<h&&c>y?0:f<h?-(h-f+x):c>y?c-f>y-h?f+x-h:c-y+T:0,"Ls"),Hc=s((f,c)=>{let h=f.ownerDocument,y=c,x=f;for(;x;){let N=x===h.body,I=N?{top:0,right:window.visualViewport?.width??h.documentElement.clientWidth,bottom:window.visualViewport?.height??h.documentElement.clientHeight,left:0}:rv(x),V=getComputedStyle(x),ce=zn(y.left,y.right,I.left,I.right,Bl(V.scrollPaddingLeft),Bl(V.scrollPaddingRight)),Oe=zn(y.top,y.bottom,I.top,I.bottom,Bl(V.scrollPaddingTop),Bl(V.scrollPaddingBottom));if(ce||Oe)if(N)h.defaultView?.scrollBy(ce,Oe);else{let{scrollLeft:$e,scrollTop:Ve}=x;Oe&&(x.scrollTop+=Oe),ce&&(x.scrollLeft+=ce);let rt=x.scrollLeft-$e,et=x.scrollTop-Ve;y={left:y.left-rt,top:y.top-et,right:y.right-rt,bottom:y.bottom-et}}x=N||V.position==="fixed"?null:(T=x).parentElement||T.getRootNode().host||null}var T},"Os"),iv=["block","break","cursor","inline","scroll","text"],sv=s((f,c,h)=>{let y=new Pi;return iv.forEach(x=>{let T=c.query(x);T&&y.register(T)}),f.forEach(x=>{let T=c.query(x);T||h.error(`Cannot register "${x}" specified in "formats" config. Are you sure it was registered?`);let N=0;for(;T;)if(y.register(T),T="blotName"in T?T.requiredContainer??null:null,N+=1,N>100){h.error(`Cycle detected in registering blot requiredContainer: "${x}"`);break}}),y},"Ss"),Ca=u("quill"),Aa=new Pi;as.uiClass="ql-ui";class _e{static{s(this,"Rs")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Aa,theme:"default"};static events=b.events;static sources=b.sources;static version="2.0.2";static imports={delta:He,parchment:l,"core/module":Tn,"core/theme":Pl};static debug(c){c===!0&&(c="log"),u.level(c)}static find(c){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return Fd.get(c)||Aa.find(c,h)}static import(c){return this.imports[c]==null&&Ca.error(`Cannot import ${c}. Are you sure it was registered?`),this.imports[c]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let c=arguments.length<=0?void 0:arguments[0],h=!!(!(arguments.length<=1)&&arguments[1]),y="attrName"in c?c.attrName:c.blotName;typeof y=="string"?this.register(`formats/${y}`,c,h):Object.keys(c).forEach(x=>{this.register(x,c[x],h)})}else{let c=arguments.length<=0?void 0:arguments[0],h=arguments.length<=1?void 0:arguments[1],y=!!(!(arguments.length<=2)&&arguments[2]);this.imports[c]==null||y||Ca.warn(`Overwriting ${c} with`,h),this.imports[c]=h,(c.startsWith("blots/")||c.startsWith("formats/"))&&h&&typeof h!="boolean"&&h.blotName!=="abstract"&&Aa.register(h),typeof h.register=="function"&&h.register(Aa)}}constructor(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=function(N,I){let V=wm(N);if(!V)throw new Error("Invalid Quill container");let ce=!I.theme||I.theme===_e.DEFAULTS.theme,Oe=ce?Pl:_e.import(`themes/${I.theme}`);if(!Oe)throw new Error(`Invalid theme ${I.theme}. Did you register it?`);let{modules:$e,...Ve}=_e.DEFAULTS,{modules:rt,...et}=Oe.DEFAULTS,vt=ov(I.modules);vt!=null&&vt.toolbar&&vt.toolbar.constructor!==Object&&(vt={...vt,toolbar:{container:vt.toolbar}});let Cn=jr({},ov($e),ov(rt),vt),zr={...Ve,...tE(et),...tE(I)},Xs=I.registry;return Xs?I.formats&&Ca.warn('Ignoring "formats" option because "registry" is specified'):Xs=I.formats?sv(I.formats,zr.registry,Ca):zr.registry,{...zr,registry:Xs,container:V,theme:Oe,modules:Object.entries(Cn).reduce((Oa,uB)=>{let[wv,FE]=uB;if(!FE)return Oa;let UE=_e.import(`modules/${wv}`);return UE==null?(Ca.error(`Cannot load ${wv} module. Are you sure you registered it?`),Oa):{...Oa,[wv]:jr({},UE.DEFAULTS||{},FE)}},{}),bounds:wm(zr.bounds)}}(c,h),this.container=this.options.container,this.container==null)return void Ca.error("Invalid Quill container",c);this.options.debug&&_e.debug(this.options.debug);let y=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Fd.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new b;let x=Lc.blotName,T=this.options.registry.query(x);if(!T||!("blotName"in T))throw new Error(`Cannot initialize Quill without "${x}" blot`);if(this.scroll=new T(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new ji(this.scroll),this.selection=new ee(this.scroll,this.emitter),this.composition=new nv(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(b.events.EDITOR_CHANGE,N=>{N===b.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(b.events.SCROLL_UPDATE,(N,I)=>{let V=this.selection.lastRange,[ce]=this.selection.getRange(),Oe=V&&ce?{oldRange:V,newRange:ce}:void 0;Zs.call(this,()=>this.editor.update(null,I,Oe),N)}),this.emitter.on(b.events.SCROLL_EMBED_UPDATE,(N,I)=>{let V=this.selection.lastRange,[ce]=this.selection.getRange(),Oe=V&&ce?{oldRange:V,newRange:ce}:void 0;Zs.call(this,()=>{let $e=new He().retain(N.offset(this)).retain({[N.statics.blotName]:I});return this.editor.update($e,[],Oe)},_e.sources.USER)}),y){let N=this.clipboard.convert({html:`${y}<p><br></p>`,text:`
`});this.setContents(N)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof c=="string"){let y=c;(c=document.createElement("div")).classList.add(y)}return this.container.insertBefore(c,h),c}blur(){this.selection.setRange(null)}deleteText(c,h,y){return[c,h,,y]=Uo(c,h,y),Zs.call(this,()=>this.editor.deleteText(c,h),y,c,-1*h)}disable(){this.enable(!1)}editReadOnly(c){this.allowReadOnlyEdits=!0;let h=c();return this.allowReadOnlyEdits=!1,h}enable(){let c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.scroll.enable(c),this.container.classList.toggle("ql-disabled",!c)}focus(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),c.preventScroll||this.scrollSelectionIntoView()}format(c,h){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.sources.API;return Zs.call(this,()=>{let x=this.getSelection(!0),T=new He;if(x==null)return T;if(this.scroll.query(c,Ke.BLOCK))T=this.editor.formatLine(x.index,x.length,{[c]:h});else{if(x.length===0)return this.selection.format(c,h),T;T=this.editor.formatText(x.index,x.length,{[c]:h})}return this.setSelection(x,b.sources.SILENT),T},y)}formatLine(c,h,y,x,T){let N;return[c,h,N,T]=Uo(c,h,y,x,T),Zs.call(this,()=>this.editor.formatLine(c,h,N),T,c,0)}formatText(c,h,y,x,T){let N;return[c,h,N,T]=Uo(c,h,y,x,T),Zs.call(this,()=>this.editor.formatText(c,h,N),T,c,0)}getBounds(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=null;if(y=typeof c=="number"?this.selection.getBounds(c,h):this.selection.getBounds(c.index,c.length),!y)return null;let x=this.container.getBoundingClientRect();return{bottom:y.bottom-x.top,height:y.height,left:y.left-x.left,right:y.right-x.left,top:y.top-x.top,width:y.width}}getContents(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-c;return[c,h]=Uo(c,h),this.editor.getContents(c,h)}getFormat(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof c=="number"?this.editor.getFormat(c,h):this.editor.getFormat(c.index,c.length)}getIndex(c){return c.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(c){return this.scroll.leaf(c)}getLine(c){return this.scroll.line(c)}getLines(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof c!="number"?this.scroll.lines(c.index,c.length):this.scroll.lines(c,h)}getModule(c){return this.theme.modules[c]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1?arguments[1]:void 0;return typeof c=="number"&&(h=h??this.getLength()-c),[c,h]=Uo(c,h),this.editor.getHTML(c,h)}getText(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1?arguments[1]:void 0;return typeof c=="number"&&(h=h??this.getLength()-c),[c,h]=Uo(c,h),this.editor.getText(c,h)}hasFocus(){return this.selection.hasFocus()}insertEmbed(c,h,y){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_e.sources.API;return Zs.call(this,()=>this.editor.insertEmbed(c,h,y),x,c)}insertText(c,h,y,x,T){let N;return[c,,N,T]=Uo(c,0,y,x,T),Zs.call(this,()=>this.editor.insertText(c,h,N),T,c,h.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(c,h,y){return[c,h,,y]=Uo(c,h,y),Zs.call(this,()=>this.editor.removeFormat(c,h),y,c)}scrollRectIntoView(c){Hc(this.root,c)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let c=this.selection.lastRange,h=c&&this.selection.getBounds(c.index,c.length);h&&this.scrollRectIntoView(h)}setContents(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.sources.API;return Zs.call(this,()=>{c=new He(c);let y=this.getLength(),x=this.editor.deleteText(0,y),T=this.editor.insertContents(0,c),N=this.editor.deleteText(this.getLength()-1,1);return x.compose(T).compose(N)},h)}setSelection(c,h,y){c==null?this.selection.setRange(null,h||_e.sources.API):([c,h,,y]=Uo(c,h,y),this.selection.setRange(new R(Math.max(0,c),h),y),y!==b.sources.SILENT&&this.scrollSelectionIntoView())}setText(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.sources.API,y=new He().insert(c);return this.setContents(y,h)}update(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.sources.USER,h=this.scroll.update(c);return this.selection.update(c),h}updateContents(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.sources.API;return Zs.call(this,()=>(c=new He(c),this.editor.applyDelta(c)),h,!0)}}function wm(f){return typeof f=="string"?document.querySelector(f):f}s(wm,"Is");function ov(f){return Object.entries(f??{}).reduce((c,h)=>{let[y,x]=h;return{...c,[y]:x===!0?{}:x}},{})}s(ov,"Ms");function tE(f){return Object.fromEntries(Object.entries(f).filter(c=>c[1]!==void 0))}s(tE,"Bs");function Zs(f,c,h,y){if(!this.isEnabled()&&c===b.sources.USER&&!this.allowReadOnlyEdits)return new He;let x=h==null?null:this.getSelection(),T=this.editor.delta,N=f();if(x!=null&&(h===!0&&(h=x.index),y==null?x=nE(x,N,c):y!==0&&(x=nE(x,h,y,c)),this.setSelection(x,b.sources.SILENT)),N.length()>0){let I=[b.events.TEXT_CHANGE,N,T,c];this.emitter.emit(b.events.EDITOR_CHANGE,...I),c!==b.sources.SILENT&&this.emitter.emit(...I)}return N}s(Zs,"Us");function Uo(f,c,h,y,x){let T={};return typeof f.index=="number"&&typeof f.length=="number"?typeof c!="number"?(x=y,y=h,h=c,c=f.length,f=f.index):(c=f.length,f=f.index):typeof c!="number"&&(x=y,y=h,h=c,c=0),typeof h=="object"?(T=h,x=y):typeof h=="string"&&(y!=null?T[h]=y:x=h),[f,c,T,x=x||b.sources.API]}s(Uo,"Ds");function nE(f,c,h,y){let x=typeof h=="number"?h:0;if(f==null)return null;let T,N;return c&&typeof c.transformPosition=="function"?[T,N]=[f.index,f.index+f.length].map(I=>c.transformPosition(I,y!==b.sources.USER)):[T,N]=[f.index,f.index+f.length].map(I=>I<c||I===c&&y===b.sources.USER?I:x>=0?I+x:Math.max(c,I+x)),new R(T,N-T)}s(nE,"Ps");let ql=class extends va{static{s(this,"zs")}};function rE(f){return f instanceof ar||f instanceof Ui}s(rE,"Hs");function iE(f){return typeof f.updateContent=="function"}s(iE,"Fs");function av(f,c,h){h.reduce((y,x)=>{let T=He.Op.length(x),N=x.attributes||{};if(x.insert!=null){if(typeof x.insert=="string"){let I=x.insert;f.insertAt(y,I);let[V]=f.descendant(Mr,y),ce=xi(V);N=He.AttributeMap.diff(ce,N)||{}}else if(typeof x.insert=="object"){let I=Object.keys(x.insert)[0];if(I==null)return y;if(f.insertAt(y,I,x.insert[I]),f.scroll.query(I,Ke.INLINE)!=null){let[V]=f.descendant(Mr,y),ce=xi(V);N=He.AttributeMap.diff(ce,N)||{}}}}return Object.keys(N).forEach(I=>{f.formatAt(y,T,I,N[I])}),y+T},c)}s(av,"$s");let b2=class extends Lc{static{s(this,"Vs")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=ar;static allowedChildren=[ar,Ui,ql];constructor(f,c,h){let{emitter:y}=h;super(f,c),this.emitter=y,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",x=>this.handleDragStart(x))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let f=this.batch;this.batch=!1,this.update(f)}emitMount(f){this.emitter.emit(b.events.SCROLL_BLOT_MOUNT,f)}emitUnmount(f){this.emitter.emit(b.events.SCROLL_BLOT_UNMOUNT,f)}emitEmbedUpdate(f,c){this.emitter.emit(b.events.SCROLL_EMBED_UPDATE,f,c)}deleteAt(f,c){let[h,y]=this.line(f),[x]=this.line(f+c);if(super.deleteAt(f,c),x!=null&&h!==x&&y>0){if(h instanceof Ui||x instanceof Ui)return void this.optimize();let T=x.children.head instanceof _i?null:x.children.head;h.moveChildren(x,T),h.remove()}this.optimize()}enable(){let f=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.domNode.setAttribute("contenteditable",f?"true":"false")}formatAt(f,c,h,y){super.formatAt(f,c,h,y),this.optimize()}insertAt(f,c,h){if(f>=this.length())if(h==null||this.scroll.query(c,Ke.BLOCK)==null){let y=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(y),h==null&&c.endsWith(`
`)?y.insertAt(0,c.slice(0,-1),h):y.insertAt(0,c,h)}else{let y=this.scroll.create(c,h);this.appendChild(y)}else super.insertAt(f,c,h);this.optimize()}insertBefore(f,c){if(f.statics.scope===Ke.INLINE_BLOT){let h=this.scroll.create(this.statics.defaultChild.blotName);h.appendChild(f),super.insertBefore(h,c)}else super.insertBefore(f,c)}insertContents(f,c){let h=this.deltaToRenderBlocks(c.concat(new He().insert(`
`))),y=h.pop();if(y==null)return;this.batchStart();let x=h.shift();if(x){let I=x.type==="block"&&(x.delta.length()===0||!this.descendant(Ui,f)[0]&&f<this.length()),V=x.type==="block"?x.delta:new He().insert({[x.key]:x.value});av(this,f,V);let ce=x.type==="block"?1:0,Oe=f+V.length()+ce;I&&this.insertAt(Oe-1,`
`);let $e=xi(this.line(f)[0]),Ve=He.AttributeMap.diff($e,x.attributes)||{};Object.keys(Ve).forEach(rt=>{this.formatAt(Oe-1,1,rt,Ve[rt])}),f=Oe}let[T,N]=this.children.find(f);h.length&&(T&&(T=T.split(N),N=0),h.forEach(I=>{if(I.type==="block")av(this.createBlock(I.attributes,T||void 0),0,I.delta);else{let V=this.create(I.key,I.value);this.insertBefore(V,T||void 0),Object.keys(I.attributes).forEach(ce=>{V.format(ce,I.attributes[ce])})}})),y.type==="block"&&y.delta.length()&&av(this,T?T.offset(T.scroll)+N:this.length(),y.delta),this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(f){let c=this.path(f).pop();if(!c)return[null,-1];let[h,y]=c;return h instanceof Mr?[h,y]:[null,-1]}line(f){return f===this.length()?this.line(f-1):this.descendant(rE,f)}lines(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,h=s((y,x,T)=>{let N=[],I=T;return y.children.forEachAt(x,T,(V,ce,Oe)=>{rE(V)?N.push(V):V instanceof va&&(N=N.concat(h(V,ce,I))),I-=Oe}),N},"n");return h(this,f,c)}optimize(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(f,c),f.length>0&&this.emitter.emit(b.events.SCROLL_OPTIMIZE,f,c))}path(f){return super.path(f).slice(1)}remove(){}update(f){if(this.batch)return void(Array.isArray(f)&&(this.batch=this.batch.concat(f)));let c=b.sources.USER;typeof f=="string"&&(c=f),Array.isArray(f)||(f=this.observer.takeRecords()),(f=f.filter(h=>{let{target:y}=h,x=this.find(y,!0);return x&&!iE(x)})).length>0&&this.emitter.emit(b.events.SCROLL_BEFORE_UPDATE,c,f),super.update(f.concat([])),f.length>0&&this.emitter.emit(b.events.SCROLL_UPDATE,c,f)}updateEmbedAt(f,c,h){let[y]=this.descendant(x=>x instanceof Ui,f);y&&y.statics.blotName===c&&iE(y)&&y.updateContent(h)}handleDragStart(f){f.preventDefault()}deltaToRenderBlocks(f){let c=[],h=new He;return f.forEach(y=>{let x=y?.insert;if(x)if(typeof x=="string"){let T=x.split(`
`);T.slice(0,-1).forEach(I=>{h.insert(I,y.attributes),c.push({type:"block",delta:h,attributes:y.attributes??{}}),h=new He});let N=T[T.length-1];N&&h.insert(N,y.attributes)}else{let T=Object.keys(x)[0];if(!T)return;this.query(T,Ke.INLINE)?h.push(y):(h.length()&&c.push({type:"block",delta:h,attributes:{}}),h=new He,c.push({type:"blockEmbed",key:T,value:x[T],attributes:y.attributes??{}}))}}),h.length()&&c.push({type:"block",delta:h,attributes:{}}),c}createBlock(f,c){let h,y={};Object.entries(f).forEach(N=>{let[I,V]=N;this.query(I,Ke.BLOCK&Ke.BLOT)!=null?h=I:y[I]=V});let x=this.create(h||this.statics.defaultChild.blotName,h?f[h]:void 0);this.insertBefore(x,c||void 0);let T=x.length();return Object.entries(y).forEach(N=>{let[I,V]=N;x.formatAt(0,T,I,V)}),x}},lv={scope:Ke.BLOCK,whitelist:["right","center","justify"]},v2=new vr("align","align",lv),sE=new Bi("align","ql-align",lv),oE=new Hs("align","text-align",lv);class aE extends Hs{static{s(this,"Xs")}value(c){let h=super.value(c);return h.startsWith("rgb(")?(h=h.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${h.split(",").map(y=>`00${parseInt(y,10).toString(16)}`.slice(-2)).join("")}`):h}}let _2=new Bi("color","ql-color",{scope:Ke.INLINE}),cv=new aE("color","color",{scope:Ke.INLINE}),x2=new Bi("background","ql-bg",{scope:Ke.INLINE}),uv=new aE("background","background-color",{scope:Ke.INLINE});class Fl extends ql{static{s(this,"ei")}static create(c){let h=super.create(c);return h.setAttribute("spellcheck","false"),h}code(c,h){return this.children.map(y=>y.length()<=1?"":y.domNode.innerText).join(`
`).slice(c,c+h)}html(c,h){return`<pre>
${Fo(this.code(c,h))}
</pre>`}}class wi extends ar{static{s(this,"ni")}static TAB="  ";static register(){_e.register(Fl)}}class dv extends Ks{static{s(this,"ri")}}dv.blotName="code",dv.tagName="CODE",wi.blotName="code-block",wi.className="ql-code-block",wi.tagName="DIV",Fl.blotName="code-block-container",Fl.className="ql-code-block-container",Fl.tagName="DIV",Fl.allowedChildren=[wi],wi.allowedChildren=[cs,_i,Dl],wi.requiredContainer=Fl;let fv={scope:Ke.BLOCK,whitelist:["rtl"]},lE=new vr("direction","dir",fv),cE=new Bi("direction","ql-direction",fv),uE=new Hs("direction","direction",fv),dE={scope:Ke.INLINE,whitelist:["serif","monospace"]},fE=new Bi("font","ql-font",dE),hE=new class extends Hs{value(f){return super.value(f).replace(/["']/g,"")}}("font","font-family",dE),mE=new Bi("size","ql-size",{scope:Ke.INLINE,whitelist:["small","large","huge"]}),pE=new Hs("size","font-size",{scope:Ke.INLINE,whitelist:["10px","18px","32px"]}),w2=u("quill:keyboard"),E2=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Em extends Tn{static{s(this,"gi")}static match(c,h){return!["altKey","ctrlKey","metaKey","shiftKey"].some(y=>!!h[y]!==c[y]&&h[y]!==null)&&(h.key===c.key||h.key===c.which)}constructor(c,h){super(c,h),this.bindings={},Object.keys(this.options.bindings).forEach(y=>{this.options.bindings[y]&&this.addBinding(this.options.bindings[y])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=function(T){if(typeof T=="string"||typeof T=="number")T={key:T};else{if(typeof T!="object")return null;T=Sa(T)}return T.shortKey&&(T[E2]=T.shortKey,delete T.shortKey),T}(c);if(x==null)return void w2.warn("Attempted to add invalid keyboard binding",x);typeof h=="function"&&(h={handler:h}),typeof y=="function"&&(y={handler:y}),(Array.isArray(x.key)?x.key:[x.key]).forEach(T=>{let N={...x,key:T,...h,...y};this.bindings[N.key]=this.bindings[N.key]||[],this.bindings[N.key].push(N)})}listen(){this.quill.root.addEventListener("keydown",c=>{if(c.defaultPrevented||c.isComposing||c.keyCode===229&&(c.key==="Enter"||c.key==="Backspace"))return;let h=(this.bindings[c.key]||[]).concat(this.bindings[c.which]||[]).filter(et=>Em.match(c,et));if(h.length===0)return;let y=_e.find(c.target,!0);if(y&&y.scroll!==this.quill.scroll)return;let x=this.quill.getSelection();if(x==null||!this.quill.hasFocus())return;let[T,N]=this.quill.getLine(x.index),[I,V]=this.quill.getLeaf(x.index),[ce,Oe]=x.length===0?[I,V]:this.quill.getLeaf(x.index+x.length),$e=I instanceof wl?I.value().slice(0,V):"",Ve=ce instanceof wl?ce.value().slice(Oe):"",rt={collapsed:x.length===0,empty:x.length===0&&T.length()<=1,format:this.quill.getFormat(x),line:T,offset:N,prefix:$e,suffix:Ve,event:c};h.some(et=>{if(et.collapsed!=null&&et.collapsed!==rt.collapsed||et.empty!=null&&et.empty!==rt.empty||et.offset!=null&&et.offset!==rt.offset)return!1;if(Array.isArray(et.format)){if(et.format.every(vt=>rt.format[vt]==null))return!1}else if(typeof et.format=="object"&&!Object.keys(et.format).every(vt=>et.format[vt]===!0?rt.format[vt]!=null:et.format[vt]===!1?rt.format[vt]==null:qc(et.format[vt],rt.format[vt])))return!1;return!(et.prefix!=null&&!et.prefix.test(rt.prefix))&&!(et.suffix!=null&&!et.suffix.test(rt.suffix))&&et.handler.call(this,x,rt,et)!==!0})&&c.preventDefault()})}handleBackspace(c,h){let y=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(h.prefix)?2:1;if(c.index===0||this.quill.getLength()<=1)return;let x={},[T]=this.quill.getLine(c.index),N=new He().retain(c.index-y).delete(y);if(h.offset===0){let[I]=this.quill.getLine(c.index-1);if(I&&!(I.statics.blotName==="block"&&I.length()<=1)){let V=T.formats(),ce=this.quill.getFormat(c.index-1,1);if(x=He.AttributeMap.diff(V,ce)||{},Object.keys(x).length>0){let Oe=new He().retain(c.index+T.length()-2).retain(1,x);N=N.compose(Oe)}}}this.quill.updateContents(N,_e.sources.USER),this.quill.focus()}handleDelete(c,h){let y=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(h.suffix)?2:1;if(c.index>=this.quill.getLength()-y)return;let x={},[T]=this.quill.getLine(c.index),N=new He().retain(c.index).delete(y);if(h.offset>=T.length()-1){let[I]=this.quill.getLine(c.index+1);if(I){let V=T.formats(),ce=this.quill.getFormat(c.index,1);x=He.AttributeMap.diff(V,ce)||{},Object.keys(x).length>0&&(N=N.retain(I.length()-1).retain(1,x))}}this.quill.updateContents(N,_e.sources.USER),this.quill.focus()}handleDeleteRange(c){mv({range:c,quill:this.quill}),this.quill.focus()}handleEnter(c,h){let y=Object.keys(h.format).reduce((T,N)=>(this.quill.scroll.query(N,Ke.BLOCK)&&!Array.isArray(h.format[N])&&(T[N]=h.format[N]),T),{}),x=new He().retain(c.index).delete(c.length).insert(`
`,y);this.quill.updateContents(x,_e.sources.USER),this.quill.setSelection(c.index+1,_e.sources.SILENT),this.quill.focus()}}let S2={bindings:{bold:hv("bold"),italic:hv("italic"),underline:hv("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(f,c){return!(!c.collapsed||c.offset===0)||(this.quill.format("indent","+1",_e.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(f,c){return!(!c.collapsed||c.offset===0)||(this.quill.format("indent","-1",_e.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(f,c){c.format.indent!=null?this.quill.format("indent","-1",_e.sources.USER):c.format.list!=null&&this.quill.format("list",!1,_e.sources.USER)}},"indent code-block":gE(!0),"outdent code-block":gE(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(f){this.quill.deleteText(f.index-1,1,_e.sources.USER)}},tab:{key:"Tab",handler(f,c){if(c.format.table)return!0;this.quill.history.cutoff();let h=new He().retain(f.index).delete(f.length).insert("	");return this.quill.updateContents(h,_e.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(f.index+1,_e.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,_e.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(f,c){let h={list:!1};c.format.indent&&(h.indent=!1),this.quill.formatLine(f.index,f.length,h,_e.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(f){let[c,h]=this.quill.getLine(f.index),y={...c.formats(),list:"checked"},x=new He().retain(f.index).insert(`
`,y).retain(c.length()-h-1).retain(1,{list:"unchecked"});this.quill.updateContents(x,_e.sources.USER),this.quill.setSelection(f.index+1,_e.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(f,c){let[h,y]=this.quill.getLine(f.index),x=new He().retain(f.index).insert(`
`,c.format).retain(h.length()-y-1).retain(1,{header:null});this.quill.updateContents(x,_e.sources.USER),this.quill.setSelection(f.index+1,_e.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(f){let c=this.quill.getModule("table");if(c){let[h,y,x,T]=c.getTable(f),N=function(V,ce,Oe,$e){return ce.prev==null&&ce.next==null?Oe.prev==null&&Oe.next==null?$e===0?-1:1:Oe.prev==null?-1:1:ce.prev==null?-1:ce.next==null?1:null}(0,y,x,T);if(N==null)return;let I=h.offset();if(N<0){let V=new He().retain(I).insert(`
`);this.quill.updateContents(V,_e.sources.USER),this.quill.setSelection(f.index+1,f.length,_e.sources.SILENT)}else if(N>0){I+=h.length();let V=new He().retain(I).insert(`
`);this.quill.updateContents(V,_e.sources.USER),this.quill.setSelection(I,_e.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(f,c){let{event:h,line:y}=c,x=y.offset(this.quill.scroll);h.shiftKey?this.quill.setSelection(x-1,_e.sources.USER):this.quill.setSelection(x+y.length(),_e.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(f,c){if(this.quill.scroll.query("list")==null)return!0;let{length:h}=c.prefix,[y,x]=this.quill.getLine(f.index);if(x>h)return!0;let T;switch(c.prefix.trim()){case"[]":case"[ ]":T="unchecked";break;case"[x]":T="checked";break;case"-":case"*":T="bullet";break;default:T="ordered"}this.quill.insertText(f.index," ",_e.sources.USER),this.quill.history.cutoff();let N=new He().retain(f.index-x).delete(h+1).retain(y.length()-2-x).retain(1,{list:T});return this.quill.updateContents(N,_e.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(f.index-h,_e.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(f){let[c,h]=this.quill.getLine(f.index),y=2,x=c;for(;x!=null&&x.length()<=1&&x.formats()["code-block"];)if(x=x.prev,y-=1,y<=0){let T=new He().retain(f.index+c.length()-h-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(T,_e.sources.USER),this.quill.setSelection(f.index-1,_e.sources.SILENT),!1}return!0}},"embed left":Sm("ArrowLeft",!1),"embed left shift":Sm("ArrowLeft",!0),"embed right":Sm("ArrowRight",!1),"embed right shift":Sm("ArrowRight",!0),"table down":yE(!1),"table up":yE(!0)}};function gE(f){return{key:"Tab",shiftKey:!f,format:{"code-block":!0},handler(c,h){let{event:y}=h,x=this.quill.scroll.query("code-block"),{TAB:T}=x;if(c.length===0&&!y.shiftKey)return this.quill.insertText(c.index,T,_e.sources.USER),void this.quill.setSelection(c.index+T.length,_e.sources.SILENT);let N=c.length===0?this.quill.getLines(c.index,1):this.quill.getLines(c),{index:I,length:V}=c;N.forEach((ce,Oe)=>{f?(ce.insertAt(0,T),Oe===0?I+=T.length:V+=T.length):ce.domNode.textContent.startsWith(T)&&(ce.deleteAt(0,T.length),Oe===0?I-=T.length:V-=T.length)}),this.quill.update(_e.sources.USER),this.quill.setSelection(I,V,_e.sources.SILENT)}}}s(gE,"bi");function Sm(f,c){return{key:f,shiftKey:c,altKey:null,[f==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(y){let{index:x}=y;f==="ArrowRight"&&(x+=y.length+1);let[T]=this.quill.getLeaf(x);return!(T instanceof bi)||(f==="ArrowLeft"?c?this.quill.setSelection(y.index-1,y.length+1,_e.sources.USER):this.quill.setSelection(y.index-1,_e.sources.USER):c?this.quill.setSelection(y.index,y.length+1,_e.sources.USER):this.quill.setSelection(y.index+y.length+1,_e.sources.USER),!1)}}}s(Sm,"yi");function hv(f){return{key:f[0],shortKey:!0,handler(c,h){this.quill.format(f,!h.format[f],_e.sources.USER)}}}s(hv,"vi");function yE(f){return{key:f?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(c,h){let y=f?"prev":"next",x=h.line,T=x.parent[y];if(T!=null){if(T.statics.blotName==="table-row"){let N=T.children.head,I=x;for(;I.prev!=null;)I=I.prev,N=N.next;let V=N.offset(this.quill.scroll)+Math.min(h.offset,N.length()-1);this.quill.setSelection(V,0,_e.sources.USER)}}else{let N=x.table()[y];N!=null&&(f?this.quill.setSelection(N.offset(this.quill.scroll)+N.length()-1,0,_e.sources.USER):this.quill.setSelection(N.offset(this.quill.scroll),0,_e.sources.USER))}return!1}}}s(yE,"xi");function mv(f){let{quill:c,range:h}=f,y=c.getLines(h),x={};if(y.length>1){let T=y[0].formats(),N=y[y.length-1].formats();x=He.AttributeMap.diff(N,T)||{}}c.deleteText(h,_e.sources.USER),Object.keys(x).length>0&&c.formatLine(h.index,1,x,_e.sources.USER),c.setSelection(h.index,_e.sources.SILENT)}s(mv,"Ni"),Em.DEFAULTS=S2;let C2=/font-weight:\s*normal/,A2=["P","OL","UL"],bE=s(f=>f&&A2.includes(f.tagName),"Ai"),T2=/\bmso-list:[^;]*ignore/i,k2=/\bmso-list:[^;]*\bl(\d+)/i,O2=/\bmso-list:[^;]*\blevel(\d+)/i,N2=s(f=>{let c=Array.from(f.querySelectorAll("[style*=mso-list]")),h=[],y=[];c.forEach(N=>{(N.getAttribute("style")||"").match(T2)?h.push(N):y.push(N)}),h.forEach(N=>N.parentNode?.removeChild(N));let x=f.documentElement.innerHTML,T=y.map(N=>((I,V)=>{let ce=I.getAttribute("style"),Oe=ce?.match(k2);if(!Oe)return null;let $e=Number(Oe[1]),Ve=ce?.match(O2),rt=Ve?Number(Ve[1]):1,et=new RegExp(`@list l${$e}:level${rt}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),vt=V.match(et);return{id:$e,indent:rt,type:vt&&vt[1]==="bullet"?"bullet":"ordered",element:I}})(N,x)).filter(N=>N);for(;T.length;){let N=[],I=T.shift();for(;I;)N.push(I),I=T.length&&T[0]?.element===I.element.nextElementSibling&&T[0].id===I.id?T.shift():null;let V=document.createElement("ul");N.forEach($e=>{let Ve=document.createElement("li");Ve.setAttribute("data-list",$e.type),$e.indent>1&&Ve.setAttribute("class","ql-indent-"+($e.indent-1)),Ve.innerHTML=$e.element.innerHTML,V.appendChild(Ve)});let ce=N[0]?.element,{parentNode:Oe}=ce??{};ce&&Oe?.replaceChild(V,ce),N.slice(1).forEach($e=>{let{element:Ve}=$e;Oe?.removeChild(Ve)})}},"Li"),R2=[function(f){f.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&N2(f)},function(f){f.querySelector('[id^="docs-internal-guid-"]')&&((c=>{Array.from(c.querySelectorAll('b[style*="font-weight"]')).filter(h=>h.getAttribute("style")?.match(C2)).forEach(h=>{let y=c.createDocumentFragment();y.append(...h.childNodes),h.parentNode?.replaceChild(y,h)})})(f),(c=>{Array.from(c.querySelectorAll("br")).filter(h=>bE(h.previousElementSibling)&&bE(h.nextElementSibling)).forEach(h=>{h.parentNode?.removeChild(h)})})(f))}],M2=s(f=>{f.documentElement&&R2.forEach(c=>{c(f)})},"Ti"),L2=u("quill:clipboard"),I2=[[Node.TEXT_NODE,function(f,c,h){let y=f.data;if(f.parentElement?.tagName==="O:P")return c.insert(y.trim());if(!_E(f)){if(y.trim().length===0&&y.includes(`
`)&&!function(T,N){return T.previousElementSibling&&T.nextElementSibling&&!Ta(T.previousElementSibling,N)&&!Ta(T.nextElementSibling,N)}(f,h))return c;let x=s((T,N)=>{let I=N.replace(/[^\u00a0]/g,"");return I.length<1&&T?" ":I},"s");y=y.replace(/\r\n/g," ").replace(/\n/g," "),y=y.replace(/\s\s+/g,x.bind(x,!0)),(f.previousSibling==null&&f.parentElement!=null&&Ta(f.parentElement,h)||f.previousSibling instanceof Element&&Ta(f.previousSibling,h))&&(y=y.replace(/^\s+/,x.bind(x,!1))),(f.nextSibling==null&&f.parentElement!=null&&Ta(f.parentElement,h)||f.nextSibling instanceof Element&&Ta(f.nextSibling,h))&&(y=y.replace(/\s+$/,x.bind(x,!1)))}return c.insert(y)}],[Node.TEXT_NODE,xE],["br",function(f,c){return Hd(c,`
`)||c.insert(`
`),c}],[Node.ELEMENT_NODE,xE],[Node.ELEMENT_NODE,function(f,c,h){let y=h.query(f);if(y==null)return c;if(y.prototype instanceof bi){let x={},T=y.value(f);if(T!=null)return x[y.blotName]=T,new He().insert(x,y.formats(f,h))}else if(y.prototype instanceof xl&&!Hd(c,`
`)&&c.insert(`
`),"blotName"in y&&"formats"in y&&typeof y.formats=="function")return Ul(c,y.blotName,y.formats(f,h),h);return c}],[Node.ELEMENT_NODE,function(f,c,h){let y=vr.keys(f),x=Bi.keys(f),T=Hs.keys(f),N={};return y.concat(x).concat(T).forEach(I=>{let V=h.query(I,Ke.ATTRIBUTE);V!=null&&(N[V.attrName]=V.value(f),N[V.attrName])||(V=D2[I],V==null||V.attrName!==I&&V.keyName!==I||(N[V.attrName]=V.value(f)||void 0),V=vE[I],V==null||V.attrName!==I&&V.keyName!==I||(V=vE[I],N[V.attrName]=V.value(f)||void 0))}),Object.entries(N).reduce((I,V)=>{let[ce,Oe]=V;return Ul(I,ce,Oe,h)},c)}],[Node.ELEMENT_NODE,function(f,c,h){let y={},x=f.style||{};return x.fontStyle==="italic"&&(y.italic=!0),x.textDecoration==="underline"&&(y.underline=!0),x.textDecoration==="line-through"&&(y.strike=!0),(x.fontWeight?.startsWith("bold")||parseInt(x.fontWeight,10)>=700)&&(y.bold=!0),c=Object.entries(y).reduce((T,N)=>{let[I,V]=N;return Ul(T,I,V,h)},c),parseFloat(x.textIndent||0)>0?new He().insert("	").concat(c):c}],["li",function(f,c,h){let y=h.query(f);if(y==null||y.blotName!=="list"||!Hd(c,`
`))return c;let x=-1,T=f.parentNode;for(;T!=null;)["OL","UL"].includes(T.tagName)&&(x+=1),T=T.parentNode;return x<=0?c:c.reduce((N,I)=>I.insert?I.attributes&&typeof I.attributes.indent=="number"?N.push(I):N.insert(I.insert,{indent:x,...I.attributes||{}}):N,new He)}],["ol, ul",function(f,c,h){let y=f,x=y.tagName==="OL"?"ordered":"bullet",T=y.getAttribute("data-checked");return T&&(x=T==="true"?"checked":"unchecked"),Ul(c,"list",x,h)}],["pre",function(f,c,h){let y=h.query("code-block"),x=!y||!("formats"in y)||typeof y.formats!="function"||y.formats(f,h);return Ul(c,"code-block",x,h)}],["tr",function(f,c,h){let y=f.parentElement?.tagName==="TABLE"?f.parentElement:f.parentElement?.parentElement;return y!=null?Ul(c,"table",Array.from(y.querySelectorAll("tr")).indexOf(f)+1,h):c}],["b",gv("bold")],["i",gv("italic")],["strike",gv("strike")],["style",function(){return new He}]],D2=[v2,lE].reduce((f,c)=>(f[c.keyName]=c,f),{}),vE=[oE,uv,cv,uE,hE,pE].reduce((f,c)=>(f[c.keyName]=c,f),{});function Ul(f,c,h,y){return y.query(c)?f.reduce((x,T)=>{if(!T.insert)return x;if(T.attributes&&T.attributes[c])return x.push(T);let N=h?{[c]:h}:{};return x.insert(T.insert,{...N,...T.attributes})},new He):f}s(Ul,"Ii");function Hd(f,c){let h="";for(let y=f.ops.length-1;y>=0&&h.length<c.length;--y){let x=f.ops[y];if(typeof x.insert!="string")break;h=x.insert+h}return h.slice(-1*c.length)===c}s(Hd,"Mi");function Ta(f,c){if(!(f instanceof Element))return!1;let h=c.query(f);return!(h&&h.prototype instanceof bi)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(f.tagName.toLowerCase())}s(Ta,"Bi");let Cm=new WeakMap;function _E(f){return f!=null&&(Cm.has(f)||(f.tagName==="PRE"?Cm.set(f,!0):Cm.set(f,_E(f.parentNode))),Cm.get(f))}s(_E,"Di");function pv(f,c,h,y,x){return c.nodeType===c.TEXT_NODE?y.reduce((T,N)=>N(c,T,f),new He):c.nodeType===c.ELEMENT_NODE?Array.from(c.childNodes||[]).reduce((T,N)=>{let I=pv(f,N,h,y,x);return N.nodeType===c.ELEMENT_NODE&&(I=h.reduce((V,ce)=>ce(N,V,f),I),I=(x.get(N)||[]).reduce((V,ce)=>ce(N,V,f),I)),T.concat(I)},new He):new He}s(pv,"Pi");function gv(f){return(c,h,y)=>Ul(h,f,!0,y)}s(gv,"zi");function xE(f,c,h){if(!Hd(c,`
`)){if(Ta(f,h)&&(f.childNodes.length>0||f instanceof HTMLParagraphElement))return c.insert(`
`);if(c.length()>0&&f.nextSibling){let y=f.nextSibling;for(;y!=null;){if(Ta(y,h))return c.insert(`
`);let x=h.query(y);if(x&&x.prototype instanceof Ui)return c.insert(`
`);y=y.firstChild}}}return c}s(xE,"Hi");function wE(f,c){let h=c;for(let y=f.length-1;y>=0;y-=1){let x=f[y];f[y]={delta:h.transform(x.delta,!0),range:x.range&&yv(x.range,h)},h=x.delta.transform(h),f[y].delta.length()===0&&f.splice(y,1)}}s(wE,"Fi");function yv(f,c){if(!f)return f;let h=c.transformPosition(f.index);return{index:h,length:c.transformPosition(f.index+f.length)-h}}s(yv,"$i");class EE extends Tn{static{s(this,"Vi")}constructor(c,h){super(c,h),c.root.addEventListener("drop",y=>{y.preventDefault();let x=null;if(document.caretRangeFromPoint)x=document.caretRangeFromPoint(y.clientX,y.clientY);else if(document.caretPositionFromPoint){let N=document.caretPositionFromPoint(y.clientX,y.clientY);x=document.createRange(),x.setStart(N.offsetNode,N.offset),x.setEnd(N.offsetNode,N.offset)}let T=x&&c.selection.normalizeNative(x);if(T){let N=c.selection.normalizedToRange(T);y.dataTransfer?.files&&this.upload(N,y.dataTransfer.files)}})}upload(c,h){let y=[];Array.from(h).forEach(x=>{x&&this.options.mimetypes?.includes(x.type)&&y.push(x)}),y.length>0&&this.options.handler.call(this,c,y)}}EE.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(f,c){if(!this.quill.scroll.query("image"))return;let h=c.map(y=>new Promise(x=>{let T=new FileReader;T.onload=()=>{x(T.result)},T.readAsDataURL(y)}));Promise.all(h).then(y=>{let x=y.reduce((T,N)=>T.insert({image:N}),new He().retain(f.index).delete(f.length));this.quill.updateContents(x,b.sources.USER),this.quill.setSelection(f.index+y.length,b.sources.SILENT)})}};let P2=EE,B2=["insertText","insertReplacementText"],q2=class extends Tn{static{s(this,"Zi")}constructor(f,c){super(f,c),f.root.addEventListener("beforeinput",h=>{this.handleBeforeInput(h)}),/Android/i.test(navigator.userAgent)||f.on(_e.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(f){mv({range:f,quill:this.quill})}replaceText(f){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(f.length===0)return!1;if(c){let h=this.quill.getFormat(f.index,1);this.deleteRange(f),this.quill.updateContents(new He().retain(f.index).insert(c,h),_e.sources.USER)}else this.deleteRange(f);return this.quill.setSelection(f.index+c.length,0,_e.sources.SILENT),!0}handleBeforeInput(f){if(this.quill.composition.isComposing||f.defaultPrevented||!B2.includes(f.inputType))return;let c=f.getTargetRanges?f.getTargetRanges()[0]:null;if(!c||c.collapsed===!0)return;let h=function(T){return typeof T.data=="string"?T.data:T.dataTransfer?.types.includes("text/plain")?T.dataTransfer.getData("text/plain"):null}(f);if(h==null)return;let y=this.quill.selection.normalizeNative(c),x=y?this.quill.selection.normalizedToRange(y):null;x&&this.replaceText(x,h)&&f.preventDefault()}handleCompositionStart(){let f=this.quill.getSelection();f&&this.replaceText(f)}},F2=/Mac/i.test(navigator.platform),U2=class extends Tn{static{s(this,"Xi")}isListening=!1;selectionChangeDeadline=0;constructor(f,c){super(f,c),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(f,c){let{line:h,event:y}=c;if(!(h instanceof as&&h.uiNode))return!0;let x=getComputedStyle(h.domNode).direction==="rtl";return!!(x&&y.key!=="ArrowRight"||!x&&y.key!=="ArrowLeft")||(this.quill.setSelection(f.index-1,f.length+(y.shiftKey?1:0),_e.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",f=>{!f.defaultPrevented&&(c=>c.key==="ArrowLeft"||c.key==="ArrowRight"||c.key==="ArrowUp"||c.key==="ArrowDown"||c.key==="Home"||!(!F2||c.key!=="a"||c.ctrlKey!==!0))(f)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,!this.isListening&&(this.isListening=!0,document.addEventListener("selectionchange",()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){let f=document.getSelection();if(!f)return;let c=f.getRangeAt(0);if(c.collapsed!==!0||c.startOffset!==0)return;let h=this.quill.scroll.find(c.startContainer);if(!(h instanceof as&&h.uiNode))return;let y=document.createRange();y.setStartAfter(h.uiNode),y.setEndAfter(h.uiNode),f.removeAllRanges(),f.addRange(y)}};_e.register({"blots/block":ar,"blots/block/embed":Ui,"blots/break":_i,"blots/container":ql,"blots/cursor":Dl,"blots/embed":Ud,"blots/inline":Ks,"blots/scroll":b2,"blots/text":cs,"modules/clipboard":class extends Tn{static DEFAULTS={matchers:[]};constructor(f,c){super(f,c),this.quill.root.addEventListener("copy",h=>this.onCaptureCopy(h,!1)),this.quill.root.addEventListener("cut",h=>this.onCaptureCopy(h,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],I2.concat(this.options.matchers??[]).forEach(h=>{let[y,x]=h;this.addMatcher(y,x)})}addMatcher(f,c){this.matchers.push([f,c])}convert(f){let{html:c,text:h}=f,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y[wi.blotName])return new He().insert(h||"",{[wi.blotName]:y[wi.blotName]});if(!c)return new He().insert(h||"",y);let x=this.convertHTML(c);return Hd(x,`
`)&&(x.ops[x.ops.length-1].attributes==null||y.table)?x.compose(new He().retain(x.length()-1).delete(1)):x}normalizeHTML(f){M2(f)}convertHTML(f){let c=new DOMParser().parseFromString(f,"text/html");this.normalizeHTML(c);let h=c.body,y=new WeakMap,[x,T]=this.prepareMatching(h,y);return pv(this.quill.scroll,h,x,T,y)}dangerouslyPasteHTML(f,c){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_e.sources.API;if(typeof f=="string"){let y=this.convert({html:f,text:""});this.quill.setContents(y,c),this.quill.setSelection(0,_e.sources.SILENT)}else{let y=this.convert({html:c,text:""});this.quill.updateContents(new He().retain(f).concat(y),h),this.quill.setSelection(f+y.length(),_e.sources.SILENT)}}onCaptureCopy(f){let c=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(f.defaultPrevented)return;f.preventDefault();let[h]=this.quill.selection.getRange();if(h==null)return;let{html:y,text:x}=this.onCopy(h,c);f.clipboardData?.setData("text/plain",x),f.clipboardData?.setData("text/html",y),c&&mv({range:h,quill:this.quill})}normalizeURIList(f){return f.split(/\r?\n/).filter(c=>c[0]!=="#").join(`
`)}onCapturePaste(f){if(f.defaultPrevented||!this.quill.isEnabled())return;f.preventDefault();let c=this.quill.getSelection(!0);if(c==null)return;let h=f.clipboardData?.getData("text/html"),y=f.clipboardData?.getData("text/plain");if(!h&&!y){let T=f.clipboardData?.getData("text/uri-list");T&&(y=this.normalizeURIList(T))}let x=Array.from(f.clipboardData?.files||[]);if(!h&&x.length>0)this.quill.uploader.upload(c,x);else{if(h&&x.length>0){let T=new DOMParser().parseFromString(h,"text/html");if(T.body.childElementCount===1&&T.body.firstElementChild?.tagName==="IMG")return void this.quill.uploader.upload(c,x)}this.onPaste(c,{html:h,text:y})}}onCopy(f){let c=this.quill.getText(f);return{html:this.quill.getSemanticHTML(f),text:c}}onPaste(f,c){let{text:h,html:y}=c,x=this.quill.getFormat(f.index),T=this.convert({text:h,html:y},x);L2.log("onPaste",T,{text:h,html:y});let N=new He().retain(f.index).delete(f.length).concat(T);this.quill.updateContents(N,_e.sources.USER),this.quill.setSelection(N.length()-f.length,_e.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(f,c){let h=[],y=[];return this.matchers.forEach(x=>{let[T,N]=x;switch(T){case Node.TEXT_NODE:y.push(N);break;case Node.ELEMENT_NODE:h.push(N);break;default:Array.from(f.querySelectorAll(T)).forEach(I=>{c.has(I)?c.get(I)?.push(N):c.set(I,[N])})}}),[h,y]}},"modules/history":class extends Tn{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(f,c){super(f,c),this.quill.on(_e.events.EDITOR_CHANGE,(h,y,x,T)=>{h===_e.events.SELECTION_CHANGE?y&&T!==_e.sources.SILENT&&(this.currentRange=y):h===_e.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&T!==_e.sources.USER?this.transform(y):this.record(y,x)),this.currentRange=yv(this.currentRange,y))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",h=>{h.inputType==="historyUndo"?(this.undo(),h.preventDefault()):h.inputType==="historyRedo"&&(this.redo(),h.preventDefault())})}change(f,c){if(this.stack[f].length===0)return;let h=this.stack[f].pop();if(!h)return;let y=this.quill.getContents(),x=h.delta.invert(y);this.stack[c].push({delta:x,range:yv(h.range,x)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(h.delta,_e.sources.USER),this.ignoreChange=!1,this.restoreSelection(h)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(f,c){if(f.ops.length===0)return;this.stack.redo=[];let h=f.invert(c),y=this.currentRange,x=Date.now();if(this.lastRecorded+this.options.delay>x&&this.stack.undo.length>0){let T=this.stack.undo.pop();T&&(h=h.compose(T.delta),y=T.range)}else this.lastRecorded=x;h.length()!==0&&(this.stack.undo.push({delta:h,range:y}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(f){wE(this.stack.undo,f),wE(this.stack.redo,f)}undo(){this.change("undo","redo")}restoreSelection(f){if(f.range)this.quill.setSelection(f.range,_e.sources.USER);else{let c=function(h,y){let x=y.reduce((N,I)=>N+(I.delete||0),0),T=y.length()-x;return function(N,I){let V=I.ops[I.ops.length-1];return V==null?!1:V.insert!=null?typeof V.insert=="string"&&V.insert.endsWith(`
`):V.attributes!=null?Object.keys(V.attributes).some(ce=>N.query(ce,Ke.BLOCK)!=null):!1}(h,y)&&(T-=1),T}(this.quill.scroll,f.delta);this.quill.setSelection(c,_e.sources.USER)}}},"modules/keyboard":Em,"modules/uploader":P2,"modules/input":q2,"modules/uiNode":U2});let bv=_e,j2=new class extends Bi{add(f,c){let h=0;if(c==="+1"||c==="-1"){let y=this.value(f)||0;h=c==="+1"?y+1:y-1}else typeof c=="number"&&(h=c);return h===0?(this.remove(f),!0):super.add(f,h.toString())}canAdd(f,c){return super.canAdd(f,c)||super.canAdd(f,parseInt(c,10))}value(f){return parseInt(super.value(f),10)||void 0}}("indent","ql-indent",{scope:Ke.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),H2=j2,z2=class extends ar{static{s(this,"to")}static blotName="blockquote";static tagName="blockquote"},$2=class extends ar{static{s(this,"eo")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(f){return this.tagName.indexOf(f.tagName)+1}};class zd extends ql{static{s(this,"no")}}zd.blotName="list-container",zd.tagName="OL";class $d extends ar{static{s(this,"ro")}static create(c){let h=super.create();return h.setAttribute("data-list",c),h}static formats(c){return c.getAttribute("data-list")||void 0}static register(){_e.register(zd)}constructor(c,h){super(c,h);let y=h.ownerDocument.createElement("span"),x=s(T=>{if(!c.isEnabled())return;let N=this.statics.formats(h,c);N==="checked"?(this.format("list","unchecked"),T.preventDefault()):N==="unchecked"&&(this.format("list","checked"),T.preventDefault())},"r");y.addEventListener("mousedown",x),y.addEventListener("touchstart",x),this.attachUI(y)}format(c,h){c===this.statics.blotName&&h?this.domNode.setAttribute("data-list",h):super.format(c,h)}}$d.blotName="list",$d.tagName="LI",zd.allowedChildren=[$d],$d.requiredContainer=zd;let vv=class extends Ks{static{s(this,"so")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(f){super.optimize(f),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},V2=class extends vv{static{s(this,"io")}static blotName="italic";static tagName=["EM","I"]};class Am extends Ks{static{s(this,"oo")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(c){let h=super.create(c);return h.setAttribute("href",this.sanitize(c)),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}static formats(c){return c.getAttribute("href")}static sanitize(c){return SE(c,this.PROTOCOL_WHITELIST)?c:this.SANITIZED_URL}format(c,h){c===this.statics.blotName&&h?this.domNode.setAttribute("href",this.constructor.sanitize(h)):super.format(c,h)}}function SE(f,c){let h=document.createElement("a");h.href=f;let y=h.href.slice(0,h.href.indexOf(":"));return c.indexOf(y)>-1}s(SE,"lo");let K2=class extends Ks{static{s(this,"ao")}static blotName="script";static tagName=["SUB","SUP"];static create(f){return f==="super"?document.createElement("sup"):f==="sub"?document.createElement("sub"):super.create(f)}static formats(f){return f.tagName==="SUB"?"sub":f.tagName==="SUP"?"super":void 0}},W2=class extends vv{static{s(this,"co")}static blotName="strike";static tagName=["S","STRIKE"]},G2=class extends Ks{static{s(this,"uo")}static blotName="underline";static tagName="U"},Z2=class extends Ud{static{s(this,"ho")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(f){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let c=super.create(f);return typeof f=="string"&&(window.katex.render(f,c,{throwOnError:!1,errorColor:"#f00"}),c.setAttribute("data-value",f)),c}static value(f){return f.getAttribute("data-value")}html(){let{formula:f}=this.value();return`<span>${f}</span>`}},CE=["alt","height","width"],Y2=class extends bi{static{s(this,"po")}static blotName="image";static tagName="IMG";static create(f){let c=super.create(f);return typeof f=="string"&&c.setAttribute("src",this.sanitize(f)),c}static formats(f){return CE.reduce((c,h)=>(f.hasAttribute(h)&&(c[h]=f.getAttribute(h)),c),{})}static match(f){return/\.(jpe?g|gif|png)$/.test(f)||/^data:image\/.+;base64/.test(f)}static sanitize(f){return SE(f,["http","https","data"])?f:"//:0"}static value(f){return f.getAttribute("src")}format(f,c){CE.indexOf(f)>-1?c?this.domNode.setAttribute(f,c):this.domNode.removeAttribute(f):super.format(f,c)}},AE=["height","width"],X2=class extends Ui{static{s(this,"mo")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(f){let c=super.create(f);return c.setAttribute("frameborder","0"),c.setAttribute("allowfullscreen","true"),c.setAttribute("src",this.sanitize(f)),c}static formats(f){return AE.reduce((c,h)=>(f.hasAttribute(h)&&(c[h]=f.getAttribute(h)),c),{})}static sanitize(f){return Am.sanitize(f)}static value(f){return f.getAttribute("src")}format(f,c){AE.indexOf(f)>-1?c?this.domNode.setAttribute(f,c):this.domNode.removeAttribute(f):super.format(f,c)}html(){let{video:f}=this.value();return`<a href="${f}">${f}</a>`}},Vd=new Bi("code-token","hljs",{scope:Ke.INLINE});class jo extends Ks{static{s(this,"yo")}static formats(c,h){for(;c!=null&&c!==h.domNode;){if(c.classList&&c.classList.contains(wi.className))return super.formats(c,h);c=c.parentNode}}constructor(c,h,y){super(c,h,y),Vd.add(this.domNode,y)}format(c,h){c!==jo.blotName?super.format(c,h):h?Vd.add(this.domNode,h):(Vd.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Vd.value(this.domNode)||this.unwrap()}}jo.blotName="code-token",jo.className="ql-token";class ks extends wi{static{s(this,"vo")}static create(c){let h=super.create(c);return typeof c=="string"&&h.setAttribute("data-language",c),h}static formats(c){return c.getAttribute("data-language")||"plain"}static register(){}format(c,h){c===this.statics.blotName&&h?this.domNode.setAttribute("data-language",h):super.format(c,h)}replaceWith(c,h){return this.formatAt(0,this.length(),jo.blotName,!1),super.replaceWith(c,h)}}class Kd extends Fl{static{s(this,"xo")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(c,h){c===ks.blotName&&(this.forceNext=!0,this.children.forEach(y=>{y.format(c,h)}))}formatAt(c,h,y,x){y===ks.blotName&&(this.forceNext=!0),super.formatAt(c,h,y,x)}highlight(c){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.children.head==null)return;let y=`${Array.from(this.domNode.childNodes).filter(T=>T!==this.uiNode).map(T=>T.textContent).join(`
`)}
`,x=ks.formats(this.children.head.domNode);if(h||this.forceNext||this.cachedText!==y){if(y.trim().length>0||this.cachedText==null){let T=this.children.reduce((I,V)=>I.concat(qd(V,!1)),new He),N=c(y,x);T.diff(N).reduce((I,V)=>{let{retain:ce,attributes:Oe}=V;return ce?(Oe&&Object.keys(Oe).forEach($e=>{[ks.blotName,jo.blotName].includes($e)&&this.formatAt(I,ce,$e,Oe[$e])}),I+ce):I},0)}this.cachedText=y,this.forceNext=!1}}html(c,h){let[y]=this.children.find(c);return`<pre data-language="${y?ks.formats(y.domNode):"plain"}">
${Fo(this.code(c,h))}
</pre>`}optimize(c){if(super.optimize(c),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let h=ks.formats(this.children.head.domNode);h!==this.uiNode.value&&(this.uiNode.value=h)}}}Kd.allowedChildren=[ks],ks.requiredContainer=Kd,ks.allowedChildren=[jo,Dl,cs,_i];class TE extends Tn{static{s(this,"No")}static register(){_e.register(jo,!0),_e.register(ks,!0),_e.register(Kd,!0)}constructor(c,h){if(super(c,h),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((y,x)=>{let{key:T}=x;return y[T]=!0,y},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(_e.events.SCROLL_BLOT_MOUNT,c=>{if(!(c instanceof Kd))return;let h=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(y=>{let{key:x,label:T}=y,N=h.ownerDocument.createElement("option");N.textContent=T,N.setAttribute("value",x),h.appendChild(N)}),h.addEventListener("change",()=>{c.format(ks.blotName,h.value),this.quill.root.focus(),this.highlight(c,!0)}),c.uiNode==null&&(c.attachUI(h),c.children.head&&(h.value=ks.formats(c.children.head.domNode)))})}initTimer(){let c=null;this.quill.on(_e.events.SCROLL_OPTIMIZE,()=>{c&&clearTimeout(c),c=setTimeout(()=>{this.highlight(),c=null},this.options.interval)})}highlight(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(_e.sources.USER);let y=this.quill.getSelection();(c==null?this.quill.scroll.descendants(Kd):[c]).forEach(x=>{x.highlight(this.highlightBlot,h)}),this.quill.update(_e.sources.SILENT),y!=null&&this.quill.setSelection(y,_e.sources.SILENT)}highlightBlot(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(h=this.languages[h]?h:"plain",h==="plain")return Fo(c).split(`
`).reduce((x,T,N)=>(N!==0&&x.insert(`
`,{[wi.blotName]:h}),x.insert(T)),new He);let y=this.quill.root.ownerDocument.createElement("div");return y.classList.add(wi.className),y.innerHTML=((x,T,N)=>{if(typeof x.versionString=="string"){let I=x.versionString.split(".")[0];if(parseInt(I,10)>=11)return x.highlight(N,{language:T}).value}return x.highlight(T,N).value})(this.options.hljs,h,c),pv(this.quill.scroll,y,[(x,T)=>{let N=Vd.value(x);return N?T.compose(new He().retain(T.length(),{[jo.blotName]:N})):T}],[(x,T)=>x.data.split(`
`).reduce((N,I,V)=>(V!==0&&N.insert(`
`,{[wi.blotName]:h}),N.insert(I)),T)],new WeakMap)}}TE.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Ys extends ar{static{s(this,"wo")}static blotName="table";static tagName="TD";static create(c){let h=super.create();return c?h.setAttribute("data-row",c):h.setAttribute("data-row",_v()),h}static formats(c){if(c.hasAttribute("data-row"))return c.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(c,h){c===Ys.blotName&&h?this.domNode.setAttribute("data-row",h):super.format(c,h)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class jl extends ql{static{s(this,"Eo")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let c=this.children.head.formats(),h=this.children.tail.formats(),y=this.next.children.head.formats(),x=this.next.children.tail.formats();return c.table===h.table&&c.table===y.table&&c.table===x.table}return!1}optimize(c){super.optimize(c),this.children.forEach(h=>{if(h.next==null)return;let y=h.formats(),x=h.next.formats();if(y.table!==x.table){let T=this.splitAfter(h);T&&T.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class ka extends ql{static{s(this,"Ao")}static blotName="table-body";static tagName="TBODY"}class Tm extends ql{static{s(this,"qo")}static blotName="table-container";static tagName="TABLE";balanceCells(){let c=this.descendants(jl),h=c.reduce((y,x)=>Math.max(x.children.length,y),0);c.forEach(y=>{new Array(h-y.children.length).fill(0).forEach(()=>{let x;y.children.head!=null&&(x=Ys.formats(y.children.head.domNode));let T=this.scroll.create(Ys.blotName,x);y.appendChild(T),T.optimize()})})}cells(c){return this.rows().map(h=>h.children.at(c))}deleteColumn(c){let[h]=this.descendant(ka);h!=null&&h.children.head!=null&&h.children.forEach(y=>{let x=y.children.at(c);x?.remove()})}insertColumn(c){let[h]=this.descendant(ka);h!=null&&h.children.head!=null&&h.children.forEach(y=>{let x=y.children.at(c),T=Ys.formats(y.children.head.domNode),N=this.scroll.create(Ys.blotName,T);y.insertBefore(N,x)})}insertRow(c){let[h]=this.descendant(ka);if(h==null||h.children.head==null)return;let y=_v(),x=this.scroll.create(jl.blotName);h.children.head.children.forEach(()=>{let N=this.scroll.create(Ys.blotName,y);x.appendChild(N)});let T=h.children.at(c);h.insertBefore(x,T)}rows(){let c=this.children.head;return c==null?[]:c.children.map(h=>h)}}function _v(){return`row-${Math.random().toString(36).slice(2,6)}`}s(_v,"ko"),Tm.allowedChildren=[ka],ka.requiredContainer=Tm,ka.allowedChildren=[jl],jl.requiredContainer=ka,jl.allowedChildren=[Ys],Ys.requiredContainer=jl;let Q2=class extends Tn{static{s(this,"_o")}static register(){_e.register(Ys),_e.register(jl),_e.register(ka),_e.register(Tm)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Tm).forEach(f=>{f.balanceCells()})}deleteColumn(){let[f,,c]=this.getTable();c!=null&&(f.deleteColumn(c.cellOffset()),this.quill.update(_e.sources.USER))}deleteRow(){let[,f]=this.getTable();f!=null&&(f.remove(),this.quill.update(_e.sources.USER))}deleteTable(){let[f]=this.getTable();if(f==null)return;let c=f.offset();f.remove(),this.quill.update(_e.sources.USER),this.quill.setSelection(c,_e.sources.SILENT)}getTable(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(f==null)return[null,null,null,-1];let[c,h]=this.quill.getLine(f.index);if(c==null||c.statics.blotName!==Ys.blotName)return[null,null,null,-1];let y=c.parent;return[y.parent.parent,y,c,h]}insertColumn(f){let c=this.quill.getSelection();if(!c)return;let[h,y,x]=this.getTable(c);if(x==null)return;let T=x.cellOffset();h.insertColumn(T+f),this.quill.update(_e.sources.USER);let N=y.rowOffset();f===0&&(N+=1),this.quill.setSelection(c.index+N,c.length,_e.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(f){let c=this.quill.getSelection();if(!c)return;let[h,y,x]=this.getTable(c);if(x==null)return;let T=y.rowOffset();h.insertRow(T+f),this.quill.update(_e.sources.USER),f>0?this.quill.setSelection(c,_e.sources.SILENT):this.quill.setSelection(c.index+y.children.length,c.length,_e.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(f,c){let h=this.quill.getSelection();if(h==null)return;let y=new Array(f).fill(0).reduce(x=>{let T=new Array(c).fill(`
`).join("");return x.insert(T,{table:_v()})},new He().retain(h.index));this.quill.updateContents(y,_e.sources.USER),this.quill.setSelection(h.index,_e.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(_e.events.SCROLL_OPTIMIZE,f=>{f.some(c=>!!["TD","TR","TBODY","TABLE"].includes(c.target.tagName)&&(this.quill.once(_e.events.TEXT_CHANGE,(h,y,x)=>{x===_e.sources.USER&&this.balanceTables()}),!0))})}},kE=u("quill:toolbar");class xv extends Tn{static{s(this,"Oo")}constructor(c,h){if(super(c,h),Array.isArray(this.options.container)){let y=document.createElement("div");y.setAttribute("role","toolbar"),function(x,T){Array.isArray(T[0])||(T=[T]),T.forEach(N=>{let I=document.createElement("span");I.classList.add("ql-formats"),N.forEach(V=>{if(typeof V=="string")OE(I,V);else{let ce=Object.keys(V)[0],Oe=V[ce];Array.isArray(Oe)?function($e,Ve,rt){let et=document.createElement("select");et.classList.add(`ql-${Ve}`),rt.forEach(vt=>{let Cn=document.createElement("option");vt!==!1?Cn.setAttribute("value",String(vt)):Cn.setAttribute("selected","selected"),et.appendChild(Cn)}),$e.appendChild(et)}(I,ce,Oe):OE(I,ce,Oe)}}),x.appendChild(I)})}(y,this.options.container),c.container?.parentNode?.insertBefore(y,c.container),this.container=y}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(y=>{let x=this.options.handlers?.[y];x&&this.addHandler(y,x)}),Array.from(this.container.querySelectorAll("button, select")).forEach(y=>{this.attach(y)}),this.quill.on(_e.events.EDITOR_CHANGE,()=>{let[y]=this.quill.selection.getRange();this.update(y)})):kE.error("Container required for toolbar",this.options)}addHandler(c,h){this.handlers[c]=h}attach(c){let h=Array.from(c.classList).find(x=>x.indexOf("ql-")===0);if(!h)return;if(h=h.slice(3),c.tagName==="BUTTON"&&c.setAttribute("type","button"),this.handlers[h]==null&&this.quill.scroll.query(h)==null)return void kE.warn("ignoring attaching to nonexistent format",h,c);let y=c.tagName==="SELECT"?"change":"click";c.addEventListener(y,x=>{let T;if(c.tagName==="SELECT"){if(c.selectedIndex<0)return;let I=c.options[c.selectedIndex];T=!I.hasAttribute("selected")&&(I.value||!1)}else T=!c.classList.contains("ql-active")&&(c.value||!c.hasAttribute("value")),x.preventDefault();this.quill.focus();let[N]=this.quill.selection.getRange();if(this.handlers[h]!=null)this.handlers[h].call(this,T);else if(this.quill.scroll.query(h).prototype instanceof bi){if(T=prompt(`Enter ${h}`),!T)return;this.quill.updateContents(new He().retain(N.index).delete(N.length).insert({[h]:T}),_e.sources.USER)}else this.quill.format(h,T,_e.sources.USER);this.update(N)}),this.controls.push([h,c])}update(c){let h=c==null?{}:this.quill.getFormat(c);this.controls.forEach(y=>{let[x,T]=y;if(T.tagName==="SELECT"){let N=null;if(c==null)N=null;else if(h[x]==null)N=T.querySelector("option[selected]");else if(!Array.isArray(h[x])){let I=h[x];typeof I=="string"&&(I=I.replace(/"/g,'\\"')),N=T.querySelector(`option[value="${I}"]`)}N==null?(T.value="",T.selectedIndex=-1):N.selected=!0}else if(c==null)T.classList.remove("ql-active"),T.setAttribute("aria-pressed","false");else if(T.hasAttribute("value")){let N=h[x],I=N===T.getAttribute("value")||N!=null&&N.toString()===T.getAttribute("value")||N==null&&!T.getAttribute("value");T.classList.toggle("ql-active",I),T.setAttribute("aria-pressed",I.toString())}else{let N=h[x]!=null;T.classList.toggle("ql-active",N),T.setAttribute("aria-pressed",N.toString())}})}}function OE(f,c,h){let y=document.createElement("button");y.setAttribute("type","button"),y.classList.add(`ql-${c}`),y.setAttribute("aria-pressed","false"),h!=null?(y.value=h,y.setAttribute("aria-label",`${c}: ${h}`)):y.setAttribute("aria-label",c),f.appendChild(y)}s(OE,"To"),xv.DEFAULTS={},xv.DEFAULTS={container:null,handlers:{clean(){let f=this.quill.getSelection();if(f!=null)if(f.length===0){let c=this.quill.getFormat();Object.keys(c).forEach(h=>{this.quill.scroll.query(h,Ke.INLINE)!=null&&this.quill.format(h,!1,_e.sources.USER)})}else this.quill.removeFormat(f.index,f.length,_e.sources.USER)},direction(f){let{align:c}=this.quill.getFormat();f==="rtl"&&c==null?this.quill.format("align","right",_e.sources.USER):f||c!=="right"||this.quill.format("align",!1,_e.sources.USER),this.quill.format("direction",f,_e.sources.USER)},indent(f){let c=this.quill.getSelection(),h=this.quill.getFormat(c),y=parseInt(h.indent||0,10);if(f==="+1"||f==="-1"){let x=f==="+1"?1:-1;h.direction==="rtl"&&(x*=-1),this.quill.format("indent",y+x,_e.sources.USER)}},link(f){f===!0&&(f=prompt("Enter link URL:")),this.quill.format("link",f,_e.sources.USER)},list(f){let c=this.quill.getSelection(),h=this.quill.getFormat(c);f==="check"?h.list==="checked"||h.list==="unchecked"?this.quill.format("list",!1,_e.sources.USER):this.quill.format("list","unchecked",_e.sources.USER):this.quill.format("list",f,_e.sources.USER)}}};let NE='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Wd={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:NE,"code-block":NE,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},RE=0;function ME(f,c){f.setAttribute(c,`${f.getAttribute(c)!=="true"}`)}s(ME,"Ro");let km=class{static{s(this,"Io")}constructor(f){this.select=f,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",c=>{switch(c.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),c.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),ME(this.label,"aria-expanded"),ME(this.options,"aria-hidden")}buildItem(f){let c=document.createElement("span");c.tabIndex="0",c.setAttribute("role","button"),c.classList.add("ql-picker-item");let h=f.getAttribute("value");return h&&c.setAttribute("data-value",h),f.textContent&&c.setAttribute("data-label",f.textContent),c.addEventListener("click",()=>{this.selectItem(c,!0)}),c.addEventListener("keydown",y=>{switch(y.key){case"Enter":this.selectItem(c,!0),y.preventDefault();break;case"Escape":this.escape(),y.preventDefault()}}),c}buildLabel(){let f=document.createElement("span");return f.classList.add("ql-picker-label"),f.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',f.tabIndex="0",f.setAttribute("role","button"),f.setAttribute("aria-expanded","false"),this.container.appendChild(f),f}buildOptions(){let f=document.createElement("span");f.classList.add("ql-picker-options"),f.setAttribute("aria-hidden","true"),f.tabIndex="-1",f.id=`ql-picker-options-${RE}`,RE+=1,this.label.setAttribute("aria-controls",f.id),this.options=f,Array.from(this.select.options).forEach(c=>{let h=this.buildItem(c);f.appendChild(h),c.selected===!0&&this.selectItem(h)}),this.container.appendChild(f)}buildPicker(){Array.from(this.select.attributes).forEach(f=>{this.container.setAttribute(f.name,f.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(f){let c=arguments.length>1&&arguments[1]!==void 0&&arguments[1],h=this.container.querySelector(".ql-selected");f!==h&&(h?.classList.remove("ql-selected"),f!=null&&(f.classList.add("ql-selected"),this.select.selectedIndex=Array.from(f.parentNode.children).indexOf(f),f.hasAttribute("data-value")?this.label.setAttribute("data-value",f.getAttribute("data-value")):this.label.removeAttribute("data-value"),f.hasAttribute("data-label")?this.label.setAttribute("data-label",f.getAttribute("data-label")):this.label.removeAttribute("data-label"),c&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let f;if(this.select.selectedIndex>-1){let h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];f=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);let c=f!=null&&f!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",c)}},LE=class extends km{static{s(this,"Mo")}constructor(f,c){super(f),this.label.innerHTML=c,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(h=>{h.classList.add("ql-primary")})}buildItem(f){let c=super.buildItem(f);return c.style.backgroundColor=f.getAttribute("value")||"",c}selectItem(f,c){super.selectItem(f,c);let h=this.label.querySelector(".ql-color-label"),y=f&&f.getAttribute("data-value")||"";h&&(h.tagName==="line"?h.style.stroke=y:h.style.fill=y)}},IE=class extends km{static{s(this,"Bo")}constructor(f,c){super(f),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(h=>{h.innerHTML=c[h.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(f,c){super.selectItem(f,c);let h=f||this.defaultItem;if(h!=null){if(this.label.innerHTML===h.innerHTML)return;this.label.innerHTML=h.innerHTML}}},DE=class{static{s(this,"Uo")}constructor(f,c){this.quill=f,this.boundsContainer=c||document.body,this.root=f.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(h=>{let{overflowY:y}=getComputedStyle(h,null);return y!=="visible"&&y!=="clip"})(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(f){let c=f.left+f.width/2-this.root.offsetWidth/2,h=f.bottom+this.quill.root.scrollTop;this.root.style.left=`${c}px`,this.root.style.top=`${h}px`,this.root.classList.remove("ql-flip");let y=this.boundsContainer.getBoundingClientRect(),x=this.root.getBoundingClientRect(),T=0;if(x.right>y.right&&(T=y.right-x.right,this.root.style.left=`${c+T}px`),x.left<y.left&&(T=y.left-x.left,this.root.style.left=`${c+T}px`),x.bottom>y.bottom){let N=x.bottom-x.top,I=f.bottom-f.top+N;this.root.style.top=h-I+"px",this.root.classList.add("ql-flip")}return T}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},J2=[!1,"center","right","justify"],eB=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],tB=[!1,"serif","monospace"],nB=["1","2","3",!1],rB=["small",!1,"large","huge"];class Gd extends Pl{static{s(this,"$o")}constructor(c,h){super(c,h);let y=s(x=>{document.body.contains(c.root)?(this.tooltip==null||this.tooltip.root.contains(x.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(T=>{T.container.contains(x.target)||T.close()})):document.body.removeEventListener("click",y)},"n");c.emitter.listenDOM("click",document.body,y)}addModule(c){let h=super.addModule(c);return c==="toolbar"&&this.extendToolbar(h),h}buildButtons(c,h){Array.from(c).forEach(y=>{(y.getAttribute("class")||"").split(/\s+/).forEach(x=>{if(x.startsWith("ql-")&&(x=x.slice(3),h[x]!=null))if(x==="direction")y.innerHTML=h[x][""]+h[x].rtl;else if(typeof h[x]=="string")y.innerHTML=h[x];else{let T=y.value||"";T!=null&&h[x][T]&&(y.innerHTML=h[x][T])}})})}buildPickers(c,h){this.pickers=Array.from(c).map(y=>{if(y.classList.contains("ql-align")&&(y.querySelector("option")==null&&Zd(y,J2),typeof h.align=="object"))return new IE(y,h.align);if(y.classList.contains("ql-background")||y.classList.contains("ql-color")){let x=y.classList.contains("ql-background")?"background":"color";return y.querySelector("option")==null&&Zd(y,eB,x==="background"?"#ffffff":"#000000"),new LE(y,h[x])}return y.querySelector("option")==null&&(y.classList.contains("ql-font")?Zd(y,tB):y.classList.contains("ql-header")?Zd(y,nB):y.classList.contains("ql-size")&&Zd(y,rB)),new km(y)}),this.quill.on(b.events.EDITOR_CHANGE,()=>{this.pickers.forEach(y=>{y.update()})})}}Gd.DEFAULTS=jr({},Pl.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let f=this.container.querySelector("input.ql-image[type=file]");f==null&&(f=document.createElement("input"),f.setAttribute("type","file"),f.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),f.classList.add("ql-image"),f.addEventListener("change",()=>{let c=this.quill.getSelection(!0);this.quill.uploader.upload(c,f.files),f.value=""}),this.container.appendChild(f)),f.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class PE extends DE{static{s(this,"Vo")}constructor(c,h){super(c,h),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",c=>{c.key==="Enter"?(this.save(),c.preventDefault()):c.key==="Escape"&&(this.cancel(),c.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;h!=null?this.textbox.value=h:c!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let y=this.quill.getBounds(this.quill.selection.savedRange);y!=null&&this.position(y),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${c}`)||""),this.root.setAttribute("data-mode",c)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:c}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:h}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",c,b.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",c,b.sources.USER)),this.quill.root.scrollTop=h;break}case"video":c=function(h){let y=h.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||h.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return y?`${y[1]||"https"}://www.youtube.com/embed/${y[2]}?showinfo=0`:(y=h.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${y[1]||"https"}://player.vimeo.com/video/${y[2]}/`:h}(c);case"formula":{if(!c)break;let h=this.quill.getSelection(!0);if(h!=null){let y=h.index+h.length;this.quill.insertEmbed(y,this.root.getAttribute("data-mode"),c,b.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(y+1," ",b.sources.USER),this.quill.setSelection(y+2,b.sources.USER)}break}}this.textbox.value="",this.hide()}}function Zd(f,c){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];c.forEach(y=>{let x=document.createElement("option");y===h?x.setAttribute("selected","selected"):x.setAttribute("value",String(y)),f.appendChild(x)})}s(Zd,"Ko");let iB=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class sB extends PE{static{s(this,"Zo")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(c,h){super(c,h),this.quill.on(b.events.EDITOR_CHANGE,(y,x,T,N)=>{if(y===b.events.SELECTION_CHANGE)if(x!=null&&x.length>0&&N===b.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let I=this.quill.getLines(x.index,x.length);if(I.length===1){let V=this.quill.getBounds(x);V!=null&&this.position(V)}else{let V=I[I.length-1],ce=this.quill.getIndex(V),Oe=Math.min(V.length()-1,x.index+x.length-ce),$e=this.quill.getBounds(new R(ce,Oe));$e!=null&&this.position($e)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(b.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let c=this.quill.getSelection();if(c!=null){let h=this.quill.getBounds(c);h!=null&&this.position(h)}},1)})}cancel(){this.show()}position(c){let h=super.position(c),y=this.root.querySelector(".ql-tooltip-arrow");return y.style.marginLeft="",h!==0&&(y.style.marginLeft=-1*h-y.offsetWidth/2+"px"),h}}class BE extends Gd{static{s(this,"Go")}constructor(c,h){h.modules.toolbar!=null&&h.modules.toolbar.container==null&&(h.modules.toolbar.container=iB),super(c,h),this.quill.container.classList.add("ql-bubble")}extendToolbar(c){this.tooltip=new sB(this.quill,this.options.bounds),c.container!=null&&(this.tooltip.root.appendChild(c.container),this.buildButtons(c.container.querySelectorAll("button"),Wd),this.buildPickers(c.container.querySelectorAll("select"),Wd))}}BE.DEFAULTS=jr({},Gd.DEFAULTS,{modules:{toolbar:{handlers:{link(f){f?this.quill.theme.tooltip.edit():this.quill.format("link",!1,_e.sources.USER)}}}}});let oB=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class aB extends PE{static{s(this,"Qo")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",c=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),c.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",c=>{if(this.linkRange!=null){let h=this.linkRange;this.restoreFocus(),this.quill.formatText(h,"link",!1,b.sources.USER),delete this.linkRange}c.preventDefault(),this.hide()}),this.quill.on(b.events.SELECTION_CHANGE,(c,h,y)=>{if(c!=null){if(c.length===0&&y===b.sources.USER){let[x,T]=this.quill.scroll.descendant(Am,c.index);if(x!=null){this.linkRange=new R(c.index-T,x.length());let N=Am.formats(x.domNode);this.preview.textContent=N,this.preview.setAttribute("href",N),this.show();let I=this.quill.getBounds(this.linkRange);return void(I!=null&&this.position(I))}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class qE extends Gd{static{s(this,"Yo")}constructor(c,h){h.modules.toolbar!=null&&h.modules.toolbar.container==null&&(h.modules.toolbar.container=oB),super(c,h),this.quill.container.classList.add("ql-snow")}extendToolbar(c){c.container!=null&&(c.container.classList.add("ql-snow"),this.buildButtons(c.container.querySelectorAll("button"),Wd),this.buildPickers(c.container.querySelectorAll("select"),Wd),this.tooltip=new aB(this.quill,this.options.bounds),c.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(h,y)=>{c.handlers.link.call(c,!y.format.link)}))}}qE.DEFAULTS=jr({},Gd.DEFAULTS,{modules:{toolbar:{handlers:{link(f){if(f){let c=this.quill.getSelection();if(c==null||c.length===0)return;let h=this.quill.getText(c);/^\S+@\S+\.\S+$/.test(h)&&h.indexOf("mailto:")!==0&&(h=`mailto:${h}`);let{tooltip:y}=this.quill.theme;y.edit("link",h)}else this.quill.format("link",!1,_e.sources.USER)}}}}});let lB=qE;bv.register({"attributors/attribute/direction":lE,"attributors/class/align":sE,"attributors/class/background":x2,"attributors/class/color":_2,"attributors/class/direction":cE,"attributors/class/font":fE,"attributors/class/size":mE,"attributors/style/align":oE,"attributors/style/background":uv,"attributors/style/color":cv,"attributors/style/direction":uE,"attributors/style/font":hE,"attributors/style/size":pE},!0),bv.register({"formats/align":sE,"formats/direction":cE,"formats/indent":H2,"formats/background":uv,"formats/color":cv,"formats/font":fE,"formats/size":mE,"formats/blockquote":z2,"formats/code-block":wi,"formats/header":$2,"formats/list":$d,"formats/bold":vv,"formats/code":dv,"formats/italic":V2,"formats/link":Am,"formats/script":K2,"formats/strike":W2,"formats/underline":G2,"formats/formula":Z2,"formats/image":Y2,"formats/video":X2,"modules/syntax":TE,"modules/table":Q2,"modules/toolbar":xv,"themes/bubble":BE,"themes/snow":lB,"ui/icons":Wd,"ui/picker":km,"ui/icon-picker":IE,"ui/color-picker":LE,"ui/tooltip":DE},!0);let cB=bv}},e={};function t(r){var i=e[r];if(i!==void 0)return i.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return n[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}return s(t,"n"),t.d=(r,i)=>{for(var a in i)t.o(i,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:i[a]})},t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t.o=(r,i)=>Object.prototype.hasOwnProperty.call(r,i),t.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.nmd=r=>(r.paths=[],r.children||(r.children=[]),r),t(190)})())});var by=Dn(ha=>{"use strict";var GR=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Lz=GR+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ZR="["+GR+"]["+Lz+"]*",Iz=new RegExp("^"+ZR+"$"),Dz=s(function(n,e){let t=[],r=e.exec(n);for(;r;){let i=[];i.startIndex=e.lastIndex-r[0].length;let a=r.length;for(let l=0;l<a;l++)i.push(r[l]);t.push(i),r=e.exec(n)}return t},"getAllMatches"),Pz=s(function(n){let e=Iz.exec(n);return!(e===null||typeof e>"u")},"isName");ha.isExist=function(n){return typeof n<"u"};ha.isEmptyObject=function(n){return Object.keys(n).length===0};ha.merge=function(n,e,t){if(e){let r=Object.keys(e),i=r.length;for(let a=0;a<i;a++)t==="strict"?n[r[a]]=[e[r[a]]]:n[r[a]]=e[r[a]]}};ha.getValue=function(n){return ha.isExist(n)?n:""};ha.isName=Pz;ha.getAllMatches=Dz;ha.nameRegexp=ZR});var bw=Dn(eM=>{"use strict";var yw=by(),Bz={allowBooleanAttributes:!1,unpairedTags:[]};eM.validate=function(n,e){e=Object.assign({},Bz,e);let t=[],r=!1,i=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let a=0;a<n.length;a++)if(n[a]==="<"&&n[a+1]==="?"){if(a+=2,a=XR(n,a),a.err)return a}else if(n[a]==="<"){let l=a;if(a++,n[a]==="!"){a=QR(n,a);continue}else{let d=!1;n[a]==="/"&&(d=!0,a++);let m="";for(;a<n.length&&n[a]!==">"&&n[a]!==" "&&n[a]!=="	"&&n[a]!==`
`&&n[a]!=="\r";a++)m+=n[a];if(m=m.trim(),m[m.length-1]==="/"&&(m=m.substring(0,m.length-1),a--),!Vz(m)){let _;return m.trim().length===0?_="Invalid space after '<'.":_="Tag '"+m+"' is an invalid name.",nr("InvalidTag",_,Oi(n,a))}let g=Uz(n,a);if(g===!1)return nr("InvalidAttr","Attributes for '"+m+"' have open quote.",Oi(n,a));let v=g.value;if(a=g.index,v[v.length-1]==="/"){let _=a-v.length;v=v.substring(0,v.length-1);let E=JR(v,e);if(E===!0)r=!0;else return nr(E.err.code,E.err.msg,Oi(n,_+E.err.line))}else if(d)if(g.tagClosed){if(v.trim().length>0)return nr("InvalidTag","Closing tag '"+m+"' can't have attributes or invalid starting.",Oi(n,l));if(t.length===0)return nr("InvalidTag","Closing tag '"+m+"' has not been opened.",Oi(n,l));{let _=t.pop();if(m!==_.tagName){let E=Oi(n,_.tagStartPos);return nr("InvalidTag","Expected closing tag '"+_.tagName+"' (opened in line "+E.line+", col "+E.col+") instead of closing tag '"+m+"'.",Oi(n,l))}t.length==0&&(i=!0)}}else return nr("InvalidTag","Closing tag '"+m+"' doesn't have proper closing.",Oi(n,a));else{let _=JR(v,e);if(_!==!0)return nr(_.err.code,_.err.msg,Oi(n,a-v.length+_.err.line));if(i===!0)return nr("InvalidXml","Multiple possible root nodes found.",Oi(n,a));e.unpairedTags.indexOf(m)!==-1||t.push({tagName:m,tagStartPos:l}),r=!0}for(a++;a<n.length;a++)if(n[a]==="<")if(n[a+1]==="!"){a++,a=QR(n,a);continue}else if(n[a+1]==="?"){if(a=XR(n,++a),a.err)return a}else break;else if(n[a]==="&"){let _=zz(n,a);if(_==-1)return nr("InvalidChar","char '&' is not expected.",Oi(n,a));a=_}else if(i===!0&&!YR(n[a]))return nr("InvalidXml","Extra text at the end",Oi(n,a));n[a]==="<"&&a--}}else{if(YR(n[a]))continue;return nr("InvalidChar","char '"+n[a]+"' is not expected.",Oi(n,a))}if(r){if(t.length==1)return nr("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Oi(n,t[0].tagStartPos));if(t.length>0)return nr("InvalidXml","Invalid '"+JSON.stringify(t.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return nr("InvalidXml","Start tag expected.",1);return!0};function YR(n){return n===" "||n==="	"||n===`
`||n==="\r"}s(YR,"isWhiteSpace");function XR(n,e){let t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){let r=n.substr(t,e-t);if(e>5&&r==="xml")return nr("InvalidXml","XML declaration allowed only at the start of the document.",Oi(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}s(XR,"readPI");function QR(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}s(QR,"readCommentAndCDATA");var qz='"',Fz="'";function Uz(n,e){let t="",r="",i=!1;for(;e<n.length;e++){if(n[e]===qz||n[e]===Fz)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){i=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:i}}s(Uz,"readAttributeStr");var jz=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function JR(n,e){let t=yw.getAllMatches(n,jz),r={};for(let i=0;i<t.length;i++){if(t[i][1].length===0)return nr("InvalidAttr","Attribute '"+t[i][2]+"' has no space in starting.",Rh(t[i]));if(t[i][3]!==void 0&&t[i][4]===void 0)return nr("InvalidAttr","Attribute '"+t[i][2]+"' is without value.",Rh(t[i]));if(t[i][3]===void 0&&!e.allowBooleanAttributes)return nr("InvalidAttr","boolean attribute '"+t[i][2]+"' is not allowed.",Rh(t[i]));let a=t[i][2];if(!$z(a))return nr("InvalidAttr","Attribute '"+a+"' is an invalid name.",Rh(t[i]));if(!r.hasOwnProperty(a))r[a]=1;else return nr("InvalidAttr","Attribute '"+a+"' is repeated.",Rh(t[i]))}return!0}s(JR,"validateAttributeString");function Hz(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}s(Hz,"validateNumberAmpersand");function zz(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,Hz(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}s(zz,"validateAmpersand");function nr(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}s(nr,"getErrorObject");function $z(n){return yw.isName(n)}s($z,"validateAttrName");function Vz(n){return yw.isName(n)}s(Vz,"validateTagName");function Oi(n,e){let t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}s(Oi,"getLineNumberForPosition");function Rh(n){return n.startIndex+n[1].length}s(Rh,"getPositionFromMatch")});var nM=Dn(vw=>{var tM={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n}},Kz=s(function(n){return Object.assign({},tM,n)},"buildOptions");vw.buildOptions=Kz;vw.defaultOptions=tM});var iM=Dn((x1e,rM)=>{"use strict";var _w=class{static{s(this,"XmlNode")}constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};rM.exports=_w});var oM=Dn((E1e,sM)=>{var Wz=by();function Gz(n,e){let t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,i=!1,a=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!a){if(i&&Xz(n,e))e+=7,[entityName,val,e]=Zz(n,e+1),val.indexOf("&")===-1&&(t[t$(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&Qz(n,e))e+=8;else if(i&&Jz(n,e))e+=8;else if(i&&e$(n,e))e+=9;else if(Yz)a=!0;else throw new Error("Invalid DOCTYPE");r++,l=""}else if(n[e]===">"){if(a?n[e-1]==="-"&&n[e-2]==="-"&&(a=!1,r--):r--,r===0)break}else n[e]==="["?i=!0:l+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}s(Gz,"readDocType");function Zz(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");let r=n[e++],i="";for(;e<n.length&&n[e]!==r;e++)i+=n[e];return[t,i,e]}s(Zz,"readEntityExp");function Yz(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}s(Yz,"isComment");function Xz(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}s(Xz,"isEntity");function Qz(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}s(Qz,"isElement");function Jz(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}s(Jz,"isAttlist");function e$(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}s(e$,"isNotation");function t$(n){if(Wz.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}s(t$,"validateEntityName");sM.exports=Gz});var lM=Dn((C1e,aM)=>{var n$=/^[-+]?0x[a-fA-F0-9]+$/,r$=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,i$={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function s$(n,e={}){if(e=Object.assign({},i$,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(n==="0")return 0;if(e.hex&&n$.test(t))return a$(t,16);if(t.search(/[eE]/)!==-1){let r=t.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(r){if(e.leadingZeros)t=(r[1]||"")+r[3];else if(!(r[2]==="0"&&r[3][0]==="."))return n;return e.eNotation?Number(t):n}else return n}else{let r=r$.exec(t);if(r){let i=r[1],a=r[2],l=o$(r[3]);if(!e.leadingZeros&&a.length>0&&i&&t[2]!==".")return n;if(!e.leadingZeros&&a.length>0&&!i&&t[1]!==".")return n;if(e.leadingZeros&&a===n)return 0;{let d=Number(t),m=""+d;return m.search(/[eE]/)!==-1?e.eNotation?d:n:t.indexOf(".")!==-1?m==="0"&&l===""||m===l||i&&m==="-"+l?d:n:a?l===m||i+l===m?d:n:t===m||t===i+m?d:n}}else return n}}s(s$,"toNumber");function o$(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}s(o$,"trimZeros");function a$(n,e){if(parseInt)return parseInt(n,e);if(Number.parseInt)return Number.parseInt(n,e);if(window&&window.parseInt)return window.parseInt(n,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}s(a$,"parse_int");aM.exports=s$});var dM=Dn((T1e,uM)=>{"use strict";var cM=by(),Mh=iM(),l$=oM(),c$=lM(),xw=class{static{s(this,"OrderedObjParser")}constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=u$,this.parseXml=p$,this.parseTextData=d$,this.resolveNameSpace=f$,this.buildAttributesMap=m$,this.isItStopNode=v$,this.replaceEntitiesValue=y$,this.readStopNodeData=x$,this.saveTextToParentTag=b$,this.addChild=g$}};function u$(n){let e=Object.keys(n);for(let t=0;t<e.length;t++){let r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}s(u$,"addExternalEntities");function d$(n,e,t,r,i,a,l){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));let d=this.options.tagValueProcessor(e,n,t,i,a);return d==null?n:typeof d!=typeof n||d!==n?d:this.options.trimValues?Ew(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?Ew(n,this.options.parseTagValue,this.options.numberParseOptions):n}}s(d$,"parseTextData");function f$(n){if(this.options.removeNSPrefix){let e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}s(f$,"resolveNameSpace");var h$=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function m$(n,e,t){if(!this.options.ignoreAttributes&&typeof n=="string"){let r=cM.getAllMatches(n,h$),i=r.length,a={};for(let l=0;l<i;l++){let d=this.resolveNameSpace(r[l][1]),m=r[l][4],g=this.options.attributeNamePrefix+d;if(d.length)if(this.options.transformAttributeName&&(g=this.options.transformAttributeName(g)),g==="__proto__"&&(g="#__proto__"),m!==void 0){this.options.trimValues&&(m=m.trim()),m=this.replaceEntitiesValue(m);let v=this.options.attributeValueProcessor(d,m,e);v==null?a[g]=m:typeof v!=typeof m||v!==m?a[g]=v:a[g]=Ew(m,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[g]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let l={};return l[this.options.attributesGroupName]=a,l}return a}}s(m$,"buildAttributesMap");var p$=s(function(n){n=n.replace(/\r\n?/g,`
`);let e=new Mh("!xml"),t=e,r="",i="";for(let a=0;a<n.length;a++)if(n[a]==="<")if(n[a+1]==="/"){let d=wc(n,">",a,"Closing Tag is not closed."),m=n.substring(a+2,d).trim();if(this.options.removeNSPrefix){let _=m.indexOf(":");_!==-1&&(m=m.substr(_+1))}this.options.transformTagName&&(m=this.options.transformTagName(m)),t&&(r=this.saveTextToParentTag(r,t,i));let g=i.substring(i.lastIndexOf(".")+1);if(m&&this.options.unpairedTags.indexOf(m)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${m}>`);let v=0;g&&this.options.unpairedTags.indexOf(g)!==-1?(v=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):v=i.lastIndexOf("."),i=i.substring(0,v),t=this.tagsNodeStack.pop(),r="",a=d}else if(n[a+1]==="?"){let d=ww(n,a,!1,"?>");if(!d)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,i),!(this.options.ignoreDeclaration&&d.tagName==="?xml"||this.options.ignorePiTags)){let m=new Mh(d.tagName);m.add(this.options.textNodeName,""),d.tagName!==d.tagExp&&d.attrExpPresent&&(m[":@"]=this.buildAttributesMap(d.tagExp,i,d.tagName)),this.addChild(t,m,i)}a=d.closeIndex+1}else if(n.substr(a+1,3)==="!--"){let d=wc(n,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let m=n.substring(a+4,d-2);r=this.saveTextToParentTag(r,t,i),t.add(this.options.commentPropName,[{[this.options.textNodeName]:m}])}a=d}else if(n.substr(a+1,2)==="!D"){let d=l$(n,a);this.docTypeEntities=d.entities,a=d.i}else if(n.substr(a+1,2)==="!["){let d=wc(n,"]]>",a,"CDATA is not closed.")-2,m=n.substring(a+9,d);r=this.saveTextToParentTag(r,t,i);let g=this.parseTextData(m,t.tagname,i,!0,!1,!0,!0);g==null&&(g=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:m}]):t.add(this.options.textNodeName,g),a=d+2}else{let d=ww(n,a,this.options.removeNSPrefix),m=d.tagName,g=d.rawTagName,v=d.tagExp,_=d.attrExpPresent,E=d.closeIndex;this.options.transformTagName&&(m=this.options.transformTagName(m)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,i,!1));let C=t;if(C&&this.options.unpairedTags.indexOf(C.tagname)!==-1&&(t=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),m!==e.tagname&&(i+=i?"."+m:m),this.isItStopNode(this.options.stopNodes,i,m)){let k="";if(v.length>0&&v.lastIndexOf("/")===v.length-1)m[m.length-1]==="/"?(m=m.substr(0,m.length-1),i=i.substr(0,i.length-1),v=m):v=v.substr(0,v.length-1),a=d.closeIndex;else if(this.options.unpairedTags.indexOf(m)!==-1)a=d.closeIndex;else{let O=this.readStopNodeData(n,g,E+1);if(!O)throw new Error(`Unexpected end of ${g}`);a=O.i,k=O.tagContent}let D=new Mh(m);m!==v&&_&&(D[":@"]=this.buildAttributesMap(v,i,m)),k&&(k=this.parseTextData(k,m,i,!0,_,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),D.add(this.options.textNodeName,k),this.addChild(t,D,i)}else{if(v.length>0&&v.lastIndexOf("/")===v.length-1){m[m.length-1]==="/"?(m=m.substr(0,m.length-1),i=i.substr(0,i.length-1),v=m):v=v.substr(0,v.length-1),this.options.transformTagName&&(m=this.options.transformTagName(m));let k=new Mh(m);m!==v&&_&&(k[":@"]=this.buildAttributesMap(v,i,m)),this.addChild(t,k,i),i=i.substr(0,i.lastIndexOf("."))}else{let k=new Mh(m);this.tagsNodeStack.push(t),m!==v&&_&&(k[":@"]=this.buildAttributesMap(v,i,m)),this.addChild(t,k,i),t=k}r="",a=E}}else r+=n[a];return e.child},"parseXml");function g$(n,e,t){let r=this.options.updateTag(e.tagname,t,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),n.addChild(e))}s(g$,"addChild");var y$=s(function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){let t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){let t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n},"replaceEntitiesValue");function b$(n,e,t,r){return n&&(r===void 0&&(r=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}s(b$,"saveTextToParentTag");function v$(n,e,t){let r="*."+t;for(let i in n){let a=n[i];if(r===a||e===a)return!0}return!1}s(v$,"isItStopNode");function _$(n,e,t=">"){let r,i="";for(let a=e;a<n.length;a++){let l=n[a];if(r)l===r&&(r="");else if(l==='"'||l==="'")r=l;else if(l===t[0])if(t[1]){if(n[a+1]===t[1])return{data:i,index:a}}else return{data:i,index:a};else l==="	"&&(l=" ");i+=l}}s(_$,"tagExpWithClosingIndex");function wc(n,e,t,r){let i=n.indexOf(e,t);if(i===-1)throw new Error(r);return i+e.length-1}s(wc,"findClosingIndex");function ww(n,e,t,r=">"){let i=_$(n,e+1,r);if(!i)return;let a=i.data,l=i.index,d=a.search(/\s/),m=a,g=!0;d!==-1&&(m=a.substring(0,d),a=a.substring(d+1).trimStart());let v=m;if(t){let _=m.indexOf(":");_!==-1&&(m=m.substr(_+1),g=m!==i.data.substr(_+1))}return{tagName:m,tagExp:a,closeIndex:l,attrExpPresent:g,rawTagName:v}}s(ww,"readTagExp");function x$(n,e,t){let r=t,i=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){let a=wc(n,">",t,`${e} is not closed`);if(n.substring(t+2,a).trim()===e&&(i--,i===0))return{tagContent:n.substring(r,t),i:a};t=a}else if(n[t+1]==="?")t=wc(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=wc(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=wc(n,"]]>",t,"StopNode is not closed.")-2;else{let a=ww(n,t,">");a&&((a&&a.tagName)===e&&a.tagExp[a.tagExp.length-1]!=="/"&&i++,t=a.closeIndex)}}s(x$,"readStopNodeData");function Ew(n,e,t){if(e&&typeof n=="string"){let r=n.trim();return r==="true"?!0:r==="false"?!1:c$(n,t)}else return cM.isExist(n)?n:""}s(Ew,"parseValue");uM.exports=xw});var mM=Dn(hM=>{"use strict";function w$(n,e){return fM(n,e)}s(w$,"prettify");function fM(n,e,t){let r,i={};for(let a=0;a<n.length;a++){let l=n[a],d=E$(l),m="";if(t===void 0?m=d:m=t+"."+d,d===e.textNodeName)r===void 0?r=l[d]:r+=""+l[d];else{if(d===void 0)continue;if(l[d]){let g=fM(l[d],e,m),v=C$(g,e);l[":@"]?S$(g,l[":@"],m,e):Object.keys(g).length===1&&g[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?g=g[e.textNodeName]:Object.keys(g).length===0&&(e.alwaysCreateTextNode?g[e.textNodeName]="":g=""),i[d]!==void 0&&i.hasOwnProperty(d)?(Array.isArray(i[d])||(i[d]=[i[d]]),i[d].push(g)):e.isArray(d,m,v)?i[d]=[g]:i[d]=g}}}return typeof r=="string"?r.length>0&&(i[e.textNodeName]=r):r!==void 0&&(i[e.textNodeName]=r),i}s(fM,"compress");function E$(n){let e=Object.keys(n);for(let t=0;t<e.length;t++){let r=e[t];if(r!==":@")return r}}s(E$,"propName");function S$(n,e,t,r){if(e){let i=Object.keys(e),a=i.length;for(let l=0;l<a;l++){let d=i[l];r.isArray(d,t+"."+d,!0,!0)?n[d]=[e[d]]:n[d]=e[d]}}}s(S$,"assignAttributes");function C$(n,e){let{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}s(C$,"isLeafTag");hM.prettify=w$});var gM=Dn((R1e,pM)=>{var{buildOptions:A$}=nM(),T$=dM(),{prettify:k$}=mM(),O$=bw(),Sw=class{static{s(this,"XMLParser")}constructor(e){this.externalEntities={},this.options=A$(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});let a=O$.validate(e,t);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}let r=new T$(this.options);r.addExternalEntities(this.externalEntities);let i=r.parseXml(e);return this.options.preserveOrder||i===void 0?i:k$(i,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};pM.exports=Sw});var xM=Dn((L1e,_M)=>{var N$=`
`;function R$(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=N$),bM(n,e,"",t)}s(R$,"toXml");function bM(n,e,t,r){let i="",a=!1;for(let l=0;l<n.length;l++){let d=n[l],m=M$(d);if(m===void 0)continue;let g="";if(t.length===0?g=m:g=`${t}.${m}`,m===e.textNodeName){let k=d[m];L$(g,e)||(k=e.tagValueProcessor(m,k),k=vM(k,e)),a&&(i+=r),i+=k,a=!1;continue}else if(m===e.cdataPropName){a&&(i+=r),i+=`<![CDATA[${d[m][0][e.textNodeName]}]]>`,a=!1;continue}else if(m===e.commentPropName){i+=r+`<!--${d[m][0][e.textNodeName]}-->`,a=!0;continue}else if(m[0]==="?"){let k=yM(d[":@"],e),D=m==="?xml"?"":r,O=d[m][0][e.textNodeName];O=O.length!==0?" "+O:"",i+=D+`<${m}${O}${k}?>`,a=!0;continue}let v=r;v!==""&&(v+=e.indentBy);let _=yM(d[":@"],e),E=r+`<${m}${_}`,C=bM(d[m],e,g,v);e.unpairedTags.indexOf(m)!==-1?e.suppressUnpairedNode?i+=E+">":i+=E+"/>":(!C||C.length===0)&&e.suppressEmptyNode?i+=E+"/>":C&&C.endsWith(">")?i+=E+`>${C}${r}</${m}>`:(i+=E+">",C&&r!==""&&(C.includes("/>")||C.includes("</"))?i+=r+e.indentBy+C+r:i+=C,i+=`</${m}>`),a=!0}return i}s(bM,"arrToStr");function M$(n){let e=Object.keys(n);for(let t=0;t<e.length;t++){let r=e[t];if(n.hasOwnProperty(r)&&r!==":@")return r}}s(M$,"propName");function yM(n,e){let t="";if(n&&!e.ignoreAttributes)for(let r in n){if(!n.hasOwnProperty(r))continue;let i=e.attributeValueProcessor(r,n[r]);i=vM(i,e),i===!0&&e.suppressBooleanAttributes?t+=` ${r.substr(e.attributeNamePrefix.length)}`:t+=` ${r.substr(e.attributeNamePrefix.length)}="${i}"`}return t}s(yM,"attr_to_str");function L$(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===n||e.stopNodes[r]==="*."+t)return!0;return!1}s(L$,"isStopNode");function vM(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){let r=e.entities[t];n=n.replace(r.regex,r.val)}return n}s(vM,"replaceEntitiesValue");_M.exports=R$});var EM=Dn((D1e,wM)=>{"use strict";var I$=xM(),D$={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function dl(n){this.options=Object.assign({},D$,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=q$),this.processTextOrObjNode=P$,this.options.format?(this.indentate=B$,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}s(dl,"Builder");dl.prototype.build=function(n){return this.options.preserveOrder?I$(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};dl.prototype.j2x=function(n,e){let t="",r="";for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i))if(typeof n[i]>"u")this.isAttribute(i)&&(r+="");else if(n[i]===null)this.isAttribute(i)?r+="":i[0]==="?"?r+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(n[i]instanceof Date)r+=this.buildTextValNode(n[i],i,"",e);else if(typeof n[i]!="object"){let a=this.isAttribute(i);if(a)t+=this.buildAttrPairStr(a,""+n[i]);else if(i===this.options.textNodeName){let l=this.options.tagValueProcessor(i,""+n[i]);r+=this.replaceEntitiesValue(l)}else r+=this.buildTextValNode(n[i],i,"",e)}else if(Array.isArray(n[i])){let a=n[i].length,l="",d="";for(let m=0;m<a;m++){let g=n[i][m];if(!(typeof g>"u"))if(g===null)i[0]==="?"?r+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(typeof g=="object")if(this.options.oneListGroup){let v=this.j2x(g,e+1);l+=v.val,this.options.attributesGroupName&&g.hasOwnProperty(this.options.attributesGroupName)&&(d+=v.attrStr)}else l+=this.processTextOrObjNode(g,i,e);else if(this.options.oneListGroup){let v=this.options.tagValueProcessor(i,g);v=this.replaceEntitiesValue(v),l+=v}else l+=this.buildTextValNode(g,i,"",e)}this.options.oneListGroup&&(l=this.buildObjectNode(l,i,d,e)),r+=l}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let a=Object.keys(n[i]),l=a.length;for(let d=0;d<l;d++)t+=this.buildAttrPairStr(a[d],""+n[i][a[d]])}else r+=this.processTextOrObjNode(n[i],i,e);return{attrStr:t,val:r}};dl.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function P$(n,e,t){let r=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,r.attrStr,t):this.buildObjectNode(r.val,e,r.attrStr,t)}s(P$,"processTextOrObjNode");dl.prototype.buildObjectNode=function(n,e,t,r){if(n==="")return e[0]==="?"?this.indentate(r)+"<"+e+t+"?"+this.tagEndChar:this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let i="</"+e+this.tagEndChar,a="";return e[0]==="?"&&(a="?",i=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(r)+"<"+e+t+a+">"+n+i:this.options.commentPropName!==!1&&e===this.options.commentPropName&&a.length===0?this.indentate(r)+`<!--${n}-->`+this.newLine:this.indentate(r)+"<"+e+t+a+this.tagEndChar+n+this.indentate(r)+i}};dl.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};dl.prototype.buildTextValNode=function(n,e,t,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+t+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(e,n);return i=this.replaceEntitiesValue(i),i===""?this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+t+">"+i+"</"+e+this.tagEndChar}};dl.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function B$(n){return this.options.indentBy.repeat(n)}s(B$,"indentate");function q$(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}s(q$,"isAttribute");wM.exports=dl});var CM=Dn((B1e,SM)=>{"use strict";var F$=bw(),U$=gM(),j$=EM();SM.exports={XMLParser:U$,XMLValidator:F$,XMLBuilder:j$}});var H1=Dn((Yh,j1)=>{(function(n,e){typeof Yh=="object"&&typeof j1=="object"?j1.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Yh=="object"?Yh.bowser=e():n.bowser=e()})(Yh,function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return s(t,"r"),t.m=n,t.c=e,t.d=function(r,i,a){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:a})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var l in r)t.d(a,l,function(d){return r[d]}.bind(null,l));return a},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=90)}({17:function(n,e,t){"use strict";e.__esModule=!0,e.default=void 0;var r=t(18),i=function(){function a(){}return s(a,"e"),a.getFirstMatch=function(l,d){var m=d.match(l);return m&&m.length>0&&m[1]||""},a.getSecondMatch=function(l,d){var m=d.match(l);return m&&m.length>1&&m[2]||""},a.matchAndReturnConst=function(l,d,m){if(l.test(d))return m},a.getWindowsVersionName=function(l){switch(l){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},a.getMacOSVersionName=function(l){var d=l.split(".").splice(0,2).map(function(m){return parseInt(m,10)||0});if(d.push(0),d[0]===10)switch(d[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},a.getAndroidVersionName=function(l){var d=l.split(".").splice(0,2).map(function(m){return parseInt(m,10)||0});if(d.push(0),!(d[0]===1&&d[1]<5))return d[0]===1&&d[1]<6?"Cupcake":d[0]===1&&d[1]>=6?"Donut":d[0]===2&&d[1]<2?"Eclair":d[0]===2&&d[1]===2?"Froyo":d[0]===2&&d[1]>2?"Gingerbread":d[0]===3?"Honeycomb":d[0]===4&&d[1]<1?"Ice Cream Sandwich":d[0]===4&&d[1]<4?"Jelly Bean":d[0]===4&&d[1]>=4?"KitKat":d[0]===5?"Lollipop":d[0]===6?"Marshmallow":d[0]===7?"Nougat":d[0]===8?"Oreo":d[0]===9?"Pie":void 0},a.getVersionPrecision=function(l){return l.split(".").length},a.compareVersions=function(l,d,m){m===void 0&&(m=!1);var g=a.getVersionPrecision(l),v=a.getVersionPrecision(d),_=Math.max(g,v),E=0,C=a.map([l,d],function(k){var D=_-a.getVersionPrecision(k),O=k+new Array(D+1).join(".0");return a.map(O.split("."),function(P){return new Array(20-P.length).join("0")+P}).reverse()});for(m&&(E=_-Math.min(g,v)),_-=1;_>=E;){if(C[0][_]>C[1][_])return 1;if(C[0][_]===C[1][_]){if(_===E)return 0;_-=1}else if(C[0][_]<C[1][_])return-1}},a.map=function(l,d){var m,g=[];if(Array.prototype.map)return Array.prototype.map.call(l,d);for(m=0;m<l.length;m+=1)g.push(d(l[m]));return g},a.find=function(l,d){var m,g;if(Array.prototype.find)return Array.prototype.find.call(l,d);for(m=0,g=l.length;m<g;m+=1){var v=l[m];if(d(v,m))return v}},a.assign=function(l){for(var d,m,g=l,v=arguments.length,_=new Array(v>1?v-1:0),E=1;E<v;E++)_[E-1]=arguments[E];if(Object.assign)return Object.assign.apply(Object,[l].concat(_));var C=s(function(){var k=_[d];typeof k=="object"&&k!==null&&Object.keys(k).forEach(function(D){g[D]=k[D]})},"o");for(d=0,m=_.length;d<m;d+=1)C();return l},a.getBrowserAlias=function(l){return r.BROWSER_ALIASES_MAP[l]},a.getBrowserTypeByAlias=function(l){return r.BROWSER_MAP[l]||""},a}();e.default=i,n.exports=e.default},18:function(n,e,t){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(n,e,t){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=t(91))&&r.__esModule?r:{default:r},a=t(18);function l(m,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}s(l,"a");var d=function(){function m(){}s(m,"e");var g,v,_;return m.getParser=function(E,C){if(C===void 0&&(C=!1),typeof E!="string")throw new Error("UserAgent should be a string");return new i.default(E,C)},m.parse=function(E){return new i.default(E).getResult()},g=m,_=[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}],(v=null)&&l(g.prototype,v),_&&l(g,_),m}();e.default=d,n.exports=e.default},91:function(n,e,t){"use strict";e.__esModule=!0,e.default=void 0;var r=m(t(92)),i=m(t(93)),a=m(t(94)),l=m(t(95)),d=m(t(17));function m(v){return v&&v.__esModule?v:{default:v}}s(m,"u");var g=function(){function v(E,C){if(C===void 0&&(C=!1),E==null||E==="")throw new Error("UserAgent parameter can't be empty");this._ua=E,this.parsedResult={},C!==!0&&this.parse()}s(v,"e");var _=v.prototype;return _.getUA=function(){return this._ua},_.test=function(E){return E.test(this._ua)},_.parseBrowser=function(){var E=this;this.parsedResult.browser={};var C=d.default.find(r.default,function(k){if(typeof k.test=="function")return k.test(E);if(k.test instanceof Array)return k.test.some(function(D){return E.test(D)});throw new Error("Browser's test function is not valid")});return C&&(this.parsedResult.browser=C.describe(this.getUA())),this.parsedResult.browser},_.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},_.getBrowserName=function(E){return E?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},_.getBrowserVersion=function(){return this.getBrowser().version},_.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},_.parseOS=function(){var E=this;this.parsedResult.os={};var C=d.default.find(i.default,function(k){if(typeof k.test=="function")return k.test(E);if(k.test instanceof Array)return k.test.some(function(D){return E.test(D)});throw new Error("Browser's test function is not valid")});return C&&(this.parsedResult.os=C.describe(this.getUA())),this.parsedResult.os},_.getOSName=function(E){var C=this.getOS().name;return E?String(C).toLowerCase()||"":C||""},_.getOSVersion=function(){return this.getOS().version},_.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},_.getPlatformType=function(E){E===void 0&&(E=!1);var C=this.getPlatform().type;return E?String(C).toLowerCase()||"":C||""},_.parsePlatform=function(){var E=this;this.parsedResult.platform={};var C=d.default.find(a.default,function(k){if(typeof k.test=="function")return k.test(E);if(k.test instanceof Array)return k.test.some(function(D){return E.test(D)});throw new Error("Browser's test function is not valid")});return C&&(this.parsedResult.platform=C.describe(this.getUA())),this.parsedResult.platform},_.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},_.getEngineName=function(E){return E?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},_.parseEngine=function(){var E=this;this.parsedResult.engine={};var C=d.default.find(l.default,function(k){if(typeof k.test=="function")return k.test(E);if(k.test instanceof Array)return k.test.some(function(D){return E.test(D)});throw new Error("Browser's test function is not valid")});return C&&(this.parsedResult.engine=C.describe(this.getUA())),this.parsedResult.engine},_.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},_.getResult=function(){return d.default.assign({},this.parsedResult)},_.satisfies=function(E){var C=this,k={},D=0,O={},P=0;if(Object.keys(E).forEach(function(se){var Te=E[se];typeof Te=="string"?(O[se]=Te,P+=1):typeof Te=="object"&&(k[se]=Te,D+=1)}),D>0){var j=Object.keys(k),W=d.default.find(j,function(se){return C.isOS(se)});if(W){var Z=this.satisfies(k[W]);if(Z!==void 0)return Z}var ae=d.default.find(j,function(se){return C.isPlatform(se)});if(ae){var he=this.satisfies(k[ae]);if(he!==void 0)return he}}if(P>0){var fe=Object.keys(O),z=d.default.find(fe,function(se){return C.isBrowser(se,!0)});if(z!==void 0)return this.compareVersion(O[z])}},_.isBrowser=function(E,C){C===void 0&&(C=!1);var k=this.getBrowserName().toLowerCase(),D=E.toLowerCase(),O=d.default.getBrowserTypeByAlias(D);return C&&O&&(D=O.toLowerCase()),D===k},_.compareVersion=function(E){var C=[0],k=E,D=!1,O=this.getBrowserVersion();if(typeof O=="string")return E[0]===">"||E[0]==="<"?(k=E.substr(1),E[1]==="="?(D=!0,k=E.substr(2)):C=[],E[0]===">"?C.push(1):C.push(-1)):E[0]==="="?k=E.substr(1):E[0]==="~"&&(D=!0,k=E.substr(1)),C.indexOf(d.default.compareVersions(O,k,D))>-1},_.isOS=function(E){return this.getOSName(!0)===String(E).toLowerCase()},_.isPlatform=function(E){return this.getPlatformType(!0)===String(E).toLowerCase()},_.isEngine=function(E){return this.getEngineName(!0)===String(E).toLowerCase()},_.is=function(E,C){return C===void 0&&(C=!1),this.isBrowser(E,C)||this.isOS(E)||this.isPlatform(E)},_.some=function(E){var C=this;return E===void 0&&(E=[]),E.some(function(k){return C.is(k)})},v}();e.default=g,n.exports=e.default},92:function(n,e,t){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=t(17))&&r.__esModule?r:{default:r},a=/version\/(\d+(\.?_?\d+)+)/i,l=[{test:[/googlebot/i],describe:function(d){var m={name:"Googlebot"},g=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/opera/i],describe:function(d){var m={name:"Opera"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/opr\/|opios/i],describe:function(d){var m={name:"Opera"},g=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/SamsungBrowser/i],describe:function(d){var m={name:"Samsung Internet for Android"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/Whale/i],describe:function(d){var m={name:"NAVER Whale Browser"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/MZBrowser/i],describe:function(d){var m={name:"MZ Browser"},g=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/focus/i],describe:function(d){var m={name:"Focus"},g=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/swing/i],describe:function(d){var m={name:"Swing"},g=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/coast/i],describe:function(d){var m={name:"Opera Coast"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(d){var m={name:"Opera Touch"},g=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/yabrowser/i],describe:function(d){var m={name:"Yandex Browser"},g=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/ucbrowser/i],describe:function(d){var m={name:"UC Browser"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/Maxthon|mxios/i],describe:function(d){var m={name:"Maxthon"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/epiphany/i],describe:function(d){var m={name:"Epiphany"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/puffin/i],describe:function(d){var m={name:"Puffin"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/sleipnir/i],describe:function(d){var m={name:"Sleipnir"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/k-meleon/i],describe:function(d){var m={name:"K-Meleon"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/micromessenger/i],describe:function(d){var m={name:"WeChat"},g=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/qqbrowser/i],describe:function(d){var m={name:/qqbrowserlite/i.test(d)?"QQ Browser Lite":"QQ Browser"},g=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/msie|trident/i],describe:function(d){var m={name:"Internet Explorer"},g=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/\sedg\//i],describe:function(d){var m={name:"Microsoft Edge"},g=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/edg([ea]|ios)/i],describe:function(d){var m={name:"Microsoft Edge"},g=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/vivaldi/i],describe:function(d){var m={name:"Vivaldi"},g=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/seamonkey/i],describe:function(d){var m={name:"SeaMonkey"},g=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/sailfish/i],describe:function(d){var m={name:"Sailfish"},g=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,d);return g&&(m.version=g),m}},{test:[/silk/i],describe:function(d){var m={name:"Amazon Silk"},g=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/phantom/i],describe:function(d){var m={name:"PhantomJS"},g=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/slimerjs/i],describe:function(d){var m={name:"SlimerJS"},g=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var m={name:"BlackBerry"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var m={name:"WebOS Browser"},g=i.default.getFirstMatch(a,d)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/bada/i],describe:function(d){var m={name:"Bada"},g=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/tizen/i],describe:function(d){var m={name:"Tizen"},g=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/qupzilla/i],describe:function(d){var m={name:"QupZilla"},g=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/firefox|iceweasel|fxios/i],describe:function(d){var m={name:"Firefox"},g=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/electron/i],describe:function(d){var m={name:"Electron"},g=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/MiuiBrowser/i],describe:function(d){var m={name:"Miui"},g=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/chromium/i],describe:function(d){var m={name:"Chromium"},g=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,d)||i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/chrome|crios|crmo/i],describe:function(d){var m={name:"Chrome"},g=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/GSA/i],describe:function(d){var m={name:"Google Search"},g=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:function(d){var m=!d.test(/like android/i),g=d.test(/android/i);return m&&g},describe:function(d){var m={name:"Android Browser"},g=i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/playstation 4/i],describe:function(d){var m={name:"PlayStation 4"},g=i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/safari|applewebkit/i],describe:function(d){var m={name:"Safari"},g=i.default.getFirstMatch(a,d);return g&&(m.version=g),m}},{test:[/.*/i],describe:function(d){var m=d.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(m,d),version:i.default.getSecondMatch(m,d)}}}];e.default=l,n.exports=e.default},93:function(n,e,t){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=t(17))&&r.__esModule?r:{default:r},a=t(18),l=[{test:[/Roku\/DVP/],describe:function(d){var m=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,d);return{name:a.OS_MAP.Roku,version:m}}},{test:[/windows phone/i],describe:function(d){var m=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,d);return{name:a.OS_MAP.WindowsPhone,version:m}}},{test:[/windows /i],describe:function(d){var m=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,d),g=i.default.getWindowsVersionName(m);return{name:a.OS_MAP.Windows,version:m,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(d){var m={name:a.OS_MAP.iOS},g=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,d);return g&&(m.version=g),m}},{test:[/macintosh/i],describe:function(d){var m=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,d).replace(/[_\s]/g,"."),g=i.default.getMacOSVersionName(m),v={name:a.OS_MAP.MacOS,version:m};return g&&(v.versionName=g),v}},{test:[/(ipod|iphone|ipad)/i],describe:function(d){var m=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,d).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:m}}},{test:function(d){var m=!d.test(/like android/i),g=d.test(/android/i);return m&&g},describe:function(d){var m=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,d),g=i.default.getAndroidVersionName(m),v={name:a.OS_MAP.Android,version:m};return g&&(v.versionName=g),v}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var m=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,d),g={name:a.OS_MAP.WebOS};return m&&m.length&&(g.version=m),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var m=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,d)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,d)||i.default.getFirstMatch(/\bbb(\d+)/i,d);return{name:a.OS_MAP.BlackBerry,version:m}}},{test:[/bada/i],describe:function(d){var m=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,d);return{name:a.OS_MAP.Bada,version:m}}},{test:[/tizen/i],describe:function(d){var m=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,d);return{name:a.OS_MAP.Tizen,version:m}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(d){var m=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,d);return{name:a.OS_MAP.PlayStation4,version:m}}}];e.default=l,n.exports=e.default},94:function(n,e,t){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=t(17))&&r.__esModule?r:{default:r},a=t(18),l=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(d){var m=i.default.getFirstMatch(/(can-l01)/i,d)&&"Nova",g={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return m&&(g.model=m),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(d){var m=d.test(/ipod|iphone/i),g=d.test(/like (ipod|iphone)/i);return m&&!g},describe:function(d){var m=i.default.getFirstMatch(/(ipod|iphone)/i,d);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:m}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(d){return d.getBrowserName(!0)==="blackberry"},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(d){return d.getBrowserName(!0)==="bada"},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(d){return d.getBrowserName()==="windows phone"},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(d){var m=Number(String(d.getOSVersion()).split(".")[0]);return d.getOSName(!0)==="android"&&m>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(d){return d.getOSName(!0)==="android"},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(d){return d.getOSName(!0)==="macos"},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(d){return d.getOSName(!0)==="windows"},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(d){return d.getOSName(!0)==="linux"},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(d){return d.getOSName(!0)==="playstation 4"},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(d){return d.getOSName(!0)==="roku"},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];e.default=l,n.exports=e.default},95:function(n,e,t){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=t(17))&&r.__esModule?r:{default:r},a=t(18),l=[{test:function(d){return d.getBrowserName(!0)==="microsoft edge"},describe:function(d){if(/\sedg\//i.test(d))return{name:a.ENGINE_MAP.Blink};var m=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,d);return{name:a.ENGINE_MAP.EdgeHTML,version:m}}},{test:[/trident/i],describe:function(d){var m={name:a.ENGINE_MAP.Trident},g=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:function(d){return d.test(/presto/i)},describe:function(d){var m={name:a.ENGINE_MAP.Presto},g=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:function(d){var m=d.test(/gecko/i),g=d.test(/like gecko/i);return m&&!g},describe:function(d){var m={name:a.ENGINE_MAP.Gecko},g=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(d){var m={name:a.ENGINE_MAP.WebKit},g=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,d);return g&&(m.version=g),m}}];e.default=l,n.exports=e.default}})})});var n0={};Ev(n0,{FetchEnctype:()=>Ra,FetchMethod:()=>us,FetchRequest:()=>La,FetchResponse:()=>Gc,FrameElement:()=>Qs,FrameLoadingStyle:()=>zl,FrameRenderer:()=>Xc,PageRenderer:()=>Kl,PageSnapshot:()=>Os,StreamActions:()=>t0,StreamElement:()=>jm,StreamSourceElement:()=>Hm,cache:()=>oS,clearCache:()=>dS,connectStreamSource:()=>ef,disconnectStreamSource:()=>tf,fetch:()=>Jv,fetchEnctypeFromString:()=>nS,fetchMethodFromString:()=>zm,isSafe:()=>$m,navigator:()=>aS,registerAdapter:()=>lS,renderStreamMessage:()=>uS,session:()=>Fn,setConfirmMethod:()=>hS,setFormMode:()=>mS,setProgressBarDelay:()=>fS,start:()=>e0,visit:()=>cS});(function(n){if(typeof n.requestSubmit=="function")return;n.requestSubmit=function(r){r?(e(r,this),r.click()):(r=document.createElement("input"),r.type="submit",r.hidden=!0,this.appendChild(r),r.click(),this.removeChild(r))};function e(r,i){r instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),r.type=="submit"||t(TypeError,"The specified element is not a submit button"),r.form==i||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}s(e,"validateSubmitter");function t(r,i,a){throw new r("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",a)}s(t,"raise")})(HTMLFormElement.prototype);var KE=new WeakMap;function yB(n){let e=n instanceof Element?n:n instanceof Node?n.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}s(yB,"findSubmitterFromClickTarget");function bB(n){let e=yB(n.target);e&&e.form&&KE.set(e.form,e)}s(bB,"clickCaptured");(function(){if("submitter"in Event.prototype)return;let n=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))n=e;else return}addEventListener("click",bB,!0),Object.defineProperty(n,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return KE.get(this.target)}})})();var zl={eager:"eager",lazy:"lazy"},Qs=class n extends HTMLElement{static{s(this,"FrameElement")}static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new n.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get loading(){return vB(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function vB(n){switch(n.toLowerCase()){case"lazy":return zl.lazy;default:return zl.eager}}s(vB,"frameLoadingStyleFromString");function Ir(n){return new URL(n.toString(),document.baseURI)}s(Ir,"expandURL");function $l(n){let e;if(n.hash)return n.hash.slice(1);if(e=n.href.match(/#(.*)$/))return e[1]}s($l,"getAnchor");function Xv(n,e){let t=e?.getAttribute("formaction")||n.getAttribute("action")||n.action;return Ir(t)}s(Xv,"getAction$1");function _B(n){return(CB(n).match(/\.[^.]*$/)||[])[0]||""}s(_B,"getExtension");function xB(n){return!!_B(n).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}s(xB,"isHTML");function wB(n,e){let t=AB(e);return n.href===Ir(t).href||n.href.startsWith(t)}s(wB,"isPrefixedBy");function Na(n,e){return wB(n,e)&&xB(n)}s(Na,"locationIsVisitable");function Sv(n){let e=$l(n);return e!=null?n.href.slice(0,-(e.length+1)):n.href}s(Sv,"getRequestURL");function Nm(n){return Sv(n)}s(Nm,"toCacheKey");function EB(n,e){return Ir(n).href==Ir(e).href}s(EB,"urlsAreEqual");function SB(n){return n.pathname.split("/").slice(1)}s(SB,"getPathComponents");function CB(n){return SB(n).slice(-1)[0]}s(CB,"getLastPathComponent");function AB(n){return TB(n.origin+n.pathname)}s(AB,"getPrefix");function TB(n){return n.endsWith("/")?n:n+"/"}s(TB,"addTrailingSlash");var Gc=class{static{s(this,"FetchResponse")}constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Ir(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function Yd(n){if(n.getAttribute("data-turbo-eval")=="false")return n;{let e=document.createElement("script"),t=Zc("csp-nonce");return t&&(e.nonce=t),e.textContent=n.textContent,e.async=!1,kB(e,n),e}}s(Yd,"activateScriptElement");function kB(n,e){for(let{name:t,value:r}of e.attributes)n.setAttribute(t,r)}s(kB,"copyElementAttributes");function OB(n){let e=document.createElement("template");return e.innerHTML=n,e.content}s(OB,"createDocumentFragment");function $n(n,{target:e,cancelable:t,detail:r}={}){let i=new CustomEvent(n,{cancelable:t,bubbles:!0,composed:!0,detail:r});return e&&e.isConnected?e.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}s($n,"dispatch");function Vc(){return document.visibilityState==="hidden"?GE():WE()}s(Vc,"nextRepaint");function WE(){return new Promise(n=>requestAnimationFrame(()=>n()))}s(WE,"nextAnimationFrame");function GE(){return new Promise(n=>setTimeout(()=>n(),0))}s(GE,"nextEventLoopTick");function NB(){return Promise.resolve()}s(NB,"nextMicrotask");function ZE(n=""){return new DOMParser().parseFromString(n,"text/html")}s(ZE,"parseHTMLDocument");function YE(n,...e){let t=RB(n,e).replace(/^\n/,"").split(`
`),r=t[0].match(/^\s+/),i=r?r[0].length:0;return t.map(a=>a.slice(i)).join(`
`)}s(YE,"unindent");function RB(n,e){return n.reduce((t,r,i)=>{let a=e[i]==null?"":e[i];return t+r+a},"")}s(RB,"interpolate");function Ma(){return Array.from({length:36}).map((n,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}s(Ma,"uuid");function Mm(n,...e){for(let t of e.map(r=>r?.getAttribute(n)))if(typeof t=="string")return t;return null}s(Mm,"getAttribute");function MB(n,...e){return e.some(t=>t&&t.hasAttribute(n))}s(MB,"hasAttribute");function Lm(...n){for(let e of n)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}s(Lm,"markAsBusy");function Im(...n){for(let e of n)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}s(Im,"clearBusyState");function LB(n,e=2e3){return new Promise(t=>{let r=s(()=>{n.removeEventListener("error",r),n.removeEventListener("load",r),t()},"onComplete");n.addEventListener("load",r,{once:!0}),n.addEventListener("error",r,{once:!0}),setTimeout(t,e)})}s(LB,"waitForLoad");function XE(n){switch(n){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}s(XE,"getHistoryMethodForAction");function IB(n){return n=="advance"||n=="replace"||n=="restore"}s(IB,"isAction");function Vl(...n){let e=Mm("data-turbo-action",...n);return IB(e)?e:null}s(Vl,"getVisitAction");function QE(n){return document.querySelector(`meta[name="${n}"]`)}s(QE,"getMetaElement");function Zc(n){let e=QE(n);return e&&e.content}s(Zc,"getMetaContent");function DB(n,e){let t=QE(n);return t||(t=document.createElement("meta"),t.setAttribute("name",n),document.head.appendChild(t)),t.setAttribute("content",e),t}s(DB,"setMetaContent");function Kc(n,e){if(n instanceof Element)return n.closest(e)||Kc(n.assignedSlot||n.getRootNode()?.host,e)}s(Kc,"findClosestRecursively");function Qv(n){return!!n&&n.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof n.focus=="function"}s(Qv,"elementIsFocusable");function JE(n){return Array.from(n.querySelectorAll("[autofocus]")).find(Qv)}s(JE,"queryAutofocusableElement");async function PB(n,e){let t=e();n(),await WE();let r=e();return[t,r]}s(PB,"around");function BB(n){if(n.hasAttribute("target")){for(let e of document.getElementsByName(n.target))if(e instanceof HTMLIFrameElement)return!1}return!0}s(BB,"doesNotTargetIFrame");function qB(n){return Kc(n,"a[href]:not([target^=_]):not([download])")}s(qB,"findLinkFromClickTarget");function eS(n){return Ir(n.getAttribute("href")||"")}s(eS,"getLocationForLink");function FB(n,e){let t=null;return(...r)=>{let i=s(()=>n.apply(this,r),"callback");clearTimeout(t),t=setTimeout(i,e)}}s(FB,"debounce");var Cv=class extends Set{static{s(this,"LimitedSet")}constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let r=this.values().next().value;this.delete(r)}super.add(e)}},tS=new Cv(20),UB=window.fetch;function Jv(n,e={}){let t=new Headers(e.headers||{}),r=Ma();return tS.add(r),t.append("X-Turbo-Request-Id",r),UB(n,{...e,headers:t})}s(Jv,"fetchWithTurboHeaders");function zm(n){switch(n.toLowerCase()){case"get":return us.get;case"post":return us.post;case"put":return us.put;case"patch":return us.patch;case"delete":return us.delete}}s(zm,"fetchMethodFromString");var us={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function nS(n){switch(n.toLowerCase()){case Ra.multipart:return Ra.multipart;case Ra.plain:return Ra.plain;default:return Ra.urlEncoded}}s(nS,"fetchEnctypeFromString");var Ra={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},La=class{static{s(this,"FetchRequest")}abortController=new AbortController;#e=e=>{};constructor(e,t,r,i=new URLSearchParams,a=null,l=Ra.urlEncoded){let[d,m]=jE(Ir(r),t,i,l);this.delegate=e,this.url=d,this.target=a,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t,headers:{...this.defaultHeaders},body:m,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=l}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,r=zm(e)||us.get;this.url.search="";let[i,a]=jE(this.url,r,t,this.enctype);this.url=i,this.fetchOptions.body=a,this.fetchOptions.method=r}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=Jv(this.url.href,e);let r=await this.response;return await this.receive(r)}catch(r){if(r.name!=="AbortError")throw this.#n(r)&&this.delegate.requestErrored(this,r),r}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new Gc(e);return $n("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return $m(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let t=new Promise(i=>this.#e=i),r=$n("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=r.detail.url,r.defaultPrevented&&await t,r}#n(e){return!$n("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function $m(n){return zm(n)==us.get}s($m,"isSafe");function jE(n,e,t,r){let i=Array.from(t).length>0?new URLSearchParams(rS(t)):n.searchParams;return $m(e)?[jB(n,i),null]:r==Ra.urlEncoded?[n,i]:[n,t]}s(jE,"buildResourceAndBody");function rS(n){let e=[];for(let[t,r]of n)r instanceof File||e.push([t,r]);return e}s(rS,"entriesExcludingFiles");function jB(n,e){let t=new URLSearchParams(rS(e));return n.search=t.toString(),n}s(jB,"mergeIntoURLSearchParams");var Av=class{static{s(this,"AppearanceObserver")}started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Ia=class{static{s(this,"StreamMessage")}static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(OB(e)):e}constructor(e){this.fragment=HB(e)}};function HB(n){for(let e of n.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let r of t.templateElement.content.querySelectorAll("script"))r.replaceWith(Yd(r));e.replaceWith(t)}return n}s(HB,"importStreamElements");var zB=100,Tv=class{static{s(this,"PrefetchCache")}#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,t,r){this.clear(),this.#e=setTimeout(()=>{t.perform(),this.set(e,t,r),this.#e=null},zB)}set(e,t,r){this.#t={url:e,request:t,expire:new Date(new Date().getTime()+r)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},$B=10*1e3,$c=new Tv,zc={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},Xd=class n{static{s(this,"FormSubmission")}state=zc.initialized;static confirmMethod(e,t,r){return Promise.resolve(confirm(e))}constructor(e,t,r,i=!1){let a=YB(t,r),l=ZB(GB(t,r),a),d=VB(t,r),m=XB(t,r);this.delegate=e,this.formElement=t,this.submitter=r,this.fetchRequest=new La(this,a,l,d,t,m),this.mustRedirect=i}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=Ir(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=zc,r=Mm("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await n.confirmMethod(r,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=zc;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=KB(Zc("csrf-param"))||Zc("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Ia.contentType)}requestStarted(e){this.state=zc.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),Lm(this.formElement),$n("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){$c.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if($c.clear(),this.requestMustRedirect(e)&&WB(t)){let r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=zc.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=zc.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),Im(this.formElement),$n("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||MB("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function VB(n,e){let t=new FormData(n),r=e?.getAttribute("name"),i=e?.getAttribute("value");return r&&t.append(r,i||""),t}s(VB,"buildFormData");function KB(n){if(n!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(n));if(t){let r=t.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}s(KB,"getCookieValue");function WB(n){return n.statusCode==200&&!n.redirected}s(WB,"responseSucceededWithoutRedirect");function GB(n,e){let t=typeof n.action=="string"?n.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":n.getAttribute("action")||t||""}s(GB,"getFormAction");function ZB(n,e){let t=Ir(n);return $m(e)&&(t.search=""),t}s(ZB,"getAction");function YB(n,e){let t=e?.getAttribute("formmethod")||n.getAttribute("method")||"";return zm(t.toLowerCase())||us.get}s(YB,"getMethod");function XB(n,e){return nS(e?.getAttribute("formenctype")||n.enctype)}s(XB,"getEnctype");var Yc=class{static{s(this,"Snapshot")}constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return JE(this.element)}get permanentElements(){return sS(this.element)}getPermanentElementById(e){return iS(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let r of this.permanentElements){let{id:i}=r,a=e.getPermanentElementById(i);a&&(t[i]=[r,a])}return t}};function iS(n,e){return n.querySelector(`#${e}[data-turbo-permanent]`)}s(iS,"getPermanentElementById");function sS(n){return n.querySelectorAll("[id][data-turbo-permanent]")}s(sS,"queryPermanentElementsAll");var Qd=class{static{s(this,"FormSubmitObserver")}started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,r=e.submitter||void 0;t&&QB(t,r)&&JB(t,r)&&this.delegate.willSubmitForm(t,r)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,r))}}};function QB(n,e){return(e?.getAttribute("formmethod")||n.getAttribute("method"))!="dialog"}s(QB,"submissionDoesNotDismissDialog");function JB(n,e){if(e?.hasAttribute("formtarget")||n.hasAttribute("target")){let t=e?.getAttribute("formtarget")||n.target;for(let r of document.getElementsByName(t))if(r instanceof HTMLIFrameElement)return!1;return!0}else return!0}s(JB,"submissionDoesNotTargetIFrame");var Dm=class{static{s(this,"View")}#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor($l(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:r,willRender:i,newSnapshot:a}=e,l=i;if(r)try{this.renderPromise=new Promise(v=>this.#e=v),this.renderer=e,await this.prepareToRenderSnapshot(e);let d=new Promise(v=>this.#t=v),m={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(a,m)||await d,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(a,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else l&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},kv=class extends Dm{static{s(this,"FrameView")}missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Yc(this.element)}},Pm=class{static{s(this,"LinkInterceptor")}constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};respondsToEventTarget(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}},Bm=class{static{s(this,"LinkClickObserver")}started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,r=qB(t);if(r&&BB(r)){let i=eS(r);this.delegate.willFollowLinkToLocation(r,i,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(r,i))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},qm=class{static{s(this,"FormLinkClickObserver")}constructor(e,t){this.delegate=e,this.linkInterceptor=new Bm(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,r){return this.delegate.willSubmitFormLinkToLocation(e,t,r)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let r=document.createElement("form"),i="hidden";for(let[_,E]of t.searchParams)r.append(Object.assign(document.createElement("input"),{type:i,name:_,value:E}));let a=Object.assign(t,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",a.href),r.setAttribute("hidden","");let l=e.getAttribute("data-turbo-method");l&&r.setAttribute("method",l);let d=e.getAttribute("data-turbo-frame");d&&r.setAttribute("data-turbo-frame",d);let m=Vl(e);m&&r.setAttribute("data-turbo-action",m);let g=e.getAttribute("data-turbo-confirm");g&&r.setAttribute("data-turbo-confirm",g),e.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}},Fm=class{static{s(this,"Bardo")}static async preservingPermanentElements(e,t,r){let i=new this(e,t);i.enter(),await r(),i.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,r]=this.permanentElementMap[e];this.delegate.enteringBardo(t,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=e3(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function e3(n){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",n.id),e}s(e3,"createPlaceholderForPermanentElement");var Jd=class{static{s(this,"Renderer")}#e=null;constructor(e,t,r,i,a=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=i,this.willRender=a,this.renderElement=r,this.promise=new Promise((l,d)=>this.resolvingFunctions={resolve:l,reject:d})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await Fm.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},Xc=class extends Jd{static{s(this,"FrameRenderer")}static renderElement(e,t){let r=document.createRange();r.selectNodeContents(e),r.deleteContents();let i=t,a=i.ownerDocument?.createRange();a&&(a.selectNodeContents(i),e.appendChild(a.extractContents()))}constructor(e,t,r,i,a,l=!0){super(t,r,i,a,l),this.delegate=e}get shouldRender(){return!0}async render(){await Vc(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Vc(),this.focusFirstAutofocusableElement(),await Vc(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=t3(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=n3(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:r}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=Yd(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function t3(n,e){return n=="end"||n=="start"||n=="center"||n=="nearest"?n:e}s(t3,"readScrollLogicalPosition");function n3(n,e){return n=="auto"||n=="smooth"?n:e}s(n3,"readScrollBehavior");var Ov=class n{static{s(this,"ProgressBar")}static animationDuration=300;static get defaultCSS(){return YE`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${n.animationDuration}ms ease-out,
          opacity ${n.animationDuration/2}ms ${n.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,n.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,n.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=n.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return Zc("csp-nonce")}},Nv=class extends Yc{static{s(this,"HeadSnapshot")}detailsByOuterHTML=this.children.filter(e=>!o3(e)).map(e=>c3(e)).reduce((e,t)=>{let{outerHTML:r}=t,i=r in e?e[r]:{type:r3(t),tracked:i3(t),elements:[]};return{...e,[r]:{...i,elements:[...i.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(r=>!(r in t.detailsByOuterHTML)).map(r=>this.detailsByOuterHTML[r]).filter(({type:r})=>r==e).map(({elements:[r]})=>r)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:r,tracked:i,elements:a}=this.detailsByOuterHTML[t];return r==null&&!i?[...e,...a]:a.length>1?[...e,...a.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,r)=>{let{elements:[i]}=this.detailsByOuterHTML[r];return l3(i,e)?i:t},void 0|void 0)}};function r3(n){if(s3(n))return"script";if(a3(n))return"stylesheet"}s(r3,"elementType");function i3(n){return n.getAttribute("data-turbo-track")=="reload"}s(i3,"elementIsTracked");function s3(n){return n.localName=="script"}s(s3,"elementIsScript");function o3(n){return n.localName=="noscript"}s(o3,"elementIsNoscript");function a3(n){let e=n.localName;return e=="style"||e=="link"&&n.getAttribute("rel")=="stylesheet"}s(a3,"elementIsStylesheet");function l3(n,e){return n.localName=="meta"&&n.getAttribute("name")==e}s(l3,"elementIsMetaElementWithName");function c3(n){return n.hasAttribute("nonce")&&n.setAttribute("nonce",""),n}s(c3,"elementWithoutNonce");var Os=class n extends Yc{static{s(this,"PageSnapshot")}static fromHTMLString(e=""){return this.fromDocument(ZE(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:r}){return new this(e,t,new Nv(r))}constructor(e,t,r){super(t),this.documentElement=e,this.headSnapshot=r}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),r=e.querySelectorAll("select");for(let[i,a]of t.entries()){let l=r[i];for(let d of l.selectedOptions)d.selected=!1;for(let d of a.selectedOptions)l.options[d.index].selected=!0}for(let i of e.querySelectorAll('input[type="password"]'))i.value="";return new n(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return Ir(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},Rv=class{static{s(this,"ViewTransitioner")}#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},u3={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},Rm={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},Ho={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Wc={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},d3={advance:"forward",restore:"back",replace:"none"},Mv=class{static{s(this,"Visit")}identifier=Ma();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=Ho.initialized;viewTransitioner=new Rv;constructor(e,t,r,i={}){this.delegate=e,this.location=t,this.restorationIdentifier=r||Ma();let{action:a,historyChanged:l,referrer:d,snapshot:m,snapshotHTML:g,response:v,visitCachedSnapshot:_,willRender:E,updateHistory:C,shouldCacheSnapshot:k,acceptsStreamResponse:D,direction:O}={...u3,...i};this.action=a,this.historyChanged=l,this.referrer=d,this.snapshot=m,this.snapshotHTML=g,this.response=v,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=_,this.willRender=E,this.updateHistory=C,this.scrolled=!E,this.shouldCacheSnapshot=k,this.acceptsStreamResponse=D,this.direction=O||d3[a]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==Ho.initialized&&(this.recordTimingMetric(Rm.visitStart),this.state=Ho.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==Ho.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=Ho.canceled)}complete(){this.state==Ho.started&&(this.recordTimingMetric(Rm.visitEnd),this.adapter.visitCompleted(this),this.state=Ho.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==Ho.started&&(this.state=Ho.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=XE(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new La(this,us.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Rm.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;HE(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(Rm.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,HE(e)&&t!=null){let r=Os.fromHTMLString(t);await this.renderPageSnapshot(r,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Os.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!$l(this.location)||e.hasAnchor($l(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Os.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Ia.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let r=await t.responseHTML,{redirected:i,statusCode:a}=t;r==null?this.recordResponse({statusCode:Wc.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:a,responseHTML:r,redirected:i}))}async requestFailedWithResponse(e,t){let r=await t.responseHTML,{redirected:i,statusCode:a}=t;r==null?this.recordResponse({statusCode:Wc.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:a,responseHTML:r,redirected:i})}requestErrored(e,t){this.recordResponse({statusCode:Wc.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=$l(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),this.frame=await Vc(),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function HE(n){return n>=200&&n<300}s(HE,"isSuccessful");var Lv=class{static{s(this,"BrowserAdapter")}progressBar=new Ov;constructor(e){this.session=e}visitProposedToLocation(e,t){Na(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||Ma(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Wc.networkFailure:case Wc.timeoutFailure:case Wc.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){$n("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},Iv=class{static{s(this,"CacheObserver")}selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},Dv=class{static{s(this,"FrameRedirector")}constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new Pm(this,t),this.formSubmitObserver=new Qd(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,r){return this.#t(e)}linkClickIntercepted(e,t,r){let i=this.#n(e);i&&i.delegate.linkClickIntercepted(e,t,r)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let r=this.#n(e,t);r&&r.delegate.formSubmitted(e,t)}#e(e,t){let r=Xv(e,t),i=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),a=Ir(i?.content??"/");return this.#t(e,t)&&Na(r,a)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let i=this.#n(e,t);return i?i!=e.closest("turbo-frame"):!1}else return!1}#n(e,t){let r=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(r&&r!="_top"){let i=this.element.querySelector(`#${r}:not([disabled])`);if(i instanceof Qs)return i}}},Pv=class{static{s(this,"History")}location;restorationIdentifier=Ma();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,r=Ma()){e===history.pushState&&++this.currentIndex;let i={turbo:{restorationIdentifier:r,restorationIndex:this.currentIndex}};e.call(history,i,"",t.href),this.location=t,this.restorationIdentifier=r}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,r=this.restorationData[t];this.restorationData[t]={...r,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);let{restorationIdentifier:r,restorationIndex:i}=t;this.restorationIdentifier=r;let a=i>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,r,a),this.currentIndex=i}}};onPageLoad=async e=>{await NB(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Bv=class{static{s(this,"LinkPrefetchObserver")}started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#r,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#r,!0),this.started=!0};#n=e=>{if(Zc("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#a(t)){let i=t,a=eS(i);if(this.delegate.canPrefetchRequestToLocation(i,a)){this.#e=i;let l=new La(this,us.get,a,new URLSearchParams,t);$c.setLater(a.toString(),l,this.#o)}}};#i=e=>{e.target===this.#e&&this.#s()};#s=()=>{$c.clear(),this.#e=null};#r=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="get"){let t=$c.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),$c.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let r=t.closest("turbo-frame"),i=t.getAttribute("data-turbo-frame")||r?.getAttribute("target")||r?.id;i&&i!=="_top"&&(e.headers["Turbo-Frame"]=i)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#o(){return Number(Zc("turbo-prefetch-cache-time"))||$B}#a(e){return!(!e.getAttribute("href")||f3(e)||h3(e)||m3(e)||p3(e)||y3(e))}},f3=s(n=>n.origin!==document.location.origin||!["http:","https:"].includes(n.protocol)||n.hasAttribute("target"),"unfetchableLink"),h3=s(n=>n.pathname+n.search===document.location.pathname+document.location.search||n.href.startsWith("#"),"linkToTheSamePage"),m3=s(n=>{if(n.getAttribute("data-turbo-prefetch")==="false"||n.getAttribute("data-turbo")==="false")return!0;let e=Kc(n,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},"linkOptsOut"),p3=s(n=>{let e=n.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||g3(n)||n.hasAttribute("data-turbo-confirm")||n.hasAttribute("data-turbo-stream"))},"nonSafeLink"),g3=s(n=>n.hasAttribute("data-remote")||n.hasAttribute("data-behavior")||n.hasAttribute("data-confirm")||n.hasAttribute("data-method"),"isUJS"),y3=s(n=>$n("turbo:before-prefetch",{target:n,cancelable:!0}).defaultPrevented,"eventPrevented"),qv=class{static{s(this,"Navigator")}constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,r={}){this.stop(),this.currentVisit=new Mv(this,Ir(e),t,{referrer:this.location,...r}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new Xd(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let r=await t.responseHTML;if(r){let i=e.isSafe;i||this.view.clearSnapshotCache();let{statusCode:a,redirected:l}=t,m={action:this.#e(e,t),shouldCacheSnapshot:i,response:{statusCode:a,responseHTML:r,redirected:l}};this.proposeVisit(t.location,m)}}}async formSubmissionFailedWithResponse(e,t){let r=await t.responseHTML;if(r){let i=Os.fromHTMLString(r);t.serverError?await this.view.renderError(i,this.currentVisit):await this.view.renderPage(i,!1,!0,this.currentVisit),i.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){let r=$l(e),i=$l(this.view.lastRenderedLocation),a=t==="restore"&&typeof r>"u";return t!=="replace"&&Sv(e)===Sv(this.view.lastRenderedLocation)&&(a||r!=null&&r!==i)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:r,formElement:i}=e;return Vl(r,i)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},Hl={initial:0,loading:1,interactive:2,complete:3},Fv=class{static{s(this,"PageObserver")}stage=Hl.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==Hl.initial&&(this.stage=Hl.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==Hl.loading&&(this.stage=Hl.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Hl.interactive&&(this.stage=Hl.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Uv=class{static{s(this,"ScrollObserver")}started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},jv=class{static{s(this,"StreamMessageRenderer")}render({fragment:e}){Fm.preservingPermanentElements(this,b3(e),()=>{v3(e,()=>{_3(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function b3(n){let e=sS(document.documentElement),t={};for(let r of e){let{id:i}=r;for(let a of n.querySelectorAll("turbo-stream")){let l=iS(a.templateElement.content,i);l&&(t[i]=[r,l])}}return t}s(b3,"getPermanentElementMapForFragment");async function v3(n,e){let t=`turbo-stream-autofocus-${Ma()}`,r=n.querySelectorAll("turbo-stream"),i=x3(r),a=null;if(i&&(i.id?a=i.id:a=t,i.id=a),e(),await Vc(),(document.activeElement==null||document.activeElement==document.body)&&a){let d=document.getElementById(a);Qv(d)&&d.focus(),d&&d.id==t&&d.removeAttribute("id")}}s(v3,"withAutofocusFromFragment");async function _3(n){let[e,t]=await PB(n,()=>document.activeElement),r=e&&e.id;if(r){let i=document.getElementById(r);Qv(i)&&i!=t&&i.focus()}}s(_3,"withPreservedFocus");function x3(n){for(let e of n){let t=JE(e.templateElement.content);if(t)return t}return null}s(x3,"firstAutofocusableElementInStreams");var Hv=class{static{s(this,"StreamObserver")}sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=w3(e);t&&E3(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Ia.wrap(e))}};function w3(n){let e=n.detail?.fetchResponse;if(e instanceof Gc)return e}s(w3,"fetchResponseFromEvent");function E3(n){return(n.contentType??"").startsWith(Ia.contentType)}s(E3,"fetchResponseIsStream");var Um=class extends Jd{static{s(this,"ErrorRenderer")}static renderElement(e,t){let{documentElement:r,body:i}=document;r.replaceChild(t,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let r=Yd(e);t.replaceChild(r,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},S3=function(){let n=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E},head:{style:"merge",shouldPreserve:function(F){return F.getAttribute("im-preserve")==="true"},shouldReAppend:function(F){return F.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function t(F,G,B={}){F instanceof Document&&(F=F.documentElement),typeof G=="string"&&(G=Z(G));let ie=ae(G),le=k(F,ie,B);return r(F,ie,le)}s(t,"morph");function r(F,G,B){if(B.head.block){let ie=F.querySelector("head"),le=G.querySelector("head");if(ie&&le){let ge=_(le,ie,B);Promise.all(ge).then(function(){r(F,G,Object.assign(B,{head:{block:!1,ignore:!0}}))});return}}if(B.morphStyle==="innerHTML")return l(G,F,B),F.children;if(B.morphStyle==="outerHTML"||B.morphStyle==null){let ie=fe(G,F,B),le=ie?.previousSibling,ge=ie?.nextSibling,Ie=a(F,ie,B);return ie?he(le,Ie,ge):[]}else throw"Do not understand how to morph style "+B.morphStyle}s(r,"morphNormalizedContent");function i(F,G){return G.ignoreActiveValue&&F===document.activeElement&&F!==document.body}s(i,"ignoreValueOfActiveElement");function a(F,G,B){if(!(B.ignoreActive&&F===document.activeElement))return G==null?B.callbacks.beforeNodeRemoved(F)===!1?F:(F.remove(),B.callbacks.afterNodeRemoved(F),null):O(F,G)?(B.callbacks.beforeNodeMorphed(F,G)===!1||(F instanceof HTMLHeadElement&&B.head.ignore||(F instanceof HTMLHeadElement&&B.head.style!=="morph"?_(G,F,B):(m(G,F,B),i(F,B)||l(G,F,B))),B.callbacks.afterNodeMorphed(F,G)),F):B.callbacks.beforeNodeRemoved(F)===!1||B.callbacks.beforeNodeAdded(G)===!1?F:(F.parentElement.replaceChild(G,F),B.callbacks.afterNodeAdded(G),B.callbacks.afterNodeRemoved(F),G)}s(a,"morphOldNodeTo");function l(F,G,B){let ie=F.firstChild,le=G.firstChild,ge;for(;ie;){if(ge=ie,ie=ge.nextSibling,le==null){if(B.callbacks.beforeNodeAdded(ge)===!1)return;G.appendChild(ge),B.callbacks.afterNodeAdded(ge),ne(B,ge);continue}if(D(ge,le,B)){a(le,ge,B),le=le.nextSibling,ne(B,ge);continue}let Ie=j(F,G,ge,le,B);if(Ie){le=P(le,Ie,B),a(Ie,ge,B),ne(B,ge);continue}let Se=W(F,G,ge,le,B);if(Se){le=P(le,Se,B),a(Se,ge,B),ne(B,ge);continue}if(B.callbacks.beforeNodeAdded(ge)===!1)return;G.insertBefore(ge,le),B.callbacks.afterNodeAdded(ge),ne(B,ge)}for(;le!==null;){let Ie=le;le=le.nextSibling,se(Ie,B)}}s(l,"morphChildren");function d(F,G,B,ie){return F==="value"&&ie.ignoreActiveValue&&G===document.activeElement?!0:ie.callbacks.beforeAttributeUpdated(F,G,B)===!1}s(d,"ignoreAttribute");function m(F,G,B){let ie=F.nodeType;if(ie===1){let le=F.attributes,ge=G.attributes;for(let Ie of le)d(Ie.name,G,"update",B)||G.getAttribute(Ie.name)!==Ie.value&&G.setAttribute(Ie.name,Ie.value);for(let Ie=ge.length-1;0<=Ie;Ie--){let Se=ge[Ie];d(Se.name,G,"remove",B)||F.hasAttribute(Se.name)||G.removeAttribute(Se.name)}}(ie===8||ie===3)&&G.nodeValue!==F.nodeValue&&(G.nodeValue=F.nodeValue),i(G,B)||v(F,G,B)}s(m,"syncNodeFrom");function g(F,G,B,ie){if(F[B]!==G[B]){let le=d(B,G,"update",ie);le||(G[B]=F[B]),F[B]?le||G.setAttribute(B,F[B]):d(B,G,"remove",ie)||G.removeAttribute(B)}}s(g,"syncBooleanAttribute");function v(F,G,B){if(F instanceof HTMLInputElement&&G instanceof HTMLInputElement&&F.type!=="file"){let ie=F.value,le=G.value;g(F,G,"checked",B),g(F,G,"disabled",B),F.hasAttribute("value")?ie!==le&&(d("value",G,"update",B)||(G.setAttribute("value",ie),G.value=ie)):d("value",G,"remove",B)||(G.value="",G.removeAttribute("value"))}else if(F instanceof HTMLOptionElement)g(F,G,"selected",B);else if(F instanceof HTMLTextAreaElement&&G instanceof HTMLTextAreaElement){let ie=F.value,le=G.value;if(d("value",G,"update",B))return;ie!==le&&(G.value=ie),G.firstChild&&G.firstChild.nodeValue!==ie&&(G.firstChild.nodeValue=ie)}}s(v,"syncInputValue");function _(F,G,B){let ie=[],le=[],ge=[],Ie=[],Se=B.head.style,Fe=new Map;for(let tt of F.children)Fe.set(tt.outerHTML,tt);for(let tt of G.children){let at=Fe.has(tt.outerHTML),lt=B.head.shouldReAppend(tt),_t=B.head.shouldPreserve(tt);at||_t?lt?le.push(tt):(Fe.delete(tt.outerHTML),ge.push(tt)):Se==="append"?lt&&(le.push(tt),Ie.push(tt)):B.head.shouldRemove(tt)!==!1&&le.push(tt)}Ie.push(...Fe.values());let it=[];for(let tt of Ie){let at=document.createRange().createContextualFragment(tt.outerHTML).firstChild;if(B.callbacks.beforeNodeAdded(at)!==!1){if(at.href||at.src){let lt=null,_t=new Promise(function(Ht){lt=Ht});at.addEventListener("load",function(){lt()}),it.push(_t)}G.appendChild(at),B.callbacks.afterNodeAdded(at),ie.push(at)}}for(let tt of le)B.callbacks.beforeNodeRemoved(tt)!==!1&&(G.removeChild(tt),B.callbacks.afterNodeRemoved(tt));return B.head.afterHeadMorphed(G,{added:ie,kept:ge,removed:le}),it}s(_,"handleHeadElement");function E(){}s(E,"noOp");function C(F){let G={};return Object.assign(G,e),Object.assign(G,F),G.callbacks={},Object.assign(G.callbacks,e.callbacks),Object.assign(G.callbacks,F.callbacks),G.head={},Object.assign(G.head,e.head),Object.assign(G.head,F.head),G}s(C,"mergeDefaults");function k(F,G,B){return B=C(B),{target:F,newContent:G,config:B,morphStyle:B.morphStyle,ignoreActive:B.ignoreActive,ignoreActiveValue:B.ignoreActiveValue,idMap:Ne(F,G),deadIds:new Set,callbacks:B.callbacks,head:B.head}}s(k,"createMorphContext");function D(F,G,B){return F==null||G==null?!1:F.nodeType===G.nodeType&&F.tagName===G.tagName?F.id!==""&&F.id===G.id?!0:be(B,F,G)>0:!1}s(D,"isIdSetMatch");function O(F,G){return F==null||G==null?!1:F.nodeType===G.nodeType&&F.tagName===G.tagName}s(O,"isSoftMatch");function P(F,G,B){for(;F!==G;){let ie=F;F=F.nextSibling,se(ie,B)}return ne(B,G),G.nextSibling}s(P,"removeNodesBetween");function j(F,G,B,ie,le){let ge=be(le,B,G),Ie=null;if(ge>0){let Se=ie,Fe=0;for(;Se!=null;){if(D(B,Se,le))return Se;if(Fe+=be(le,Se,F),Fe>ge)return null;Se=Se.nextSibling}}return Ie}s(j,"findIdSetMatch");function W(F,G,B,ie,le){let ge=ie,Ie=B.nextSibling,Se=0;for(;ge!=null;){if(be(le,ge,F)>0)return null;if(O(B,ge))return ge;if(O(Ie,ge)&&(Se++,Ie=Ie.nextSibling,Se>=2))return null;ge=ge.nextSibling}return ge}s(W,"findSoftMatch");function Z(F){let G=new DOMParser,B=F.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(B.match(/<\/html>/)||B.match(/<\/head>/)||B.match(/<\/body>/)){let ie=G.parseFromString(F,"text/html");if(B.match(/<\/html>/))return ie.generatedByIdiomorph=!0,ie;{let le=ie.firstChild;return le?(le.generatedByIdiomorph=!0,le):null}}else{let le=G.parseFromString("<body><template>"+F+"</template></body>","text/html").body.querySelector("template").content;return le.generatedByIdiomorph=!0,le}}s(Z,"parseContent");function ae(F){if(F==null)return document.createElement("div");if(F.generatedByIdiomorph)return F;if(F instanceof Node){let G=document.createElement("div");return G.append(F),G}else{let G=document.createElement("div");for(let B of[...F])G.append(B);return G}}s(ae,"normalizeContent");function he(F,G,B){let ie=[],le=[];for(;F!=null;)ie.push(F),F=F.previousSibling;for(;ie.length>0;){let ge=ie.pop();le.push(ge),G.parentElement.insertBefore(ge,G)}for(le.push(G);B!=null;)ie.push(B),le.push(B),B=B.nextSibling;for(;ie.length>0;)G.parentElement.insertBefore(ie.pop(),G.nextSibling);return le}s(he,"insertSiblings");function fe(F,G,B){let ie;ie=F.firstChild;let le=ie,ge=0;for(;ie;){let Ie=z(ie,G,B);Ie>ge&&(le=ie,ge=Ie),ie=ie.nextSibling}return le}s(fe,"findBestNodeMatch");function z(F,G,B){return O(F,G)?.5+be(B,F,G):0}s(z,"scoreElement");function se(F,G){ne(G,F),G.callbacks.beforeNodeRemoved(F)!==!1&&(F.remove(),G.callbacks.afterNodeRemoved(F))}s(se,"removeNode");function Te(F,G){return!F.deadIds.has(G)}s(Te,"isIdInConsideration");function K(F,G,B){return(F.idMap.get(B)||n).has(G)}s(K,"idIsWithinNode");function ne(F,G){let B=F.idMap.get(G)||n;for(let ie of B)F.deadIds.add(ie)}s(ne,"removeIdsFromConsideration");function be(F,G,B){let ie=F.idMap.get(G)||n,le=0;for(let ge of ie)Te(F,ge)&&K(F,ge,B)&&++le;return le}s(be,"getIdIntersectionCount");function de(F,G){let B=F.parentElement,ie=F.querySelectorAll("[id]");for(let le of ie){let ge=le;for(;ge!==B&&ge!=null;){let Ie=G.get(ge);Ie==null&&(Ie=new Set,G.set(ge,Ie)),Ie.add(le.id),ge=ge.parentElement}}}s(de,"populateIdMapForNode");function Ne(F,G){let B=new Map;return de(F,B),de(G,B),B}return s(Ne,"createIdMap"),{morph:t,defaults:e}}(),Kl=class extends Jd{static{s(this,"PageRenderer")}static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:t}=this.newSnapshot;t?e.setAttribute("lang",t):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(LB(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(Yd(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[r,i]of t.entries()){if(e.tagName=="TITLE"){if(i.tagName!="TITLE")continue;if(e.innerHTML==i.innerHTML)return t.splice(r,1),!0}if(i.isEqualNode(e))return t.splice(r,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=Yd(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},zv=class extends Kl{static{s(this,"MorphRenderer")}async render(){this.willRender&&await this.#e()}get renderMethod(){return"morph"}async#e(){this.#t(this.currentElement,this.newElement),this.#a(),$n("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#t(e,t,r="outerHTML"){this.isMorphingTurboFrame=this.#l(e),S3.morph(e,t,{morphStyle:r,callbacks:{beforeNodeAdded:this.#n,beforeNodeMorphed:this.#i,beforeAttributeUpdated:this.#s,beforeNodeRemoved:this.#o,afterNodeMorphed:this.#r}})}#n=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));#i=(e,t)=>{if(e instanceof HTMLElement)return!e.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#l(e))?!$n("turbo:before-morph-element",{cancelable:!0,target:e,detail:{newElement:t}}).defaultPrevented:!1};#s=(e,t,r)=>!$n("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:r}}).defaultPrevented;#r=(e,t)=>{t instanceof HTMLElement&&$n("turbo:morph-element",{target:e,detail:{newElement:t}})};#o=e=>this.#i(e);#a(){this.#f().forEach(e=>{this.#l(e)&&(this.#u(e),e.reload())})}#u(e){e.addEventListener("turbo:before-frame-render",t=>{t.detail.render=this.#d},{once:!0})}#d=(e,t)=>{$n("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),this.#t(e,t.children,"innerHTML")};#l(e){return e.src&&e.refresh==="morph"}#f(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(e=>!e.closest("[data-turbo-permanent]"))}},$v=class{static{s(this,"SnapshotCache")}keys=[];snapshots={};constructor(e){this.size=e}has(e){return Nm(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[Nm(e)]}write(e,t){this.snapshots[Nm(e)]=t}touch(e){let t=Nm(e),r=this.keys.indexOf(t);r>-1&&this.keys.splice(r,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},Vv=class extends Dm{static{s(this,"PageView")}snapshotCache=new $v(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,r=!0,i){let l=this.isPageRefresh(i)&&this.snapshot.shouldMorphPage?zv:Kl,d=new l(this.snapshot,e,Kl.renderElement,t,r);return d.shouldRender?i?.changeHistory():this.forceReloaded=!0,this.render(d)}renderError(e,t){t?.changeHistory();let r=new Um(this.snapshot,e,Um.renderElement,!1);return this.render(r)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await GE();let r=e.clone();return this.snapshotCache.put(t,r),r}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return Os.fromElement(this.element)}},Kv=class{static{s(this,"Preloader")}selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new La(this,us.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let r=await t.responseHTML,i=Os.fromHTMLString(r);this.snapshotCache.put(e.url,i)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},Wv=class{static{s(this,"Cache")}constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){DB("turbo-cache-control",e)}},Gv=class{static{s(this,"Session")}navigator=new qv(this);history=new Pv(this);view=new Vv(this,document.documentElement);adapter=new Lv(this);pageObserver=new Fv(this);cacheObserver=new Iv;linkPrefetchObserver=new Bv(this,document);linkClickObserver=new Bm(this,window);formSubmitObserver=new Qd(this,document);scrollObserver=new Uv(this);streamObserver=new Hv(this);formLinkClickObserver=new qm(this,document.documentElement);frameRedirector=new Dv(this,document.documentElement);streamMessageRenderer=new jv;cache=new Wv(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#e=150;constructor(e){this.recentRequests=e,this.preloader=new Kv(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let r=t.frame?document.getElementById(t.frame):null;if(r instanceof Qs){let i=t.action||Vl(r);r.delegate.proposeVisitIfNavigatedWithAction(r,i),r.src=e.toString()}else this.navigator.proposeVisit(Ir(e),t)}refresh(e,t){t&&this.recentRequests.has(t)||this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Ia.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=FB(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),r=e.hasAttribute("data-turbo-stream"),i=e.getAttribute("data-turbo-frame"),a=i=="_top"?null:document.getElementById(i)||Kc(e,"turbo-frame:not([disabled])");if(t||r||a instanceof Qs)return!1;{let l=new URL(e.href);return this.elementIsNavigatable(e)&&Na(l,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,r){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:r}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Na(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Na(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,r){return this.elementIsNavigatable(e)&&Na(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,r)}followedLinkToLocation(e,t){let r=this.getActionForLink(e),i=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:r,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){zE(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(Lm(document.documentElement),this.view.markVisitDirection(e.direction)),zE(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),Im(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let r=Xv(e,t);return this.submissionIsNavigatable(e,t)&&Na(Ir(r),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let r=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:i,detail:{render:a}}=r;return this.view.renderer&&a&&(this.view.renderer.renderElement=a),!i}viewRenderedSnapshot(e,t,r){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(r)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,r){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,r).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,r){return $n("turbo:click",{target:e,detail:{url:t.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return $n("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return $n("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return $n("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return $n("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return $n("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return $n("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return $n("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return $n("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{let r=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?r&&e.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Kc(e,"[data-turbo]"),r=Kc(e,"turbo-frame");return this.drive||r?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return Vl(e)||"advance"}get snapshot(){return this.view.snapshot}};function zE(n){Object.defineProperties(n,C3)}s(zE,"extendURLWithDeprecatedProperties");var C3={absoluteURL:{get(){return this.toString()}}},Fn=new Gv(tS),{cache:oS,navigator:aS}=Fn;function e0(){Fn.start()}s(e0,"start");function lS(n){Fn.registerAdapter(n)}s(lS,"registerAdapter");function cS(n,e){Fn.visit(n,e)}s(cS,"visit");function ef(n){Fn.connectStreamSource(n)}s(ef,"connectStreamSource");function tf(n){Fn.disconnectStreamSource(n)}s(tf,"disconnectStreamSource");function uS(n){Fn.renderStreamMessage(n)}s(uS,"renderStreamMessage");function dS(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Fn.clearCache()}s(dS,"clearCache");function fS(n){Fn.setProgressBarDelay(n)}s(fS,"setProgressBarDelay");function hS(n){Xd.confirmMethod=n}s(hS,"setConfirmMethod");function mS(n){Fn.setFormMode(n)}s(mS,"setFormMode");var A3=Object.freeze({__proto__:null,navigator:aS,session:Fn,cache:oS,PageRenderer:Kl,PageSnapshot:Os,FrameRenderer:Xc,fetch:Jv,start:e0,registerAdapter:lS,visit:cS,connectStreamSource:ef,disconnectStreamSource:tf,renderStreamMessage:uS,clearCache:dS,setProgressBarDelay:fS,setConfirmMethod:hS,setFormMode:mS}),Zv=class extends Error{static{s(this,"TurboFrameMissingError")}},Yv=class{static{s(this,"FrameController")}fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#n=!1;#i=!1;#s=new Set;action=null;constructor(e){this.element=e,this.view=new kv(this,this.element),this.appearanceObserver=new Av(this,this.element),this.formLinkClickObserver=new qm(this,this.element),this.linkInterceptor=new Pm(this,this.element),this.restorationIdentifier=Ma(),this.formSubmitObserver=new Qd(this,this.element)}connect(){this.#n||(this.#n=!0,this.loadingStyle==zl.lazy?this.appearanceObserver.start():this.#r(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#n&&(this.#n=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==zl.eager&&this.#r()}sourceURLChanged(){this.#y("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==zl.eager||this.#i)&&this.#r())}sourceURLReloaded(){let{src:e}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==zl.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#r())}async#r(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#a(Ir(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#i=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let r=ZE(t);Os.fromDocument(r).isVisitable?await this.#o(e,r):await this.#d(e)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,Vl(e)),this.#r()}willSubmitFormLinkToLocation(e){return this.#h(e)}submittedFormLinkToLocation(e,t,r){let i=this.#c(e);i&&r.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(e,t,r){return this.#h(e)}linkClickIntercepted(e,t){this.#u(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#h(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Xd(this,e,t);let{fetchRequest:r}=this.formSubmission;this.prepareRequest(r),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Ia.contentType)}requestStarted(e){Lm(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){Im(this.element)}formSubmissionStarted({formElement:e}){Lm(e,this.#c(e))}formSubmissionSucceededWithResponse(e,t){let r=this.#c(e.formElement,e.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,Vl(e.submitter,e.formElement,r)),r.delegate.loadResponse(t),e.isSafe||Fn.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),Fn.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){Im(e,this.#c(e))}allowsImmediateRender({element:e},t){let r=$n("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:i,detail:{render:a}}=r;return this.view.renderer&&a&&(this.view.renderer.renderElement=a),!i}viewRenderedSnapshot(e,t,r){}preloadOnLoadLinksForView(e){Fn.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#o(e,t){let r=await this.extractForeignFrameElement(t.body);if(r){let i=new Yc(r),a=new Xc(this,this.view.snapshot,i,Xc.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(a),this.complete=!0,Fn.frameRendered(e,this.element),Fn.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#l(e)&&this.#f(e)}async#a(e){let t=new La(this,us.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(r=>{this.#t=()=>{this.#t=()=>{},this.#e=null,r()},t.perform()})}#u(e,t,r){let i=this.#c(e,r);i.delegate.proposeVisitIfNavigatedWithAction(i,Vl(r,e,i)),this.#v(e,()=>{i.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let r=Os.fromElement(e).clone(),{visitCachedSnapshot:i}=e.delegate;e.delegate.fetchResponseLoaded=async a=>{if(e.src){let{statusCode:l,redirected:d}=a,m=await a.responseHTML,v={response:{statusCode:l,redirected:d,responseHTML:m},visitCachedSnapshot:i,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(v.action=this.action),Fn.visit(e.src,v)}}}}changeHistory(){if(this.action){let e=XE(this.action);Fn.history.update(e,Ir(this.element.src||""),this.restorationIdentifier)}}async#d(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#m(e.response)}#l(e){this.element.setAttribute("complete","");let t=e.response,r=s(async(a,l)=>{a instanceof Response?this.#m(a):Fn.visit(a,l)},"visit");return!$n("turbo:frame-missing",{target:this.element,detail:{response:t,visit:r},cancelable:!0}).defaultPrevented}#f(e){this.view.missing(),this.#p(e)}#p(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Zv(t)}async#m(e){let t=new Gc(e),r=await t.responseHTML,{location:i,redirected:a,statusCode:l}=t;return Fn.visit(i,{response:{redirected:a,statusCode:l,responseHTML:r}})}#c(e,t){let r=Mm("data-turbo-frame",t,e)||this.element.getAttribute("target");return $E(r)??this.element}async extractForeignFrameElement(e){let t,r=CSS.escape(this.id);try{if(t=VE(e.querySelector(`turbo-frame#${r}`),this.sourceURL),t)return t;if(t=VE(e.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(i){return console.error(i),new Qs}return null}#g(e,t){let r=Xv(e,t);return Na(Ir(r),this.rootLocation)}#h(e,t){let r=Mm("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#g(e,t)||!this.enabled||r=="_top")return!1;if(r){let i=$E(r);if(i)return!i.disabled}return!(!Fn.elementIsNavigatable(e)||t&&!Fn.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#b("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#n}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return Ir(t)}#y(e){return this.#s.has(e)}#b(e,t){this.#s.add(e),t(),this.#s.delete(e)}#v(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function $E(n){if(n!=null){let e=document.getElementById(n);if(e instanceof Qs)return e}}s($E,"getFrameElementById");function VE(n,e){if(n){let t=n.getAttribute("src");if(t!=null&&e!=null&&EB(t,e))throw new Error(`Matching <turbo-frame id="${n.id}"> element has a source URL which references itself`);if(n.ownerDocument!==document&&(n=document.importNode(n,!0)),n instanceof Qs)return n.connectedCallback(),n.disconnectedCallback(),n}}s(VE,"activateElement");var t0={after(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.append(this.templateContent))},before(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.prepend(this.templateContent))},remove(){this.targetElements.forEach(n=>n.remove())},replace(){this.targetElements.forEach(n=>n.replaceWith(this.templateContent))},update(){this.targetElements.forEach(n=>{n.innerHTML="",n.append(this.templateContent)})},refresh(){Fn.refresh(this.baseURI,this.requestId)}},jm=class n extends HTMLElement{static{s(this,"StreamElement")}static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Vc(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),t=[...this.templateContent?.children||[]].filter(r=>!!r.id).map(r=>r.id);return e.filter(r=>t.includes(r.id))}get performAction(){if(this.action){let e=t0[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:n.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},Hm=class extends HTMLElement{static{s(this,"StreamSourceElement")}streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),ef(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),tf(this.streamSource))}get src(){return this.getAttribute("src")||""}};Qs.delegateConstructor=Yv;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Qs);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",jm);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Hm);(()=>{let n=document.currentScript;if(n&&!n.hasAttribute("data-turbo-suppress-warning"))for(n=n.parentElement;n;){if(n==document.body)return console.warn(YE`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,n.outerHTML);n=n.parentElement}})();window.Turbo={...A3,StreamActions:t0};e0();var xS;async function N3(){return xS||_S(R3().then(_S))}s(N3,"getConsumer");function _S(n){return xS=n}s(_S,"setConsumer");async function R3(){let{createConsumer:n}=await Promise.resolve().then(()=>(vS(),bS));return n()}s(R3,"createConsumer");async function wS(n,e){let{subscriptions:t}=await N3();return t.create(n,e)}s(wS,"subscribeTo");function lf(n){return!n||typeof n!="object"||n instanceof Date||n instanceof RegExp?n:Array.isArray(n)?n.map(lf):Object.keys(n).reduce(function(e,t){var r=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(i,a){return"_"+a.toLowerCase()});return e[r]=lf(n[t]),e},{})}s(lf,"walk");var f0=class extends HTMLElement{static{s(this,"TurboCableStreamSourceElement")}async connectedCallback(){ef(this),this.subscription=await wS(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){tf(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:t,...lf({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",f0);function ES(n){if(n.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=n;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:r}}})=>{let i=D3(t.body)?t.body:new URLSearchParams,a=L3(r,i,e);/get/i.test(a)||(/post/i.test(a)?i.delete("_method"):i.set("_method",a),t.method="post")},{once:!0})}}s(ES,"encodeMethodIntoRequestBody");function L3(n,e,t){let r=I3(n),i=e.get("_method"),a=t.getAttribute("method")||"get";return typeof r=="string"?r:typeof i=="string"?i:a}s(L3,"determineFetchMethod");function I3(n){return n instanceof HTMLButtonElement||n instanceof HTMLInputElement?n.name==="_method"?n.value:n.hasAttribute("formmethod")?n.formMethod:null:null}s(I3,"determineFormMethod");function D3(n){return n instanceof FormData||n instanceof URLSearchParams}s(D3,"isBodyInit");window.Turbo=n0;addEventListener("turbo:before-fetch-request",ES);var SS={camelize:function(n){return n.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())},dasherize:function(n){let e=n.replace(/([A-Z])/g,(t,r)=>`-${r.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}},CS=class{static{s(this,"Application")}constructor(){this.controllers={}}start(n){this.window=window,this.document=document,this.connect()}connect(){for(let n in this.controllers)this.window.customElements.define(n,this.controllers[n])}register(n){let e=this.dasherize(n.name.replace("Default",""));this.controllers[e]=n}};Object.assign(CS.prototype,SS);var bn=new CS,on=class extends window.HTMLElement{static{s(this,"Controller")}constructor(){super(),this.element=this,this.descriptorPattern=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/}bindAction(n){n.identifier==this.name&&(n.boundFn=this[n.methodName].bind(this),n.listener=n.eventTarget.addEventListener(n.eventName||this.defaultEventName(n.eventTarget),n.boundFn,!1))}parseAction(n){return n.dataset.action.split(" ").map(this.parseActionDescriptorString(n).bind(this))}parseActionDescriptorString(n){return function(e){let r=e.trim().match(this.descriptorPattern)||[],i=r[1],a=r[2];return a&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${a}`,a=""),{eventTarget:this.parseEventTarget(r[3])||n,eventName:i,eventOptions:r[6]?this.parseEventOptions(r[6]):{},identifier:r[4],methodName:r[5],keyFilter:a}}}parseEventTarget(n){if(n=="window")return window;if(n=="document")return document}parseEventOptions(n){return n.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}defineTargets(){this.constructor.targets!=null&&this.constructor.targets.forEach(this.mapTargets.bind(this))}mapTargets(n){let e=this.querySelectorAll(`[data-${this.name}-target="${n}"]`);this[n+"Targets"]=Array.from(e),this[n+"Target"]=e[0]}defineValues(){if(this.constructor.values==null)return;Object.keys(this.constructor.values).forEach(this.mapValues(this.constructor.values).bind(this))}mapValues(n){return function(e){this[e+"Value"]=this.parseValue(e,n[e])}}parseValue(n,e){let t=this.camelize(`${this.name}-${n}-value`),r=this.dataset[t];if(r!=null)switch(e){case Array:return JSON.parse(r);case Boolean:return!(r=="0"||r=="false");case Number:return Number(r);case Object:return JSON.parse(r);default:return r}}attachActions(){let n=Array.from(this.querySelectorAll("[data-action]"));this.dataset.action&&n.push(this),this.actions=n.flatMap(this.parseAction.bind(this)),this.actions.forEach(this.bindAction.bind(this))}connectedCallback(){this.name=this.dasherize(this.constructor.name).replace("-controller-default","").replace("-controller",""),this.attachActions(),this.defineValues(),this.defineTargets(),this.connect&&this.connect()}disconnectedCallback(){this.disconnect&&this.disconnect()}dasherize(n){let e=n.replace(/([A-Z])/g,(t,r)=>`-${r.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}defaultEventName(n){switch(n.nodeName){case"DETAILS":return"toggle";case"FORM":return"submit";case"INPUT":return n.type.toLowerCase()=="submit"?"click":"input";case"SELECT":return"change";case"TEXTAREA":return"change";default:return"click"}}};Object.assign(on.prototype,SS);var cf=class extends on{static{s(this,"AdminCleaveController")}connect(){let e=this.querySelector("input");e.autocomplete=="cc-number"?this.cc({target:e}):this.cleave({target:e})}cleave(e){let t=parseInt(e.target.value.replaceAll(" ",""));isNaN(t)||(e.target.value=parseInt(t).toLocaleString("en").replaceAll(","," "))}cc(e){let t=e.target.value.replaceAll(" ",""),r=[];for(let i=0;i<t.length;i+=4)r.push(t.slice(i,i+4));e.target.value=r.join(" ")}};var uf=class extends on{static{s(this,"AdminTabController")}connect(){document.querySelectorAll("admin-tab-controller label").forEach(this.setCurrent.bind(this))}mark(e){document.querySelectorAll("admin-tab-controller label").forEach(this.unselect),this.select(e.target)}setCurrent(e){document.getElementById(e.getAttribute("for")).checked?this.select(e):this.unselect(e)}unselect(e){e.classList.add("bg-neutral-200","hover:bg-neutral-300"),e.classList.remove("bg-cyan-200")}select(e){e.classList.remove("bg-neutral-200","hover:bg-neutral-300"),e.classList.add("bg-cyan-200")}};function Ym(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}s(Ym,"assign");var P3={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function h0(n,e){function t(i,a,l){if(!(typeof document>"u")){l=Ym({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var m in l)l[m]&&(d+="; "+m,l[m]!==!0&&(d+="="+l[m].split(";")[0]));return document.cookie=i+"="+n.write(a,i)+d}}s(t,"set");function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var a=document.cookie?document.cookie.split("; "):[],l={},d=0;d<a.length;d++){var m=a[d].split("="),g=m.slice(1).join("=");try{var v=decodeURIComponent(m[0]);if(l[v]=n.read(g,v),i===v)break}catch{}}return i?l[i]:l}}return s(r,"get"),Object.create({set:t,get:r,remove:function(i,a){t(i,"",Ym({},a,{expires:-1}))},withAttributes:function(i){return h0(this.converter,Ym({},this.attributes,i))},withConverter:function(i){return h0(Ym({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}s(h0,"init");var AS=h0(P3,{path:"/"});var df=class extends on{static{s(this,"BackToScopeController")}click(e){let t=this.dataset.resource,r=AS.get(`return_to_${t}_tab`);r&&(e.preventDefault(),window.Turbo.visit(e.target.href+"?scope="+r))}};var ff=class extends on{static{s(this,"BatchActionController")}static targets=["actionbar","all","checkbox"];checkbox(e){this.checkboxTargets.some(this.isChecked)?this.showActions():this.hideActions()}isChecked(e){return e.checked}showActions(){this.actionbarTarget.classList.remove("hidden"),this.allTarget.checked=!0}hideActions(){this.actionbarTarget.classList.add("hidden"),this.allTarget.checked=!1}};var hf=class extends on{static{s(this,"ClickableRowController")}connect(){this.querySelectorAll("[data-link]").forEach(this.addHoverClasses)}addHoverClasses(e){e.classList.add("cursor-pointer","hover:bg-neutral-200")}click(e){if(e.target.tagName=="A"||e.target.tagName=="INPUT")return!0;let t=e.target.closest("tr").dataset.link;e.which==2||e.which==4||e.metaKey||e.ctrlKey?window.open(t,"_blank"):(e.preventDefault(),window.Turbo.visit(t))}};var TS={camelize:function(n){return n.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())},dasherize:function(n){let e=n.replace(/([A-Z])/g,(t,r)=>`-${r.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}},kS=class{static{s(this,"Application")}constructor(){this.controllers={}}start(n){this.window=window,this.document=document,this.connect()}connect(){for(let n in this.controllers)this.window.customElements.define(n,this.controllers[n])}register(n){let e=this.dasherize(n.name.replace("Default",""));this.controllers[e]=n}};Object.assign(kS.prototype,TS);var LZ=new kS,Vn=class extends window.HTMLElement{static{s(this,"Controller")}constructor(){super(),this.element=this,this.descriptorPattern=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/}bindAction(n){n.identifier==this.name&&(n.boundFn=this[n.methodName].bind(this),n.listener=n.eventTarget.addEventListener(n.eventName||this.defaultEventName(n.eventTarget),n.boundFn,!1))}parseAction(n){return n.dataset.action.split(" ").map(this.parseActionDescriptorString(n).bind(this))}parseActionDescriptorString(n){return function(e){let r=e.trim().match(this.descriptorPattern)||[],i=r[1],a=r[2];return a&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${a}`,a=""),{eventTarget:this.parseEventTarget(r[3])||n,eventName:i,eventOptions:r[6]?this.parseEventOptions(r[6]):{},identifier:r[4],methodName:r[5],keyFilter:a}}}parseEventTarget(n){if(n=="window")return window;if(n=="document")return document}parseEventOptions(n){return n.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}defineTargets(){this.constructor.targets!=null&&this.constructor.targets.forEach(this.mapTargets.bind(this))}mapTargets(n){let e=this.querySelectorAll(`[data-${this.name}-target="${n}"]`);this[n+"Targets"]=Array.from(e),this[n+"Target"]=e[0]}defineValues(){if(this.constructor.values==null)return;Object.keys(this.constructor.values).forEach(this.mapValues(this.constructor.values).bind(this))}mapValues(n){return function(e){this[e+"Value"]=this.parseValue(e,n[e])}}parseValue(n,e){let t=this.camelize(`${this.name}-${n}-value`),r=this.dataset[t];if(r!=null)switch(e){case Array:return JSON.parse(r);case Boolean:return!(r=="0"||r=="false");case Number:return Number(r);case Object:return JSON.parse(r);default:return r}}attachActions(){let n=Array.from(this.querySelectorAll("[data-action]"));this.dataset.action&&n.push(this),this.actions=n.flatMap(this.parseAction.bind(this)),this.actions.forEach(this.bindAction.bind(this))}connectedCallback(){this.name=this.dasherize(this.constructor.name).replace("-controller-default","").replace("-controller",""),this.attachActions(),this.defineValues(),this.defineTargets(),this.connect&&this.connect()}disconnectedCallback(){this.disconnect&&this.disconnect()}dasherize(n){let e=n.replace(/([A-Z])/g,(t,r)=>`-${r.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}defaultEventName(n){switch(n.nodeName){case"DETAILS":return"toggle";case"FORM":return"submit";case"INPUT":return n.type.toLowerCase()=="submit"?"click":"input";case"SELECT":return"change";case"TEXTAREA":return"change";default:return"click"}}};Object.assign(Vn.prototype,TS);var mf=class extends Vn{static{s(this,"CommissionCalculatorController")}static targets=["salePrice","commission","vat","totalCommission"];priceChanged(e){let t=this.parseInt(this.salePriceTarget.value),r=Math.round(t*.06);this.commissionTarget.value=this.clamp(r,4e3,6e4),this.cleave(this.commissionTarget),this.updateTotalCommission()}cleave(e){let t=parseInt(e.value.replaceAll(" ",""));isNaN(t)||(e.value=parseInt(t).toLocaleString("en").replaceAll(","," "))}updateTotalCommission(e){let t=this.parseInt(this.commissionTarget.value),r=this.parseFloat(this.vatTarget.value);this.totalCommissionTarget.value=t*r,this.cleave(this.totalCommissionTarget)}updateVat(e){let t=this.parseInt(this.totalCommissionTarget.value),r=this.parseFloat(this.vatTarget.value);this.commissionTarget.value=t/r,this.cleave(this.commissionTarget)}clamp(e,t,r){return Math.min(Math.max(e,t),r)}parseInt(e){return parseInt(e.replaceAll(" ",""))}parseFloat(e){return parseFloat(e.replaceAll(" ",""))}};var Xm=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Pa={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Qm={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Jm=Qm;var Yr=s(function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},"pad"),Hi=s(function(n){return n===!0?1:0},"int");function m0(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}s(m0,"debounce");var ep=s(function(n){return n instanceof Array?n:[n]},"arrayify");function Xr(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}s(Xr,"toggleClass");function Xt(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}s(Xt,"createElement");function pf(n){for(;n.firstChild;)n.removeChild(n.firstChild)}s(pf,"clearNode");function p0(n,e){if(e(n))return n;if(n.parentNode)return p0(n.parentNode,e)}s(p0,"findParent");function gf(n,e){var t=Xt("div","numInputWrapper"),r=Xt("input","numInput "+n),i=Xt("span","arrowUp"),a=Xt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var l in e)r.setAttribute(l,e[l]);return t.appendChild(r),t.appendChild(i),t.appendChild(a),t}s(gf,"createNumberInput");function zi(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}s(zi,"getEventTarget");var g0=s(function(){},"doNothing"),yf=s(function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},"monthToStr"),OS={D:g0,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Hi(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:g0,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:g0,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},zo={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},eu={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[eu.w(n,e,t)]},F:function(n,e,t){return yf(eu.n(n,e,t)-1,!1,e)},G:function(n,e,t){return Yr(eu.h(n,e,t))},H:function(n){return Yr(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Hi(n.getHours()>11)]},M:function(n,e){return yf(n.getMonth(),!0,e)},S:function(n){return Yr(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return Yr(n.getFullYear(),4)},d:function(n){return Yr(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Yr(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return Yr(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}};var y0=s(function(n){var e=n.config,t=e===void 0?Pa:e,r=n.l10n,i=r===void 0?Qm:r,a=n.isMobile,l=a===void 0?!1:a;return function(d,m,g){var v=g||i;return t.formatDate!==void 0&&!l?t.formatDate(d,m,v):m.split("").map(function(_,E,C){return eu[_]&&C[E-1]!=="\\"?eu[_](d,v,t):_!=="\\"?_:""}).join("")}},"createDateFormatter"),tp=s(function(n){var e=n.config,t=e===void 0?Pa:e,r=n.l10n,i=r===void 0?Qm:r;return function(a,l,d,m){if(!(a!==0&&!a)){var g=m||i,v,_=a;if(a instanceof Date)v=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)v=new Date(a);else if(typeof a=="string"){var E=l||(t||Pa).dateFormat,C=String(a).trim();if(C==="today")v=new Date,d=!0;else if(t&&t.parseDate)v=t.parseDate(a,E);else if(/Z$/.test(C)||/GMT$/.test(C))v=new Date(a);else{for(var k=void 0,D=[],O=0,P=0,j="";O<E.length;O++){var W=E[O],Z=W==="\\",ae=E[O-1]==="\\"||Z;if(zo[W]&&!ae){j+=zo[W];var he=new RegExp(j).exec(a);he&&(k=!0)&&D[W!=="Y"?"push":"unshift"]({fn:OS[W],val:he[++P]})}else Z||(j+=".")}v=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),D.forEach(function(fe){var z=fe.fn,se=fe.val;return v=z(v,se,g)||v}),v=k?v:void 0}}if(!(v instanceof Date&&!isNaN(v.getTime()))){t.errorHandler(new Error("Invalid date provided: "+_));return}return d===!0&&v.setHours(0,0,0,0),v}}},"createDateParser");function $i(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}s($i,"compareDates");var NS=s(function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},"isBetween"),np=s(function(n,e,t){return n*3600+e*60+t},"calculateSecondsSinceMidnight"),RS=s(function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},"parseSeconds"),MS={DAY:864e5};function rp(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),a=n.minDate.getMinutes(),l=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<a&&(t=a),e===i&&t===a&&r<l&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var d=n.maxDate.getHours(),m=n.maxDate.getMinutes();e=Math.min(e,d),e===d&&(t=Math.min(m,t)),e===d&&t===m&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}s(rp,"getDefaultHours");typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=s(function(d){d&&Object.keys(d).forEach(function(m){return n[m]=d[m]})},"_loop_1"),i=0,a=e;i<a.length;i++){var l=a[i];r(l)}return n});var Qr=function(){return Qr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Qr.apply(this,arguments)},LS=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],l=0,d=a.length;l<d;l++,i++)r[i]=a[l];return r},B3=300;function q3(n,e){var t={config:Qr(Qr({},Pa),lr.defaultConfig),l10n:Jm};t.parseDate=tp({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=D,t._setHoursFromDate=E,t._positionCalendar=gt,t.changeMonth=ge,t.changeYear=at,t.clear=Ie,t.close=Se,t.onMouseOver=st,t._createElement=Xt,t.createDay=he,t.destroy=Fe,t.isEnabled=lt,t.jumpToDate=j,t.updateValue=En,t.open=nt,t.redraw=ln,t.set=hn,t.setDate=Nt,t.toggle=zt;function r(){t.utils={getDaysInMonth:function(w,S){return w===void 0&&(w=t.currentMonth),S===void 0&&(S=t.currentYear),w===1&&(S%4===0&&S%100!==0||S%400===0)?29:t.l10n.daysInMonth[w]}}}s(r,"setupHelperFunctions");function i(){t.element=t.input=n,t.isOpen=!1,ct(),jt(),yn(),gn(),r(),t.isMobile||ae(),P(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&E(t.config.noCalendar?t.latestSelectedDateObj:void 0),En(!1)),d();var w=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&w&&gt(),Ue("onReady")}s(i,"init");function a(){var w;return((w=t.calendarContainer)===null||w===void 0?void 0:w.getRootNode()).activeElement||document.activeElement}s(a,"getClosestActiveElement");function l(w){return w.bind(t)}s(l,"bindToInstance");function d(){var w=t.config;w.weekNumbers===!1&&w.showMonths===1||w.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var S=(t.days.offsetWidth+1)*w.showMonths;t.daysContainer.style.width=S+"px",t.calendarContainer.style.width=S+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}s(d,"setCalendarWidth");function m(w){if(t.selectedDates.length===0){var S=t.config.minDate===void 0||$i(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),M=rp(t.config);S.setHours(M.hours,M.minutes,M.seconds,S.getMilliseconds()),t.selectedDates=[S],t.latestSelectedDateObj=S}w!==void 0&&w.type!=="blur"&&ss(w);var q=t._input.value;_(),En(),t._input.value!==q&&t._debouncedChange()}s(m,"updateTime");function g(w,S){return w%12+12*Hi(S===t.l10n.amPM[1])}s(g,"ampm2military");function v(w){switch(w%24){case 0:case 12:return 12;default:return w%12}}s(v,"military2ampm");function _(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var w=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,S=(parseInt(t.minuteElement.value,10)||0)%60,M=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(w=g(w,t.amPM.textContent));var q=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&$i(t.latestSelectedDateObj,t.config.minDate,!0)===0,J=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&$i(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var te=np(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Le=np(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),ue=np(w,S,M);if(ue>Le&&ue<te){var Re=RS(te);w=Re[0],S=Re[1],M=Re[2]}}else{if(J){var Y=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;w=Math.min(w,Y.getHours()),w===Y.getHours()&&(S=Math.min(S,Y.getMinutes())),S===Y.getMinutes()&&(M=Math.min(M,Y.getSeconds()))}if(q){var Ee=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;w=Math.max(w,Ee.getHours()),w===Ee.getHours()&&S<Ee.getMinutes()&&(S=Ee.getMinutes()),S===Ee.getMinutes()&&(M=Math.max(M,Ee.getSeconds()))}}C(w,S,M)}}s(_,"setHoursFromInputs");function E(w){var S=w||t.latestSelectedDateObj;S&&S instanceof Date&&C(S.getHours(),S.getMinutes(),S.getSeconds())}s(E,"setHoursFromDate");function C(w,S,M){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(w%24,S,M||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Yr(t.config.time_24hr?w:(12+w)%12+12*Hi(w%12===0)),t.minuteElement.value=Yr(S),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Hi(w>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Yr(M)))}s(C,"setHours");function k(w){var S=zi(w),M=parseInt(S.value)+(w.delta||0);(M/1e3>1||w.key==="Enter"&&!/[^\d]/.test(M.toString()))&&at(M)}s(k,"onYearInput");function D(w,S,M,q){if(S instanceof Array)return S.forEach(function(J){return D(w,J,M,q)});if(w instanceof Array)return w.forEach(function(J){return D(J,S,M,q)});w.addEventListener(S,M,q),t._handlers.push({remove:function(){return w.removeEventListener(S,M,q)}})}s(D,"bind");function O(){Ue("onChange")}s(O,"triggerChange");function P(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(M){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+M+"]"),function(q){return D(q,"click",t[M])})}),t.isMobile){bt();return}var w=m0(Mt,50);if(t._debouncedChange=m0(O,B3),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&D(t.daysContainer,"mouseover",function(M){t.config.mode==="range"&&st(zi(M))}),D(t._input,"keydown",At),t.calendarContainer!==void 0&&D(t.calendarContainer,"keydown",At),!t.config.inline&&!t.config.static&&D(window,"resize",w),window.ontouchstart!==void 0?D(window.document,"touchstart",tt):D(window.document,"mousedown",tt),D(window.document,"focus",tt,{capture:!0}),t.config.clickOpens===!0&&(D(t._input,"focus",t.open),D(t._input,"click",t.open)),t.daysContainer!==void 0&&(D(t.monthNav,"click",xs),D(t.monthNav,["keyup","increment"],k),D(t.daysContainer,"click",Yt)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var S=s(function(M){return zi(M).select()},"selText");D(t.timeContainer,["increment"],m),D(t.timeContainer,"blur",m,{capture:!0}),D(t.timeContainer,"click",W),D([t.hourElement,t.minuteElement],["focus","click"],S),t.secondElement!==void 0&&D(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&D(t.amPM,"click",function(M){m(M)})}t.config.allowInput&&D(t._input,"blur",Ht)}s(P,"bindEvents");function j(w,S){var M=w!==void 0?t.parseDate(w):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),q=t.currentYear,J=t.currentMonth;try{M!==void 0&&(t.currentYear=M.getFullYear(),t.currentMonth=M.getMonth())}catch(te){te.message="Invalid date supplied: "+M,t.config.errorHandler(te)}S&&t.currentYear!==q&&(Ue("onYearChange"),be()),S&&(t.currentYear!==q||t.currentMonth!==J)&&Ue("onMonthChange"),t.redraw()}s(j,"jumpToDate");function W(w){var S=zi(w);~S.className.indexOf("arrow")&&Z(w,S.classList.contains("arrowUp")?1:-1)}s(W,"timeIncrement");function Z(w,S,M){var q=w&&zi(w),J=M||q&&q.parentNode&&q.parentNode.firstChild,te=Et("increment");te.delta=S,J&&J.dispatchEvent(te)}s(Z,"incrementNumInput");function ae(){var w=window.document.createDocumentFragment();if(t.calendarContainer=Xt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(w.appendChild(F()),t.innerContainer=Xt("div","flatpickr-innerContainer"),t.config.weekNumbers){var S=le(),M=S.weekWrapper,q=S.weekNumbers;t.innerContainer.appendChild(M),t.weekNumbers=q,t.weekWrapper=M}t.rContainer=Xt("div","flatpickr-rContainer"),t.rContainer.appendChild(B()),t.daysContainer||(t.daysContainer=Xt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),ne(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),w.appendChild(t.innerContainer)}t.config.enableTime&&w.appendChild(G()),Xr(t.calendarContainer,"rangeMode",t.config.mode==="range"),Xr(t.calendarContainer,"animate",t.config.animate===!0),Xr(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(w);var J=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!J&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var te=Xt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(te,t.element),te.appendChild(t.element),t.altInput&&te.appendChild(t.altInput),te.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}s(ae,"build");function he(w,S,M,q){var J=lt(S,!0),te=Xt("span",w,S.getDate().toString());return te.dateObj=S,te.$i=q,te.setAttribute("aria-label",t.formatDate(S,t.config.ariaDateFormat)),w.indexOf("hidden")===-1&&$i(S,t.now)===0&&(t.todayDateElem=te,te.classList.add("today"),te.setAttribute("aria-current","date")),J?(te.tabIndex=-1,In(S)&&(te.classList.add("selected"),t.selectedDateElem=te,t.config.mode==="range"&&(Xr(te,"startRange",t.selectedDates[0]&&$i(S,t.selectedDates[0],!0)===0),Xr(te,"endRange",t.selectedDates[1]&&$i(S,t.selectedDates[1],!0)===0),w==="nextMonthDay"&&te.classList.add("inRange")))):te.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Fr(S)&&!In(S)&&te.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&w!=="prevMonthDay"&&q%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(S)+"</span>"),Ue("onDayCreate",te),te}s(he,"createDay");function fe(w){w.focus(),t.config.mode==="range"&&st(w)}s(fe,"focusOnDayElem");function z(w){for(var S=w>0?0:t.config.showMonths-1,M=w>0?t.config.showMonths:-1,q=S;q!=M;q+=w)for(var J=t.daysContainer.children[q],te=w>0?0:J.children.length-1,Le=w>0?J.children.length:-1,ue=te;ue!=Le;ue+=w){var Re=J.children[ue];if(Re.className.indexOf("hidden")===-1&&lt(Re.dateObj))return Re}}s(z,"getFirstAvailableDay");function se(w,S){for(var M=w.className.indexOf("Month")===-1?w.dateObj.getMonth():t.currentMonth,q=S>0?t.config.showMonths:-1,J=S>0?1:-1,te=M-t.currentMonth;te!=q;te+=J)for(var Le=t.daysContainer.children[te],ue=M-t.currentMonth===te?w.$i+S:S<0?Le.children.length-1:0,Re=Le.children.length,Y=ue;Y>=0&&Y<Re&&Y!=(S>0?Re:-1);Y+=J){var Ee=Le.children[Y];if(Ee.className.indexOf("hidden")===-1&&lt(Ee.dateObj)&&Math.abs(w.$i-Y)>=Math.abs(S))return fe(Ee)}t.changeMonth(J),Te(z(J),0)}s(se,"getNextAvailableDay");function Te(w,S){var M=a(),q=_t(M||document.body),J=w!==void 0?w:q?M:t.selectedDateElem!==void 0&&_t(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&_t(t.todayDateElem)?t.todayDateElem:z(S>0?1:-1);J===void 0?t._input.focus():q?se(J,S):fe(J)}s(Te,"focusOnDay");function K(w,S){for(var M=(new Date(w,S,1).getDay()-t.l10n.firstDayOfWeek+7)%7,q=t.utils.getDaysInMonth((S-1+12)%12,w),J=t.utils.getDaysInMonth(S,w),te=window.document.createDocumentFragment(),Le=t.config.showMonths>1,ue=Le?"prevMonthDay hidden":"prevMonthDay",Re=Le?"nextMonthDay hidden":"nextMonthDay",Y=q+1-M,Ee=0;Y<=q;Y++,Ee++)te.appendChild(he("flatpickr-day "+ue,new Date(w,S-1,Y),Y,Ee));for(Y=1;Y<=J;Y++,Ee++)te.appendChild(he("flatpickr-day",new Date(w,S,Y),Y,Ee));for(var Je=J+1;Je<=42-M&&(t.config.showMonths===1||Ee%7!==0);Je++,Ee++)te.appendChild(he("flatpickr-day "+Re,new Date(w,S+1,Je%J),Je,Ee));var $t=Xt("div","dayContainer");return $t.appendChild(te),$t}s(K,"buildMonthDays");function ne(){if(t.daysContainer!==void 0){pf(t.daysContainer),t.weekNumbers&&pf(t.weekNumbers);for(var w=document.createDocumentFragment(),S=0;S<t.config.showMonths;S++){var M=new Date(t.currentYear,t.currentMonth,1);M.setMonth(t.currentMonth+S),w.appendChild(K(M.getFullYear(),M.getMonth()))}t.daysContainer.appendChild(w),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&st()}}s(ne,"buildDays");function be(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var w=s(function(q){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&q<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&q>t.config.maxDate.getMonth())},"shouldBuildMonth");t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var S=0;S<12;S++)if(w(S)){var M=Xt("option","flatpickr-monthDropdown-month");M.value=new Date(t.currentYear,S).getMonth().toString(),M.textContent=yf(S,t.config.shorthandCurrentMonth,t.l10n),M.tabIndex=-1,t.currentMonth===S&&(M.selected=!0),t.monthsDropdownContainer.appendChild(M)}}}s(be,"buildMonthSwitch");function de(){var w=Xt("div","flatpickr-month"),S=window.document.createDocumentFragment(),M;t.config.showMonths>1||t.config.monthSelectorType==="static"?M=Xt("span","cur-month"):(t.monthsDropdownContainer=Xt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),D(t.monthsDropdownContainer,"change",function(Le){var ue=zi(Le),Re=parseInt(ue.value,10);t.changeMonth(Re-t.currentMonth),Ue("onMonthChange")}),be(),M=t.monthsDropdownContainer);var q=gf("cur-year",{tabindex:"-1"}),J=q.getElementsByTagName("input")[0];J.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&J.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(J.setAttribute("max",t.config.maxDate.getFullYear().toString()),J.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var te=Xt("div","flatpickr-current-month");return te.appendChild(M),te.appendChild(q),S.appendChild(te),w.appendChild(S),{container:w,yearElement:J,monthElement:M}}s(de,"buildMonth");function Ne(){pf(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var w=t.config.showMonths;w--;){var S=de();t.yearElements.push(S.yearElement),t.monthElements.push(S.monthElement),t.monthNav.appendChild(S.container)}t.monthNav.appendChild(t.nextMonthNav)}s(Ne,"buildMonths");function F(){return t.monthNav=Xt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Xt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Xt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Ne(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(w){t.__hidePrevMonthArrow!==w&&(Xr(t.prevMonthNav,"flatpickr-disabled",w),t.__hidePrevMonthArrow=w)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(w){t.__hideNextMonthArrow!==w&&(Xr(t.nextMonthNav,"flatpickr-disabled",w),t.__hideNextMonthArrow=w)}}),t.currentYearElement=t.yearElements[0],qn(),t.monthNav}s(F,"buildMonthNav");function G(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var w=rp(t.config);t.timeContainer=Xt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var S=Xt("span","flatpickr-time-separator",":"),M=gf("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=M.getElementsByTagName("input")[0];var q=gf("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=q.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Yr(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?w.hours:v(w.hours)),t.minuteElement.value=Yr(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():w.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(M),t.timeContainer.appendChild(S),t.timeContainer.appendChild(q),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var J=gf("flatpickr-second");t.secondElement=J.getElementsByTagName("input")[0],t.secondElement.value=Yr(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():w.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Xt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(J)}return t.config.time_24hr||(t.amPM=Xt("span","flatpickr-am-pm",t.l10n.amPM[Hi((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}s(G,"buildTime");function B(){t.weekdayContainer?pf(t.weekdayContainer):t.weekdayContainer=Xt("div","flatpickr-weekdays");for(var w=t.config.showMonths;w--;){var S=Xt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(S)}return ie(),t.weekdayContainer}s(B,"buildWeekdays");function ie(){if(t.weekdayContainer){var w=t.l10n.firstDayOfWeek,S=LS(t.l10n.weekdays.shorthand);w>0&&w<S.length&&(S=LS(S.splice(w,S.length),S.splice(0,w)));for(var M=t.config.showMonths;M--;)t.weekdayContainer.children[M].innerHTML=`
      <span class='flatpickr-weekday'>
        `+S.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}s(ie,"updateWeekdays");function le(){t.calendarContainer.classList.add("hasWeeks");var w=Xt("div","flatpickr-weekwrapper");w.appendChild(Xt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var S=Xt("div","flatpickr-weeks");return w.appendChild(S),{weekWrapper:w,weekNumbers:S}}s(le,"buildWeeks");function ge(w,S){S===void 0&&(S=!0);var M=S?w:w-t.currentMonth;M<0&&t._hidePrevMonthArrow===!0||M>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=M,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Ue("onYearChange"),be()),ne(),Ue("onMonthChange"),qn())}s(ge,"changeMonth");function Ie(w,S){if(w===void 0&&(w=!0),S===void 0&&(S=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,S===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var M=rp(t.config),q=M.hours,J=M.minutes,te=M.seconds;C(q,J,te)}t.redraw(),w&&Ue("onChange")}s(Ie,"clear");function Se(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Ue("onClose")}s(Se,"close");function Fe(){t.config!==void 0&&Ue("onDestroy");for(var w=t._handlers.length;w--;)t._handlers[w].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var S=t.calendarContainer.parentNode;if(S.lastChild&&S.removeChild(S.lastChild),S.parentNode){for(;S.firstChild;)S.parentNode.insertBefore(S.firstChild,S);S.parentNode.removeChild(S)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(M){try{delete t[M]}catch{}})}s(Fe,"destroy");function it(w){return t.calendarContainer.contains(w)}s(it,"isCalendarElem");function tt(w){if(t.isOpen&&!t.config.inline){var S=zi(w),M=it(S),q=S===t.input||S===t.altInput||t.element.contains(S)||w.path&&w.path.indexOf&&(~w.path.indexOf(t.input)||~w.path.indexOf(t.altInput)),J=!q&&!M&&!it(w.relatedTarget),te=!t.config.ignoredFocusElements.some(function(Le){return Le.contains(S)});J&&te&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&m(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}s(tt,"documentClick");function at(w){if(!(!w||t.config.minDate&&w<t.config.minDate.getFullYear()||t.config.maxDate&&w>t.config.maxDate.getFullYear())){var S=w,M=t.currentYear!==S;t.currentYear=S||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),M&&(t.redraw(),Ue("onYearChange"),be())}}s(at,"changeYear");function lt(w,S){var M;S===void 0&&(S=!0);var q=t.parseDate(w,void 0,S);if(t.config.minDate&&q&&$i(q,t.config.minDate,S!==void 0?S:!t.minDateHasTime)<0||t.config.maxDate&&q&&$i(q,t.config.maxDate,S!==void 0?S:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(q===void 0)return!1;for(var J=!!t.config.enable,te=(M=t.config.enable)!==null&&M!==void 0?M:t.config.disable,Le=0,ue=void 0;Le<te.length;Le++){if(ue=te[Le],typeof ue=="function"&&ue(q))return J;if(ue instanceof Date&&q!==void 0&&ue.getTime()===q.getTime())return J;if(typeof ue=="string"){var Re=t.parseDate(ue,void 0,!0);return Re&&Re.getTime()===q.getTime()?J:!J}else if(typeof ue=="object"&&q!==void 0&&ue.from&&ue.to&&q.getTime()>=ue.from.getTime()&&q.getTime()<=ue.to.getTime())return J}return!J}s(lt,"isEnabled");function _t(w){return t.daysContainer!==void 0?w.className.indexOf("hidden")===-1&&w.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(w):!1}s(_t,"isInView");function Ht(w){var S=w.target===t._input,M=t._input.value.trimEnd()!==Tr();S&&M&&!(w.relatedTarget&&it(w.relatedTarget))&&t.setDate(t._input.value,!0,w.target===t.altInput?t.config.altFormat:t.config.dateFormat)}s(Ht,"onBlur");function At(w){var S=zi(w),M=t.config.wrap?n.contains(S):S===t._input,q=t.config.allowInput,J=t.isOpen&&(!q||!M),te=t.config.inline&&M&&!q;if(w.keyCode===13&&M){if(q)return t.setDate(t._input.value,!0,S===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),S.blur();t.open()}else if(it(S)||J||te){var Le=!!t.timeContainer&&t.timeContainer.contains(S);switch(w.keyCode){case 13:Le?(w.preventDefault(),m(),xn()):Yt(w);break;case 27:w.preventDefault(),xn();break;case 8:case 46:M&&!t.config.allowInput&&(w.preventDefault(),t.clear());break;case 37:case 39:if(!Le&&!M){w.preventDefault();var ue=a();if(t.daysContainer!==void 0&&(q===!1||ue&&_t(ue))){var Re=w.keyCode===39?1:-1;w.ctrlKey?(w.stopPropagation(),ge(Re),Te(z(1),0)):Te(void 0,Re)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:w.preventDefault();var Y=w.keyCode===40?1:-1;t.daysContainer&&S.$i!==void 0||S===t.input||S===t.altInput?w.ctrlKey?(w.stopPropagation(),at(t.currentYear-Y),Te(z(1),0)):Le||Te(void 0,Y*7):S===t.currentYearElement?at(t.currentYear-Y):t.config.enableTime&&(!Le&&t.hourElement&&t.hourElement.focus(),m(w),t._debouncedChange());break;case 9:if(Le){var Ee=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Rt){return Rt}),Je=Ee.indexOf(S);if(Je!==-1){var $t=Ee[Je+(w.shiftKey?-1:1)];w.preventDefault(),($t||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(S)&&w.shiftKey&&(w.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&S===t.amPM)switch(w.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],_(),En();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],_(),En();break}(M||it(S))&&Ue("onKeyDown",w)}s(At,"onKeyDown");function st(w,S){if(S===void 0&&(S="flatpickr-day"),!(t.selectedDates.length!==1||w&&(!w.classList.contains(S)||w.classList.contains("flatpickr-disabled")))){for(var M=w?w.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),q=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),J=Math.min(M,t.selectedDates[0].getTime()),te=Math.max(M,t.selectedDates[0].getTime()),Le=!1,ue=0,Re=0,Y=J;Y<te;Y+=MS.DAY)lt(new Date(Y),!0)||(Le=Le||Y>J&&Y<te,Y<q&&(!ue||Y>ue)?ue=Y:Y>q&&(!Re||Y<Re)&&(Re=Y));var Ee=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+S));Ee.forEach(function(Je){var $t=Je.dateObj,Rt=$t.getTime(),Kt=ue>0&&Rt<ue||Re>0&&Rt>Re;if(Kt){Je.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(nn){Je.classList.remove(nn)});return}else if(Le&&!Kt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(nn){Je.classList.remove(nn)}),w!==void 0&&(w.classList.add(M<=t.selectedDates[0].getTime()?"startRange":"endRange"),q<M&&Rt===q?Je.classList.add("startRange"):q>M&&Rt===q&&Je.classList.add("endRange"),Rt>=ue&&(Re===0||Rt<=Re)&&NS(Rt,q,M)&&Je.classList.add("inRange"))})}}s(st,"onMouseOver");function Mt(){t.isOpen&&!t.config.static&&!t.config.inline&&gt()}s(Mt,"onResize");function nt(w,S){if(S===void 0&&(S=t._positionElement),t.isMobile===!0){if(w){w.preventDefault();var M=zi(w);M&&M.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Ue("onOpen");return}else if(t._input.disabled||t.config.inline)return;var q=t.isOpen;t.isOpen=!0,q||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Ue("onOpen"),gt(S)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(w===void 0||!t.timeContainer.contains(w.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}s(nt,"open");function pt(w){return function(S){var M=t.config["_"+w+"Date"]=t.parseDate(S,t.config.dateFormat),q=t.config["_"+(w==="min"?"max":"min")+"Date"];M!==void 0&&(t[w==="min"?"minDateHasTime":"maxDateHasTime"]=M.getHours()>0||M.getMinutes()>0||M.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(J){return lt(J)}),!t.selectedDates.length&&w==="min"&&E(M),En()),t.daysContainer&&(ln(),M!==void 0?t.currentYearElement[w]=M.getFullYear().toString():t.currentYearElement.removeAttribute(w),t.currentYearElement.disabled=!!q&&M!==void 0&&q.getFullYear()===M.getFullYear())}}s(pt,"minMaxDateSetter");function ct(){var w=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],S=Qr(Qr({},JSON.parse(JSON.stringify(n.dataset||{}))),e),M={};t.config.parseDate=S.parseDate,t.config.formatDate=S.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Ee){t.config._enable=cn(Ee)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Ee){t.config._disable=cn(Ee)}});var q=S.mode==="time";if(!S.dateFormat&&(S.enableTime||q)){var J=lr.defaultConfig.dateFormat||Pa.dateFormat;M.dateFormat=S.noCalendar||q?"H:i"+(S.enableSeconds?":S":""):J+" H:i"+(S.enableSeconds?":S":"")}if(S.altInput&&(S.enableTime||q)&&!S.altFormat){var te=lr.defaultConfig.altFormat||Pa.altFormat;M.altFormat=S.noCalendar||q?"h:i"+(S.enableSeconds?":S K":" K"):te+(" h:i"+(S.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:pt("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:pt("max")});var Le=s(function(Ee){return function(Je){t.config[Ee==="min"?"_minTime":"_maxTime"]=t.parseDate(Je,"H:i:S")}},"minMaxTimeSetter");Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Le("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Le("max")}),S.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,M,S);for(var ue=0;ue<w.length;ue++)t.config[w[ue]]=t.config[w[ue]]===!0||t.config[w[ue]]==="true";Xm.filter(function(Ee){return t.config[Ee]!==void 0}).forEach(function(Ee){t.config[Ee]=ep(t.config[Ee]||[]).map(l)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var ue=0;ue<t.config.plugins.length;ue++){var Re=t.config.plugins[ue](t)||{};for(var Y in Re)Xm.indexOf(Y)>-1?t.config[Y]=ep(Re[Y]).map(l).concat(t.config[Y]):typeof S[Y]>"u"&&(t.config[Y]=Re[Y])}S.altInputClass||(t.config.altInputClass=ut().className+" "+t.config.altInputClass),Ue("onParseConfig")}s(ct,"parseConfig");function ut(){return t.config.wrap?n.querySelector("[data-input]"):n}s(ut,"getInputElem");function jt(){typeof t.config.locale!="object"&&typeof lr.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Qr(Qr({},lr.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?lr.l10ns[t.config.locale]:void 0),zo.D="("+t.l10n.weekdays.shorthand.join("|")+")",zo.l="("+t.l10n.weekdays.longhand.join("|")+")",zo.M="("+t.l10n.months.shorthand.join("|")+")",zo.F="("+t.l10n.months.longhand.join("|")+")",zo.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var w=Qr(Qr({},e),JSON.parse(JSON.stringify(n.dataset||{})));w.time_24hr===void 0&&lr.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=y0(t),t.parseDate=tp({config:t.config,l10n:t.l10n})}s(jt,"setupLocale");function gt(w){if(typeof t.config.position=="function")return void t.config.position(t,w);if(t.calendarContainer!==void 0){Ue("onPreCalendarPosition");var S=w||t._positionElement,M=Array.prototype.reduce.call(t.calendarContainer.children,function(Gr,Di){return Gr+Di.offsetHeight},0),q=t.calendarContainer.offsetWidth,J=t.config.position.split(" "),te=J[0],Le=J.length>1?J[1]:null,ue=S.getBoundingClientRect(),Re=window.innerHeight-ue.bottom,Y=te==="above"||te!=="below"&&Re<M&&ue.top>M,Ee=window.pageYOffset+ue.top+(Y?-M-2:S.offsetHeight+2);if(Xr(t.calendarContainer,"arrowTop",!Y),Xr(t.calendarContainer,"arrowBottom",Y),!t.config.inline){var Je=window.pageXOffset+ue.left,$t=!1,Rt=!1;Le==="center"?(Je-=(q-ue.width)/2,$t=!0):Le==="right"&&(Je-=q-ue.width,Rt=!0),Xr(t.calendarContainer,"arrowLeft",!$t&&!Rt),Xr(t.calendarContainer,"arrowCenter",$t),Xr(t.calendarContainer,"arrowRight",Rt);var Kt=window.document.body.offsetWidth-(window.pageXOffset+ue.right),nn=Je+q>window.document.body.offsetWidth,Hn=Kt+q>window.document.body.offsetWidth;if(Xr(t.calendarContainer,"rightMost",nn),!t.config.static)if(t.calendarContainer.style.top=Ee+"px",!nn)t.calendarContainer.style.left=Je+"px",t.calendarContainer.style.right="auto";else if(!Hn)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Kt+"px";else{var Zn=Vt();if(Zn===void 0)return;var kr=window.document.body.offsetWidth,Li=Math.max(0,kr/2-q/2),mn=".flatpickr-calendar.centerMost:before",Ii=".flatpickr-calendar.centerMost:after",Ur=Zn.cssRules.length,gi="{left:"+ue.left+"px;right:auto;}";Xr(t.calendarContainer,"rightMost",!1),Xr(t.calendarContainer,"centerMost",!0),Zn.insertRule(mn+","+Ii+gi,Ur),t.calendarContainer.style.left=Li+"px",t.calendarContainer.style.right="auto"}}}}s(gt,"positionCalendar");function Vt(){for(var w=null,S=0;S<document.styleSheets.length;S++){var M=document.styleSheets[S];if(M.cssRules){try{M.cssRules}catch{continue}w=M;break}}return w??Zt()}s(Vt,"getDocumentStyleSheet");function Zt(){var w=document.createElement("style");return document.head.appendChild(w),w.sheet}s(Zt,"createStyleSheet");function ln(){t.config.noCalendar||t.isMobile||(be(),qn(),ne())}s(ln,"redraw");function xn(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}s(xn,"focusAndClose");function Yt(w){w.preventDefault(),w.stopPropagation();var S=s(function(Ee){return Ee.classList&&Ee.classList.contains("flatpickr-day")&&!Ee.classList.contains("flatpickr-disabled")&&!Ee.classList.contains("notAllowed")},"isSelectable"),M=p0(zi(w),S);if(M!==void 0){var q=M,J=t.latestSelectedDateObj=new Date(q.dateObj.getTime()),te=(J.getMonth()<t.currentMonth||J.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=q,t.config.mode==="single")t.selectedDates=[J];else if(t.config.mode==="multiple"){var Le=In(J);Le?t.selectedDates.splice(parseInt(Le),1):t.selectedDates.push(J)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=J,t.selectedDates.push(J),$i(J,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Ee,Je){return Ee.getTime()-Je.getTime()}));if(_(),te){var ue=t.currentYear!==J.getFullYear();t.currentYear=J.getFullYear(),t.currentMonth=J.getMonth(),ue&&(Ue("onYearChange"),be()),Ue("onMonthChange")}if(qn(),ne(),En(),!te&&t.config.mode!=="range"&&t.config.showMonths===1?fe(q):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Re=t.config.mode==="single"&&!t.config.enableTime,Y=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Re||Y)&&xn()}O()}}s(Yt,"selectDate");var It={locale:[jt,ie],showMonths:[Ne,d,B],minDate:[j],maxDate:[j],positionElement:[tn],clickOpens:[function(){t.config.clickOpens===!0?(D(t._input,"focus",t.open),D(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function hn(w,S){if(w!==null&&typeof w=="object"){Object.assign(t.config,w);for(var M in w)It[M]!==void 0&&It[M].forEach(function(q){return q()})}else t.config[w]=S,It[w]!==void 0?It[w].forEach(function(q){return q()}):Xm.indexOf(w)>-1&&(t.config[w]=ep(S));t.redraw(),En(!0)}s(hn,"set");function wn(w,S){var M=[];if(w instanceof Array)M=w.map(function(q){return t.parseDate(q,S)});else if(w instanceof Date||typeof w=="number")M=[t.parseDate(w,S)];else if(typeof w=="string")switch(t.config.mode){case"single":case"time":M=[t.parseDate(w,S)];break;case"multiple":M=w.split(t.config.conjunction).map(function(q){return t.parseDate(q,S)});break;case"range":M=w.split(t.l10n.rangeSeparator).map(function(q){return t.parseDate(q,S)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(w)));t.selectedDates=t.config.allowInvalidPreload?M:M.filter(function(q){return q instanceof Date&&lt(q,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(q,J){return q.getTime()-J.getTime()})}s(wn,"setSelectedDate");function Nt(w,S,M){if(S===void 0&&(S=!1),M===void 0&&(M=t.config.dateFormat),w!==0&&!w||w instanceof Array&&w.length===0)return t.clear(S);wn(w,M),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),j(void 0,S),E(),t.selectedDates.length===0&&t.clear(!1),En(S),S&&Ue("onChange")}s(Nt,"setDate");function cn(w){return w.slice().map(function(S){return typeof S=="string"||typeof S=="number"||S instanceof Date?t.parseDate(S,void 0,!0):S&&typeof S=="object"&&S.from&&S.to?{from:t.parseDate(S.from,void 0),to:t.parseDate(S.to,void 0)}:S}).filter(function(S){return S})}s(cn,"parseDateRules");function gn(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var w=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);w&&wn(w,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}s(gn,"setupDates");function yn(){if(t.input=ut(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Xt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),tn()}s(yn,"setupInputs");function tn(){t._positionElement=t.config.positionElement||t._input}s(tn,"updatePositionElement");function bt(){var w=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Xt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=w,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=w==="datetime-local"?"Y-m-d\\TH:i:S":w==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}D(t.mobileInput,"change",function(S){t.setDate(zi(S).value,!1,t.mobileFormatStr),Ue("onChange"),Ue("onClose")})}s(bt,"setupMobile");function zt(w){if(t.isOpen===!0)return t.close();t.open(w)}s(zt,"toggle");function Ue(w,S){if(t.config!==void 0){var M=t.config[w];if(M!==void 0&&M.length>0)for(var q=0;M[q]&&q<M.length;q++)M[q](t.selectedDates,t.input.value,t,S);w==="onChange"&&(t.input.dispatchEvent(Et("change")),t.input.dispatchEvent(Et("input")))}}s(Ue,"triggerEvent");function Et(w){var S=document.createEvent("Event");return S.initEvent(w,!0,!0),S}s(Et,"createEvent");function In(w){for(var S=0;S<t.selectedDates.length;S++){var M=t.selectedDates[S];if(M instanceof Date&&$i(M,w)===0)return""+S}return!1}s(In,"isDateSelected");function Fr(w){return t.config.mode!=="range"||t.selectedDates.length<2?!1:$i(w,t.selectedDates[0])>=0&&$i(w,t.selectedDates[1])<=0}s(Fr,"isDateInRange");function qn(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(w,S){var M=new Date(t.currentYear,t.currentMonth,1);M.setMonth(t.currentMonth+S),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[S].textContent=yf(M.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=M.getMonth().toString(),w.value=M.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}s(qn,"updateNavigationCurrentMonth");function Tr(w){var S=w||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(M){return t.formatDate(M,S)}).filter(function(M,q,J){return t.config.mode!=="range"||t.config.enableTime||J.indexOf(M)===q}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}s(Tr,"getDateStr");function En(w){w===void 0&&(w=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Tr(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Tr(t.config.altFormat)),w!==!1&&Ue("onValueUpdate")}s(En,"updateValue");function xs(w){var S=zi(w),M=t.prevMonthNav.contains(S),q=t.nextMonthNav.contains(S);M||q?ge(M?-1:1):t.yearElements.indexOf(S)>=0?S.select():S.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):S.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}s(xs,"onMonthNavClick");function ss(w){w.preventDefault();var S=w.type==="keydown",M=zi(w),q=M;t.amPM!==void 0&&M===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Hi(t.amPM.textContent===t.l10n.amPM[0])]);var J=parseFloat(q.getAttribute("min")),te=parseFloat(q.getAttribute("max")),Le=parseFloat(q.getAttribute("step")),ue=parseInt(q.value,10),Re=w.delta||(S?w.which===38?1:-1:0),Y=ue+Le*Re;if(typeof q.value<"u"&&q.value.length===2){var Ee=q===t.hourElement,Je=q===t.minuteElement;Y<J?(Y=te+Y+Hi(!Ee)+(Hi(Ee)&&Hi(!t.amPM)),Je&&Z(void 0,-1,t.hourElement)):Y>te&&(Y=q===t.hourElement?Y-te-Hi(!t.amPM):J,Je&&Z(void 0,1,t.hourElement)),t.amPM&&Ee&&(Le===1?Y+ue===23:Math.abs(Y-ue)>Le)&&(t.amPM.textContent=t.l10n.amPM[Hi(t.amPM.textContent===t.l10n.amPM[0])]),q.value=Yr(Y)}}return s(ss,"timeWrapper"),i(),t}s(q3,"FlatpickrInstance");function tu(n,e){for(var t=Array.prototype.slice.call(n).filter(function(l){return l instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var a=t[i];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=q3(a,e||{}),r.push(a._flatpickr)}catch(l){console.error(l)}}return r.length===1?r[0]:r}s(tu,"_flatpickr");typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return tu(this,n)},HTMLElement.prototype.flatpickr=function(n){return tu([this],n)});var lr=s(function(n,e){return typeof n=="string"?tu(window.document.querySelectorAll(n),e):n instanceof Node?tu([n],e):tu(n,e)},"flatpickr");lr.defaultConfig={};lr.l10ns={en:Qr({},Jm),default:Qr({},Jm)};lr.localize=function(n){lr.l10ns.default=Qr(Qr({},lr.l10ns.default),n)};lr.setDefaults=function(n){lr.defaultConfig=Qr(Qr({},lr.defaultConfig),n)};lr.parseDate=tp({});lr.formatDate=y0({});lr.compareDates=$i;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return tu(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=lr);var ip=lr;var bf=class extends on{static{s(this,"DateSelectController")}connect(){this.picker=ip(this.querySelector("input"),{dateFormat:"Y-m-d"})}};var vf=class extends on{static{s(this,"DatetimeSelectController")}connect(){let e={enableTime:!0,time_24hr:!0,defaultMinute:0},t=ip(this.querySelector("input"),Object.assign(e,this.appendage()))}appendage(){return this.dataset.inline?{inline:!0}:{}}};function IS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}s(IS,"ownKeys");function bo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IS(Object(t),!0).forEach(function(r){F3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}s(bo,"_objectSpread2");function up(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?up=s(function(e){return typeof e},"_typeof"):up=s(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),up(n)}s(up,"_typeof");function F3(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(F3,"_defineProperty");function Fa(){return Fa=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fa.apply(this,arguments)}s(Fa,"_extends");function U3(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}s(U3,"_objectWithoutPropertiesLoose");function j3(n,e){if(n==null)return{};var t=U3(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}s(j3,"_objectWithoutProperties");var H3="1.15.6";function $o(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}s($o,"userAgent");var Ua=$o(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_p=$o(/Edge/i),DS=$o(/firefox/i),dp=$o(/safari/i)&&!$o(/chrome/i)&&!$o(/android/i),T0=$o(/iP(ad|od|hone)/i),$S=$o(/chrome/i)&&$o(/android/i),VS={capture:!1,passive:!1};function an(n,e,t){n.addEventListener(e,t,!Ua&&VS)}s(an,"on");function Qt(n,e,t){n.removeEventListener(e,t,!Ua&&VS)}s(Qt,"off");function pp(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}s(pp,"matches");function KS(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}s(KS,"getParentOrHost");function eo(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&pp(n,e):pp(n,e))||r&&n===t)return n;if(n===t)break}while(n=KS(n))}return null}s(eo,"closest");var PS=/\s+/g;function ds(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(PS," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(PS," ")}}s(ds,"toggleClass");function ht(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}s(ht,"css");function ou(n,e){var t="";if(typeof n=="string")t=n;else do{var r=ht(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}s(ou,"matrix");function WS(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,a=r.length;if(t)for(;i<a;i++)t(r[i],i);return r}return[]}s(WS,"find");function Vo(){var n=document.scrollingElement;return n||document.documentElement}s(Vo,"getWindowScrollingElement");function cr(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var a,l,d,m,g,v,_;if(n!==window&&n.parentNode&&n!==Vo()?(a=n.getBoundingClientRect(),l=a.top,d=a.left,m=a.bottom,g=a.right,v=a.height,_=a.width):(l=0,d=0,m=window.innerHeight,g=window.innerWidth,v=window.innerHeight,_=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!Ua))do if(i&&i.getBoundingClientRect&&(ht(i,"transform")!=="none"||t&&ht(i,"position")!=="static")){var E=i.getBoundingClientRect();l-=E.top+parseInt(ht(i,"border-top-width")),d-=E.left+parseInt(ht(i,"border-left-width")),m=l+a.height,g=d+a.width;break}while(i=i.parentNode);if(r&&n!==window){var C=ou(i||n),k=C&&C.a,D=C&&C.d;C&&(l/=D,d/=k,_/=k,v/=D,m=l+v,g=d+_)}return{top:l,left:d,bottom:m,right:g,width:_,height:v}}}s(cr,"getRect");function BS(n,e,t){for(var r=gp(n,!0),i=cr(n)[e];r;){var a=cr(r)[t],l=void 0;if(t==="top"||t==="left"?l=i>=a:l=i<=a,!l)return r;if(r===Vo())break;r=gp(r,!1)}return!1}s(BS,"isScrolledPast");function au(n,e,t,r){for(var i=0,a=0,l=n.children;a<l.length;){if(l[a].style.display!=="none"&&l[a]!==yt.ghost&&(r||l[a]!==yt.dragged)&&eo(l[a],t.draggable,n,!1)){if(i===e)return l[a];i++}a++}return null}s(au,"getChild");function k0(n,e){for(var t=n.lastElementChild;t&&(t===yt.ghost||ht(t,"display")==="none"||e&&!pp(t,e));)t=t.previousElementSibling;return t||null}s(k0,"lastChild");function Ns(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==yt.clone&&(!e||pp(n,e))&&t++;return t}s(Ns,"index");function qS(n){var e=0,t=0,r=Vo();if(n)do{var i=ou(n),a=i.a,l=i.d;e+=n.scrollLeft*a,t+=n.scrollTop*l}while(n!==r&&(n=n.parentNode));return[e,t]}s(qS,"getRelativeScrollOffset");function z3(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}s(z3,"indexOfObject");function gp(n,e){if(!n||!n.getBoundingClientRect)return Vo();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=ht(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Vo();if(r||e)return t;r=!0}}while(t=t.parentNode);return Vo()}s(gp,"getParentAutoScrollElement");function $3(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}s($3,"extend");function b0(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}s(b0,"isRectEqual");var v0;function GS(n,e){return function(){if(!v0){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),v0=setTimeout(function(){v0=void 0},e)}}}s(GS,"throttle");function ZS(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}s(ZS,"scrollBy");function YS(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}s(YS,"clone");function XS(n,e,t){var r={};return Array.from(n.children).forEach(function(i){var a,l,d,m;if(!(!eo(i,e.draggable,n,!1)||i.animated||i===t)){var g=cr(i);r.left=Math.min((a=r.left)!==null&&a!==void 0?a:1/0,g.left),r.top=Math.min((l=r.top)!==null&&l!==void 0?l:1/0,g.top),r.right=Math.max((d=r.right)!==null&&d!==void 0?d:-1/0,g.right),r.bottom=Math.max((m=r.bottom)!==null&&m!==void 0?m:-1/0,g.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}s(XS,"getChildContainingRectFromElement");var Ki="Sortable"+new Date().getTime();function V3(){var n=[],e;return{captureAnimationState:s(function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(ht(i,"display")==="none"||i===yt.ghost)){n.push({target:i,rect:cr(i)});var a=bo({},n[n.length-1].rect);if(i.thisAnimationDuration){var l=ou(i,!0);l&&(a.top-=l.f,a.left-=l.e)}i.fromRect=a}})}},"captureAnimationState"),addAnimationState:s(function(r){n.push(r)},"addAnimationState"),removeAnimationState:s(function(r){n.splice(z3(n,{target:r}),1)},"removeAnimationState"),animateAll:s(function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var a=!1,l=0;n.forEach(function(d){var m=0,g=d.target,v=g.fromRect,_=cr(g),E=g.prevFromRect,C=g.prevToRect,k=d.rect,D=ou(g,!0);D&&(_.top-=D.f,_.left-=D.e),g.toRect=_,g.thisAnimationDuration&&b0(E,_)&&!b0(v,_)&&(k.top-_.top)/(k.left-_.left)===(v.top-_.top)/(v.left-_.left)&&(m=W3(k,E,C,i.options)),b0(_,v)||(g.prevFromRect=v,g.prevToRect=_,m||(m=i.options.animation),i.animate(g,k,_,m)),m&&(a=!0,l=Math.max(l,m),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},m),g.thisAnimationDuration=m)}),clearTimeout(e),a?e=setTimeout(function(){typeof r=="function"&&r()},l):typeof r=="function"&&r(),n=[]},"animateAll"),animate:s(function(r,i,a,l){if(l){ht(r,"transition",""),ht(r,"transform","");var d=ou(this.el),m=d&&d.a,g=d&&d.d,v=(i.left-a.left)/(m||1),_=(i.top-a.top)/(g||1);r.animatingX=!!v,r.animatingY=!!_,ht(r,"transform","translate3d("+v+"px,"+_+"px,0)"),this.forRepaintDummy=K3(r),ht(r,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),ht(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ht(r,"transition",""),ht(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},l)}},"animate")}}s(V3,"AnimationStateManager");function K3(n){return n.offsetWidth}s(K3,"repaint");function W3(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}s(W3,"calculateRealTime");var nu=[],_0={initializeByDefault:!0},Sf={mount:s(function(e){for(var t in _0)_0.hasOwnProperty(t)&&!(t in e)&&(e[t]=_0[t]);nu.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),nu.push(e)},"mount"),pluginEvent:s(function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var a=e+"Global";nu.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][a]&&t[l.pluginName][a](bo({sortable:t},r)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](bo({sortable:t},r)))})},"pluginEvent"),initializePlugins:s(function(e,t,r,i){nu.forEach(function(d){var m=d.pluginName;if(!(!e.options[m]&&!d.initializeByDefault)){var g=new d(e,t,e.options);g.sortable=e,g.options=e.options,e[m]=g,Fa(r,g.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var l=this.modifyOption(e,a,e.options[a]);typeof l<"u"&&(e.options[a]=l)}},"initializePlugins"),getEventProperties:s(function(e,t){var r={};return nu.forEach(function(i){typeof i.eventProperties=="function"&&Fa(r,i.eventProperties.call(t[i.pluginName],e))}),r},"getEventProperties"),modifyOption:s(function(e,t,r){var i;return nu.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(i=a.optionListeners[t].call(e[a.pluginName],r))}),i},"modifyOption")};function G3(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,a=n.cloneEl,l=n.toEl,d=n.fromEl,m=n.oldIndex,g=n.newIndex,v=n.oldDraggableIndex,_=n.newDraggableIndex,E=n.originalEvent,C=n.putSortable,k=n.extraEventProperties;if(e=e||t&&t[Ki],!!e){var D,O=e.options,P="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ua&&!_p?D=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(r,!0,!0)),D.to=l||t,D.from=d||t,D.item=i||t,D.clone=a,D.oldIndex=m,D.newIndex=g,D.oldDraggableIndex=v,D.newDraggableIndex=_,D.originalEvent=E,D.pullMode=C?C.lastPutMode:void 0;var j=bo(bo({},k),Sf.getEventProperties(r,e));for(var W in j)D[W]=j[W];t&&t.dispatchEvent(D),O[P]&&O[P].call(e,D)}}s(G3,"dispatchEvent");var Z3=["evt"],Vi=s(function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,a=j3(r,Z3);Sf.pluginEvent.bind(yt)(e,t,bo({dragEl:Pe,parentEl:Yn,ghostEl:xt,rootEl:Un,nextEl:Xl,lastDownEl:fp,cloneEl:Kn,cloneHidden:qa,dragStarted:_f,putSortable:$r,activeSortable:yt.active,originalEvent:i,oldIndex:su,oldDraggableIndex:xf,newIndex:fs,newDraggableIndex:Ba,hideGhostForTarget:tC,unhideGhostForTarget:nC,cloneNowHidden:s(function(){qa=!0},"cloneNowHidden"),cloneNowShown:s(function(){qa=!1},"cloneNowShown"),dispatchSortableEvent:s(function(d){Ei({sortable:t,name:d,originalEvent:i})},"dispatchSortableEvent")},a))},"pluginEvent");function Ei(n){G3(bo({putSortable:$r,cloneEl:Kn,targetEl:Pe,rootEl:Un,oldIndex:su,oldDraggableIndex:xf,newIndex:fs,newDraggableIndex:Ba},n))}s(Ei,"_dispatchEvent");var Pe,Yn,xt,Un,Xl,fp,Kn,qa,su,fs,xf,Ba,sp,$r,iu=!1,yp=!1,bp=[],Zl,Js,x0,w0,FS,US,_f,ru,wf,Ef=!1,op=!1,hp,Jr,E0=[],C0=!1,vp=[],xp=typeof document<"u",ap=T0,jS=_p||Ua?"cssFloat":"float",Y3=xp&&!$S&&!T0&&"draggable"in document.createElement("div"),QS=function(){if(xp){if(Ua)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),JS=s(function(e,t){var r=ht(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),a=au(e,0,t),l=au(e,1,t),d=a&&ht(a),m=l&&ht(l),g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+cr(a).width,v=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+cr(l).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&d.float&&d.float!=="none"){var _=d.float==="left"?"left":"right";return l&&(m.clear==="both"||m.clear===_)?"vertical":"horizontal"}return a&&(d.display==="block"||d.display==="flex"||d.display==="table"||d.display==="grid"||g>=i&&r[jS]==="none"||l&&r[jS]==="none"&&g+v>i)?"vertical":"horizontal"},"_detectDirection"),X3=s(function(e,t,r){var i=r?e.left:e.top,a=r?e.right:e.bottom,l=r?e.width:e.height,d=r?t.left:t.top,m=r?t.right:t.bottom,g=r?t.width:t.height;return i===d||a===m||i+l/2===d+g/2},"_dragElInRowColumn"),Q3=s(function(e,t){var r;return bp.some(function(i){var a=i[Ki].options.emptyInsertThreshold;if(!(!a||k0(i))){var l=cr(i),d=e>=l.left-a&&e<=l.right+a,m=t>=l.top-a&&t<=l.bottom+a;if(d&&m)return r=i}}),r},"_detectNearestEmptySortable"),eC=s(function(e){function t(a,l){return function(d,m,g,v){var _=d.options.group.name&&m.options.group.name&&d.options.group.name===m.options.group.name;if(a==null&&(l||_))return!0;if(a==null||a===!1)return!1;if(l&&a==="clone")return a;if(typeof a=="function")return t(a(d,m,g,v),l)(d,m,g,v);var E=(l?d:m).options.group.name;return a===!0||typeof a=="string"&&a===E||a.join&&a.indexOf(E)>-1}}s(t,"toFn");var r={},i=e.group;(!i||up(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},"_prepareGroup"),tC=s(function(){!QS&&xt&&ht(xt,"display","none")},"_hideGhostForTarget"),nC=s(function(){!QS&&xt&&ht(xt,"display","")},"_unhideGhostForTarget");xp&&!$S&&document.addEventListener("click",function(n){if(yp)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),yp=!1,!1},!0);var Yl=s(function(e){if(Pe){e=e.touches?e.touches[0]:e;var t=Q3(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[Ki]._onDragOver(r)}}},"nearestEmptyInsertDetectEvent"),J3=s(function(e){Pe&&Pe.parentNode[Ki]._isOutsideThisEl(e.target)},"_checkOutsideTargetEl");function yt(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Fa({},e),n[Ki]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:s(function(){return JS(n,this.options)},"direction"),ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:s(function(l,d){l.setData("Text",d.textContent)},"setData"),dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yt.supportPointer!==!1&&"PointerEvent"in window&&(!dp||T0),emptyInsertThreshold:5};Sf.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);eC(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Y3,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?an(n,"pointerdown",this._onTapStart):(an(n,"mousedown",this._onTapStart),an(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(an(n,"dragover",this),an(n,"dragenter",this)),bp.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Fa(this,V3())}s(yt,"Sortable");yt.prototype={constructor:yt,_isOutsideThisEl:s(function(e){!this.el.contains(e)&&e!==this.el&&(ru=null)},"_isOutsideThisEl"),_getDirection:s(function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,Pe):this.options.direction},"_getDirection"),_onTapStart:s(function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,a=i.preventOnFilter,l=e.type,d=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,m=(d||e).target,g=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||m,v=i.filter;if(aq(r),!Pe&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||i.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&dp&&m&&m.tagName.toUpperCase()==="SELECT")&&(m=eo(m,i.draggable,r,!1),!(m&&m.animated)&&fp!==m)){if(su=Ns(m),xf=Ns(m,i.draggable),typeof v=="function"){if(v.call(this,e,m,this)){Ei({sortable:t,rootEl:g,name:"filter",targetEl:m,toEl:r,fromEl:r}),Vi("filter",t,{evt:e}),a&&e.preventDefault();return}}else if(v&&(v=v.split(",").some(function(_){if(_=eo(g,_.trim(),r,!1),_)return Ei({sortable:t,rootEl:_,name:"filter",targetEl:m,fromEl:r,toEl:r}),Vi("filter",t,{evt:e}),!0}),v)){a&&e.preventDefault();return}i.handle&&!eo(g,i.handle,r,!1)||this._prepareDragStart(e,d,m)}}},"_onTapStart"),_prepareDragStart:s(function(e,t,r){var i=this,a=i.el,l=i.options,d=a.ownerDocument,m;if(r&&!Pe&&r.parentNode===a){var g=cr(r);if(Un=a,Pe=r,Yn=Pe.parentNode,Xl=Pe.nextSibling,fp=r,sp=l.group,yt.dragged=Pe,Zl={target:Pe,clientX:(t||e).clientX,clientY:(t||e).clientY},FS=Zl.clientX-g.left,US=Zl.clientY-g.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Pe.style["will-change"]="all",m=s(function(){if(Vi("delayEnded",i,{evt:e}),yt.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!DS&&i.nativeDraggable&&(Pe.draggable=!0),i._triggerDragStart(e,t),Ei({sortable:i,name:"choose",originalEvent:e}),ds(Pe,l.chosenClass,!0)},"dragStartFn"),l.ignore.split(",").forEach(function(v){WS(Pe,v.trim(),S0)}),an(d,"dragover",Yl),an(d,"mousemove",Yl),an(d,"touchmove",Yl),l.supportPointer?(an(d,"pointerup",i._onDrop),!this.nativeDraggable&&an(d,"pointercancel",i._onDrop)):(an(d,"mouseup",i._onDrop),an(d,"touchend",i._onDrop),an(d,"touchcancel",i._onDrop)),DS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Pe.draggable=!0),Vi("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(_p||Ua))){if(yt.eventCanceled){this._onDrop();return}l.supportPointer?(an(d,"pointerup",i._disableDelayedDrag),an(d,"pointercancel",i._disableDelayedDrag)):(an(d,"mouseup",i._disableDelayedDrag),an(d,"touchend",i._disableDelayedDrag),an(d,"touchcancel",i._disableDelayedDrag)),an(d,"mousemove",i._delayedDragTouchMoveHandler),an(d,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&an(d,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(m,l.delay)}else m()}},"_prepareDragStart"),_delayedDragTouchMoveHandler:s(function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},"_delayedDragTouchMoveHandler"),_disableDelayedDrag:s(function(){Pe&&S0(Pe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},"_disableDelayedDrag"),_disableDelayedDragEvents:s(function(){var e=this.el.ownerDocument;Qt(e,"mouseup",this._disableDelayedDrag),Qt(e,"touchend",this._disableDelayedDrag),Qt(e,"touchcancel",this._disableDelayedDrag),Qt(e,"pointerup",this._disableDelayedDrag),Qt(e,"pointercancel",this._disableDelayedDrag),Qt(e,"mousemove",this._delayedDragTouchMoveHandler),Qt(e,"touchmove",this._delayedDragTouchMoveHandler),Qt(e,"pointermove",this._delayedDragTouchMoveHandler)},"_disableDelayedDragEvents"),_triggerDragStart:s(function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?an(document,"pointermove",this._onTouchMove):t?an(document,"touchmove",this._onTouchMove):an(document,"mousemove",this._onTouchMove):(an(Pe,"dragend",this),an(Un,"dragstart",this._onDragStart));try{document.selection?mp(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},"_triggerDragStart"),_dragStarted:s(function(e,t){if(iu=!1,Un&&Pe){Vi("dragStarted",this,{evt:t}),this.nativeDraggable&&an(document,"dragover",J3);var r=this.options;!e&&ds(Pe,r.dragClass,!1),ds(Pe,r.ghostClass,!0),yt.active=this,e&&this._appendGhost(),Ei({sortable:this,name:"start",originalEvent:t})}else this._nulling()},"_dragStarted"),_emulateDragOver:s(function(){if(Js){this._lastX=Js.clientX,this._lastY=Js.clientY,tC();for(var e=document.elementFromPoint(Js.clientX,Js.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Js.clientX,Js.clientY),e!==t);)t=e;if(Pe.parentNode[Ki]._isOutsideThisEl(e),t)do{if(t[Ki]){var r=void 0;if(r=t[Ki]._onDragOver({clientX:Js.clientX,clientY:Js.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=KS(t));nC()}},"_emulateDragOver"),_onTouchMove:s(function(e){if(Zl){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,a=e.touches?e.touches[0]:e,l=xt&&ou(xt,!0),d=xt&&l&&l.a,m=xt&&l&&l.d,g=ap&&Jr&&qS(Jr),v=(a.clientX-Zl.clientX+i.x)/(d||1)+(g?g[0]-E0[0]:0)/(d||1),_=(a.clientY-Zl.clientY+i.y)/(m||1)+(g?g[1]-E0[1]:0)/(m||1);if(!yt.active&&!iu){if(r&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(xt){l?(l.e+=v-(x0||0),l.f+=_-(w0||0)):l={a:1,b:0,c:0,d:1,e:v,f:_};var E="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");ht(xt,"webkitTransform",E),ht(xt,"mozTransform",E),ht(xt,"msTransform",E),ht(xt,"transform",E),x0=v,w0=_,Js=a}e.cancelable&&e.preventDefault()}},"_onTouchMove"),_appendGhost:s(function(){if(!xt){var e=this.options.fallbackOnBody?document.body:Un,t=cr(Pe,!0,ap,!0,e),r=this.options;if(ap){for(Jr=e;ht(Jr,"position")==="static"&&ht(Jr,"transform")==="none"&&Jr!==document;)Jr=Jr.parentNode;Jr!==document.body&&Jr!==document.documentElement?(Jr===document&&(Jr=Vo()),t.top+=Jr.scrollTop,t.left+=Jr.scrollLeft):Jr=Vo(),E0=qS(Jr)}xt=Pe.cloneNode(!0),ds(xt,r.ghostClass,!1),ds(xt,r.fallbackClass,!0),ds(xt,r.dragClass,!0),ht(xt,"transition",""),ht(xt,"transform",""),ht(xt,"box-sizing","border-box"),ht(xt,"margin",0),ht(xt,"top",t.top),ht(xt,"left",t.left),ht(xt,"width",t.width),ht(xt,"height",t.height),ht(xt,"opacity","0.8"),ht(xt,"position",ap?"absolute":"fixed"),ht(xt,"zIndex","100000"),ht(xt,"pointerEvents","none"),yt.ghost=xt,e.appendChild(xt),ht(xt,"transform-origin",FS/parseInt(xt.style.width)*100+"% "+US/parseInt(xt.style.height)*100+"%")}},"_appendGhost"),_onDragStart:s(function(e,t){var r=this,i=e.dataTransfer,a=r.options;if(Vi("dragStart",this,{evt:e}),yt.eventCanceled){this._onDrop();return}Vi("setupClone",this),yt.eventCanceled||(Kn=YS(Pe),Kn.removeAttribute("id"),Kn.draggable=!1,Kn.style["will-change"]="",this._hideClone(),ds(Kn,this.options.chosenClass,!1),yt.clone=Kn),r.cloneId=mp(function(){Vi("clone",r),!yt.eventCanceled&&(r.options.removeCloneOnHide||Un.insertBefore(Kn,Pe),r._hideClone(),Ei({sortable:r,name:"clone"}))}),!t&&ds(Pe,a.dragClass,!0),t?(yp=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Qt(document,"mouseup",r._onDrop),Qt(document,"touchend",r._onDrop),Qt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(r,i,Pe)),an(document,"drop",r),ht(Pe,"transform","translateZ(0)")),iu=!0,r._dragStartId=mp(r._dragStarted.bind(r,t,e)),an(document,"selectstart",r),_f=!0,window.getSelection().removeAllRanges(),dp&&ht(document.body,"user-select","none")},"_onDragStart"),_onDragOver:s(function(e){var t=this.el,r=e.target,i,a,l,d=this.options,m=d.group,g=yt.active,v=sp===m,_=d.sort,E=$r||g,C,k=this,D=!1;if(C0)return;function O(B,ie){Vi(B,k,bo({evt:e,isOwner:v,axis:C?"vertical":"horizontal",revert:l,dragRect:i,targetRect:a,canSort:_,fromSortable:E,target:r,completed:j,onMove:s(function(ge,Ie){return lp(Un,t,Pe,i,ge,cr(ge),e,Ie)},"onMove"),changed:W},ie))}s(O,"dragOverEvent");function P(){O("dragOverAnimationCapture"),k.captureAnimationState(),k!==E&&E.captureAnimationState()}s(P,"capture");function j(B){return O("dragOverCompleted",{insertion:B}),B&&(v?g._hideClone():g._showClone(k),k!==E&&(ds(Pe,$r?$r.options.ghostClass:g.options.ghostClass,!1),ds(Pe,d.ghostClass,!0)),$r!==k&&k!==yt.active?$r=k:k===yt.active&&$r&&($r=null),E===k&&(k._ignoreWhileAnimating=r),k.animateAll(function(){O("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(r===Pe&&!Pe.animated||r===t&&!r.animated)&&(ru=null),!d.dragoverBubble&&!e.rootEl&&r!==document&&(Pe.parentNode[Ki]._isOutsideThisEl(e.target),!B&&Yl(e)),!d.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),D=!0}s(j,"completed");function W(){fs=Ns(Pe),Ba=Ns(Pe,d.draggable),Ei({sortable:k,name:"change",toEl:t,newIndex:fs,newDraggableIndex:Ba,originalEvent:e})}if(s(W,"changed"),e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=eo(r,d.draggable,t,!0),O("dragOver"),yt.eventCanceled)return D;if(Pe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||k._ignoreWhileAnimating===r)return j(!1);if(yp=!1,g&&!d.disabled&&(v?_||(l=Yn!==Un):$r===this||(this.lastPutMode=sp.checkPull(this,g,Pe,e))&&m.checkPut(this,g,Pe,e))){if(C=this._getDirection(e,r)==="vertical",i=cr(Pe),O("dragOverValid"),yt.eventCanceled)return D;if(l)return Yn=Un,P(),this._hideClone(),O("revert"),yt.eventCanceled||(Xl?Un.insertBefore(Pe,Xl):Un.appendChild(Pe)),j(!0);var Z=k0(t,d.draggable);if(!Z||rq(e,C,this)&&!Z.animated){if(Z===Pe)return j(!1);if(Z&&t===e.target&&(r=Z),r&&(a=cr(r)),lp(Un,t,Pe,i,r,a,e,!!r)!==!1)return P(),Z&&Z.nextSibling?t.insertBefore(Pe,Z.nextSibling):t.appendChild(Pe),Yn=t,W(),j(!0)}else if(Z&&nq(e,C,this)){var ae=au(t,0,d,!0);if(ae===Pe)return j(!1);if(r=ae,a=cr(r),lp(Un,t,Pe,i,r,a,e,!1)!==!1)return P(),t.insertBefore(Pe,ae),Yn=t,W(),j(!0)}else if(r.parentNode===t){a=cr(r);var he=0,fe,z=Pe.parentNode!==t,se=!X3(Pe.animated&&Pe.toRect||i,r.animated&&r.toRect||a,C),Te=C?"top":"left",K=BS(r,"top","top")||BS(Pe,"top","top"),ne=K?K.scrollTop:void 0;ru!==r&&(fe=a[Te],Ef=!1,op=!se&&d.invertSwap||z),he=iq(e,r,a,C,se?1:d.swapThreshold,d.invertedSwapThreshold==null?d.swapThreshold:d.invertedSwapThreshold,op,ru===r);var be;if(he!==0){var de=Ns(Pe);do de-=he,be=Yn.children[de];while(be&&(ht(be,"display")==="none"||be===xt))}if(he===0||be===r)return j(!1);ru=r,wf=he;var Ne=r.nextElementSibling,F=!1;F=he===1;var G=lp(Un,t,Pe,i,r,a,e,F);if(G!==!1)return(G===1||G===-1)&&(F=G===1),C0=!0,setTimeout(tq,30),P(),F&&!Ne?t.appendChild(Pe):r.parentNode.insertBefore(Pe,F?Ne:r),K&&ZS(K,0,ne-K.scrollTop),Yn=Pe.parentNode,fe!==void 0&&!op&&(hp=Math.abs(fe-cr(r)[Te])),W(),j(!0)}if(t.contains(Pe))return j(!1)}return!1},"_onDragOver"),_ignoreWhileAnimating:null,_offMoveEvents:s(function(){Qt(document,"mousemove",this._onTouchMove),Qt(document,"touchmove",this._onTouchMove),Qt(document,"pointermove",this._onTouchMove),Qt(document,"dragover",Yl),Qt(document,"mousemove",Yl),Qt(document,"touchmove",Yl)},"_offMoveEvents"),_offUpEvents:s(function(){var e=this.el.ownerDocument;Qt(e,"mouseup",this._onDrop),Qt(e,"touchend",this._onDrop),Qt(e,"pointerup",this._onDrop),Qt(e,"pointercancel",this._onDrop),Qt(e,"touchcancel",this._onDrop),Qt(document,"selectstart",this)},"_offUpEvents"),_onDrop:s(function(e){var t=this.el,r=this.options;if(fs=Ns(Pe),Ba=Ns(Pe,r.draggable),Vi("drop",this,{evt:e}),Yn=Pe&&Pe.parentNode,fs=Ns(Pe),Ba=Ns(Pe,r.draggable),yt.eventCanceled){this._nulling();return}iu=!1,op=!1,Ef=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),A0(this.cloneId),A0(this._dragStartId),this.nativeDraggable&&(Qt(document,"drop",this),Qt(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),dp&&ht(document.body,"user-select",""),ht(Pe,"transform",""),e&&(_f&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),xt&&xt.parentNode&&xt.parentNode.removeChild(xt),(Un===Yn||$r&&$r.lastPutMode!=="clone")&&Kn&&Kn.parentNode&&Kn.parentNode.removeChild(Kn),Pe&&(this.nativeDraggable&&Qt(Pe,"dragend",this),S0(Pe),Pe.style["will-change"]="",_f&&!iu&&ds(Pe,$r?$r.options.ghostClass:this.options.ghostClass,!1),ds(Pe,this.options.chosenClass,!1),Ei({sortable:this,name:"unchoose",toEl:Yn,newIndex:null,newDraggableIndex:null,originalEvent:e}),Un!==Yn?(fs>=0&&(Ei({rootEl:Yn,name:"add",toEl:Yn,fromEl:Un,originalEvent:e}),Ei({sortable:this,name:"remove",toEl:Yn,originalEvent:e}),Ei({rootEl:Yn,name:"sort",toEl:Yn,fromEl:Un,originalEvent:e}),Ei({sortable:this,name:"sort",toEl:Yn,originalEvent:e})),$r&&$r.save()):fs!==su&&fs>=0&&(Ei({sortable:this,name:"update",toEl:Yn,originalEvent:e}),Ei({sortable:this,name:"sort",toEl:Yn,originalEvent:e})),yt.active&&((fs==null||fs===-1)&&(fs=su,Ba=xf),Ei({sortable:this,name:"end",toEl:Yn,originalEvent:e}),this.save()))),this._nulling()},"_onDrop"),_nulling:s(function(){Vi("nulling",this),Un=Pe=Yn=xt=Xl=Kn=fp=qa=Zl=Js=_f=fs=Ba=su=xf=ru=wf=$r=sp=yt.dragged=yt.ghost=yt.clone=yt.active=null,vp.forEach(function(e){e.checked=!0}),vp.length=x0=w0=0},"_nulling"),handleEvent:s(function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Pe&&(this._onDragOver(e),eq(e));break;case"selectstart":e.preventDefault();break}},"handleEvent"),toArray:s(function(){for(var e=[],t,r=this.el.children,i=0,a=r.length,l=this.options;i<a;i++)t=r[i],eo(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||oq(t));return e},"toArray"),sort:s(function(e,t){var r={},i=this.el;this.toArray().forEach(function(a,l){var d=i.children[l];eo(d,this.options.draggable,i,!1)&&(r[a]=d)},this),t&&this.captureAnimationState(),e.forEach(function(a){r[a]&&(i.removeChild(r[a]),i.appendChild(r[a]))}),t&&this.animateAll()},"sort"),save:s(function(){var e=this.options.store;e&&e.set&&e.set(this)},"save"),closest:s(function(e,t){return eo(e,t||this.options.draggable,this.el,!1)},"closest$1"),option:s(function(e,t){var r=this.options;if(t===void 0)return r[e];var i=Sf.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&eC(r)},"option"),destroy:s(function(){Vi("destroy",this);var e=this.el;e[Ki]=null,Qt(e,"mousedown",this._onTapStart),Qt(e,"touchstart",this._onTapStart),Qt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qt(e,"dragover",this),Qt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bp.splice(bp.indexOf(this.el),1),this.el=e=null},"destroy"),_hideClone:s(function(){if(!qa){if(Vi("hideClone",this),yt.eventCanceled)return;ht(Kn,"display","none"),this.options.removeCloneOnHide&&Kn.parentNode&&Kn.parentNode.removeChild(Kn),qa=!0}},"_hideClone"),_showClone:s(function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(qa){if(Vi("showClone",this),yt.eventCanceled)return;Pe.parentNode==Un&&!this.options.group.revertClone?Un.insertBefore(Kn,Pe):Xl?Un.insertBefore(Kn,Xl):Un.appendChild(Kn),this.options.group.revertClone&&this.animate(Pe,Kn),ht(Kn,"display",""),qa=!1}},"_showClone")};function eq(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}s(eq,"_globalDragOver");function lp(n,e,t,r,i,a,l,d){var m,g=n[Ki],v=g.options.onMove,_;return window.CustomEvent&&!Ua&&!_p?m=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent("move",!0,!0)),m.to=e,m.from=n,m.dragged=t,m.draggedRect=r,m.related=i||e,m.relatedRect=a||cr(e),m.willInsertAfter=d,m.originalEvent=l,n.dispatchEvent(m),v&&(_=v.call(g,m,l)),_}s(lp,"_onMove");function S0(n){n.draggable=!1}s(S0,"_disableDraggable");function tq(){C0=!1}s(tq,"_unsilent");function nq(n,e,t){var r=cr(au(t.el,0,t.options,!0)),i=XS(t.el,t.options,xt),a=10;return e?n.clientX<i.left-a||n.clientY<r.top&&n.clientX<r.right:n.clientY<i.top-a||n.clientY<r.bottom&&n.clientX<r.left}s(nq,"_ghostIsFirst");function rq(n,e,t){var r=cr(k0(t.el,t.options.draggable)),i=XS(t.el,t.options,xt),a=10;return e?n.clientX>i.right+a||n.clientY>r.bottom&&n.clientX>r.left:n.clientY>i.bottom+a||n.clientX>r.right&&n.clientY>r.top}s(rq,"_ghostIsLast");function iq(n,e,t,r,i,a,l,d){var m=r?n.clientY:n.clientX,g=r?t.height:t.width,v=r?t.top:t.left,_=r?t.bottom:t.right,E=!1;if(!l){if(d&&hp<g*i){if(!Ef&&(wf===1?m>v+g*a/2:m<_-g*a/2)&&(Ef=!0),Ef)E=!0;else if(wf===1?m<v+hp:m>_-hp)return-wf}else if(m>v+g*(1-i)/2&&m<_-g*(1-i)/2)return sq(e)}return E=E||l,E&&(m<v+g*a/2||m>_-g*a/2)?m>v+g/2?1:-1:0}s(iq,"_getSwapDirection");function sq(n){return Ns(Pe)<Ns(n)?1:-1}s(sq,"_getInsertDirection");function oq(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}s(oq,"_generateId");function aq(n){vp.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&vp.push(r)}}s(aq,"_saveInputCheckedState");function mp(n){return setTimeout(n,0)}s(mp,"_nextTick");function A0(n){return clearTimeout(n)}s(A0,"_cancelNextTick");xp&&an(document,"touchmove",function(n){(yt.active||iu)&&n.cancelable&&n.preventDefault()});yt.utils={on:an,off:Qt,css:ht,find:WS,is:s(function(e,t){return!!eo(e,t,e,!1)},"is"),extend:$3,throttle:GS,closest:eo,toggleClass:ds,clone:YS,index:Ns,nextTick:mp,cancelNextTick:A0,detectDirection:JS,getChild:au,expando:Ki};yt.get=function(n){return n[Ki]};yt.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(yt.utils=bo(bo({},yt.utils),r.utils)),Sf.mount(r)})};yt.create=function(n,e){return new yt(n,e)};yt.version=H3;var _r=[],cp,HS,lq=!1;var zS;function cq(){_r.forEach(function(n){clearInterval(n.pid)}),_r=[]}s(cq,"clearAutoScrolls");var vY=GS(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,l=e.scrollSensitivity,d=e.scrollSpeed,m=Vo(),g=!1,v;HS!==t&&(HS=t,cq(),cp=e.scroll,v=e.scrollFn,cp===!0&&(cp=gp(t,!0)));var _=0,E=cp;do{var C=E,k=cr(C),D=k.top,O=k.bottom,P=k.left,j=k.right,W=k.width,Z=k.height,ae=void 0,he=void 0,fe=C.scrollWidth,z=C.scrollHeight,se=ht(C),Te=C.scrollLeft,K=C.scrollTop;C===m?(ae=W<fe&&(se.overflowX==="auto"||se.overflowX==="scroll"||se.overflowX==="visible"),he=Z<z&&(se.overflowY==="auto"||se.overflowY==="scroll"||se.overflowY==="visible")):(ae=W<fe&&(se.overflowX==="auto"||se.overflowX==="scroll"),he=Z<z&&(se.overflowY==="auto"||se.overflowY==="scroll"));var ne=ae&&(Math.abs(j-i)<=l&&Te+W<fe)-(Math.abs(P-i)<=l&&!!Te),be=he&&(Math.abs(O-a)<=l&&K+Z<z)-(Math.abs(D-a)<=l&&!!K);if(!_r[_])for(var de=0;de<=_;de++)_r[de]||(_r[de]={});(_r[_].vx!=ne||_r[_].vy!=be||_r[_].el!==C)&&(_r[_].el=C,_r[_].vx=ne,_r[_].vy=be,clearInterval(_r[_].pid),(ne!=0||be!=0)&&(g=!0,_r[_].pid=setInterval(function(){r&&this.layer===0&&yt.active._onTouchMove(zS);var Ne=_r[this.layer].vy?_r[this.layer].vy*d:0,F=_r[this.layer].vx?_r[this.layer].vx*d:0;typeof v=="function"&&v.call(yt.dragged.parentNode[Ki],F,Ne,n,zS,_r[this.layer].el)!=="continue"||ZS(_r[this.layer].el,F,Ne)}.bind({layer:_}),24))),_++}while(e.bubbleScroll&&E!==m&&(E=gp(E,!1)));lq=g}},30),rC=s(function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,a=e.activeSortable,l=e.dispatchSortableEvent,d=e.hideGhostForTarget,m=e.unhideGhostForTarget;if(t){var g=r||a;d();var v=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,_=document.elementFromPoint(v.clientX,v.clientY);m(),g&&!g.el.contains(_)&&(l("spill"),this.onSpill({dragEl:i,putSortable:r}))}},"drop");function iC(){}s(iC,"Revert");iC.prototype={startIndex:null,dragStart:s(function(e){var t=e.oldDraggableIndex;this.startIndex=t},"dragStart"),onSpill:s(function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=au(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},"onSpill"),drop:rC};Fa(iC,{pluginName:"revertOnSpill"});function sC(){}s(sC,"Remove");sC.prototype={onSpill:s(function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},"onSpill"),drop:rC};Fa(sC,{pluginName:"removeOnSpill"});var wp=yt;var Cf=class extends Vn{static{s(this,"DraggableController")}connect(){this.sortable=wp.create(this,{animation:150,draggable:".js-draggable-item",handle:".js-handle",onEnd:this.onReorder.bind(this)})}onReorder(e){document.querySelectorAll(".js-draggable-item").forEach(function(t,r){let i=t.querySelector(".js-position");i.value=r+1})}};var aC=Qn(N0());var Af=class extends on{static{s(this,"GeoSearchController")}static targets=["lat","lng","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,aC.default)(this.fetchData.bind(this),500)}change(e){this.debouncedFetchData(e.target.value)}fetchData(e,t){fetch("https://nominatim.openstreetmap.org/search?"+new URLSearchParams({q:e,format:"jsonv2"})).then(r=>r.json()).then(r=>this.display(r))}buildMarkup(e){return e.map(function(t){return`
        <div>
          <span
            class="block p-2 cursor-pointer hover:bg-neutral-100"
            data-info='${JSON.stringify(t)}'
            data-action="click->geo-search#select"
          >${t.display_name}</span>
        </div>`}).join("")}display(e){this.resultsTarget.innerHTML=this.buildMarkup(e),this.bindNewActions(this.resultsTarget)}bindNewActions(e){Array.from(e.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(e){let t=JSON.parse(e.currentTarget.dataset.info);this.visibleFieldTarget.value=t.name||t.display_name,this.latTarget.value=t.lat,this.lngTarget.value=t.lon,this.resultsTarget.innerHTML=""}};var uC=Qn(cC());var Tf=class extends Vn{static{s(this,"GlobalSearchController")}connect(){this.selectedResult=-1,this.debouncedSubmit=(0,uC.default)(this.submit,500),this.form=this.querySelector("form")}resultsTarget(){return this.querySelector("#global-results")}items(){return this.resultsTarget().querySelectorAll("a")}closeList(){this.selectedResult=-1,this.resultsTarget().innerHTML=""}prevItem(){this.selectedResult=Math.max(this.selectedResult-1,0)}nextItem(){this.selectedResult=Math.min(this.selectedResult+1,this.items().length-1)}markSelectedResult(){this.resultsTarget().innerHTML!=""&&this.items().forEach(this.markAsSelected.bind(this))}markAsSelected(e,t){t==this.selectedResult?(e.classList.add("bg-neutral-100"),e.scrollIntoView({block:"end"})):e.classList.remove("bg-neutral-100")}submit(){this.form.requestSubmit()}selectedLink(){return this.items()[this.selectedResult].href}keydown(e){switch(e.keyCode){case 13:location.href=this.selectedLink();break;case 38:e.preventDefault(),this.prevItem(),this.markSelectedResult();break;case 40:e.preventDefault(),this.nextItem(),this.markSelectedResult();break;case 27:e.preventDefault(),this.closeList();break;default:String.fromCharCode(e.keyCode).match(/(\w|\s)/g)&&this.debouncedSubmit()}}};var kf=class extends on{static{s(this,"HamburgerMenuController")}connect(){this.classList.add("cursor-pointer")}toggle(e){document.getElementById("left-menu").classList.toggle("-translate-x-full"),document.getElementById("main").classList.toggle("blur-sm")}};var Of=class extends on{static{s(this,"ImagePreviewController")}static targets=["container"];preview(e){let t=e.currentTarget.files[0];if(!t.type.startsWith("image/"))return;let r=this.imageElement(t);this.containerTarget.innerHTML="",this.containerTarget.appendChild(r),this.generatePreview(t,r)}generatePreview(e,t){let r=new FileReader;r.onload=function(i){return function(a){i.src=a.target.result}}(t),r.readAsDataURL(e)}imageElement(e){let t=document.createElement("img");return t.file=e,t}};var Ep=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ja={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Sp={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Cp=Sp;var ei=s(function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},"pad"),Wi=s(function(n){return n===!0?1:0},"int");function M0(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}s(M0,"debounce");var Ap=s(function(n){return n instanceof Array?n:[n]},"arrayify");function ti(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}s(ti,"toggleClass");function Jt(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}s(Jt,"createElement");function Nf(n){for(;n.firstChild;)n.removeChild(n.firstChild)}s(Nf,"clearNode");function L0(n,e){if(e(n))return n;if(n.parentNode)return L0(n.parentNode,e)}s(L0,"findParent");function Rf(n,e){var t=Jt("div","numInputWrapper"),r=Jt("input","numInput "+n),i=Jt("span","arrowUp"),a=Jt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var l in e)r.setAttribute(l,e[l]);return t.appendChild(r),t.appendChild(i),t.appendChild(a),t}s(Rf,"createNumberInput");function Gi(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}s(Gi,"getEventTarget");var I0=s(function(){},"doNothing"),Mf=s(function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},"monthToStr"),dC={D:I0,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Wi(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:I0,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:I0,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Ko={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},lu={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[lu.w(n,e,t)]},F:function(n,e,t){return Mf(lu.n(n,e,t)-1,!1,e)},G:function(n,e,t){return ei(lu.h(n,e,t))},H:function(n){return ei(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Wi(n.getHours()>11)]},M:function(n,e){return Mf(n.getMonth(),!0,e)},S:function(n){return ei(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return ei(n.getFullYear(),4)},d:function(n){return ei(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ei(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return ei(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}};var D0=s(function(n){var e=n.config,t=e===void 0?ja:e,r=n.l10n,i=r===void 0?Sp:r,a=n.isMobile,l=a===void 0?!1:a;return function(d,m,g){var v=g||i;return t.formatDate!==void 0&&!l?t.formatDate(d,m,v):m.split("").map(function(_,E,C){return lu[_]&&C[E-1]!=="\\"?lu[_](d,v,t):_!=="\\"?_:""}).join("")}},"createDateFormatter"),Tp=s(function(n){var e=n.config,t=e===void 0?ja:e,r=n.l10n,i=r===void 0?Sp:r;return function(a,l,d,m){if(!(a!==0&&!a)){var g=m||i,v,_=a;if(a instanceof Date)v=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)v=new Date(a);else if(typeof a=="string"){var E=l||(t||ja).dateFormat,C=String(a).trim();if(C==="today")v=new Date,d=!0;else if(t&&t.parseDate)v=t.parseDate(a,E);else if(/Z$/.test(C)||/GMT$/.test(C))v=new Date(a);else{for(var k=void 0,D=[],O=0,P=0,j="";O<E.length;O++){var W=E[O],Z=W==="\\",ae=E[O-1]==="\\"||Z;if(Ko[W]&&!ae){j+=Ko[W];var he=new RegExp(j).exec(a);he&&(k=!0)&&D[W!=="Y"?"push":"unshift"]({fn:dC[W],val:he[++P]})}else Z||(j+=".")}v=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),D.forEach(function(fe){var z=fe.fn,se=fe.val;return v=z(v,se,g)||v}),v=k?v:void 0}}if(!(v instanceof Date&&!isNaN(v.getTime()))){t.errorHandler(new Error("Invalid date provided: "+_));return}return d===!0&&v.setHours(0,0,0,0),v}}},"createDateParser");function Zi(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}s(Zi,"compareDates");var fC=s(function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},"isBetween"),kp=s(function(n,e,t){return n*3600+e*60+t},"calculateSecondsSinceMidnight"),hC=s(function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},"parseSeconds"),mC={DAY:864e5};function Op(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),a=n.minDate.getMinutes(),l=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<a&&(t=a),e===i&&t===a&&r<l&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var d=n.maxDate.getHours(),m=n.maxDate.getMinutes();e=Math.min(e,d),e===d&&(t=Math.min(m,t)),e===d&&t===m&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}s(Op,"getDefaultHours");typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=s(function(d){d&&Object.keys(d).forEach(function(m){return n[m]=d[m]})},"_loop_1"),i=0,a=e;i<a.length;i++){var l=a[i];r(l)}return n});var ni=function(){return ni=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ni.apply(this,arguments)},pC=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],l=0,d=a.length;l<d;l++,i++)r[i]=a[l];return r},uq=300;function dq(n,e){var t={config:ni(ni({},ja),xr.defaultConfig),l10n:Cp};t.parseDate=Tp({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=D,t._setHoursFromDate=E,t._positionCalendar=gt,t.changeMonth=ge,t.changeYear=at,t.clear=Ie,t.close=Se,t.onMouseOver=st,t._createElement=Jt,t.createDay=he,t.destroy=Fe,t.isEnabled=lt,t.jumpToDate=j,t.updateValue=En,t.open=nt,t.redraw=ln,t.set=hn,t.setDate=Nt,t.toggle=zt;function r(){t.utils={getDaysInMonth:function(w,S){return w===void 0&&(w=t.currentMonth),S===void 0&&(S=t.currentYear),w===1&&(S%4===0&&S%100!==0||S%400===0)?29:t.l10n.daysInMonth[w]}}}s(r,"setupHelperFunctions");function i(){t.element=t.input=n,t.isOpen=!1,ct(),jt(),yn(),gn(),r(),t.isMobile||ae(),P(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&E(t.config.noCalendar?t.latestSelectedDateObj:void 0),En(!1)),d();var w=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&w&&gt(),Ue("onReady")}s(i,"init");function a(){var w;return((w=t.calendarContainer)===null||w===void 0?void 0:w.getRootNode()).activeElement||document.activeElement}s(a,"getClosestActiveElement");function l(w){return w.bind(t)}s(l,"bindToInstance");function d(){var w=t.config;w.weekNumbers===!1&&w.showMonths===1||w.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var S=(t.days.offsetWidth+1)*w.showMonths;t.daysContainer.style.width=S+"px",t.calendarContainer.style.width=S+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}s(d,"setCalendarWidth");function m(w){if(t.selectedDates.length===0){var S=t.config.minDate===void 0||Zi(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),M=Op(t.config);S.setHours(M.hours,M.minutes,M.seconds,S.getMilliseconds()),t.selectedDates=[S],t.latestSelectedDateObj=S}w!==void 0&&w.type!=="blur"&&ss(w);var q=t._input.value;_(),En(),t._input.value!==q&&t._debouncedChange()}s(m,"updateTime");function g(w,S){return w%12+12*Wi(S===t.l10n.amPM[1])}s(g,"ampm2military");function v(w){switch(w%24){case 0:case 12:return 12;default:return w%12}}s(v,"military2ampm");function _(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var w=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,S=(parseInt(t.minuteElement.value,10)||0)%60,M=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(w=g(w,t.amPM.textContent));var q=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Zi(t.latestSelectedDateObj,t.config.minDate,!0)===0,J=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Zi(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var te=kp(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Le=kp(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),ue=kp(w,S,M);if(ue>Le&&ue<te){var Re=hC(te);w=Re[0],S=Re[1],M=Re[2]}}else{if(J){var Y=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;w=Math.min(w,Y.getHours()),w===Y.getHours()&&(S=Math.min(S,Y.getMinutes())),S===Y.getMinutes()&&(M=Math.min(M,Y.getSeconds()))}if(q){var Ee=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;w=Math.max(w,Ee.getHours()),w===Ee.getHours()&&S<Ee.getMinutes()&&(S=Ee.getMinutes()),S===Ee.getMinutes()&&(M=Math.max(M,Ee.getSeconds()))}}C(w,S,M)}}s(_,"setHoursFromInputs");function E(w){var S=w||t.latestSelectedDateObj;S&&S instanceof Date&&C(S.getHours(),S.getMinutes(),S.getSeconds())}s(E,"setHoursFromDate");function C(w,S,M){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(w%24,S,M||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=ei(t.config.time_24hr?w:(12+w)%12+12*Wi(w%12===0)),t.minuteElement.value=ei(S),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Wi(w>=12)]),t.secondElement!==void 0&&(t.secondElement.value=ei(M)))}s(C,"setHours");function k(w){var S=Gi(w),M=parseInt(S.value)+(w.delta||0);(M/1e3>1||w.key==="Enter"&&!/[^\d]/.test(M.toString()))&&at(M)}s(k,"onYearInput");function D(w,S,M,q){if(S instanceof Array)return S.forEach(function(J){return D(w,J,M,q)});if(w instanceof Array)return w.forEach(function(J){return D(J,S,M,q)});w.addEventListener(S,M,q),t._handlers.push({remove:function(){return w.removeEventListener(S,M,q)}})}s(D,"bind");function O(){Ue("onChange")}s(O,"triggerChange");function P(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(M){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+M+"]"),function(q){return D(q,"click",t[M])})}),t.isMobile){bt();return}var w=M0(Mt,50);if(t._debouncedChange=M0(O,uq),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&D(t.daysContainer,"mouseover",function(M){t.config.mode==="range"&&st(Gi(M))}),D(t._input,"keydown",At),t.calendarContainer!==void 0&&D(t.calendarContainer,"keydown",At),!t.config.inline&&!t.config.static&&D(window,"resize",w),window.ontouchstart!==void 0?D(window.document,"touchstart",tt):D(window.document,"mousedown",tt),D(window.document,"focus",tt,{capture:!0}),t.config.clickOpens===!0&&(D(t._input,"focus",t.open),D(t._input,"click",t.open)),t.daysContainer!==void 0&&(D(t.monthNav,"click",xs),D(t.monthNav,["keyup","increment"],k),D(t.daysContainer,"click",Yt)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var S=s(function(M){return Gi(M).select()},"selText");D(t.timeContainer,["increment"],m),D(t.timeContainer,"blur",m,{capture:!0}),D(t.timeContainer,"click",W),D([t.hourElement,t.minuteElement],["focus","click"],S),t.secondElement!==void 0&&D(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&D(t.amPM,"click",function(M){m(M)})}t.config.allowInput&&D(t._input,"blur",Ht)}s(P,"bindEvents");function j(w,S){var M=w!==void 0?t.parseDate(w):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),q=t.currentYear,J=t.currentMonth;try{M!==void 0&&(t.currentYear=M.getFullYear(),t.currentMonth=M.getMonth())}catch(te){te.message="Invalid date supplied: "+M,t.config.errorHandler(te)}S&&t.currentYear!==q&&(Ue("onYearChange"),be()),S&&(t.currentYear!==q||t.currentMonth!==J)&&Ue("onMonthChange"),t.redraw()}s(j,"jumpToDate");function W(w){var S=Gi(w);~S.className.indexOf("arrow")&&Z(w,S.classList.contains("arrowUp")?1:-1)}s(W,"timeIncrement");function Z(w,S,M){var q=w&&Gi(w),J=M||q&&q.parentNode&&q.parentNode.firstChild,te=Et("increment");te.delta=S,J&&J.dispatchEvent(te)}s(Z,"incrementNumInput");function ae(){var w=window.document.createDocumentFragment();if(t.calendarContainer=Jt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(w.appendChild(F()),t.innerContainer=Jt("div","flatpickr-innerContainer"),t.config.weekNumbers){var S=le(),M=S.weekWrapper,q=S.weekNumbers;t.innerContainer.appendChild(M),t.weekNumbers=q,t.weekWrapper=M}t.rContainer=Jt("div","flatpickr-rContainer"),t.rContainer.appendChild(B()),t.daysContainer||(t.daysContainer=Jt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),ne(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),w.appendChild(t.innerContainer)}t.config.enableTime&&w.appendChild(G()),ti(t.calendarContainer,"rangeMode",t.config.mode==="range"),ti(t.calendarContainer,"animate",t.config.animate===!0),ti(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(w);var J=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!J&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var te=Jt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(te,t.element),te.appendChild(t.element),t.altInput&&te.appendChild(t.altInput),te.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}s(ae,"build");function he(w,S,M,q){var J=lt(S,!0),te=Jt("span",w,S.getDate().toString());return te.dateObj=S,te.$i=q,te.setAttribute("aria-label",t.formatDate(S,t.config.ariaDateFormat)),w.indexOf("hidden")===-1&&Zi(S,t.now)===0&&(t.todayDateElem=te,te.classList.add("today"),te.setAttribute("aria-current","date")),J?(te.tabIndex=-1,In(S)&&(te.classList.add("selected"),t.selectedDateElem=te,t.config.mode==="range"&&(ti(te,"startRange",t.selectedDates[0]&&Zi(S,t.selectedDates[0],!0)===0),ti(te,"endRange",t.selectedDates[1]&&Zi(S,t.selectedDates[1],!0)===0),w==="nextMonthDay"&&te.classList.add("inRange")))):te.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Fr(S)&&!In(S)&&te.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&w!=="prevMonthDay"&&q%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(S)+"</span>"),Ue("onDayCreate",te),te}s(he,"createDay");function fe(w){w.focus(),t.config.mode==="range"&&st(w)}s(fe,"focusOnDayElem");function z(w){for(var S=w>0?0:t.config.showMonths-1,M=w>0?t.config.showMonths:-1,q=S;q!=M;q+=w)for(var J=t.daysContainer.children[q],te=w>0?0:J.children.length-1,Le=w>0?J.children.length:-1,ue=te;ue!=Le;ue+=w){var Re=J.children[ue];if(Re.className.indexOf("hidden")===-1&&lt(Re.dateObj))return Re}}s(z,"getFirstAvailableDay");function se(w,S){for(var M=w.className.indexOf("Month")===-1?w.dateObj.getMonth():t.currentMonth,q=S>0?t.config.showMonths:-1,J=S>0?1:-1,te=M-t.currentMonth;te!=q;te+=J)for(var Le=t.daysContainer.children[te],ue=M-t.currentMonth===te?w.$i+S:S<0?Le.children.length-1:0,Re=Le.children.length,Y=ue;Y>=0&&Y<Re&&Y!=(S>0?Re:-1);Y+=J){var Ee=Le.children[Y];if(Ee.className.indexOf("hidden")===-1&&lt(Ee.dateObj)&&Math.abs(w.$i-Y)>=Math.abs(S))return fe(Ee)}t.changeMonth(J),Te(z(J),0)}s(se,"getNextAvailableDay");function Te(w,S){var M=a(),q=_t(M||document.body),J=w!==void 0?w:q?M:t.selectedDateElem!==void 0&&_t(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&_t(t.todayDateElem)?t.todayDateElem:z(S>0?1:-1);J===void 0?t._input.focus():q?se(J,S):fe(J)}s(Te,"focusOnDay");function K(w,S){for(var M=(new Date(w,S,1).getDay()-t.l10n.firstDayOfWeek+7)%7,q=t.utils.getDaysInMonth((S-1+12)%12,w),J=t.utils.getDaysInMonth(S,w),te=window.document.createDocumentFragment(),Le=t.config.showMonths>1,ue=Le?"prevMonthDay hidden":"prevMonthDay",Re=Le?"nextMonthDay hidden":"nextMonthDay",Y=q+1-M,Ee=0;Y<=q;Y++,Ee++)te.appendChild(he("flatpickr-day "+ue,new Date(w,S-1,Y),Y,Ee));for(Y=1;Y<=J;Y++,Ee++)te.appendChild(he("flatpickr-day",new Date(w,S,Y),Y,Ee));for(var Je=J+1;Je<=42-M&&(t.config.showMonths===1||Ee%7!==0);Je++,Ee++)te.appendChild(he("flatpickr-day "+Re,new Date(w,S+1,Je%J),Je,Ee));var $t=Jt("div","dayContainer");return $t.appendChild(te),$t}s(K,"buildMonthDays");function ne(){if(t.daysContainer!==void 0){Nf(t.daysContainer),t.weekNumbers&&Nf(t.weekNumbers);for(var w=document.createDocumentFragment(),S=0;S<t.config.showMonths;S++){var M=new Date(t.currentYear,t.currentMonth,1);M.setMonth(t.currentMonth+S),w.appendChild(K(M.getFullYear(),M.getMonth()))}t.daysContainer.appendChild(w),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&st()}}s(ne,"buildDays");function be(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var w=s(function(q){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&q<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&q>t.config.maxDate.getMonth())},"shouldBuildMonth");t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var S=0;S<12;S++)if(w(S)){var M=Jt("option","flatpickr-monthDropdown-month");M.value=new Date(t.currentYear,S).getMonth().toString(),M.textContent=Mf(S,t.config.shorthandCurrentMonth,t.l10n),M.tabIndex=-1,t.currentMonth===S&&(M.selected=!0),t.monthsDropdownContainer.appendChild(M)}}}s(be,"buildMonthSwitch");function de(){var w=Jt("div","flatpickr-month"),S=window.document.createDocumentFragment(),M;t.config.showMonths>1||t.config.monthSelectorType==="static"?M=Jt("span","cur-month"):(t.monthsDropdownContainer=Jt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),D(t.monthsDropdownContainer,"change",function(Le){var ue=Gi(Le),Re=parseInt(ue.value,10);t.changeMonth(Re-t.currentMonth),Ue("onMonthChange")}),be(),M=t.monthsDropdownContainer);var q=Rf("cur-year",{tabindex:"-1"}),J=q.getElementsByTagName("input")[0];J.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&J.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(J.setAttribute("max",t.config.maxDate.getFullYear().toString()),J.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var te=Jt("div","flatpickr-current-month");return te.appendChild(M),te.appendChild(q),S.appendChild(te),w.appendChild(S),{container:w,yearElement:J,monthElement:M}}s(de,"buildMonth");function Ne(){Nf(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var w=t.config.showMonths;w--;){var S=de();t.yearElements.push(S.yearElement),t.monthElements.push(S.monthElement),t.monthNav.appendChild(S.container)}t.monthNav.appendChild(t.nextMonthNav)}s(Ne,"buildMonths");function F(){return t.monthNav=Jt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Jt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Jt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Ne(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(w){t.__hidePrevMonthArrow!==w&&(ti(t.prevMonthNav,"flatpickr-disabled",w),t.__hidePrevMonthArrow=w)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(w){t.__hideNextMonthArrow!==w&&(ti(t.nextMonthNav,"flatpickr-disabled",w),t.__hideNextMonthArrow=w)}}),t.currentYearElement=t.yearElements[0],qn(),t.monthNav}s(F,"buildMonthNav");function G(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var w=Op(t.config);t.timeContainer=Jt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var S=Jt("span","flatpickr-time-separator",":"),M=Rf("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=M.getElementsByTagName("input")[0];var q=Rf("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=q.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=ei(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?w.hours:v(w.hours)),t.minuteElement.value=ei(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():w.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(M),t.timeContainer.appendChild(S),t.timeContainer.appendChild(q),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var J=Rf("flatpickr-second");t.secondElement=J.getElementsByTagName("input")[0],t.secondElement.value=ei(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():w.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Jt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(J)}return t.config.time_24hr||(t.amPM=Jt("span","flatpickr-am-pm",t.l10n.amPM[Wi((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}s(G,"buildTime");function B(){t.weekdayContainer?Nf(t.weekdayContainer):t.weekdayContainer=Jt("div","flatpickr-weekdays");for(var w=t.config.showMonths;w--;){var S=Jt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(S)}return ie(),t.weekdayContainer}s(B,"buildWeekdays");function ie(){if(t.weekdayContainer){var w=t.l10n.firstDayOfWeek,S=pC(t.l10n.weekdays.shorthand);w>0&&w<S.length&&(S=pC(S.splice(w,S.length),S.splice(0,w)));for(var M=t.config.showMonths;M--;)t.weekdayContainer.children[M].innerHTML=`
      <span class='flatpickr-weekday'>
        `+S.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}s(ie,"updateWeekdays");function le(){t.calendarContainer.classList.add("hasWeeks");var w=Jt("div","flatpickr-weekwrapper");w.appendChild(Jt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var S=Jt("div","flatpickr-weeks");return w.appendChild(S),{weekWrapper:w,weekNumbers:S}}s(le,"buildWeeks");function ge(w,S){S===void 0&&(S=!0);var M=S?w:w-t.currentMonth;M<0&&t._hidePrevMonthArrow===!0||M>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=M,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Ue("onYearChange"),be()),ne(),Ue("onMonthChange"),qn())}s(ge,"changeMonth");function Ie(w,S){if(w===void 0&&(w=!0),S===void 0&&(S=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,S===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var M=Op(t.config),q=M.hours,J=M.minutes,te=M.seconds;C(q,J,te)}t.redraw(),w&&Ue("onChange")}s(Ie,"clear");function Se(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Ue("onClose")}s(Se,"close");function Fe(){t.config!==void 0&&Ue("onDestroy");for(var w=t._handlers.length;w--;)t._handlers[w].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var S=t.calendarContainer.parentNode;if(S.lastChild&&S.removeChild(S.lastChild),S.parentNode){for(;S.firstChild;)S.parentNode.insertBefore(S.firstChild,S);S.parentNode.removeChild(S)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(M){try{delete t[M]}catch{}})}s(Fe,"destroy");function it(w){return t.calendarContainer.contains(w)}s(it,"isCalendarElem");function tt(w){if(t.isOpen&&!t.config.inline){var S=Gi(w),M=it(S),q=S===t.input||S===t.altInput||t.element.contains(S)||w.path&&w.path.indexOf&&(~w.path.indexOf(t.input)||~w.path.indexOf(t.altInput)),J=!q&&!M&&!it(w.relatedTarget),te=!t.config.ignoredFocusElements.some(function(Le){return Le.contains(S)});J&&te&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&m(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}s(tt,"documentClick");function at(w){if(!(!w||t.config.minDate&&w<t.config.minDate.getFullYear()||t.config.maxDate&&w>t.config.maxDate.getFullYear())){var S=w,M=t.currentYear!==S;t.currentYear=S||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),M&&(t.redraw(),Ue("onYearChange"),be())}}s(at,"changeYear");function lt(w,S){var M;S===void 0&&(S=!0);var q=t.parseDate(w,void 0,S);if(t.config.minDate&&q&&Zi(q,t.config.minDate,S!==void 0?S:!t.minDateHasTime)<0||t.config.maxDate&&q&&Zi(q,t.config.maxDate,S!==void 0?S:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(q===void 0)return!1;for(var J=!!t.config.enable,te=(M=t.config.enable)!==null&&M!==void 0?M:t.config.disable,Le=0,ue=void 0;Le<te.length;Le++){if(ue=te[Le],typeof ue=="function"&&ue(q))return J;if(ue instanceof Date&&q!==void 0&&ue.getTime()===q.getTime())return J;if(typeof ue=="string"){var Re=t.parseDate(ue,void 0,!0);return Re&&Re.getTime()===q.getTime()?J:!J}else if(typeof ue=="object"&&q!==void 0&&ue.from&&ue.to&&q.getTime()>=ue.from.getTime()&&q.getTime()<=ue.to.getTime())return J}return!J}s(lt,"isEnabled");function _t(w){return t.daysContainer!==void 0?w.className.indexOf("hidden")===-1&&w.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(w):!1}s(_t,"isInView");function Ht(w){var S=w.target===t._input,M=t._input.value.trimEnd()!==Tr();S&&M&&!(w.relatedTarget&&it(w.relatedTarget))&&t.setDate(t._input.value,!0,w.target===t.altInput?t.config.altFormat:t.config.dateFormat)}s(Ht,"onBlur");function At(w){var S=Gi(w),M=t.config.wrap?n.contains(S):S===t._input,q=t.config.allowInput,J=t.isOpen&&(!q||!M),te=t.config.inline&&M&&!q;if(w.keyCode===13&&M){if(q)return t.setDate(t._input.value,!0,S===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),S.blur();t.open()}else if(it(S)||J||te){var Le=!!t.timeContainer&&t.timeContainer.contains(S);switch(w.keyCode){case 13:Le?(w.preventDefault(),m(),xn()):Yt(w);break;case 27:w.preventDefault(),xn();break;case 8:case 46:M&&!t.config.allowInput&&(w.preventDefault(),t.clear());break;case 37:case 39:if(!Le&&!M){w.preventDefault();var ue=a();if(t.daysContainer!==void 0&&(q===!1||ue&&_t(ue))){var Re=w.keyCode===39?1:-1;w.ctrlKey?(w.stopPropagation(),ge(Re),Te(z(1),0)):Te(void 0,Re)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:w.preventDefault();var Y=w.keyCode===40?1:-1;t.daysContainer&&S.$i!==void 0||S===t.input||S===t.altInput?w.ctrlKey?(w.stopPropagation(),at(t.currentYear-Y),Te(z(1),0)):Le||Te(void 0,Y*7):S===t.currentYearElement?at(t.currentYear-Y):t.config.enableTime&&(!Le&&t.hourElement&&t.hourElement.focus(),m(w),t._debouncedChange());break;case 9:if(Le){var Ee=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Rt){return Rt}),Je=Ee.indexOf(S);if(Je!==-1){var $t=Ee[Je+(w.shiftKey?-1:1)];w.preventDefault(),($t||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(S)&&w.shiftKey&&(w.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&S===t.amPM)switch(w.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],_(),En();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],_(),En();break}(M||it(S))&&Ue("onKeyDown",w)}s(At,"onKeyDown");function st(w,S){if(S===void 0&&(S="flatpickr-day"),!(t.selectedDates.length!==1||w&&(!w.classList.contains(S)||w.classList.contains("flatpickr-disabled")))){for(var M=w?w.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),q=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),J=Math.min(M,t.selectedDates[0].getTime()),te=Math.max(M,t.selectedDates[0].getTime()),Le=!1,ue=0,Re=0,Y=J;Y<te;Y+=mC.DAY)lt(new Date(Y),!0)||(Le=Le||Y>J&&Y<te,Y<q&&(!ue||Y>ue)?ue=Y:Y>q&&(!Re||Y<Re)&&(Re=Y));var Ee=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+S));Ee.forEach(function(Je){var $t=Je.dateObj,Rt=$t.getTime(),Kt=ue>0&&Rt<ue||Re>0&&Rt>Re;if(Kt){Je.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(nn){Je.classList.remove(nn)});return}else if(Le&&!Kt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(nn){Je.classList.remove(nn)}),w!==void 0&&(w.classList.add(M<=t.selectedDates[0].getTime()?"startRange":"endRange"),q<M&&Rt===q?Je.classList.add("startRange"):q>M&&Rt===q&&Je.classList.add("endRange"),Rt>=ue&&(Re===0||Rt<=Re)&&fC(Rt,q,M)&&Je.classList.add("inRange"))})}}s(st,"onMouseOver");function Mt(){t.isOpen&&!t.config.static&&!t.config.inline&&gt()}s(Mt,"onResize");function nt(w,S){if(S===void 0&&(S=t._positionElement),t.isMobile===!0){if(w){w.preventDefault();var M=Gi(w);M&&M.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Ue("onOpen");return}else if(t._input.disabled||t.config.inline)return;var q=t.isOpen;t.isOpen=!0,q||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Ue("onOpen"),gt(S)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(w===void 0||!t.timeContainer.contains(w.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}s(nt,"open");function pt(w){return function(S){var M=t.config["_"+w+"Date"]=t.parseDate(S,t.config.dateFormat),q=t.config["_"+(w==="min"?"max":"min")+"Date"];M!==void 0&&(t[w==="min"?"minDateHasTime":"maxDateHasTime"]=M.getHours()>0||M.getMinutes()>0||M.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(J){return lt(J)}),!t.selectedDates.length&&w==="min"&&E(M),En()),t.daysContainer&&(ln(),M!==void 0?t.currentYearElement[w]=M.getFullYear().toString():t.currentYearElement.removeAttribute(w),t.currentYearElement.disabled=!!q&&M!==void 0&&q.getFullYear()===M.getFullYear())}}s(pt,"minMaxDateSetter");function ct(){var w=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],S=ni(ni({},JSON.parse(JSON.stringify(n.dataset||{}))),e),M={};t.config.parseDate=S.parseDate,t.config.formatDate=S.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Ee){t.config._enable=cn(Ee)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Ee){t.config._disable=cn(Ee)}});var q=S.mode==="time";if(!S.dateFormat&&(S.enableTime||q)){var J=xr.defaultConfig.dateFormat||ja.dateFormat;M.dateFormat=S.noCalendar||q?"H:i"+(S.enableSeconds?":S":""):J+" H:i"+(S.enableSeconds?":S":"")}if(S.altInput&&(S.enableTime||q)&&!S.altFormat){var te=xr.defaultConfig.altFormat||ja.altFormat;M.altFormat=S.noCalendar||q?"h:i"+(S.enableSeconds?":S K":" K"):te+(" h:i"+(S.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:pt("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:pt("max")});var Le=s(function(Ee){return function(Je){t.config[Ee==="min"?"_minTime":"_maxTime"]=t.parseDate(Je,"H:i:S")}},"minMaxTimeSetter");Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Le("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Le("max")}),S.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,M,S);for(var ue=0;ue<w.length;ue++)t.config[w[ue]]=t.config[w[ue]]===!0||t.config[w[ue]]==="true";Ep.filter(function(Ee){return t.config[Ee]!==void 0}).forEach(function(Ee){t.config[Ee]=Ap(t.config[Ee]||[]).map(l)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var ue=0;ue<t.config.plugins.length;ue++){var Re=t.config.plugins[ue](t)||{};for(var Y in Re)Ep.indexOf(Y)>-1?t.config[Y]=Ap(Re[Y]).map(l).concat(t.config[Y]):typeof S[Y]>"u"&&(t.config[Y]=Re[Y])}S.altInputClass||(t.config.altInputClass=ut().className+" "+t.config.altInputClass),Ue("onParseConfig")}s(ct,"parseConfig");function ut(){return t.config.wrap?n.querySelector("[data-input]"):n}s(ut,"getInputElem");function jt(){typeof t.config.locale!="object"&&typeof xr.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=ni(ni({},xr.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?xr.l10ns[t.config.locale]:void 0),Ko.D="("+t.l10n.weekdays.shorthand.join("|")+")",Ko.l="("+t.l10n.weekdays.longhand.join("|")+")",Ko.M="("+t.l10n.months.shorthand.join("|")+")",Ko.F="("+t.l10n.months.longhand.join("|")+")",Ko.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var w=ni(ni({},e),JSON.parse(JSON.stringify(n.dataset||{})));w.time_24hr===void 0&&xr.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=D0(t),t.parseDate=Tp({config:t.config,l10n:t.l10n})}s(jt,"setupLocale");function gt(w){if(typeof t.config.position=="function")return void t.config.position(t,w);if(t.calendarContainer!==void 0){Ue("onPreCalendarPosition");var S=w||t._positionElement,M=Array.prototype.reduce.call(t.calendarContainer.children,function(Gr,Di){return Gr+Di.offsetHeight},0),q=t.calendarContainer.offsetWidth,J=t.config.position.split(" "),te=J[0],Le=J.length>1?J[1]:null,ue=S.getBoundingClientRect(),Re=window.innerHeight-ue.bottom,Y=te==="above"||te!=="below"&&Re<M&&ue.top>M,Ee=window.pageYOffset+ue.top+(Y?-M-2:S.offsetHeight+2);if(ti(t.calendarContainer,"arrowTop",!Y),ti(t.calendarContainer,"arrowBottom",Y),!t.config.inline){var Je=window.pageXOffset+ue.left,$t=!1,Rt=!1;Le==="center"?(Je-=(q-ue.width)/2,$t=!0):Le==="right"&&(Je-=q-ue.width,Rt=!0),ti(t.calendarContainer,"arrowLeft",!$t&&!Rt),ti(t.calendarContainer,"arrowCenter",$t),ti(t.calendarContainer,"arrowRight",Rt);var Kt=window.document.body.offsetWidth-(window.pageXOffset+ue.right),nn=Je+q>window.document.body.offsetWidth,Hn=Kt+q>window.document.body.offsetWidth;if(ti(t.calendarContainer,"rightMost",nn),!t.config.static)if(t.calendarContainer.style.top=Ee+"px",!nn)t.calendarContainer.style.left=Je+"px",t.calendarContainer.style.right="auto";else if(!Hn)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Kt+"px";else{var Zn=Vt();if(Zn===void 0)return;var kr=window.document.body.offsetWidth,Li=Math.max(0,kr/2-q/2),mn=".flatpickr-calendar.centerMost:before",Ii=".flatpickr-calendar.centerMost:after",Ur=Zn.cssRules.length,gi="{left:"+ue.left+"px;right:auto;}";ti(t.calendarContainer,"rightMost",!1),ti(t.calendarContainer,"centerMost",!0),Zn.insertRule(mn+","+Ii+gi,Ur),t.calendarContainer.style.left=Li+"px",t.calendarContainer.style.right="auto"}}}}s(gt,"positionCalendar");function Vt(){for(var w=null,S=0;S<document.styleSheets.length;S++){var M=document.styleSheets[S];if(M.cssRules){try{M.cssRules}catch{continue}w=M;break}}return w??Zt()}s(Vt,"getDocumentStyleSheet");function Zt(){var w=document.createElement("style");return document.head.appendChild(w),w.sheet}s(Zt,"createStyleSheet");function ln(){t.config.noCalendar||t.isMobile||(be(),qn(),ne())}s(ln,"redraw");function xn(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}s(xn,"focusAndClose");function Yt(w){w.preventDefault(),w.stopPropagation();var S=s(function(Ee){return Ee.classList&&Ee.classList.contains("flatpickr-day")&&!Ee.classList.contains("flatpickr-disabled")&&!Ee.classList.contains("notAllowed")},"isSelectable"),M=L0(Gi(w),S);if(M!==void 0){var q=M,J=t.latestSelectedDateObj=new Date(q.dateObj.getTime()),te=(J.getMonth()<t.currentMonth||J.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=q,t.config.mode==="single")t.selectedDates=[J];else if(t.config.mode==="multiple"){var Le=In(J);Le?t.selectedDates.splice(parseInt(Le),1):t.selectedDates.push(J)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=J,t.selectedDates.push(J),Zi(J,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Ee,Je){return Ee.getTime()-Je.getTime()}));if(_(),te){var ue=t.currentYear!==J.getFullYear();t.currentYear=J.getFullYear(),t.currentMonth=J.getMonth(),ue&&(Ue("onYearChange"),be()),Ue("onMonthChange")}if(qn(),ne(),En(),!te&&t.config.mode!=="range"&&t.config.showMonths===1?fe(q):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Re=t.config.mode==="single"&&!t.config.enableTime,Y=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Re||Y)&&xn()}O()}}s(Yt,"selectDate");var It={locale:[jt,ie],showMonths:[Ne,d,B],minDate:[j],maxDate:[j],positionElement:[tn],clickOpens:[function(){t.config.clickOpens===!0?(D(t._input,"focus",t.open),D(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function hn(w,S){if(w!==null&&typeof w=="object"){Object.assign(t.config,w);for(var M in w)It[M]!==void 0&&It[M].forEach(function(q){return q()})}else t.config[w]=S,It[w]!==void 0?It[w].forEach(function(q){return q()}):Ep.indexOf(w)>-1&&(t.config[w]=Ap(S));t.redraw(),En(!0)}s(hn,"set");function wn(w,S){var M=[];if(w instanceof Array)M=w.map(function(q){return t.parseDate(q,S)});else if(w instanceof Date||typeof w=="number")M=[t.parseDate(w,S)];else if(typeof w=="string")switch(t.config.mode){case"single":case"time":M=[t.parseDate(w,S)];break;case"multiple":M=w.split(t.config.conjunction).map(function(q){return t.parseDate(q,S)});break;case"range":M=w.split(t.l10n.rangeSeparator).map(function(q){return t.parseDate(q,S)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(w)));t.selectedDates=t.config.allowInvalidPreload?M:M.filter(function(q){return q instanceof Date&&lt(q,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(q,J){return q.getTime()-J.getTime()})}s(wn,"setSelectedDate");function Nt(w,S,M){if(S===void 0&&(S=!1),M===void 0&&(M=t.config.dateFormat),w!==0&&!w||w instanceof Array&&w.length===0)return t.clear(S);wn(w,M),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),j(void 0,S),E(),t.selectedDates.length===0&&t.clear(!1),En(S),S&&Ue("onChange")}s(Nt,"setDate");function cn(w){return w.slice().map(function(S){return typeof S=="string"||typeof S=="number"||S instanceof Date?t.parseDate(S,void 0,!0):S&&typeof S=="object"&&S.from&&S.to?{from:t.parseDate(S.from,void 0),to:t.parseDate(S.to,void 0)}:S}).filter(function(S){return S})}s(cn,"parseDateRules");function gn(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var w=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);w&&wn(w,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}s(gn,"setupDates");function yn(){if(t.input=ut(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Jt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),tn()}s(yn,"setupInputs");function tn(){t._positionElement=t.config.positionElement||t._input}s(tn,"updatePositionElement");function bt(){var w=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Jt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=w,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=w==="datetime-local"?"Y-m-d\\TH:i:S":w==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}D(t.mobileInput,"change",function(S){t.setDate(Gi(S).value,!1,t.mobileFormatStr),Ue("onChange"),Ue("onClose")})}s(bt,"setupMobile");function zt(w){if(t.isOpen===!0)return t.close();t.open(w)}s(zt,"toggle");function Ue(w,S){if(t.config!==void 0){var M=t.config[w];if(M!==void 0&&M.length>0)for(var q=0;M[q]&&q<M.length;q++)M[q](t.selectedDates,t.input.value,t,S);w==="onChange"&&(t.input.dispatchEvent(Et("change")),t.input.dispatchEvent(Et("input")))}}s(Ue,"triggerEvent");function Et(w){var S=document.createEvent("Event");return S.initEvent(w,!0,!0),S}s(Et,"createEvent");function In(w){for(var S=0;S<t.selectedDates.length;S++){var M=t.selectedDates[S];if(M instanceof Date&&Zi(M,w)===0)return""+S}return!1}s(In,"isDateSelected");function Fr(w){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Zi(w,t.selectedDates[0])>=0&&Zi(w,t.selectedDates[1])<=0}s(Fr,"isDateInRange");function qn(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(w,S){var M=new Date(t.currentYear,t.currentMonth,1);M.setMonth(t.currentMonth+S),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[S].textContent=Mf(M.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=M.getMonth().toString(),w.value=M.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}s(qn,"updateNavigationCurrentMonth");function Tr(w){var S=w||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(M){return t.formatDate(M,S)}).filter(function(M,q,J){return t.config.mode!=="range"||t.config.enableTime||J.indexOf(M)===q}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}s(Tr,"getDateStr");function En(w){w===void 0&&(w=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Tr(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Tr(t.config.altFormat)),w!==!1&&Ue("onValueUpdate")}s(En,"updateValue");function xs(w){var S=Gi(w),M=t.prevMonthNav.contains(S),q=t.nextMonthNav.contains(S);M||q?ge(M?-1:1):t.yearElements.indexOf(S)>=0?S.select():S.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):S.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}s(xs,"onMonthNavClick");function ss(w){w.preventDefault();var S=w.type==="keydown",M=Gi(w),q=M;t.amPM!==void 0&&M===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Wi(t.amPM.textContent===t.l10n.amPM[0])]);var J=parseFloat(q.getAttribute("min")),te=parseFloat(q.getAttribute("max")),Le=parseFloat(q.getAttribute("step")),ue=parseInt(q.value,10),Re=w.delta||(S?w.which===38?1:-1:0),Y=ue+Le*Re;if(typeof q.value<"u"&&q.value.length===2){var Ee=q===t.hourElement,Je=q===t.minuteElement;Y<J?(Y=te+Y+Wi(!Ee)+(Wi(Ee)&&Wi(!t.amPM)),Je&&Z(void 0,-1,t.hourElement)):Y>te&&(Y=q===t.hourElement?Y-te-Wi(!t.amPM):J,Je&&Z(void 0,1,t.hourElement)),t.amPM&&Ee&&(Le===1?Y+ue===23:Math.abs(Y-ue)>Le)&&(t.amPM.textContent=t.l10n.amPM[Wi(t.amPM.textContent===t.l10n.amPM[0])]),q.value=ei(Y)}}return s(ss,"timeWrapper"),i(),t}s(dq,"FlatpickrInstance");function cu(n,e){for(var t=Array.prototype.slice.call(n).filter(function(l){return l instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var a=t[i];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=dq(a,e||{}),r.push(a._flatpickr)}catch(l){console.error(l)}}return r.length===1?r[0]:r}s(cu,"_flatpickr");typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return cu(this,n)},HTMLElement.prototype.flatpickr=function(n){return cu([this],n)});var xr=s(function(n,e){return typeof n=="string"?cu(window.document.querySelectorAll(n),e):n instanceof Node?cu([n],e):cu(n,e)},"flatpickr");xr.defaultConfig={};xr.l10ns={en:ni({},Cp),default:ni({},Cp)};xr.localize=function(n){xr.l10ns.default=ni(ni({},xr.l10ns.default),n)};xr.setDefaults=function(n){xr.defaultConfig=ni(ni({},xr.defaultConfig),n)};xr.parseDate=Tp({});xr.formatDate=D0({});xr.compareDates=Zi;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return cu(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=xr);var Lf=class extends Vn{static{s(this,"LeadDialogController")}static targets=["dialog"];openDialog(){this.dialogTarget.showModal()}closeDialog(){this.dialogTarget.close()}};var If=class extends Vn{static{s(this,"LeadEmailSelectController")}connect(){this.emailType=this.querySelector("select"),this.refreshor=this.querySelector("input"),this.emailType.addEventListener("change",this.onChange.bind(this),!1)}onChange(e){this.refreshor.click()}};var Df=class extends Vn{static{s(this,"LeadFiltersController")}static targets=["filter"];connect(){console.log(this.filterTargets)}};var Pf=class extends Vn{static{s(this,"LeadGroupController")}connect(){this.sortable=wp.create(this,{animation:150,group:"lead_groups",onEnd:this.onReorder.bind(this)})}createPatchForm(e){let t="";for(var r in e)t+=`<input type="hidden" name="lead[${r}]" value="${e[r]}">`;let i=`<form><input type="hidden" name="_method" value="PATCH" />${t}</form>`;return new DOMParser().parseFromString(i,"text/html").querySelector("form")}getCookieValue(e){if(e!=null){let r=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(e));if(r){let i=r.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}getMetaContent(e){let t=document.querySelector(`meta[name="${e}"]`);return t&&t.content}async performSubmit(e,t){let r=this.getCookieValue(this.getMetaContent("csrf-param"))||this.getMetaContent("csrf-token"),i=new FormData(e),a=t.replace("lead_","");return fetch(`/admin/my_leads/${a}`,{method:"POST",headers:{Accept:"application/json","X-CSRF-Token":r},body:i})}alertErrorResponse(e){return async function(t){if(t.status==200)window.Turbo.renderStreamMessage(await t.text());else{let r=await t.json();alert(`Ett fel uppstod!
`+r.errors)}}}async onReorder(e){let t=this.createPatchForm({status:e.to.dataset.groupName,position:e.newIndex+1});await this.performSubmit(t,e.item.id).then(this.alertErrorResponse(e.item))}};var Bf=Qn(yC());var qf=class extends Vn{static{s(this,"LeafletController")}connect(){this.markers=JSON.parse(this.dataset.markers),this.markers.length&&(this.initializeMap(),this.addMarkers(),this.setZoomLevel())}initializeMap(){this.map=Bf.default.map(this.firstElementChild),Bf.default.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map)}addMarkers(){this.markers.forEach(this.addMarker.bind(this))}addMarker(e){if(e.c){let t=Bf.default.marker(e.c).addTo(this.map),r=`<a href="${e.e}" target="_blank">${e.n}</a><br><span>${e.l}</span><br>`;t.bindPopup(r)}else Bf.default.marker(e).addTo(this.map)}markerCoordinates(){return this.markers[0].c?this.markers.map(e=>e.c):this.markers}setZoomLevel(){this.markers.length>1?this.map.fitBounds(this.markerCoordinates()):this.map.setView(this.markers[0],7)}};var Ff=class extends Vn{static{s(this,"PastClosedAtController")}onSubmit(e){this.closedAtDate()-Date.now()<=0&&confirm("Vill du verkligen spara auktionen med ett st\xE4ngningsdatum som passerats?")==!1&&e.preventDefault()}closedAtDate(){return Date.parse(document.getElementById("auction_closed_at").value)}};var bC=Qn(N0());var Uf=class extends on{static{s(this,"RelationSearchController")}static targets=["field","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,bC.default)(this.fetchData.bind(this),500)}change(e){this.debouncedFetchData(e.target.value)}fetchData(e,t){fetch("/admin/relations?"+new URLSearchParams({m:this.modelValue,q:e})).then(r=>r.text()).then(r=>this.display(r))}display(e){this.resultsTarget.innerHTML=e,this.bindNewActions(this.resultsTarget)}bindNewActions(e){Array.from(e.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(e){let t=e.currentTarget;this.visibleFieldTarget.value=t.getAttribute("name"),this.fieldTarget.value=t.id,this.resultsTarget.innerHTML=""}};var jf=class extends Vn{static{s(this,"ReserveGuardController")}onSubmit(e){let t=document.getElementById("auction_reserve_price_without_cents");parseInt(t.value.replace(" ",""))<1e5&&confirm("Reserv f\xF6r den h\xE4r auktionen \xE4r l\xE4gre \xE4n 100.000SEK. Vill du fortfarande spara?")==!1&&e.preventDefault()}};var fq=typeof global=="object"&&global&&global.Object===Object&&global,Rp=fq;var hq=typeof self=="object"&&self&&self.Object===Object&&self,mq=Rp||hq||Function("return this")(),ur=mq;var pq=ur.Symbol,Rs=pq;var vC=Object.prototype,gq=vC.hasOwnProperty,yq=vC.toString,Hf=Rs?Rs.toStringTag:void 0;function bq(n){var e=gq.call(n,Hf),t=n[Hf];try{n[Hf]=void 0;var r=!0}catch{}var i=yq.call(n);return r&&(e?n[Hf]=t:delete n[Hf]),i}s(bq,"getRawTag");var _C=bq;var vq=Object.prototype,_q=vq.toString;function xq(n){return _q.call(n)}s(xq,"objectToString");var xC=xq;var wq="[object Null]",Eq="[object Undefined]",wC=Rs?Rs.toStringTag:void 0;function Sq(n){return n==null?n===void 0?Eq:wq:wC&&wC in Object(n)?_C(n):xC(n)}s(Sq,"baseGetTag");var to=Sq;function Cq(n){return n!=null&&typeof n=="object"}s(Cq,"isObjectLike");var Vr=Cq;var Aq=Array.isArray,Ms=Aq;function Tq(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}s(Tq,"isObject");var ri=Tq;function kq(n){return n}s(kq,"identity");var Mp=kq;var Oq="[object AsyncFunction]",Nq="[object Function]",Rq="[object GeneratorFunction]",Mq="[object Proxy]";function Lq(n){if(!ri(n))return!1;var e=to(n);return e==Nq||e==Rq||e==Oq||e==Mq}s(Lq,"isFunction");var uu=Lq;var Iq=ur["__core-js_shared__"],Lp=Iq;var EC=function(){var n=/[^.]+$/.exec(Lp&&Lp.keys&&Lp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Dq(n){return!!EC&&EC in n}s(Dq,"isMasked");var SC=Dq;var Pq=Function.prototype,Bq=Pq.toString;function qq(n){if(n!=null){try{return Bq.call(n)}catch{}try{return n+""}catch{}}return""}s(qq,"toSource");var Wo=qq;var Fq=/[\\^$.*+?()[\]{}|]/g,Uq=/^\[object .+?Constructor\]$/,jq=Function.prototype,Hq=Object.prototype,zq=jq.toString,$q=Hq.hasOwnProperty,Vq=RegExp("^"+zq.call($q).replace(Fq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kq(n){if(!ri(n)||SC(n))return!1;var e=uu(n)?Vq:Uq;return e.test(Wo(n))}s(Kq,"baseIsNative");var CC=Kq;function Wq(n,e){return n?.[e]}s(Wq,"getValue");var AC=Wq;function Gq(n,e){var t=AC(n,e);return CC(t)?t:void 0}s(Gq,"getNative");var Yi=Gq;var Zq=Yi(ur,"WeakMap"),Ip=Zq;var TC=Object.create,Yq=function(){function n(){}return s(n,"object"),function(e){if(!ri(e))return{};if(TC)return TC(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),kC=Yq;function Xq(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}s(Xq,"apply");var OC=Xq;function Qq(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}s(Qq,"copyArray");var Dp=Qq;var Jq=800,eF=16,tF=Date.now;function nF(n){var e=0,t=0;return function(){var r=tF(),i=eF-(r-t);if(t=r,i>0){if(++e>=Jq)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}s(nF,"shortOut");var NC=nF;function rF(n){return function(){return n}}s(rF,"constant");var RC=rF;var iF=function(){try{var n=Yi(Object,"defineProperty");return n({},"",{}),n}catch{}}(),du=iF;var sF=du?function(n,e){return du(n,"toString",{configurable:!0,enumerable:!1,value:RC(e),writable:!0})}:Mp,MC=sF;var oF=NC(MC),LC=oF;function aF(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}s(aF,"arrayEach");var IC=aF;var lF=9007199254740991,cF=/^(?:0|[1-9]\d*)$/;function uF(n,e){var t=typeof n;return e=e??lF,!!e&&(t=="number"||t!="symbol"&&cF.test(n))&&n>-1&&n%1==0&&n<e}s(uF,"isIndex");var Pp=uF;function dF(n,e,t){e=="__proto__"&&du?du(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}s(dF,"baseAssignValue");var fu=dF;function fF(n,e){return n===e||n!==n&&e!==e}s(fF,"eq");var vo=fF;var hF=Object.prototype,mF=hF.hasOwnProperty;function pF(n,e,t){var r=n[e];(!(mF.call(n,e)&&vo(r,t))||t===void 0&&!(e in n))&&fu(n,e,t)}s(pF,"assignValue");var Bp=pF;function gF(n,e,t,r){var i=!t;t||(t={});for(var a=-1,l=e.length;++a<l;){var d=e[a],m=r?r(t[d],n[d],d,t,n):void 0;m===void 0&&(m=n[d]),i?fu(t,d,m):Bp(t,d,m)}return t}s(gF,"copyObject");var _o=gF;var DC=Math.max;function yF(n,e,t){return e=DC(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,a=DC(r.length-e,0),l=Array(a);++i<a;)l[i]=r[e+i];i=-1;for(var d=Array(e+1);++i<e;)d[i]=r[i];return d[e]=t(l),OC(n,this,d)}}s(yF,"overRest");var PC=yF;function bF(n,e){return LC(PC(n,e,Mp),n+"")}s(bF,"baseRest");var BC=bF;var vF=9007199254740991;function _F(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=vF}s(_F,"isLength");var qp=_F;function xF(n){return n!=null&&qp(n.length)&&!uu(n)}s(xF,"isArrayLike");var Ha=xF;function wF(n,e,t){if(!ri(t))return!1;var r=typeof e;return(r=="number"?Ha(t)&&Pp(e,t.length):r=="string"&&e in t)?vo(t[e],n):!1}s(wF,"isIterateeCall");var qC=wF;function EF(n){return BC(function(e,t){var r=-1,i=t.length,a=i>1?t[i-1]:void 0,l=i>2?t[2]:void 0;for(a=n.length>3&&typeof a=="function"?(i--,a):void 0,l&&qC(t[0],t[1],l)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var d=t[r];d&&n(e,d,r,a)}return e})}s(EF,"createAssigner");var FC=EF;var SF=Object.prototype;function CF(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||SF;return n===t}s(CF,"isPrototype");var hu=CF;function AF(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}s(AF,"baseTimes");var UC=AF;var TF="[object Arguments]";function kF(n){return Vr(n)&&to(n)==TF}s(kF,"baseIsArguments");var P0=kF;var jC=Object.prototype,OF=jC.hasOwnProperty,NF=jC.propertyIsEnumerable,RF=P0(function(){return arguments}())?P0:function(n){return Vr(n)&&OF.call(n,"callee")&&!NF.call(n,"callee")},zf=RF;function MF(){return!1}s(MF,"stubFalse");var HC=MF;var VC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zC=VC&&typeof module=="object"&&module&&!module.nodeType&&module,LF=zC&&zC.exports===VC,$C=LF?ur.Buffer:void 0,IF=$C?$C.isBuffer:void 0,DF=IF||HC,Go=DF;var PF="[object Arguments]",BF="[object Array]",qF="[object Boolean]",FF="[object Date]",UF="[object Error]",jF="[object Function]",HF="[object Map]",zF="[object Number]",$F="[object Object]",VF="[object RegExp]",KF="[object Set]",WF="[object String]",GF="[object WeakMap]",ZF="[object ArrayBuffer]",YF="[object DataView]",XF="[object Float32Array]",QF="[object Float64Array]",JF="[object Int8Array]",e4="[object Int16Array]",t4="[object Int32Array]",n4="[object Uint8Array]",r4="[object Uint8ClampedArray]",i4="[object Uint16Array]",s4="[object Uint32Array]",Pn={};Pn[XF]=Pn[QF]=Pn[JF]=Pn[e4]=Pn[t4]=Pn[n4]=Pn[r4]=Pn[i4]=Pn[s4]=!0;Pn[PF]=Pn[BF]=Pn[ZF]=Pn[qF]=Pn[YF]=Pn[FF]=Pn[UF]=Pn[jF]=Pn[HF]=Pn[zF]=Pn[$F]=Pn[VF]=Pn[KF]=Pn[WF]=Pn[GF]=!1;function o4(n){return Vr(n)&&qp(n.length)&&!!Pn[to(n)]}s(o4,"baseIsTypedArray");var KC=o4;function a4(n){return function(e){return n(e)}}s(a4,"baseUnary");var mu=a4;var WC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$f=WC&&typeof module=="object"&&module&&!module.nodeType&&module,l4=$f&&$f.exports===WC,B0=l4&&Rp.process,c4=function(){try{var n=$f&&$f.require&&$f.require("util").types;return n||B0&&B0.binding&&B0.binding("util")}catch{}}(),Zo=c4;var GC=Zo&&Zo.isTypedArray,u4=GC?mu(GC):KC,pu=u4;var d4=Object.prototype,f4=d4.hasOwnProperty;function h4(n,e){var t=Ms(n),r=!t&&zf(n),i=!t&&!r&&Go(n),a=!t&&!r&&!i&&pu(n),l=t||r||i||a,d=l?UC(n.length,String):[],m=d.length;for(var g in n)(e||f4.call(n,g))&&!(l&&(g=="length"||i&&(g=="offset"||g=="parent")||a&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Pp(g,m)))&&d.push(g);return d}s(h4,"arrayLikeKeys");var Fp=h4;function m4(n,e){return function(t){return n(e(t))}}s(m4,"overArg");var Up=m4;var p4=Up(Object.keys,Object),ZC=p4;var g4=Object.prototype,y4=g4.hasOwnProperty;function b4(n){if(!hu(n))return ZC(n);var e=[];for(var t in Object(n))y4.call(n,t)&&t!="constructor"&&e.push(t);return e}s(b4,"baseKeys");var YC=b4;function v4(n){return Ha(n)?Fp(n):YC(n)}s(v4,"keys");var gu=v4;function _4(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}s(_4,"nativeKeysIn");var XC=_4;var x4=Object.prototype,w4=x4.hasOwnProperty;function E4(n){if(!ri(n))return XC(n);var e=hu(n),t=[];for(var r in n)r=="constructor"&&(e||!w4.call(n,r))||t.push(r);return t}s(E4,"baseKeysIn");var QC=E4;function S4(n){return Ha(n)?Fp(n,!0):QC(n)}s(S4,"keysIn");var xo=S4;var C4=Yi(Object,"create"),Yo=C4;function A4(){this.__data__=Yo?Yo(null):{},this.size=0}s(A4,"hashClear");var JC=A4;function T4(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}s(T4,"hashDelete");var eA=T4;var k4="__lodash_hash_undefined__",O4=Object.prototype,N4=O4.hasOwnProperty;function R4(n){var e=this.__data__;if(Yo){var t=e[n];return t===k4?void 0:t}return N4.call(e,n)?e[n]:void 0}s(R4,"hashGet");var tA=R4;var M4=Object.prototype,L4=M4.hasOwnProperty;function I4(n){var e=this.__data__;return Yo?e[n]!==void 0:L4.call(e,n)}s(I4,"hashHas");var nA=I4;var D4="__lodash_hash_undefined__";function P4(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Yo&&e===void 0?D4:e,this}s(P4,"hashSet");var rA=P4;function yu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(yu,"Hash");yu.prototype.clear=JC;yu.prototype.delete=eA;yu.prototype.get=tA;yu.prototype.has=nA;yu.prototype.set=rA;var q0=yu;function B4(){this.__data__=[],this.size=0}s(B4,"listCacheClear");var iA=B4;function q4(n,e){for(var t=n.length;t--;)if(vo(n[t][0],e))return t;return-1}s(q4,"assocIndexOf");var za=q4;var F4=Array.prototype,U4=F4.splice;function j4(n){var e=this.__data__,t=za(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():U4.call(e,t,1),--this.size,!0}s(j4,"listCacheDelete");var sA=j4;function H4(n){var e=this.__data__,t=za(e,n);return t<0?void 0:e[t][1]}s(H4,"listCacheGet");var oA=H4;function z4(n){return za(this.__data__,n)>-1}s(z4,"listCacheHas");var aA=z4;function $4(n,e){var t=this.__data__,r=za(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}s($4,"listCacheSet");var lA=$4;function bu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(bu,"ListCache");bu.prototype.clear=iA;bu.prototype.delete=sA;bu.prototype.get=oA;bu.prototype.has=aA;bu.prototype.set=lA;var $a=bu;var V4=Yi(ur,"Map"),Va=V4;function K4(){this.size=0,this.__data__={hash:new q0,map:new(Va||$a),string:new q0}}s(K4,"mapCacheClear");var cA=K4;function W4(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}s(W4,"isKeyable");var uA=W4;function G4(n,e){var t=n.__data__;return uA(e)?t[typeof e=="string"?"string":"hash"]:t.map}s(G4,"getMapData");var Ka=G4;function Z4(n){var e=Ka(this,n).delete(n);return this.size-=e?1:0,e}s(Z4,"mapCacheDelete");var dA=Z4;function Y4(n){return Ka(this,n).get(n)}s(Y4,"mapCacheGet");var fA=Y4;function X4(n){return Ka(this,n).has(n)}s(X4,"mapCacheHas");var hA=X4;function Q4(n,e){var t=Ka(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}s(Q4,"mapCacheSet");var mA=Q4;function vu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}s(vu,"MapCache");vu.prototype.clear=cA;vu.prototype.delete=dA;vu.prototype.get=fA;vu.prototype.has=hA;vu.prototype.set=mA;var jp=vu;function J4(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}s(J4,"arrayPush");var Hp=J4;var e5=Up(Object.getPrototypeOf,Object),_u=e5;var t5="[object Object]",n5=Function.prototype,r5=Object.prototype,pA=n5.toString,i5=r5.hasOwnProperty,s5=pA.call(Object);function o5(n){if(!Vr(n)||to(n)!=t5)return!1;var e=_u(n);if(e===null)return!0;var t=i5.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&pA.call(t)==s5}s(o5,"isPlainObject");var gA=o5;function a5(){this.__data__=new $a,this.size=0}s(a5,"stackClear");var yA=a5;function l5(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}s(l5,"stackDelete");var bA=l5;function c5(n){return this.__data__.get(n)}s(c5,"stackGet");var vA=c5;function u5(n){return this.__data__.has(n)}s(u5,"stackHas");var _A=u5;var d5=200;function f5(n,e){var t=this.__data__;if(t instanceof $a){var r=t.__data__;if(!Va||r.length<d5-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new jp(r)}return t.set(n,e),this.size=t.size,this}s(f5,"stackSet");var xA=f5;function xu(n){var e=this.__data__=new $a(n);this.size=e.size}s(xu,"Stack");xu.prototype.clear=yA;xu.prototype.delete=bA;xu.prototype.get=vA;xu.prototype.has=_A;xu.prototype.set=xA;var Wa=xu;function h5(n,e){return n&&_o(e,gu(e),n)}s(h5,"baseAssign");var wA=h5;function m5(n,e){return n&&_o(e,xo(e),n)}s(m5,"baseAssignIn");var EA=m5;var TA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,SA=TA&&typeof module=="object"&&module&&!module.nodeType&&module,p5=SA&&SA.exports===TA,CA=p5?ur.Buffer:void 0,AA=CA?CA.allocUnsafe:void 0;function g5(n,e){if(e)return n.slice();var t=n.length,r=AA?AA(t):new n.constructor(t);return n.copy(r),r}s(g5,"cloneBuffer");var zp=g5;function y5(n,e){for(var t=-1,r=n==null?0:n.length,i=0,a=[];++t<r;){var l=n[t];e(l,t,n)&&(a[i++]=l)}return a}s(y5,"arrayFilter");var kA=y5;function b5(){return[]}s(b5,"stubArray");var $p=b5;var v5=Object.prototype,_5=v5.propertyIsEnumerable,OA=Object.getOwnPropertySymbols,x5=OA?function(n){return n==null?[]:(n=Object(n),kA(OA(n),function(e){return _5.call(n,e)}))}:$p,wu=x5;function w5(n,e){return _o(n,wu(n),e)}s(w5,"copySymbols");var NA=w5;var E5=Object.getOwnPropertySymbols,S5=E5?function(n){for(var e=[];n;)Hp(e,wu(n)),n=_u(n);return e}:$p,Vp=S5;function C5(n,e){return _o(n,Vp(n),e)}s(C5,"copySymbolsIn");var RA=C5;function A5(n,e,t){var r=e(n);return Ms(n)?r:Hp(r,t(n))}s(A5,"baseGetAllKeys");var Kp=A5;function T5(n){return Kp(n,gu,wu)}s(T5,"getAllKeys");var Vf=T5;function k5(n){return Kp(n,xo,Vp)}s(k5,"getAllKeysIn");var MA=k5;var O5=Yi(ur,"DataView"),Wp=O5;var N5=Yi(ur,"Promise"),Gp=N5;var R5=Yi(ur,"Set"),Zp=R5;var LA="[object Map]",M5="[object Object]",IA="[object Promise]",DA="[object Set]",PA="[object WeakMap]",BA="[object DataView]",L5=Wo(Wp),I5=Wo(Va),D5=Wo(Gp),P5=Wo(Zp),B5=Wo(Ip),Ql=to;(Wp&&Ql(new Wp(new ArrayBuffer(1)))!=BA||Va&&Ql(new Va)!=LA||Gp&&Ql(Gp.resolve())!=IA||Zp&&Ql(new Zp)!=DA||Ip&&Ql(new Ip)!=PA)&&(Ql=s(function(n){var e=to(n),t=e==M5?n.constructor:void 0,r=t?Wo(t):"";if(r)switch(r){case L5:return BA;case I5:return LA;case D5:return IA;case P5:return DA;case B5:return PA}return e},"getTag"));var Xo=Ql;var q5=Object.prototype,F5=q5.hasOwnProperty;function U5(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&F5.call(n,"index")&&(t.index=n.index,t.input=n.input),t}s(U5,"initCloneArray");var qA=U5;var j5=ur.Uint8Array,Eu=j5;function H5(n){var e=new n.constructor(n.byteLength);return new Eu(e).set(new Eu(n)),e}s(H5,"cloneArrayBuffer");var Su=H5;function z5(n,e){var t=e?Su(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}s(z5,"cloneDataView");var FA=z5;var $5=/\w*$/;function V5(n){var e=new n.constructor(n.source,$5.exec(n));return e.lastIndex=n.lastIndex,e}s(V5,"cloneRegExp");var UA=V5;var jA=Rs?Rs.prototype:void 0,HA=jA?jA.valueOf:void 0;function K5(n){return HA?Object(HA.call(n)):{}}s(K5,"cloneSymbol");var zA=K5;function W5(n,e){var t=e?Su(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}s(W5,"cloneTypedArray");var Yp=W5;var G5="[object Boolean]",Z5="[object Date]",Y5="[object Map]",X5="[object Number]",Q5="[object RegExp]",J5="[object Set]",e6="[object String]",t6="[object Symbol]",n6="[object ArrayBuffer]",r6="[object DataView]",i6="[object Float32Array]",s6="[object Float64Array]",o6="[object Int8Array]",a6="[object Int16Array]",l6="[object Int32Array]",c6="[object Uint8Array]",u6="[object Uint8ClampedArray]",d6="[object Uint16Array]",f6="[object Uint32Array]";function h6(n,e,t){var r=n.constructor;switch(e){case n6:return Su(n);case G5:case Z5:return new r(+n);case r6:return FA(n,t);case i6:case s6:case o6:case a6:case l6:case c6:case u6:case d6:case f6:return Yp(n,t);case Y5:return new r;case X5:case e6:return new r(n);case Q5:return UA(n);case J5:return new r;case t6:return zA(n)}}s(h6,"initCloneByTag");var $A=h6;function m6(n){return typeof n.constructor=="function"&&!hu(n)?kC(_u(n)):{}}s(m6,"initCloneObject");var Xp=m6;var p6="[object Map]";function g6(n){return Vr(n)&&Xo(n)==p6}s(g6,"baseIsMap");var VA=g6;var KA=Zo&&Zo.isMap,y6=KA?mu(KA):VA,WA=y6;var b6="[object Set]";function v6(n){return Vr(n)&&Xo(n)==b6}s(v6,"baseIsSet");var GA=v6;var ZA=Zo&&Zo.isSet,_6=ZA?mu(ZA):GA,YA=_6;var x6=1,w6=2,E6=4,XA="[object Arguments]",S6="[object Array]",C6="[object Boolean]",A6="[object Date]",T6="[object Error]",QA="[object Function]",k6="[object GeneratorFunction]",O6="[object Map]",N6="[object Number]",JA="[object Object]",R6="[object RegExp]",M6="[object Set]",L6="[object String]",I6="[object Symbol]",D6="[object WeakMap]",P6="[object ArrayBuffer]",B6="[object DataView]",q6="[object Float32Array]",F6="[object Float64Array]",U6="[object Int8Array]",j6="[object Int16Array]",H6="[object Int32Array]",z6="[object Uint8Array]",$6="[object Uint8ClampedArray]",V6="[object Uint16Array]",K6="[object Uint32Array]",kn={};kn[XA]=kn[S6]=kn[P6]=kn[B6]=kn[C6]=kn[A6]=kn[q6]=kn[F6]=kn[U6]=kn[j6]=kn[H6]=kn[O6]=kn[N6]=kn[JA]=kn[R6]=kn[M6]=kn[L6]=kn[I6]=kn[z6]=kn[$6]=kn[V6]=kn[K6]=!0;kn[T6]=kn[QA]=kn[D6]=!1;function Qp(n,e,t,r,i,a){var l,d=e&x6,m=e&w6,g=e&E6;if(t&&(l=i?t(n,r,i,a):t(n)),l!==void 0)return l;if(!ri(n))return n;var v=Ms(n);if(v){if(l=qA(n),!d)return Dp(n,l)}else{var _=Xo(n),E=_==QA||_==k6;if(Go(n))return zp(n,d);if(_==JA||_==XA||E&&!i){if(l=m||E?{}:Xp(n),!d)return m?RA(n,EA(l,n)):NA(n,wA(l,n))}else{if(!kn[_])return i?n:{};l=$A(n,_,d)}}a||(a=new Wa);var C=a.get(n);if(C)return C;a.set(n,l),YA(n)?n.forEach(function(O){l.add(Qp(O,e,t,O,n,a))}):WA(n)&&n.forEach(function(O,P){l.set(P,Qp(O,e,t,P,n,a))});var k=g?m?MA:Vf:m?xo:gu,D=v?void 0:k(n);return IC(D||n,function(O,P){D&&(P=O,O=n[P]),Bp(l,P,Qp(O,e,t,P,n,a))}),l}s(Qp,"baseClone");var eT=Qp;var W6=1,G6=4;function Z6(n){return eT(n,W6|G6)}s(Z6,"cloneDeep");var wo=Z6;var Y6="__lodash_hash_undefined__";function X6(n){return this.__data__.set(n,Y6),this}s(X6,"setCacheAdd");var tT=X6;function Q6(n){return this.__data__.has(n)}s(Q6,"setCacheHas");var nT=Q6;function Jp(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new jp;++e<t;)this.add(n[e])}s(Jp,"SetCache");Jp.prototype.add=Jp.prototype.push=tT;Jp.prototype.has=nT;var rT=Jp;function J6(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}s(J6,"arraySome");var iT=J6;function e8(n,e){return n.has(e)}s(e8,"cacheHas");var sT=e8;var t8=1,n8=2;function r8(n,e,t,r,i,a){var l=t&t8,d=n.length,m=e.length;if(d!=m&&!(l&&m>d))return!1;var g=a.get(n),v=a.get(e);if(g&&v)return g==e&&v==n;var _=-1,E=!0,C=t&n8?new rT:void 0;for(a.set(n,e),a.set(e,n);++_<d;){var k=n[_],D=e[_];if(r)var O=l?r(D,k,_,e,n,a):r(k,D,_,n,e,a);if(O!==void 0){if(O)continue;E=!1;break}if(C){if(!iT(e,function(P,j){if(!sT(C,j)&&(k===P||i(k,P,t,r,a)))return C.push(j)})){E=!1;break}}else if(!(k===D||i(k,D,t,r,a))){E=!1;break}}return a.delete(n),a.delete(e),E}s(r8,"equalArrays");var eg=r8;function i8(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}s(i8,"mapToArray");var oT=i8;function s8(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}s(s8,"setToArray");var aT=s8;var o8=1,a8=2,l8="[object Boolean]",c8="[object Date]",u8="[object Error]",d8="[object Map]",f8="[object Number]",h8="[object RegExp]",m8="[object Set]",p8="[object String]",g8="[object Symbol]",y8="[object ArrayBuffer]",b8="[object DataView]",lT=Rs?Rs.prototype:void 0,F0=lT?lT.valueOf:void 0;function v8(n,e,t,r,i,a,l){switch(t){case b8:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case y8:return!(n.byteLength!=e.byteLength||!a(new Eu(n),new Eu(e)));case l8:case c8:case f8:return vo(+n,+e);case u8:return n.name==e.name&&n.message==e.message;case h8:case p8:return n==e+"";case d8:var d=oT;case m8:var m=r&o8;if(d||(d=aT),n.size!=e.size&&!m)return!1;var g=l.get(n);if(g)return g==e;r|=a8,l.set(n,e);var v=eg(d(n),d(e),r,i,a,l);return l.delete(n),v;case g8:if(F0)return F0.call(n)==F0.call(e)}return!1}s(v8,"equalByTag");var cT=v8;var _8=1,x8=Object.prototype,w8=x8.hasOwnProperty;function E8(n,e,t,r,i,a){var l=t&_8,d=Vf(n),m=d.length,g=Vf(e),v=g.length;if(m!=v&&!l)return!1;for(var _=m;_--;){var E=d[_];if(!(l?E in e:w8.call(e,E)))return!1}var C=a.get(n),k=a.get(e);if(C&&k)return C==e&&k==n;var D=!0;a.set(n,e),a.set(e,n);for(var O=l;++_<m;){E=d[_];var P=n[E],j=e[E];if(r)var W=l?r(j,P,E,e,n,a):r(P,j,E,n,e,a);if(!(W===void 0?P===j||i(P,j,t,r,a):W)){D=!1;break}O||(O=E=="constructor")}if(D&&!O){var Z=n.constructor,ae=e.constructor;Z!=ae&&"constructor"in n&&"constructor"in e&&!(typeof Z=="function"&&Z instanceof Z&&typeof ae=="function"&&ae instanceof ae)&&(D=!1)}return a.delete(n),a.delete(e),D}s(E8,"equalObjects");var uT=E8;var S8=1,dT="[object Arguments]",fT="[object Array]",tg="[object Object]",C8=Object.prototype,hT=C8.hasOwnProperty;function A8(n,e,t,r,i,a){var l=Ms(n),d=Ms(e),m=l?fT:Xo(n),g=d?fT:Xo(e);m=m==dT?tg:m,g=g==dT?tg:g;var v=m==tg,_=g==tg,E=m==g;if(E&&Go(n)){if(!Go(e))return!1;l=!0,v=!1}if(E&&!v)return a||(a=new Wa),l||pu(n)?eg(n,e,t,r,i,a):cT(n,e,m,t,r,i,a);if(!(t&S8)){var C=v&&hT.call(n,"__wrapped__"),k=_&&hT.call(e,"__wrapped__");if(C||k){var D=C?n.value():n,O=k?e.value():e;return a||(a=new Wa),i(D,O,t,r,a)}}return E?(a||(a=new Wa),uT(n,e,t,r,i,a)):!1}s(A8,"baseIsEqualDeep");var mT=A8;function pT(n,e,t,r,i){return n===e?!0:n==null||e==null||!Vr(n)&&!Vr(e)?n!==n&&e!==e:mT(n,e,t,r,pT,i)}s(pT,"baseIsEqual");var gT=pT;function T8(n){return function(e,t,r){for(var i=-1,a=Object(e),l=r(e),d=l.length;d--;){var m=l[n?d:++i];if(t(a[m],m,a)===!1)break}return e}}s(T8,"createBaseFor");var yT=T8;var k8=yT(),bT=k8;function O8(n,e,t){(t!==void 0&&!vo(n[e],t)||t===void 0&&!(e in n))&&fu(n,e,t)}s(O8,"assignMergeValue");var Kf=O8;function N8(n){return Vr(n)&&Ha(n)}s(N8,"isArrayLikeObject");var vT=N8;function R8(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}s(R8,"safeGet");var Wf=R8;function M8(n){return _o(n,xo(n))}s(M8,"toPlainObject");var _T=M8;function L8(n,e,t,r,i,a,l){var d=Wf(n,t),m=Wf(e,t),g=l.get(m);if(g){Kf(n,t,g);return}var v=a?a(d,m,t+"",n,e,l):void 0,_=v===void 0;if(_){var E=Ms(m),C=!E&&Go(m),k=!E&&!C&&pu(m);v=m,E||C||k?Ms(d)?v=d:vT(d)?v=Dp(d):C?(_=!1,v=zp(m,!0)):k?(_=!1,v=Yp(m,!0)):v=[]:gA(m)||zf(m)?(v=d,zf(d)?v=_T(d):(!ri(d)||uu(d))&&(v=Xp(m))):_=!1}_&&(l.set(m,v),i(v,m,r,a,l),l.delete(m)),Kf(n,t,v)}s(L8,"baseMergeDeep");var xT=L8;function wT(n,e,t,r,i){n!==e&&bT(e,function(a,l){if(i||(i=new Wa),ri(a))xT(n,e,l,t,wT,r,i);else{var d=r?r(Wf(n,l),a,l+"",n,e,i):void 0;d===void 0&&(d=a),Kf(n,l,d)}},xo)}s(wT,"baseMerge");var ET=wT;function I8(n,e){return gT(n,e)}s(I8,"isEqual");var Jl=I8;var D8=FC(function(n,e,t){ET(n,e,t)}),Xi=D8;var Yf={};Ev(Yf,{Attributor:()=>Si,AttributorStore:()=>Gf,BlockBlot:()=>ec,ClassAttributor:()=>dr,ContainerBlot:()=>Ou,EmbedBlot:()=>Wn,InlineBlot:()=>ng,LeafBlot:()=>fr,ParentBlot:()=>Qi,Registry:()=>Ya,Scope:()=>qe,ScrollBlot:()=>Zf,StyleAttributor:()=>Ji,TextBlot:()=>Nu});var qe=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(qe||{}),Si=class{static{s(this,"Attributor")}constructor(e,t,r={}){this.attrName=e,this.keyName=t;let i=qe.TYPE&qe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&qe.LEVEL|i:qe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){let t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}},Za=class extends Error{static{s(this,"ParchmentError")}constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}},AT=class j0{static{s(this,"_Registry")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(e,t,r){let i=this.query(t);if(i==null)throw new Za(`Unable to create ${t} blot`);let a=i,l=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:a.create(r),d=new a(e,l,r);return j0.blots.set(d.domNode,d),d}find(e,t=!1){return j0.find(e,t)}query(e,t=qe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&qe.LEVEL&qe.BLOCK?r=this.types.block:e&qe.LEVEL&qe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&t&qe.LEVEL&r.scope&&t&qe.TYPE&r.scope?r:null}register(...e){return e.map(t=>{let r="blotName"in t,i="attrName"in t;if(!r&&!i)throw new Za("Invalid definition");if(r&&t.blotName==="abstract")throw new Za("Cannot register abstract class");let a=r?t.blotName:i?t.attrName:void 0;return this.types[a]=t,i?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(l=>l.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(l=>{(this.tags[l]==null||t.className==null)&&(this.tags[l]=t)}))),t})}};AT.blots=new WeakMap;var Ya=AT;function ST(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}s(ST,"match");var H0=class extends Si{static{s(this,"ClassAttributor")}static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){ST(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){let t=(ST(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}},dr=H0;function U0(n){let e=n.split("-"),t=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+t}s(U0,"camelize");var z0=class extends Si{static{s(this,"StyleAttributor")}static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[U0(this.keyName)]=t,!0):!1}remove(e){e.style[U0(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){let t=e.style[U0(this.keyName)];return this.canAdd(e,t)?t:""}},Ji=z0,$0=class{static{s(this,"AttributorStore")}constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};let e=Ya.find(this.domNode);if(e==null)return;let t=Si.keys(this.domNode),r=dr.keys(this.domNode),i=Ji.keys(this.domNode);t.concat(r).concat(i).forEach(a=>{let l=e.scroll.query(a,qe.ATTRIBUTE);l instanceof Si&&(this.attributes[l.attrName]=l)})}copy(e){Object.keys(this.attributes).forEach(t=>{let r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}},Gf=$0,TT=class{static{s(this,"_ShadowBlot")}constructor(e,t){this.scroll=e,this.domNode=t,Ya.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Za("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){let e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Ya.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,i){let a=this.isolate(e,t);if(this.scroll.query(r,qe.BLOT)!=null&&i)a.wrap(r,i);else if(this.scroll.query(r,qe.ATTRIBUTE)!=null){let l=this.scroll.create(this.statics.scope);a.wrap(l),l.format(r,i)}}insertAt(e,t,r){let i=r==null?this.scroll.create("text",t):this.scroll.create(t,r),a=this.split(e);this.parent.insertBefore(i,a||void 0)}isolate(e,t){let r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){let r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){let r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Za(`Cannot wrap ${e}`);return r.appendChild(this),r}};TT.blotName="abstract";var kT=TT,OT=class extends kT{static{s(this,"_LeafBlot")}static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};OT.scope=qe.INLINE_BLOT;var P8=OT,fr=P8,V0=class{static{s(this,"LinkedList")}constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){let t=e.slice(1);this.append(...t)}}at(e){let t=this.iterator(),r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){let t=this.iterator(),r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){let t=this.iterator(),r=t(),i=0;for(;r;){if(r===e)return i;i+=1,r=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;r!=null;){if(r===e)return t;t+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{let t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){let r=this.iterator(),i=r();for(;i;){let a=i.length();if(e<a||t&&e===a&&(i.next==null||i.next.length()!==0))return[i,e];e-=a,i=r()}return[null,0]}forEach(e){let t=this.iterator(),r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;let[i,a]=this.find(e),l=e-a,d=this.iterator(i),m=d();for(;m&&l<e+t;){let g=m.length();e>l?r(m,e-l,Math.min(t,l+g-e)):r(m,0,Math.min(g,e+t-l)),l+=g,m=d()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){let r=this.iterator(),i=r();for(;i;)t=e(t,i),i=r();return t}};function CT(n,e){let t=e.find(n);if(t)return t;try{return e.create(n)}catch{let r=e.create(qe.INLINE);return Array.from(n.childNodes).forEach(i=>{r.domNode.appendChild(i)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}s(CT,"makeAttachedBlot");var NT=class Ga extends kT{static{s(this,"_ParentBlot")}constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Ga.uiClass&&this.uiNode.classList.add(Ga.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new V0,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{let t=CT(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof Za)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(r,i,a)=>{r.deleteAt(i,a)})}descendant(e,t=0){let[r,i]=this.children.find(t);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof Ga?r.descendant(e,i):[null,-1]}descendants(e,t=0,r=Number.MAX_VALUE){let i=[],a=r;return this.children.forEachAt(t,r,(l,d,m)=>{(e.blotName==null&&e(l)||e.blotName!=null&&l instanceof e)&&i.push(l),l instanceof Ga&&(i=i.concat(l.descendants(e,d,a))),a-=m}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===qe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof Ga?t.unwrap():t.remove())})}formatAt(e,t,r,i){this.children.forEachAt(e,t,(a,l,d)=>{a.formatAt(l,d,r,i)})}insertAt(e,t,r){let[i,a]=this.children.find(e);if(i)i.insertAt(a,t,r);else{let l=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(l)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){let[r,i]=this.children.find(e,t),a=[[this,e]];return r instanceof Ga?a.concat(r.path(i,t)):(r!=null&&a.push([r,i]),a)}removeChild(e){this.children.remove(e)}replaceWith(e,t){let r=typeof e=="string"?this.scroll.create(e,t):e;return r instanceof Ga&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,a,l)=>{let d=i.split(a,t);d!=null&&r.appendChild(d)}),r}splitAfter(e){let t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){let r=[],i=[];e.forEach(a=>{a.target===this.domNode&&a.type==="childList"&&(r.push(...a.addedNodes),i.push(...a.removedNodes))}),i.forEach(a=>{if(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let l=this.scroll.find(a);l!=null&&(l.domNode.parentNode==null||l.domNode.parentNode===this.domNode)&&l.detach()}),r.filter(a=>a.parentNode===this.domNode&&a!==this.uiNode).sort((a,l)=>a===l?0:a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(a=>{let l=null;a.nextSibling!=null&&(l=this.scroll.find(a.nextSibling));let d=CT(a,this.scroll);(d.next!==l||d.next==null)&&(d.parent!=null&&d.parent.removeChild(this),this.insertBefore(d,l||void 0))}),this.enforceAllowedChildren()}};NT.uiClass="";var B8=NT,Qi=B8;function q8(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(let t in n)if(n[t]!==e[t])return!1;return!0}s(q8,"isEqual");var Cu=class Au extends Qi{static{s(this,"_InlineBlot")}static create(e){return super.create(e)}static formats(e,t){let r=t.query(Au.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Gf(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof Au||(r=r.wrap(Au.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{let r=this.scroll.query(e,qe.INLINE);if(r==null)return;r instanceof Si?this.attributes.attribute(r,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,i){this.formats()[r]!=null||this.scroll.query(r,qe.ATTRIBUTE)?this.isolate(e,t).format(r,i):super.formatAt(e,t,r,i)}optimize(e){super.optimize(e);let t=this.formats();if(Object.keys(t).length===0)return this.unwrap();let r=this.next;r instanceof Au&&r.prev===this&&q8(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){let r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,t){let r=super.wrap(e,t);return r instanceof Au&&this.attributes.move(r),r}};Cu.allowedChildren=[Cu,fr],Cu.blotName="inline",Cu.scope=qe.INLINE_BLOT,Cu.tagName="SPAN";var F8=Cu,ng=F8,Tu=class K0 extends Qi{static{s(this,"_BlockBlot")}static create(e){return super.create(e)}static formats(e,t){let r=t.query(K0.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Gf(this.domNode)}format(e,t){let r=this.scroll.query(e,qe.BLOCK);r!=null&&(r instanceof Si?this.attributes.attribute(r,t):e===this.statics.blotName&&!t?this.replaceWith(K0.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,i){this.scroll.query(r,qe.BLOCK)!=null?this.format(r,i):super.formatAt(e,t,r,i)}insertAt(e,t,r){if(r==null||this.scroll.query(t,qe.INLINE)!=null)super.insertAt(e,t,r);else{let i=this.split(e);if(i!=null){let a=this.scroll.create(t,r);i.parent.insertBefore(a,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){let r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Tu.blotName="block",Tu.scope=qe.BLOCK_BLOT,Tu.tagName="P",Tu.allowedChildren=[ng,Tu,fr];var U8=Tu,ec=U8,W0=class extends Qi{static{s(this,"_ContainerBlot")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,i){super.formatAt(e,t,r,i),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};W0.blotName="container",W0.scope=qe.BLOCK_BLOT;var j8=W0,Ou=j8,G0=class extends fr{static{s(this,"EmbedBlot")}static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,i){e===0&&t===this.length()?this.format(r,i):super.formatAt(e,t,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Wn=G0,H8={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},z8=100,ku=class extends Qi{static{s(this,"_ScrollBlot")}constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,H8),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){let r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=qe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,i){this.update(),super.formatAt(e,t,r,i)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);let r=t.mutationsMap||new WeakMap,i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());let a=s((m,g=!0)=>{m==null||m===this||m.domNode.parentNode!=null&&(r.has(m.domNode)||r.set(m.domNode,[]),g&&a(m.parent))},"mark"),l=s(m=>{r.has(m.domNode)&&(m instanceof Qi&&m.children.forEach(l),r.delete(m.domNode),m.optimize(t))},"optimize"),d=e;for(let m=0;d.length>0;m+=1){if(m>=z8)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach(g=>{let v=this.find(g.target,!0);v!=null&&(v.domNode===g.target&&(g.type==="childList"?(a(this.find(g.previousSibling,!1)),Array.from(g.addedNodes).forEach(_=>{let E=this.find(_,!1);a(E,!1),E instanceof Qi&&E.children.forEach(C=>{a(C,!1)})})):g.type==="attributes"&&a(v.prev)),a(v))}),this.children.forEach(l),d=Array.from(this.observer.takeRecords()),i=d.slice();i.length>0;)e.push(i.pop())}}update(e,t={}){e=e||this.observer.takeRecords();let r=new WeakMap;e.map(i=>{let a=this.find(i.target,!0);return a==null?null:r.has(a.domNode)?(r.get(a.domNode).push(i),null):(r.set(a.domNode,[i]),a)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};ku.blotName="scroll",ku.defaultChild=ec,ku.allowedChildren=[ec,Ou],ku.scope=qe.BLOCK_BLOT,ku.tagName="DIV";var $8=ku,Zf=$8,Z0=class RT extends fr{static{s(this,"_TextBlot")}static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof RT&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Z0.blotName="text",Z0.scope=qe.INLINE_BLOT;var V8=Z0,Nu=V8;var tl=Qn(ms(),1);var Gn=Qn(ms(),1);var D_=Qn(ms(),1);var oh=class extends Wn{static{s(this,"Break")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};oh.blotName="break";oh.tagName="BR";var ii=oh;var Jn=class extends Nu{static{s(this,"Text")}};function cc(n){return n.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}s(cc,"escapeText");var I_=class n extends ng{static{s(this,"Inline")}static allowedChildren=[n,ii,Wn,Jn];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){let r=n.order.indexOf(e),i=n.order.indexOf(t);return r>=0||i>=0?r-i:e===t?0:e<t?-1:1}formatAt(e,t,r,i){if(n.compare(this.statics.blotName,r)<0&&this.scroll.query(r,qe.BLOT)){let a=this.isolate(e,t);i&&a.wrap(r,i)}else super.formatAt(e,t,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof n&&n.compare(this.statics.blotName,this.parent.statics.blotName)>0){let t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}},si=I_;var mO=1,An=class extends ec{static{s(this,"Block")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=P_(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,r,i){t<=0||(this.scroll.query(r,qe.BLOCK)?e+t===this.length()&&this.format(r,i):super.formatAt(e,Math.min(t,this.length()-e-1),r,i),this.cache={})}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r),this.cache={};return}if(t.length===0)return;let i=t.split(`
`),a=i.shift();a.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let l=this;i.reduce((d,m)=>(l=l.split(d,!0),l.insertAt(0,m),m.length),e+a.length)}insertBefore(e,t){let{head:r}=this.children;super.insertBefore(e,t),r instanceof ii&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+mO),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-mO)){let i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}let r=super.split(e,t);return this.cache={},r}};An.blotName="block";An.tagName="P";An.defaultChild=ii;An.allowedChildren=[ii,si,Wn,Jn];var Er=class extends Wn{static{s(this,"BlockEmbed")}attach(){super.attach(),this.attributes=new Gf(this.domNode)}delta(){return new D_.default().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){let r=this.scroll.query(e,qe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(e,t,r,i){this.format(r,i)}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r);return}let i=t.split(`
`),a=i.pop(),l=i.map(m=>{let g=this.scroll.create(An.blotName);return g.insertAt(0,m),g}),d=this.split(e);l.forEach(m=>{this.parent.insertBefore(m,d)}),a&&this.parent.insertBefore(this.scroll.create("text",a),d)}};Er.scope=qe.BLOCK_BLOT;function P_(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(fr).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),es(r,{},e)),new D_.default).insert(`
`,es(n))}s(P_,"blockDelta");function es(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:es(n.parent,e,t)}s(es,"bubbleFormats");var B_=class n extends Wn{static{s(this,"Cursor")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,r){super(e,t),this.selection=r,this.textNode=document.createTextNode(n.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==qe.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=n.CONTENTS.length,r.optimize(),r.formatAt(i,n.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let t=this.prev instanceof Jn?this.prev:null,r=t?t.length():0,i=this.next instanceof Jn?this.next:null,a=i?i.text:"",{textNode:l}=this,d=l.data.split(n.CONTENTS).join("");l.data=n.CONTENTS;let m;if(t)m=t,(d||i)&&(t.insertAt(t.length(),d+a),i&&i.remove());else if(i)m=i,i.insertAt(0,d);else{let g=document.createTextNode(d);m=this.scroll.create(g),this.parent.insertBefore(m,this)}if(this.remove(),e){let g=s((E,C)=>t&&E===t.domNode?C:E===l?r+C-1:i&&E===i.domNode?r+d.length+C:null,"remapOffset"),v=g(e.start.node,e.start.offset),_=g(e.end.node,e.end.offset);if(v!==null&&_!==null)return{startNode:m.domNode,startOffset:v,endNode:m.domNode,endOffset:_}}return null}update(e,t){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){let r=this.restore();r&&(t.range=r)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=n.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}},el=B_;var F_=Qn(gO(),1);var lh=new WeakMap;var U_=["error","warn","log","info"],j_="warn";function yO(n){if(j_&&U_.indexOf(n)<=U_.indexOf(j_)){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console[n](...t)}}s(yO,"debug");function H_(n){return U_.reduce((e,t)=>(e[t]=yO.bind(console,t,n),e),{})}s(H_,"namespace");H_.level=n=>{j_=n};yO.level=H_.level;var ps=H_;var z_=ps("quill:events"),u9=["selectionchange","mousedown","mouseup","click"];u9.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{let a=lh.get(i);a&&a.emitter&&a.emitter.handleDOM(...t)})})});var $_=class extends F_.default{static{s(this,"Emitter")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",z_.error)}emit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return z_.log.call(z_,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(a=>{let{node:l,handler:d}=a;(e.target===l||l.contains(e.target))&&d(e,...r)})}listenDOM(e,t,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:r})}},We=$_;var V_=ps("quill:selection"),Ti=class{static{s(this,"Range")}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}},W_=class{static{s(this,"Selection")}constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ti(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,We.sources.USER),1)}),this.emitter.on(We.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(We.events.SCROLL_UPDATE,(i,a)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);let l=a.some(d=>d.type==="characterData"||d.type==="childList"||d.type==="attributes"&&d.target===this.root);this.update(l?We.sources.SILENT:i)}catch{}})}),this.emitter.on(We.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){let{startNode:a,startOffset:l,endNode:d,endOffset:m}=i.range;this.setNativeRange(a,l,d,m),this.update(We.sources.SILENT)}}),this.update(We.sources.SILENT)}handleComposition(){this.emitter.on(We.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(We.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(We.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();let r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,qe.BLOCK))){if(r.start.node!==this.cursor.textNode){let i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof fr){let a=i.split(r.start.offset);i.parent.insertBefore(this.cursor,a)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;let i,[a,l]=this.scroll.leaf(e);if(a==null)return null;if(t>0&&l===a.length()){let[v]=this.scroll.leaf(e+1);if(v){let[_]=this.scroll.line(e),[E]=this.scroll.line(e+1);_===E&&(a=v,l=0)}}[i,l]=a.position(l,!0);let d=document.createRange();if(t>0)return d.setStart(i,l),[a,l]=this.scroll.leaf(e+t),a==null?null:([i,l]=a.position(l,!0),d.setEnd(i,l),d.getBoundingClientRect());let m="left",g;if(i instanceof Text){if(!i.data.length)return null;l<i.data.length?(d.setStart(i,l),d.setEnd(i,l+1)):(d.setStart(i,l-1),d.setEnd(i,l),m="right"),g=d.getBoundingClientRect()}else{if(!(a.domNode instanceof Element))return null;g=a.domNode.getBoundingClientRect(),l>0&&(m="right")}return{bottom:g.top+g.height,height:g.height,left:g[m],right:g[m],top:g.top,width:0}}getNativeRange(){let e=document.getSelection();if(e==null||e.rangeCount<=0)return null;let t=e.getRangeAt(0);if(t==null)return null;let r=this.normalizeNative(t);return V_.info("getNativeRange",r),r}getRange(){let e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];let t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&K_(this.root,document.activeElement)}normalizedToRange(e){let t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);let r=t.map(l=>{let[d,m]=l,g=this.scroll.find(d,!0),v=g.offset(this.scroll);return m===0?v:g instanceof fr?v+g.index(d,m):v+g.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),a=Math.min(i,...r);return new Ti(a,i-a)}normalizeNative(e){if(!K_(this.root,e.startContainer)||!e.collapsed&&!K_(this.root,e.endContainer))return null;let t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(r=>{let{node:i,offset:a}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>a)i=i.childNodes[a],a=0;else if(i.childNodes.length===a)i=i.lastChild,i instanceof Text?a=i.data.length:i.childNodes.length>0?a=i.childNodes.length:a=i.childNodes.length+1;else break;r.node=i,r.offset=a}),t}rangeToNative(e){let t=this.scroll.length(),r=s((i,a)=>{i=Math.min(t-1,i);let[l,d]=this.scroll.leaf(i);return l?l.position(d,a):[null,-1]},"getPosition");return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(V_.info("setNativeRange",e,t,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;let l=document.getSelection();if(l!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:d}=this.getNativeRange()||{};if(d==null||a||e!==d.startContainer||t!==d.startOffset||r!==d.endContainer||i!==d.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);let m=document.createRange();m.setStart(e,t),m.setEnd(r,i),l.removeAllRanges(),l.addRange(m)}}else l.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:We.sources.API;if(typeof t=="string"&&(r=t,t=!1),V_.info("setRange",e),e!=null){let i=this.rangeToNative(e);this.setNativeRange(...i,t)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:We.sources.USER,t=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Jl(t,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){let l=this.cursor.restore();l&&this.setNativeRange(l.startNode,l.startOffset,l.endNode,l.endOffset)}let a=[We.events.SELECTION_CHANGE,wo(this.lastRange),wo(t),e];this.emitter.emit(We.events.EDITOR_CHANGE,...a),e!==We.sources.SILENT&&this.emitter.emit(...a)}}};function K_(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}s(K_,"contains");var bO=W_;var d9=/^[ -~]*$/,Z_=class{static{s(this,"Editor")}constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();let r=vO(e),i=new Gn.default;return h9(r.ops.slice()).reduce((l,d)=>{let m=Gn.Op.length(d),g=d.attributes||{},v=!1,_=!1;if(d.insert!=null){if(i.retain(m),typeof d.insert=="string"){let k=d.insert;_=!k.endsWith(`
`)&&(t<=l||!!this.scroll.descendant(Er,l)[0]),this.scroll.insertAt(l,k);let[D,O]=this.scroll.line(l),P=Xi({},es(D));if(D instanceof An){let[j]=D.descendant(fr,O);j&&(P=Xi(P,es(j)))}g=Gn.AttributeMap.diff(P,g)||{}}else if(typeof d.insert=="object"){let k=Object.keys(d.insert)[0];if(k==null)return l;let D=this.scroll.query(k,qe.INLINE)!=null;if(D)(t<=l||this.scroll.descendant(Er,l)[0])&&(_=!0);else if(l>0){let[O,P]=this.scroll.descendant(fr,l-1);O instanceof Jn?O.value()[P]!==`
`&&(v=!0):O instanceof Wn&&O.statics.scope===qe.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(l,k,d.insert[k]),D){let[O]=this.scroll.descendant(fr,l);if(O){let P=Xi({},es(O));g=Gn.AttributeMap.diff(P,g)||{}}}}t+=m}else if(i.push(d),d.retain!==null&&typeof d.retain=="object"){let k=Object.keys(d.retain)[0];if(k==null)return l;this.scroll.updateEmbedAt(l,k,d.retain[k])}Object.keys(g).forEach(k=>{this.scroll.formatAt(l,m,k,g[k])});let E=v?1:0,C=_?1:0;return t+=E+C,i.retain(E),i.delete(C),l+m+E+C},0),i.reduce((l,d)=>typeof d.delete=="number"?(this.scroll.deleteAt(l,d.delete),l):l+Gn.Op.length(d),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Gn.default().retain(e).delete(t))}formatLine(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(a=>{this.scroll.lines(e,Math.max(t,1)).forEach(l=>{l.format(a,r[a])})}),this.scroll.optimize();let i=new Gn.default().retain(e).retain(t,wo(r));return this.update(i)}formatText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(a=>{this.scroll.formatAt(e,t,a,r[a])});let i=new Gn.default().retain(e).retain(t,wo(r));return this.update(i)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Gn.default)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];t===0?this.scroll.path(e).forEach(d=>{let[m]=d;m instanceof An?r.push(m):m instanceof fr&&i.push(m)}):(r=this.scroll.lines(e,t),i=this.scroll.descendants(fr,e,t));let[a,l]=[r,i].map(d=>{let m=d.shift();if(m==null)return{};let g=es(m);for(;Object.keys(g).length>0;){let v=d.shift();if(v==null)return g;g=f9(es(v),g)}return g});return{...a,...l}}getHTML(e,t){let[r,i]=this.scroll.line(e);if(r){let a=r.length();return r.length()>=i+t&&!(i===0&&t===a)?ch(r,i,t,!0):ch(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,t){let r=vO(t),i=new Gn.default().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,t,r){return this.scroll.insertAt(e,t,r),this.update(new Gn.default().retain(e).insert({[t]:r}))}insertText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,t.length,i,r[i])}),this.update(new Gn.default().retain(e).insert(t,wo(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let e=this.scroll.children.head;if(e?.statics.blotName!==An.blotName)return!1;let t=e;return t.children.length>1?!1:t.children.head instanceof ii}removeFormat(e,t){let r=this.getText(e,t),[i,a]=this.scroll.line(e+t),l=0,d=new Gn.default;i!=null&&(l=i.length()-a,d=i.delta().slice(a,a+l-1).insert(`
`));let g=this.getContents(e,t+l).diff(new Gn.default().insert(r).concat(d)),v=new Gn.default().retain(e).concat(g);return this.applyDelta(v)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(d9)&&this.scroll.find(t[0].target)){let a=this.scroll.find(t[0].target),l=es(a),d=a.offset(this.scroll),m=t[0].oldValue.replace(el.CONTENTS,""),g=new Gn.default().insert(m),v=new Gn.default().insert(a.value()),_=r&&{oldRange:_O(r.oldRange,-d),newRange:_O(r.newRange,-d)};e=new Gn.default().retain(d).concat(g.diff(v,_)).reduce((C,k)=>k.insert?C.insert(k.insert,l):C.push(k),new Gn.default),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!Jl(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}};function qu(n,e,t){if(n.length===0){let[C]=G_(t.pop());return e<=0?`</li></${C}>`:`</li></${C}>${qu([],e-1,t)}`}let[{child:r,offset:i,length:a,indent:l,type:d},...m]=n,[g,v]=G_(d);if(l>e)return t.push(d),l===e+1?`<${g}><li${v}>${ch(r,i,a)}${qu(m,l,t)}`:`<${g}><li>${qu(n,e+1,t)}`;let _=t[t.length-1];if(l===e&&d===_)return`</li><li${v}>${ch(r,i,a)}${qu(m,l,t)}`;let[E]=G_(t.pop());return`</li></${E}>${qu(n,e-1,t)}`}s(qu,"convertListHTML");function ch(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof Jn)return cc(n.value().slice(e,e+t));if(n instanceof Qi){if(n.statics.blotName==="list-container"){let g=[];return n.children.forEachAt(e,t,(v,_,E)=>{let C="formats"in v&&typeof v.formats=="function"?v.formats():{};g.push({child:v,offset:_,length:E,indent:C.indent||0,type:C.list})}),qu(g,-1,[])}let i=[];if(n.children.forEachAt(e,t,(g,v,_)=>{i.push(ch(g,v,_))}),r||n.statics.blotName==="list")return i.join("");let{outerHTML:a,innerHTML:l}=n.domNode,[d,m]=a.split(`>${l}<`);return d==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${m}`:`${d}>${i.join("")}<${m}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}s(ch,"convertHTML");function f9(n,e){return Object.keys(e).reduce((t,r)=>{if(n[r]==null)return t;let i=e[r];return i===n[r]?t[r]=i:Array.isArray(i)?i.indexOf(n[r])<0?t[r]=i.concat([n[r]]):t[r]=i:t[r]=[i,n[r]],t},{})}s(f9,"combineFormats");function G_(n){let e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}s(G_,"getListType");function vO(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){let r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,t.attributes)}return e.push(t)},new Gn.default)}s(vO,"normalizeDelta");function _O(n,e){let{index:t,length:r}=n;return new Ti(t+e,r)}s(_O,"shiftRange");function h9(n){let e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((i,a)=>{a&&e.push({insert:`
`,attributes:t.attributes}),i&&e.push({insert:i,attributes:t.attributes})}):e.push(t)}),e}s(h9,"splitOpLines");var xO=Z_;var Y_=class{static{s(this,"Module")}static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}},hr=Y_;var Tg="\uFEFF",X_=class extends Wn{static{s(this,"Embed")}constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Tg),this.rightGuard=document.createTextNode(Tg),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,r,i=e.data.split(Tg).join("");if(e===this.leftGuard)if(this.prev instanceof Jn){let a=this.prev.length();this.prev.insertAt(a,i),t={startNode:this.prev.domNode,startOffset:a+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof Jn?(this.next.insertAt(0,i),t={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:i.length}));return e.data=Tg,t}update(e,t){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){let i=this.restore(r.target);i&&(t.range=i)}})}},Fu=X_;var Q_=class{static{s(this,"Composition")}isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){let t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof Fu)&&(this.emitter.emit(We.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(We.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(We.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(We.events.COMPOSITION_END,e),this.isComposing=!1}},wO=Q_;var J_=class n{static{s(this,"Theme")}static DEFAULTS={modules:{}};static themes={default:n};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){let t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}},Uu=J_;var m9=s(n=>n.parentElement||n.getRootNode().host||null,"getParentElement"),p9=s(n=>{let e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*r,left:e.left}},"getElementRect"),kg=s(n=>{let e=parseInt(n,10);return Number.isNaN(e)?0:e},"paddingValueToInt"),EO=s((n,e,t,r,i,a)=>n<t&&e>r?0:n<t?-(t-n+i):e>r?e-n>r-t?n+i-t:e-r+a:0,"getScrollDistance"),g9=s((n,e)=>{let t=n.ownerDocument,r=e,i=n;for(;i;){let a=i===t.body,l=a?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:p9(i),d=getComputedStyle(i),m=EO(r.left,r.right,l.left,l.right,kg(d.scrollPaddingLeft),kg(d.scrollPaddingRight)),g=EO(r.top,r.bottom,l.top,l.bottom,kg(d.scrollPaddingTop),kg(d.scrollPaddingBottom));if(m||g)if(a)t.defaultView?.scrollBy(m,g);else{let{scrollLeft:v,scrollTop:_}=i;g&&(i.scrollTop+=g),m&&(i.scrollLeft+=m);let E=i.scrollLeft-v,C=i.scrollTop-_;r={left:r.left-E,top:r.top-C,right:r.right-E,bottom:r.bottom-C}}i=a||d.position==="fixed"?null:m9(i)}},"scrollRectIntoView"),SO=g9;var y9=100,b9=["block","break","cursor","inline","scroll","text"],v9=s((n,e,t)=>{let r=new Ya;return b9.forEach(i=>{let a=e.query(i);a&&r.register(a)}),n.forEach(i=>{let a=e.query(i);a||t.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let l=0;for(;a;)if(r.register(a),a="blotName"in a?a.requiredContainer??null:null,l+=1,l>y9){t.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},"createRegistryWithFormats"),CO=v9;var ju=ps("quill"),Og=new Ya;Qi.uiClass="ql-ui";var ye=class n{static{s(this,"Quill")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Og,theme:"default"};static events=We.events;static sources=We.sources;static version="2.0.0";static imports={delta:tl.default,parchment:Yf,"core/module":hr,"core/theme":Uu};static debug(e){e===!0&&(e="log"),ps.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return lh.get(e)||Og.find(e,t)}static import(e){return this.imports[e]==null&&ju.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof e!="string"){let i="attrName"in e?e.attrName:e.blotName;typeof i=="string"?this.register(`formats/${i}`,e,t):Object.keys(e).forEach(a=>{this.register(a,e[a],t)})}else this.imports[e]!=null&&!r&&ju.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Og.register(t),typeof t.register=="function"&&t.register(Og)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=_9(e,t),this.container=this.options.container,this.container==null){ju.error("Invalid Quill container",e);return}this.options.debug&&n.debug(this.options.debug);let r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",lh.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new We;let i=Zf.blotName,a=this.options.registry.query(i);if(!a||!("blotName"in a))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new a(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new xO(this.scroll),this.selection=new bO(this.scroll,this.emitter),this.composition=new wO(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(We.events.EDITOR_CHANGE,l=>{l===We.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(We.events.SCROLL_UPDATE,(l,d)=>{let m=this.selection.lastRange,[g]=this.selection.getRange(),v=m&&g?{oldRange:m,newRange:g}:void 0;no.call(this,()=>this.editor.update(null,d,v),l)}),this.emitter.on(We.events.SCROLL_EMBED_UPDATE,(l,d)=>{let m=this.selection.lastRange,[g]=this.selection.getRange(),v=m&&g?{oldRange:m,newRange:g}:void 0;no.call(this,()=>{let _=new tl.default().retain(l.offset(this)).retain({[l.statics.blotName]:d});return this.editor.update(_,[],v)},n.sources.USER)}),r){let l=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(l)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){let r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,r){return[e,t,,r]=sa(e,t,r),no.call(this,()=>this.editor.deleteText(e,t),r,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;let t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:We.sources.API;return no.call(this,()=>{let i=this.getSelection(!0),a=new tl.default;if(i==null)return a;if(this.scroll.query(e,qe.BLOCK))a=this.editor.formatLine(i.index,i.length,{[e]:t});else{if(i.length===0)return this.selection.format(e,t),a;a=this.editor.formatText(i.index,i.length,{[e]:t})}return this.setSelection(i,We.sources.SILENT),a},r)}formatLine(e,t,r,i,a){let l;return[e,t,l,a]=sa(e,t,r,i,a),no.call(this,()=>this.editor.formatLine(e,t,l),a,e,0)}formatText(e,t,r,i,a){let l;return[e,t,l,a]=sa(e,t,r,i,a),no.call(this,()=>this.editor.formatText(e,t,l),a,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,t):r=this.selection.getBounds(e.index,e.length),!r)return null;let i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=sa(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=sa(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=sa(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n.sources.API;return no.call(this,()=>this.editor.insertEmbed(e,t,r),i,e)}insertText(e,t,r,i,a){let l;return[e,,l,a]=sa(e,0,r,i,a),no.call(this,()=>this.editor.insertText(e,t,l),a,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,r){return[e,t,,r]=sa(e,t,r),no.call(this,()=>this.editor.removeFormat(e,t),r,e)}scrollRectIntoView(e){SO(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:We.sources.API;return no.call(this,()=>{e=new tl.default(e);let r=this.getLength(),i=this.editor.deleteText(0,r),a=this.editor.insertContents(0,e),l=this.editor.deleteText(this.getLength()-1,1);return i.compose(a).compose(l)},t)}setSelection(e,t,r){e==null?this.selection.setRange(null,t||n.sources.API):([e,t,,r]=sa(e,t,r),this.selection.setRange(new Ti(Math.max(0,e),t),r),r!==We.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:We.sources.API,r=new tl.default().insert(e);return this.setContents(r,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:We.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:We.sources.API;return no.call(this,()=>(e=new tl.default(e),this.editor.applyDelta(e)),t,!0)}};function AO(n){return typeof n=="string"?document.querySelector(n):n}s(AO,"resolveSelector");function ex(n){return Object.entries(n??{}).reduce((e,t)=>{let[r,i]=t;return{...e,[r]:i===!0?{}:i}},{})}s(ex,"expandModuleConfig");function TO(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}s(TO,"omitUndefinedValuesFromOptions");function _9(n,e){let t=AO(n);if(!t)throw new Error("Invalid Quill container");let i=!e.theme||e.theme===ye.DEFAULTS.theme?Uu:ye.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);let{modules:a,...l}=ye.DEFAULTS,{modules:d,...m}=i.DEFAULTS,g=Xi({},ex(a),ex(d),ex(e.modules));g!=null&&g.toolbar&&g.toolbar.constructor!==Object&&(g.toolbar={container:g.toolbar});let v={...l,...TO(m),...TO(e)},_=e.registry;return _?e.formats&&ju.warn('Ignoring "formats" option because "registry" is specified'):_=e.formats?CO(e.formats,v.registry,ju):v.registry,{...v,registry:_,container:t,theme:i,modules:Object.entries(g).reduce((E,C)=>{let[k,D]=C;if(!D)return E;let O=ye.import(`modules/${k}`);return O==null?(ju.error(`Cannot load ${k} module. Are you sure you registered it?`),E):{...E,[k]:Xi({},O.DEFAULTS||{},D)}},{}),bounds:AO(v.bounds)}}s(_9,"expandConfig");function no(n,e,t,r){if(!this.isEnabled()&&e===We.sources.USER&&!this.allowReadOnlyEdits)return new tl.default;let i=t==null?null:this.getSelection(),a=this.editor.delta,l=n();if(i!=null&&(t===!0&&(t=i.index),r==null?i=kO(i,l,e):r!==0&&(i=kO(i,t,r,e)),this.setSelection(i,We.sources.SILENT)),l.length()>0){let d=[We.events.TEXT_CHANGE,l,a,e];this.emitter.emit(We.events.EDITOR_CHANGE,...d),e!==We.sources.SILENT&&this.emitter.emit(...d)}return l}s(no,"modify");function sa(n,e,t,r,i){let a={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(i=r,r=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(i=r,r=t,t=e,e=0),typeof t=="object"?(a=t,i=r):typeof t=="string"&&(r!=null?a[t]=r:i=t),i=i||We.sources.API,[n,e,a,i]}s(sa,"overload");function kO(n,e,t,r){let i=typeof t=="number"?t:0;if(n==null)return null;let a,l;return e&&typeof e.transformPosition=="function"?[a,l]=[n.index,n.index+n.length].map(d=>e.transformPosition(d,r!==We.sources.USER)):[a,l]=[n.index,n.index+n.length].map(d=>d<e||d===e&&r===We.sources.USER?d:i>=0?d+i:Math.max(e,d+i)),new Ti(a,l-a)}s(kO,"shiftRange");var tx=class extends Ou{static{s(this,"Container")}},Is=tx;var Ds=Qn(ms(),1);function OO(n){return n instanceof An||n instanceof Er}s(OO,"isLine");function NO(n){return typeof n.updateContent=="function"}s(NO,"isUpdatable");var rx=class extends Zf{static{s(this,"Scroll")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=An;static allowedChildren=[An,Er,Is];constructor(e,t,r){let{emitter:i}=r;super(e,t),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",a=>this.handleDragStart(a))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(We.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(We.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(We.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){let[r,i]=this.line(e),[a]=this.line(e+t);if(super.deleteAt(e,t),a!=null&&r!==a&&i>0){if(r instanceof Er||a instanceof Er){this.optimize();return}let l=a.children.head instanceof ii?null:a.children.head;r.moveChildren(a,l),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,r,i){super.formatAt(e,t,r,i),this.optimize()}insertAt(e,t,r){if(e>=this.length())if(r==null||this.scroll.query(t,qe.BLOCK)==null){let i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&t.endsWith(`
`)?i.insertAt(0,t.slice(0,-1),r):i.insertAt(0,t,r)}else{let i=this.scroll.create(t,r);this.appendChild(i)}else super.insertAt(e,t,r);this.optimize()}insertBefore(e,t){if(e.statics.scope===qe.INLINE_BLOT){let r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,t)}else super.insertBefore(e,t)}insertContents(e,t){let r=this.deltaToRenderBlocks(t.concat(new Ds.default().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();let a=r.shift();if(a){let m=a.type==="block"&&(a.delta.length()===0||!this.descendant(Er,e)[0]&&e<this.length()),g=a.type==="block"?a.delta:new Ds.default().insert({[a.key]:a.value});nx(this,e,g);let v=a.type==="block"?1:0,_=e+g.length()+v;m&&this.insertAt(_-1,`
`);let E=es(this.line(e)[0]),C=Ds.AttributeMap.diff(E,a.attributes)||{};Object.keys(C).forEach(k=>{this.formatAt(_-1,1,k,C[k])}),e=_}let[l,d]=this.children.find(e);if(r.length&&(l&&(l=l.split(d),d=0),r.forEach(m=>{if(m.type==="block"){let g=this.createBlock(m.attributes,l||void 0);nx(g,0,m.delta)}else{let g=this.create(m.key,m.value);this.insertBefore(g,l||void 0),Object.keys(m.attributes).forEach(v=>{g.format(v,m.attributes[v])})}})),i.type==="block"&&i.delta.length()){let m=l?l.offset(l.scroll)+d:this.length();nx(this,m,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){let t=this.path(e).pop();if(!t)return[null,-1];let[r,i]=t;return r instanceof fr?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(OO,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,r=s((i,a,l)=>{let d=[],m=l;return i.children.forEachAt(a,l,(g,v,_)=>{OO(g)?d.push(g):g instanceof Ou&&(d=d.concat(r(g,v,m))),m-=_}),d},"getLines");return r(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(We.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=We.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r,a=this.find(i,!0);return a&&!NO(a)}),e.length>0&&this.emitter.emit(We.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(We.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,r){let[i]=this.descendant(a=>a instanceof Er,e);i&&i.statics.blotName===t&&NO(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){let t=[],r=new Ds.default;return e.forEach(i=>{let a=i?.insert;if(a)if(typeof a=="string"){let l=a.split(`
`);l.slice(0,-1).forEach(m=>{r.insert(m,i.attributes),t.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new Ds.default});let d=l[l.length-1];d&&r.insert(d,i.attributes)}else{let l=Object.keys(a)[0];if(!l)return;this.query(l,qe.INLINE)?r.push(i):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new Ds.default,t.push({type:"blockEmbed",key:l,value:a[l],attributes:i.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(e,t){let r,i={};Object.entries(e).forEach(d=>{let[m,g]=d;this.query(m,qe.BLOCK&qe.BLOT)!=null?r=m:i[m]=g});let a=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(a,t||void 0);let l=a.length();return Object.entries(i).forEach(d=>{let[m,g]=d;a.formatAt(0,l,m,g)}),a}};function nx(n,e,t){t.reduce((r,i)=>{let a=Ds.Op.length(i),l=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){let d=i.insert;n.insertAt(r,d);let[m]=n.descendant(fr,r),g=es(m);l=Ds.AttributeMap.diff(g,l)||{}}else if(typeof i.insert=="object"){let d=Object.keys(i.insert)[0];if(d==null)return r;if(n.insertAt(r,d,i.insert[d]),n.scroll.query(d,qe.INLINE)!=null){let[g]=n.descendant(fr,r),v=es(g);l=Ds.AttributeMap.diff(v,l)||{}}}}return Object.keys(l).forEach(d=>{n.formatAt(r,a,d,l[d])}),r+a},e)}s(nx,"insertInlineContents");var RO=rx;var ts=Qn(ms(),1);var ix={scope:qe.BLOCK,whitelist:["right","center","justify"]},MO=new Si("align","align",ix),sx=new dr("align","ql-align",ix),Ng=new Ji("align","text-align",ix);var uh=class extends Ji{static{s(this,"ColorAttributor")}value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):t}},LO=new dr("color","ql-color",{scope:qe.INLINE}),dh=new uh("color","color",{scope:qe.INLINE});var IO=new dr("background","ql-bg",{scope:qe.INLINE}),fh=new uh("background","background-color",{scope:qe.INLINE});var So=class extends Is{static{s(this,"CodeBlockContainer")}static create(e){let t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${cc(this.code(e,t))}
</pre>`}},mr=class extends An{static{s(this,"CodeBlock")}static TAB="  ";static register(){ye.register(So)}},Hu=class extends si{static{s(this,"Code")}};Hu.blotName="code";Hu.tagName="CODE";mr.blotName="code-block";mr.className="ql-code-block";mr.tagName="DIV";So.blotName="code-block-container";So.className="ql-code-block-container";So.tagName="DIV";So.allowedChildren=[mr];mr.allowedChildren=[Jn,ii,el];mr.requiredContainer=So;var ox={scope:qe.BLOCK,whitelist:["rtl"]},Rg=new Si("direction","dir",ox),ax=new dr("direction","ql-direction",ox),Mg=new Ji("direction","direction",ox);var DO={scope:qe.INLINE,whitelist:["serif","monospace"]},cx=new dr("font","ql-font",DO),lx=class extends Ji{static{s(this,"FontStyleAttributor")}value(e){return super.value(e).replace(/["']/g,"")}},Lg=new lx("font","font-family",DO);var ux=new dr("size","ql-size",{scope:qe.INLINE,whitelist:["small","large","huge"]}),Ig=new Ji("size","font-size",{scope:qe.INLINE,whitelist:["10px","18px","32px"]});var ai=Qn(ms(),1);var x9=ps("quill:keyboard"),w9=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",hh=class n extends hr{static{s(this,"Keyboard")}static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==e[r]&&t[r]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=S9(e);if(i==null){x9.warn("Attempted to add invalid keyboard binding",i);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(l=>{let d={...i,key:l,...t,...r};this.bindings[d.key]=this.bindings[d.key]||[],this.bindings[d.key].push(d)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing)return;let r=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(O=>n.match(e,O));if(r.length===0)return;let i=ye.find(e.target,!0);if(i&&i.scroll!==this.quill.scroll)return;let a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;let[l,d]=this.quill.getLine(a.index),[m,g]=this.quill.getLeaf(a.index),[v,_]=a.length===0?[m,g]:this.quill.getLeaf(a.index+a.length),E=m instanceof Nu?m.value().slice(0,g):"",C=v instanceof Nu?v.value().slice(_):"",k={collapsed:a.length===0,empty:a.length===0&&l.length()<=1,format:this.quill.getFormat(a),line:l,offset:d,prefix:E,suffix:C,event:e};r.some(O=>{if(O.collapsed!=null&&O.collapsed!==k.collapsed||O.empty!=null&&O.empty!==k.empty||O.offset!=null&&O.offset!==k.offset)return!1;if(Array.isArray(O.format)){if(O.format.every(P=>k.format[P]==null))return!1}else if(typeof O.format=="object"&&!Object.keys(O.format).every(P=>O.format[P]===!0?k.format[P]!=null:O.format[P]===!1?k.format[P]==null:Jl(O.format[P],k.format[P])))return!1;return O.prefix!=null&&!O.prefix.test(k.prefix)||O.suffix!=null&&!O.suffix.test(k.suffix)?!1:O.handler.call(this,a,k,O)!==!0})&&e.preventDefault()})}handleBackspace(e,t){let r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={},[a]=this.quill.getLine(e.index),l=new ai.default().retain(e.index-r).delete(r);if(t.offset===0){let[d]=this.quill.getLine(e.index-1);if(d&&!(d.statics.blotName==="block"&&d.length()<=1)){let g=a.formats(),v=this.quill.getFormat(e.index-1,1);if(i=ai.AttributeMap.diff(g,v)||{},Object.keys(i).length>0){let _=new ai.default().retain(e.index+a.length()-2).retain(1,i);l=l.compose(_)}}}this.quill.updateContents(l,ye.sources.USER),this.quill.focus()}handleDelete(e,t){let r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={},[a]=this.quill.getLine(e.index),l=new ai.default().retain(e.index).delete(r);if(t.offset>=a.length()-1){let[d]=this.quill.getLine(e.index+1);if(d){let m=a.formats(),g=this.quill.getFormat(e.index,1);i=ai.AttributeMap.diff(m,g)||{},Object.keys(i).length>0&&(l=l.retain(d.length()-1).retain(1,i))}}this.quill.updateContents(l,ye.sources.USER),this.quill.focus()}handleDeleteRange(e){mh({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){let r=Object.keys(t.format).reduce((a,l)=>(this.quill.scroll.query(l,qe.BLOCK)&&!Array.isArray(t.format[l])&&(a[l]=t.format[l]),a),{}),i=new ai.default().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,ye.sources.USER),this.quill.setSelection(e.index+1,ye.sources.SILENT),this.quill.focus()}},E9={bindings:{bold:dx("bold"),italic:dx("italic"),underline:dx("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",ye.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",ye.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",ye.sources.USER):e.format.list!=null&&this.quill.format("list",!1,ye.sources.USER)}},"indent code-block":PO(!0),"outdent code-block":PO(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,ye.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();let t=new ai.default().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,ye.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,ye.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,ye.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){let t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,ye.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){let[e,t]=this.quill.getLine(n.index),r={...e.formats(),list:"checked"},i=new ai.default().retain(n.index).insert(`
`,r).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,ye.sources.USER),this.quill.setSelection(n.index+1,ye.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){let[t,r]=this.quill.getLine(n.index),i=new ai.default().retain(n.index).insert(`
`,e.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,ye.sources.USER),this.quill.setSelection(n.index+1,ye.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){let e=this.quill.getModule("table");if(e){let[t,r,i,a]=e.getTable(n),l=C9(t,r,i,a);if(l==null)return;let d=t.offset();if(l<0){let m=new ai.default().retain(d).insert(`
`);this.quill.updateContents(m,ye.sources.USER),this.quill.setSelection(n.index+1,n.length,ye.sources.SILENT)}else if(l>0){d+=t.length();let m=new ai.default().retain(d).insert(`
`);this.quill.updateContents(m,ye.sources.USER),this.quill.setSelection(d,ye.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){let{event:t,line:r}=e,i=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(i-1,ye.sources.USER):this.quill.setSelection(i+r.length(),ye.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;let{length:t}=e.prefix,[r,i]=this.quill.getLine(n.index);if(i>t)return!0;let a;switch(e.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":case"*":a="bullet";break;default:a="ordered"}this.quill.insertText(n.index," ",ye.sources.USER),this.quill.history.cutoff();let l=new ai.default().retain(n.index-i).delete(t+1).retain(r.length()-2-i).retain(1,{list:a});return this.quill.updateContents(l,ye.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,ye.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){let[e,t]=this.quill.getLine(n.index),r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){let a=new ai.default().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(a,ye.sources.USER),this.quill.setSelection(n.index-1,ye.sources.SILENT),!1}return!0}},"embed left":Dg("ArrowLeft",!1),"embed left shift":Dg("ArrowLeft",!0),"embed right":Dg("ArrowRight",!1),"embed right shift":Dg("ArrowRight",!0),"table down":BO(!1),"table up":BO(!0)}};hh.DEFAULTS=E9;function PO(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:r}=t,i=this.quill.scroll.query("code-block"),{TAB:a}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,a,ye.sources.USER),this.quill.setSelection(e.index+a.length,ye.sources.SILENT);return}let l=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e),{index:d,length:m}=e;l.forEach((g,v)=>{n?(g.insertAt(0,a),v===0?d+=a.length:m+=a.length):g.domNode.textContent.startsWith(a)&&(g.deleteAt(0,a.length),v===0?d-=a.length:m-=a.length)}),this.quill.update(ye.sources.USER),this.quill.setSelection(d,m,ye.sources.SILENT)}}}s(PO,"makeCodeBlockHandler");function Dg(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;n==="ArrowRight"&&(i+=r.length+1);let[a]=this.quill.getLeaf(i);return a instanceof Wn?(n==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,ye.sources.USER):this.quill.setSelection(r.index-1,ye.sources.USER):e?this.quill.setSelection(r.index,r.length+1,ye.sources.USER):this.quill.setSelection(r.index+r.length+1,ye.sources.USER),!1):!0}}}s(Dg,"makeEmbedArrowHandler");function dx(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],ye.sources.USER)}}}s(dx,"makeFormatHandler");function BO(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){let r=n?"prev":"next",i=t.line,a=i.parent[r];if(a!=null){if(a.statics.blotName==="table-row"){let l=a.children.head,d=i;for(;d.prev!=null;)d=d.prev,l=l.next;let m=l.offset(this.quill.scroll)+Math.min(t.offset,l.length()-1);this.quill.setSelection(m,0,ye.sources.USER)}}else{let l=i.table()[r];l!=null&&(n?this.quill.setSelection(l.offset(this.quill.scroll)+l.length()-1,0,ye.sources.USER):this.quill.setSelection(l.offset(this.quill.scroll),0,ye.sources.USER))}return!1}}}s(BO,"makeTableArrowHandler");function S9(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=wo(n);else return null;return n.shortKey&&(n[w9]=n.shortKey,delete n.shortKey),n}s(S9,"normalize");function mh(n){let{quill:e,range:t}=n,r=e.getLines(t),i={};if(r.length>1){let a=r[0].formats(),l=r[r.length-1].formats();i=ai.AttributeMap.diff(l,a)||{}}e.deleteText(t,ye.sources.USER),Object.keys(i).length>0&&e.formatLine(t.index,1,i,ye.sources.USER),e.setSelection(t.index,ye.sources.SILENT)}s(mh,"deleteRange");function C9(n,e,t,r){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}s(C9,"tableSide");var A9=/font-weight:\s*normal/,T9=["P","OL","UL"],qO=s(n=>n&&T9.includes(n.tagName),"isBlockElement"),k9=s(n=>{Array.from(n.querySelectorAll("br")).filter(e=>qO(e.previousElementSibling)&&qO(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},"normalizeEmptyLines"),O9=s(n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(A9)).forEach(e=>{let t=n.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})},"normalizeFontWeight");function fx(n){n.querySelector('[id^="docs-internal-guid-"]')&&(O9(n),k9(n))}s(fx,"normalize");var N9=/\bmso-list:[^;]*ignore/i,R9=/\bmso-list:[^;]*\bl(\d+)/i,M9=/\bmso-list:[^;]*\blevel(\d+)/i,L9=s((n,e)=>{let t=n.getAttribute("style"),r=t?.match(R9);if(!r)return null;let i=Number(r[1]),a=t?.match(M9),l=a?Number(a[1]):1,d=new RegExp(`@list l${i}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),m=e.match(d),g=m&&m[1]==="bullet"?"bullet":"ordered";return{id:i,indent:l,type:g,element:n}},"parseListItem"),I9=s(n=>{let e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],r=[];e.forEach(l=>{(l.getAttribute("style")||"").match(N9)?t.push(l):r.push(l)}),t.forEach(l=>l.parentNode?.removeChild(l));let i=n.documentElement.innerHTML,a=r.map(l=>L9(l,i)).filter(l=>l);for(;a.length;){let l=[],d=a.shift();for(;d;)l.push(d),d=a.length&&a[0]?.element===d.element.nextElementSibling&&a[0].id===d.id?a.shift():null;let m=document.createElement("ul");l.forEach(_=>{let E=document.createElement("li");E.setAttribute("data-list",_.type),_.indent>1&&E.setAttribute("class",`ql-indent-${_.indent-1}`),E.innerHTML=_.element.innerHTML,m.appendChild(E)});let g=l[0]?.element,{parentNode:v}=g??{};g&&v?.replaceChild(m,g),l.slice(1).forEach(_=>{let{element:E}=_;v?.removeChild(E)})}},"normalizeListItem");function hx(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&I9(n)}s(hx,"normalize");var D9=[hx,fx],P9=s(n=>{n.documentElement&&D9.forEach(e=>{e(n)})},"normalizeExternalHTML"),FO=P9;var B9=ps("quill:clipboard"),q9=[[Node.TEXT_NODE,Y9],[Node.TEXT_NODE,jO],["br",z9],[Node.ELEMENT_NODE,jO],[Node.ELEMENT_NODE,H9],[Node.ELEMENT_NODE,j9],[Node.ELEMENT_NODE,G9],["li",K9],["ol, ul",W9],["pre",$9],["tr",Z9],["b",mx("bold")],["i",mx("italic")],["strike",mx("strike")],["style",V9]],F9=[MO,Rg].reduce((n,e)=>(n[e.keyName]=e,n),{}),UO=[Ng,fh,dh,Mg,Lg,Ig].reduce((n,e)=>(n[e.keyName]=e,n),{}),Bg=class extends hr{static{s(this,"Clipboard")}static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],q9.concat(this.options.matchers??[]).forEach(r=>{let[i,a]=r;this.addMatcher(i,a)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[mr.blotName])return new ts.default().insert(r||"",{[mr.blotName]:i[mr.blotName]});if(!t)return new ts.default().insert(r||"",i);let a=this.convertHTML(t);return ph(a,`
`)&&(a.ops[a.ops.length-1].attributes==null||i.table)?a.compose(new ts.default().retain(a.length()-1).delete(1)):a}normalizeHTML(e){FO(e)}convertHTML(e){let t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);let r=t.body,i=new WeakMap,[a,l]=this.prepareMatching(r,i);return qg(this.quill.scroll,r,a,l,i)}dangerouslyPasteHTML(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ye.sources.API;if(typeof e=="string"){let i=this.convert({html:e,text:""});this.quill.setContents(i,t),this.quill.setSelection(0,ye.sources.SILENT)}else{let i=this.convert({html:t,text:""});this.quill.updateContents(new ts.default().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),ye.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();let[r]=this.quill.selection.getRange();if(r==null)return;let{html:i,text:a}=this.onCopy(r,t);e.clipboardData?.setData("text/plain",a),e.clipboardData?.setData("text/html",i),t&&mh({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();let t=this.quill.getSelection(!0);if(t==null)return;let r=e.clipboardData?.getData("text/html"),i=e.clipboardData?.getData("text/plain");if(!r&&!i){let l=e.clipboardData?.getData("text/uri-list");l&&(i=this.normalizeURIList(l))}let a=Array.from(e.clipboardData?.files||[]);if(!r&&a.length>0){this.quill.uploader.upload(t,a);return}if(r&&a.length>0){let l=new DOMParser().parseFromString(r,"text/html");if(l.body.childElementCount===1&&l.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,a);return}}this.onPaste(t,{html:r,text:i})}onCopy(e){let t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:r,html:i}=t,a=this.quill.getFormat(e.index),l=this.convert({text:r,html:i},a);B9.log("onPaste",l,{text:r,html:i});let d=new ts.default().retain(e.index).delete(e.length).concat(l);this.quill.updateContents(d,ye.sources.USER),this.quill.setSelection(d.length()-e.length,ye.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){let r=[],i=[];return this.matchers.forEach(a=>{let[l,d]=a;switch(l){case Node.TEXT_NODE:i.push(d);break;case Node.ELEMENT_NODE:r.push(d);break;default:Array.from(e.querySelectorAll(l)).forEach(m=>{t.has(m)?t.get(m)?.push(d):t.set(m,[d])});break}}),[r,i]}};function uc(n,e,t,r){return r.query(e)?n.reduce((i,a)=>{if(!a.insert)return i;if(a.attributes&&a.attributes[e])return i.push(a);let l=t?{[e]:t}:{};return i.insert(a.insert,{...l,...a.attributes})},new ts.default):n}s(uc,"applyFormat");function ph(n,e){let t="";for(let r=n.ops.length-1;r>=0&&t.length<e.length;--r){let i=n.ops[r];if(typeof i.insert!="string")break;t=i.insert+t}return t.slice(-1*e.length)===e}s(ph,"deltaEndsWith");function nl(n,e){if(!(n instanceof Element))return!1;let t=e.query(n);return t&&t.prototype instanceof Wn?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}s(nl,"isLine");function U9(n,e){return n.previousElementSibling&&n.nextElementSibling&&!nl(n.previousElementSibling,e)&&!nl(n.nextElementSibling,e)}s(U9,"isBetweenInlineElements");var Pg=new WeakMap;function HO(n){return n==null?!1:(Pg.has(n)||(n.tagName==="PRE"?Pg.set(n,!0):Pg.set(n,HO(n.parentNode))),Pg.get(n))}s(HO,"isPre");function qg(n,e,t,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((a,l)=>l(e,a,n),new ts.default):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((a,l)=>{let d=qg(n,l,t,r,i);return l.nodeType===e.ELEMENT_NODE&&(d=t.reduce((m,g)=>g(l,m,n),d),d=(i.get(l)||[]).reduce((m,g)=>g(l,m,n),d)),a.concat(d)},new ts.default):new ts.default}s(qg,"traverse");function mx(n){return(e,t,r)=>uc(t,n,!0,r)}s(mx,"createMatchAlias");function j9(n,e,t){let r=Si.keys(n),i=dr.keys(n),a=Ji.keys(n),l={};return r.concat(i).concat(a).forEach(d=>{let m=t.query(d,qe.ATTRIBUTE);m!=null&&(l[m.attrName]=m.value(n),l[m.attrName])||(m=F9[d],m!=null&&(m.attrName===d||m.keyName===d)&&(l[m.attrName]=m.value(n)||void 0),m=UO[d],m!=null&&(m.attrName===d||m.keyName===d)&&(m=UO[d],l[m.attrName]=m.value(n)||void 0))}),Object.entries(l).reduce((d,m)=>{let[g,v]=m;return uc(d,g,v,t)},e)}s(j9,"matchAttributor");function H9(n,e,t){let r=t.query(n);if(r==null)return e;if(r.prototype instanceof Wn){let i={},a=r.value(n);if(a!=null)return i[r.blotName]=a,new ts.default().insert(i,r.formats(n,t))}else if(r.prototype instanceof ec&&!ph(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return uc(e,r.blotName,r.formats(n,t),t);return e}s(H9,"matchBlot");function z9(n,e){return ph(e,`
`)||e.insert(`
`),e}s(z9,"matchBreak");function $9(n,e,t){let r=t.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,t):!0;return uc(e,"code-block",i,t)}s($9,"matchCodeBlock");function V9(){return new ts.default}s(V9,"matchIgnore");function K9(n,e,t){let r=t.query(n);if(r==null||r.blotName!=="list"||!ph(e,`
`))return e;let i=-1,a=n.parentNode;for(;a!=null;)["OL","UL"].includes(a.tagName)&&(i+=1),a=a.parentNode;return i<=0?e:e.reduce((l,d)=>d.insert?d.attributes&&typeof d.attributes.indent=="number"?l.push(d):l.insert(d.insert,{indent:i,...d.attributes||{}}):l,new ts.default)}s(K9,"matchIndent");function W9(n,e,t){let r=n,i=r.tagName==="OL"?"ordered":"bullet",a=r.getAttribute("data-checked");return a&&(i=a==="true"?"checked":"unchecked"),uc(e,"list",i,t)}s(W9,"matchList");function jO(n,e,t){if(!ph(e,`
`)){if(nl(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(nl(r,t))return e.insert(`
`);let i=t.query(r);if(i&&i.prototype instanceof Er)return e.insert(`
`);r=r.firstChild}}}return e}s(jO,"matchNewline");function G9(n,e,t){let r={},i=n.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),(i.fontWeight?.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((a,l)=>{let[d,m]=l;return uc(a,d,m,t)},e),parseFloat(i.textIndent||0)>0?new ts.default().insert("	").concat(e):e}s(G9,"matchStyles");function Z9(n,e,t){let r=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(r!=null){let a=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return uc(e,"table",a,t)}return e}s(Z9,"matchTable");function Y9(n,e,t){let r=n.data;if(n.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!HO(n)){if(r.trim().length===0&&r.includes(`
`)&&!U9(n,t))return e;let i=s((a,l)=>{let d=l.replace(/[^\u00a0]/g,"");return d.length<1&&a?" ":d},"replacer");r=r.replace(/\r\n/g," ").replace(/\n/g," "),r=r.replace(/\s\s+/g,i.bind(i,!0)),(n.previousSibling==null&&n.parentElement!=null&&nl(n.parentElement,t)||n.previousSibling instanceof Element&&nl(n.previousSibling,t))&&(r=r.replace(/^\s+/,i.bind(i,!1))),(n.nextSibling==null&&n.parentElement!=null&&nl(n.parentElement,t)||n.nextSibling instanceof Element&&nl(n.nextSibling,t))&&(r=r.replace(/\s+$/,i.bind(i,!1)))}return e.insert(r)}s(Y9,"matchText");var Fg=class extends hr{static{s(this,"History")}static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(ye.events.EDITOR_CHANGE,(r,i,a,l)=>{r===ye.events.SELECTION_CHANGE?i&&l!==ye.sources.SILENT&&(this.currentRange=i):r===ye.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===ye.sources.USER?this.record(i,a):this.transform(i)),this.currentRange=px(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;let r=this.stack[e].pop();if(!r)return;let i=this.quill.getContents(),a=r.delta.invert(i);this.stack[t].push({delta:a,range:px(r.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,ye.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(t),i=this.currentRange,a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){let l=this.stack.undo.pop();l&&(r=r.compose(l.delta),i=l.range)}else this.lastRecorded=a;r.length()!==0&&(this.stack.undo.push({delta:r,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){zO(this.stack.undo,e),zO(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,ye.sources.USER);else{let t=Q9(this.quill.scroll,e.delta);this.quill.setSelection(t,ye.sources.USER)}}};function zO(n,e){let t=e;for(let r=n.length-1;r>=0;r-=1){let i=n[r];n[r]={delta:t.transform(i.delta,!0),range:i.range&&px(i.range,t)},t=i.delta.transform(t),n[r].delta.length()===0&&n.splice(r,1)}}s(zO,"transformStack");function X9(n,e){let t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>n.query(r,qe.BLOCK)!=null):!1}s(X9,"endsWithNewlineChange");function Q9(n,e){let t=e.reduce((i,a)=>i+(a.delete||0),0),r=e.length()-t;return X9(n,e)&&(r-=1),r}s(Q9,"getLastChangeIndex");function px(n,e){if(!n)return n;let t=e.transformPosition(n.index),r=e.transformPosition(n.index+n.length);return{index:t,length:r-t}}s(px,"transformRange");var $O=Qn(ms(),1);var Ug=class extends hr{static{s(this,"Uploader")}constructor(e,t){super(e,t),e.root.addEventListener("drop",r=>{r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){let l=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(l.offsetNode,l.offset),i.setEnd(l.offsetNode,l.offset)}let a=i&&e.selection.normalizeNative(i);if(a){let l=e.selection.normalizedToRange(a);r.dataTransfer?.files&&this.upload(l,r.dataTransfer.files)}})}upload(e,t){let r=[];Array.from(t).forEach(i=>{i&&this.options.mimetypes?.includes(i.type)&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}};Ug.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){let t=e.map(r=>new Promise(i=>{let a=new FileReader;a.onload=l=>{i(l.target.result)},a.readAsDataURL(r)}));Promise.all(t).then(r=>{let i=r.reduce((a,l)=>a.insert({image:l}),new $O.default().retain(n.index).delete(n.length));this.quill.updateContents(i,We.sources.USER),this.quill.setSelection(n.index+r.length,We.sources.SILENT)})}};var VO=Ug;var jg=Qn(ms(),1);var KO=Qn(ms(),1);var J9=["insertText","insertReplacementText"],gx=class extends hr{static{s(this,"Input")}constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(ye.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){mh({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){let r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new KO.default().retain(e.index).insert(t,r),ye.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,ye.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!J9.includes(e.inputType))return;let t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;let r=e7(e);if(r==null)return;let i=this.quill.selection.normalizeNative(t),a=i?this.quill.selection.normalizedToRange(i):null;a&&this.replaceText(a,r)&&e.preventDefault()}handleCompositionStart(){let e=this.quill.getSelection();e&&this.replaceText(e)}};function e7(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}s(e7,"getPlainTextFromInputEvent");var WO=gx;var t7=/Mac/i.test(navigator.platform),n7=100,r7=s(n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||t7&&n.key==="a"&&n.ctrlKey===!0),"canMoveCaretBeforeUINode"),yx=class extends hr{static{s(this,"UINode")}isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:r,event:i}=t;if(!(r instanceof Qi)||!r.uiNode)return!0;let a=getComputedStyle(r.domNode).direction==="rtl";return a&&i.key!=="ArrowRight"||!a&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),ye.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&r7(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+n7,this.isListening)return;this.isListening=!0;let e=s(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},"listener");document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){let e=document.getSelection();if(!e)return;let t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;let r=this.quill.scroll.find(t.startContainer);if(!(r instanceof Qi)||!r.uiNode)return;let i=document.createRange();i.setStartAfter(r.uiNode),i.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(i)}},GO=yx;ye.register({"blots/block":An,"blots/block/embed":Er,"blots/break":ii,"blots/container":Is,"blots/cursor":el,"blots/embed":Fu,"blots/inline":si,"blots/scroll":RO,"blots/text":Jn,"modules/clipboard":Bg,"modules/history":Fg,"modules/keyboard":hh,"modules/uploader":VO,"modules/input":WO,"modules/uiNode":GO});var Hg=ye;var bx=class extends dr{static{s(this,"IndentAttributor")}add(e,t){let r=0;if(t==="+1"||t==="-1"){let i=this.value(e)||0;r=t==="+1"?i+1:i-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}},i7=new bx("indent","ql-indent",{scope:qe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),ZO=i7;var vx=class extends An{static{s(this,"Blockquote")}static blotName="blockquote";static tagName="blockquote"},YO=vx;var _x=class extends An{static{s(this,"Header")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}},XO=_x;var dc=class extends Is{static{s(this,"ListContainer")}};dc.blotName="list-container";dc.tagName="OL";var rl=class extends An{static{s(this,"ListItem")}static create(e){let t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){ye.register(dc)}constructor(e,t){super(e,t);let r=t.ownerDocument.createElement("span"),i=s(a=>{if(!e.isEnabled())return;let l=this.statics.formats(t,e);l==="checked"?(this.format("list","unchecked"),a.preventDefault()):l==="unchecked"&&(this.format("list","checked"),a.preventDefault())},"listEventHandler");r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}};rl.blotName="list";rl.tagName="LI";dc.allowedChildren=[rl];rl.requiredContainer=dc;var xx=class extends si{static{s(this,"Bold")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},zu=xx;var wx=class extends zu{static{s(this,"Italic")}static blotName="italic";static tagName=["EM","I"]},QO=wx;var oa=class extends si{static{s(this,"Link")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){let t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return Ex(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}};function Ex(n,e){let t=document.createElement("a");t.href=n;let r=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(r)>-1}s(Ex,"sanitize");var Sx=class extends si{static{s(this,"Script")}static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}},JO=Sx;var Cx=class extends zu{static{s(this,"Strike")}static blotName="strike";static tagName=["S","STRIKE"]},eN=Cx;var Ax=class extends si{static{s(this,"Underline")}static blotName="underline";static tagName="U"},tN=Ax;var Tx=class extends Fu{static{s(this,"Formula")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){let{formula:e}=this.value();return`<span>${e}</span>`}},nN=Tx;var rN=["alt","height","width"],kx=class extends Wn{static{s(this,"Image")}static blotName="image";static tagName="IMG";static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return rN.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return Ex(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){rN.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}},iN=kx;var sN=["height","width"],Ox=class extends Er{static{s(this,"Video")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){let t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return sN.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static sanitize(e){return oa.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){sN.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){let{video:e}=this.value();return`<a href="${e}">${e}</a>`}},oN=Ox;var zg=Qn(ms(),1);var gh=new dr("code-token","hljs",{scope:qe.INLINE}),aa=class n extends si{static{s(this,"CodeToken")}static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(mr.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,r){super(e,t,r),gh.add(this.domNode,r)}format(e,t){e!==n.blotName?super.format(e,t):t?gh.add(this.domNode,t):(gh.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),gh.value(this.domNode)||this.unwrap()}};aa.blotName="code-token";aa.className="ql-token";var ns=class extends mr{static{s(this,"SyntaxCodeBlock")}static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),aa.blotName,!1),super.replaceWith(e,t)}},fc=class extends So{static{s(this,"SyntaxCodeBlockContainer")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===ns.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,t)}))}formatAt(e,t,r,i){r===ns.blotName&&(this.forceNext=!0),super.formatAt(e,t,r,i)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let i=`${Array.from(this.domNode.childNodes).filter(l=>l!==this.uiNode).map(l=>l.textContent).join(`
`)}
`,a=ns.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){let l=this.children.reduce((m,g)=>m.concat(P_(g,!1)),new zg.default),d=e(i,a);l.diff(d).reduce((m,g)=>{let{retain:v,attributes:_}=g;return v?(_&&Object.keys(_).forEach(E=>{[ns.blotName,aa.blotName].includes(E)&&this.formatAt(m,v,E,_[E])}),m+v):m},0)}this.cachedText=i,this.forceNext=!1}}html(e,t){let[r]=this.children.find(e);return`<pre data-language="${r?ns.formats(r.domNode):"plain"}">
${cc(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let t=ns.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}};fc.allowedChildren=[ns];ns.requiredContainer=fc;ns.allowedChildren=[aa,el,Jn,ii];var s7=s((n,e,t)=>{if(typeof n.versionString=="string"){let r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value},"highlight"),yh=class extends hr{static{s(this,"Syntax")}static register(){ye.register(aa,!0),ye.register(ns,!0),ye.register(fc,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:a}=i;return r[a]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(ye.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof fc))return;let t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:a}=r,l=t.ownerDocument.createElement("option");l.textContent=a,l.setAttribute("value",i),t.appendChild(l)}),t.addEventListener("change",()=>{e.format(ns.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=ns.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(ye.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(ye.sources.USER);let r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(fc):[e]).forEach(a=>{a.highlight(this.highlightBlot,t)}),this.quill.update(ye.sources.SILENT),r!=null&&this.quill.setSelection(r,ye.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return cc(e).split(`
`).reduce((i,a,l)=>(l!==0&&i.insert(`
`,{[mr.blotName]:t}),i.insert(a)),new zg.default);let r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(mr.className),r.innerHTML=s7(this.options.hljs,t,e),qg(this.quill.scroll,r,[(i,a)=>{let l=gh.value(i);return l?a.compose(new zg.default().retain(a.length(),{[aa.blotName]:l})):a}],[(i,a)=>i.data.split(`
`).reduce((l,d,m)=>(m!==0&&l.insert(`
`,{[mr.blotName]:t}),l.insert(d)),a)],new WeakMap)}};yh.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var aN=Qn(ms(),1);var Ps=class n extends An{static{s(this,"TableCell")}static blotName="table";static tagName="TD";static create(e){let t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",$g()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===n.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},Co=class extends Is{static{s(this,"TableRow")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===t.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;let r=t.formats(),i=t.next.formats();if(r.table!==i.table){let a=this.splitAfter(t);a&&a.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}},ro=class extends Is{static{s(this,"TableBody")}static blotName="table-body";static tagName="TBODY"},hc=class extends Is{static{s(this,"TableContainer")}static blotName="table-container";static tagName="TABLE";balanceCells(){let e=this.descendants(Co),t=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=Ps.formats(r.children.head.domNode));let a=this.scroll.create(Ps.blotName,i);r.appendChild(a),a.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){let[t]=this.descendant(ro);t==null||t.children.head==null||t.children.forEach(r=>{let i=r.children.at(e);i?.remove()})}insertColumn(e){let[t]=this.descendant(ro);t==null||t.children.head==null||t.children.forEach(r=>{let i=r.children.at(e),a=Ps.formats(r.children.head.domNode),l=this.scroll.create(Ps.blotName,a);r.insertBefore(l,i)})}insertRow(e){let[t]=this.descendant(ro);if(t==null||t.children.head==null)return;let r=$g(),i=this.scroll.create(Co.blotName);t.children.head.children.forEach(()=>{let l=this.scroll.create(Ps.blotName,r);i.appendChild(l)});let a=t.children.at(e);t.insertBefore(i,a)}rows(){let e=this.children.head;return e==null?[]:e.children.map(t=>t)}};hc.allowedChildren=[ro];ro.requiredContainer=hc;ro.allowedChildren=[Co];Co.requiredContainer=ro;Co.allowedChildren=[Ps];Ps.requiredContainer=Co;function $g(){return`row-${Math.random().toString(36).slice(2,6)}`}s($g,"tableId");var Nx=class extends hr{static{s(this,"Table")}static register(){ye.register(Ps),ye.register(Co),ye.register(ro),ye.register(hc)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(hc).forEach(e=>{e.balanceCells()})}deleteColumn(){let[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(ye.sources.USER))}deleteRow(){let[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(ye.sources.USER))}deleteTable(){let[e]=this.getTable();if(e==null)return;let t=e.offset();e.remove(),this.quill.update(ye.sources.USER),this.quill.setSelection(t,ye.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];let[t,r]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Ps.blotName)return[null,null,null,-1];let i=t.parent;return[i.parent.parent,i,t,r]}insertColumn(e){let t=this.quill.getSelection();if(!t)return;let[r,i,a]=this.getTable(t);if(a==null)return;let l=a.cellOffset();r.insertColumn(l+e),this.quill.update(ye.sources.USER);let d=i.rowOffset();e===0&&(d+=1),this.quill.setSelection(t.index+d,t.length,ye.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection();if(!t)return;let[r,i,a]=this.getTable(t);if(a==null)return;let l=i.rowOffset();r.insertRow(l+e),this.quill.update(ye.sources.USER),e>0?this.quill.setSelection(t,ye.sources.SILENT):this.quill.setSelection(t.index+i.children.length,t.length,ye.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){let r=this.quill.getSelection();if(r==null)return;let i=new Array(e).fill(0).reduce(a=>{let l=new Array(t).fill(`
`).join("");return a.insert(l,{table:$g()})},new aN.default().retain(r.index));this.quill.updateContents(i,ye.sources.USER),this.quill.setSelection(r.index,ye.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(ye.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(ye.events.TEXT_CHANGE,(r,i,a)=>{a===ye.sources.USER&&this.balanceTables()}),!0):!1)})}},lN=Nx;var dN=Qn(ms(),1);var cN=ps("quill:toolbar"),$u=class extends hr{static{s(this,"Toolbar")}constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){let r=document.createElement("div");r.setAttribute("role","toolbar"),o7(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){cN.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{let i=this.options.handlers?.[r];i&&this.addHandler(r,i)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(ye.events.EDITOR_CHANGE,()=>{let[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){cN.warn("ignoring attaching to nonexistent format",t,e);return}let r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let a;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;let d=e.options[e.selectedIndex];d.hasAttribute("selected")?a=!1:a=d.value||!1}else e.classList.contains("ql-active")?a=!1:a=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();let[l]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,a);else if(this.quill.scroll.query(t).prototype instanceof Wn){if(a=prompt(`Enter ${t}`),!a)return;this.quill.updateContents(new dN.default().retain(l.index).delete(l.length).insert({[t]:a}),ye.sources.USER)}else this.quill.format(t,a,ye.sources.USER);this.update(l)}),this.controls.push([t,e])}update(e){let t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{let[i,a]=r;if(a.tagName==="SELECT"){let l=null;if(e==null)l=null;else if(t[i]==null)l=a.querySelector("option[selected]");else if(!Array.isArray(t[i])){let d=t[i];typeof d=="string"&&(d=d.replace(/"/g,'\\"')),l=a.querySelector(`option[value="${d}"]`)}l==null?(a.value="",a.selectedIndex=-1):l.selected=!0}else if(e==null)a.classList.remove("ql-active"),a.setAttribute("aria-pressed","false");else if(a.hasAttribute("value")){let l=t[i],d=l===a.getAttribute("value")||l!=null&&l.toString()===a.getAttribute("value")||l==null&&!a.getAttribute("value");a.classList.toggle("ql-active",d),a.setAttribute("aria-pressed",d.toString())}else{let l=t[i]!=null;a.classList.toggle("ql-active",l),a.setAttribute("aria-pressed",l.toString())}})}};$u.DEFAULTS={};function uN(n,e,t){let r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${e}: ${t}`)):r.setAttribute("aria-label",e),n.appendChild(r)}s(uN,"addButton");function o7(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{let r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(i=>{if(typeof i=="string")uN(r,i);else{let a=Object.keys(i)[0],l=i[a];Array.isArray(l)?a7(r,a,l):uN(r,a,l)}}),n.appendChild(r)})}s(o7,"addControls");function a7(n,e,t){let r=document.createElement("select");r.classList.add(`ql-${e}`),t.forEach(i=>{let a=document.createElement("option");i!==!1?a.setAttribute("value",String(i)):a.setAttribute("selected","selected"),r.appendChild(a)}),n.appendChild(r)}s(a7,"addSelect");$u.DEFAULTS={container:null,handlers:{clean(){let n=this.quill.getSelection();if(n!=null)if(n.length===0){let e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,qe.INLINE)!=null&&this.quill.format(t,!1,ye.sources.USER)})}else this.quill.removeFormat(n,ye.sources.USER)},direction(n){let{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",ye.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,ye.sources.USER),this.quill.format("direction",n,ye.sources.USER)},indent(n){let e=this.quill.getSelection(),t=this.quill.getFormat(e),r=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let i=n==="+1"?1:-1;t.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,ye.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,ye.sources.USER)},list(n){let e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,ye.sources.USER):this.quill.format("list","unchecked",ye.sources.USER):this.quill.format("list",n,ye.sources.USER)}}};var l7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',c7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',u7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',d7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',f7='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',h7='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',m7='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',p7='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',fN='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',g7='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',y7='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',b7='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',v7='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',_7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',x7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',w7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',E7='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',S7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',C7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',A7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',T7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',k7='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',O7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',N7='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',R7='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',M7='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',L7='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',I7='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',D7='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',il={align:{"":l7,center:c7,right:u7,justify:d7},background:f7,blockquote:h7,bold:m7,clean:p7,code:fN,"code-block":fN,color:g7,direction:{"":y7,rtl:b7},formula:v7,header:{1:_7,2:x7},italic:w7,image:E7,indent:{"+1":S7,"-1":C7},link:A7,list:{bullet:T7,check:k7,ordered:O7},script:{sub:N7,super:R7},strike:M7,table:L7,underline:I7,video:D7};var P7='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',hN=0;function mN(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}s(mN,"toggleAriaAttribute");var Rx=class{static{s(this,"Picker")}constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),mN(this.label,"aria-expanded"),mN(this.options,"aria-hidden")}buildItem(e){let t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");let r=e.getAttribute("value");return r&&t.setAttribute("data-value",r),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(t,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break;default:}}),t}buildLabel(){let e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=P7,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){let e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${hN}`,hN+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{let r=this.buildItem(t);e.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){let r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);let t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}},sl=Rx;var Mx=class extends sl{static{s(this,"ColorPicker")}constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){let t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);let r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}},Vg=Mx;var Lx=class extends sl{static{s(this,"IconPicker")}constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);let r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}},Kg=Lx;var B7=s(n=>{let{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"},"isScrollable"),Ix=class{static{s(this,"Tooltip")}constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,B7(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){let t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");let i=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect(),l=0;if(a.right>i.right&&(l=i.right-a.right,this.root.style.left=`${t+l}px`),a.left<i.left&&(l=i.left-a.left,this.root.style.left=`${t+l}px`),a.bottom>i.bottom){let d=a.bottom-a.top,m=e.bottom-e.top+d;this.root.style.top=`${r-m}px`,this.root.classList.add("ql-flip")}return l}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},Wg=Ix;var q7=[!1,"center","right","justify"],F7=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],U7=[!1,"serif","monospace"],j7=["1","2","3",!1],H7=["small",!1,"large","huge"],la=class extends Uu{static{s(this,"BaseTheme")}constructor(e,t){super(e,t);let r=s(i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(a=>{a.container.contains(i.target)||a.close()})},"listener");e.emitter.listenDOM("click",document.body,r)}addModule(e){let t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(a=>{if(a.startsWith("ql-")&&(a=a.slice(3),t[a]!=null))if(a==="direction")r.innerHTML=t[a][""]+t[a].rtl;else if(typeof t[a]=="string")r.innerHTML=t[a];else{let l=r.value||"";l!=null&&t[a][l]&&(r.innerHTML=t[a][l])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&bh(i,q7),typeof t.align=="object"))return new Kg(i,t.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){let a=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&bh(i,F7,a==="background"?"#ffffff":"#000000"),new Vg(i,t[a])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?bh(i,U7):i.classList.contains("ql-header")?bh(i,j7):i.classList.contains("ql-size")&&bh(i,H7)),new sl(i)});let r=s(()=>{this.pickers.forEach(i=>{i.update()})},"update");this.quill.on(We.events.EDITOR_CHANGE,r)}};la.DEFAULTS=Xi({},Uu.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{let e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var Vu=class extends Wg{static{s(this,"BaseTooltip")}constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,We.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,We.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=z7(e);case"formula":{if(!e)break;let t=this.quill.getSelection(!0);if(t!=null){let r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,We.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",We.sources.USER),this.quill.setSelection(r+2,We.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function z7(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}s(z7,"extractVideoUrl");function bh(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{let i=document.createElement("option");r===t?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),n.appendChild(i)})}s(bh,"fillSelect");var $7=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Dx=class extends Vu{static{s(this,"BubbleTooltip")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(We.events.EDITOR_CHANGE,(r,i,a,l)=>{if(r===We.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&l===We.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let d=this.quill.getLines(i.index,i.length);if(d.length===1){let m=this.quill.getBounds(i);m!=null&&this.position(m)}else{let m=d[d.length-1],g=this.quill.getIndex(m),v=Math.min(m.length()-1,i.index+i.length-g),_=this.quill.getBounds(new Ti(g,v));_!=null&&this.position(_)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(We.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let e=this.quill.getSelection();if(e!=null){let t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){let t=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}},vh=class extends la{static{s(this,"BubbleTheme")}constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=$7),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Dx(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),il),this.buildPickers(e.container.querySelectorAll("select"),il))}};vh.DEFAULTS=Xi({},la.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var V7=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Px=class extends Vu{static{s(this,"SnowTooltip")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){let t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,We.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(We.events.SELECTION_CHANGE,(e,t,r)=>{if(e!=null){if(e.length===0&&r===We.sources.USER){let[i,a]=this.quill.scroll.descendant(oa,e.index);if(i!=null){this.linkRange=new Ti(e.index-a,i.length());let l=oa.formats(i.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();let d=this.quill.getBounds(this.linkRange);d!=null&&this.position(d);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}},Gg=class extends la{static{s(this,"SnowTheme")}constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=V7),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),il),this.buildPickers(e.container.querySelectorAll("select"),il),this.tooltip=new Px(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{e.handlers.link.call(e,!r.format.link)}))}};Gg.DEFAULTS=Xi({},la.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){let e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);let{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1)}}}}});var pN=Gg;Hg.register({"attributors/attribute/direction":Rg,"attributors/class/align":sx,"attributors/class/background":IO,"attributors/class/color":LO,"attributors/class/direction":ax,"attributors/class/font":cx,"attributors/class/size":ux,"attributors/style/align":Ng,"attributors/style/background":fh,"attributors/style/color":dh,"attributors/style/direction":Mg,"attributors/style/font":Lg,"attributors/style/size":Ig},!0);Hg.register({"formats/align":sx,"formats/direction":ax,"formats/indent":ZO,"formats/background":fh,"formats/color":dh,"formats/font":cx,"formats/size":ux,"formats/blockquote":YO,"formats/code-block":mr,"formats/header":XO,"formats/list":rl,"formats/bold":zu,"formats/code":Hu,"formats/italic":QO,"formats/link":oa,"formats/script":JO,"formats/strike":eN,"formats/underline":tN,"formats/formula":nN,"formats/image":iN,"formats/video":oN,"modules/syntax":yh,"modules/table":lN,"modules/toolbar":$u,"themes/bubble":vh,"themes/snow":pN,"ui/icons":il,"ui/picker":sl,"ui/icon-picker":Kg,"ui/color-picker":Vg,"ui/tooltip":Wg},!0);var mc=Hg;var t2=Qn(yN());var K7=mc.import("blots/block"),pc=class extends K7{static{s(this,"LoadingImage")}static create(e){let t=super.create(e);if(e===!0)return t;let r=document.createElement("img");return r.setAttribute("src",e),t.appendChild(r),t}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}static value(e){let{src:t,custom:r}=e.dataset;return{src:t,custom:r}}};pc.blotName="imageBlot";pc.className="image-uploading";pc.tagName="span";mc.register({"formats/imageBlot":pc});var bN=pc;var Zg=class{static{s(this,"ImageUploader")}constructor(e,t){this.quill=e,this.options=t,this.range=null,this.placeholderDelta=null,typeof this.options.upload!="function"&&console.warn("[Missing config] upload function that returns a promise is required");var r=this.quill.getModule("toolbar");r&&r.addHandler("image",this.selectLocalImage.bind(this)),this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1)}selectLocalImage(){this.quill.focus(),this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=this.fileChanged.bind(this),document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(()=>{document.body.removeChild(this.fileHolder)})}handleDrop(e){if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){if(e.stopPropagation(),e.preventDefault(),document.caretRangeFromPoint){let r=document.getSelection(),i=document.caretRangeFromPoint(e.clientX,e.clientY);r&&i&&r.setBaseAndExtent(i.startContainer,i.startOffset,i.startContainer,i.startOffset)}else{let r=document.getSelection(),i=document.caretPositionFromPoint(e.clientX,e.clientY);r&&i&&r.setBaseAndExtent(i.offsetNode,i.offset,i.offsetNode,i.offset)}this.quill.focus(),this.range=this.quill.getSelection();let t=e.dataTransfer.files[0];setTimeout(()=>{this.quill.focus(),this.range=this.quill.getSelection(),this.readAndUploadFile(t)},0)}}handlePaste(e){let t=e.clipboardData||window.clipboardData;if(t&&(t.items||t.files)){let r=t.items||t.files,i=/^image\/(jpe?g|gif|png|svg|webp)$/i;for(let a=0;a<r.length;a++)if(i.test(r[a].type)){let l=r[a].getAsFile?r[a].getAsFile():r[a];l&&(this.quill.focus(),this.range=this.quill.getSelection(),e.preventDefault(),setTimeout(()=>{this.quill.focus(),this.range=this.quill.getSelection(),this.readAndUploadFile(l)},0))}}}readAndUploadFile(e){let t=!1,r=new FileReader;r.addEventListener("load",()=>{if(!t){let i=r.result;this.insertBase64Image(i)}},!1),e&&r.readAsDataURL(e),this.options.upload(e).then(i=>{this.insertToEditor(i)},i=>{t=!0,this.removeBase64Image(),console.warn(i)})}fileChanged(){let e=this.fileHolder.files[0];this.readAndUploadFile(e)}insertBase64Image(e){let t=this.range;this.placeholderDelta=this.quill.insertEmbed(t.index,bN.blotName,`${e}`,"user")}insertToEditor(e){let t=this.range,r=this.calculatePlaceholderInsertLength();this.quill.deleteText(t.index,r,"user"),this.quill.insertEmbed(t.index,"image",`${e}`,"user"),t.index++,this.quill.setSelection(t,"user")}calculatePlaceholderInsertLength(){return this.placeholderDelta.ops.reduce((e,t)=>(t.hasOwnProperty("insert")&&e++,e),0)}removeBase64Image(){let e=this.range,t=this.calculatePlaceholderInsertLength();this.quill.deleteText(e.index,t,"user")}};window.ImageUploader=Zg;var vN=Zg;var _N=s(n=>{let e=n.httpHandler;return{setHttpHandler(t){e=t},httpHandler(){return e},updateHttpClientConfig(t,r){e.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),xN=s(n=>({httpHandler:n.httpHandler()}),"resolveHttpHandlerRuntimeConfig");var wN;(function(n){n.HEADER="header",n.QUERY="query"})(wN||(wN={}));var Fx;(function(n){n.HEADER="header",n.QUERY="query"})(Fx||(Fx={}));var Wu;(function(n){n.HTTP="http",n.HTTPS="https"})(Wu||(Wu={}));var Gu;(function(n){n.MD5="md5",n.CRC32="crc32",n.CRC32C="crc32c",n.SHA1="sha1",n.SHA256="sha256"})(Gu||(Gu={}));var Ux;(function(n){n[n.HEADER=0]="HEADER",n[n.TRAILER=1]="TRAILER"})(Ux||(Ux={}));var Zu="__smithy_context";var EN;(function(n){n.PROFILE="profile",n.SSO_SESSION="sso-session",n.SERVICES="services"})(EN||(EN={}));var SN;(function(n){n.HTTP_0_9="http/0.9",n.HTTP_1_0="http/1.0",n.TDS_8_0="tds/8.0"})(SN||(SN={}));var kt=class n{static{s(this,"HttpRequest")}constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let t=new n({...e,headers:{...e.headers}});return t.query&&(t.query=W7(t.query)),t}static isInstance(e){if(!e)return!1;let t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query=="object"&&typeof t.headers=="object"}clone(){return n.clone(this)}};function W7(n){return Object.keys(n).reduce((e,t)=>{let r=n[t];return{...e,[t]:Array.isArray(r)?[...r]:r}},{})}s(W7,"cloneQuery");var gs=class{static{s(this,"HttpResponse")}constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let t=e;return typeof t.statusCode=="number"&&typeof t.headers=="object"}};function G7(n){return e=>async t=>{let{request:r}=t;return kt.isInstance(r)&&r.body&&n.runtime==="node"&&n.requestHandler?.constructor?.name!=="FetchHttpHandler"&&(r.headers={...r.headers,Expect:"100-continue"}),e({...t,request:r})}}s(G7,"addExpectContinueMiddleware");var Z7={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},CN=s(n=>({applyToStack:e=>{e.add(G7(n),Z7)}}),"getAddExpectContinuePlugin");var Ao={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},jx=Ao.WHEN_SUPPORTED,_h={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Hx=Ao.WHEN_SUPPORTED,en;(function(n){n.MD5="MD5",n.CRC32="CRC32",n.CRC32C="CRC32C",n.CRC64NVME="CRC64NVME",n.SHA1="SHA1",n.SHA256="SHA256"})(en||(en={}));var AN;(function(n){n.HEADER="header",n.TRAILER="trailer"})(AN||(AN={}));var xh=en.CRC32;var Yg;(function(n){n.ENV="env",n.CONFIG="shared config entry"})(Yg||(Yg={}));var zx={CrtCrc64Nvme:null};function TN(n,e,t){return n.$source||(n.$source={}),n.$source[e]=t,n}s(TN,"setCredentialFeature");function jn(n,e,t){n.__aws_sdk_context?n.__aws_sdk_context.features||(n.__aws_sdk_context.features={}):n.__aws_sdk_context={features:{}},n.__aws_sdk_context.features[e]=t}s(jn,"setFeature");var $x=s(n=>gs.isInstance(n)?n.headers?.date??n.headers?.Date:void 0,"getDateHeader");var Yu=s(n=>new Date(Date.now()+n),"getSkewCorrectedDate");var kN=s((n,e)=>Math.abs(Yu(e).getTime()-n)>=3e5,"isClockSkewed");var Vx=s((n,e)=>{let t=Date.parse(n);return kN(t,e)?t-Date.now():e},"getUpdatedSystemClockOffset");var wh=s((n,e)=>{if(!e)throw new Error(`Property \`${n}\` is not resolved for AWS SDK SigV4Auth`);return e},"throwSigningPropertyError"),Xg=s(async n=>{let e=wh("context",n.context),t=wh("config",n.config),r=e.endpointV2?.properties?.authSchemes?.[0],a=await wh("signer",t.signer)(r),l=n?.signingRegion,d=n?.signingRegionSet,m=n?.signingName;return{config:t,signer:a,signingRegion:l,signingRegionSet:d,signingName:m}},"validateSigningProperties"),gc=class{static{s(this,"AwsSdkSigV4Signer")}async sign(e,t,r){if(!kt.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let i=await Xg(r),{config:a,signer:l}=i,{signingRegion:d,signingName:m}=i,g=r.context;if(g?.authSchemes?.length??!1){let[_,E]=g.authSchemes;_?.name==="sigv4a"&&E?.name==="sigv4"&&(d=E?.signingRegion??d,m=E?.signingName??m)}return await l.sign(e,{signingDate:Yu(a.systemClockOffset),signingRegion:d,signingService:m})}errorHandler(e){return t=>{let r=t.ServerTime??$x(t.$response);if(r){let i=wh("config",e.config),a=i.systemClockOffset;i.systemClockOffset=Vx(r,i.systemClockOffset),i.systemClockOffset!==a&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){let r=$x(e);if(r){let i=wh("config",t.config);i.systemClockOffset=Vx(r,i.systemClockOffset)}}};var Eh=class extends gc{static{s(this,"AwsSdkSigV4ASigner")}async sign(e,t,r){if(!kt.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:i,signer:a,signingRegion:l,signingRegionSet:d,signingName:m}=await Xg(r),v=(await i.sigv4aSigningRegionSet?.()??d??[l]).join(",");return await a.sign(e,{signingDate:Yu(i.systemClockOffset),signingRegion:v,signingService:m})}};var io=s(n=>n[Zu]||(n[Zu]={}),"getSmithyContext");var Kr=s(n=>{if(typeof n=="function")return n;let e=Promise.resolve(n);return()=>e},"normalizeProvider");function X7(n){let e=new Map;for(let t of n)e.set(t.schemeId,t);return e}s(X7,"convertHttpAuthSchemesToMap");var Kx=s((n,e)=>(t,r)=>async i=>{let a=n.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(n,r,i.input)),l=X7(n.httpAuthSchemes),d=io(r),m=[];for(let g of a){let v=l.get(g.schemeId);if(!v){m.push(`HttpAuthScheme \`${g.schemeId}\` was not enabled for this service.`);continue}let _=v.identityProvider(await e.identityProviderConfigProvider(n));if(!_){m.push(`HttpAuthScheme \`${g.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:E={},signingProperties:C={}}=g.propertiesExtractor?.(n,r)||{};g.identityProperties=Object.assign(g.identityProperties||{},E),g.signingProperties=Object.assign(g.signingProperties||{},C),d.selectedHttpAuthScheme={httpAuthOption:g,identity:await _(g.identityProperties),signer:v.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(m.join(`
`));return t(i)},"httpAuthSchemeMiddleware");var Q7={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},ON=s((n,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:t})=>({applyToStack:r=>{r.addRelativeTo(Kx(n,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:t}),Q7)}}),"getHttpAuthSchemeEndpointRuleSetPlugin");var NN=s((n,e)=>(t,r)=>async i=>{let{response:a}=await t(i);try{let l=await e(a,n);return{response:a,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:a}),!("$metadata"in l)){let d="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+d}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(d):r.logger?.warn?.(d)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText)}throw l}},"deserializerMiddleware");var RN=s((n,e)=>(t,r)=>async i=>{let a=r.endpointV2?.url&&n.urlParser?async()=>n.urlParser(r.endpointV2.url):n.endpoint;if(!a)throw new Error("No valid endpoint provider available.");let l=await e(i.input,{...n,endpoint:a});return t({...i,request:l})},"serializerMiddleware");var J7={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Sh={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Qg(n,e,t){return{applyToStack:r=>{r.add(NN(n,t),J7),r.add(RN(n,e),Sh)}}}s(Qg,"getSerdePlugin");var wye={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Sh.name};var ez=s(n=>e=>{throw e},"defaultErrorHandler"),tz=s((n,e)=>{},"defaultSuccessHandler"),MN=s(n=>(e,t)=>async r=>{if(!kt.isInstance(r.request))return e(r);let a=io(t).selectedHttpAuthScheme;if(!a)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:l={}},identity:d,signer:m}=a,g=await e({...r,request:await m.sign(r.request,d,l)}).catch((m.errorHandler||ez)(l));return(m.successHandler||tz)(g.response,l),g},"httpSigningMiddleware");var Wx={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},LN=s(n=>({applyToStack:e=>{e.addRelativeTo(MN(n),Wx)}}),"getHttpSigningPlugin");var ca=s(n=>{if(typeof n=="function")return n;let e=Promise.resolve(n);return()=>e},"normalizeProvider");var ua={},yc=new Array(64);for(let n=0,e=65,t=90;n+e<=t;n++){let r=String.fromCharCode(n+e);ua[r]=n,yc[n]=r}for(let n=0,e=97,t=122;n+e<=t;n++){let r=String.fromCharCode(n+e),i=n+26;ua[r]=i,yc[i]=r}for(let n=0;n<10;n++){ua[n.toString(10)]=n+52;let e=n.toString(10),t=n+52;ua[e]=t,yc[t]=e}ua["+"]=62;yc[62]="+";ua["/"]=63;yc[63]="/";var al=6,bc=8,IN=63;var Xu=s(n=>{let e=n.length/4*3;n.slice(-2)==="=="?e-=2:n.slice(-1)==="="&&e--;let t=new ArrayBuffer(e),r=new DataView(t);for(let i=0;i<n.length;i+=4){let a=0,l=0;for(let g=i,v=i+3;g<=v;g++)if(n[g]!=="="){if(!(n[g]in ua))throw new TypeError(`Invalid character ${n[g]} in base64 string.`);a|=ua[n[g]]<<(v-g)*al,l+=al}else a>>=al;let d=i/4*3;a>>=l%bc;let m=Math.floor(l/bc);for(let g=0;g<m;g++){let v=(m-g-1)*bc;r.setUint8(d+g,(a&255<<v)>>v)}}return new Uint8Array(t)},"fromBase64");var ys=s(n=>new TextEncoder().encode(n),"fromUtf8");var To=s(n=>typeof n=="string"?ys(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n),"toUint8Array");var Qu=s(n=>{if(typeof n=="string")return n;if(typeof n!="object"||typeof n.byteOffset!="number"||typeof n.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(n)},"toUtf8");function ll(n){let e;typeof n=="string"?e=ys(n):e=n;let t=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!t&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let a=0;a<e.length;a+=3){let l=0,d=0;for(let g=a,v=Math.min(a+3,e.length);g<v;g++)l|=e[g]<<(v-g-1)*bc,d+=bc;let m=Math.ceil(d/al);l<<=m*al-d;for(let g=1;g<=m;g++){let v=(m-g)*al;i+=yc[(l&IN<<v)>>v]}i+="==".slice(0,4-m)}return i}s(ll,"toBase64");function DN(n,e="utf-8"){return e==="base64"?ll(n):Qu(n)}s(DN,"transformToString");function PN(n,e){return e==="base64"?da.mutate(Xu(n)):da.mutate(ys(n))}s(PN,"transformFromString");var da=class n extends Uint8Array{static{s(this,"Uint8ArrayBlobAdapter")}static fromString(e,t="utf-8"){switch(typeof e){case"string":return PN(e,t);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,n.prototype),e}transformToString(e="utf-8"){return DN(this,e)}};var nz=typeof ReadableStream=="function"?ReadableStream:function(){},Jg=class extends nz{static{s(this,"ChecksumStream")}};var Ch=s(n=>typeof ReadableStream=="function"&&(n?.constructor?.name===ReadableStream.name||n instanceof ReadableStream),"isReadableStream");var BN=s(({expectedChecksum:n,checksum:e,source:t,checksumSourceLocation:r,base64Encoder:i})=>{if(!Ch(t))throw new Error(`@smithy/util-stream: unsupported source type ${t?.constructor?.name??t} in ChecksumStream.`);let a=i??ll;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let l=new TransformStream({start(){},async transform(m,g){e.update(m),g.enqueue(m)},async flush(m){let g=await e.digest(),v=a(g);if(n!==v){let _=new Error(`Checksum mismatch: expected "${n}" but received "${v}" in response header "${r}".`);m.error(_)}else m.terminate()}});t.pipeThrough(l);let d=l.readable;return Object.setPrototypeOf(d,Jg.prototype),d},"createChecksumStream");var ey=class{static{s(this,"ByteArrayCollector")}constructor(e){this.allocByteArray=e,this.byteLength=0,this.byteArrays=[]}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let r=this.byteArrays[0];return this.reset(),r}let e=this.allocByteArray(this.byteLength),t=0;for(let r=0;r<this.byteArrays.length;++r){let i=this.byteArrays[r];e.set(i,t),t+=i.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};function rz(n,e,t){let r=n.getReader(),i=!1,a=0,l=["",new ey(g=>new Uint8Array(g))],d=-1,m=s(async g=>{let{value:v,done:_}=await r.read(),E=v;if(_){if(d!==-1){let C=Gx(l,d);Ah(C)>0&&g.enqueue(C)}g.close()}else{let C=sz(E);if(d!==C&&(d>=0&&g.enqueue(Gx(l,d)),d=C),d===-1){g.enqueue(E);return}let k=Ah(E);a+=k;let D=Ah(l[d]);if(k>=e&&D===0)g.enqueue(E);else{let O=iz(l,d,E);!i&&a>e*2&&(i=!0,t?.warn(`@smithy/util-stream - stream chunk size ${k} is below threshold of ${e}, automatically buffering.`)),O>=e?g.enqueue(Gx(l,d)):await m(g)}}},"pull");return new ReadableStream({pull:m})}s(rz,"createBufferedReadableStream");var qN=rz;function iz(n,e,t){switch(e){case 0:return n[0]+=t,Ah(n[0]);case 1:case 2:return n[e].push(t),Ah(n[e])}}s(iz,"merge");function Gx(n,e){switch(e){case 0:let t=n[0];return n[0]="",t;case 1:case 2:return n[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}s(Gx,"flush");function Ah(n){return n?.byteLength??n?.length??0}s(Ah,"sizeOf");function sz(n){return typeof Buffer<"u"&&n instanceof Buffer?2:n instanceof Uint8Array?1:typeof n=="string"?0:-1}s(sz,"modeOf");var FN=s((n,e)=>{let{base64Encoder:t,bodyLengthChecker:r,checksumAlgorithmFn:i,checksumLocationName:a,streamHasher:l}=e,d=t!==void 0&&r!==void 0&&i!==void 0&&a!==void 0&&l!==void 0,m=d?l(i,n):void 0,g=n.getReader();return new ReadableStream({async pull(v){let{value:_,done:E}=await g.read();if(E){if(v.enqueue(`0\r
`),d){let C=t(await m);v.enqueue(`${a}:${C}\r
`),v.enqueue(`\r
`)}v.close()}else v.enqueue(`${(r(_)||0).toString(16)}\r
${_}\r
`)}})},"getAwsChunkedEncodingStream");async function UN(n,e){let t=0,r=[],i=n.getReader(),a=!1;for(;!a;){let{done:m,value:g}=await i.read();if(g&&(r.push(g),t+=g?.byteLength??0),t>=e)break;a=m}i.releaseLock();let l=new Uint8Array(Math.min(e,t)),d=0;for(let m of r){if(m.byteLength>l.byteLength-d){l.set(m.subarray(0,l.byteLength-d),d);break}else l.set(m,d);d+=m.length}return l}s(UN,"headStream");var so=s(n=>encodeURIComponent(n).replace(/[!'()*]/g,oz),"escapeUri"),oz=s(n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode");function jN(n){let e=[];for(let t of Object.keys(n).sort()){let r=n[t];if(t=so(t),Array.isArray(r))for(let i=0,a=r.length;i<a;i++)e.push(`${t}=${so(r[i])}`);else{let i=t;(r||typeof r=="string")&&(i+=`=${so(r)}`),e.push(i)}}return e.join("&")}s(jN,"buildQueryString");function Zx(n,e){return new Request(n,e)}s(Zx,"createRequest");function HN(n=0){return new Promise((e,t)=>{n&&setTimeout(()=>{let r=new Error(`Request did not complete within ${n} ms`);r.name="TimeoutError",t(r)},n)})}s(HN,"requestTimeout");var Yx={supported:void 0},ty=class n{static{s(this,"FetchHttpHandler")}static create(e){return typeof e?.handle=="function"?e:new n(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(t=>t||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Yx.supported===void 0&&(Yx.supported=typeof Request<"u"&&"keepalive"in Zx("https://[::1]"))}destroy(){}async handle(e,{abortSignal:t}={}){this.config||(this.config=await this.configProvider);let r=this.config.requestTimeout,i=this.config.keepAlive===!0,a=this.config.credentials;if(t?.aborted){let P=new Error("Request aborted");return P.name="AbortError",Promise.reject(P)}let l=e.path,d=jN(e.query||{});d&&(l+=`?${d}`),e.fragment&&(l+=`#${e.fragment}`);let m="";if(e.username!=null||e.password!=null){let P=e.username??"",j=e.password??"";m=`${P}:${j}@`}let{port:g,method:v}=e,_=`${e.protocol}//${m}${e.hostname}${g?`:${g}`:""}${l}`,E=v==="GET"||v==="HEAD"?void 0:e.body,C={body:E,headers:new Headers(e.headers),method:v,credentials:a};this.config?.cache&&(C.cache=this.config.cache),E&&(C.duplex="half"),typeof AbortController<"u"&&(C.signal=t),Yx.supported&&(C.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(C,this.config.requestInit(e));let k=s(()=>{},"removeSignalEventListener"),D=Zx(_,C),O=[fetch(D).then(P=>{let j=P.headers,W={};for(let ae of j.entries())W[ae[0]]=ae[1];return P.body!=null?{response:new gs({headers:W,reason:P.statusText,statusCode:P.status,body:P.body})}:P.blob().then(ae=>({response:new gs({headers:W,reason:P.statusText,statusCode:P.status,body:ae})}))}),HN(r)];return t&&O.push(new Promise((P,j)=>{let W=s(()=>{let Z=new Error("Request aborted");Z.name="AbortError",j(Z)},"onAbort");if(typeof t.addEventListener=="function"){let Z=t;Z.addEventListener("abort",W,{once:!0}),k=s(()=>Z.removeEventListener("abort",W),"removeSignalEventListener")}else t.onabort=W})),Promise.race(O).finally(k)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=t,r))}httpHandlerConfigs(){return this.config??{}}};var ny=s(async n=>typeof Blob=="function"&&n instanceof Blob||n.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await n.arrayBuffer()):az(n):lz(n),"streamCollector");async function az(n){let e=await cz(n),t=Xu(e);return new Uint8Array(t)}s(az,"collectBlob");async function lz(n){let e=[],t=n.getReader(),r=!1,i=0;for(;!r;){let{done:d,value:m}=await t.read();m&&(e.push(m),i+=m.length),r=d}let a=new Uint8Array(i),l=0;for(let d of e)a.set(d,l),l+=d.length;return a}s(lz,"collectStream");function cz(n){return new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return t(new Error("Reader aborted too early"));let i=r.result??"",a=i.indexOf(","),l=a>-1?a+1:i.length;e(i.substring(l))},r.onabort=()=>t(new Error("Read aborted")),r.onerror=()=>t(r.error),r.readAsDataURL(n)})}s(cz,"readToBase64");var zN={},Xx={};for(let n=0;n<256;n++){let e=n.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),zN[n]=e,Xx[e]=n}function ry(n){if(n.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2){let r=n.slice(t,t+2).toLowerCase();if(r in Xx)e[t/2]=Xx[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}s(ry,"fromHex");function er(n){let e="";for(let t=0;t<n.byteLength;t++)e+=zN[n[t]];return e}s(er,"toHex");var $N="The stream has already been transformed.",KN=s(n=>{if(!VN(n)&&!Ch(n)){let i=n?.__proto__?.constructor?.name||n;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${i}`)}let e=!1,t=s(async()=>{if(e)throw new Error($N);return e=!0,await ny(n)},"transformToByteArray"),r=s(i=>{if(typeof i.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return i.stream()},"blobToWebStream");return Object.assign(n,{transformToByteArray:t,transformToString:async i=>{let a=await t();if(i==="base64")return ll(a);if(i==="hex")return er(a);if(i===void 0||i==="utf8"||i==="utf-8")return Qu(a);if(typeof TextDecoder=="function")return new TextDecoder(i).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error($N);if(e=!0,VN(n))return r(n);if(Ch(n))return n;throw new Error(`Cannot transform payload to web stream, got ${n}`)}})},"sdkStreamMixin"),VN=s(n=>typeof Blob=="function"&&n instanceof Blob,"isBlobInstance");async function WN(n){return typeof n.stream=="function"&&(n=n.stream()),n.tee()}s(WN,"splitStream");var Th=s(async(n=new Uint8Array,e)=>{if(n instanceof Uint8Array)return da.mutate(n);if(!n)return da.mutate(new Uint8Array);let t=e.streamCollector(n);return da.mutate(await t)},"collectBody");function iy(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}s(iy,"extendedEncodeURIComponent");var Qx=s((n,e,t,r,i,a)=>{if(e!=null&&e[t]!==void 0){let l=r();if(l.length<=0)throw new Error("Empty value provided for input HTTP label: "+t+".");n=n.replace(i,a?l.split("/").map(d=>iy(d)).join("/"):iy(l))}else throw new Error("No value provided for input HTTP label: "+t+".");return n},"resolvedPath");function sy(n,e){return new Jx(n,e)}s(sy,"requestBuilder");var Jx=class{static{s(this,"RequestBuilder")}constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:e,protocol:t="https",port:r,path:i}=await this.context.endpoint();this.path=i;for(let a of this.resolvePathStack)a(this.path);return new kt({protocol:t,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith("/")?t.slice(0,-1):t||""}`+e}),this}p(e,t,r,i){return this.resolvePathStack.push(a=>{this.path=Qx(a,this.input,e,t,r,i)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}};function GN(n,e,t){n.__smithy_context?n.__smithy_context.features||(n.__smithy_context.features={}):n.__smithy_context={features:{}},n.__smithy_context.features[e]=t}s(GN,"setFeature");var oy=class{static{s(this,"DefaultIdentityProviderConfig")}constructor(e){this.authSchemes=new Map;for(let[t,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(t,r)}getIdentityProvider(e){return this.authSchemes.get(e)}};var uz=s(n=>e=>ew(e)&&e.expiration.getTime()-Date.now()<n,"createIsIdentityExpiredFunction"),dz=3e5,ZN=uz(dz),ew=s(n=>n.expiration!==void 0,"doesIdentityRequireRefresh"),YN=s((n,e,t)=>{if(n===void 0)return;let r=typeof n!="function"?async()=>Promise.resolve(n):n,i,a,l,d=!1,m=s(async g=>{a||(a=r(g));try{i=await a,l=!0,d=!1}finally{a=void 0}return i},"coalesceProvider");return e===void 0?async g=>((!l||g?.forceRefresh)&&(i=await m(g)),i):async g=>((!l||g?.forceRefresh)&&(i=await m(g)),d?i:t(i)?(e(i)&&await m(g),i):(d=!0,i))},"memoizeIdentityProvider");var XN=s((n,e,t)=>{let r,i,a,l=!1,d=s(async()=>{i||(i=n());try{r=await i,a=!0,l=!1}finally{i=void 0}return r},"coalesceProvider");return e===void 0?async m=>((!a||m?.forceRefresh)&&(r=await d()),r):async m=>((!a||m?.forceRefresh)&&(r=await d()),l?r:t&&!t(r)?(l=!0,r):(e(r)&&await d(),r))},"memoize");var QN=s(n=>(n.sigv4aSigningRegionSet=ca(n.sigv4aSigningRegionSet),n),"resolveAwsSdkSigV4AConfig");var JN="X-Amz-Algorithm",eR="X-Amz-Credential",nw="X-Amz-Date",tR="X-Amz-SignedHeaders",nR="X-Amz-Expires",rw="X-Amz-Signature",iw="X-Amz-Security-Token";var sw="authorization",ow=nw.toLowerCase(),fz="date",rR=[sw,ow,fz],iR=rw.toLowerCase(),kh="x-amz-content-sha256",sR=iw.toLowerCase();var oR={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},aR=/^proxy-/,lR=/^sec-/;var ay="AWS4-HMAC-SHA256";var cR="AWS4-HMAC-SHA256-PAYLOAD",uR="UNSIGNED-PAYLOAD",dR=50,aw="aws4_request",fR=60*60*24*7;var ly={},lw=[],cy=s((n,e,t)=>`${n}/${e}/${t}/${aw}`,"createScope"),mR=s(async(n,e,t,r,i)=>{let a=await hR(n,e.secretAccessKey,e.accessKeyId),l=`${t}:${r}:${i}:${er(a)}:${e.sessionToken}`;if(l in ly)return ly[l];for(lw.push(l);lw.length>dR;)delete ly[lw.shift()];let d=`AWS4${e.secretAccessKey}`;for(let m of[t,r,i,aw])d=await hR(n,d,m);return ly[l]=d},"getSigningKey");var hR=s((n,e,t)=>{let r=new n(e);return r.update(To(t)),r.digest()},"hmac");var uy=s(({headers:n},e,t)=>{let r={};for(let i of Object.keys(n).sort()){if(n[i]==null)continue;let a=i.toLowerCase();(a in oR||e?.has(a)||aR.test(a)||lR.test(a))&&(!t||t&&!t.has(a))||(r[a]=n[i].trim().replace(/\s+/g," "))}return r},"getCanonicalHeaders");var cw=s(({query:n={}})=>{let e=[],t={};for(let r of Object.keys(n)){if(r.toLowerCase()===iR)continue;let i=so(r);e.push(i);let a=n[r];typeof a=="string"?t[i]=`${i}=${so(a)}`:Array.isArray(a)&&(t[i]=a.slice(0).reduce((l,d)=>l.concat([`${i}=${so(d)}`]),[]).sort().join("&"))}return e.sort().map(r=>t[r]).filter(r=>r).join("&")},"getCanonicalQuery");var dy=s(n=>typeof ArrayBuffer=="function"&&n instanceof ArrayBuffer||Object.prototype.toString.call(n)==="[object ArrayBuffer]","isArrayBuffer");var Oh=s(async({headers:n,body:e},t)=>{for(let r of Object.keys(n))if(r.toLowerCase()===kh)return n[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||dy(e)){let r=new t;return r.update(To(e)),er(await r.digest())}return uR},"getPayloadHash");var fy=class{static{s(this,"HeaderFormatter")}format(e){let t=[];for(let a of Object.keys(e)){let l=ys(a);t.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(e[a]))}let r=new Uint8Array(t.reduce((a,l)=>a+l.byteLength,0)),i=0;for(let a of t)r.set(a,i),i+=a.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let i=new Uint8Array(9);return i[0]=5,i.set(e.value.bytes,1),i;case"binary":let a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);let l=new Uint8Array(a.buffer);return l.set(e.value,3),l;case"string":let d=ys(e.value),m=new DataView(new ArrayBuffer(3+d.byteLength));m.setUint8(0,7),m.setUint16(1,d.byteLength,!1);let g=new Uint8Array(m.buffer);return g.set(d,3),g;case"timestamp":let v=new Uint8Array(9);return v[0]=8,v.set(uw.fromNumber(e.value.valueOf()).bytes,1),v;case"uuid":if(!hz.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let _=new Uint8Array(17);return _[0]=9,_.set(ry(e.value.replace(/\-/g,"")),1),_}}},pR;(function(n){n[n.boolTrue=0]="boolTrue",n[n.boolFalse=1]="boolFalse",n[n.byte=2]="byte",n[n.short=3]="short",n[n.integer=4]="integer",n[n.long=5]="long",n[n.byteArray=6]="byteArray",n[n.string=7]="string",n[n.timestamp=8]="timestamp",n[n.uuid=9]="uuid"})(pR||(pR={}));var hz=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,uw=class n{static{s(this,"Int64")}constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,i=Math.abs(Math.round(e));r>-1&&i>0;r--,i/=256)t[r]=i;return e<0&&gR(t),new n(t)}valueOf(){let e=this.bytes.slice(0),t=e[0]&128;return t&&gR(e),parseInt(er(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}};function gR(n){for(let e=0;e<8;e++)n[e]^=255;for(let e=7;e>-1&&(n[e]++,n[e]===0);e--);}s(gR,"negate");var yR=s((n,e)=>{n=n.toLowerCase();for(let t of Object.keys(e))if(n===t.toLowerCase())return!0;return!1},"hasHeader");var dw=s((n,e={})=>{let{headers:t,query:r={}}=kt.clone(n);for(let i of Object.keys(t)){let a=i.toLowerCase();(a.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(a)||e.hoistableHeaders?.has(a))&&(r[i]=t[i],delete t[i])}return{...n,headers:t,query:r}},"moveHeadersToQuery");var hy=s(n=>{n=kt.clone(n);for(let e of Object.keys(n.headers))rR.indexOf(e.toLowerCase())>-1&&delete n.headers[e];return n},"prepareRequest");var bR=s(n=>mz(n).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),mz=s(n=>typeof n=="number"?new Date(n*1e3):typeof n=="string"?Number(n)?new Date(Number(n)*1e3):new Date(n):n,"toDate");var vc=class{static{s(this,"SignatureV4")}constructor({applyChecksum:e,credentials:t,region:r,service:i,sha256:a,uriEscapePath:l=!0}){this.headerFormatter=new fy,this.service=i,this.sha256=a,this.uriEscapePath=l,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Kr(r),this.credentialProvider=Kr(t)}async presign(e,t={}){let{signingDate:r=new Date,expiresIn:i=3600,unsignableHeaders:a,unhoistableHeaders:l,signableHeaders:d,hoistableHeaders:m,signingRegion:g,signingService:v}=t,_=await this.credentialProvider();this.validateResolvedCredentials(_);let E=g??await this.regionProvider(),{longDate:C,shortDate:k}=my(r);if(i>fR)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let D=cy(k,E,v??this.service),O=dw(hy(e),{unhoistableHeaders:l,hoistableHeaders:m});_.sessionToken&&(O.query[iw]=_.sessionToken),O.query[JN]=ay,O.query[eR]=`${_.accessKeyId}/${D}`,O.query[nw]=C,O.query[nR]=i.toString(10);let P=uy(O,a,d);return O.query[tR]=vR(P),O.query[rw]=await this.getSignature(C,D,this.getSigningKey(_,E,k,v),this.createCanonicalRequest(O,P,await Oh(e,this.sha256))),O}async sign(e,t){return typeof e=="string"?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:i,signingRegion:a,signingService:l}){let d=a??await this.regionProvider(),{shortDate:m,longDate:g}=my(r),v=cy(m,d,l??this.service),_=await Oh({headers:{},body:t},this.sha256),E=new this.sha256;E.update(e);let C=er(await E.digest()),k=[cR,g,v,i,C,_].join(`
`);return this.signString(k,{signingDate:r,signingRegion:d,signingService:l})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:i,priorSignature:e.priorSignature}).then(l=>({message:e.message,signature:l}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let l=r??await this.regionProvider(),{shortDate:d}=my(t),m=new this.sha256(await this.getSigningKey(a,l,d,i));return m.update(To(e)),er(await m.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:i,signingRegion:a,signingService:l}={}){let d=await this.credentialProvider();this.validateResolvedCredentials(d);let m=a??await this.regionProvider(),g=hy(e),{longDate:v,shortDate:_}=my(t),E=cy(_,m,l??this.service);g.headers[ow]=v,d.sessionToken&&(g.headers[sR]=d.sessionToken);let C=await Oh(g,this.sha256);!yR(kh,g.headers)&&this.applyChecksum&&(g.headers[kh]=C);let k=uy(g,i,r),D=await this.getSignature(v,E,this.getSigningKey(d,m,_,l),this.createCanonicalRequest(g,k,C));return g.headers[sw]=`${ay} Credential=${d.accessKeyId}/${E}, SignedHeaders=${vR(k)}, Signature=${D}`,g}createCanonicalRequest(e,t,r){let i=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${cw(e)}
${i.map(a=>`${a}:${t[a]}`).join(`
`)}

${i.join(";")}
${r}`}async createStringToSign(e,t,r){let i=new this.sha256;i.update(To(r));let a=await i.digest();return`${ay}
${e}
${t}
${er(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let a of e.split("/"))a?.length!==0&&a!=="."&&(a===".."?t.pop():t.push(a));let r=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return so(r).replace(/%2F/g,"/")}return e}async getSignature(e,t,r,i){let a=await this.createStringToSign(e,t,i),l=new this.sha256(await r);return l.update(To(a)),er(await l.digest())}getSigningKey(e,t,r,i){return mR(this.sha256,e,r,t,i||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},my=s(n=>{let e=bR(n).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},"formatDate"),vR=s(n=>Object.keys(n).sort().join(";"),"getCanonicalHeaderList");var _R=s(n=>{let e=!1,t;n.credentials&&(e=!0,t=YN(n.credentials,ZN,ew)),t||(n.credentialDefaultProvider?t=ca(n.credentialDefaultProvider(Object.assign({},n,{parentClientConfig:n}))):t=s(async()=>{throw new Error("`credentials` is missing")},"credentialsProvider"));let r=s(async()=>t({callerClientConfig:n}),"boundCredentialsProvider"),{signingEscapePath:i=!0,systemClockOffset:a=n.systemClockOffset||0,sha256:l}=n,d;return n.signer?d=ca(n.signer):n.regionInfoProvider?d=s(()=>ca(n.region)().then(async m=>[await n.regionInfoProvider(m,{useFipsEndpoint:await n.useFipsEndpoint(),useDualstackEndpoint:await n.useDualstackEndpoint()})||{},m]).then(([m,g])=>{let{signingRegion:v,signingService:_}=m;n.signingRegion=n.signingRegion||v||g,n.signingName=n.signingName||_||n.serviceId;let E={...n,credentials:r,region:n.signingRegion,service:n.signingName,sha256:l,uriEscapePath:i},C=n.signerConstructor||vc;return new C(E)}),"signer"):d=s(async m=>{m=Object.assign({},{name:"sigv4",signingName:n.signingName||n.defaultSigningName,signingRegion:await ca(n.region)(),properties:{}},m);let g=m.signingRegion,v=m.signingName;n.signingRegion=n.signingRegion||g,n.signingName=n.signingName||v||n.serviceId;let _={...n,credentials:r,region:n.signingRegion,service:n.signingName,sha256:l,uriEscapePath:i},E=n.signerConstructor||vc;return new E(_)},"signer"),{...n,systemClockOffset:a,signingEscapePath:i,credentials:e?async()=>r().then(m=>TN(m,"CREDENTIALS_CODE","e")):r,signer:d}},"resolveAwsSdkSigV4Config");var _c=s((n,e)=>{let t=[];if(n&&t.push(n),e)for(let r of e)t.push(r);return t},"getAllAliases"),cl=s((n,e)=>`${n||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,"getMiddlewareNameWithAliases"),Ju=s(()=>{let n=[],e=[],t=!1,r=new Set,i=s(_=>_.sort((E,C)=>xR[C.step]-xR[E.step]||wR[C.priority||"normal"]-wR[E.priority||"normal"]),"sort"),a=s(_=>{let E=!1,C=s(k=>{let D=_c(k.name,k.aliases);if(D.includes(_)){E=!0;for(let O of D)r.delete(O);return!1}return!0},"filterCb");return n=n.filter(C),e=e.filter(C),E},"removeByName"),l=s(_=>{let E=!1,C=s(k=>{if(k.middleware===_){E=!0;for(let D of _c(k.name,k.aliases))r.delete(D);return!1}return!0},"filterCb");return n=n.filter(C),e=e.filter(C),E},"removeByReference"),d=s(_=>(n.forEach(E=>{_.add(E.middleware,{...E})}),e.forEach(E=>{_.addRelativeTo(E.middleware,{...E})}),_.identifyOnResolve?.(v.identifyOnResolve()),_),"cloneTo"),m=s(_=>{let E=[];return _.before.forEach(C=>{C.before.length===0&&C.after.length===0?E.push(C):E.push(...m(C))}),E.push(_),_.after.reverse().forEach(C=>{C.before.length===0&&C.after.length===0?E.push(C):E.push(...m(C))}),E},"expandRelativeMiddlewareList"),g=s((_=!1)=>{let E=[],C=[],k={};return n.forEach(O=>{let P={...O,before:[],after:[]};for(let j of _c(P.name,P.aliases))k[j]=P;E.push(P)}),e.forEach(O=>{let P={...O,before:[],after:[]};for(let j of _c(P.name,P.aliases))k[j]=P;C.push(P)}),C.forEach(O=>{if(O.toMiddleware){let P=k[O.toMiddleware];if(P===void 0){if(_)return;throw new Error(`${O.toMiddleware} is not found when adding ${cl(O.name,O.aliases)} middleware ${O.relation} ${O.toMiddleware}`)}O.relation==="after"&&P.after.push(O),O.relation==="before"&&P.before.push(O)}}),i(E).map(m).reduce((O,P)=>(O.push(...P),O),[])},"getMiddlewareList"),v={add:(_,E={})=>{let{name:C,override:k,aliases:D}=E,O={step:"initialize",priority:"normal",middleware:_,...E},P=_c(C,D);if(P.length>0){if(P.some(j=>r.has(j))){if(!k)throw new Error(`Duplicate middleware name '${cl(C,D)}'`);for(let j of P){let W=n.findIndex(ae=>ae.name===j||ae.aliases?.some(he=>he===j));if(W===-1)continue;let Z=n[W];if(Z.step!==O.step||O.priority!==Z.priority)throw new Error(`"${cl(Z.name,Z.aliases)}" middleware with ${Z.priority} priority in ${Z.step} step cannot be overridden by "${cl(C,D)}" middleware with ${O.priority} priority in ${O.step} step.`);n.splice(W,1)}}for(let j of P)r.add(j)}n.push(O)},addRelativeTo:(_,E)=>{let{name:C,override:k,aliases:D}=E,O={middleware:_,...E},P=_c(C,D);if(P.length>0){if(P.some(j=>r.has(j))){if(!k)throw new Error(`Duplicate middleware name '${cl(C,D)}'`);for(let j of P){let W=e.findIndex(ae=>ae.name===j||ae.aliases?.some(he=>he===j));if(W===-1)continue;let Z=e[W];if(Z.toMiddleware!==O.toMiddleware||Z.relation!==O.relation)throw new Error(`"${cl(Z.name,Z.aliases)}" middleware ${Z.relation} "${Z.toMiddleware}" middleware cannot be overridden by "${cl(C,D)}" middleware ${O.relation} "${O.toMiddleware}" middleware.`);e.splice(W,1)}}for(let j of P)r.add(j)}e.push(O)},clone:()=>d(Ju()),use:_=>{_.applyToStack(v)},remove:_=>typeof _=="string"?a(_):l(_),removeByTag:_=>{let E=!1,C=s(k=>{let{tags:D,name:O,aliases:P}=k;if(D&&D.includes(_)){let j=_c(O,P);for(let W of j)r.delete(W);return E=!0,!1}return!0},"filterCb");return n=n.filter(C),e=e.filter(C),E},concat:_=>{let E=d(Ju());return E.use(_),E.identifyOnResolve(t||E.identifyOnResolve()||(_.identifyOnResolve?.()??!1)),E},applyToStack:d,identify:()=>g(!0).map(_=>{let E=_.step??_.relation+" "+_.toMiddleware;return cl(_.name,_.aliases)+" - "+E}),identifyOnResolve(_){return typeof _=="boolean"&&(t=_),t},resolve:(_,E)=>{for(let C of g().map(k=>k.middleware).reverse())_=C(_,E);return t&&console.log(v.identify()),_}};return v},"constructStack"),xR={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},wR={high:3,normal:2,low:1};var py=class{static{s(this,"Client")}constructor(e){this.config=e,this.middlewareStack=Ju()}send(e,t,r){let i=typeof t!="function"?t:void 0,a=typeof t=="function"?t:r,l=i===void 0&&this.config.cacheMiddleware===!0,d;if(l){this.handlers||(this.handlers=new WeakMap);let m=this.handlers;m.has(e.constructor)?d=m.get(e.constructor):(d=e.resolveMiddleware(this.middlewareStack,this.config,i),m.set(e.constructor,d))}else delete this.handlers,d=e.resolveMiddleware(this.middlewareStack,this.config,i);if(a)d(e).then(m=>a(null,m.output),m=>a(m)).catch(()=>{});else return d(e).then(m=>m.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};var xc=class{static{s(this,"Command")}constructor(){this.middlewareStack=Ju()}static classBuilder(){return new fw}resolveMiddlewareWithContext(e,t,r,{middlewareFn:i,clientName:a,commandName:l,inputFilterSensitiveLog:d,outputFilterSensitiveLog:m,smithyContext:g,additionalContext:v,CommandCtor:_}){for(let O of i.bind(this)(_,e,t,r))this.middlewareStack.use(O);let E=e.concat(this.middlewareStack),{logger:C}=t,k={logger:C,clientName:a,commandName:l,inputFilterSensitiveLog:d,outputFilterSensitiveLog:m,[Zu]:{commandInstance:this,...g},...v},{requestHandler:D}=t;return E.resolve(O=>D.handle(O.request,r||{}),k)}},fw=class{static{s(this,"ClassBuilder")}constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=r=>r,t=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){let e=this,t;return t=class extends xc{static{s(this,"CommandRef")}static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=r??{},e._init(this)}resolveMiddleware(r,i,a){return this.resolveMiddlewareWithContext(r,i,a,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}};var bs="***SensitiveInformation***";var mw=s(n=>{switch(n){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${n}"`)}},"parseBoolean");var pz=s(n=>{if(n!=null){if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return String(e)!==String(n)&&LR.warn(MR(`Expected number but observed string: ${n}`)),e}if(typeof n=="number")return n;throw new TypeError(`Expected number, got ${typeof n}: ${n}`)}},"expectNumber"),gz=Math.ceil(2**127*(2-2**-23)),ER=s(n=>{let e=pz(n);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>gz)throw new TypeError(`Expected 32-bit float, got ${n}`);return e},"expectFloat32"),hw=s(n=>{if(n!=null){if(Number.isInteger(n)&&!Number.isNaN(n))return n;throw new TypeError(`Expected integer, got ${typeof n}: ${n}`)}},"expectLong");var SR=s(n=>AR(n,16),"expectShort"),CR=s(n=>AR(n,8),"expectByte"),AR=s((n,e)=>{let t=hw(n);if(t!==void 0&&yz(t,e)!==t)throw new TypeError(`Expected ${e}-bit integer, got ${n}`);return t},"expectSizedInt"),yz=s((n,e)=>{switch(e){case 32:return Int32Array.of(n)[0];case 16:return Int16Array.of(n)[0];case 8:return Int8Array.of(n)[0]}},"castInt"),pw=s((n,e)=>{if(n==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return n},"expectNonNull"),TR=s(n=>{if(n==null)return;if(typeof n=="object"&&!Array.isArray(n))return n;let e=Array.isArray(n)?"array":typeof n;throw new TypeError(`Expected object, got ${e}: ${n}`)},"expectObject"),ed=s(n=>{if(n!=null){if(typeof n=="string")return n;if(["boolean","number","bigint"].includes(typeof n))return LR.warn(MR(`Expected string, got ${typeof n}: ${n}`)),String(n);throw new TypeError(`Expected string, got ${typeof n}: ${n}`)}},"expectString");var kR=s(n=>ER(typeof n=="string"?gy(n):n),"strictParseFloat32"),bz=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,gy=s(n=>{let e=n.match(bz);if(e===null||e[0].length!==n.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(n)},"parseNumber");var OR=s(n=>hw(typeof n=="string"?gy(n):n),"strictParseLong");var NR=s(n=>SR(typeof n=="string"?gy(n):n),"strictParseShort"),RR=s(n=>CR(typeof n=="string"?gy(n):n),"strictParseByte"),MR=s(n=>String(new TypeError(n).stack||n).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),LR={warn:console.warn};var vz=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],IR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function DR(n){let e=n.getUTCFullYear(),t=n.getUTCMonth(),r=n.getUTCDay(),i=n.getUTCDate(),a=n.getUTCHours(),l=n.getUTCMinutes(),d=n.getUTCSeconds(),m=i<10?`0${i}`:`${i}`,g=a<10?`0${a}`:`${a}`,v=l<10?`0${l}`:`${l}`,_=d<10?`0${d}`:`${d}`;return`${vz[r]}, ${m} ${IR[t]} ${e} ${g}:${v}:${_} GMT`}s(DR,"dateToUtcString");var jxe=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var _z=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),PR=s(n=>{if(n==null)return;if(typeof n!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=_z.exec(n);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[t,r,i,a,l,d,m,g,v]=e,_=NR(BR(r)),E=Nh(i,"month",1,12),C=Nh(a,"day",1,31),k=xz(_,E,C,{hours:l,minutes:d,seconds:m,fractionalMilliseconds:g});return v.toUpperCase()!="Z"&&k.setTime(k.getTime()-Az(v)),k},"parseRfc3339DateTimeWithOffset"),Hxe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),zxe=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),$xe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var xz=s((n,e,t,r)=>{let i=e-1;return Ez(n,i,t),new Date(Date.UTC(n,i,t,Nh(r.hours,"hour",0,23),Nh(r.minutes,"minute",0,59),Nh(r.seconds,"seconds",0,60),Cz(r.fractionalMilliseconds)))},"buildDate");var Vxe=50*365*24*60*60*1e3;var wz=[31,28,31,30,31,30,31,31,30,31,30,31],Ez=s((n,e,t)=>{let r=wz[e];if(e===1&&Sz(n)&&(r=29),t>r)throw new TypeError(`Invalid day for ${IR[e]} in ${n}: ${t}`)},"validateDayOfMonth"),Sz=s(n=>n%4===0&&(n%100!==0||n%400===0),"isLeapYear"),Nh=s((n,e,t,r)=>{let i=RR(BR(n));if(i<t||i>r)throw new TypeError(`${e} must be between ${t} and ${r}, inclusive`);return i},"parseDateValue"),Cz=s(n=>n==null?0:kR("0."+n)*1e3,"parseMilliseconds"),Az=s(n=>{let e=n[0],t=1;if(e=="+")t=1;else if(e=="-")t=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let r=Number(n.substring(1,3)),i=Number(n.substring(4,6));return t*(r*60+i)*60*1e3},"parseOffsetToMilliseconds"),BR=s(n=>{let e=0;for(;e<n.length-1&&n.charAt(e)==="0";)e++;return e===0?n:n.slice(e)},"stripLeadingZeroes");var yy=class n extends Error{static{s(this,"ServiceException")}constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let t=e;return n.prototype.isPrototypeOf(t)||!!t.$fault&&!!t.$metadata&&(t.$fault==="client"||t.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let t=e;return this===n?n.isInstance(e):n.isInstance(e)?t.name&&this.name?this.prototype.isPrototypeOf(e)||t.name===this.name:this.prototype.isPrototypeOf(e):!1}},ci=s((n,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,i])=>{(n[r]==null||n[r]==="")&&(n[r]=i)});let t=n.message||n.Message||"UnknownError";return n.message=t,delete n.Message,n},"decorateServiceException");var Tz=s(({output:n,parsedBody:e,exceptionCtor:t,errorCode:r})=>{let i=kz(n),a=i.httpStatusCode?i.httpStatusCode+"":void 0,l=new t({name:e?.code||e?.Code||r||a||"UnknownError",$fault:"client",$metadata:i});throw ci(l,e)},"throwDefaultError"),qR=s(n=>({output:e,parsedBody:t,errorCode:r})=>{Tz({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})},"withBaseException"),kz=s(n=>({httpStatusCode:n.statusCode,requestId:n.headers["x-amzn-requestid"]??n.headers["x-amzn-request-id"]??n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}),"deserializeMetadata");var FR=s(n=>{switch(n){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode");var UR=s(n=>{let e=[];for(let t in Gu){let r=Gu[t];n[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>n[r]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(t){this._checksumAlgorithms.push(t)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),jR=s(n=>{let e={};return n.checksumAlgorithms().forEach(t=>{e[t.algorithmId()]=t.checksumConstructor()}),e},"resolveChecksumRuntimeConfig");var HR=s(n=>{let e=n.retryStrategy;return{setRetryStrategy(t){e=t},retryStrategy(){return e}}},"getRetryConfiguration"),zR=s(n=>{let e={};return e.retryStrategy=n.retryStrategy(),e},"resolveRetryRuntimeConfig");var $R=s(n=>({...UR(n),...HR(n)}),"getDefaultExtensionConfiguration");var VR=s(n=>({...jR(n),...zR(n)}),"resolveDefaultRuntimeConfig");var gw=s(n=>{let e="#text";for(let t in n)n.hasOwnProperty(t)&&n[t][e]!==void 0?n[t]=n[t][e]:typeof n[t]=="object"&&n[t]!==null&&(n[t]=gw(n[t]));return n},"getValueFromTextNode");var fa=s(n=>n!=null,"isSerializableHeaderValue");var td=s(function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})},"LazyJsonString");td.from=n=>n&&typeof n=="object"&&(n instanceof td||"deserializeJSON"in n)?n:typeof n=="string"||Object.getPrototypeOf(n)===String.prototype?td(String(n)):td(JSON.stringify(n));td.fromObject=td.from;var ul=class{static{s(this,"NoOpLogger")}trace(){}debug(){}info(){}warn(){}error(){}};function tr(n,e,t){let r,i,a;if(typeof e>"u"&&typeof t>"u")r={},a=n;else{if(r=n,typeof e=="function")return i=e,a=t,Oz(r,i,a);a=e}for(let l of Object.keys(a)){if(!Array.isArray(a[l])){r[l]=a[l];continue}Nz(r,null,a,l)}return r}s(tr,"map");var Oz=s((n,e,t)=>tr(n,Object.entries(t).reduce((r,[i,a])=>(Array.isArray(a)?r[i]=a:typeof a=="function"?r[i]=[e,a()]:r[i]=[e,a],r),{})),"mapWithFilter"),Nz=s((n,e,t,r)=>{if(e!==null){let l=t[r];typeof l=="function"&&(l=[,l]);let[d=Rz,m=Mz,g=r]=l;(typeof d=="function"&&d(e[g])||typeof d!="function"&&d)&&(n[r]=m(e[g]));return}let[i,a]=t[r];if(typeof a=="function"){let l,d=i===void 0&&(l=a())!=null,m=typeof i=="function"&&!!i(void 0)||typeof i!="function"&&!!i;d?n[r]=l:m&&(n[r]=a())}else{let l=i===void 0&&a!=null,d=typeof i=="function"&&!!i(a)||typeof i!="function"&&!!i;(l||d)&&(n[r]=a)}},"applyInstruction"),Rz=s(n=>n!=null,"nonNullish"),Mz=s(n=>n,"pass");var KR=s(n=>n.toISOString().replace(".000Z","Z"),"serializeDateTime");var WR=s((n,e)=>Th(n,e).then(t=>e.utf8Encoder(t)),"collectBodyString");var AM=Qn(CM());var Cw=s((n,e)=>WR(n,e).then(t=>{if(t.length){let r=new AM.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(m,g)=>g.trim()===""&&g.includes(`
`)?"":void 0});r.addEntity("#xD","\r"),r.addEntity("#10",`
`);let i;try{i=r.parse(t,!0)}catch(m){throw m&&typeof m=="object"&&Object.defineProperty(m,"$responseBodyText",{value:t}),m}let a="#text",l=Object.keys(i)[0],d=i[l];return d[a]&&(d[l]=d[a],delete d[a]),gw(d)}return{}}),"parseXmlBody"),TM=s(async(n,e)=>{let t=await Cw(n,e);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},"parseXmlErrorBody"),kM=s((n,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(n.statusCode==404)return"NotFound"},"loadRestXmlErrorCode");var Lh=[en.CRC32,en.CRC32C,en.CRC64NVME,en.SHA1,en.SHA256],OM=[en.SHA256,en.SHA1,en.CRC32,en.CRC32C,en.CRC64NVME];var NM=s((n,{requestChecksumRequired:e,requestAlgorithmMember:t,requestChecksumCalculation:r})=>{if(!t)return r===Ao.WHEN_SUPPORTED||e?xh:void 0;if(!n[t])return;let i=n[t];if(!Lh.includes(i))throw new Error(`The checksum algorithm "${i}" is not supported by the client. Select one of ${Lh}.`);return i},"getChecksumAlgorithmForRequest");var nd=s(n=>n===en.MD5?"content-md5":`x-amz-checksum-${n.toLowerCase()}`,"getChecksumLocationName");var RM=s((n,e)=>{let t=n.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},"hasHeader");var MM=s((n,e)=>{let t=n.toLowerCase();for(let r of Object.keys(e))if(r.toLowerCase().startsWith(t))return!0;return!1},"hasHeaderWithPrefix");var vy=s(n=>n!==void 0&&typeof n!="string"&&!ArrayBuffer.isView(n)&&!dy(n),"isStreaming");function rd(n,e,t,r){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return s(i,"adopt"),new(t||(t=Promise))(function(a,l){function d(v){try{g(r.next(v))}catch(_){l(_)}}s(d,"fulfilled");function m(v){try{g(r.throw(v))}catch(_){l(_)}}s(m,"rejected");function g(v){v.done?a(v.value):i(v.value).then(d,m)}s(g,"step"),g((r=r.apply(n,e||[])).next())})}s(rd,"__awaiter");function id(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(g){return function(v){return m([g,v])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(a=g[0]&2?i.return:g[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,g[1])).done)return a;switch(i=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(v){g=[6,v],i=0}finally{r=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}s(id,"__generator");function _y(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(_y,"__values");var Aw=s(n=>new TextEncoder().encode(n),"fromUtf8");var H$=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:Aw;function Ni(n){return n instanceof Uint8Array?n:typeof n=="string"?H$(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}s(Ni,"convertToBuffer");function ko(n){return typeof n=="string"?n.length===0:n.byteLength===0}s(ko,"isEmptyData");function Ih(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}s(Ih,"numToUint8");function Dh(n){if(!Uint32Array.from){for(var e=new Uint32Array(n.length),t=0;t<n.length;)e[t]=n[t],t+=1;return e}return Uint32Array.from(n)}s(Dh,"uint32ArrayFrom");var kw=function(){function n(){this.crc32c=new Tw}return s(n,"AwsCrc32c"),n.prototype.update=function(e){ko(e)||this.crc32c.update(Ni(e))},n.prototype.digest=function(){return rd(this,void 0,void 0,function(){return id(this,function(e){return[2,Ih(this.crc32c.digest())]})})},n.prototype.reset=function(){this.crc32c=new Tw},n}();var Tw=function(){function n(){this.checksum=4294967295}return s(n,"Crc32c"),n.prototype.update=function(e){var t,r;try{for(var i=_y(e),a=i.next();!a.done;a=i.next()){var l=a.value;this.checksum=this.checksum>>>8^$$[(this.checksum^l)&255]}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},n.prototype.digest=function(){return(this.checksum^4294967295)>>>0},n}();var z$=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],$$=Dh(z$);var Ow=function(){function n(){this.crc32=new Ec}return s(n,"AwsCrc32"),n.prototype.update=function(e){ko(e)||this.crc32.update(Ni(e))},n.prototype.digest=function(){return rd(this,void 0,void 0,function(){return id(this,function(e){return[2,Ih(this.crc32.digest())]})})},n.prototype.reset=function(){this.crc32=new Ec},n}();var Ec=function(){function n(){this.checksum=4294967295}return s(n,"Crc32"),n.prototype.update=function(e){var t,r;try{for(var i=_y(e),a=i.next();!a.done;a=i.next()){var l=a.value;this.checksum=this.checksum>>>8^K$[(this.checksum^l)&255]}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},n.prototype.digest=function(){return(this.checksum^4294967295)>>>0},n}();var V$=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],K$=Dh(V$);var LM=s(()=>Ow,"getCrc32ChecksumAlgorithmFunction");var xy=s((n,e)=>{switch(n){case en.MD5:return e.md5;case en.CRC32:return LM();case en.CRC32C:return kw;case en.CRC64NVME:if(typeof zx.CrtCrc64Nvme!="function")throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return zx.CrtCrc64Nvme;case en.SHA1:return e.sha1;case en.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${n}`)}},"selectChecksumAlgorithmFunction");var wy=s((n,e)=>{let t=new n;return t.update(To(e||"")),t.digest()},"stringHasher");var IM={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},DM=s((n,e)=>(t,r)=>async i=>{if(!kt.isInstance(i.request)||MM("x-amz-checksum-",i.request.headers))return t(i);let{request:a,input:l}=i,{body:d,headers:m}=a,{base64Encoder:g,streamHasher:v}=n,{requestChecksumRequired:_,requestAlgorithmMember:E}=e,C=await n.requestChecksumCalculation(),k=E?.name,D=E?.httpHeader;k&&!l[k]&&(C===Ao.WHEN_SUPPORTED||_)&&(l[k]=xh,D&&(m[D]=xh));let O=NM(l,{requestChecksumRequired:_,requestAlgorithmMember:E?.name,requestChecksumCalculation:C}),P=d,j=m;if(O){switch(O){case en.CRC32:jn(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case en.CRC32C:jn(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case en.CRC64NVME:jn(r,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case en.SHA1:jn(r,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case en.SHA256:jn(r,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}let Z=nd(O),ae=xy(O,n);if(vy(d)){let{getAwsChunkedEncodingStream:he,bodyLengthChecker:fe}=n;P=he(typeof n.requestStreamBufferSize=="number"&&n.requestStreamBufferSize>=8*1024?qN(d,n.requestStreamBufferSize,r.logger):d,{base64Encoder:g,bodyLengthChecker:fe,checksumLocationName:Z,checksumAlgorithmFn:ae,streamHasher:v}),j={...m,"content-encoding":m["content-encoding"]?`${m["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":m["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Z},delete j["content-length"]}else if(!RM(Z,m)){let he=await wy(ae,d);j={...m,[Z]:g(he)}}}return await t({...i,request:{...a,headers:j,body:P}})},"flexibleChecksumsMiddleware");var PM={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},BM=s((n,e)=>(t,r)=>async i=>{let a=i.input,{requestValidationModeMember:l}=e,d=await n.requestChecksumCalculation(),m=await n.responseChecksumValidation();switch(d){case Ao.WHEN_REQUIRED:jn(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Ao.WHEN_SUPPORTED:jn(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(m){case _h.WHEN_REQUIRED:jn(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case _h.WHEN_SUPPORTED:jn(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return l&&!a[l]&&m===_h.WHEN_SUPPORTED&&(a[l]="ENABLED"),t(i)},"flexibleChecksumsInputMiddleware");var Ey=s((n=[])=>{let e=[];for(let t of OM)!n.includes(t)||!Lh.includes(t)||e.push(t);return e},"getChecksumAlgorithmListForResponse");var qM=s(n=>{let e=n.lastIndexOf("-");if(e!==-1){let t=n.slice(e+1);if(!t.startsWith("0")){let r=parseInt(t,10);if(!isNaN(r)&&r>=1&&r<=1e4)return!0}}return!1},"isChecksumWithPartNumber");var FM=s(async(n,{checksumAlgorithmFn:e,base64Encoder:t})=>t(await wy(e,n)),"getChecksum");var UM=s(async(n,{config:e,responseAlgorithms:t,logger:r})=>{let i=Ey(t),{body:a,headers:l}=n;for(let d of i){let m=nd(d),g=l[m];if(g){let v;try{v=xy(d,e)}catch(C){if(d===en.CRC64NVME){r?.warn(`Skipping ${en.CRC64NVME} checksum validation: ${C.message}`);continue}throw C}let{base64Encoder:_}=e;if(vy(a)){n.body=BN({expectedChecksum:g,checksumSourceLocation:m,checksum:new v,source:a,base64Encoder:_});return}let E=await FM(a,{checksumAlgorithmFn:v,base64Encoder:_});if(E===g)break;throw new Error(`Checksum mismatch: expected "${E}" but received "${g}" in response header "${m}".`)}}},"validateChecksumFromResponse");var jM={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},HM=s((n,e)=>(t,r)=>async i=>{if(!kt.isInstance(i.request))return t(i);let a=i.input,l=await t(i),d=l.response,{requestValidationModeMember:m,responseAlgorithms:g}=e;if(m&&a[m]==="ENABLED"){let{clientName:v,commandName:_}=r;if(v==="S3Client"&&_==="GetObjectCommand"&&Ey(g).every(C=>{let k=nd(C),D=d.headers[k];return!D||qM(D)}))return l;await UM(d,{config:n,responseAlgorithms:g,logger:r.logger})}return l},"flexibleChecksumsResponseMiddleware");var zM=s((n,e)=>({applyToStack:t=>{t.add(DM(n,e),IM),t.addRelativeTo(BM(n,e),PM),t.addRelativeTo(HM(n,e),jM)}}),"getFlexibleChecksumsPlugin");var $M=s(n=>({...n,requestChecksumCalculation:Kr(n.requestChecksumCalculation??jx),responseChecksumValidation:Kr(n.responseChecksumValidation??Hx),requestStreamBufferSize:Number(n.requestStreamBufferSize??0)}),"resolveFlexibleChecksumsConfig");var W$=s(n=>e=>async t=>{if(!kt.isInstance(t.request))return e(t);let{request:r}=t,{handlerProtocol:i=""}=n.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let a=r.hostname;r.port!=null&&(a+=`:${r.port}`),r.headers.host=a}return e(t)},"hostHeaderMiddleware"),G$={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},VM=s(n=>({applyToStack:e=>{e.add(W$(n),G$)}}),"getHostHeaderPlugin");var Z$=s(()=>(n,e)=>async t=>{try{let r=await n(t),{clientName:i,commandName:a,logger:l,dynamoDbDocumentClientOptions:d={}}=e,{overrideInputFilterSensitiveLog:m,overrideOutputFilterSensitiveLog:g}=d,v=m??e.inputFilterSensitiveLog,_=g??e.outputFilterSensitiveLog,{$metadata:E,...C}=r.output;return l?.info?.({clientName:i,commandName:a,input:v(t.input),output:_(C),metadata:E}),r}catch(r){let{clientName:i,commandName:a,logger:l,dynamoDbDocumentClientOptions:d={}}=e,{overrideInputFilterSensitiveLog:m}=d,g=m??e.inputFilterSensitiveLog;throw l?.error?.({clientName:i,commandName:a,input:g(t.input),error:r,metadata:r.$metadata}),r}},"loggerMiddleware"),Y$={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},KM=s(n=>({applyToStack:e=>{e.add(Z$(),Y$)}}),"getLoggerPlugin");var WM="X-Amzn-Trace-Id",X$="AWS_LAMBDA_FUNCTION_NAME",Q$="_X_AMZN_TRACE_ID",J$=s(n=>e=>async t=>{let{request:r}=t;if(!kt.isInstance(r)||n.runtime!=="node"||r.headers.hasOwnProperty(WM))return e(t);let i=process.env[X$],a=process.env[Q$],l=s(d=>typeof d=="string"&&d.length>0,"nonEmptyString");return l(i)&&l(a)&&(r.headers[WM]=a),e({...t,request:r})},"recursionDetectionMiddleware"),eV={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},GM=s(n=>({applyToStack:e=>{e.add(J$(n),eV)}}),"getRecursionDetectionPlugin");var tV="content-length",nV="x-amz-decoded-content-length";function rV(){return(n,e)=>async t=>{let{request:r}=t;if(kt.isInstance(r)&&!(tV in r.headers)&&!(nV in r.headers)){let i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof ul)?e.logger.warn(i):console.warn(i)}return n({...t})}}s(rV,"checkContentLengthHeader");var iV={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},ZM=s(n=>({applyToStack:e=>{e.add(rV(),iV)}}),"getCheckContentLengthHeaderPlugin");var YM=s(n=>(e,t)=>async r=>{let i=await n.region(),a=n.region,l=s(()=>{},"unlock");t.__s3RegionRedirect&&(Object.defineProperty(n,"region",{writable:!1,value:async()=>t.__s3RegionRedirect}),l=s(()=>Object.defineProperty(n,"region",{writable:!0,value:a}),"unlock"));try{let d=await e(r);if(t.__s3RegionRedirect){l();let m=await n.region();if(i!==m)throw new Error("Region was not restored following S3 region redirect.")}return d}catch(d){throw l(),d}},"regionRedirectEndpointMiddleware"),XM={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function sV(n){return(e,t)=>async r=>{try{return await e(r)}catch(i){if(n.followRegionRedirects&&(i?.$metadata?.httpStatusCode===301||i?.$metadata?.httpStatusCode===400&&i?.name==="IllegalLocationConstraintException")){try{let a=i.$response.headers["x-amz-bucket-region"];t.logger?.debug(`Redirecting from ${await n.region()} to ${a}`),t.__s3RegionRedirect=a}catch(a){throw new Error("Region redirect failed: "+a)}return e(r)}throw i}}}s(sV,"regionRedirectMiddleware");var oV={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},QM=s(n=>({applyToStack:e=>{e.add(sV(n),oV),e.addRelativeTo(YM(n),XM)}}),"getRegionRedirectMiddlewarePlugin");var Ph=class n{static{s(this,"S3ExpressIdentityCache")}data;lastPurgeTime=Date.now();static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;constructor(e={}){this.data=e}get(e){let t=this.data[e];if(t)return t}set(e,t){return this.data[e]=t,t}delete(e){delete this.data[e]}async purgeExpired(){let e=Date.now();if(!(this.lastPurgeTime+n.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(let t in this.data){let r=this.data[t];if(!r.isRefreshing){let i=await r.identity;i.expiration&&i.expiration.getTime()<e&&delete this.data[t]}}}};var Sc=class{static{s(this,"S3ExpressIdentityCacheEntry")}_identity;isRefreshing;accessed;constructor(e,t=!1,r=Date.now()){this._identity=e,this.isRefreshing=t,this.accessed=r}get identity(){return this.accessed=Date.now(),this._identity}};var Bh=class n{static{s(this,"S3ExpressIdentityProviderImpl")}createSessionFn;cache;static REFRESH_WINDOW_MS=6e4;constructor(e,t=new Ph){this.createSessionFn=e,this.cache=t}async getS3ExpressIdentity(e,t){let r=t.Bucket,{cache:i}=this,a=i.get(r);return a?a.identity.then(l=>(l.expiration?.getTime()??0)<Date.now()?i.set(r,new Sc(this.getIdentity(r))).identity:((l.expiration?.getTime()??0)<Date.now()+n.REFRESH_WINDOW_MS&&!a.isRefreshing&&(a.isRefreshing=!0,this.getIdentity(r).then(g=>{i.set(r,new Sc(Promise.resolve(g)))})),l)):i.set(r,new Sc(this.getIdentity(r))).identity}async getIdentity(e){await this.cache.purgeExpired().catch(i=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+i)});let t=await this.createSessionFn(e);if(!t.Credentials?.AccessKeyId||!t.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:t.Credentials.AccessKeyId,secretAccessKey:t.Credentials.SecretAccessKey,sessionToken:t.Credentials.SessionToken,expiration:t.Credentials.Expiration?new Date(t.Credentials.Expiration):void 0}}};var qh;(function(n){n.ENV="env",n.CONFIG="shared config entry"})(qh||(qh={}));var eL="Directory",tL="S3Express",nL="sigv4-s3express",Sy="X-Amz-S3session-Token",Fh=Sy.toLowerCase();var Uh=class extends vc{static{s(this,"SignatureV4S3Express")}async signWithCredentials(e,t,r){let i=rL(t);e.headers[Fh]=t.sessionToken;let a=this;return iL(a,i),a.signRequest(e,r??{})}async presignWithCredentials(e,t,r){let i=rL(t);return delete e.headers[Fh],e.headers[Sy]=t.sessionToken,e.query=e.query??{},e.query[Sy]=t.sessionToken,iL(this,i),this.presign(e,r)}};function rL(n){return{accessKeyId:n.accessKeyId,secretAccessKey:n.secretAccessKey,expiration:n.expiration}}s(rL,"getCredentialsWithoutSessionToken");function iL(n,e){let t=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),r=n.credentialProvider,i=s(()=>(clearTimeout(t),n.credentialProvider=r,Promise.resolve(e)),"overrideCredentialsProviderOnce");n.credentialProvider=i}s(iL,"setSingleOverride");var sL=s(n=>(e,t)=>async r=>{if(t.endpointV2){let i=t.endpointV2,a=i.properties?.authSchemes?.[0]?.name===nL;if((i.properties?.backend===tL||i.properties?.bucketType===eL)&&(jn(t,"S3_EXPRESS_BUCKET","J"),t.isS3ExpressBucket=!0),a){let d=r.input.Bucket;if(d){let m=await n.s3ExpressIdentityProvider.getS3ExpressIdentity(await n.credentials(),{Bucket:d});t.s3ExpressIdentity=m,kt.isInstance(r.request)&&m.sessionToken&&(r.request.headers[Fh]=m.sessionToken)}}}return e(r)},"s3ExpressMiddleware"),oL={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Nw=s(n=>({applyToStack:e=>{e.add(sL(n),oL)}}),"getS3ExpressPlugin");var aL=s(async(n,e,t,r)=>{let i=await r.signWithCredentials(t,n,{});if(i.headers["X-Amz-Security-Token"]||i.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return i},"signS3Express");var lV=s(n=>e=>{throw e},"defaultErrorHandler"),cV=s((n,e)=>{},"defaultSuccessHandler");var lL=s(n=>(e,t)=>async r=>{if(!kt.isInstance(r.request))return e(r);let a=io(t).selectedHttpAuthScheme;if(!a)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:l={}},identity:d,signer:m}=a,g;t.s3ExpressIdentity?g=await aL(t.s3ExpressIdentity,l,r.request,await n.signer()):g=await m.sign(r.request,d,l);let v=await e({...r,request:g}).catch((m.errorHandler||lV)(l));return(m.successHandler||cV)(v.response,l),v},"s3ExpressHttpSigningMiddleware"),Rw=s(n=>({applyToStack:e=>{e.addRelativeTo(lL(n),Wx)}}),"getS3ExpressHttpSigningPlugin");var cL=s((n,{session:e})=>{let[t,r]=e;return{...n,forcePathStyle:n.forcePathStyle??!1,useAccelerateEndpoint:n.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:n.disableMultiregionAccessPoints??!1,followRegionRedirects:n.followRegionRedirects??!1,s3ExpressIdentityProvider:n.s3ExpressIdentityProvider??new Bh(async i=>t().send(new r({Bucket:i}))),bucketEndpoint:n.bucketEndpoint??!1}},"resolveS3Config");var uV={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},dV=3e3,fV=s(n=>(e,t)=>async r=>{let i=await e(r),{response:a}=i;if(!gs.isInstance(a))return i;let{statusCode:l,body:d}=a;if(l<200||l>=300||!(typeof d?.stream=="function"||typeof d?.pipe=="function"||typeof d?.tee=="function"))return i;let g=d,v=d;d&&typeof d=="object"&&!(d instanceof Uint8Array)&&([g,v]=await WN(d)),a.body=v;let _=await hV(g,{streamCollector:async C=>UN(C,dV)});typeof g?.destroy=="function"&&g.destroy();let E=n.utf8Encoder(_.subarray(_.length-16));if(_.length===0&&uV[t.commandName]){let C=new Error("S3 aborted request");throw C.name="InternalError",C}return E&&E.endsWith("</Error>")&&(a.statusCode=400),i},"throw200ExceptionsMiddleware"),hV=s((n=new Uint8Array,e)=>n instanceof Uint8Array?Promise.resolve(n):e.streamCollector(n)||Promise.resolve(new Uint8Array),"collectBody"),mV={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Cy=s(n=>({applyToStack:e=>{e.addRelativeTo(fV(n),mV)}}),"getThrow200ExceptionsPlugin");var uL=s(n=>typeof n=="string"&&n.indexOf("arn:")===0&&n.split(":").length>=6,"validate");function dL(n){return(e,t)=>async r=>{if(n.bucketEndpoint){let i=t.endpointV2;if(i){let a=r.input.Bucket;if(typeof a=="string")try{let l=new URL(a);t.endpointV2={...i,url:l}}catch(l){let d=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${a} could not be parsed as URL.`;throw t.logger?.constructor?.name==="NoOpLogger"?console.warn(d):t.logger?.warn?.(d),l}}}return e(r)}}s(dL,"bucketEndpointMiddleware");var fL={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function pV({bucketEndpoint:n}){return e=>async t=>{let{input:{Bucket:r}}=t;if(!n&&typeof r=="string"&&!uL(r)&&r.indexOf("/")>=0){let i=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw i.name="InvalidBucketName",i}return e({...t})}}s(pV,"validateBucketNameMiddleware");var gV={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},hL=s(n=>({applyToStack:e=>{e.add(pV(n),gV),e.addRelativeTo(dL(n),fL)}}),"getValidateBucketNamePlugin");var yV=void 0;function bV(n){return n===void 0?!0:typeof n=="string"&&n.length<=50}s(bV,"isValidUserAgentAppId");function mL(n){let e=ca(n.userAgentAppId??yV);return{...n,customUserAgent:typeof n.customUserAgent=="string"?[[n.customUserAgent]]:n.customUserAgent,userAgentAppId:async()=>{let t=await e();if(!bV(t)){let r=n.logger?.constructor?.name==="NoOpLogger"||!n.logger?console:n.logger;typeof t!="string"?r?.warn("userAgentAppId must be a string or undefined."):t.length>50&&r?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return t}}}s(mL,"resolveUserAgentConfig");var Ay=class{static{s(this,"EndpointCache")}constructor({size:e,params:t}){this.data=new Map,this.parameters=[],this.capacity=e??50,t&&(this.parameters=t)}get(e,t){let r=this.hash(e);if(r===!1)return t();if(!this.data.has(r)){if(this.data.size>this.capacity+10){let i=this.data.keys(),a=0;for(;;){let{value:l,done:d}=i.next();if(this.data.delete(l),d||++a>10)break}}this.data.set(r,t())}return this.data.get(r)}size(){return this.data.size}hash(e){let t="",{parameters:r}=this;if(r.length===0)return!1;for(let i of r){let a=String(e[i]??"");if(a.includes("|;"))return!1;t+=a+"|;"}return t}};var vV=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),jh=s(n=>vV.test(n)||n.startsWith("[")&&n.endsWith("]"),"isIpAddress");var _V=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Hh=s((n,e=!1)=>{if(!e)return _V.test(n);let t=n.split(".");for(let r of t)if(!Hh(r))return!1;return!0},"isValidHostLabel");var Cc={};var ma="endpoints";function Bs(n){return typeof n!="object"||n==null?n:"ref"in n?`$${Bs(n.ref)}`:"fn"in n?`${n.fn}(${(n.argv||[]).map(Bs).join(", ")})`:JSON.stringify(n,null,2)}s(Bs,"toDebugString");var Nn=class extends Error{static{s(this,"EndpointError")}constructor(e){super(e),this.name="EndpointError"}};var pL=s((n,e)=>n===e,"booleanEquals");var gL=s(n=>{let e=n.split("."),t=[];for(let r of e){let i=r.indexOf("[");if(i!==-1){if(r.indexOf("]")!==r.length-1)throw new Nn(`Path: '${n}' does not end with ']'`);let a=r.slice(i+1,-1);if(Number.isNaN(parseInt(a)))throw new Nn(`Invalid array index: '${a}' in path: '${n}'`);i!==0&&t.push(r.slice(0,i)),t.push(a)}else t.push(r)}return t},"getAttrPathList");var Ty=s((n,e)=>gL(e).reduce((t,r)=>{if(typeof t!="object")throw new Nn(`Index '${r}' in '${e}' not found in '${JSON.stringify(n)}'`);return Array.isArray(t)?t[parseInt(r)]:t[r]},n),"getAttr");var yL=s(n=>n!=null,"isSet");var bL=s(n=>!n,"not");var Mw={[Wu.HTTP]:80,[Wu.HTTPS]:443},vL=s(n=>{let e=(()=>{try{if(n instanceof URL)return n;if(typeof n=="object"&&"hostname"in n){let{hostname:E,port:C,protocol:k="",path:D="",query:O={}}=n,P=new URL(`${k}//${E}${C?`:${C}`:""}${D}`);return P.search=Object.entries(O).map(([j,W])=>`${j}=${W}`).join("&"),P}return new URL(n)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(n)} as a whatwg URL.`),null;let t=e.href,{host:r,hostname:i,pathname:a,protocol:l,search:d}=e;if(d)return null;let m=l.slice(0,-1);if(!Object.values(Wu).includes(m))return null;let g=jh(i),v=t.includes(`${r}:${Mw[m]}`)||typeof n=="string"&&n.includes(`${r}:${Mw[m]}`),_=`${r}${v?`:${Mw[m]}`:""}`;return{scheme:m,authority:_,path:a,normalizedPath:a.endsWith("/")?a:`${a}/`,isIp:g}},"parseURL");var _L=s((n,e)=>n===e,"stringEquals");var xL=s((n,e,t,r)=>e>=t||n.length<t?null:r?n.substring(n.length-t,n.length-e):n.substring(e,t),"substring");var wL=s(n=>encodeURIComponent(n).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode");var EL={booleanEquals:pL,getAttr:Ty,isSet:yL,isValidHostLabel:Hh,not:bL,parseURL:vL,stringEquals:_L,substring:xL,uriEncode:wL};var ky=s((n,e)=>{let t=[],r={...e.endpointParams,...e.referenceRecord},i=0;for(;i<n.length;){let a=n.indexOf("{",i);if(a===-1){t.push(n.slice(i));break}t.push(n.slice(i,a));let l=n.indexOf("}",a);if(l===-1){t.push(n.slice(a));break}n[a+1]==="{"&&n[l+1]==="}"&&(t.push(n.slice(a+1,l)),i=l+2);let d=n.substring(a+1,l);if(d.includes("#")){let[m,g]=d.split("#");t.push(Ty(r[m],g))}else t.push(r[d]);i=l+1}return t.join("")},"evaluateTemplate");var SL=s(({ref:n},e)=>({...e.endpointParams,...e.referenceRecord})[n],"getReferenceValue");var fl=s((n,e,t)=>{if(typeof n=="string")return ky(n,t);if(n.fn)return Oy(n,t);if(n.ref)return SL(n,t);throw new Nn(`'${e}': ${String(n)} is not a string, function or reference.`)},"evaluateExpression");var Oy=s(({fn:n,argv:e},t)=>{let r=e.map(a=>["boolean","number"].includes(typeof a)?a:fl(a,"arg",t)),i=n.split(".");return i[0]in Cc&&i[1]!=null?Cc[i[0]][i[1]](...r):EL[n](...r)},"callFunction");var CL=s(({assign:n,...e},t)=>{if(n&&n in t.referenceRecord)throw new Nn(`'${n}' is already defined in Reference Record.`);let r=Oy(e,t);return t.logger?.debug?.(`${ma} evaluateCondition: ${Bs(e)} = ${Bs(r)}`),{result:r===""?!0:!!r,...n!=null&&{toAssign:{name:n,value:r}}}},"evaluateCondition");var sd=s((n=[],e)=>{let t={};for(let r of n){let{result:i,toAssign:a}=CL(r,{...e,referenceRecord:{...e.referenceRecord,...t}});if(!i)return{result:i};a&&(t[a.name]=a.value,e.logger?.debug?.(`${ma} assign: ${a.name} := ${Bs(a.value)}`))}return{result:!0,referenceRecord:t}},"evaluateConditions");var AL=s((n,e)=>Object.entries(n).reduce((t,[r,i])=>({...t,[r]:i.map(a=>{let l=fl(a,"Header value entry",e);if(typeof l!="string")throw new Nn(`Header '${r}' value '${l}' is not a string`);return l})}),{}),"getEndpointHeaders");var Lw=s((n,e)=>{if(Array.isArray(n))return n.map(t=>Lw(t,e));switch(typeof n){case"string":return ky(n,e);case"object":if(n===null)throw new Nn(`Unexpected endpoint property: ${n}`);return Ny(n,e);case"boolean":return n;default:throw new Nn(`Unexpected endpoint property type: ${typeof n}`)}},"getEndpointProperty");var Ny=s((n,e)=>Object.entries(n).reduce((t,[r,i])=>({...t,[r]:Lw(i,e)}),{}),"getEndpointProperties");var TL=s((n,e)=>{let t=fl(n,"Endpoint URL",e);if(typeof t=="string")try{return new URL(t)}catch(r){throw console.error(`Failed to construct URL with ${t}`,r),r}throw new Nn(`Endpoint URL must be a string, got ${typeof t}`)},"getEndpointUrl");var kL=s((n,e)=>{let{conditions:t,endpoint:r}=n,{result:i,referenceRecord:a}=sd(t,e);if(!i)return;let l={...e,referenceRecord:{...e.referenceRecord,...a}},{url:d,properties:m,headers:g}=r;return e.logger?.debug?.(`${ma} Resolving endpoint from template: ${Bs(r)}`),{...g!=null&&{headers:AL(g,l)},...m!=null&&{properties:Ny(m,l)},url:TL(d,l)}},"evaluateEndpointRule");var OL=s((n,e)=>{let{conditions:t,error:r}=n,{result:i,referenceRecord:a}=sd(t,e);if(i)throw new Nn(fl(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...a}}))},"evaluateErrorRule");var NL=s((n,e)=>{let{conditions:t,rules:r}=n,{result:i,referenceRecord:a}=sd(t,e);if(i)return Ry(r,{...e,referenceRecord:{...e.referenceRecord,...a}})},"evaluateTreeRule");var Ry=s((n,e)=>{for(let t of n)if(t.type==="endpoint"){let r=kL(t,e);if(r)return r}else if(t.type==="error")OL(t,e);else if(t.type==="tree"){let r=NL(t,e);if(r)return r}else throw new Nn(`Unknown endpoint rule: ${t}`);throw new Nn("Rules evaluation failed")},"evaluateRules");var Iw=s((n,e)=>{let{endpointParams:t,logger:r}=e,{parameters:i,rules:a}=n;e.logger?.debug?.(`${ma} Initial EndpointParams: ${Bs(t)}`);let l=Object.entries(i).filter(([,g])=>g.default!=null).map(([g,v])=>[g,v.default]);if(l.length>0)for(let[g,v]of l)t[g]=t[g]??v;let d=Object.entries(i).filter(([,g])=>g.required).map(([g])=>g);for(let g of d)if(t[g]==null)throw new Nn(`Missing required parameter: '${g}'`);let m=Ry(a,{endpointParams:t,logger:r,referenceRecord:{}});return e.logger?.debug?.(`${ma} Resolved endpoint: ${Bs(m)}`),m},"resolveEndpoint");var Dw=s((n,e=!1)=>{if(e){for(let t of n.split("."))if(!Dw(t))return!1;return!0}return!(!Hh(n)||n.length<3||n.length>63||n!==n.toLowerCase()||jh(n))},"isVirtualHostableS3Bucket");var RL=":",xV="/",ML=s(n=>{let e=n.split(RL);if(e.length<6)return null;let[t,r,i,a,l,...d]=e;if(t!=="arn"||r===""||i===""||d.join(RL)==="")return null;let m=d.map(g=>g.split(xV)).flat();return{partition:r,service:i,region:a,accountId:l,resourceId:m}},"parseArn");var LL={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}}],version:"1.1"};var EV=LL,SV="",IL=s(n=>{let{partitions:e}=EV;for(let r of e){let{regions:i,outputs:a}=r;for(let[l,d]of Object.entries(i))if(l===n)return{...a,...d}}for(let r of e){let{regionRegex:i,outputs:a}=r;if(new RegExp(i).test(n))return{...a}}let t=e.find(r=>r.id==="aws");if(!t)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...t.outputs}},"partition");var DL=s(()=>SV,"getUserAgentPrefix");var Pw={isVirtualHostableS3Bucket:Dw,parseArn:ML,partition:IL};Cc.aws=Pw;var CV=/\d{12}\.ddb/;async function PL(n,e,t){if(t.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&jn(n,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let a=await e.retryStrategy();typeof a.acquireInitialRetryToken=="function"?a.constructor?.name?.includes("Adaptive")?jn(n,"RETRY_MODE_ADAPTIVE","F"):jn(n,"RETRY_MODE_STANDARD","E"):jn(n,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let a=n.endpointV2;switch(String(a?.url?.hostname).match(CV)&&jn(n,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":jn(n,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":jn(n,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":jn(n,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let i=n.__smithy_context?.selectedHttpAuthScheme?.identity;if(i?.$source){let a=i;a.accountId&&jn(n,"RESOLVED_ACCOUNT_ID","T");for(let[l,d]of Object.entries(a.$source??{}))jn(n,l,d)}}s(PL,"checkFeatures");var Bw="user-agent",My="x-amz-user-agent",qw=" ",Ly="/",BL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,qL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Fw="-";function FL(n){let e="";for(let t in n){let r=n[t];if(e.length+r.length+1<=1024){e.length?e+=","+r:e+=r;continue}break}return e}s(FL,"encodeFeatures");var AV=s(n=>(e,t)=>async r=>{let{request:i}=r;if(!kt.isInstance(i))return e(r);let{headers:a}=i,l=t?.userAgent?.map(Iy)||[],d=(await n.defaultUserAgentProvider()).map(Iy);await PL(t,n,r);let m=t;d.push(`m/${FL(Object.assign({},t.__smithy_context?.features,m.__aws_sdk_context?.features))}`);let g=n?.customUserAgent?.map(Iy)||[],v=await n.userAgentAppId();v&&d.push(Iy([`app/${v}`]));let _=DL(),E=(_?[_]:[]).concat([...d,...l,...g]).join(qw),C=[...d.filter(k=>k.startsWith("aws-sdk-")),...g].join(qw);return n.runtime!=="browser"?(C&&(a[My]=a[My]?`${a[Bw]} ${C}`:C),a[Bw]=E):a[My]=E,e({...r,request:i})},"userAgentMiddleware"),Iy=s(n=>{let e=n[0].split(Ly).map(l=>l.replace(BL,Fw)).join(Ly),t=n[1]?.replace(qL,Fw),r=e.indexOf(Ly),i=e.substring(0,r),a=e.substring(r+1);return i==="api"&&(a=a.toLowerCase()),[i,a,t].filter(l=>l&&l.length>0).reduce((l,d,m)=>{switch(m){case 0:return d;case 1:return`${l}/${d}`;default:return`${l}#${d}`}},"")},"escapeUserAgent"),TV={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},UL=s(n=>({applyToStack:e=>{e.add(AV(n),TV)}}),"getUserAgentPlugin");var jL=!1;var HL=!1;var Dy=s(n=>typeof n=="string"&&(n.startsWith("fips-")||n.endsWith("-fips")),"isFipsRegion");var Uw=s(n=>Dy(n)?["fips-aws-global","aws-fips"].includes(n)?"us-east-1":n.replace(/fips-(dkr-|prod-)?|-fips/,""):n,"getRealRegion");var zL=s(n=>{let{region:e,useFipsEndpoint:t}=n;if(!e)throw new Error("Region is missing");return{...n,region:async()=>{if(typeof e=="string")return Uw(e);let r=await e();return Uw(r)},useFipsEndpoint:async()=>{let r=typeof e=="string"?e:await e();return Dy(r)?!0:typeof t!="function"?Promise.resolve(!!t):t()}}},"resolveRegionConfig");var $L=s(n=>({...n,eventStreamMarshaller:n.eventStreamSerdeProvider(n)}),"resolveEventStreamSerdeConfig");var VL="content-length";function kV(n){return e=>async t=>{let r=t.request;if(kt.isInstance(r)){let{body:i,headers:a}=r;if(i&&Object.keys(a).map(l=>l.toLowerCase()).indexOf(VL)===-1)try{let l=n(i);r.headers={...r.headers,[VL]:String(l)}}catch{}}return e({...t,request:r})}}s(kV,"contentLengthMiddleware");var OV={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},KL=s(n=>({applyToStack:e=>{e.add(kV(n.bodyLengthChecker),OV)}}),"getContentLengthPlugin");var WL=s(async n=>{let e=n?.Bucket||"";if(typeof n.Bucket=="string"&&(n.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),IV(e)){if(n.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!LV(e)||e.indexOf(".")!==-1&&!String(n.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(n.ForcePathStyle=!0);return n.DisableMultiRegionAccessPoints&&(n.disableMultiRegionAccessPoints=!0,n.DisableMRAP=!0),n},"resolveParamsForS3"),NV=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,RV=/(\d+\.){3}\d+/,MV=/\.\./;var LV=s(n=>NV.test(n)&&!RV.test(n)&&!MV.test(n),"isDnsCompatibleBucketName"),IV=s(n=>{let[e,t,r,,,i]=n.split(":"),a=e==="arn"&&n.split(":").length>=6,l=!!(a&&t&&r&&i);if(a&&!l)throw new Error(`Invalid ARN: ${n} was an invalid ARN.`);return l},"isArnBucketName");var GL=s((n,e,t)=>{let r=s(async()=>{let i=t[n]??t[e];return typeof i=="function"?i():i},"configProvider");return n==="credentialScope"||e==="CredentialScope"?async()=>{let i=typeof t.credentials=="function"?await t.credentials():t.credentials;return i?.credentialScope??i?.CredentialScope}:n==="accountId"||e==="AccountId"?async()=>{let i=typeof t.credentials=="function"?await t.credentials():t.credentials;return i?.accountId??i?.AccountId}:n==="endpoint"||e==="endpoint"?async()=>{let i=await r();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){let{protocol:a,hostname:l,port:d,path:m}=i;return`${a}//${l}${d?":"+d:""}${m}`}}return i}:r},"createConfigValueProvider");var Py=s(async n=>{},"getEndpointFromConfig");function ZL(n){let e={};if(n=n.replace(/^\?/,""),n)for(let t of n.split("&")){let[r,i=null]=t.split("=");r=decodeURIComponent(r),i&&(i=decodeURIComponent(i)),r in e?Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i}return e}s(ZL,"parseQueryString");var od=s(n=>{if(typeof n=="string")return od(new URL(n));let{hostname:e,pathname:t,port:r,protocol:i,search:a}=n,l;return a&&(l=ZL(a)),{hostname:e,port:r?parseInt(r):void 0,protocol:i,path:t,query:l}},"parseUrl");var By=s(n=>typeof n=="object"?"url"in n?od(n.url):n:od(n),"toEndpointV1");var YL=s(async(n,e,t,r)=>{if(!t.endpoint){let l;t.serviceConfiguredEndpoint?l=await t.serviceConfiguredEndpoint():l=await Py(t.serviceId),l&&(t.endpoint=()=>Promise.resolve(By(l)))}let i=await jw(n,e,t);if(typeof t.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return t.endpointProvider(i,r)},"getEndpointFromInstructions"),jw=s(async(n,e,t)=>{let r={},i=e?.getEndpointParameterInstructions?.()||{};for(let[a,l]of Object.entries(i))switch(l.type){case"staticContextParams":r[a]=l.value;break;case"contextParams":r[a]=n[l.name];break;case"clientContextParams":case"builtInParams":r[a]=await GL(l.name,a,t)();break;case"operationContextParams":r[a]=l.get(n);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(l))}return Object.keys(i).length===0&&Object.assign(r,t),String(t.serviceId).toLowerCase()==="s3"&&await WL(r),r},"resolveParams");var XL=s(({config:n,instructions:e})=>(t,r)=>async i=>{n.endpoint&&GN(r,"ENDPOINT_OVERRIDE","N");let a=await YL(i.input,{getEndpointParameterInstructions(){return e}},{...n},r);r.endpointV2=a,r.authSchemes=a.properties?.authSchemes;let l=r.authSchemes?.[0];if(l){r.signing_region=l.signingRegion,r.signing_service=l.signingName;let m=io(r)?.selectedHttpAuthScheme?.httpAuthOption;m&&(m.signingProperties=Object.assign(m.signingProperties||{},{signing_region:l.signingRegion,signingRegion:l.signingRegion,signing_service:l.signingName,signingName:l.signingName,signingRegionSet:l.signingRegionSet},l.properties))}return t({...i})},"endpointMiddleware");var DV={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Sh.name},qy=s((n,e)=>({applyToStack:t=>{t.addRelativeTo(XL({config:n,instructions:e}),DV)}}),"getEndpointPlugin");var QL=s(n=>{let e=n.tls??!0,{endpoint:t}=n,r=t!=null?async()=>By(await Kr(t)()):void 0,a={...n,endpoint:r,tls:e,isCustomEndpoint:!!t,useDualstackEndpoint:Kr(n.useDualstackEndpoint??!1),useFipsEndpoint:Kr(n.useFipsEndpoint??!1)},l;return a.serviceConfiguredEndpoint=async()=>(n.serviceId&&!l&&(l=Py(n.serviceId)),l),a},"resolveEndpointConfig");var oo;(function(n){n.STANDARD="standard",n.ADAPTIVE="adaptive"})(oo||(oo={}));var hl=3,Hw=oo.STANDARD;var JL=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],eI=["TimeoutError","RequestTimeout","RequestTimeoutException"],tI=[500,502,503,504],nI=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var PV=s(n=>n.$metadata?.clockSkewCorrected,"isClockSkewCorrectedError"),ad=s(n=>n.$metadata?.httpStatusCode===429||JL.includes(n.name)||n.$retryable?.throttling==!0,"isThrottlingError"),zh=s((n,e=0)=>PV(n)||eI.includes(n.name)||nI.includes(n?.code||"")||tI.includes(n.$metadata?.httpStatusCode||0)||n.cause!==void 0&&e<=10&&zh(n.cause,e+1),"isTransientError"),rI=s(n=>{if(n.$metadata?.httpStatusCode!==void 0){let e=n.$metadata.httpStatusCode;return 500<=e&&e<=599&&!zh(n)}return!1},"isServerError");var ld=class n{static{s(this,"DefaultRateLimiter")}constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>n.setTimeoutFn(r,t))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),ad(e)){let i=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=i,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(i),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),t=Math.floor(e*2)/2;if(this.requestCount++,t>this.lastTxRateBucket){let r=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}};ld.setTimeoutFn=setTimeout;var Fy="amz-sdk-invocation-id",Uy="amz-sdk-request";var iI=s(()=>{let n=100;return{computeNextBackoffDelay:s(r=>Math.floor(Math.min(2e4,Math.random()*2**r*n)),"computeNextBackoffDelay"),setDelayBase:s(r=>{n=r},"setDelayBase")}},"getDefaultRetryBackoffStrategy");var zw=s(({retryDelay:n,retryCount:e,retryCost:t})=>({getRetryCount:s(()=>e,"getRetryCount"),getRetryDelay:s(()=>Math.min(2e4,n),"getRetryDelay"),getRetryCost:s(()=>t,"getRetryCost")}),"createDefaultRetryToken");var Ac=class{static{s(this,"StandardRetryStrategy")}constructor(e){this.maxAttempts=e,this.mode=oo.STANDARD,this.capacity=500,this.retryBackoffStrategy=iI(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return zw({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){let r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){let i=t.errorType;this.retryBackoffStrategy.setDelayBase(i==="THROTTLING"?500:100);let a=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),l=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,a):a,d=this.getCapacityCost(i);return this.capacity-=d,zw({retryDelay:l,retryCount:e.getRetryCount()+1,retryCost:d})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${hl}`),hl}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return e==="TRANSIENT"?10:5}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};var Hy=class{static{s(this,"AdaptiveRetryStrategy")}constructor(e,t){this.maxAttemptsProvider=e,this.mode=oo.ADAPTIVE;let{rateLimiter:r}=t??{};this.rateLimiter=r??new ld,this.standardRetryStrategy=new Ac(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};var zy,BV=new Uint8Array(16);function Vw(){if(!zy&&(zy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zy(BV)}s(Vw,"rng");var Wr=[];for(let n=0;n<256;++n)Wr.push((n+256).toString(16).slice(1));function cI(n,e=0){return Wr[n[e+0]]+Wr[n[e+1]]+Wr[n[e+2]]+Wr[n[e+3]]+"-"+Wr[n[e+4]]+Wr[n[e+5]]+"-"+Wr[n[e+6]]+Wr[n[e+7]]+"-"+Wr[n[e+8]]+Wr[n[e+9]]+"-"+Wr[n[e+10]]+Wr[n[e+11]]+Wr[n[e+12]]+Wr[n[e+13]]+Wr[n[e+14]]+Wr[n[e+15]]}s(cI,"unsafeStringify");var qV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kw={randomUUID:qV};function FV(n,e,t){if(Kw.randomUUID&&!e&&!n)return Kw.randomUUID();n=n||{};let r=n.random||(n.rng||Vw)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return cI(r)}s(FV,"v4");var Ww=FV;var Gw=s(n=>n instanceof Error?n:n instanceof Object?Object.assign(new Error,n):typeof n=="string"?new Error(n):new Error(`AWS SDK error wrapper for ${n}`),"asSdkError");var uI=s(n=>{let{retryStrategy:e}=n,t=Kr(n.maxAttempts??hl);return{...n,maxAttempts:t,retryStrategy:async()=>e||(await Kr(n.retryMode)()===oo.ADAPTIVE?new Hy(t):new Ac(t))}},"resolveRetryConfig");var dI=s(n=>n?.body instanceof ReadableStream,"isStreamingPayload");var UV=s(n=>(e,t)=>async r=>{let i=await n.retryStrategy(),a=await n.maxAttempts();if(jV(i)){i=i;let l=await i.acquireInitialRetryToken(t.partition_id),d=new Error,m=0,g=0,{request:v}=r,_=kt.isInstance(v);for(_&&(v.headers[Fy]=Ww());;)try{_&&(v.headers[Uy]=`attempt=${m+1}; max=${a}`);let{response:E,output:C}=await e(r);return i.recordSuccess(l),C.$metadata.attempts=m+1,C.$metadata.totalRetryDelay=g,{response:E,output:C}}catch(E){let C=HV(E);if(d=Gw(E),_&&dI(v))throw(t.logger instanceof ul?console:t.logger)?.warn("An error was encountered in a non-retryable streaming request."),d;try{l=await i.refreshRetryTokenForRetry(l,C)}catch{throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=m+1,d.$metadata.totalRetryDelay=g,d}m=l.getRetryCount();let k=l.getRetryDelay();g+=k,await new Promise(D=>setTimeout(D,k))}}else return i=i,i?.mode&&(t.userAgent=[...t.userAgent||[],["cfg/retry-mode",i.mode]]),i.retry(e,r)},"retryMiddleware"),jV=s(n=>typeof n.acquireInitialRetryToken<"u"&&typeof n.refreshRetryTokenForRetry<"u"&&typeof n.recordSuccess<"u","isRetryStrategyV2"),HV=s(n=>{let e={error:n,errorType:zV(n)},t=VV(n.$response);return t&&(e.retryAfterHint=t),e},"getRetryErrorInfo"),zV=s(n=>ad(n)?"THROTTLING":zh(n)?"TRANSIENT":rI(n)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),$V={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},fI=s(n=>({applyToStack:e=>{e.add(UV(n),$V)}}),"getRetryPlugin"),VV=s(n=>{if(!gs.isInstance(n))return;let e=Object.keys(n.headers).find(a=>a.toLowerCase()==="retry-after");if(!e)return;let t=n.headers[e],r=Number(t);return Number.isNaN(r)?new Date(t):new Date(r*1e3)},"getRetryAfterHint");var $y={CrtSignerV4:null};var Vy=class{static{s(this,"SignatureV4MultiRegion")}sigv4aSigner;sigv4Signer;signerOptions;constructor(e){this.sigv4Signer=new Uh(e),this.signerOptions=e}async sign(e,t={}){if(t.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(e,t)}return this.sigv4Signer.sign(e,t)}async signWithCredentials(e,t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(e,t,r)}return this.sigv4Signer.signWithCredentials(e,t,r)}async presign(e,t={}){if(t.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(e,t)}return this.sigv4Signer.presign(e,t)}async presignWithCredentials(e,t,r={}){if(r.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let e=null;try{if(e=$y.CrtSignerV4,typeof e!="function")throw new Error}catch(t){throw t.message=`${t.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,t}this.sigv4aSigner=new e({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var _1="required",U="type",X="conditions",me="fn",pe="argv",ot="ref",_n="assign",Ge="url",Ze="properties",mD="backend",lo="authSchemes",vs="disableDoubleEncoding",_s="signingName",No="signingRegion",Ye="headers",x1="signingRegionSet";var qs="isSet",qr="booleanEquals",Qe="error",Qy="aws.partition",vn="stringEquals",rr="getAttr",di="name",ui="substring",hI="bucketSuffix",pD="parseURL",mI="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",Me="endpoint",Ce="tree",gD="aws.isVirtualHostableS3Bucket",Zy="{url#scheme}://{Bucket}.{url#authority}{url#path}",Oo="not",Yy="{url#scheme}://{url#authority}{url#path}",yD="hardwareType",bD="regionPrefix",pI="bucketAliasSuffix",b1="outpostId",kc="isValidHostLabel",w1="sigv4a",Gh="s3-outposts",hd="s3",vD="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",_D="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",gI="https://{Bucket}.s3.{partitionResult#dnsSuffix}",xD="aws.parseArn",wD="bucketArn",ED="arnType",Jy="",E1="s3-object-lambda",SD="accesspoint",S1="accessPointName",yI="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",bI="mrapPartition",vI="outpostType",_I="arnPrefix",CD="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",xI="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",wI="https://s3.{partitionResult#dnsSuffix}",ud={[_1]:!1,[U]:"String"},dd={[_1]:!0,default:!1,[U]:"Boolean"},$h={[_1]:!1,[U]:"Boolean"},ao={[me]:qr,[pe]:[{[ot]:"Accelerate"},!0]},Mn={[me]:qr,[pe]:[{[ot]:"UseFIPS"},!0]},Rn={[me]:qr,[pe]:[{[ot]:"UseDualStack"},!0]},gr={[me]:qs,[pe]:[{[ot]:"Endpoint"}]},AD={[me]:Qy,[pe]:[{[ot]:"Region"}],[_n]:"partitionResult"},EI={[me]:vn,[pe]:[{[me]:rr,[pe]:[{[ot]:"partitionResult"},di]},"aws-cn"]},eb={[me]:qs,[pe]:[{[ot]:"Bucket"}]},ir={[ot]:"Bucket"},Ri={[me]:pD,[pe]:[{[ot]:"Endpoint"}],[_n]:"url"},Xy={[me]:qr,[pe]:[{[me]:rr,[pe]:[{[ot]:"url"},"isIp"]},!0]},TD={[ot]:"url"},kD={[me]:"uriEncode",[pe]:[ir],[_n]:"uri_encoded_bucket"},pa={[mD]:"S3Express",[lo]:[{[vs]:!0,[di]:"sigv4",[_s]:"s3express",[No]:"{Region}"}]},mt={},OD={[me]:gD,[pe]:[ir,!1]},Zw={[Qe]:"S3Express bucket name is not a valid virtual hostable name.",[U]:Qe},tb={[mD]:"S3Express",[lo]:[{[vs]:!0,[di]:"sigv4-s3express",[_s]:"s3express",[No]:"{Region}"}]},SI={[me]:qs,[pe]:[{[ot]:"UseS3ExpressControlEndpoint"}]},CI={[me]:qr,[pe]:[{[ot]:"UseS3ExpressControlEndpoint"},!0]},wt={[me]:Oo,[pe]:[gr]},AI={[Qe]:"Unrecognized S3Express bucket name format.",[U]:Qe},TI={[me]:Oo,[pe]:[eb]},kI={[ot]:yD},OI={[X]:[wt],[Qe]:"Expected a endpoint to be specified but no endpoint was found",[U]:Qe},Ky={[lo]:[{[vs]:!0,[di]:w1,[_s]:Gh,[x1]:["*"]},{[vs]:!0,[di]:"sigv4",[_s]:Gh,[No]:"{Region}"}]},Yw={[me]:qr,[pe]:[{[ot]:"ForcePathStyle"},!1]},KV={[ot]:"ForcePathStyle"},pr={[me]:qr,[pe]:[{[ot]:"Accelerate"},!1]},Sr={[me]:vn,[pe]:[{[ot]:"Region"},"aws-global"]},Dr={[lo]:[{[vs]:!0,[di]:"sigv4",[_s]:hd,[No]:"us-east-1"}]},Ut={[me]:Oo,[pe]:[Sr]},Pr={[me]:qr,[pe]:[{[ot]:"UseGlobalEndpoint"},!0]},NI={[Ge]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ze]:{[lo]:[{[vs]:!0,[di]:"sigv4",[_s]:hd,[No]:"{Region}"}]},[Ye]:{}},yr={[lo]:[{[vs]:!0,[di]:"sigv4",[_s]:hd,[No]:"{Region}"}]},Br={[me]:qr,[pe]:[{[ot]:"UseGlobalEndpoint"},!1]},qt={[me]:qr,[pe]:[{[ot]:"UseDualStack"},!1]},RI={[Ge]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},Ot={[me]:qr,[pe]:[{[ot]:"UseFIPS"},!1]},MI={[Ge]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},LI={[Ge]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},Xw={[me]:qr,[pe]:[{[me]:rr,[pe]:[TD,"isIp"]},!1]},Qw={[Ge]:vD,[Ze]:yr,[Ye]:{}},v1={[Ge]:Zy,[Ze]:yr,[Ye]:{}},II={[Me]:v1,[U]:Me},Jw={[Ge]:_D,[Ze]:yr,[Ye]:{}},DI={[Ge]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},Wy={[Qe]:"Invalid region: region was not a valid DNS name.",[U]:Qe},rs={[ot]:wD},ND={[ot]:ED},e1={[me]:rr,[pe]:[rs,"service"]},C1={[ot]:S1},PI={[X]:[Rn],[Qe]:"S3 Object Lambda does not support Dual-stack",[U]:Qe},BI={[X]:[ao],[Qe]:"S3 Object Lambda does not support S3 Accelerate",[U]:Qe},qI={[X]:[{[me]:qs,[pe]:[{[ot]:"DisableAccessPoints"}]},{[me]:qr,[pe]:[{[ot]:"DisableAccessPoints"},!0]}],[Qe]:"Access points are not supported for this operation",[U]:Qe},t1={[X]:[{[me]:qs,[pe]:[{[ot]:"UseArnRegion"}]},{[me]:qr,[pe]:[{[ot]:"UseArnRegion"},!1]},{[me]:Oo,[pe]:[{[me]:vn,[pe]:[{[me]:rr,[pe]:[rs,"region"]},"{Region}"]}]}],[Qe]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[U]:Qe},RD={[me]:rr,[pe]:[{[ot]:"bucketPartition"},di]},MD={[me]:rr,[pe]:[rs,"accountId"]},n1={[lo]:[{[vs]:!0,[di]:"sigv4",[_s]:E1,[No]:"{bucketArn#region}"}]},FI={[Qe]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[U]:Qe},r1={[Qe]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[U]:Qe},i1={[Qe]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[U]:Qe},s1={[Qe]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[U]:Qe},UI={[Qe]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[U]:Qe},jI={[Qe]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[U]:Qe},Vh={[lo]:[{[vs]:!0,[di]:"sigv4",[_s]:hd,[No]:"{bucketArn#region}"}]},HI={[lo]:[{[vs]:!0,[di]:w1,[_s]:Gh,[x1]:["*"]},{[vs]:!0,[di]:"sigv4",[_s]:Gh,[No]:"{bucketArn#region}"}]},zI={[me]:xD,[pe]:[ir]},$I={[Ge]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ze]:yr,[Ye]:{}},VI={[Ge]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ze]:yr,[Ye]:{}},KI={[Ge]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ze]:yr,[Ye]:{}},o1={[Ge]:CD,[Ze]:yr,[Ye]:{}},WI={[Ge]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ze]:yr,[Ye]:{}},GI={[ot]:"UseObjectLambdaEndpoint"},a1={[lo]:[{[vs]:!0,[di]:"sigv4",[_s]:E1,[No]:"{Region}"}]},ZI={[Ge]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},YI={[Ge]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},XI={[Ge]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},l1={[Ge]:Yy,[Ze]:yr,[Ye]:{}},QI={[Ge]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[Ze]:yr,[Ye]:{}},c1=[{[ot]:"Region"}],WV=[{[ot]:"Endpoint"}],GV=[ir],u1=[Rn],Gy=[ao],Tc=[gr,Ri],JI=[{[me]:qs,[pe]:[{[ot]:"DisableS3ExpressSessionAuth"}]},{[me]:qr,[pe]:[{[ot]:"DisableS3ExpressSessionAuth"},!0]}],eD=[Xy],d1=[kD],f1=[OD],fd=[Mn],tD=[{[me]:ui,[pe]:[ir,6,14,!0],[_n]:"s3expressAvailabilityZoneId"},{[me]:ui,[pe]:[ir,14,16,!0],[_n]:"s3expressAvailabilityZoneDelim"},{[me]:vn,[pe]:[{[ot]:"s3expressAvailabilityZoneDelim"},"--"]}],Kh=[{[X]:[Mn],[Me]:{[Ge]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Ze]:pa,[Ye]:{}},[U]:Me},{[Me]:{[Ge]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Ze]:pa,[Ye]:{}},[U]:Me}],nD=[{[me]:ui,[pe]:[ir,6,15,!0],[_n]:"s3expressAvailabilityZoneId"},{[me]:ui,[pe]:[ir,15,17,!0],[_n]:"s3expressAvailabilityZoneDelim"},{[me]:vn,[pe]:[{[ot]:"s3expressAvailabilityZoneDelim"},"--"]}],rD=[{[me]:ui,[pe]:[ir,6,19,!0],[_n]:"s3expressAvailabilityZoneId"},{[me]:ui,[pe]:[ir,19,21,!0],[_n]:"s3expressAvailabilityZoneDelim"},{[me]:vn,[pe]:[{[ot]:"s3expressAvailabilityZoneDelim"},"--"]}],iD=[{[me]:ui,[pe]:[ir,6,20,!0],[_n]:"s3expressAvailabilityZoneId"},{[me]:ui,[pe]:[ir,20,22,!0],[_n]:"s3expressAvailabilityZoneDelim"},{[me]:vn,[pe]:[{[ot]:"s3expressAvailabilityZoneDelim"},"--"]}],sD=[{[me]:ui,[pe]:[ir,6,26,!0],[_n]:"s3expressAvailabilityZoneId"},{[me]:ui,[pe]:[ir,26,28,!0],[_n]:"s3expressAvailabilityZoneDelim"},{[me]:vn,[pe]:[{[ot]:"s3expressAvailabilityZoneDelim"},"--"]}],Wh=[{[X]:[Mn],[Me]:{[Ge]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Ze]:tb,[Ye]:{}},[U]:Me},{[Me]:{[Ge]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Ze]:tb,[Ye]:{}},[U]:Me}],ZV=[eb],oD=[{[me]:kc,[pe]:[{[ot]:b1},!1]}],aD=[{[me]:vn,[pe]:[{[ot]:bD},"beta"]}],YV=["*"],ml=[AD],lD=[{[me]:kc,[pe]:[{[ot]:"Region"},!1]}],pl=[{[me]:vn,[pe]:[{[ot]:"Region"},"us-east-1"]}],h1=[{[me]:vn,[pe]:[ND,SD]}],cD=[{[me]:rr,[pe]:[rs,"resourceId[1]"],[_n]:S1},{[me]:Oo,[pe]:[{[me]:vn,[pe]:[C1,Jy]}]}],XV=[rs,"resourceId[1]"],m1=[{[me]:Oo,[pe]:[{[me]:vn,[pe]:[{[me]:rr,[pe]:[rs,"region"]},Jy]}]}],uD=[{[me]:Oo,[pe]:[{[me]:qs,[pe]:[{[me]:rr,[pe]:[rs,"resourceId[2]"]}]}]}],QV=[rs,"resourceId[2]"],p1=[{[me]:Qy,[pe]:[{[me]:rr,[pe]:[rs,"region"]}],[_n]:"bucketPartition"}],dD=[{[me]:vn,[pe]:[RD,{[me]:rr,[pe]:[{[ot]:"partitionResult"},di]}]}],g1=[{[me]:kc,[pe]:[{[me]:rr,[pe]:[rs,"region"]},!0]}],y1=[{[me]:kc,[pe]:[MD,!1]}],fD=[{[me]:kc,[pe]:[C1,!1]}],hD=[{[me]:kc,[pe]:[{[ot]:"Region"},!0]}],JV={version:"1.0",parameters:{Bucket:ud,Region:ud,UseFIPS:dd,UseDualStack:dd,Endpoint:ud,ForcePathStyle:dd,Accelerate:dd,UseGlobalEndpoint:dd,UseObjectLambdaEndpoint:$h,Key:ud,Prefix:ud,CopySource:ud,DisableAccessPoints:$h,DisableMultiRegionAccessPoints:dd,UseArnRegion:$h,UseS3ExpressControlEndpoint:$h,DisableS3ExpressSessionAuth:$h},rules:[{[X]:[{[me]:qs,[pe]:c1}],rules:[{[X]:[ao,Mn],error:"Accelerate cannot be used with FIPS",[U]:Qe},{[X]:[Rn,gr],error:"Cannot set dual-stack in combination with a custom endpoint.",[U]:Qe},{[X]:[gr,Mn],error:"A custom endpoint cannot be combined with FIPS",[U]:Qe},{[X]:[gr,ao],error:"A custom endpoint cannot be combined with S3 Accelerate",[U]:Qe},{[X]:[Mn,AD,EI],error:"Partition does not support FIPS",[U]:Qe},{[X]:[eb,{[me]:ui,[pe]:[ir,0,6,!0],[_n]:hI},{[me]:vn,[pe]:[{[ot]:hI},"--x-s3"]}],rules:[{[X]:u1,error:"S3Express does not support Dual-stack.",[U]:Qe},{[X]:Gy,error:"S3Express does not support S3 Accelerate.",[U]:Qe},{[X]:Tc,rules:[{[X]:JI,rules:[{[X]:eD,rules:[{[X]:d1,rules:[{endpoint:{[Ge]:mI,[Ze]:pa,[Ye]:mt},[U]:Me}],[U]:Ce}],[U]:Ce},{[X]:f1,rules:[{endpoint:{[Ge]:Zy,[Ze]:pa,[Ye]:mt},[U]:Me}],[U]:Ce},Zw],[U]:Ce},{[X]:eD,rules:[{[X]:d1,rules:[{endpoint:{[Ge]:mI,[Ze]:tb,[Ye]:mt},[U]:Me}],[U]:Ce}],[U]:Ce},{[X]:f1,rules:[{endpoint:{[Ge]:Zy,[Ze]:tb,[Ye]:mt},[U]:Me}],[U]:Ce},Zw],[U]:Ce},{[X]:[SI,CI],rules:[{[X]:[kD,wt],rules:[{[X]:fd,endpoint:{[Ge]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[Ze]:pa,[Ye]:mt},[U]:Me},{endpoint:{[Ge]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[Ze]:pa,[Ye]:mt},[U]:Me}],[U]:Ce}],[U]:Ce},{[X]:f1,rules:[{[X]:JI,rules:[{[X]:tD,rules:Kh,[U]:Ce},{[X]:nD,rules:Kh,[U]:Ce},{[X]:rD,rules:Kh,[U]:Ce},{[X]:iD,rules:Kh,[U]:Ce},{[X]:sD,rules:Kh,[U]:Ce},AI],[U]:Ce},{[X]:tD,rules:Wh,[U]:Ce},{[X]:nD,rules:Wh,[U]:Ce},{[X]:rD,rules:Wh,[U]:Ce},{[X]:iD,rules:Wh,[U]:Ce},{[X]:sD,rules:Wh,[U]:Ce},AI],[U]:Ce},Zw],[U]:Ce},{[X]:[TI,SI,CI],rules:[{[X]:Tc,endpoint:{[Ge]:Yy,[Ze]:pa,[Ye]:mt},[U]:Me},{[X]:fd,endpoint:{[Ge]:"https://s3express-control-fips.{Region}.amazonaws.com",[Ze]:pa,[Ye]:mt},[U]:Me},{endpoint:{[Ge]:"https://s3express-control.{Region}.amazonaws.com",[Ze]:pa,[Ye]:mt},[U]:Me}],[U]:Ce},{[X]:[eb,{[me]:ui,[pe]:[ir,49,50,!0],[_n]:yD},{[me]:ui,[pe]:[ir,8,12,!0],[_n]:bD},{[me]:ui,[pe]:[ir,0,7,!0],[_n]:pI},{[me]:ui,[pe]:[ir,32,49,!0],[_n]:b1},{[me]:Qy,[pe]:c1,[_n]:"regionPartition"},{[me]:vn,[pe]:[{[ot]:pI},"--op-s3"]}],rules:[{[X]:oD,rules:[{[X]:[{[me]:vn,[pe]:[kI,"e"]}],rules:[{[X]:aD,rules:[OI,{[X]:Tc,endpoint:{[Ge]:"https://{Bucket}.ec2.{url#authority}",[Ze]:Ky,[Ye]:mt},[U]:Me}],[U]:Ce},{endpoint:{[Ge]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Ze]:Ky,[Ye]:mt},[U]:Me}],[U]:Ce},{[X]:[{[me]:vn,[pe]:[kI,"o"]}],rules:[{[X]:aD,rules:[OI,{[X]:Tc,endpoint:{[Ge]:"https://{Bucket}.op-{outpostId}.{url#authority}",[Ze]:Ky,[Ye]:mt},[U]:Me}],[U]:Ce},{endpoint:{[Ge]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Ze]:Ky,[Ye]:mt},[U]:Me}],[U]:Ce},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[U]:Qe}],[U]:Ce},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[U]:Qe}],[U]:Ce},{[X]:ZV,rules:[{[X]:[gr,{[me]:Oo,[pe]:[{[me]:qs,[pe]:[{[me]:pD,[pe]:WV}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[U]:Qe},{[X]:[Yw,OD],rules:[{[X]:ml,rules:[{[X]:lD,rules:[{[X]:[ao,EI],error:"S3 Accelerate cannot be used in this region",[U]:Qe},{[X]:[Rn,Mn,pr,wt,Sr],endpoint:{[Ge]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Rn,Mn,pr,wt,Ut,Pr],rules:[{endpoint:NI,[U]:Me}],[U]:Ce},{[X]:[Rn,Mn,pr,wt,Ut,Br],endpoint:NI,[U]:Me},{[X]:[qt,Mn,pr,wt,Sr],endpoint:{[Ge]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,Mn,pr,wt,Ut,Pr],rules:[{endpoint:RI,[U]:Me}],[U]:Ce},{[X]:[qt,Mn,pr,wt,Ut,Br],endpoint:RI,[U]:Me},{[X]:[Rn,Ot,ao,wt,Sr],endpoint:{[Ge]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Rn,Ot,ao,wt,Ut,Pr],rules:[{endpoint:MI,[U]:Me}],[U]:Ce},{[X]:[Rn,Ot,ao,wt,Ut,Br],endpoint:MI,[U]:Me},{[X]:[Rn,Ot,pr,wt,Sr],endpoint:{[Ge]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Rn,Ot,pr,wt,Ut,Pr],rules:[{endpoint:LI,[U]:Me}],[U]:Ce},{[X]:[Rn,Ot,pr,wt,Ut,Br],endpoint:LI,[U]:Me},{[X]:[qt,Ot,pr,gr,Ri,Xy,Sr],endpoint:{[Ge]:vD,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,Ot,pr,gr,Ri,Xw,Sr],endpoint:{[Ge]:Zy,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,Ot,pr,gr,Ri,Xy,Ut,Pr],rules:[{[X]:pl,endpoint:Qw,[U]:Me},{endpoint:Qw,[U]:Me}],[U]:Ce},{[X]:[qt,Ot,pr,gr,Ri,Xw,Ut,Pr],rules:[{[X]:pl,endpoint:v1,[U]:Me},II],[U]:Ce},{[X]:[qt,Ot,pr,gr,Ri,Xy,Ut,Br],endpoint:Qw,[U]:Me},{[X]:[qt,Ot,pr,gr,Ri,Xw,Ut,Br],endpoint:v1,[U]:Me},{[X]:[qt,Ot,ao,wt,Sr],endpoint:{[Ge]:_D,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,Ot,ao,wt,Ut,Pr],rules:[{[X]:pl,endpoint:Jw,[U]:Me},{endpoint:Jw,[U]:Me}],[U]:Ce},{[X]:[qt,Ot,ao,wt,Ut,Br],endpoint:Jw,[U]:Me},{[X]:[qt,Ot,pr,wt,Sr],endpoint:{[Ge]:gI,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,Ot,pr,wt,Ut,Pr],rules:[{[X]:pl,endpoint:{[Ge]:gI,[Ze]:yr,[Ye]:mt},[U]:Me},{endpoint:DI,[U]:Me}],[U]:Ce},{[X]:[qt,Ot,pr,wt,Ut,Br],endpoint:DI,[U]:Me}],[U]:Ce},Wy],[U]:Ce}],[U]:Ce},{[X]:[gr,Ri,{[me]:vn,[pe]:[{[me]:rr,[pe]:[TD,"scheme"]},"http"]},{[me]:gD,[pe]:[ir,!0]},Yw,Ot,qt,pr],rules:[{[X]:ml,rules:[{[X]:lD,rules:[II],[U]:Ce},Wy],[U]:Ce}],[U]:Ce},{[X]:[Yw,{[me]:xD,[pe]:GV,[_n]:wD}],rules:[{[X]:[{[me]:rr,[pe]:[rs,"resourceId[0]"],[_n]:ED},{[me]:Oo,[pe]:[{[me]:vn,[pe]:[ND,Jy]}]}],rules:[{[X]:[{[me]:vn,[pe]:[e1,E1]}],rules:[{[X]:h1,rules:[{[X]:cD,rules:[PI,BI,{[X]:m1,rules:[qI,{[X]:uD,rules:[t1,{[X]:p1,rules:[{[X]:ml,rules:[{[X]:dD,rules:[{[X]:g1,rules:[{[X]:[{[me]:vn,[pe]:[MD,Jy]}],error:"Invalid ARN: Missing account id",[U]:Qe},{[X]:y1,rules:[{[X]:fD,rules:[{[X]:Tc,endpoint:{[Ge]:yI,[Ze]:n1,[Ye]:mt},[U]:Me},{[X]:fd,endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ze]:n1,[Ye]:mt},[U]:Me},{endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ze]:n1,[Ye]:mt},[U]:Me}],[U]:Ce},FI],[U]:Ce},r1],[U]:Ce},i1],[U]:Ce},s1],[U]:Ce}],[U]:Ce}],[U]:Ce},UI],[U]:Ce},{error:"Invalid ARN: bucket ARN is missing a region",[U]:Qe}],[U]:Ce},jI],[U]:Ce},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[U]:Qe}],[U]:Ce},{[X]:h1,rules:[{[X]:cD,rules:[{[X]:m1,rules:[{[X]:h1,rules:[{[X]:m1,rules:[qI,{[X]:uD,rules:[t1,{[X]:p1,rules:[{[X]:ml,rules:[{[X]:[{[me]:vn,[pe]:[RD,"{partitionResult#name}"]}],rules:[{[X]:g1,rules:[{[X]:[{[me]:vn,[pe]:[e1,hd]}],rules:[{[X]:y1,rules:[{[X]:fD,rules:[{[X]:Gy,error:"Access Points do not support S3 Accelerate",[U]:Qe},{[X]:[Mn,Rn],endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ze]:Vh,[Ye]:mt},[U]:Me},{[X]:[Mn,qt],endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ze]:Vh,[Ye]:mt},[U]:Me},{[X]:[Ot,Rn],endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ze]:Vh,[Ye]:mt},[U]:Me},{[X]:[Ot,qt,gr,Ri],endpoint:{[Ge]:yI,[Ze]:Vh,[Ye]:mt},[U]:Me},{[X]:[Ot,qt],endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ze]:Vh,[Ye]:mt},[U]:Me}],[U]:Ce},FI],[U]:Ce},r1],[U]:Ce},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[U]:Qe}],[U]:Ce},i1],[U]:Ce},s1],[U]:Ce}],[U]:Ce}],[U]:Ce},UI],[U]:Ce}],[U]:Ce}],[U]:Ce},{[X]:[{[me]:kc,[pe]:[C1,!0]}],rules:[{[X]:u1,error:"S3 MRAP does not support dual-stack",[U]:Qe},{[X]:fd,error:"S3 MRAP does not support FIPS",[U]:Qe},{[X]:Gy,error:"S3 MRAP does not support S3 Accelerate",[U]:Qe},{[X]:[{[me]:qr,[pe]:[{[ot]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[U]:Qe},{[X]:[{[me]:Qy,[pe]:c1,[_n]:bI}],rules:[{[X]:[{[me]:vn,[pe]:[{[me]:rr,[pe]:[{[ot]:bI},di]},{[me]:rr,[pe]:[rs,"partition"]}]}],rules:[{endpoint:{[Ge]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[Ze]:{[lo]:[{[vs]:!0,name:w1,[_s]:hd,[x1]:YV}]},[Ye]:mt},[U]:Me}],[U]:Ce},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[U]:Qe}],[U]:Ce}],[U]:Ce},{error:"Invalid Access Point Name",[U]:Qe}],[U]:Ce},jI],[U]:Ce},{[X]:[{[me]:vn,[pe]:[e1,Gh]}],rules:[{[X]:u1,error:"S3 Outposts does not support Dual-stack",[U]:Qe},{[X]:fd,error:"S3 Outposts does not support FIPS",[U]:Qe},{[X]:Gy,error:"S3 Outposts does not support S3 Accelerate",[U]:Qe},{[X]:[{[me]:qs,[pe]:[{[me]:rr,[pe]:[rs,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[U]:Qe},{[X]:[{[me]:rr,[pe]:XV,[_n]:b1}],rules:[{[X]:oD,rules:[t1,{[X]:p1,rules:[{[X]:ml,rules:[{[X]:dD,rules:[{[X]:g1,rules:[{[X]:y1,rules:[{[X]:[{[me]:rr,[pe]:QV,[_n]:vI}],rules:[{[X]:[{[me]:rr,[pe]:[rs,"resourceId[3]"],[_n]:S1}],rules:[{[X]:[{[me]:vn,[pe]:[{[ot]:vI},SD]}],rules:[{[X]:Tc,endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[Ze]:HI,[Ye]:mt},[U]:Me},{endpoint:{[Ge]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ze]:HI,[Ye]:mt},[U]:Me}],[U]:Ce},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[U]:Qe}],[U]:Ce},{error:"Invalid ARN: expected an access point name",[U]:Qe}],[U]:Ce},{error:"Invalid ARN: Expected a 4-component resource",[U]:Qe}],[U]:Ce},r1],[U]:Ce},i1],[U]:Ce},s1],[U]:Ce}],[U]:Ce}],[U]:Ce},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[U]:Qe}],[U]:Ce},{error:"Invalid ARN: The Outpost Id was not set",[U]:Qe}],[U]:Ce},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[U]:Qe}],[U]:Ce},{error:"Invalid ARN: No ARN type specified",[U]:Qe}],[U]:Ce},{[X]:[{[me]:ui,[pe]:[ir,0,4,!1],[_n]:_I},{[me]:vn,[pe]:[{[ot]:_I},"arn:"]},{[me]:Oo,[pe]:[{[me]:qs,[pe]:[zI]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[U]:Qe},{[X]:[{[me]:qr,[pe]:[KV,!0]},zI],error:"Path-style addressing cannot be used with ARN buckets",[U]:Qe},{[X]:d1,rules:[{[X]:ml,rules:[{[X]:[pr],rules:[{[X]:[Rn,wt,Mn,Sr],endpoint:{[Ge]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Rn,wt,Mn,Ut,Pr],rules:[{endpoint:$I,[U]:Me}],[U]:Ce},{[X]:[Rn,wt,Mn,Ut,Br],endpoint:$I,[U]:Me},{[X]:[qt,wt,Mn,Sr],endpoint:{[Ge]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,wt,Mn,Ut,Pr],rules:[{endpoint:VI,[U]:Me}],[U]:Ce},{[X]:[qt,wt,Mn,Ut,Br],endpoint:VI,[U]:Me},{[X]:[Rn,wt,Ot,Sr],endpoint:{[Ge]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Rn,wt,Ot,Ut,Pr],rules:[{endpoint:KI,[U]:Me}],[U]:Ce},{[X]:[Rn,wt,Ot,Ut,Br],endpoint:KI,[U]:Me},{[X]:[qt,gr,Ri,Ot,Sr],endpoint:{[Ge]:CD,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,gr,Ri,Ot,Ut,Pr],rules:[{[X]:pl,endpoint:o1,[U]:Me},{endpoint:o1,[U]:Me}],[U]:Ce},{[X]:[qt,gr,Ri,Ot,Ut,Br],endpoint:o1,[U]:Me},{[X]:[qt,wt,Ot,Sr],endpoint:{[Ge]:xI,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[qt,wt,Ot,Ut,Pr],rules:[{[X]:pl,endpoint:{[Ge]:xI,[Ze]:yr,[Ye]:mt},[U]:Me},{endpoint:WI,[U]:Me}],[U]:Ce},{[X]:[qt,wt,Ot,Ut,Br],endpoint:WI,[U]:Me}],[U]:Ce},{error:"Path-style addressing cannot be used with S3 Accelerate",[U]:Qe}],[U]:Ce}],[U]:Ce}],[U]:Ce},{[X]:[{[me]:qs,[pe]:[GI]},{[me]:qr,[pe]:[GI,!0]}],rules:[{[X]:ml,rules:[{[X]:hD,rules:[PI,BI,{[X]:Tc,endpoint:{[Ge]:Yy,[Ze]:a1,[Ye]:mt},[U]:Me},{[X]:fd,endpoint:{[Ge]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[Ze]:a1,[Ye]:mt},[U]:Me},{endpoint:{[Ge]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[Ze]:a1,[Ye]:mt},[U]:Me}],[U]:Ce},Wy],[U]:Ce}],[U]:Ce},{[X]:[TI],rules:[{[X]:ml,rules:[{[X]:hD,rules:[{[X]:[Mn,Rn,wt,Sr],endpoint:{[Ge]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Mn,Rn,wt,Ut,Pr],rules:[{endpoint:ZI,[U]:Me}],[U]:Ce},{[X]:[Mn,Rn,wt,Ut,Br],endpoint:ZI,[U]:Me},{[X]:[Mn,qt,wt,Sr],endpoint:{[Ge]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Mn,qt,wt,Ut,Pr],rules:[{endpoint:YI,[U]:Me}],[U]:Ce},{[X]:[Mn,qt,wt,Ut,Br],endpoint:YI,[U]:Me},{[X]:[Ot,Rn,wt,Sr],endpoint:{[Ge]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Ot,Rn,wt,Ut,Pr],rules:[{endpoint:XI,[U]:Me}],[U]:Ce},{[X]:[Ot,Rn,wt,Ut,Br],endpoint:XI,[U]:Me},{[X]:[Ot,qt,gr,Ri,Sr],endpoint:{[Ge]:Yy,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Ot,qt,gr,Ri,Ut,Pr],rules:[{[X]:pl,endpoint:l1,[U]:Me},{endpoint:l1,[U]:Me}],[U]:Ce},{[X]:[Ot,qt,gr,Ri,Ut,Br],endpoint:l1,[U]:Me},{[X]:[Ot,qt,wt,Sr],endpoint:{[Ge]:wI,[Ze]:Dr,[Ye]:mt},[U]:Me},{[X]:[Ot,qt,wt,Ut,Pr],rules:[{[X]:pl,endpoint:{[Ge]:wI,[Ze]:yr,[Ye]:mt},[U]:Me},{endpoint:QI,[U]:Me}],[U]:Ce},{[X]:[Ot,qt,wt,Ut,Br],endpoint:QI,[U]:Me}],[U]:Ce},Wy],[U]:Ce}],[U]:Ce}],[U]:Ce},{error:"A region must be set when sending requests to S3.",[U]:Qe}]},LD=JV;var eK=new Ay({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),nb=s((n,e={})=>eK.get(n,()=>Iw(LD,{endpointParams:n,logger:e.logger})),"defaultEndpointResolver");Cc.aws=Pw;var tK=s(n=>async(e,t,r)=>{if(!r)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let i=await n(e,t,r),a=io(t)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!a)throw new Error(`getEndpointParameterInstructions() is not defined on \`${t.commandName}\``);let l=await jw(r,{getEndpointParameterInstructions:a},e);return Object.assign(i,l)},"createEndpointRuleSetHttpAuthSchemeParametersProvider"),nK=s(async(n,e,t)=>({operation:io(e).operation,region:await Kr(n.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),"_defaultS3HttpAuthSchemeParametersProvider"),ID=tK(nK);function DD(n){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:n.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}s(DD,"createAwsAuthSigv4HttpAuthOption");function PD(n){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:n.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}s(PD,"createAwsAuthSigv4aHttpAuthOption");var rK=s((n,e,t)=>s(i=>{let l=n(i).properties?.authSchemes;if(!l)return e(i);let d=[];for(let m of l){let{name:g,properties:v={},..._}=m,E=g.toLowerCase();g!==E&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${g}\` to \`${E}\``);let C;if(E==="sigv4a"){C="aws.auth#sigv4a";let O=l.find(P=>{let j=P.name.toLowerCase();return j!=="sigv4a"&&j.startsWith("sigv4")});if(!$y.CrtSignerV4&&O)continue}else if(E.startsWith("sigv4"))C="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${E}\``);let k=t[C];if(!k)throw new Error(`Could not find HttpAuthOption create function for \`${C}\``);let D=k(i);D.schemeId=C,D.signingProperties={...D.signingProperties||{},..._,...v},d.push(D)}return d},"endpointRuleSetHttpAuthSchemeProvider"),"createEndpointRuleSetHttpAuthSchemeProvider"),iK=s(n=>{let e=[];switch(n.operation){default:e.push(DD(n)),e.push(PD(n))}return e},"_defaultS3HttpAuthSchemeProvider"),BD=rK(nb,iK,{"aws.auth#sigv4":DD,"aws.auth#sigv4a":PD}),qD=s(n=>{let e=_R(n);return{...QN(e)}},"resolveHttpAuthSchemeConfig");var FD=s(n=>({...n,useFipsEndpoint:n.useFipsEndpoint??!1,useDualstackEndpoint:n.useDualstackEndpoint??!1,forcePathStyle:n.forcePathStyle??!1,useAccelerateEndpoint:n.useAccelerateEndpoint??!1,useGlobalEndpoint:n.useGlobalEndpoint??!1,disableMultiregionAccessPoints:n.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),"resolveClientEndpointParameters"),rb={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Cr=class n extends yy{static{s(this,"S3ServiceException")}constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}};var ib=class n extends Cr{static{s(this,"NoSuchUpload")}name="NoSuchUpload";$fault="client";constructor(e){super({name:"NoSuchUpload",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}};var sb=class n extends Cr{static{s(this,"ObjectNotInActiveTierError")}name="ObjectNotInActiveTierError";$fault="client";constructor(e){super({name:"ObjectNotInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}},ob=class n extends Cr{static{s(this,"BucketAlreadyExists")}name="BucketAlreadyExists";$fault="client";constructor(e){super({name:"BucketAlreadyExists",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}},ab=class n extends Cr{static{s(this,"BucketAlreadyOwnedByYou")}name="BucketAlreadyOwnedByYou";$fault="client";constructor(e){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}};var lb=class n extends Cr{static{s(this,"NoSuchBucket")}name="NoSuchBucket";$fault="client";constructor(e){super({name:"NoSuchBucket",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}},A1;(function(n){n.visit=(e,t)=>e.Prefix!==void 0?t.Prefix(e.Prefix):e.Tag!==void 0?t.Tag(e.Tag):e.And!==void 0?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])})(A1||(A1={}));var T1;(function(n){n.visit=(e,t)=>e.Prefix!==void 0?t.Prefix(e.Prefix):e.Tag!==void 0?t.Tag(e.Tag):e.AccessPointArn!==void 0?t.AccessPointArn(e.AccessPointArn):e.And!==void 0?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])})(T1||(T1={}));var cb=class n extends Cr{static{s(this,"InvalidObjectState")}name="InvalidObjectState";$fault="client";StorageClass;AccessTier;constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}},ub=class n extends Cr{static{s(this,"NoSuchKey")}name="NoSuchKey";$fault="client";constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}};var db=class n extends Cr{static{s(this,"NotFound")}name="NotFound";$fault="client";constructor(e){super({name:"NotFound",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}};var sK=s(n=>({...n,...n.SecretAccessKey&&{SecretAccessKey:bs},...n.SessionToken&&{SessionToken:bs}}),"SessionCredentialsFilterSensitiveLog"),UD=s(n=>({...n,...n.SSEKMSKeyId&&{SSEKMSKeyId:bs},...n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:bs},...n.Credentials&&{Credentials:sK(n.Credentials)}}),"CreateSessionOutputFilterSensitiveLog"),jD=s(n=>({...n,...n.SSEKMSKeyId&&{SSEKMSKeyId:bs},...n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:bs}}),"CreateSessionRequestFilterSensitiveLog");var fb=class n extends Cr{static{s(this,"EncryptionTypeMismatch")}name="EncryptionTypeMismatch";$fault="client";constructor(e){super({name:"EncryptionTypeMismatch",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}},hb=class n extends Cr{static{s(this,"InvalidRequest")}name="InvalidRequest";$fault="client";constructor(e){super({name:"InvalidRequest",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}},mb=class n extends Cr{static{s(this,"InvalidWriteOffset")}name="InvalidWriteOffset";$fault="client";constructor(e){super({name:"InvalidWriteOffset",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}},pb=class n extends Cr{static{s(this,"TooManyParts")}name="TooManyParts";$fault="client";constructor(e){super({name:"TooManyParts",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}},gb=class n extends Cr{static{s(this,"ObjectAlreadyInActiveTierError")}name="ObjectAlreadyInActiveTierError";$fault="client";constructor(e){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,n.prototype)}};var HD;(function(n){n.visit=(e,t)=>e.Records!==void 0?t.Records(e.Records):e.Stats!==void 0?t.Stats(e.Stats):e.Progress!==void 0?t.Progress(e.Progress):e.Cont!==void 0?t.Cont(e.Cont):e.End!==void 0?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])})(HD||(HD={}));var zD=s(n=>({...n,...n.SSEKMSKeyId&&{SSEKMSKeyId:bs},...n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:bs}}),"PutObjectOutputFilterSensitiveLog"),$D=s(n=>({...n,...n.SSECustomerKey&&{SSECustomerKey:bs},...n.SSEKMSKeyId&&{SSEKMSKeyId:bs},...n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:bs}}),"PutObjectRequestFilterSensitiveLog");var YD=s(async(n,e)=>{let t=sy(n,e),r=tr({},fa,{[lW]:n[zK],[wb]:n[vb],[Eb]:n[xb],[Sb]:n[_b],[pd]:[()=>fa(n[md]),()=>n[md].toString()]});t.bp("/"),t.p("Bucket",()=>n.Bucket,"{Bucket}",!1);let i=tr({[oW]:[,""]});return t.m("GET").h(r).q(i).b(void 0),t.build()},"se_CreateSessionCommand");var XD=s(async(n,e)=>{let t=sy(n,e),r=tr({},fa,{[tW]:n[NK]||"application/octet-stream",[aW]:n[wK],[ZK]:n[SK],[YK]:n[CK],[XK]:n[AK],[QK]:n[TK],[JK]:[()=>fa(n[VD]),()=>n[VD].toString()],[eW]:n[kK],[wW]:n[EK],[lP]:n[tP],[cP]:n[nP],[uP]:n[rP],[dP]:n[iP],[fP]:n[sP],[nW]:[()=>fa(n[KD]),()=>DR(n[KD]).toString()],[iW]:n[BK],[sW]:n[qK],[fW]:n[LK],[hW]:n[IK],[mW]:n[DK],[pW]:n[PK],[AW]:[()=>fa(n[GD]),()=>n[GD].toString()],[wb]:n[vb],[xW]:n[bb],[TW]:n[GK],[hP]:n[oP],[EW]:n[$K],[mP]:n[aP],[Eb]:n[xb],[Sb]:n[_b],[pd]:[()=>fa(n[md]),()=>n[md].toString()],[_W]:n[HK],[SW]:n[KK],[yW]:n[UK],[bW]:[()=>fa(n[WD]),()=>KR(n[WD]).toString()],[gW]:n[FK],[dW]:n[RK],...n.Metadata!==void 0&&Object.keys(n.Metadata).reduce((d,m)=>(d[`x-amz-meta-${m.toLowerCase()}`]=n.Metadata[m],d),{})});t.bp("/{Key+}"),t.p("Bucket",()=>n.Bucket,"{Bucket}",!1),t.p("Key",()=>n.Key,"{Key+}",!0);let i=tr({[kW]:[,"PutObject"]}),a,l;return n.Body!==void 0&&(l=n.Body,a=l),t.m("PUT").h(r).q(i).b(a),t.build()},"se_PutObjectCommand");var QD=s(async(n,e)=>{if(n.statusCode!==200&&n.statusCode>=300)return eP(n,e);let t=tr({$metadata:Mi(n),[vb]:[,n.headers[wb]],[xb]:[,n.headers[Eb]],[_b]:[,n.headers[Sb]],[md]:[()=>n.headers[pd]!==void 0,()=>mw(n.headers[pd])]}),r=pw(TR(await Cw(n.body,e)),"body");return r[N1]!=null&&(t[N1]=xK(r[N1],e)),t},"de_CreateSessionCommand");var JD=s(async(n,e)=>{if(n.statusCode!==200&&n.statusCode>=300)return eP(n,e);let t=tr({$metadata:Mi(n),[yb]:[,n.headers[uW]],[MK]:[,n.headers[rW]],[tP]:[,n.headers[lP]],[nP]:[,n.headers[cP]],[rP]:[,n.headers[uP]],[iP]:[,n.headers[dP]],[sP]:[,n.headers[fP]],[OK]:[,n.headers[cW]],[vb]:[,n.headers[wb]],[WK]:[,n.headers[CW]],[oP]:[,n.headers[hP]],[aP]:[,n.headers[mP]],[xb]:[,n.headers[Eb]],[_b]:[,n.headers[Sb]],[md]:[()=>n.headers[pd]!==void 0,()=>mw(n.headers[pd])],[VK]:[()=>n.headers[ZD]!==void 0,()=>OR(n.headers[ZD])],[jK]:[,n.headers[vW]]});return await Th(n.body,e),t},"de_PutObjectCommand");var eP=s(async(n,e)=>{let t={...n,body:await TM(n.body,e)},r=kM(n,t.body);switch(r){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await gK(t,e);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await vK(t,e);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await lK(t,e);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await cK(t,e);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await mK(t,e);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await dK(t,e);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await pK(t,e);case"NotFound":case"com.amazonaws.s3#NotFound":throw await yK(t,e);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await uK(t,e);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await fK(t,e);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await hK(t,e);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await _K(t,e);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await bK(t,e);default:let i=t.body;return aK({output:n,parsedBody:i,errorCode:r})}},"de_CommandError"),aK=qR(Cr),lK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new ob({$metadata:Mi(n),...t});return ci(i,n.body)},"de_BucketAlreadyExistsRes"),cK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new ab({$metadata:Mi(n),...t});return ci(i,n.body)},"de_BucketAlreadyOwnedByYouRes"),uK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new fb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_EncryptionTypeMismatchRes"),dK=s(async(n,e)=>{let t=tr({}),r=n.body;r[O1]!=null&&(t[O1]=ed(r[O1])),r[bb]!=null&&(t[bb]=ed(r[bb]));let i=new cb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_InvalidObjectStateRes"),fK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new hb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_InvalidRequestRes"),hK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new mb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_InvalidWriteOffsetRes"),mK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new lb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_NoSuchBucketRes"),pK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new ub({$metadata:Mi(n),...t});return ci(i,n.body)},"de_NoSuchKeyRes"),gK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new ib({$metadata:Mi(n),...t});return ci(i,n.body)},"de_NoSuchUploadRes"),yK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new db({$metadata:Mi(n),...t});return ci(i,n.body)},"de_NotFoundRes"),bK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new gb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_ObjectAlreadyInActiveTierErrorRes"),vK=s(async(n,e)=>{let t=tr({}),r=n.body,i=new sb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_ObjectNotInActiveTierErrorRes"),_K=s(async(n,e)=>{let t=tr({}),r=n.body,i=new pb({$metadata:Mi(n),...t});return ci(i,n.body)},"de_TooManyPartsRes");var xK=s((n,e)=>{let t={};return n[k1]!=null&&(t[k1]=ed(n[k1])),n[R1]!=null&&(t[R1]=ed(n[R1])),n[M1]!=null&&(t[M1]=ed(n[M1])),n[yb]!=null&&(t[yb]=pw(PR(n[yb]))),t},"de_SessionCredentials");var Mi=s(n=>({httpStatusCode:n.statusCode,requestId:n.headers["x-amzn-requestid"]??n.headers["x-amzn-request-id"]??n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}),"deserializeMetadata");var wK="ACL";var k1="AccessKeyId";var O1="AccessTier";var md="BucketKeyEnabled";var N1="Credentials",EK="ChecksumAlgorithm";var SK="CacheControl",tP="ChecksumCRC32",nP="ChecksumCRC32C",rP="ChecksumCRC64NVME",CK="ContentDisposition";var AK="ContentEncoding";var TK="ContentLanguage",VD="ContentLength";var kK="ContentMD5";var iP="ChecksumSHA1",sP="ChecksumSHA256";var OK="ChecksumType",NK="ContentType";var KD="Expires";var RK="ExpectedBucketOwner";var MK="ETag";var yb="Expiration";var LK="GrantFullControl";var IK="GrantRead",DK="GrantReadACP";var PK="GrantWriteACP";var BK="IfMatch";var qK="IfNoneMatch";var FK="ObjectLockLegalHoldStatus",UK="ObjectLockMode";var WD="ObjectLockRetainUntilDate";var jK="RequestCharged";var HK="RequestPayer";var R1="SecretAccessKey";var bb="StorageClass";var zK="SessionMode";var vb="ServerSideEncryption";var oP="SSECustomerAlgorithm",$K="SSECustomerKey",aP="SSECustomerKeyMD5";var _b="SSEKMSEncryptionContext",xb="SSEKMSKeyId";var M1="SessionToken";var VK="Size";var KK="Tagging";var WK="VersionId";var GD="WriteOffsetBytes",GK="WebsiteRedirectLocation";var ZK="cache-control",YK="content-disposition",XK="content-encoding",QK="content-language",JK="content-length",eW="content-md5";var tW="content-type";var nW="expires";var rW="etag";var iW="if-match";var sW="if-none-match";var oW="session";var aW="x-amz-acl";var lP="x-amz-checksum-crc32",cP="x-amz-checksum-crc32c",uP="x-amz-checksum-crc64nvme";var dP="x-amz-checksum-sha1",fP="x-amz-checksum-sha256";var lW="x-amz-create-session-mode";var cW="x-amz-checksum-type";var uW="x-amz-expiration",dW="x-amz-expected-bucket-owner";var fW="x-amz-grant-full-control",hW="x-amz-grant-read",mW="x-amz-grant-read-acp";var pW="x-amz-grant-write-acp";var gW="x-amz-object-lock-legal-hold",yW="x-amz-object-lock-mode",bW="x-amz-object-lock-retain-until-date";var ZD="x-amz-object-size";var vW="x-amz-request-charged";var _W="x-amz-request-payer";var xW="x-amz-storage-class",wW="x-amz-sdk-checksum-algorithm";var wb="x-amz-server-side-encryption",Eb="x-amz-server-side-encryption-aws-kms-key-id",pd="x-amz-server-side-encryption-bucket-key-enabled",Sb="x-amz-server-side-encryption-context",hP="x-amz-server-side-encryption-customer-algorithm",EW="x-amz-server-side-encryption-customer-key",mP="x-amz-server-side-encryption-customer-key-md5",SW="x-amz-tagging";var CW="x-amz-version-id",AW="x-amz-write-offset-bytes",TW="x-amz-website-redirect-location",kW="x-id";var Cb=class extends xc.classBuilder().ep({...rb,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,t,r,i){return[Qg(r,this.serialize,this.deserialize),qy(r,e.getEndpointParameterInstructions()),Cy(r)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(jD,UD).ser(YD).de(QD).build(){static{s(this,"CreateSessionCommand")}};var pP={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.758.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && yarn g:vitest run -c vitest.config.browser.ts","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.ts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.758.0","@aws-sdk/credential-provider-node":"3.758.0","@aws-sdk/middleware-bucket-endpoint":"3.734.0","@aws-sdk/middleware-expect-continue":"3.734.0","@aws-sdk/middleware-flexible-checksums":"3.758.0","@aws-sdk/middleware-host-header":"3.734.0","@aws-sdk/middleware-location-constraint":"3.734.0","@aws-sdk/middleware-logger":"3.734.0","@aws-sdk/middleware-recursion-detection":"3.734.0","@aws-sdk/middleware-sdk-s3":"3.758.0","@aws-sdk/middleware-ssec":"3.734.0","@aws-sdk/middleware-user-agent":"3.758.0","@aws-sdk/region-config-resolver":"3.734.0","@aws-sdk/signature-v4-multi-region":"3.758.0","@aws-sdk/types":"3.734.0","@aws-sdk/util-endpoints":"3.743.0","@aws-sdk/util-user-agent-browser":"3.734.0","@aws-sdk/util-user-agent-node":"3.758.0","@aws-sdk/xml-builder":"3.734.0","@smithy/config-resolver":"^4.0.1","@smithy/core":"^3.1.5","@smithy/eventstream-serde-browser":"^4.0.1","@smithy/eventstream-serde-config-resolver":"^4.0.1","@smithy/eventstream-serde-node":"^4.0.1","@smithy/fetch-http-handler":"^5.0.1","@smithy/hash-blob-browser":"^4.0.1","@smithy/hash-node":"^4.0.1","@smithy/hash-stream-node":"^4.0.1","@smithy/invalid-dependency":"^4.0.1","@smithy/md5-js":"^4.0.1","@smithy/middleware-content-length":"^4.0.1","@smithy/middleware-endpoint":"^4.0.6","@smithy/middleware-retry":"^4.0.7","@smithy/middleware-serde":"^4.0.2","@smithy/middleware-stack":"^4.0.1","@smithy/node-config-provider":"^4.0.1","@smithy/node-http-handler":"^4.0.3","@smithy/protocol-http":"^5.0.1","@smithy/smithy-client":"^4.1.6","@smithy/types":"^4.1.0","@smithy/url-parser":"^4.0.1","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.7","@smithy/util-defaults-mode-node":"^4.0.7","@smithy/util-endpoints":"^3.0.1","@smithy/util-middleware":"^4.0.1","@smithy/util-retry":"^4.0.1","@smithy/util-stream":"^4.1.2","@smithy/util-utf8":"^4.0.0","@smithy/util-waiter":"^4.0.2",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.758.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.2.2"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var L1=s(n=>new TextEncoder().encode(n),"fromUtf8");function I1(n){return typeof n=="string"?n.length===0:n.byteLength===0}s(I1,"isEmptyData");var D1={name:"SHA-1"},P1={name:"HMAC",hash:D1},gP=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);var NW={};function Fs(){return typeof window<"u"?window:typeof self<"u"?self:NW}s(Fs,"locateWindow");var B1=function(){function n(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(t,r){Fs().crypto.subtle.importKey("raw",yP(e),P1,!1,["sign"]).then(t,r)}),this.key.catch(function(){}))}return s(n,"Sha1"),n.prototype.update=function(e){if(!I1(e)){var t=yP(e),r=new Uint8Array(this.toHash.byteLength+t.byteLength);r.set(this.toHash,0),r.set(t,this.toHash.byteLength),this.toHash=r}},n.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return Fs().crypto.subtle.sign(P1,t,e.toHash).then(function(r){return new Uint8Array(r)})}):I1(this.toHash)?Promise.resolve(gP):Promise.resolve().then(function(){return Fs().crypto.subtle.digest(D1,e.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},n.prototype.reset=function(){this.toHash=new Uint8Array(0)},n}();function yP(n){return typeof n=="string"?L1(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}s(yP,"convertToBuffer");var RW=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Ab(n){if(MW(n)&&typeof n.crypto.subtle=="object"){var e=n.crypto.subtle;return LW(e)}return!1}s(Ab,"supportsWebCrypto");function MW(n){if(typeof n=="object"&&typeof n.crypto=="object"){var e=n.crypto.getRandomValues;return typeof e=="function"}return!1}s(MW,"supportsSecureRandom");function LW(n){return n&&RW.every(function(e){return typeof n[e]=="function"})}s(LW,"supportsSubtleCrypto");var bP=function(){function n(e){if(Ab(Fs()))this.hash=new B1(e);else throw new Error("SHA1 not supported")}return s(n,"Sha1"),n.prototype.update=function(e,t){this.hash.update(Ni(e))},n.prototype.digest=function(){return this.hash.digest()},n.prototype.reset=function(){this.hash.reset()},n}();var q1={name:"SHA-256"},F1={name:"HMAC",hash:q1},vP=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);var U1=function(){function n(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return s(n,"Sha256"),n.prototype.update=function(e){if(!ko(e)){var t=Ni(e),r=new Uint8Array(this.toHash.byteLength+t.byteLength);r.set(this.toHash,0),r.set(t,this.toHash.byteLength),this.toHash=r}},n.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return Fs().crypto.subtle.sign(F1,t,e.toHash).then(function(r){return new Uint8Array(r)})}):ko(this.toHash)?Promise.resolve(vP):Promise.resolve().then(function(){return Fs().crypto.subtle.digest(q1,e.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},n.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(t,r){Fs().crypto.subtle.importKey("raw",Ni(e.secret),F1,!1,["sign"]).then(t,r)}),this.key.catch(function(){}))},n}();var is=64,_P=32,xP=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wP=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],EP=Math.pow(2,53)-1;var Zh=function(){function n(){this.state=Int32Array.from(wP),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(n,"RawSha256"),n.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>EP)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[t++],r--,this.bufferLength===is&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(t.setUint8(this.bufferLength++,128),r%is>=is-8){for(var i=this.bufferLength;i<is;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<is-8;i++)t.setUint8(i,0);t.setUint32(is-8,Math.floor(e/4294967296),!0),t.setUint32(is-4,e),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(_P),i=0;i<8;i++)a[i*4]=this.state[i]>>>24&255,a[i*4+1]=this.state[i]>>>16&255,a[i*4+2]=this.state[i]>>>8&255,a[i*4+3]=this.state[i]>>>0&255;return a},n.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,r=e.state,i=r[0],a=r[1],l=r[2],d=r[3],m=r[4],g=r[5],v=r[6],_=r[7],E=0;E<is;E++){if(E<16)this.temp[E]=(t[E*4]&255)<<24|(t[E*4+1]&255)<<16|(t[E*4+2]&255)<<8|t[E*4+3]&255;else{var C=this.temp[E-2],k=(C>>>17|C<<15)^(C>>>19|C<<13)^C>>>10;C=this.temp[E-15];var D=(C>>>7|C<<25)^(C>>>18|C<<14)^C>>>3;this.temp[E]=(k+this.temp[E-7]|0)+(D+this.temp[E-16]|0)}var O=(((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&g^~m&v)|0)+(_+(xP[E]+this.temp[E]|0)|0)|0,P=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&a^i&l^a&l)|0;_=v,v=g,g=m,m=d+O|0,d=l,l=a,a=i,i=O+P|0}r[0]+=i,r[1]+=a,r[2]+=l,r[3]+=d,r[4]+=m,r[5]+=g,r[6]+=v,r[7]+=_},n}();var SP=function(){function n(e){this.secret=e,this.hash=new Zh,this.reset()}return s(n,"Sha256"),n.prototype.update=function(e){if(!(ko(e)||this.error))try{this.hash.update(Ni(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return rd(this,void 0,void 0,function(){return id(this,function(e){return[2,this.digestSync()]})})},n.prototype.reset=function(){if(this.hash=new Zh,this.secret){this.outer=new Zh;var e=IW(this.secret),t=new Uint8Array(is);t.set(e);for(var r=0;r<is;r++)e[r]^=54,t[r]^=92;this.hash.update(e),this.outer.update(t);for(var r=0;r<e.byteLength;r++)e[r]=0}},n}();function IW(n){var e=Ni(n);if(e.byteLength>is){var t=new Zh;t.update(e),e=t.digest()}var r=new Uint8Array(is);return r.set(e),r}s(IW,"bufferFromSecret");var CP=function(){function n(e){Ab(Fs())?this.hash=new U1(e):this.hash=new SP(e)}return s(n,"Sha256"),n.prototype.update=function(e,t){this.hash.update(Ni(e))},n.prototype.digest=function(){return this.hash.digest()},n.prototype.reset=function(){this.hash.reset()},n}();var AP=Qn(H1());var TP=s(({serviceId:n,clientVersion:e})=>async t=>{let r=typeof window<"u"&&window?.navigator?.userAgent?AP.default.parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",e],["ua","2.1"],[`os/${r?.os?.name||"other"}`,r?.os?.version],["lang/js"],["md/browser",`${r?.browser?.name??"unknown"}_${r?.browser?.version??"unknown"}`]];n&&i.push([`api/${n}`,e]);let a=await t?.userAgentAppId?.();return a&&i.push([`app/${a}`]),i},"createDefaultUserAgentProvider");var gd=class n{static{s(this,"Int64")}constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,i=Math.abs(Math.round(e));r>-1&&i>0;r--,i/=256)t[r]=i;return e<0&&kP(t),new n(t)}valueOf(){let e=this.bytes.slice(0),t=e[0]&128;return t&&kP(e),parseInt(er(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}};function kP(n){for(let e=0;e<8;e++)n[e]^=255;for(let e=7;e>-1&&(n[e]++,n[e]===0);e--);}s(kP,"negate");var Tb=class{static{s(this,"HeaderMarshaller")}constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){let t=[];for(let a of Object.keys(e)){let l=this.fromUtf8(a);t.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(e[a]))}let r=new Uint8Array(t.reduce((a,l)=>a+l.byteLength,0)),i=0;for(let a of t)r.set(a,i),i+=a.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let i=new Uint8Array(9);return i[0]=5,i.set(e.value.bytes,1),i;case"binary":let a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);let l=new Uint8Array(a.buffer);return l.set(e.value,3),l;case"string":let d=this.fromUtf8(e.value),m=new DataView(new ArrayBuffer(3+d.byteLength));m.setUint8(0,7),m.setUint16(1,d.byteLength,!1);let g=new Uint8Array(m.buffer);return g.set(d,3),g;case"timestamp":let v=new Uint8Array(9);return v[0]=8,v.set(gd.fromNumber(e.value.valueOf()).bytes,1),v;case"uuid":if(!zW.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let _=new Uint8Array(17);return _[0]=9,_.set(ry(e.value.replace(/\-/g,"")),1),_}}parse(e){let t={},r=0;for(;r<e.byteLength;){let i=e.getUint8(r++),a=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,i));switch(r+=i,e.getUint8(r++)){case 0:t[a]={type:NP,value:!0};break;case 1:t[a]={type:NP,value:!1};break;case 2:t[a]={type:DW,value:e.getInt8(r++)};break;case 3:t[a]={type:PW,value:e.getInt16(r,!1)},r+=2;break;case 4:t[a]={type:BW,value:e.getInt32(r,!1)},r+=4;break;case 5:t[a]={type:qW,value:new gd(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:let l=e.getUint16(r,!1);r+=2,t[a]={type:FW,value:new Uint8Array(e.buffer,e.byteOffset+r,l)},r+=l;break;case 7:let d=e.getUint16(r,!1);r+=2,t[a]={type:UW,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,d))},r+=d;break;case 8:t[a]={type:jW,value:new Date(new gd(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:let m=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[a]={type:HW,value:`${er(m.subarray(0,4))}-${er(m.subarray(4,6))}-${er(m.subarray(6,8))}-${er(m.subarray(8,10))}-${er(m.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return t}},OP;(function(n){n[n.boolTrue=0]="boolTrue",n[n.boolFalse=1]="boolFalse",n[n.byte=2]="byte",n[n.short=3]="short",n[n.integer=4]="integer",n[n.long=5]="long",n[n.byteArray=6]="byteArray",n[n.string=7]="string",n[n.timestamp=8]="timestamp",n[n.uuid=9]="uuid"})(OP||(OP={}));var NP="boolean",DW="byte",PW="short",BW="integer",qW="long",FW="binary",UW="string",jW="timestamp",HW="uuid",zW=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var RP=4,gl=RP*2,Oc=4,$W=gl+Oc*2;function MP({byteLength:n,byteOffset:e,buffer:t}){if(n<$W)throw new Error("Provided message too short to accommodate event stream message overhead");let r=new DataView(t,e,n),i=r.getUint32(0,!1);if(n!==i)throw new Error("Reported message length does not match received message length");let a=r.getUint32(RP,!1),l=r.getUint32(gl,!1),d=r.getUint32(n-Oc,!1),m=new Ec().update(new Uint8Array(t,e,gl));if(l!==m.digest())throw new Error(`The prelude checksum specified in the message (${l}) does not match the calculated CRC32 checksum (${m.digest()})`);if(m.update(new Uint8Array(t,e+gl,n-(gl+Oc))),d!==m.digest())throw new Error(`The message checksum (${m.digest()}) did not match the expected value of ${d}`);return{headers:new DataView(t,e+gl+Oc,a),body:new Uint8Array(t,e+gl+Oc+a,i-a-(gl+Oc+Oc))}}s(MP,"splitMessage");var kb=class{static{s(this,"EventStreamCodec")}constructor(e,t){this.headerMarshaller=new Tb(e,t),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),t=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return t}}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let t=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return t}}}encode({headers:e,body:t}){let r=this.headerMarshaller.format(e),i=r.byteLength+t.byteLength+16,a=new Uint8Array(i),l=new DataView(a.buffer,a.byteOffset,a.byteLength),d=new Ec;return l.setUint32(0,i,!1),l.setUint32(4,r.byteLength,!1),l.setUint32(8,d.update(a.subarray(0,8)).digest(),!1),a.set(r,12),a.set(t,r.byteLength+12),l.setUint32(i-4,d.update(a.subarray(8,i-4)).digest(),!1),a}decode(e){let{headers:t,body:r}=MP(e);return{headers:this.headerMarshaller.parse(t),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}};var Ob=class{static{s(this,"MessageDecoderStream")}constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.decoder.decode(e)}};var Nb=class{static{s(this,"MessageEncoderStream")}constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var Rb=class{static{s(this,"SmithyMessageDecoderStream")}constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream){let t=await this.options.deserializer(e);t!==void 0&&(yield t)}}};var Mb=class{static{s(this,"SmithyMessageEncoderStream")}constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.serializer(e)}};function LP(n){let e=0,t=0,r=null,i=null,a=s(d=>{if(typeof d!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+d);e=d,t=4,r=new Uint8Array(d),new DataView(r.buffer).setUint32(0,d,!1)},"allocateMessage"),l=s(async function*(){let d=n[Symbol.asyncIterator]();for(;;){let{value:m,done:g}=await d.next();if(g){if(e)if(e===t)yield r;else throw new Error("Truncated event message received.");else return;return}let v=m.length,_=0;for(;_<v;){if(!r){let C=v-_;i||(i=new Uint8Array(4));let k=Math.min(4-t,C);if(i.set(m.slice(_,_+k),t),t+=k,_+=k,t<4)break;a(new DataView(i.buffer).getUint32(0,!1)),i=null}let E=Math.min(e-t,v-_);r.set(m.slice(_,_+E),t),t+=E,_+=E,e&&e===t&&(yield r,r=null,e=0,t=0)}}},"iterator");return{[Symbol.asyncIterator]:l}}s(LP,"getChunkedStream");function IP(n,e){return async function(t){let{value:r}=t.headers[":message-type"];if(r==="error"){let i=new Error(t.headers[":error-message"].value||"UnknownError");throw i.name=t.headers[":error-code"].value,i}else if(r==="exception"){let i=t.headers[":exception-type"].value,a={[i]:t},l=await n(a);if(l.$unknown){let d=new Error(e(t.body));throw d.name=i,d}throw l[i]}else if(r==="event"){let i={[t.headers[":event-type"].value]:t},a=await n(i);return a.$unknown?void 0:a}else throw Error(`Unrecognizable event type: ${t.headers[":event-type"].value}`)}}s(IP,"getMessageUnmarshaller");var Xh=class{static{s(this,"EventStreamMarshaller")}constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new kb(e,t),this.utfEncoder=e}deserialize(e,t){let r=LP(e);return new Rb({messageStream:new Ob({inputStream:r,decoder:this.eventStreamCodec}),deserializer:IP(t,this.utfEncoder)})}serialize(e,t){return new Nb({messageStream:new Mb({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};var DP=s(n=>({[Symbol.asyncIterator]:async function*(){let e=n.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}}),"readableStreamtoIterable"),PP=s(n=>{let e=n[Symbol.asyncIterator]();return new ReadableStream({async pull(t){let{done:r,value:i}=await e.next();if(r)return t.close();t.enqueue(i)}})},"iterableToReadableStream");var Lb=class{static{s(this,"EventStreamMarshaller")}constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new Xh({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){let r=VW(e)?DP(e):e;return this.universalMarshaller.deserialize(r,t)}serialize(e,t){let r=this.universalMarshaller.serialize(e,t);return typeof ReadableStream=="function"?PP(r):r}},VW=s(n=>typeof ReadableStream=="function"&&n instanceof ReadableStream,"isReadableStream");var BP=s(n=>new Lb(n),"eventStreamSerdeProvider");async function qP(n,e,t=1024*1024){let r=n.size,i=0;for(;i<r;){let a=n.slice(i,Math.min(r,i+t));e(new Uint8Array(await a.arrayBuffer())),i+=a.size}}s(qP,"blobReader");var FP=s(async function(e,t){let r=new e;return await qP(t,i=>{r.update(i)}),r.digest()},"blobHasher");var UP=s(n=>()=>Promise.reject(n),"invalidProvider");var jP=[1732584193,4023233417,2562383102,271733878];var Ib=class{static{s(this,"Md5")}constructor(){this.reset()}update(e){if(WW(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");let t=GW(e),r=0,{byteLength:i}=t;for(this.bytesHashed+=i;i>0;)this.buffer.setUint8(this.bufferLength++,t[r++]),i--,this.bufferLength===64&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){let{buffer:t,bufferLength:r,bytesHashed:i}=this,a=i*8;if(t.setUint8(this.bufferLength++,128),r%64>=56){for(let l=this.bufferLength;l<64;l++)t.setUint8(l,0);this.hashBuffer(),this.bufferLength=0}for(let l=this.bufferLength;l<56;l++)t.setUint8(l,0);t.setUint32(56,a>>>0,!0),t.setUint32(60,Math.floor(a/4294967296),!0),this.hashBuffer(),this.finished=!0}let e=new DataView(new ArrayBuffer(16));for(let t=0;t<4;t++)e.setUint32(t*4,this.state[t],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){let{buffer:e,state:t}=this,r=t[0],i=t[1],a=t[2],l=t[3];r=fi(r,i,a,l,e.getUint32(0,!0),7,3614090360),l=fi(l,r,i,a,e.getUint32(4,!0),12,3905402710),a=fi(a,l,r,i,e.getUint32(8,!0),17,606105819),i=fi(i,a,l,r,e.getUint32(12,!0),22,3250441966),r=fi(r,i,a,l,e.getUint32(16,!0),7,4118548399),l=fi(l,r,i,a,e.getUint32(20,!0),12,1200080426),a=fi(a,l,r,i,e.getUint32(24,!0),17,2821735955),i=fi(i,a,l,r,e.getUint32(28,!0),22,4249261313),r=fi(r,i,a,l,e.getUint32(32,!0),7,1770035416),l=fi(l,r,i,a,e.getUint32(36,!0),12,2336552879),a=fi(a,l,r,i,e.getUint32(40,!0),17,4294925233),i=fi(i,a,l,r,e.getUint32(44,!0),22,2304563134),r=fi(r,i,a,l,e.getUint32(48,!0),7,1804603682),l=fi(l,r,i,a,e.getUint32(52,!0),12,4254626195),a=fi(a,l,r,i,e.getUint32(56,!0),17,2792965006),i=fi(i,a,l,r,e.getUint32(60,!0),22,1236535329),r=hi(r,i,a,l,e.getUint32(4,!0),5,4129170786),l=hi(l,r,i,a,e.getUint32(24,!0),9,3225465664),a=hi(a,l,r,i,e.getUint32(44,!0),14,643717713),i=hi(i,a,l,r,e.getUint32(0,!0),20,3921069994),r=hi(r,i,a,l,e.getUint32(20,!0),5,3593408605),l=hi(l,r,i,a,e.getUint32(40,!0),9,38016083),a=hi(a,l,r,i,e.getUint32(60,!0),14,3634488961),i=hi(i,a,l,r,e.getUint32(16,!0),20,3889429448),r=hi(r,i,a,l,e.getUint32(36,!0),5,568446438),l=hi(l,r,i,a,e.getUint32(56,!0),9,3275163606),a=hi(a,l,r,i,e.getUint32(12,!0),14,4107603335),i=hi(i,a,l,r,e.getUint32(32,!0),20,1163531501),r=hi(r,i,a,l,e.getUint32(52,!0),5,2850285829),l=hi(l,r,i,a,e.getUint32(8,!0),9,4243563512),a=hi(a,l,r,i,e.getUint32(28,!0),14,1735328473),i=hi(i,a,l,r,e.getUint32(48,!0),20,2368359562),r=mi(r,i,a,l,e.getUint32(20,!0),4,4294588738),l=mi(l,r,i,a,e.getUint32(32,!0),11,2272392833),a=mi(a,l,r,i,e.getUint32(44,!0),16,1839030562),i=mi(i,a,l,r,e.getUint32(56,!0),23,4259657740),r=mi(r,i,a,l,e.getUint32(4,!0),4,2763975236),l=mi(l,r,i,a,e.getUint32(16,!0),11,1272893353),a=mi(a,l,r,i,e.getUint32(28,!0),16,4139469664),i=mi(i,a,l,r,e.getUint32(40,!0),23,3200236656),r=mi(r,i,a,l,e.getUint32(52,!0),4,681279174),l=mi(l,r,i,a,e.getUint32(0,!0),11,3936430074),a=mi(a,l,r,i,e.getUint32(12,!0),16,3572445317),i=mi(i,a,l,r,e.getUint32(24,!0),23,76029189),r=mi(r,i,a,l,e.getUint32(36,!0),4,3654602809),l=mi(l,r,i,a,e.getUint32(48,!0),11,3873151461),a=mi(a,l,r,i,e.getUint32(60,!0),16,530742520),i=mi(i,a,l,r,e.getUint32(8,!0),23,3299628645),r=pi(r,i,a,l,e.getUint32(0,!0),6,4096336452),l=pi(l,r,i,a,e.getUint32(28,!0),10,1126891415),a=pi(a,l,r,i,e.getUint32(56,!0),15,2878612391),i=pi(i,a,l,r,e.getUint32(20,!0),21,4237533241),r=pi(r,i,a,l,e.getUint32(48,!0),6,1700485571),l=pi(l,r,i,a,e.getUint32(12,!0),10,2399980690),a=pi(a,l,r,i,e.getUint32(40,!0),15,4293915773),i=pi(i,a,l,r,e.getUint32(4,!0),21,2240044497),r=pi(r,i,a,l,e.getUint32(32,!0),6,1873313359),l=pi(l,r,i,a,e.getUint32(60,!0),10,4264355552),a=pi(a,l,r,i,e.getUint32(24,!0),15,2734768916),i=pi(i,a,l,r,e.getUint32(52,!0),21,1309151649),r=pi(r,i,a,l,e.getUint32(16,!0),6,4149444226),l=pi(l,r,i,a,e.getUint32(44,!0),10,3174756917),a=pi(a,l,r,i,e.getUint32(8,!0),15,718787259),i=pi(i,a,l,r,e.getUint32(36,!0),21,3951481745),t[0]=r+t[0]&4294967295,t[1]=i+t[1]&4294967295,t[2]=a+t[2]&4294967295,t[3]=l+t[3]&4294967295}reset(){this.state=Uint32Array.from(jP),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}};function Db(n,e,t,r,i,a){return e=(e+n&4294967295)+(r+a&4294967295)&4294967295,(e<<i|e>>>32-i)+t&4294967295}s(Db,"cmn");function fi(n,e,t,r,i,a,l){return Db(e&t|~e&r,n,e,i,a,l)}s(fi,"ff");function hi(n,e,t,r,i,a,l){return Db(e&r|t&~r,n,e,i,a,l)}s(hi,"gg");function mi(n,e,t,r,i,a,l){return Db(e^t^r,n,e,i,a,l)}s(mi,"hh");function pi(n,e,t,r,i,a,l){return Db(t^(e|~r),n,e,i,a,l)}s(pi,"ii");function WW(n){return typeof n=="string"?n.length===0:n.byteLength===0}s(WW,"isEmptyData");function GW(n){return typeof n=="string"?ys(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}s(GW,"convertToBuffer");var HP=typeof TextEncoder=="function"?new TextEncoder:null,zP=s(n=>{if(typeof n=="string"){if(HP)return HP.encode(n).byteLength;let e=n.length;for(let t=e-1;t>=0;t--){let r=n.charCodeAt(t);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&t--}return e}else{if(typeof n.byteLength=="number")return n.byteLength;if(typeof n.size=="number")return n.size}throw new Error(`Body Length computation failed for ${n}`)},"calculateBodyLength");var $P=s(n=>({apiVersion:"2006-03-01",base64Decoder:n?.base64Decoder??Xu,base64Encoder:n?.base64Encoder??ll,disableHostPrefix:n?.disableHostPrefix??!1,endpointProvider:n?.endpointProvider??nb,extensions:n?.extensions??[],getAwsChunkedEncodingStream:n?.getAwsChunkedEncodingStream??FN,httpAuthSchemeProvider:n?.httpAuthSchemeProvider??BD,httpAuthSchemes:n?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new gc},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new Eh}],logger:n?.logger??new ul,sdkStreamMixin:n?.sdkStreamMixin??KN,serviceId:n?.serviceId??"S3",signerConstructor:n?.signerConstructor??Vy,signingEscapePath:n?.signingEscapePath??!1,urlParser:n?.urlParser??od,useArnRegion:n?.useArnRegion??!1,utf8Decoder:n?.utf8Decoder??ys,utf8Encoder:n?.utf8Encoder??Qu}),"getRuntimeConfig");var KP=Qn(H1());var VP=["in-region","cross-region","mobile","standard","legacy"];var WP=s(({defaultsMode:n}={})=>XN(async()=>{let e=typeof n=="function"?await n():n;switch(e?.toLowerCase()){case"auto":return Promise.resolve(ZW()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${VP.join(", ")}, got ${e}`)}}),"resolveDefaultsModeConfig"),ZW=s(()=>{let e=(typeof window<"u"&&window?.navigator?.userAgent?KP.default.parse(window.navigator.userAgent):void 0)?.platform?.type;return e==="tablet"||e==="mobile"},"isMobileBrowser");var GP=s(n=>{let e=WP(n),t=s(()=>e().then(FR),"defaultConfigProvider"),r=$P(n);return{...r,...n,runtime:"browser",defaultsMode:e,bodyLengthChecker:n?.bodyLengthChecker??zP,credentialDefaultProvider:n?.credentialDefaultProvider??(i=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:n?.defaultUserAgentProvider??TP({serviceId:r.serviceId,clientVersion:pP.version}),eventStreamSerdeProvider:n?.eventStreamSerdeProvider??BP,maxAttempts:n?.maxAttempts??hl,md5:n?.md5??Ib,region:n?.region??UP("Region is missing"),requestHandler:ty.create(n?.requestHandler??t),retryMode:n?.retryMode??(async()=>(await t()).retryMode||Hw),sha1:n?.sha1??bP,sha256:n?.sha256??CP,streamCollector:n?.streamCollector??ny,streamHasher:n?.streamHasher??FP,useDualstackEndpoint:n?.useDualstackEndpoint??(()=>Promise.resolve(jL)),useFipsEndpoint:n?.useFipsEndpoint??(()=>Promise.resolve(HL))}},"getRuntimeConfig");var ZP=s(n=>{let e=s(async()=>{if(n.region===void 0)throw new Error("Region is missing from runtimeConfig");let t=n.region;return typeof t=="string"?t:t()},"runtimeConfigRegion");return{setRegion(t){e=t},region(){return e}}},"getAwsRegionExtensionConfiguration"),YP=s(n=>({region:n.region()}),"resolveAwsRegionExtensionConfiguration");var XP=s(n=>{let e=n.httpAuthSchemes,t=n.httpAuthSchemeProvider,r=n.credentials;return{setHttpAuthScheme(i){let a=e.findIndex(l=>l.schemeId===i.schemeId);a===-1?e.push(i):e.splice(a,1,i)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(i){t=i},httpAuthSchemeProvider(){return t},setCredentials(i){r=i},credentials(){return r}}},"getHttpAuthExtensionConfiguration"),QP=s(n=>({httpAuthSchemes:n.httpAuthSchemes(),httpAuthSchemeProvider:n.httpAuthSchemeProvider(),credentials:n.credentials()}),"resolveHttpAuthRuntimeConfig");var Pb=s(n=>n,"asPartial"),JP=s((n,e)=>{let t={...Pb(ZP(n)),...Pb($R(n)),...Pb(_N(n)),...Pb(XP(n))};return e.forEach(r=>r.configure(t)),{...n,...YP(t),...VR(t),...xN(t),...QP(t)}},"resolveRuntimeExtensions");var Bb=class extends py{static{s(this,"S3Client")}config;constructor(...[e]){let t=GP(e||{}),r=FD(t),i=mL(r),a=$M(i),l=uI(a),d=zL(l),m=d,g=QL(m),v=$L(g),_=qD(v),E=cL(_,{session:[()=>this,Cb]}),C=JP(E,e?.extensions||[]);super(C),this.config=C,this.middlewareStack.use(UL(this.config)),this.middlewareStack.use(fI(this.config)),this.middlewareStack.use(KL(this.config)),this.middlewareStack.use(VM(this.config)),this.middlewareStack.use(KM(this.config)),this.middlewareStack.use(GM(this.config)),this.middlewareStack.use(ON(this.config,{httpAuthSchemeParametersProvider:ID,identityProviderConfigProvider:async k=>new oy({"aws.auth#sigv4":k.credentials,"aws.auth#sigv4a":k.credentials})})),this.middlewareStack.use(LN(this.config)),this.middlewareStack.use(hL(this.config)),this.middlewareStack.use(CN(this.config)),this.middlewareStack.use(QM(this.config)),this.middlewareStack.use(Nw(this.config)),this.middlewareStack.use(Rw(this.config))}destroy(){super.destroy()}};function XW(n){return e=>async t=>{let r={...t.input},i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let a of i){let l=r[a.target];if(l){let d;typeof l=="string"?JW(l,n)?d=n.base64Decoder(l):(d=n.utf8Decoder(l),r[a.target]=n.base64Encoder(d)):(d=ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l),r[a.target]=n.base64Encoder(d));let m=new n.md5;m.update(d),r[a.hash]=n.base64Encoder(await m.digest())}}return e({...t,input:r})}}s(XW,"ssecMiddleware");var QW={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},e2=s(n=>({applyToStack:e=>{e.add(XW(n),QW)}}),"getSsecPlugin");function JW(n,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(n))return!1;try{return e.base64Decoder(n).length===32}catch{return!1}}s(JW,"isValidBase64EncodedSSECustomerKey");var qb=class extends xc.classBuilder().ep({...rb,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,t,r,i){return[Qg(r,this.serialize,this.deserialize),qy(r,e.getEndpointParameterInstructions()),zM(r,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),ZM(r),Cy(r),e2(r)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f($D,zD).ser(XD).de(JD).build(){static{s(this,"PutObjectCommand")}};var z1=class{static{s(this,"DigitalOceanUploader")}constructor(){this.s3Client=new Bb({endpoint:"https://fra1.digitaloceanspaces.com",forcePathStyle:!1,region:"fra1",credentials:{accessKeyId:window.imageClientId,secretAccessKey:window.imageClientSecret}})}upload(e){let t=this.s3Client;return new Promise(function(r,i){let a=new FileReader;a.onload=function(l){(async function(){let d=new qb({Bucket:window.imageBucketId,Key:`rich-text-uploads/${e.name}`,Body:a.result,ContentType:e.type,ACL:"public-read"});try{let m=await t.send(d);r(`https://bidders-highway.fra1.digitaloceanspaces.com/rich-text-uploads/${e.name}`)}catch{console.error("Upload failed"),i("failed")}})()},a.readAsArrayBuffer(e)})}},eG=new z1,$1=eG;mc.register("modules/htmlEditButton",t2.default);mc.register("modules/imageUploader",vN);var tG=[[{header:[1,2,3,!1]}],["bold","italic"],[{list:"bullet"},{list:"ordered"}],["clean"],["image"]],Qh=class extends on{static{s(this,"RichTextEditorController")}static targets=["field"];connect(){let e=this.fieldTarget;this.quill=new mc(this.querySelector(".quill"),{theme:"snow",modules:{htmlEditButton:{},imageUploader:{upload:$1.upload.bind($1)},toolbar:tG}}),this.quill.on("text-change",(t,r,i)=>{this.fieldTarget.value=this.quill.root.innerHTML})}disconnect(){delete this.quill}};var Jh=class extends on{static{s(this,"SelectAllController")}static targets=["resource"];change(e){let t=new Event("change");this.resourceTargets.forEach(r=>r.checked=e.target.checked),this.resourceTargets[0].dispatchEvent(t)}};var em=class extends on{static{s(this,"SlugonatorController")}static targets=["slug"];onChange(e){this.slugTarget.value=this.slugonate(e.target.value)}slugonate(e){return e.toLowerCase().normalize("NFD").replaceAll(/[\u0300-\u036f]/g,"").replaceAll(/[.,!@#$%^&*()]/g,"").replaceAll(" ","-")}};var n2="&#8203;";function V1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}s(V1,"e");function r2(n){return function(e){if(Array.isArray(e))return V1(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return V1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V1(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(r2,"i");var vl={isEnabled:function(){var n;return(n=window.TAGIFY_DEBUG)===null||n===void 0||n},log:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r;this.isEnabled()&&(r=console).log.apply(r,["[Tagify]:"].concat(r2(e)))},warn:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r;this.isEnabled()&&(r=console).warn.apply(r,["[Tagify]:"].concat(r2(e)))}},nm=s(function(n,e,t,r){return n=""+n,e=""+e,r&&(n=n.trim(),e=e.trim()),t?n==e:n.toLowerCase()==e.toLowerCase()},"s"),i2=s(function(n,e){return n&&Array.isArray(n)&&n.map(function(t){return J1(t,e)})},"a");function J1(n,e){var t,r={};for(t in n)e.indexOf(t)<0&&(r[t]=n[t]);return r}s(J1,"o");function s2(n){var e=document.createElement("div");return n.replace(/\&#?[0-9a-z]+;/gi,function(t){return e.innerHTML=t,e.innerText})}s(s2,"r");function K1(n){return new DOMParser().parseFromString(n.trim(),"text/html").body.firstElementChild}s(K1,"l");function o2(n,e){for(e=e||"previous";n=n[e+"Sibling"];)if(n.nodeType==3)return n}s(o2,"d");function Rc(n){return typeof n=="string"?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):n}s(Rc,"c");function Ro(n){var e=Object.prototype.toString.call(n).split(" ")[1].slice(0,-1);return n===Object(n)&&e!="Array"&&e!="Function"&&e!="RegExp"&&e!="HTMLUnknownElement"}s(Ro,"u");function Ar(n,e,t){var r,i;function a(l,d){for(var m in d)if(d.hasOwnProperty(m)){if(Ro(d[m])){Ro(l[m])?a(l[m],d[m]):l[m]=Object.assign({},d[m]);continue}if(Array.isArray(d[m])){l[m]=Object.assign([],d[m]);continue}l[m]=d[m]}}return s(a,"a"),r=n,((i=Object)!=null&&typeof Symbol<"u"&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)||(n={}),a(n,e),t&&a(n,t),n}s(Ar,"g");function a2(){var n=[],e={},t=!0,r=!1,i=void 0;try{for(var a,l=arguments[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var d=a.value,m=!0,g=!1,v=void 0;try{for(var _,E=d[Symbol.iterator]();!(m=(_=E.next()).done);m=!0){var C=_.value;Ro(C)?e[C.value]||(n.push(C),e[C.value]=1):n.includes(C)||n.push(C)}}catch(k){g=!0,v=k}finally{try{m||E.return==null||E.return()}finally{if(g)throw v}}}}catch(k){r=!0,i=k}finally{try{t||l.return==null||l.return()}finally{if(r)throw i}}return n}s(a2,"h");function Fb(n){return String.prototype.normalize?typeof n=="string"?n.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:n}s(Fb,"p");var l2=s(function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)},"f");function c2(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(n){return(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})}s(c2,"m");function Mc(n){return n&&n.classList&&n.classList.contains(this.settings.classNames.tag)}s(Mc,"v");function u2(n){return n&&n.closest(this.settings.classNames.tagSelector)}s(u2,"b");function g2(n,e){var t=window.getSelection();return e=e||t.getRangeAt(0),typeof n=="string"&&(n=document.createTextNode(n)),e&&(e.deleteContents(),e.insertNode(n)),n}s(g2,"w");function Ln(n,e,t){return n?(e&&(n.__tagifyTagData=t?e:Ar({},n.__tagifyTagData||{},e)),n.__tagifyTagData):(vl.warn("tag element doesn't exist",{tagElm:n,data:e}),e)}s(Ln,"y");function bl(n){if(n&&n.parentNode){var e=n,t=window.getSelection(),r=t.getRangeAt(0);t.rangeCount&&(r.setStartAfter(e),r.collapse(!0),t.removeAllRanges(),t.addRange(r))}}s(bl,"T");function y2(n,e){n.forEach(function(t){if(Ln(t.previousSibling)||!t.previousSibling){var r=document.createTextNode("\u200B");t.before(r),e&&bl(r)}})}s(y2,"O");var W1={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function nG(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(nG,"D");function rG(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){nG(n,i,t[i])})}return n}s(rG,"S");function iG(n,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n}s(iG,"I");function G1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}s(G1,"M");function sG(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(sG,"E");function oG(n){return function(e){if(Array.isArray(e))return G1(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return G1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G1(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(oG,"N");function aG(){for(var n in this.dropdown={},this._dropdown)this.dropdown[n]=typeof this._dropdown[n]=="function"?this._dropdown[n].bind(this):this._dropdown[n];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}s(aG,"_");var Ub,yd,d2,lG=(Ub=function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){sG(n,i,t[i])})}return n}({},{events:{binding:function(){var n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.dropdown.events.callbacks,t=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},r=n?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[r]("scroll",t.position,!0),window[r]("resize",t.position),window[r]("keydown",t.onKeyDown)),this.DOM.dropdown[r]("mouseover",t.onMouseOver),this.DOM.dropdown[r]("mouseleave",t.onMouseLeave),this.DOM.dropdown[r]("mousedown",t.onClick),this.DOM.dropdown.content[r]("scroll",t.onScroll)},callbacks:{onKeyDown:function(n){var e=this;if(this.state.hasFocus&&!this.state.composing){var t=this.settings,r=this.DOM.dropdown.querySelector(t.classNames.dropdownItemActiveSelector),i=this.dropdown.getSuggestionDataByNode(r),a=t.mode=="mix",l=t.mode=="select";t.hooks.beforeKeyDown(n,{tagify:this}).then(function(d){switch(n.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":n.preventDefault();var m=e.dropdown.getAllSuggestionsRefs(),g=n.key=="ArrowUp"||n.key=="Up";r&&(r=e.dropdown.getNextOrPrevOption(r,!g)),r&&r.matches(t.classNames.dropdownItemSelector)||(r=m[g?m.length-1:0]),e.dropdown.highlightOption(r,!0);break;case"Escape":case"Esc":e.dropdown.hide();break;case"ArrowRight":if(e.state.actions.ArrowLeft)return;case"Tab":var v=!t.autoComplete.rightKey||!t.autoComplete.tabKey;if(!a&&!l&&r&&v&&!e.state.editing){n.preventDefault();var _=e.dropdown.getMappedValue(i);return e.input.autocomplete.set.call(e,_),!1}return!0;case"Enter":n.preventDefault(),t.hooks.suggestionClick(n,{tagify:e,tagData:i,suggestionElm:r}).then(function(){if(r)return e.dropdown.selectOption(r),r=e.dropdown.getNextOrPrevOption(r,!g),void e.dropdown.highlightOption(r);e.dropdown.hide(),a||e.addTags(e.state.inputText.trim(),!0)}).catch(function(C){return vl.warn(C)});break;case"Backspace":if(a||e.state.editing.scope)return;var E=e.input.raw.call(e);E!=""&&E.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0))}})}},onMouseOver:function(n){var e=n.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(e)},onMouseLeave:function(n){this.dropdown.highlightOption()},onClick:function(n){var e=this;if(n.button==0&&n.target!=this.DOM.dropdown&&n.target!=this.DOM.dropdown.content){var t=n.target.closest(this.settings.classNames.dropdownItemSelector),r=this.dropdown.getSuggestionDataByNode(t);this.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},50),this.settings.hooks.suggestionClick(n,{tagify:this,tagData:r,suggestionElm:t}).then(function(){t?e.dropdown.selectOption(t,n):e.dropdown.hide()}).catch(function(i){return vl.warn(i)})}},onScroll:function(n){var e=n.target,t=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(t)})}}},refilter:function(n){n=n||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(n),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(n){var e=n&&n.getAttribute("value");return this.suggestedListItems.find(function(t){return t.value==e})||null},getNextOrPrevOption:function(n){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.dropdown.getAllSuggestionsRefs(),r=t.findIndex(function(i){return i===n});return e?t[r+1]:t[r-1]},highlightOption:function(n,e){var t,r=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(r),this.state.ddItemElm.removeAttribute("aria-selected")),!n)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);t=this.dropdown.getSuggestionDataByNode(n),this.state.ddItemData=t,this.state.ddItemElm=n,n.classList.add(r),n.setAttribute("aria-selected",!0),e&&(n.parentNode.scrollTop=n.clientHeight+n.offsetTop-n.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,t),this.dropdown.position())},selectOption:function(n,e){var t=this,r=this.settings,i=r.dropdown,a=i.clearOnSelect,l=i.closeOnSelect;if(!n)return this.addTags(this.state.inputText,!0),void(l&&this.dropdown.hide());e=e||{};var d=n.getAttribute("value"),m=d=="noMatch",g=r.mode=="mix",v=this.suggestedListItems.find(function(E){var C;return((C=E.value)!==null&&C!==void 0?C:E)==d});if(this.trigger("dropdown:select",{data:v,elm:n,event:e}),d&&(v||m)){if(this.state.editing){var _=this.normalizeTags([v])[0];v=r.transformTag.call(this,_)||_,this.onEditTagDone(null,Ar({__isValid:!0},v))}else this[g?"addMixTags":"addTags"]([v||this.input.raw.call(this)],a);(g||this.DOM.input.parentNode)&&(setTimeout(function(){t.DOM.input.focus(),t.toggleFocusClass(!0)}),l&&setTimeout(this.dropdown.hide.bind(this)),n.addEventListener("transitionend",function(){t.dropdown.fillHeaderFooter(),setTimeout(function(){n.remove(),t.dropdown.refilter()},100)},{once:!0}),n.classList.add(this.settings.classNames.dropdownItemHidden))}else l&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(n){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return n||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems:function(n,e){var t,r,i,a,l,d,m=s(function(){var j,W,Z=void 0,ae=void 0;j=k[P],r=((W=Object)!=null&&typeof Symbol<"u"&&W[Symbol.hasInstance]?W[Symbol.hasInstance](j):j instanceof W)?k[P]:{value:k[P]};var he,fe=Object.keys(r).some(function(z){return O.includes(z)})?O:["value"];_.fuzzySearch&&!e.exact?(a=fe.reduce(function(z,se){return z+" "+(r[se]||"")},"").toLowerCase().trim(),_.accentedSearch&&(a=Fb(a),d=Fb(d)),Z=a.indexOf(d)==0,ae=a===d,he=a,i=d.toLowerCase().split(" ").every(function(z){return he.includes(z.toLowerCase())})):(Z=!0,i=fe.some(function(z){var se=""+(r[z]||"");return _.accentedSearch&&(se=Fb(se),d=Fb(d)),_.caseSensitive||(se=se.toLowerCase()),ae=se===d,e.exact?se===d:se.indexOf(d)==0})),l=!_.includeSelectedTags&&t.isTagDuplicate(Ro(r)?r.value:r),i&&!l&&(ae&&Z?C.push(r):_.sortby=="startsWith"&&Z?E.unshift(r):E.push(r))},"l"),g=this,v=this.settings,_=v.dropdown,E=(e=e||{},[]),C=[],k=v.whitelist,D=_.maxItems>=0?_.maxItems:1/0,O=_.searchKeys,P=0;if(!(n=v.mode=="select"&&this.value.length&&this.value[0][v.tagTextProp]==n?"":n)||!O.length)return E=_.includeSelectedTags?k:k.filter(function(j){return!g.isTagDuplicate(Ro(j)?j.value:j)}),this.state.dropdown.suggestions=E,E.slice(0,D);for(d=_.caseSensitive?""+n:(""+n).toLowerCase();P<k.length;P++)t=this,m();return this.state.dropdown.suggestions=C.concat(E),typeof _.sortby=="function"?_.sortby(C.concat(E),d):C.concat(E).slice(0,D)},getMappedValue:function(n){var e=this.settings.dropdown.mapValueTo;return e?typeof e=="function"?e(n):n[e]||n.value:n.value},createListHTML:function(n){var e=this;return Ar([],n).map(function(t,r){typeof t!="string"&&typeof t!="number"||(t={value:t});var i=e.dropdown.getMappedValue(t);return i=typeof i=="string"&&e.settings.dropdown.escapeHTML?Rc(i):i,e.settings.templates.dropdownItem.apply(e,[iG(rG({},t),{mappedValue:i}),e])}).join("")}}),yd=(yd={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return oG(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(n){var e,t,r,i=this,a=this.settings,l=a.mode=="mix"&&!a.enforceWhitelist,d=!a.whitelist||!a.whitelist.length,m=a.dropdown.position=="manual";if(n=n===void 0?this.state.inputText:n,!(d&&!l&&!a.templates.dropdownItemNoMatch||a.dropdown.enable===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(n),n&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",n),a.templates.dropdownItemNoMatch&&(r=a.templates.dropdownItemNoMatch.call(this,{value:n}))),!r){if(this.suggestedListItems.length)n&&l&&!this.state.editing.scope&&!nm(this.suggestedListItems[0].value,n)&&this.suggestedListItems.unshift({value:n});else{if(!n||!l||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:n}]}t=""+(Ro(e=this.suggestedListItems[0])?e.value:e),a.autoComplete&&t&&t.indexOf(n)==0&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(r),a.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(a.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=n||!0,this.state.dropdown.query=n,this.setStateSelection(),m||setTimeout(function(){i.dropdown.position(),i.dropdown.render()}),setTimeout(function(){i.trigger("dropdown:show",i.DOM.dropdown)})}},hide:function(n){var e=this,t=this.DOM,r=t.scope,i=t.dropdown,a=this.settings.dropdown.position=="manual"&&!n;if(i&&document.body.contains(i)&&!a)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),r.setAttribute("aria-expanded",!1),i.parentNode.removeChild(i),setTimeout(function(){e.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",i),this},toggle:function(n){this.dropdown[this.state.dropdown.visible&&!n?"hide":"show"]()},getAppendTarget:function(){var n=this.settings.dropdown;return typeof n.appendTarget=="function"?n.appendTarget():n.appendTarget},render:function(){var n,e,t,r=this,i=(n=this.DOM.dropdown,(t=n.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(t),e=t.clientHeight,t.parentNode.removeChild(t),e),a=this.settings,l=typeof a.dropdown.enabled=="number"&&a.dropdown.enabled>=0,d=this.dropdown.getAppendTarget();return l?(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(a.classNames.dropdownInital),this.dropdown.position(i),d.appendChild(this.DOM.dropdown),setTimeout(function(){return r.DOM.dropdown.classList.remove(a.classNames.dropdownInital)})),this):this},fill:function(n){n=typeof n=="string"?n:this.dropdown.createListHTML(n||this.suggestedListItems);var e,t=this.settings.templates.dropdownContent.call(this,n);this.DOM.dropdown.content.innerHTML=(e=t)?e.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var n=this.dropdown.filterListItems(this.state.dropdown.query),e=this.parseTemplate("dropdownHeader",[n]),t=this.parseTemplate("dropdownFooter",[n]),r=this.dropdown.getHeaderRef(),i=this.dropdown.getFooterRef();e&&r?.parentNode.replaceChild(e,r),t&&i?.parentNode.replaceChild(t,i)},position:function(n){var e=this.settings.dropdown,t=this.dropdown.getAppendTarget();if(e.position!="manual"&&t){var r,i,a,l,d,m,g,v,_,E=this.DOM.dropdown,C=e.RTL,k=t===document.body,D=t===this.DOM.scope,O=k?window.pageYOffset:t.scrollTop,P=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,j=P.clientHeight,W=Math.max(P.clientWidth||0,window.innerWidth||0)>480?e.position:"all",Z=this.DOM[W=="input"?"input":"scope"];if(n=n||E.clientHeight,this.state.dropdown.visible){if(W=="text"?(a=(r=function(){var fe=document.getSelection();if(fe.rangeCount){var z,se,Te=fe.getRangeAt(0),K=Te.startContainer,ne=Te.startOffset;if(ne>0)return(se=document.createRange()).setStart(K,ne-1),se.setEnd(K,ne),{left:(z=se.getBoundingClientRect()).right,top:z.top,bottom:z.bottom};if(K.getBoundingClientRect)return K.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,i=r.top,l=r.left,d="auto"):(m=function(fe){var z=0,se=0;for(fe=fe.parentNode;fe&&fe!=P;)z+=fe.offsetTop||0,se+=fe.offsetLeft||0,fe=fe.parentNode;return{top:z,left:se}}(t),r=Z.getBoundingClientRect(),i=D?-1:r.top-m.top,a=(D?r.height:r.bottom-m.top)-1,l=D?-1:r.left-m.left,d=r.width+"px"),!k){var ae=function(){for(var fe=0,z=e.appendTarget.parentNode;z;)fe+=z.scrollTop||0,z=z.parentNode;return fe}();i+=ae,a+=ae}var he;i=Math.floor(i),a=Math.ceil(a),v=((g=(he=e.placeAbove)!==null&&he!==void 0?he:j-r.bottom<n)?i:a)+O,_="left: ".concat(l+(C&&r.width||0)+window.pageXOffset,"px;"),E.style.cssText="".concat(_,"; top: ").concat(v,"px; min-width: ").concat(d,"; max-width: ").concat(d),E.setAttribute("placement",g?"top":"bottom"),E.setAttribute("position",W)}}}})!=null?yd:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Ub,Object.getOwnPropertyDescriptors(yd)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}(Object(yd)).forEach(function(n){Object.defineProperty(Ub,n,Object.getOwnPropertyDescriptor(yd,n))}),Ub),tm="@yaireo/tagify/",cG={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},uG={wrapper:function(n,e){return'<tags class="'.concat(e.classNames.namespace," ").concat(e.mode?"".concat(e.classNames[e.mode+"Mode"]):""," ").concat(n.className,`"
                    `).concat(e.readonly?"readonly":"",`
                    `).concat(e.disabled?"disabled":"",`
                    `).concat(e.required?"required":"",`
                    `).concat(e.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(n2,`
        </tags>`)},input:function(){var n=this.settings,e=n.placeholder||n2;return"<span ".concat(!n.readonly&&n.userInput?"contenteditable":"",' tabIndex="0" data-placeholder="').concat(e,'" aria-placeholder="').concat(n.placeholder||"",`"
                    class="`).concat(n.classNames.input,`"
                    role="textbox"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(n.mode=="mix",'"></span>')},tag:function(n,e){var t=e.settings;return'<tag title="'.concat(n.title||n.value,`"
                    contenteditable='false'
                    spellcheck='false'
                    tabIndex="`).concat(t.a11y.focusableTags?0:-1,`"
                    class="`).concat(t.classNames.tag," ").concat(n.class||"",`"
                    `).concat(this.getAttributes(n),`>
            <x title='' tabIndex="`).concat(t.a11y.focusableTags?0:-1,'" class="').concat(t.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(t.mode==="select"&&t.userInput?"contenteditable='true'":"",' class="').concat(t.classNames.tagText,'">').concat(n[t.tagTextProp]||n.value,`</span>
            </div>
        </tag>`)},dropdown:function(n){var e=n.dropdown,t=e.position=="manual";return'<div class="'.concat(t?"":n.classNames.dropdown," ").concat(e.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(e.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(n.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(n){var e=this.settings.templates,t=this.state.dropdown.suggestions;return`
            `.concat(e.dropdownHeader.call(this,t),`
            `).concat(n,`
            `).concat(e.dropdownFooter.call(this,t),`
        `)},dropdownItem:function(n){return"<div ".concat(this.getAttributes(n),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(n.class||"",`'
                    tabindex="0"
                    role="option">`).concat(n.mappedValue||n.value,"</div>")},dropdownHeader:function(n){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(n){var e=n.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(e,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function f2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}s(f2,"F");function h2(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}s(h2,"R");function dG(n,e){return function(t){if(Array.isArray(t))return t}(n)||function(t,r){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var a,l,d=[],m=!0,g=!1;try{for(i=i.call(t);!(m=(a=i.next()).done)&&(d.push(a.value),!r||d.length!==r);m=!0);}catch(v){g=!0,l=v}finally{try{m||i.return==null||i.return()}finally{if(g)throw l}}return d}}(n,e)||function(t,r){if(t){if(typeof t=="string")return f2(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f2(t,r)}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(dG,"H");function Z1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}s(Z1,"B");function Nc(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(Nc,"W");function m2(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}s(m2,"U");function fG(n,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n}s(fG,"q");function Y1(n){return function(e){if(Array.isArray(e))return Z1(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return Z1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z1(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(Y1,"K");var hG={customBinding:function(){var n=this;this.customEventsList.forEach(function(e){n.on(e,n.settings.callbacks[e])})},binding:function(){var n,e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=this.settings,r=this.events.callbacks,i=e?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!e){for(var a in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),n=this.listeners.main=this.listeners.main||{keydown:["input",r.onKeydown.bind(this)],click:["scope",r.onClickScope.bind(this)],dblclick:t.mode!="select"&&["scope",r.onDoubleClickScope.bind(this)],paste:["input",r.onPaste.bind(this)],drop:["input",r.onDrop.bind(this)],compositionstart:["input",r.onCompositionStart.bind(this)],compositionend:["input",r.onCompositionEnd.bind(this)]})n[a]&&this.DOM[n[a][0]][i](a,n[a][1]);var l=this.listeners.main.inputMutationObserver||new MutationObserver(r.onInputDOMChange.bind(this));l.disconnect(),t.mode=="mix"&&l.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(n){var e=(n||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),e))},bindGlobal:function(n){var e,t=this.events.callbacks,r=n?"removeEventListener":"addEventListener";if(this.listeners&&(n||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:t[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:t.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"click",target:document,cb:t.onClickAnywhere.bind(this),useCapture:!0}];var i=!0,a=!1,l=void 0;try{for(var d,m=this.listeners.global[Symbol.iterator]();!(i=(d=m.next()).done);i=!0)(e=d.value).target[r](e.type,e.cb,!!e.useCapture)}catch(g){a=!0,l=g}finally{try{i||m.return==null||m.return()}finally{if(a)throw l}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(n){var e,t,r,i=u2.call(this,n.target),a=Mc.call(this,n.target),l=n.type=="focusin",d=n.type=="focusout";(e=n.target)===null||e===void 0||e.closest(this.settings.classNames.tagTextSelector),i&&l&&!a&&this.toggleFocusClass(this.state.hasFocus=+new Date);var m=this.settings,g=n.target?this.trim(this.DOM.input.textContent):"",v=(r=this.value)===null||r===void 0||(t=r[0])===null||t===void 0?void 0:t[m.tagTextProp],_=m.dropdown.enabled>=0,E={relatedTarget:n.relatedTarget},C=this.state.actions.selectOption&&(_||!m.dropdown.closeOnSelect),k=this.state.actions.addNew&&_;if(d){if(n.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate()}if(!C&&!k)if(l||i?(this.state.hasFocus=+new Date,this.toggleFocusClass(this.state.hasFocus)):this.state.hasFocus=!1,m.mode!="mix"){if(l){if(!m.focusable)return;var D=m.dropdown.enabled===0&&!this.state.dropdown.visible;return this.toggleFocusClass(!0),this.trigger("focus",E),void(!D||a&&m.mode!=="select"||this.dropdown.show(this.value.length?"":void 0))}if(d){if(this.trigger("blur",E),this.loading(!1),m.mode=="select"){if(this.value.length){var O=this.getTagElms()[0];g=this.trim(O.textContent)}v===g&&(g="")}g&&!this.state.actions.selectOption&&m.addTagOnBlur&&m.addTagOn.includes("blur")&&this.addTags(g,!0)}i||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else l?this.trigger("focus",E):d&&(this.trigger("blur",E),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(n){this.state.composing=!0},onCompositionEnd:function(n){this.state.composing=!1},onWindowKeyDown:function(n){var e,t=this.settings,r=document.activeElement,i=u2.call(this,r)&&this.DOM.scope.contains(document.activeElement),a=i&&r.hasAttribute("readonly");if(this.state.hasFocus||i&&!a){e=r.nextElementSibling;var l=n.target.classList.contains(t.classNames.tagX);switch(n.key){case"Backspace":t.readonly||this.state.editing||(this.removeTags(r),(e||this.DOM.input).focus());break;case"Enter":if(l)return void this.removeTags(n.target.parentNode);t.a11y.focusableTags&&Mc.call(this,r)&&setTimeout(this.editTag.bind(this),0,r);break;case"ArrowDown":this.state.dropdown.visible||t.mode=="mix"||this.dropdown.show()}}},onKeydown:function(n){var e=this,t=this.settings;if(!this.state.composing&&t.userInput){t.mode=="select"&&t.enforceWhitelist&&this.value.length&&n.key!="Tab"&&n.preventDefault();var r=this.trim(n.target.textContent);this.trigger("keydown",{event:n}),t.hooks.beforeKeyDown(n,{tagify:this}).then(function(i){if(t.mode=="mix"){switch(n.key){case"Left":case"ArrowLeft":e.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(e.state.editing)return;var a=document.getSelection(),l=n.key=="Delete"&&a.anchorOffset==(a.anchorNode.length||0),d=a.anchorNode.previousSibling,m=a.anchorNode.nodeType==1||!a.anchorOffset&&d&&d.nodeType==1&&a.anchorNode.previousSibling;s2(e.DOM.input.innerHTML);var g,v,_,E=e.getTagElms(),C=a.anchorNode.length===1&&a.anchorNode.nodeValue=="\u200B";if(t.backspace=="edit"&&m)return g=a.anchorNode.nodeType==1?null:a.anchorNode.previousElementSibling,setTimeout(e.editTag.bind(e),0,g),void n.preventDefault();if(l2()&&m2(m,Element))return _=o2(m),m.hasAttribute("readonly")||m.remove(),e.DOM.input.focus(),void setTimeout(function(){bl(_),e.DOM.input.click()});if(a.anchorNode.nodeName=="BR")return;if((l||m)&&a.anchorNode.nodeType==1?v=a.anchorOffset==0?l?E[0]:null:E[Math.min(E.length,a.anchorOffset)-1]:l?v=a.anchorNode.nextElementSibling:m2(m,Element)&&(v=m),a.anchorNode.nodeType==3&&!a.anchorNode.nodeValue&&a.anchorNode.previousElementSibling&&n.preventDefault(),(m||l)&&!t.backspace||a.type!="Range"&&!a.anchorOffset&&a.anchorNode==e.DOM.input&&n.key!="Delete")return void n.preventDefault();if(a.type!="Range"&&v&&v.hasAttribute("readonly"))return void bl(o2(v));n.key=="Delete"&&C&&Ln(a.anchorNode.nextSibling)&&e.removeTags(a.anchorNode.nextSibling),clearTimeout(d2),d2=setTimeout(function(){var P=document.getSelection();s2(e.DOM.input.innerHTML),!l&&P.anchorNode.previousSibling,e.value=[].map.call(E,function(j,W){var Z=Ln(j);if(j.parentNode||Z.readonly)return Z;e.trigger("remove",{tag:j,index:W,data:Z})}).filter(function(j){return j})},20)}return!0}var k=t.dropdown.position=="manual";switch(n.key){case"Backspace":t.mode=="select"&&t.enforceWhitelist&&e.value.length?e.removeTags():e.state.dropdown.visible&&t.dropdown.position!="manual"||n.target.textContent!=""&&r.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0));break;case"Esc":case"Escape":if(e.state.dropdown.visible)return;n.target.blur();break;case"Down":case"ArrowDown":e.state.dropdown.visible||e.dropdown.show();break;case"ArrowRight":var D=e.state.inputSuggestion||e.state.ddItemData;if(D&&t.autoComplete.rightKey)return void e.addTags([D],!0);break;case"Tab":var O=t.mode=="select";if(!r||O)return!0;n.preventDefault();case"Enter":if(e.state.dropdown.visible&&!k)return;n.preventDefault(),setTimeout(function(){e.state.dropdown.visible&&!k||e.state.actions.selectOption||!t.addTagOn.includes(n.key.toLowerCase())||e.addTags(r,!0)})}}).catch(function(i){return i})}},onInput:function(n){this.postUpdate();var e=this.settings;if(e.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,n);var t=this.input.normalize.call(this,void 0,{trim:!1}),r=t.length>=e.dropdown.enabled,i={value:t,inputElm:this.DOM.input},a=this.validateTag({value:t});e.mode=="select"&&this.toggleScopeValidation(a),i.isValid=a,this.state.inputText!=t&&(this.input.set.call(this,t,!1),t.search(e.delimiters)!=-1?this.addTags(t)&&this.input.set.call(this):e.dropdown.enabled>=0&&this.dropdown[r?"show":"hide"](t),this.trigger("input",i))},onMixTagsInput:function(n){var e,t,r,i,a,l,d,m,g=this,v=this.settings,_=this.value.length,E=this.getTagElms(),C=document.createDocumentFragment(),k=window.getSelection().getRangeAt(0),D=[].map.call(E,function(O){return Ln(O).value});if(n.inputType=="deleteContentBackward"&&l2()&&this.events.callbacks.onKeydown.call(this,{target:n.target,key:"Backspace"}),y2(this.getTagElms()),this.value.slice().forEach(function(O){O.readonly&&!D.includes(O.value)&&C.appendChild(g.createTagElem(O))}),C.childNodes.length&&(k.insertNode(C),this.setRangeAtStartEnd(!1,C.lastChild)),E.length!=_)return this.value=[].map.call(this.getTagElms(),function(O){return Ln(O)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(l=window.getSelection()).rangeCount>0&&l.anchorNode.nodeType==3){if((k=l.getRangeAt(0).cloneRange()).collapse(!0),k.setStart(l.focusNode,0),r=(e=k.toString().slice(0,k.endOffset)).split(v.pattern).length-1,(t=e.match(v.pattern))&&(i=e.slice(e.lastIndexOf(t[t.length-1]))),i){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:i.match(v.pattern)[0],value:i.replace(v.pattern,"")},this.state.tag.baseOffset=l.baseOffset-this.state.tag.value.length,m=this.state.tag.value.match(v.delimiters))return this.state.tag.value=this.state.tag.value.replace(v.delimiters,""),this.state.tag.delimiters=m[0],this.addTags(this.state.tag.value,v.dropdown.clearOnSelect),void this.dropdown.hide();a=this.state.tag.value.length>=v.dropdown.enabled;try{d=(d=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&d.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(d||r<this.state.mixMode.matchedPatternCount)&&(a=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=r}setTimeout(function(){g.update({withoutChangeEvent:!0}),g.trigger("input",Ar({},g.state.tag,{textContent:g.DOM.input.textContent})),g.state.tag&&g.dropdown[a?"show":"hide"](g.state.tag.value)},10)},onInputIE:function(n){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,n)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(n){n.target==this.DOM.scope||this.DOM.scope.contains(n.target)||(this.toggleFocusClass(!1),this.state.hasFocus=!1,n.target.closest(".tagify__dropdown")&&n.target.closest(".tagify__dropdown").__tagify!=this&&this.dropdown.hide())},onClickScope:function(n){var e=this.settings,t=n.target.closest("."+e.classNames.tag),r=n.target===this.DOM.scope,i=+new Date-this.state.hasFocus;if(r&&e.mode!="select")this.DOM.input.focus();else{if(!n.target.classList.contains(e.classNames.tagX))return t&&!this.state.editing?(this.trigger("click",{tag:t,index:this.getNodeIndex(t),data:Ln(t),event:n}),void(e.editTags!==1&&e.editTags.clicks!==1&&e.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,n))):void(n.target==this.DOM.input&&(e.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),i>500||!e.focusable)?this.state.dropdown.visible?this.dropdown.hide():e.dropdown.enabled===0&&e.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):e.mode!="select"||e.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,fG(function(a){for(var l=1;l<arguments.length;l++){var d=arguments[l]!=null?arguments[l]:{},m=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(d).filter(function(g){return Object.getOwnPropertyDescriptor(d,g).enumerable}))),m.forEach(function(g){Nc(a,g,d[g])})}return a}({},n),{target:this.getTagElms()[0]})),!e.userInput&&this.dropdown.show()));this.removeTags(n.target.parentNode)}},onPaste:function(n){var e=this;n.preventDefault();var t,r,i,a=this.settings;if(a.mode=="select"&&a.enforceWhitelist||!a.userInput)return!1;a.readonly||(r=n.clipboardData||window.clipboardData,i=r.getData("Text"),a.hooks.beforePaste(n,{tagify:this,pastedText:i,clipboardData:r}).then(function(l){l===void 0&&(l=i),l&&(e.injectAtCaret(l,window.getSelection().getRangeAt(0)),e.settings.mode=="mix"?e.events.callbacks.onMixTagsInput.call(e,n):e.settings.pasteAsTags?t=e.addTags(e.state.inputText+l,!0):(e.state.inputText=l,e.dropdown.show(l))),e.trigger("paste",{event:n,pastedText:i,clipboardData:r,tagsElems:t})}).catch(function(l){return l}))},onDrop:function(n){n.preventDefault()},onEditTagInput:function(n,e){var t,r=n.closest("."+this.settings.classNames.tag),i=this.getNodeIndex(r),a=Ln(r),l=this.input.normalize.call(this,n),d=(Nc(t={},this.settings.tagTextProp,l),Nc(t,"__tagId",a.__tagId),t),m=this.validateTag(d);this.editTagChangeDetected(Ar(a,d))||n.originalIsValid!==!0||(m=!0),r.classList.toggle(this.settings.classNames.tagInvalid,m!==!0),a.__isValid=m,r.title=m===!0?a.title||a.value:m,l.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=l),this.dropdown.show(l)),this.trigger("edit:input",{tag:r,index:i,data:Ar({},this.value[i],{newValue:l}),event:e})},onEditTagPaste:function(n,e){var t=(e.clipboardData||window.clipboardData).getData("Text");e.preventDefault();var r=g2(t);this.setRangeAtStartEnd(!1,r)},onEditTagClick:function(n,e){this.events.callbacks.onClickScope.call(this,e)},onEditTagFocus:function(n){this.state.editing={scope:n,input:n.querySelector("[contenteditable]")}},onEditTagBlur:function(n,e){var t=Mc.call(this,e.relatedTarget);if(this.settings.mode=="select"&&t&&e.relatedTarget.contains(e.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(n))){var r,i,a,l=this.settings,d=n.closest("."+l.classNames.tag),m=Ln(d),g=this.input.normalize.call(this,n),v=(Nc(r={},l.tagTextProp,g),Nc(r,"__tagId",m.__tagId),r),_=m.__originalData,E=this.editTagChangeDetected(Ar(m,v)),C=this.validateTag(v);if(g)if(E){var k;if(i=this.hasMaxTags(),a=Ar({},_,(Nc(k={},l.tagTextProp,this.trim(g)),Nc(k,"__isValid",C),k)),l.transformTag.call(this,a,_),(C=(!i||_.__isValid===!0)&&this.validateTag(a))!==!0){if(this.trigger("invalid",{data:a,tag:d,message:C}),l.editTags.keepInvalid)return;l.keepInvalidTags?a.__isValid=C:a=_}else l.keepInvalidTags&&(delete a.title,delete a["aria-invalid"],delete a.class);this.onEditTagDone(d,a)}else this.onEditTagDone(d,_);else this.onEditTagDone(d)}},onEditTagkeydown:function(n,e){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:n}),n.key){case"Esc":case"Escape":this.state.editing=!1,e.__tagifyTagData.__originalData.value?e.parentNode.replaceChild(e.__tagifyTagData.__originalHTML,e):e.remove();break;case"Enter":case"Tab":n.preventDefault(),setTimeout(function(){return n.target.blur()},0)}},onDoubleClickScope:function(n){var e,t,r=n.target.closest("."+this.settings.classNames.tag),i=Ln(r),a=this.settings;r&&i.editable!==!1&&(e=r.classList.contains(this.settings.classNames.tagEditing),t=r.hasAttribute("readonly"),a.readonly||e||t||!this.settings.editTags||!a.userInput||(this.events.callbacks.onEditTagFocus.call(this,r),this.editTag(r)),this.toggleFocusClass(!0),a.mode!="select"&&this.trigger("dblclick",{tag:r,index:this.getNodeIndex(r),data:Ln(r)}))},onInputDOMChange:function(n){var e=this;n.forEach(function(r){r.addedNodes.forEach(function(i){if(i.outerHTML=="<div><br></div>")i.replaceWith(document.createElement("br"));else if(i.nodeType==1&&i.querySelector(e.settings.classNames.tagSelector)){var a,l=document.createTextNode("");i.childNodes[0].nodeType==3&&i.previousSibling.nodeName!="BR"&&(l=document.createTextNode(`
`)),(a=i).replaceWith.apply(a,Y1([l].concat(Y1(Y1(i.childNodes).slice(0,-1))))),bl(l)}else if(Mc.call(e,i)){var d;if(((d=i.previousSibling)===null||d===void 0?void 0:d.nodeType)!=3||i.previousSibling.textContent||i.previousSibling.remove(),i.previousSibling&&i.previousSibling.nodeName=="BR"){i.previousSibling.replaceWith(`
\u200B`);for(var m=i.nextSibling,g="";m;)g+=m.textContent,m=m.nextSibling;g.trim()&&bl(i.previousSibling)}else i.previousSibling&&!Ln(i.previousSibling)||i.before("\u200B")}}),r.removedNodes.forEach(function(i){i&&i.nodeName=="BR"&&Mc.call(e,t)&&(e.removeTags(t),e.fixFirefoxLastTagNoCaret())})});var t=this.DOM.input.lastChild;t&&t.nodeValue==""&&t.remove(),t&&t.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function X1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}s(X1,"X");function eE(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(eE,"J");function ga(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}s(ga,"G");function p2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){eE(n,i,t[i])})}return n}s(p2,"$");function Q1(n){return function(e){if(Array.isArray(e))return X1(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return X1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X1(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(Q1,"Q");function rm(n,e){if(!n){vl.warn("input element not found",n);var t=new Proxy(this,{get:function(){return function(){return t}}});return t}if(n.__tagify)return vl.warn("input element is already Tagified - Same instance is returned.",n),n.__tagify;var r;Ar(this,function(i){var a=document.createTextNode(""),l={};function d(m,g,v){v&&g.split(/\s+/g).forEach(function(_){return a[m+"EventListener"].call(a,_,v)})}return s(d,"s"),{removeAllCustomListeners:function(){Object.entries(l).forEach(function(m){var g=dG(m,2),v=g[0];g[1].forEach(function(_){return d("remove",v,_)})}),l={}},off:function(m,g){return m&&(g?d("remove",m,g):m.split(/\s+/g).forEach(function(v){var _;(_=l[v])===null||_===void 0||_.forEach(function(E){return d("remove",v,E)}),delete l[v]})),this},on:function(m,g){return g&&typeof g=="function"&&(m.split(/\s+/g).forEach(function(v){Array.isArray(l[v])?l[v].push(g):l[v]=[g]}),d("add",m,g)),this},trigger:function(m,g,v){var _;if(v=v||{cloneData:!0},m)if(i.settings.isJQueryPlugin)m=="remove"&&(m="removeTag"),jQuery(i.DOM.originalInput).triggerHandler(m,[g]);else{try{var E=typeof g=="object"?g:{value:g};if((E=v.cloneData?Ar({},E):E).tagify=this,g.event&&(E.event=this.cloneEvent(g.event)),h2(g,Object))for(var C in g)h2(g[C],HTMLElement)&&(E[C]=g[C]);_=new CustomEvent(m,{detail:E})}catch(k){vl.warn(k)}a.dispatchEvent(_)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(r=e.id,function(i){var a,l="/"+i;if(localStorage.getItem(tm+r+"/v",1)==1)try{a=JSON.parse(localStorage[tm+r+l])}catch{}return a}),this.setPersistedData=function(i){return i?(localStorage.setItem(tm+i+"/v",1),function(a,l){var d="/"+l,m=JSON.stringify(a);a&&l&&(localStorage.setItem(tm+i+d,m),dispatchEvent(new Event("storage")))}):function(){}}(e.id),this.clearPersistedData=function(i){return function(a){var l=tm+"/"+i+"/";if(a)localStorage.removeItem(l+a);else for(var d in localStorage)d.includes(l)&&localStorage.removeItem(d)}}(e.id),this.applySettings(n,e),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(n),aG.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),n.autofocus&&this.DOM.input.focus(),n.__tagify=this}s(rm,"Y");rm.prototype={_dropdown:lG,placeCaretAfterNode:bl,getSetTagData:Ln,helpers:{sameStr:nm,removeCollectionProp:i2,omit:J1,isObject:Ro,parseHTML:K1,escapeHTML:Rc,extend:Ar,concatWithoutDups:a2,getUID:c2,isNodeTag:Mc},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(n){return this.settings.trim&&n&&typeof n=="string"?n.trim():n},parseHTML:K1,templates:uG,parseTemplate:function(n,e){return K1((n=this.settings.templates[n]||n).apply(this,e))},set whitelist(n){var e=n&&Array.isArray(n);this.settings.whitelist=e?n:[],this.setPersistedData(e?n:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(n){this.settings.userInput=!!n,this.setContentEditable(!!n)},get userInput(){return this.settings.userInput},generateClassSelectors:function(n){var e=s(function(r){var i=r;Object.defineProperty(n,i+"Selector",{get:function(){return"."+this[i].split(" ")[0]}})},"e");for(var t in n)e(t)},applySettings:function(n,e){var t,r;W1.templates=this.templates;var i=Ar({},W1,e.mode=="mix"?{dropdown:{position:"text"}}:{}),a=this.settings=Ar({},i,e);if(a.disabled=n.hasAttribute("disabled"),a.readonly=a.readonly||n.hasAttribute("readonly"),a.placeholder=Rc(n.getAttribute("placeholder")||a.placeholder||""),a.required=n.hasAttribute("required"),this.generateClassSelectors(a.classNames),a.dropdown.includeSelectedTags===void 0&&(a.dropdown.includeSelectedTags=a.duplicates),this.isIE&&(a.autoComplete=!1),["whitelist","blacklist"].forEach(function(d){var m=n.getAttribute("data-"+d);m&&ga(m=m.split(a.delimiters),Array)&&(a[d]=m)}),"autoComplete"in e&&!Ro(e.autoComplete)&&(a.autoComplete=W1.autoComplete,a.autoComplete.enabled=e.autoComplete),a.mode=="mix"&&(a.pattern=a.pattern||/@/,a.autoComplete.rightKey=!0,a.delimiters=e.delimiters||null,a.tagTextProp&&!a.dropdown.searchKeys.includes(a.tagTextProp)&&a.dropdown.searchKeys.push(a.tagTextProp)),n.pattern)try{a.pattern=new RegExp(n.pattern)}catch{}if(a.delimiters){a._delimiters=a.delimiters;try{a.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}a.disabled&&(a.userInput=!1),this.TEXTS=p2({},cG,a.texts||{}),(a.mode!="select"||!((t=e.dropdown)===null||t===void 0)&&t.enabled)&&a.userInput||(a.dropdown.enabled=0),a.dropdown.appendTarget=((r=e.dropdown)===null||r===void 0?void 0:r.appendTarget)||document.body;var l=this.getPersistedData("whitelist");Array.isArray(l)&&(this.whitelist=Array.isArray(a.whitelist)?a2(a.whitelist,l):l)},getAttributes:function(n){var e,t=this.getCustomAttributes(n),r="";for(e in t)r+=" "+e+(n[e]!==void 0?'="'.concat(t[e],'"'):"");return r},getCustomAttributes:function(n){if(!Ro(n))return"";var e,t={};for(e in n)e.slice(0,2)!="__"&&e!="class"&&n.hasOwnProperty(e)&&n[e]!==void 0&&(t[e]=Rc(n[e]));return t},setStateSelection:function(){var n=window.getSelection(),e={anchorOffset:n.anchorOffset,anchorNode:n.anchorNode,range:n.getRangeAt&&n.rangeCount&&n.getRangeAt(0)};return this.state.selection=e,e},getCSSVars:function(){var n,e,t,r=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(n=function(i){if(!i)return{};var a=(i=i.trim().split(" ")[0]).split(/\d+/g).filter(function(l){return l}).pop().trim();return{value:+i.split(a).filter(function(l){return l})[0].trim(),unit:a}}((t="tag-hide-transition",r.getPropertyValue("--"+t))),e=n.value,n.unit=="s"?1e3*e:e)}},build:function(n){var e=this.DOM,t=n.closest("label");this.settings.mixMode.integrated?(e.originalInput=null,e.scope=n,e.input=n):(e.originalInput=n,e.originalInput_tabIndex=n.tabIndex,e.scope=this.parseTemplate("wrapper",[n,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),n.parentNode.insertBefore(e.scope,n),n.tabIndex=-1),t&&t.setAttribute("for","")},destroy:function(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(n){var e,t=this.settings;if(this.state.blockChangeEvent=!0,n===void 0){var r=this.getPersistedData("value");n=r&&!this.DOM.originalInput.value?r:t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),n)if(t.mode=="mix")this.parseMixTags(n),(e=this.DOM.input.lastChild)&&e.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{ga(JSON.parse(n),Array)&&(n=JSON.parse(n))}catch{}this.addTags(n,!0).forEach(function(i){return i&&i.classList.add(t.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=t.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(n){var e={};for(var t in n)t!="path"&&(e[t]=n[t]);return e},loading:function(n){return this.state.isLoading=n,this.DOM.scope.classList[n?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(n,e){return n&&n.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(n,e){typeof n=="string"&&this.DOM.scope.classList.toggle(n,e)},toggleScopeValidation:function(n){var e=n===!0||n===void 0;!this.settings.required&&n&&n===this.TEXTS.empty&&(e=!0),this.toggleClass(this.settings.classNames.tagInvalid,!e),this.DOM.scope.title=e?"":n},toggleFocusClass:function(n){this.toggleClass(this.settings.classNames.focus,!!n)},setPlaceholder:function(n){var e=this;["data","aria"].forEach(function(t){return e.DOM.input.setAttribute("".concat(t,"-placeholder"),n)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var n=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==n.value,t=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=n.value,t.simulated=!0,n._valueTracker&&n._valueTracker.setValue(Math.random()),n.dispatchEvent(t),this.trigger("change",this.state.lastOriginalValueReported),n.value=this.state.lastOriginalValueReported)}},events:hG,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(n,e){if(e){n=typeof n=="number"?n:!!n,e=e.lastChild||e;var t=document.getSelection();if(ga(t.focusNode,Element)&&!this.DOM.input.contains(t.focusNode))return!0;try{t.rangeCount>=1&&["Start","End"].forEach(function(r){return t.getRangeAt(0)["set"+r](e,n||e.length)})}catch(r){console.warn(r)}}},insertAfterTag:function(n,e){if(e=e||this.settings.mixMode.insertAfterTag,n&&n.parentNode&&e)return e=typeof e=="string"?document.createTextNode(e):e,n.parentNode.insertBefore(e,n.nextSibling),e},editTagChangeDetected:function(n){var e=n.__originalData;for(var t in e)if(!this.dataProps.includes(t)&&n[t]!=e[t])return!0;return!1},getTagTextNode:function(n){return n.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(n,e){this.getTagTextNode(n).innerHTML=Rc(e)},editTag:function(n,e){var t=this;n=n||this.getLastTag(),e=e||{};var r=this.settings,i=this.getTagTextNode(n),a=this.getNodeIndex(n),l=Ln(n),d=this.events.callbacks,m=!0,g=r.mode=="select";if(!g&&this.dropdown.hide(),i){if(!ga(l,Object)||!("editable"in l)||l.editable)return l=Ln(n,{__originalData:Ar({},l),__originalHTML:n.cloneNode(!0)}),Ln(l.__originalHTML,l.__originalData),i.setAttribute("contenteditable",!0),n.classList.add(r.classNames.tagEditing),i.addEventListener("click",d.onEditTagClick.bind(this,n)),i.addEventListener("blur",d.onEditTagBlur.bind(this,this.getTagTextNode(n))),i.addEventListener("input",d.onEditTagInput.bind(this,i)),i.addEventListener("paste",d.onEditTagPaste.bind(this,i)),i.addEventListener("keydown",function(v){return d.onEditTagkeydown.call(t,v,n)}),i.addEventListener("compositionstart",d.onCompositionStart.bind(this)),i.addEventListener("compositionend",d.onCompositionEnd.bind(this)),e.skipValidation||(m=this.editTagToggleValidity(n)),i.originalIsValid=m,this.trigger("edit:start",{tag:n,index:a,data:l,isValid:m}),i.focus(),!g&&this.setRangeAtStartEnd(!1,i),r.dropdown.enabled===0&&!g&&this.dropdown.show(),this.state.hasFocus=!0,this}else vl.warn("Cannot find element in Tag template: .",r.classNames.tagTextSelector)},editTagToggleValidity:function(n,e){var t;if(e=e||Ln(n))return(t=!("__isValid"in e)||e.__isValid===!0)||this.removeTagsFromValue(n),this.update(),n.classList.toggle(this.settings.classNames.tagNotAllowed,!t),e.__isValid=t,e.__isValid;vl.warn("tag has no data: ",n,e)},onEditTagDone:function(n,e){n=n||this.state.editing.scope,e=e||{};var t,r,i={tag:n,index:this.getNodeIndex(n),previousData:Ln(n),data:e},a=this.settings;this.trigger("edit:beforeUpdate",i,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,n&&((r=e[a.tagTextProp])!==void 0?!((t=(r+="").trim)===null||t===void 0)&&t.call(r):!(a.tagTextProp in e)&&e.value)?(n=this.replaceTag(n,e),this.editTagToggleValidity(n,e),a.a11y.focusableTags?n.focus():a.mode!="select"&&bl(n)):n&&this.removeTags(n),this.trigger("edit:updated",i),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(n,e){e&&e.value!==""&&e.value!==void 0||(e=n.__tagifyTagData),e.__isValid&&e.__isValid!=1&&Ar(e,this.getInvalidTagAttrs(e,e.__isValid));var t=this.createTagElem(e);return n.parentNode.replaceChild(t,n),this.updateValueByDOMTags(),t},updateValueByDOMTags:function(){var n=this;this.value.length=0,[].forEach.call(this.getTagElms(),function(e){e.classList.contains(n.settings.classNames.tagNotAllowed.split(" ")[0])||n.value.push(Ln(e))}),this.update()},injectAtCaret:function(n,e){var t;if(!(e=e||((t=this.state.selection)===null||t===void 0?void 0:t.range))&&n)return this.appendMixTags(n),this;var r=g2(n,e);return this.setRangeAtStartEnd(!1,r),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.settings.dropdown.closeOnSelect;this.state.inputText=n,e&&(this.DOM.input.innerHTML=Rc(""+n)),!n&&t&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var n=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!n),n},normalize:function(n,e){var t=n||this.DOM.input,r=[];t.childNodes.forEach(function(i){return i.nodeType==3&&r.push(i.nodeValue)}),r=r.join(`
`);try{r=r.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return r=r.replace(/\s/g," "),e?.trim?this.trim(r):r},autocomplete:{suggest:function(n){if(this.settings.autoComplete.enabled){typeof(n=n||{value:""})!="object"&&(n={value:n});var e=this.dropdown.getMappedValue(n);if(typeof e!="number"){var t=this.state.inputText.toLowerCase(),r=e.substr(0,this.state.inputText.length).toLowerCase(),i=e.substring(this.state.inputText.length);e&&this.state.inputText&&r==t?(this.DOM.input.setAttribute("data-suggest",i),this.state.inputSuggestion=n):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(n){var e=this.DOM.input.getAttribute("data-suggest"),t=n||(e?this.state.inputText+e:null);return!!t&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+t)):(this.input.set.call(this,t),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(n){return this.value.findIndex(function(e){return e.__tagId==(n||{}).__tagId})},getNodeIndex:function(n){var e=0;if(n)for(;n=n.previousElementSibling;)e++;return e},getTagElms:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r="."+Q1(this.settings.classNames.tag.split(" ")).concat(Q1(e)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(r))},getLastTag:function(){var n=this.settings.classNames,e=this.DOM.scope.querySelectorAll("".concat(n.tagSelector,":not(.").concat(n.tagHide,"):not([readonly])"));return e[e.length-1]},isTagDuplicate:function(n,e,t){var r=0;if(this.settings.mode=="select")return!1;var i=!0,a=!1,l=void 0;try{for(var d,m=this.value[Symbol.iterator]();!(i=(d=m.next()).done);i=!0){var g=d.value;nm(this.trim(""+n),g.value,e)&&t!=g.__tagId&&r++}}catch(v){a=!0,l=v}finally{try{i||m.return==null||m.return()}finally{if(a)throw l}}return r},getTagIndexByValue:function(n){var e=this,t=[],r=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(i,a){i.__tagifyTagData&&nm(e.trim(i.__tagifyTagData.value),n,r)&&t.push(a)}),t},getTagElmByValue:function(n){var e=this.getTagIndexByValue(n)[0];return this.getTagElms()[e]},flashTag:function(n){var e=this;n&&(n.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){n.classList.remove(e.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(n){return n=this.trim(n.toLowerCase()),this.settings.blacklist.filter(function(e){return(""+e).toLowerCase()==n}).length},isTagWhitelisted:function(n){return!!this.getWhitelistItem(n)},getWhitelistItem:function(n,e,t){e=e||"value";var r,i=this.settings;return(t=t||i.whitelist).some(function(a){var l=typeof a=="object"?a[e]||a.value:a;if(nm(l,n,i.dropdown.caseSensitive,i.trim))return r=typeof a=="object"?a:{value:a},!0}),r||e!="value"||i.tagTextProp=="value"||(r=this.getWhitelistItem(n,i.tagTextProp,t)),r},validateTag:function(n){var e=this.settings,t="value"in n?"value":e.tagTextProp,r=this.trim(n[t]+"");return(n[t]+"").trim()?e.mode!="mix"&&e.pattern&&ga(e.pattern,RegExp)&&!e.pattern.test(r)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(r,e.dropdown.caseSensitive,n.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(r)||e.enforceWhitelist&&!this.isTagWhitelisted(r)?this.TEXTS.notAllowed:!e.validate||e.validate(n):this.TEXTS.empty},getInvalidTagAttrs:function(n,e){return{"aria-invalid":!0,class:"".concat(n.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:e}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(n,e){var t=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),t[e||"readonly"]=n,this.DOM.scope[(n?"set":"remove")+"Attribute"](e||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!n)},setContentEditable:function(n){this.DOM.input.contentEditable=n,this.DOM.input.tabIndex=n?0:-1},setDisabled:function(n){this.setReadonly(n,"disabled")},normalizeTags:function(n){var e=this,t=this.settings,r=t.whitelist,i=t.delimiters,a=t.mode,l=t.tagTextProp,d=[],m=!!r&&ga(r[0],Object),g=Array.isArray(n),v=g&&n[0].value,_=s(function(E){return(E+"").split(i).reduce(function(C,k){var D,O=e.trim(k);return O&&C.push((eE(D={},l,O),eE(D,"value",O),D)),C},[])},"h");if(typeof n=="number"&&(n=n.toString()),typeof n=="string"){if(!n.trim())return[];n=_(n)}else g&&(n=n.reduce(function(E,C){if(Ro(C)){var k=Ar({},C);k[l]=e.trim(k[l]),k[l]&&E.push(k)}else if(C){var D;(D=E).push.apply(D,Q1(_(C)))}return E},[]));return m&&!v&&(n.forEach(function(E){var C=d.map(function(O){return O.value}),k=e.dropdown.filterListItems.call(e,E[l],{exact:!0});e.settings.duplicates||(k=k.filter(function(O){return!C.includes(O.value)}));var D=k.length>1?e.getWhitelistItem(E[l],l,k):k[0];D&&ga(D,Object)?d.push(D):a!="mix"&&(E.value==null&&(E.value=E[l]),d.push(E))}),d.length&&(n=d)),n},parseMixTags:function(n){var e=this,t=this.settings,r=t.mixTagsInterpolator,i=t.duplicates,a=t.transformTag,l=t.enforceWhitelist,d=t.maxTags,m=t.tagTextProp,g=[];n=n.split(r[0]).map(function(_,E){var C,k,D,O=_.split(r[1]),P=O[0],j=g.length==d;try{if(P==+P)throw Error;k=JSON.parse(P)}catch{k=e.normalizeTags(P)[0]||{value:P}}if(a.call(e,k),j||!(O.length>1)||l&&!e.isTagWhitelisted(k.value)||!i&&e.isTagDuplicate(k.value)){if(_)return E?r[0]+_:_}else k[C=k[m]?m:"value"]=e.trim(k[C]),D=e.createTagElem(k),g.push(k),D.classList.add(e.settings.classNames.tagNoAnimation),O[0]=D.outerHTML,e.value.push(k);return O.join("")}).join(""),this.DOM.input.innerHTML=n,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var v=this.getTagElms();return v.forEach(function(_,E){return Ln(_,g[E])}),this.update({withoutChangeEvent:!0}),y2(v,this.state.hasFocus),n},replaceTextWithNode:function(n,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var t,r,i=this.state.selection||window.getSelection(),a=i.anchorNode,l=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return a.splitText(i.anchorOffset-l),(t=a.nodeValue.lastIndexOf(e))==-1||(r=a.splitText(t),n&&a.parentNode.replaceChild(n,r)),!0}},prepareNewTagNode:function(n,e){e=e||{};var t=this.settings,r=[],i={},a=Object.assign({},n,{value:n.value+""});if(n=Object.assign({},a),t.transformTag.call(this,n),n.__isValid=this.hasMaxTags()||this.validateTag(n),n.__isValid!==!0){if(e.skipInvalid)return;if(Ar(i,this.getInvalidTagAttrs(n,n.__isValid),{__preInvalidData:a}),n.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(n.value)),!t.createInvalidTags)return void r.push(n.value)}return"readonly"in n&&(n.readonly?i["aria-readonly"]=!0:delete n.readonly),{tagElm:this.createTagElem(n,i),tagData:n,aggregatedInvalidInput:r}},postProcessNewTagNode:function(n,e){var t=this,r=this.settings,i=e.__isValid;i&&i===!0?(this.value.push(e),this.trigger("add",{tag:n,index:this.value.length-1,data:e})):(this.trigger("invalid",{data:e,index:this.value.length,tag:n,message:i}),r.keepInvalidTags||setTimeout(function(){return t.removeTags(n,!0)},1e3)),this.dropdown.position()},selectTag:function(n,e){var t=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(e.value)){this.state.actions.selectOption&&setTimeout(function(){return t.setRangeAtStartEnd(!1,t.DOM.input)});var r=this.getLastTag();return r?this.replaceTag(r,e):this.appendTag(n),this.value[0]=e,this.update(),this.trigger("add",{tag:n,data:e}),[n]}},addEmptyTag:function(n){var e=Ar({value:""},n||{}),t=this.createTagElem(e);Ln(t,e),this.appendTag(t),this.editTag(t,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(n,e,t){var r=this,i=[],a=this.settings,l=[],d=document.createDocumentFragment();if(!n||n.length==0)return i;switch(n=this.normalizeTags(n),a.mode){case"mix":return this.addMixTags(n);case"select":e=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),n.forEach(function(m){var g=r.prepareNewTagNode(m,{skipInvalid:t||a.skipInvalid});if(g){var v=g.tagElm;if(m=g.tagData,l=g.aggregatedInvalidInput,i.push(v),a.mode=="select")return r.selectTag(v,m);d.appendChild(v),r.postProcessNewTagNode(v,m)}}),this.appendTag(d),this.update(),n.length&&e&&(this.input.set.call(this,a.createInvalidTags?"":l.join(a._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),a.dropdown.enabled&&this.dropdown.refilter(),i},addMixTags:function(n){var e=this;if((n=this.normalizeTags(n))[0].prefix||this.state.tag)return this.prefixedTextToTag(n[0]);var t=document.createDocumentFragment();return n.forEach(function(r){var i=e.prepareNewTagNode(r);t.appendChild(i.tagElm),e.insertAfterTag(i.tagElm),e.postProcessNewTagNode(i.tagElm,i.tagData)}),this.appendMixTags(t),t.children},appendMixTags:function(n){var e=!!this.state.selection;e?this.injectAtCaret(n):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(n),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(n){var e,t,r,i=this,a=this.settings,l=(e=this.state.tag)===null||e===void 0?void 0:e.delimiters;if(n.prefix=n.prefix||this.state.tag?this.state.tag.prefix:(a.pattern.source||a.pattern)[0],r=this.prepareNewTagNode(n),t=r.tagElm,this.replaceTextWithNode(t)||this.DOM.input.appendChild(t),setTimeout(function(){return t.classList.add(i.settings.classNames.tagNoAnimation)},300),this.value.push(r.tagData),this.update(),!l){var d=this.insertAfterTag(t)||t;setTimeout(bl,0,d)}return this.state.tag=null,this.postProcessNewTagNode(t,r.tagData),t},appendTag:function(n){var e=this.DOM,t=e.input;e.scope.insertBefore(n,t)},createTagElem:function(n,e){n.__tagId=c2();var t,r=Ar({},n,p2({value:Rc(n.value+"")},e));return function(i){for(var a,l=document.createNodeIterator(i,NodeFilter.SHOW_TEXT,null,!1);a=l.nextNode();)a.textContent.trim()||a.parentNode.removeChild(a)}(t=this.parseTemplate("tag",[r,this])),Ln(t,n),t},reCheckInvalidTags:function(){var n=this,e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(function(t,r){var i=Ln(t),a=n.hasMaxTags(),l=n.validateTag(i),d=l===!0&&!a;if(e.mode=="select"&&n.toggleScopeValidation(l),d)return i=i.__preInvalidData?i.__preInvalidData:{value:i.value},n.replaceTag(t,i);t.title=a||l})},removeTags:function(n,e,t){var r,i=this,a=this.settings;if(n=n&&ga(n,HTMLElement)?[n]:ga(n,Array)?n:n?[n]:[this.getLastTag()].filter(function(l){return l}),r=n.reduce(function(l,d){d&&typeof d=="string"&&(d=i.getTagElmByValue(d));var m=Ln(d);return d&&m&&!m.readonly&&l.push({node:d,idx:i.getTagIdx(m),data:Ln(d,{__removed:!0})}),l},[]),t=typeof t=="number"?t:this.CSSVars.tagHideTransition,a.mode=="select"&&(t=0,this.input.set.call(this)),r.length==1&&a.mode!="select"&&r[0].node.classList.contains(a.classNames.tagNotAllowed)&&(e=!0),r.length)return a.hooks.beforeRemoveTag(r,{tagify:this}).then(function(){var l=s(function(d){d.node.parentNode&&(d.node.parentNode.removeChild(d.node),e?a.keepInvalidTags&&this.trigger("remove",{tag:d.node,index:d.idx}):(this.trigger("remove",{tag:d.node,index:d.idx,data:d.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),a.keepInvalidTags&&this.reCheckInvalidTags()))},"t");t&&t>10&&r.length==1?function(d){d.node.style.width=parseFloat(window.getComputedStyle(d.node).width)+"px",document.body.clientTop,d.node.classList.add(a.classNames.tagHide),setTimeout(l.bind(this),t,d)}.call(i,r[0]):r.forEach(l.bind(i)),e||(i.removeTagsFromValue(r.map(function(d){return d.node})),i.update(),a.mode=="select"&&a.userInput&&i.setContentEditable(!0))}).catch(function(l){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(n){return n.remove()})},removeTagsFromValue:function(n){var e=this;(n=Array.isArray(n)?n:[n]).forEach(function(t){var r=Ln(t),i=e.getTagIdx(r);i>-1&&e.value.splice(i,1)})},removeAllTags:function(n){var e=this;n=n||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){e.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(n)},postUpdate:function(){this.state.blockChangeEvent=!1;var n,e,t=this.settings,r=t.classNames,i=t.mode=="mix"?t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(r.hasMaxTags,this.value.length>=t.maxTags),this.toggleClass(r.hasNoTags,!this.value.length),this.toggleClass(r.empty,!i),t.mode=="select"&&this.toggleScopeValidation((e=this.value)===null||e===void 0||(n=e[0])===null||n===void 0?void 0:n.__isValid)},setOriginalInputValue:function(n){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=n,e.tagifyValue=e.value,this.setPersistedData(n,"value"))},update:function(n){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var e=this.getInputValue();this.setOriginalInputValue(e),this.settings.onChangeAfterBlur&&(n||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var n=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(n):n.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(n):JSON.stringify(n):""},getCleanValue:function(n){return i2(n||this.value,this.dataProps)},getMixedTagsAsString:function(){var n="",e=this,t=this.settings,r=t.originalInputValueFormat||JSON.stringify,i=t.mixTagsInterpolator;return s(function a(l){l.childNodes.forEach(function(d){if(d.nodeType==1){var m=Ln(d);if(d.tagName=="BR"&&(n+=`\r
`),m&&Mc.call(e,d)){if(m.__removed)return;n+=i[0]+r(J1(m,e.dataProps))+i[1]}else d.getAttribute("style")||["B","I","U"].includes(d.tagName)?n+=d.textContent:d.tagName!="DIV"&&d.tagName!="P"||(n+=`\r
`,a(d))}else n+=d.textContent})},"i")(this.DOM.input),n}},rm.prototype.removeTag=rm.prototype.removeTags;var im=class extends on{static{s(this,"TagFieldController")}connect(){this.tagify=new rm(this.querySelector("textarea"),this.opticons())}opticons(){let e=JSON.parse(this.dataset.tagify||"{}");return Object.assign({originalInputValueFormat:this.mapValue},e)}mapValue(e){return e.map(t=>t.value).join(",")}};var sm=class extends Vn{static{s(this,"ToggleFormsController")}connect(){this.toggler=document.getElementById(this.dataset.toggler),this.toggleTarget=document.getElementById(this.dataset.toggleTarget),this.toggler.addEventListener("change",this.onChange.bind(this),!1),this.onChange()}onChange(e){this.toggler.value==this.dataset.toggleValue?this.toggleTarget.classList.remove("hidden"):this.toggleTarget.classList.add("hidden")}};bn.register(cf);bn.register(uf);bn.register(df);bn.register(ff);bn.register(hf);bn.register(mf);bn.register(bf);bn.register(vf);bn.register(Cf);bn.register(Af);bn.register(Tf);bn.register(kf);bn.register(Of);bn.register(Lf);bn.register(If);bn.register(Df);bn.register(Pf);bn.register(qf);bn.register(Ff);bn.register(Uf);bn.register(jf);bn.register(Qh);bn.register(Jh);bn.register(em);bn.register(im);bn.register(sm);bn.start();})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.4
  Copyright  2024 37signals LLC
   *)

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)

sortablejs/modular/sortable.core.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
