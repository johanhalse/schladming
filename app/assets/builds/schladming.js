(()=>{var kT=Object.create;var Ah=Object.defineProperty;var DT=Object.getOwnPropertyDescriptor;var IT=Object.getOwnPropertyNames;var PT=Object.getPrototypeOf,RT=Object.prototype.hasOwnProperty;var s=(n,e)=>Ah(n,"name",{value:e,configurable:!0});var rs=(n,e)=>()=>(n&&(e=n(n=0)),e);var Tr=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Mp=(n,e)=>{for(var t in e)Ah(n,t,{get:e[t],enumerable:!0})},qT=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of IT(e))!RT.call(n,o)&&o!==t&&Ah(n,o,{get:()=>e[o],enumerable:!(i=DT(e,o))||i.enumerable});return n};var Jn=(n,e,t)=>(t=n!=null?kT(PT(n)):{},qT(e||!n||!n.__esModule?Ah(t,"default",{value:n,enumerable:!0}):t,n));var uo,zh=rs(()=>{uo={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var Ye,el=rs(()=>{zh();Ye={log(...n){this.enabled&&(n.push(Date.now()),uo.logger.log("[ActionCable]",...n))}}});var Pc,Uh,Rc,Wh,hm=rs(()=>{el();Pc=s(()=>new Date().getTime(),"now"),Uh=s(n=>(Pc()-n)/1e3,"secondsSince"),Rc=class{static{s(this,"ConnectionMonitor")}constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=Pc(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),Ye.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=Pc(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),Ye.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=Pc()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,Ye.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=Pc(),Ye.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,i=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),c=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*i*(1+c)}reconnectIfStale(){this.connectionIsStale()&&(Ye.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Uh(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?Ye.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Uh(this.disconnectedAt)} s`):(Ye.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Uh(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Uh(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(Ye.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Rc.staleThreshold=6;Rc.reconnectionBackoffRate=.15;Wh=Rc});var qc,dm=rs(()=>{qc={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var Bc,fm,KS,by,jc,Vh,pm=rs(()=>{zh();hm();dm();el();({message_types:Bc,protocols:fm}=qc),KS=fm.slice(0,fm.length-1),by=[].indexOf,jc=class{static{s(this,"Connection")}constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Wh(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return Ye.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...fm,...this.consumer.subprotocols||[]];return Ye.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new uo.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(Ye.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){Ye.log("Failed to reopen WebSocket",e)}finally{Ye.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return by.call(KS,this.getProtocol())>=0}isState(...e){return by.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in uo.WebSocket)if(uo.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};jc.reopenDelay=500;jc.prototype.events={message(n){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:i,reconnect:o,type:c}=JSON.parse(n.data);switch(c){case Bc.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Bc.disconnect:return Ye.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:o});case Bc.ping:return this.monitor.recordPing();case Bc.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case Bc.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(Ye.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return Ye.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(n){if(Ye.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){Ye.log("WebSocket onerror event")}};Vh=jc});var YS,da,mm=rs(()=>{YS=s(function(n,e){if(e!=null)for(let t in e){let i=e[t];n[t]=i}return n},"extend"),da=class{static{s(this,"Subscription")}constructor(e,t={},i){this.consumer=e,this.identifier=JSON.stringify(t),YS(this,i)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var gm,Zh,vm=rs(()=>{el();gm=class{static{s(this,"SubscriptionGuarantor")}constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(Ye.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):Ye.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){Ye.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{Ye.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},Zh=gm});var fa,bm=rs(()=>{mm();vm();el();fa=class{static{s(this,"Subscriptions")}constructor(e){this.consumer=e,this.guarantor=new Zh(this),this.subscriptions=[]}create(e,t){let i=e,o=typeof i=="object"?i:{channel:i},c=new da(this.consumer,o,t);return this.add(c)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(i=>this.notify(i,e,...t))}notify(e,t,...i){let o;return typeof e=="string"?o=this.findAll(e):o=[e],o.map(c=>typeof c[t]=="function"?c[t](...i):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){Ye.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:i}=e;return this.consumer.send({command:t,identifier:i})}}});function ym(n){if(typeof n=="function"&&(n=n()),n&&!/^wss?:/i.test(n)){let e=document.createElement("a");return e.href=n,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return n}var nl,yy=rs(()=>{pm();bm();nl=class{static{s(this,"Consumer")}constructor(e){this._url=e,this.subscriptions=new fa(this),this.connection=new Vh(this),this.subprotocols=[]}get url(){return ym(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}};s(ym,"createWebSocketURL")});var wy={};Mp(wy,{Connection:()=>Vh,ConnectionMonitor:()=>Wh,Consumer:()=>nl,INTERNAL:()=>qc,Subscription:()=>da,SubscriptionGuarantor:()=>Zh,Subscriptions:()=>fa,adapters:()=>uo,createConsumer:()=>GS,createWebSocketURL:()=>ym,getConfig:()=>_y,logger:()=>Ye});function GS(n=_y("url")||qc.default_mount_path){return new nl(n)}function _y(n){let e=document.head.querySelector(`meta[name='action-cable-${n}']`);if(e)return e.getAttribute("content")}var xy=rs(()=>{pm();hm();yy();dm();mm();bm();vm();zh();el();s(GS,"createConsumer");s(_y,"getConfig")});var Im=Tr((l5,Dm)=>{function r0(n,e=100,t={}){if(typeof n!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof n}\`.`);if(e<0)throw new RangeError("`wait` must not be negative.");let{immediate:i}=typeof t=="boolean"?{immediate:t}:t,o,c,d,m,v;function _(){let S=Date.now()-m;if(S<e&&S>=0)d=setTimeout(_,e-S);else if(d=void 0,!i){let O=o,M=c;o=void 0,c=void 0,v=n.apply(O,M)}}s(_,"later");let T=s(function(...S){if(o&&this!==o)throw new Error("Debounced method called with different contexts.");o=this,c=S,m=Date.now();let O=i&&!d;if(d||(d=setTimeout(_,e)),O){let M=o,D=c;o=void 0,c=void 0,v=n.apply(M,D)}return v},"debounced");return T.clear=()=>{d&&(clearTimeout(d),d=void 0)},T.flush=()=>{if(!d)return;let S=o,O=c;o=void 0,c=void 0,v=n.apply(S,O),clearTimeout(d),d=void 0},T}s(r0,"debounce");Dm.exports.debounce=r0;Dm.exports=r0});var a0=Tr((f5,o0)=>{function Pm(n,e,t){var i,o,c,d,m;e==null&&(e=100);function v(){var T=Date.now()-d;T<e&&T>=0?i=setTimeout(v,e-T):(i=null,t||(m=n.apply(c,o),c=o=null))}s(v,"later");var _=s(function(){c=this,o=arguments,d=Date.now();var T=t&&!i;return i||(i=setTimeout(v,e)),T&&(m=n.apply(c,o),c=o=null),m},"debounced");return _.clear=function(){i&&(clearTimeout(i),i=null)},_.flush=function(){i&&(m=n.apply(c,o),c=o=null,clearTimeout(i),i=null)},_}s(Pm,"debounce");Pm.debounce=Pm;o0.exports=Pm});var w0=Tr((Ad,_0)=>{(function(n,e){typeof Ad=="object"&&typeof _0<"u"?e(Ad):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Ad,function(n){"use strict";var e="1.9.4";function t(r){var l,f,g,x;for(f=1,g=arguments.length;f<g;f++){x=arguments[f];for(l in x)r[l]=x[l]}return r}s(t,"extend");var i=Object.create||function(){function r(){}return s(r,"F"),function(l){return r.prototype=l,new r}}();function o(r,l){var f=Array.prototype.slice;if(r.bind)return r.bind.apply(r,f.call(arguments,1));var g=f.call(arguments,2);return function(){return r.apply(l,g.length?g.concat(f.call(arguments)):arguments)}}s(o,"bind");var c=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++c),r._leaflet_id}s(d,"stamp");function m(r,l,f){var g,x,C,H;return H=s(function(){g=!1,x&&(C.apply(f,x),x=!1)},"later"),C=s(function(){g?x=arguments:(r.apply(f,arguments),setTimeout(H,l),g=!0)},"wrapperFn"),C}s(m,"throttle");function v(r,l,f){var g=l[1],x=l[0],C=g-x;return r===g&&f?r:((r-x)%C+C)%C+x}s(v,"wrapNum");function _(){return!1}s(_,"falseFn");function T(r,l){if(l===!1)return r;var f=Math.pow(10,l===void 0?6:l);return Math.round(r*f)/f}s(T,"formatNum");function S(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}s(S,"trim");function O(r){return S(r).split(/\s+/)}s(O,"splitWords");function M(r,l){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?i(r.options):{});for(var f in l)r.options[f]=l[f];return r.options}s(M,"setOptions");function D(r,l,f){var g=[];for(var x in r)g.push(encodeURIComponent(f?x.toUpperCase():x)+"="+encodeURIComponent(r[x]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}s(D,"getParamString");var j=/\{ *([\w_ -]+) *\}/g;function I(r,l){return r.replace(j,function(f,g){var x=l[g];if(x===void 0)throw new Error("No value provided for variable "+f);return typeof x=="function"&&(x=x(l)),x})}s(I,"template");var B=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function W(r,l){for(var f=0;f<r.length;f++)if(r[f]===l)return f;return-1}s(W,"indexOf");var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}s(X,"getPrefixed");var ct=0;function vt(r){var l=+new Date,f=Math.max(0,16-(l-ct));return ct=l+f,window.setTimeout(r,f)}s(vt,"timeoutDefer");var ht=window.requestAnimationFrame||X("RequestAnimationFrame")||vt,z=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function ot(r,l,f){if(f&&ht===vt)r.call(l);else return ht.call(window,o(r,l))}s(ot,"requestAnimFrame");function At(r){r&&z.call(window,r)}s(At,"cancelAnimFrame");var V={__proto__:null,extend:t,create:i,bind:o,get lastId(){return c},stamp:d,throttle:m,wrapNum:v,falseFn:_,formatNum:T,trim:S,splitWords:O,setOptions:M,getParamString:D,template:I,isArray:B,indexOf:W,emptyImageUrl:G,requestFn:ht,cancelFn:z,requestAnimFrame:ot,cancelAnimFrame:At};function tt(){}s(tt,"Class"),tt.extend=function(r){var l=s(function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},"NewClass"),f=l.__super__=this.prototype,g=i(f);g.constructor=l,l.prototype=g;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(l[x]=this[x]);return r.statics&&t(l,r.statics),r.includes&&(ft(r.includes),t.apply(null,[g].concat(r.includes))),t(g,r),delete g.statics,delete g.includes,g.options&&(g.options=f.options?i(f.options):{},t(g.options,r.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,H=g._initHooks.length;C<H;C++)g._initHooks[C].call(this)}},l},tt.include=function(r){var l=this.prototype.options;return t(this.prototype,r),r.options&&(this.prototype.options=l,this.mergeOptions(r.options)),this},tt.mergeOptions=function(r){return t(this.prototype.options,r),this},tt.addInitHook=function(r){var l=Array.prototype.slice.call(arguments,1),f=typeof r=="function"?r:function(){this[r].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function ft(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=B(r)?r:[r];for(var l=0;l<r.length;l++)r[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}s(ft,"checkDeprecatedMixinEvents");var lt={on:function(r,l,f){if(typeof r=="object")for(var g in r)this._on(g,r[g],l);else{r=O(r);for(var x=0,C=r.length;x<C;x++)this._on(r[x],l,f)}return this},off:function(r,l,f){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var g in r)this._off(g,r[g],l);else{r=O(r);for(var x=arguments.length===1,C=0,H=r.length;C<H;C++)x?this._off(r[C]):this._off(r[C],l,f)}return this},_on:function(r,l,f,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(r,l,f)===!1){f===this&&(f=void 0);var x={fn:l,ctx:f};g&&(x.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(x)}},_off:function(r,l,f){var g,x,C;if(this._events&&(g=this._events[r],!!g)){if(arguments.length===1){if(this._firingCount)for(x=0,C=g.length;x<C;x++)g[x].fn=_;delete this._events[r];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var H=this._listens(r,l,f);if(H!==!1){var J=g[H];this._firingCount&&(J.fn=_,this._events[r]=g=g.slice()),g.splice(H,1)}}},fire:function(r,l,f){if(!this.listens(r,f))return this;var g=t({},l,{type:r,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var x=this._events[r];if(x){this._firingCount=this._firingCount+1||1;for(var C=0,H=x.length;C<H;C++){var J=x[C],it=J.fn;J.once&&this.off(r,it,J.ctx),it.call(J.ctx||this,g)}this._firingCount--}}return f&&this._propagateEvent(g),this},listens:function(r,l,f,g){typeof r!="string"&&console.warn('"string" type argument expected');var x=l;typeof l!="function"&&(g=!!l,x=void 0,f=void 0);var C=this._events&&this._events[r];if(C&&C.length&&this._listens(r,x,f)!==!1)return!0;if(g){for(var H in this._eventParents)if(this._eventParents[H].listens(r,l,f,g))return!0}return!1},_listens:function(r,l,f){if(!this._events)return!1;var g=this._events[r]||[];if(!l)return!!g.length;f===this&&(f=void 0);for(var x=0,C=g.length;x<C;x++)if(g[x].fn===l&&g[x].ctx===f)return x;return!1},once:function(r,l,f){if(typeof r=="object")for(var g in r)this._on(g,r[g],l,!0);else{r=O(r);for(var x=0,C=r.length;x<C;x++)this._on(r[x],l,f,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var l in this._eventParents)this._eventParents[l].fire(r.type,t({layer:r.target,propagatedFrom:r.target},r),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var Tt=tt.extend(lt);function q(r,l,f){this.x=f?Math.round(r):r,this.y=f?Math.round(l):l}s(q,"Point");var Z=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(r){return this.clone()._add(P(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(P(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new q(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new q(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Z(this.x),this.y=Z(this.y),this},distanceTo:function(r){r=P(r);var l=r.x-this.x,f=r.y-this.y;return Math.sqrt(l*l+f*f)},equals:function(r){return r=P(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=P(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function P(r,l,f){return r instanceof q?r:B(r)?new q(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new q(r.x,r.y):new q(r,l,f)}s(P,"toPoint");function nt(r,l){if(r)for(var f=l?[r,l]:r,g=0,x=f.length;g<x;g++)this.extend(f[g])}s(nt,"Bounds"),nt.prototype={extend:function(r){var l,f;if(!r)return this;if(r instanceof q||typeof r[0]=="number"||"x"in r)l=f=P(r);else if(r=rt(r),l=r.min,f=r.max,!l||!f)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=f.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(r){return P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return P(this.min.x,this.max.y)},getTopRight:function(){return P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var l,f;return typeof r[0]=="number"||r instanceof q?r=P(r):r=rt(r),r instanceof nt?(l=r.min,f=r.max):l=f=r,l.x>=this.min.x&&f.x<=this.max.x&&l.y>=this.min.y&&f.y<=this.max.y},intersects:function(r){r=rt(r);var l=this.min,f=this.max,g=r.min,x=r.max,C=x.x>=l.x&&g.x<=f.x,H=x.y>=l.y&&g.y<=f.y;return C&&H},overlaps:function(r){r=rt(r);var l=this.min,f=this.max,g=r.min,x=r.max,C=x.x>l.x&&g.x<f.x,H=x.y>l.y&&g.y<f.y;return C&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var l=this.min,f=this.max,g=Math.abs(l.x-f.x)*r,x=Math.abs(l.y-f.y)*r;return rt(P(l.x-g,l.y-x),P(f.x+g,f.y+x))},equals:function(r){return r?(r=rt(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function rt(r,l){return!r||r instanceof nt?r:new nt(r,l)}s(rt,"toBounds");function ut(r,l){if(r)for(var f=l?[r,l]:r,g=0,x=f.length;g<x;g++)this.extend(f[g])}s(ut,"LatLngBounds"),ut.prototype={extend:function(r){var l=this._southWest,f=this._northEast,g,x;if(r instanceof _t)g=r,x=r;else if(r instanceof ut){if(g=r._southWest,x=r._northEast,!g||!x)return this}else return r?this.extend(Dt(r)||Lt(r)):this;return!l&&!f?(this._southWest=new _t(g.lat,g.lng),this._northEast=new _t(x.lat,x.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),f.lat=Math.max(x.lat,f.lat),f.lng=Math.max(x.lng,f.lng)),this},pad:function(r){var l=this._southWest,f=this._northEast,g=Math.abs(l.lat-f.lat)*r,x=Math.abs(l.lng-f.lng)*r;return new ut(new _t(l.lat-g,l.lng-x),new _t(f.lat+g,f.lng+x))},getCenter:function(){return new _t((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _t(this.getNorth(),this.getWest())},getSouthEast:function(){return new _t(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof _t||"lat"in r?r=Dt(r):r=Lt(r);var l=this._southWest,f=this._northEast,g,x;return r instanceof ut?(g=r.getSouthWest(),x=r.getNorthEast()):g=x=r,g.lat>=l.lat&&x.lat<=f.lat&&g.lng>=l.lng&&x.lng<=f.lng},intersects:function(r){r=Lt(r);var l=this._southWest,f=this._northEast,g=r.getSouthWest(),x=r.getNorthEast(),C=x.lat>=l.lat&&g.lat<=f.lat,H=x.lng>=l.lng&&g.lng<=f.lng;return C&&H},overlaps:function(r){r=Lt(r);var l=this._southWest,f=this._northEast,g=r.getSouthWest(),x=r.getNorthEast(),C=x.lat>l.lat&&g.lat<f.lat,H=x.lng>l.lng&&g.lng<f.lng;return C&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,l){return r?(r=Lt(r),this._southWest.equals(r.getSouthWest(),l)&&this._northEast.equals(r.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Lt(r,l){return r instanceof ut?r:new ut(r,l)}s(Lt,"toLatLngBounds");function _t(r,l,f){if(isNaN(r)||isNaN(l))throw new Error("Invalid LatLng object: ("+r+", "+l+")");this.lat=+r,this.lng=+l,f!==void 0&&(this.alt=+f)}s(_t,"LatLng"),_t.prototype={equals:function(r,l){if(!r)return!1;r=Dt(r);var f=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return f<=(l===void 0?1e-9:l)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return Vt.distance(this,Dt(r))},wrap:function(){return Vt.wrapLatLng(this)},toBounds:function(r){var l=180*r/40075017,f=l/Math.cos(Math.PI/180*this.lat);return Lt([this.lat-l,this.lng-f],[this.lat+l,this.lng+f])},clone:function(){return new _t(this.lat,this.lng,this.alt)}};function Dt(r,l,f){return r instanceof _t?r:B(r)&&typeof r[0]!="object"?r.length===3?new _t(r[0],r[1],r[2]):r.length===2?new _t(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new _t(r.lat,"lng"in r?r.lng:r.lon,r.alt):l===void 0?null:new _t(r,l,f)}s(Dt,"toLatLng");var Kt={latLngToPoint:function(r,l){var f=this.projection.project(r),g=this.scale(l);return this.transformation._transform(f,g)},pointToLatLng:function(r,l){var f=this.scale(l),g=this.transformation.untransform(r,f);return this.projection.unproject(g)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var l=this.projection.bounds,f=this.scale(r),g=this.transformation.transform(l.min,f),x=this.transformation.transform(l.max,f);return new nt(g,x)},infinite:!1,wrapLatLng:function(r){var l=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,f=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,g=r.alt;return new _t(f,l,g)},wrapLatLngBounds:function(r){var l=r.getCenter(),f=this.wrapLatLng(l),g=l.lat-f.lat,x=l.lng-f.lng;if(g===0&&x===0)return r;var C=r.getSouthWest(),H=r.getNorthEast(),J=new _t(C.lat-g,C.lng-x),it=new _t(H.lat-g,H.lng-x);return new ut(J,it)}},Vt=t({},Kt,{wrapLng:[-180,180],R:6371e3,distance:function(r,l){var f=Math.PI/180,g=r.lat*f,x=l.lat*f,C=Math.sin((l.lat-r.lat)*f/2),H=Math.sin((l.lng-r.lng)*f/2),J=C*C+Math.cos(g)*Math.cos(x)*H*H,it=2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J));return this.R*it}}),Gt=6378137,Xt={R:Gt,MAX_LATITUDE:85.0511287798,project:function(r){var l=Math.PI/180,f=this.MAX_LATITUDE,g=Math.max(Math.min(f,r.lat),-f),x=Math.sin(g*l);return new q(this.R*r.lng*l,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(r){var l=180/Math.PI;return new _t((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*l,r.x*l/this.R)},bounds:function(){var r=Gt*Math.PI;return new nt([-r,-r],[r,r])}()};function le(r,l,f,g){if(B(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=l,this._c=f,this._d=g}s(le,"Transformation"),le.prototype={transform:function(r,l){return this._transform(r.clone(),l)},_transform:function(r,l){return l=l||1,r.x=l*(this._a*r.x+this._b),r.y=l*(this._c*r.y+this._d),r},untransform:function(r,l){return l=l||1,new q((r.x/l-this._b)/this._a,(r.y/l-this._d)/this._c)}};function Se(r,l,f,g){return new le(r,l,f,g)}s(Se,"toTransformation");var fe=t({},Vt,{code:"EPSG:3857",projection:Xt,transformation:function(){var r=.5/(Math.PI*Xt.R);return Se(r,.5,-r,.5)}()}),Yt=t({},fe,{code:"EPSG:900913"});function ve(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}s(ve,"svgCreate");function Zt(r,l){var f="",g,x,C,H,J,it;for(g=0,C=r.length;g<C;g++){for(J=r[g],x=0,H=J.length;x<H;x++)it=J[x],f+=(x?"L":"M")+it.x+" "+it.y;f+=l?$.svg?"z":"x":""}return f||"M0 0"}s(Zt,"pointsToPath");var ie=document.documentElement.style,Jt="ActiveXObject"in window,Qt=Jt&&!document.addEventListener,Te="msLaunchUri"in navigator&&!("documentMode"in document),re=St("webkit"),Le=St("android"),ke=St("android 2")||St("android 3"),ze=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qe=Le&&St("Google")&&ze<537&&!("AudioNode"in window),De=!!window.opera,ye=!Te&&St("chrome"),$e=St("gecko")&&!re&&!De&&!Jt,tn=!ye&&St("safari"),me=St("phantom"),Ue="OTransition"in ie,Xe=navigator.platform.indexOf("Win")===0,Je=Jt&&"transition"in ie,qe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ke,oe="MozPerspective"in ie,Ae=!window.L_DISABLE_3D&&(Je||qe||oe)&&!Ue&&!me,It=typeof orientation<"u"||St("mobile"),ue=It&&re,hn=It&&qe,ti=!window.PointerEvent&&window.MSPointerEvent,pn=!!(window.PointerEvent||ti),Vn="ontouchstart"in window||!!window.TouchEvent,en=!window.L_NO_TOUCH&&(Vn||pn),gr=It&&De,sr=It&&$e,y=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,w=function(){var r=!1;try{var l=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return r}(),N=function(){return!!document.createElement("canvas").getContext}(),R=!!(document.createElementNS&&ve("svg").createSVGRect),Y=!!R&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Q=!R&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var l=r.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ct=navigator.platform.indexOf("Mac")===0,at=navigator.platform.indexOf("Linux")===0;function St(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}s(St,"userAgentContains");var $={ie:Jt,ielt9:Qt,edge:Te,webkit:re,android:Le,android23:ke,androidStock:Qe,opera:De,chrome:ye,gecko:$e,safari:tn,phantom:me,opera12:Ue,win:Xe,ie3d:Je,webkit3d:qe,gecko3d:oe,any3d:Ae,mobile:It,mobileWebkit:ue,mobileWebkit3d:hn,msPointer:ti,pointer:pn,touch:en,touchNative:Vn,mobileOpera:gr,mobileGecko:sr,retina:y,passiveEvents:w,canvas:N,svg:R,vml:Q,inlineSvg:Y,mac:Ct,linux:at},yt=$.msPointer?"MSPointerDown":"pointerdown",Ut=$.msPointer?"MSPointerMove":"pointermove",Ce=$.msPointer?"MSPointerUp":"pointerup",ge=$.msPointer?"MSPointerCancel":"pointercancel",Ne={touchstart:yt,touchmove:Ut,touchend:Ce,touchcancel:ge},Be={touchstart:qi,touchmove:ai,touchend:ai,touchcancel:ai},vn={},En=!1;function Zn(r,l,f){return l==="touchstart"&&xi(),Be[l]?(f=Be[l].bind(this,f),r.addEventListener(Ne[l],f,!1),f):(console.warn("wrong event specified:",l),_)}s(Zn,"addPointerListener");function Pi(r,l,f){if(!Ne[l]){console.warn("wrong event specified:",l);return}r.removeEventListener(Ne[l],f,!1)}s(Pi,"removePointerListener");function Ke(r){vn[r.pointerId]=r}s(Ke,"_globalPointerDown");function Ri(r){vn[r.pointerId]&&(vn[r.pointerId]=r)}s(Ri,"_globalPointerMove");function ei(r){delete vn[r.pointerId]}s(ei,"_globalPointerUp");function xi(){En||(document.addEventListener(yt,Ke,!0),document.addEventListener(Ut,Ri,!0),document.addEventListener(Ce,ei,!0),document.addEventListener(ge,ei,!0),En=!0)}s(xi,"_addPointerDocListener");function ai(r,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var f in vn)l.touches.push(vn[f]);l.changedTouches=[l],r(l)}}s(ai,"_handlePointer");function qi(r,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Nn(l),ai(r,l)}s(qi,"_onPointerStart");function vr(r){var l={},f,g;for(g in r)f=r[g],l[g]=f&&f.bind?f.bind(r):f;return r=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}s(vr,"makeDblclick");var Dr=200;function K(r,l){r.addEventListener("dblclick",l);var f=0,g;function x(C){if(C.detail!==1){g=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var H=Xl(C);if(!(H.some(function(it){return it instanceof HTMLLabelElement&&it.attributes.for})&&!H.some(function(it){return it instanceof HTMLInputElement||it instanceof HTMLSelectElement}))){var J=Date.now();J-f<=Dr?(g++,g===2&&l(vr(C))):g=1,f=J}}}return s(x,"simDblclick"),r.addEventListener("click",x),{dblclick:l,simDblclick:x}}s(K,"addDoubleTapListener");function pt(r,l){r.removeEventListener("dblclick",l.dblclick),r.removeEventListener("click",l.simDblclick)}s(pt,"removeDoubleTapListener");var Mt=he(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),F=he(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),et=F==="webkitTransition"||F==="OTransition"?F+"End":"transitionend";function xt(r){return typeof r=="string"?document.getElementById(r):r}s(xt,"get");function Nt(r,l){var f=r.style[l]||r.currentStyle&&r.currentStyle[l];if((!f||f==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(r,null);f=g?g[l]:null}return f==="auto"?null:f}s(Nt,"getStyle");function wt(r,l,f){var g=document.createElement(r);return g.className=l||"",f&&f.appendChild(g),g}s(wt,"create$1");function qt(r){var l=r.parentNode;l&&l.removeChild(r)}s(qt,"remove");function pe(r){for(;r.firstChild;)r.removeChild(r.firstChild)}s(pe,"empty");function Oe(r){var l=r.parentNode;l&&l.lastChild!==r&&l.appendChild(r)}s(Oe,"toFront");function nn(r){var l=r.parentNode;l&&l.firstChild!==r&&l.insertBefore(r,l.firstChild)}s(nn,"toBack");function We(r,l){if(r.classList!==void 0)return r.classList.contains(l);var f=Ee(r);return f.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(f)}s(We,"hasClass");function gt(r,l){if(r.classList!==void 0)for(var f=O(l),g=0,x=f.length;g<x;g++)r.classList.add(f[g]);else if(!We(r,l)){var C=Ee(r);_e(r,(C?C+" ":"")+l)}}s(gt,"addClass");function zt(r,l){r.classList!==void 0?r.classList.remove(l):_e(r,S((" "+Ee(r)+" ").replace(" "+l+" "," ")))}s(zt,"removeClass");function _e(r,l){r.className.baseVal===void 0?r.className=l:r.className.baseVal=l}s(_e,"setClass");function Ee(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}s(Ee,"getClass");function Ve(r,l){"opacity"in r.style?r.style.opacity=l:"filter"in r.style&&$n(r,l)}s(Ve,"setOpacity");function $n(r,l){var f=!1,g="DXImageTransform.Microsoft.Alpha";try{f=r.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),f?(f.Enabled=l!==100,f.Opacity=l):r.style.filter+=" progid:"+g+"(opacity="+l+")"}s($n,"_setOpacityIE");function he(r){for(var l=document.documentElement.style,f=0;f<r.length;f++)if(r[f]in l)return r[f];return!1}s(he,"testProp");function je(r,l,f){var g=l||new q(0,0);r.style[Mt]=($.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(f?" scale("+f+")":"")}s(je,"setTransform");function be(r,l){r._leaflet_pos=l,$.any3d?je(r,l):(r.style.left=l.x+"px",r.style.top=l.y+"px")}s(be,"setPosition");function Bn(r){return r._leaflet_pos||new q(0,0)}s(Bn,"getPosition");var ps,Xr,Me;if("onselectstart"in document)ps=s(function(){ee(window,"selectstart",Nn)},"disableTextSelection"),Xr=s(function(){Fe(window,"selectstart",Nn)},"enableTextSelection");else{var we=he(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ps=s(function(){if(we){var r=document.documentElement.style;Me=r[we],r[we]="none"}},"disableTextSelection"),Xr=s(function(){we&&(document.documentElement.style[we]=Me,Me=void 0)},"enableTextSelection")}function Jr(){ee(window,"dragstart",Nn)}s(Jr,"disableImageDrag");function Kn(){Fe(window,"dragstart",Nn)}s(Kn,"enableImageDrag");var Qr,Yn;function Ei(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(li(),Qr=r,Yn=r.style.outlineStyle,r.style.outlineStyle="none",ee(window,"keydown",li))}s(Ei,"preventOutline");function li(){Qr&&(Qr.style.outlineStyle=Yn,Qr=void 0,Yn=void 0,Fe(window,"keydown",li))}s(li,"restoreOutline");function ts(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}s(ts,"getSizedParentNode");function Ir(r){var l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}s(Ir,"getScale");var jo={__proto__:null,TRANSFORM:Mt,TRANSITION:F,TRANSITION_END:et,get:xt,getStyle:Nt,create:wt,remove:qt,empty:pe,toFront:Oe,toBack:nn,hasClass:We,addClass:gt,removeClass:zt,setClass:_e,getClass:Ee,setOpacity:Ve,testProp:he,setTransform:je,setPosition:be,getPosition:Bn,get disableTextSelection(){return ps},get enableTextSelection(){return Xr},disableImageDrag:Jr,enableImageDrag:Kn,preventOutline:Ei,restoreOutline:li,getSizedParentNode:ts,getScale:Ir};function ee(r,l,f,g){if(l&&typeof l=="object")for(var x in l)es(r,x,l[x],f);else{l=O(l);for(var C=0,H=l.length;C<H;C++)es(r,l[C],f,g)}return this}s(ee,"on");var Ln="_leaflet_events";function Fe(r,l,f,g){if(arguments.length===1)ms(r),delete r[Ln];else if(l&&typeof l=="object")for(var x in l)ni(r,x,l[x],f);else if(l=O(l),arguments.length===2)ms(r,function(J){return W(l,J)!==-1});else for(var C=0,H=l.length;C<H;C++)ni(r,l[C],f,g);return this}s(Fe,"off");function ms(r,l){for(var f in r[Ln]){var g=f.split(/\d/)[0];(!l||l(g))&&ni(r,g,null,null,f)}}s(ms,"batchRemove");var gs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function es(r,l,f,g){var x=l+d(f)+(g?"_"+d(g):"");if(r[Ln]&&r[Ln][x])return this;var C=s(function(J){return f.call(g||r,J||window.event)},"handler"),H=C;!$.touchNative&&$.pointer&&l.indexOf("touch")===0?C=Zn(r,l,C):$.touch&&l==="dblclick"?C=K(r,C):"addEventListener"in r?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?r.addEventListener(gs[l]||l,C,$.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(C=s(function(J){J=J||window.event,Zs(r,J)&&H(J)},"handler"),r.addEventListener(gs[l],C,!1)):r.addEventListener(l,H,!1):r.attachEvent("on"+l,C),r[Ln]=r[Ln]||{},r[Ln][x]=C}s(es,"addOne");function ni(r,l,f,g,x){x=x||l+d(f)+(g?"_"+d(g):"");var C=r[Ln]&&r[Ln][x];if(!C)return this;!$.touchNative&&$.pointer&&l.indexOf("touch")===0?Pi(r,l,C):$.touch&&l==="dblclick"?pt(r,C):"removeEventListener"in r?r.removeEventListener(gs[l]||l,C,!1):r.detachEvent("on"+l,C),r[Ln][x]=null}s(ni,"removeOne");function Ft(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}s(Ft,"stopPropagation");function jn(r){return es(r,"wheel",Ft),this}s(jn,"disableScrollPropagation");function ii(r){return ee(r,"mousedown touchstart dblclick contextmenu",Ft),r._leaflet_disable_click=!0,this}s(ii,"disableClickPropagation");function Nn(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}s(Nn,"preventDefault");function Bi(r){return Nn(r),Ft(r),this}s(Bi,"stop");function Xl(r){if(r.composedPath)return r.composedPath();for(var l=[],f=r.target;f;)l.push(f),f=f.parentNode;return l}s(Xl,"getPropagationPath");function ji(r,l){if(!l)return new q(r.clientX,r.clientY);var f=Ir(l),g=f.boundingClientRect;return new q((r.clientX-g.left)/f.x-l.clientLeft,(r.clientY-g.top)/f.y-l.clientTop)}s(ji,"getMousePosition");var Jl=$.linux&&$.chrome?window.devicePixelRatio:$.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pr(r){return $.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Jl:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}s(Pr,"getWheelDelta");function Zs(r,l){var f=l.relatedTarget;if(!f)return!0;try{for(;f&&f!==r;)f=f.parentNode}catch{return!1}return f!==r}s(Zs,"isExternalTarget");var ih={__proto__:null,on:ee,off:Fe,stopPropagation:Ft,disableScrollPropagation:jn,disableClickPropagation:ii,preventDefault:Nn,stop:Bi,getPropagationPath:Xl,getMousePosition:ji,getWheelDelta:Pr,isExternalTarget:Zs,addListener:ee,removeListener:Fe},Ql=Tt.extend({run:function(r,l,f,g){this.stop(),this._el=r,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=Bn(r),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ot(this._animate,this),this._step()},_step:function(r){var l=+new Date-this._startTime,f=this._duration*1e3;l<f?this._runFrame(this._easeOut(l/f),r):(this._runFrame(1),this._complete())},_runFrame:function(r,l){var f=this._startPos.add(this._offset.multiplyBy(r));l&&f._round(),be(this._el,f),this.fire("step")},_complete:function(){At(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),xe=Tt.extend({options:{crs:fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,l){l=M(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Dt(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=F&&$.any3d&&!$.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ee(this._proxy,et,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,l,f){if(l=l===void 0?this._zoom:this._limitZoom(l),r=this._limitCenter(Dt(r),l,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=t({animate:f.animate},f.zoom),f.pan=t({animate:f.animate,duration:f.duration},f.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,l,f.zoom):this._tryAnimatedPan(r,f.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(r,l,f.pan&&f.pan.noMoveStart),this},setZoom:function(r,l){return this._loaded?this.setView(this.getCenter(),r,{zoom:l}):(this._zoom=r,this)},zoomIn:function(r,l){return r=r||($.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,l)},zoomOut:function(r,l){return r=r||($.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,l)},setZoomAround:function(r,l,f){var g=this.getZoomScale(l),x=this.getSize().divideBy(2),C=r instanceof q?r:this.latLngToContainerPoint(r),H=C.subtract(x).multiplyBy(1-1/g),J=this.containerPointToLatLng(x.add(H));return this.setView(J,l,{zoom:f})},_getBoundsCenterZoom:function(r,l){l=l||{},r=r.getBounds?r.getBounds():Lt(r);var f=P(l.paddingTopLeft||l.padding||[0,0]),g=P(l.paddingBottomRight||l.padding||[0,0]),x=this.getBoundsZoom(r,!1,f.add(g));if(x=typeof l.maxZoom=="number"?Math.min(l.maxZoom,x):x,x===1/0)return{center:r.getCenter(),zoom:x};var C=g.subtract(f).divideBy(2),H=this.project(r.getSouthWest(),x),J=this.project(r.getNorthEast(),x),it=this.unproject(H.add(J).divideBy(2).add(C),x);return{center:it,zoom:x}},fitBounds:function(r,l){if(r=Lt(r),!r.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(r,l);return this.setView(f.center,f.zoom,l)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,l){return this.setView(r,this._zoom,{pan:l})},panBy:function(r,l){if(r=P(r).round(),l=l||{},!r.x&&!r.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ql,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){gt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,f,l.duration||.25,l.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,l,f){if(f=f||{},f.animate===!1||!$.any3d)return this.setView(r,l,f);this._stop();var g=this.project(this.getCenter()),x=this.project(r),C=this.getSize(),H=this._zoom;r=Dt(r),l=l===void 0?H:l;var J=Math.max(C.x,C.y),it=J*this.getZoomScale(H,l),bt=x.distanceTo(g)||1,Pt=1.42,te=Pt*Pt;function de(bn){var Va=bn?-1:1,dp=bn?it:J,fp=it*it-J*J+Va*te*te*bt*bt,to=2*dp*te*bt,eo=fp/to,mt=Math.sqrt(eo*eo+1)-eo,yh=mt<1e-9?-18:Math.log(mt);return yh}s(de,"r");function Xn(bn){return(Math.exp(bn)-Math.exp(-bn))/2}s(Xn,"sinh");function Sn(bn){return(Math.exp(bn)+Math.exp(-bn))/2}s(Sn,"cosh");function Ui(bn){return Xn(bn)/Sn(bn)}s(Ui,"tanh");var on=de(0);function Hr(bn){return J*(Sn(on)/Sn(on+Pt*bn))}s(Hr,"w");function yc(bn){return J*(Sn(on)*Ui(on+Pt*bn)-Xn(on))/te}s(yc,"u");function up(bn){return 1-Math.pow(1-bn,1.5)}s(up,"easeOut");var _c=Date.now(),ea=(de(1)-on)/Pt,hp=f.duration?1e3*f.duration:1e3*ea*.8;function na(){var bn=(Date.now()-_c)/hp,Va=up(bn)*ea;bn<=1?(this._flyToFrame=ot(na,this),this._move(this.unproject(g.add(x.subtract(g).multiplyBy(yc(Va)/bt)),H),this.getScaleZoom(J/Hr(Va),H),{flyTo:!0})):this._move(r,l)._moveEnd(!0)}return s(na,"frame"),this._moveStart(!0,f.noMoveStart),na.call(this),this},flyToBounds:function(r,l){var f=this._getBoundsCenterZoom(r,l);return this.flyTo(f.center,f.zoom,l)},setMaxBounds:function(r){return r=Lt(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var l=this.options.minZoom;return this.options.minZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var l=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,l){this._enforcingBounds=!0;var f=this.getCenter(),g=this._limitCenter(f,this._zoom,Lt(r));return f.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(r,l){l=l||{};var f=P(l.paddingTopLeft||l.padding||[0,0]),g=P(l.paddingBottomRight||l.padding||[0,0]),x=this.project(this.getCenter()),C=this.project(r),H=this.getPixelBounds(),J=rt([H.min.add(f),H.max.subtract(g)]),it=J.getSize();if(!J.contains(C)){this._enforcingBounds=!0;var bt=C.subtract(J.getCenter()),Pt=J.extend(C).getSize().subtract(it);x.x+=bt.x<0?-Pt.x:Pt.x,x.y+=bt.y<0?-Pt.y:Pt.y,this.panTo(this.unproject(x),l),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=t({animate:!1,pan:!0},r===!0?{animate:!0}:r);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),g=l.divideBy(2).round(),x=f.divideBy(2).round(),C=g.subtract(x);return!C.x&&!C.y?this:(r.animate&&r.pan?this.panBy(C):(r.pan&&this._rawPanBy(C),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=t({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,f,r):navigator.geolocation.getCurrentPosition(l,f,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var l=r.code,f=r.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var l=r.coords.latitude,f=r.coords.longitude,g=new _t(l,f),x=g.toBounds(r.coords.accuracy*2),C=this._locateOptions;if(C.setView){var H=this.getBoundsZoom(x);this.setView(g,C.maxZoom?Math.min(H,C.maxZoom):H)}var J={latlng:g,bounds:x,timestamp:r.timestamp};for(var it in r.coords)typeof r.coords[it]=="number"&&(J[it]=r.coords[it]);this.fire("locationfound",J)}},addHandler:function(r,l){if(!l)return this;var f=this[r]=new l(this);return this._handlers.push(f),this.options[r]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(At(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)qt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,l){var f="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),g=wt("div",f,l||this._mapPane);return r&&(this._panes[r]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),l=this.unproject(r.getBottomLeft()),f=this.unproject(r.getTopRight());return new ut(l,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,l,f){r=Lt(r),f=P(f||[0,0]);var g=this.getZoom()||0,x=this.getMinZoom(),C=this.getMaxZoom(),H=r.getNorthWest(),J=r.getSouthEast(),it=this.getSize().subtract(f),bt=rt(this.project(J,g),this.project(H,g)).getSize(),Pt=$.any3d?this.options.zoomSnap:1,te=it.x/bt.x,de=it.y/bt.y,Xn=l?Math.max(te,de):Math.min(te,de);return g=this.getScaleZoom(Xn,g),Pt&&(g=Math.round(g/(Pt/100))*(Pt/100),g=l?Math.ceil(g/Pt)*Pt:Math.floor(g/Pt)*Pt),Math.max(x,Math.min(C,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,l){var f=this._getTopLeftPoint(r,l);return new nt(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,l){var f=this.options.crs;return l=l===void 0?this._zoom:l,f.scale(r)/f.scale(l)},getScaleZoom:function(r,l){var f=this.options.crs;l=l===void 0?this._zoom:l;var g=f.zoom(r*f.scale(l));return isNaN(g)?1/0:g},project:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Dt(r),l)},unproject:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(P(r),l)},layerPointToLatLng:function(r){var l=P(r).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(r){var l=this.project(Dt(r))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(Dt(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Lt(r))},distance:function(r,l){return this.options.crs.distance(Dt(r),Dt(l))},containerPointToLayerPoint:function(r){return P(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return P(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var l=this.containerPointToLayerPoint(P(r));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Dt(r)))},mouseEventToContainerPoint:function(r){return ji(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var l=this._container=xt(r);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ee(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&$.any3d,gt(r,"leaflet-container"+($.touch?" leaflet-touch":"")+($.retina?" leaflet-retina":"")+($.ielt9?" leaflet-oldie":"")+($.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Nt(r,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),be(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(gt(r.markerPane,"leaflet-zoom-hide"),gt(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,l,f){be(this._mapPane,new q(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var x=this._zoom!==l;this._moveStart(x,f)._move(r,l)._moveEnd(x),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(r,l){return r&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(r,l,f,g){l===void 0&&(l=this._zoom);var x=this._zoom!==l;return this._zoom=l,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),g?f&&f.pinch&&this.fire("zoom",f):((x||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return At(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){be(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var l=r?Fe:ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),$.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){At(this._resizeRequest),this._resizeRequest=ot(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,l){for(var f=[],g,x=l==="mouseout"||l==="mouseover",C=r.target||r.srcElement,H=!1;C;){if(g=this._targets[d(C)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){H=!0;break}if(g&&g.listens(l,!0)&&(x&&!Zs(C,r)||(f.push(g),x))||C===this._container)break;C=C.parentNode}return!f.length&&!H&&!x&&this.listens(l,!0)&&(f=[this]),f},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var l=r.target||r.srcElement;if(!(!this._loaded||l._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(l))){var f=r.type;f==="mousedown"&&Ei(l),this._fireDOMEvent(r,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,l,f){if(r.type==="click"){var g=t({},r);g.type="preclick",this._fireDOMEvent(g,g.type,f)}var x=this._findEventTargets(r,l);if(f){for(var C=[],H=0;H<f.length;H++)f[H].listens(l,!0)&&C.push(f[H]);x=C.concat(x)}if(x.length){l==="contextmenu"&&Nn(r);var J=x[0],it={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var bt=J.getLatLng&&(!J._radius||J._radius<=10);it.containerPoint=bt?this.latLngToContainerPoint(J.getLatLng()):this.mouseEventToContainerPoint(r),it.layerPoint=this.containerPointToLayerPoint(it.containerPoint),it.latlng=bt?J.getLatLng():this.layerPointToLatLng(it.layerPoint)}for(H=0;H<x.length;H++)if(x[H].fire(l,it,!0),it.originalEvent._stopped||x[H].options.bubblingMouseEvents===!1&&W(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,l=this._handlers.length;r<l;r++)this._handlers[r].disable()},whenReady:function(r,l){return this._loaded?r.call(l||this,{target:this}):this.on("load",r,l),this},_getMapPanePos:function(){return Bn(this._mapPane)||new q(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,l){var f=r&&l!==void 0?this._getNewPixelOrigin(r,l):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,l){var f=this.getSize()._divideBy(2);return this.project(r,l)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,l,f){var g=this._getNewPixelOrigin(f,l);return this.project(r,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(r,l,f){var g=this._getNewPixelOrigin(f,l);return rt([this.project(r.getSouthWest(),l)._subtract(g),this.project(r.getNorthWest(),l)._subtract(g),this.project(r.getSouthEast(),l)._subtract(g),this.project(r.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,l,f){if(!f)return r;var g=this.project(r,l),x=this.getSize().divideBy(2),C=new nt(g.subtract(x),g.add(x)),H=this._getBoundsOffset(C,f,l);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?r:this.unproject(g.add(H),l)},_limitOffset:function(r,l){if(!l)return r;var f=this.getPixelBounds(),g=new nt(f.min.add(r),f.max.add(r));return r.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(r,l,f){var g=rt(this.project(l.getNorthEast(),f),this.project(l.getSouthWest(),f)),x=g.min.subtract(r.min),C=g.max.subtract(r.max),H=this._rebound(x.x,-C.x),J=this._rebound(x.y,-C.y);return new q(H,J)},_rebound:function(r,l){return r+l>0?Math.round(r-l)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(l))},_limitZoom:function(r){var l=this.getMinZoom(),f=this.getMaxZoom(),g=$.any3d?this.options.zoomSnap:1;return g&&(r=Math.round(r/g)*g),Math.max(l,Math.min(f,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,l){var f=this._getCenterOffset(r)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,l),!0)},_createAnimProxy:function(){var r=this._proxy=wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(l){var f=Mt,g=this._proxy.style[f];je(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),l=this.getZoom();je(this._proxy,this.project(r,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,l,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),x=this._getCenterOffset(r)._divideBy(1-1/g);return f.animate!==!0&&!this.getSize().contains(x)?!1:(ot(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(r,l,!0)},this),!0)},_animateZoom:function(r,l,f,g){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=l,gt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Gn(r,l){return new xe(r,l)}s(Gn,"createMap");var or=tt.extend({options:{position:"topright"},initialize:function(r){M(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var l=this._map;return l&&l.removeControl(this),this.options.position=r,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var l=this._container=this.onAdd(r),f=this.getPosition(),g=r._controlCorners[f];return gt(l,"leaflet-control"),f.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),$s=s(function(r){return new or(r)},"control");xe.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},l="leaflet-",f=this._controlContainer=wt("div",l+"control-container",this._container);function g(x,C){var H=l+x+" "+l+C;r[x+C]=wt("div",H,f)}s(g,"createCorner"),g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)qt(this._controlCorners[r]);qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var tc=or.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,l,f,g){return f<g?-1:g<f?1:0}},initialize:function(r,l,f){M(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in r)this._addLayer(r[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return or.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,l){return this._addLayer(r,l),this._map?this._update():this},addOverlay:function(r,l){return this._addLayer(r,l,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(r));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){gt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(gt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",l=this._container=wt("div",r),f=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ii(l),jn(l);var g=this._section=wt("section",r+"-list");f&&(this._map.on("click",this.collapse,this),ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=wt("a",r+"-toggle",l);x.href="#",x.title="Layers",x.setAttribute("role","button"),ee(x,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){Nn(C),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=wt("div",r+"-base",g),this._separator=wt("div",r+"-separator",g),this._overlaysList=wt("div",r+"-overlays",g),l.appendChild(g)},_getLayer:function(r){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===r)return this._layers[l]},_addLayer:function(r,l,f){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:l,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(g,x){return this.options.sortFunction(g.layer,x.layer,g.name,x.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pe(this._baseLayersList),pe(this._overlaysList),this._layerControlInputs=[];var r,l,f,g,x=0;for(f=0;f<this._layers.length;f++)g=this._layers[f],this._addItem(g),l=l||g.overlay,r=r||!g.overlay,x+=g.overlay?0:1;return this.options.hideSingleBase&&(r=r&&x>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=l&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var l=this._getLayer(d(r.target)),f=l.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;f&&this._map.fire(f,l)},_createRadioElement:function(r,l){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=f,g.firstChild},_addItem:function(r){var l=document.createElement("label"),f=this._map.hasLayer(r.layer),g;r.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=f):g=this._createRadioElement("leaflet-base-layers_"+d(this),f),this._layerControlInputs.push(g),g.layerId=d(r.layer),ee(g,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+r.name;var C=document.createElement("span");l.appendChild(C),C.appendChild(g),C.appendChild(x);var H=r.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,l,f,g=[],x=[];this._handlingClick=!0;for(var C=r.length-1;C>=0;C--)l=r[C],f=this._getLayer(l.layerId).layer,l.checked?g.push(f):l.checked||x.push(f);for(C=0;C<x.length;C++)this._map.hasLayer(x[C])&&this._map.removeLayer(x[C]);for(C=0;C<g.length;C++)this._map.hasLayer(g[C])||this._map.addLayer(g[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,l,f,g=this._map.getZoom(),x=r.length-1;x>=0;x--)l=r[x],f=this._getLayer(l.layerId).layer,l.disabled=f.options.minZoom!==void 0&&g<f.options.minZoom||f.options.maxZoom!==void 0&&g>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ee(r,"click",Nn),this.expand();var l=this;setTimeout(function(){Fe(r,"click",Nn),l._preventClick=!1})}}),ar=s(function(r,l,f){return new tc(r,l,f)},"layers"),ns=or.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var l="leaflet-control-zoom",f=wt("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",f,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,l,f,g,x){var C=wt("a",f,g);return C.innerHTML=r,C.href="#",C.title=l,C.setAttribute("role","button"),C.setAttribute("aria-label",l),ii(C),ee(C,"click",Bi),ee(C,"click",x,this),ee(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var r=this._map,l="leaflet-disabled";zt(this._zoomInButton,l),zt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(gt(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(gt(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});xe.mergeOptions({zoomControl:!0}),xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ns,this.addControl(this.zoomControl))});var ec=s(function(r){return new ns(r)},"zoom"),vs=or.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var l="leaflet-control-scale",f=wt("div",l),g=this.options;return this._addScales(g,l+"-line",f),r.on(g.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),f},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,l,f){r.metric&&(this._mScale=wt("div",l,f)),r.imperial&&(this._iScale=wt("div",l,f))},_update:function(){var r=this._map,l=r.getSize().y/2,f=r.distance(r.containerPointToLatLng([0,l]),r.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(f)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var l=this._getRoundNum(r),f=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,f,l/r)},_updateImperial:function(r){var l=r*3.2808399,f,g,x;l>5280?(f=l/5280,g=this._getRoundNum(f),this._updateScale(this._iScale,g+" mi",g/f)):(x=this._getRoundNum(l),this._updateScale(this._iScale,x+" ft",x/l))},_updateScale:function(r,l,f){r.style.width=Math.round(this.options.maxWidth*f)+"px",r.innerHTML=l},_getRoundNum:function(r){var l=Math.pow(10,(Math.floor(r)+"").length-1),f=r/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,l*f}}),Fo=s(function(r){return new vs(r)},"scale"),nc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ks=or.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($.inlineSvg?nc+" ":"")+"Leaflet</a>"},initialize:function(r){M(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=wt("div","leaflet-control-attribution"),ii(this._container);for(var l in r._layers)r._layers[l].getAttribution&&this.addAttribution(r._layers[l].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var l in this._attributions)this._attributions[l]&&r.push(l);var f=[];this.options.prefix&&f.push(this.options.prefix),r.length&&f.push(r.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});xe.mergeOptions({attributionControl:!0}),xe.addInitHook(function(){this.options.attributionControl&&new Ks().addTo(this)});var Ti=s(function(r){return new Ks(r)},"attribution");or.Layers=tc,or.Zoom=ns,or.Scale=vs,or.Attribution=Ks,$s.layers=ar,$s.zoom=ec,$s.scale=Fo,$s.attribution=Ti;var br=tt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});br.addTo=function(r,l){return r.addHandler(l,this),this};var Ys={Events:lt},Ra=$.touch?"touchstart mousedown":"mousedown",yr=Tt.extend({options:{clickTolerance:3},initialize:function(r,l,f,g){M(this,g),this._element=r,this._dragStartTarget=l||r,this._preventOutline=f},enable:function(){this._enabled||(ee(this._dragStartTarget,Ra,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yr._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,Ra,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!We(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){yr._dragging===this&&this.finishDrag();return}if(!(yr._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(yr._dragging=this,this._preventOutline&&Ei(this._element),Jr(),ps(),!this._moving)){this.fire("down");var l=r.touches?r.touches[0]:r,f=ts(this._element);this._startPoint=new q(l.clientX,l.clientY),this._startPos=Bn(this._element),this._parentScale=Ir(f);var g=r.type==="mousedown";ee(document,g?"mousemove":"touchmove",this._onMove,this),ee(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var l=r.touches&&r.touches.length===1?r.touches[0]:r,f=new q(l.clientX,l.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Nn(r),this._moved||(this.fire("dragstart"),this._moved=!0,gt(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),gt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),be(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),Kn(),Xr();var l=this._moved&&this._moving;this._moving=!1,yr._dragging=!1,l&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Ho(r,l,f){var g,x=[1,4,2,8],C,H,J,it,bt,Pt,te,de;for(C=0,Pt=r.length;C<Pt;C++)r[C]._code=Rr(r[C],l);for(J=0;J<4;J++){for(te=x[J],g=[],C=0,Pt=r.length,H=Pt-1;C<Pt;H=C++)it=r[C],bt=r[H],it._code&te?bt._code&te||(de=zo(bt,it,te,l,f),de._code=Rr(de,l),g.push(de)):(bt._code&te&&(de=zo(bt,it,te,l,f),de._code=Rr(de,l),g.push(de)),g.push(it));r=g}return r}s(Ho,"clipPolygon");function Rt(r,l){var f,g,x,C,H,J,it,bt,Pt;if(!r||r.length===0)throw new Error("latlngs not passed");Si(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var te=Dt([0,0]),de=Lt(r),Xn=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Xn<1700&&(te=ic(r));var Sn=r.length,Ui=[];for(f=0;f<Sn;f++){var on=Dt(r[f]);Ui.push(l.project(Dt([on.lat-te.lat,on.lng-te.lng])))}for(J=it=bt=0,f=0,g=Sn-1;f<Sn;g=f++)x=Ui[f],C=Ui[g],H=x.y*C.x-C.y*x.x,it+=(x.x+C.x)*H,bt+=(x.y+C.y)*H,J+=H*3;J===0?Pt=Ui[0]:Pt=[it/J,bt/J];var Hr=l.unproject(P(Pt));return Dt([Hr.lat+te.lat,Hr.lng+te.lng])}s(Rt,"polygonCenter");function ic(r){for(var l=0,f=0,g=0,x=0;x<r.length;x++){var C=Dt(r[x]);l+=C.lat,f+=C.lng,g++}return Dt([l/g,f/g])}s(ic,"centroid");var Yf={__proto__:null,clipPolygon:Ho,polygonCenter:Rt,centroid:ic};function rh(r,l){if(!l||!r.length)return r.slice();var f=l*l;return r=Xf(r,f),r=Gf(r,f),r}s(rh,"simplify");function sh(r,l,f){return Math.sqrt(Gs(r,l,f,!0))}s(sh,"pointToSegmentDistance");function rc(r,l,f){return Gs(r,l,f)}s(rc,"closestPointOnSegment");function Gf(r,l){var f=r.length,g=typeof Uint8Array<"u"?Uint8Array:Array,x=new g(f);x[0]=x[f-1]=1,sc(r,x,l,0,f-1);var C,H=[];for(C=0;C<f;C++)x[C]&&H.push(r[C]);return H}s(Gf,"_simplifyDP");function sc(r,l,f,g,x){var C=0,H,J,it;for(J=g+1;J<=x-1;J++)it=Gs(r[J],r[g],r[x],!0),it>C&&(H=J,C=it);C>f&&(l[H]=1,sc(r,l,f,g,H),sc(r,l,f,H,x))}s(sc,"_simplifyDPStep");function Xf(r,l){for(var f=[r[0]],g=1,x=0,C=r.length;g<C;g++)Jf(r[g],r[x])>l&&(f.push(r[g]),x=g);return x<C-1&&f.push(r[C-1]),f}s(Xf,"_reducePoints");var oc;function oh(r,l,f,g,x){var C=g?oc:Rr(r,f),H=Rr(l,f),J,it,bt;for(oc=H;;){if(!(C|H))return[r,l];if(C&H)return!1;J=C||H,it=zo(r,l,J,f,x),bt=Rr(it,f),J===C?(r=it,C=bt):(l=it,H=bt)}}s(oh,"clipSegment");function zo(r,l,f,g,x){var C=l.x-r.x,H=l.y-r.y,J=g.min,it=g.max,bt,Pt;return f&8?(bt=r.x+C*(it.y-r.y)/H,Pt=it.y):f&4?(bt=r.x+C*(J.y-r.y)/H,Pt=J.y):f&2?(bt=it.x,Pt=r.y+H*(it.x-r.x)/C):f&1&&(bt=J.x,Pt=r.y+H*(J.x-r.x)/C),new q(bt,Pt,x)}s(zo,"_getEdgeIntersection");function Rr(r,l){var f=0;return r.x<l.min.x?f|=1:r.x>l.max.x&&(f|=2),r.y<l.min.y?f|=4:r.y>l.max.y&&(f|=8),f}s(Rr,"_getBitCode");function Jf(r,l){var f=l.x-r.x,g=l.y-r.y;return f*f+g*g}s(Jf,"_sqDist");function Gs(r,l,f,g){var x=l.x,C=l.y,H=f.x-x,J=f.y-C,it=H*H+J*J,bt;return it>0&&(bt=((r.x-x)*H+(r.y-C)*J)/it,bt>1?(x=f.x,C=f.y):bt>0&&(x+=H*bt,C+=J*bt)),H=r.x-x,J=r.y-C,g?H*H+J*J:new q(x,C)}s(Gs,"_sqClosestPointOnSegment");function Si(r){return!B(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}s(Si,"isFlat");function ah(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Si(r)}s(ah,"_flat");function ac(r,l){var f,g,x,C,H,J,it,bt;if(!r||r.length===0)throw new Error("latlngs not passed");Si(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Pt=Dt([0,0]),te=Lt(r),de=te.getNorthWest().distanceTo(te.getSouthWest())*te.getNorthEast().distanceTo(te.getNorthWest());de<1700&&(Pt=ic(r));var Xn=r.length,Sn=[];for(f=0;f<Xn;f++){var Ui=Dt(r[f]);Sn.push(l.project(Dt([Ui.lat-Pt.lat,Ui.lng-Pt.lng])))}for(f=0,g=0;f<Xn-1;f++)g+=Sn[f].distanceTo(Sn[f+1])/2;if(g===0)bt=Sn[0];else for(f=0,C=0;f<Xn-1;f++)if(H=Sn[f],J=Sn[f+1],x=H.distanceTo(J),C+=x,C>g){it=(C-g)/x,bt=[J.x-it*(J.x-H.x),J.y-it*(J.y-H.y)];break}var on=l.unproject(P(bt));return Dt([on.lat+Pt.lat,on.lng+Pt.lng])}s(ac,"polylineCenter");var lc={__proto__:null,simplify:rh,pointToSegmentDistance:sh,closestPointOnSegment:rc,clipSegment:oh,_getEdgeIntersection:zo,_getBitCode:Rr,_sqClosestPointOnSegment:Gs,isFlat:Si,_flat:ah,polylineCenter:ac},cc={project:function(r){return new q(r.lng,r.lat)},unproject:function(r){return new _t(r.y,r.x)},bounds:new nt([-180,-90],[180,90])},Uo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new nt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var l=Math.PI/180,f=this.R,g=r.lat*l,x=this.R_MINOR/f,C=Math.sqrt(1-x*x),H=C*Math.sin(g),J=Math.tan(Math.PI/4-g/2)/Math.pow((1-H)/(1+H),C/2);return g=-f*Math.log(Math.max(J,1e-10)),new q(r.lng*l*f,g)},unproject:function(r){for(var l=180/Math.PI,f=this.R,g=this.R_MINOR/f,x=Math.sqrt(1-g*g),C=Math.exp(-r.y/f),H=Math.PI/2-2*Math.atan(C),J=0,it=.1,bt;J<15&&Math.abs(it)>1e-7;J++)bt=x*Math.sin(H),bt=Math.pow((1-bt)/(1+bt),x/2),it=Math.PI/2-2*Math.atan(C*bt)-H,H+=it;return new _t(H*l,r.x*l/f)}},uc={__proto__:null,LonLat:cc,Mercator:Uo,SphericalMercator:Xt},hc=t({},Vt,{code:"EPSG:3395",projection:Uo,transformation:function(){var r=.5/(Math.PI*Uo.R);return Se(r,.5,-r,.5)}()}),qa=t({},Vt,{code:"EPSG:4326",projection:cc,transformation:Se(1/180,1,-1/180,.5)}),lh=t({},Kt,{projection:cc,transformation:Se(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,l){var f=l.lng-r.lng,g=l.lat-r.lat;return Math.sqrt(f*f+g*g)},infinite:!0});Kt.Earth=Vt,Kt.EPSG3395=hc,Kt.EPSG3857=fe,Kt.EPSG900913=Yt,Kt.EPSG4326=qa,Kt.Simple=lh;var Fi=Tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var l=r.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var f=this.getEvents();l.on(f,this),this.once("remove",function(){l.off(f,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});xe.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(r);return this._layers[l]?this:(this._layers[l]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var l=d(r);return this._layers[l]?(this._loaded&&r.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,l){for(var f in this._layers)r.call(l,this._layers[f]);return this},_addLayers:function(r){r=r?B(r)?r:[r]:[];for(var l=0,f=r.length;l<f;l++)this.addLayer(r[l])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var l=d(r);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,l=-1/0,f=this._getZoomSpan();for(var g in this._zoomBoundLayers){var x=this._zoomBoundLayers[g].options;r=x.minZoom===void 0?r:Math.min(r,x.minZoom),l=x.maxZoom===void 0?l:Math.max(l,x.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=r===1/0?void 0:r,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bs=Fi.extend({initialize:function(r,l){M(this,l),this._layers={};var f,g;if(r)for(f=0,g=r.length;f<g;f++)this.addLayer(r[f])},addLayer:function(r){var l=this.getLayerId(r);return this._layers[l]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var l=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(r){var l=typeof r=="number"?r:this.getLayerId(r);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var l=Array.prototype.slice.call(arguments,1),f,g;for(f in this._layers)g=this._layers[f],g[r]&&g[r].apply(g,l);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,l){for(var f in this._layers)r.call(l,this._layers[f]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),ch=s(function(r,l){return new bs(r,l)},"layerGroup"),_r=bs.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),bs.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),bs.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new ut;for(var l in this._layers){var f=this._layers[l];r.extend(f.getBounds?f.getBounds():f.getLatLng())}return r}}),Qf=s(function(r,l){return new _r(r,l)},"featureGroup"),Xs=tt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){M(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,l){var f=this._getIconUrl(r);if(!f){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(f,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(r,l){var f=this.options,g=f[l+"Size"];typeof g=="number"&&(g=[g,g]);var x=P(g),C=P(l==="shadow"&&f.shadowAnchor||f.iconAnchor||x&&x.divideBy(2,!0));r.className="leaflet-marker-"+l+" "+(f.className||""),C&&(r.style.marginLeft=-C.x+"px",r.style.marginTop=-C.y+"px"),x&&(r.style.width=x.x+"px",r.style.height=x.y+"px")},_createImg:function(r,l){return l=l||document.createElement("img"),l.src=r,l},_getIconUrl:function(r){return $.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function tp(r){return new Xs(r)}s(tp,"icon");var Wo=Xs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Wo.imagePath!="string"&&(Wo.imagePath=this._detectIconPath()),(this.options.imagePath||Wo.imagePath)+Xs.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var l=s(function(f,g,x){var C=g.exec(f);return C&&C[x]},"strip");return r=l(r,/^url\((['"])?(.+)\1\)$/,2),r&&l(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=wt("div","leaflet-default-icon-path",document.body),l=Nt(r,"background-image")||Nt(r,"backgroundImage");if(document.body.removeChild(r),l=this._stripUrl(l),l)return l;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),uh=br.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new yr(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),gt(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var l=this._marker,f=l._map,g=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,C=Bn(l._icon),H=f.getPixelBounds(),J=f.getPixelOrigin(),it=rt(H.min._subtract(J).add(x),H.max._subtract(J).subtract(x));if(!it.contains(C)){var bt=P((Math.max(it.max.x,C.x)-it.max.x)/(H.max.x-it.max.x)-(Math.min(it.min.x,C.x)-it.min.x)/(H.min.x-it.min.x),(Math.max(it.max.y,C.y)-it.max.y)/(H.max.y-it.max.y)-(Math.min(it.min.y,C.y)-it.min.y)/(H.min.y-it.min.y)).multiplyBy(g);f.panBy(bt,{animate:!1}),this._draggable._newPos._add(bt),this._draggable._startPos._add(bt),be(l._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=ot(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(At(this._panRequest),this._panRequest=ot(this._adjustPan.bind(this,r)))},_onDrag:function(r){var l=this._marker,f=l._shadow,g=Bn(l._icon),x=l._map.layerPointToLatLng(g);f&&be(f,g),l._latlng=x,r.latlng=x,r.oldLatLng=this._oldLatLng,l.fire("move",r).fire("drag",r)},_onDragEnd:function(r){At(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),wr=Fi.extend({options:{icon:new Wo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,l){M(this,l),this._latlng=Dt(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var l=this._latlng;return this._latlng=Dt(r),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=r.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,r.title&&(f.title=r.title),f.tagName==="IMG"&&(f.alt=r.alt||"")),gt(f,l),r.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ee(f,"focus",this._panOnFocus,this);var x=r.icon.createShadow(this._shadow),C=!1;x!==this._shadow&&(this._removeShadow(),C=!0),x&&(gt(x,l),x.alt=""),this._shadow=x,r.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&C&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&be(this._icon,r),this._shadow&&be(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(gt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),uh)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new uh(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Ve(this._icon,r),this._shadow&&Ve(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var l=this.options.icon.options,f=l.iconSize?P(l.iconSize):P(0,0),g=l.iconAnchor?P(l.iconAnchor):P(0,0);r.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:f.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Vo(r,l){return new wr(r,l)}s(Vo,"marker");var is=Fi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return M(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ba=is.extend({options:{fill:!0,radius:10},initialize:function(r,l){M(this,l),this._latlng=Dt(r),this._radius=this.options.radius},setLatLng:function(r){var l=this._latlng;return this._latlng=Dt(r),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var l=r&&r.radius||this._radius;return is.prototype.setStyle.call(this,r),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,l=this._radiusY||r,f=this._clickTolerance(),g=[r+f,l+f];this._pxBounds=new nt(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ep(r,l){return new Ba(r,l)}s(ep,"circleMarker");var dc=Ba.extend({initialize:function(r,l,f){if(typeof l=="number"&&(l=t({},f,{radius:l})),M(this,l),this._latlng=Dt(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ut(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:is.prototype.setStyle,_project:function(){var r=this._latlng.lng,l=this._latlng.lat,f=this._map,g=f.options.crs;if(g.distance===Vt.distance){var x=Math.PI/180,C=this._mRadius/Vt.R/x,H=f.project([l+C,r]),J=f.project([l-C,r]),it=H.add(J).divideBy(2),bt=f.unproject(it).lat,Pt=Math.acos((Math.cos(C*x)-Math.sin(l*x)*Math.sin(bt*x))/(Math.cos(l*x)*Math.cos(bt*x)))/x;(isNaN(Pt)||Pt===0)&&(Pt=C/Math.cos(Math.PI/180*l)),this._point=it.subtract(f.getPixelOrigin()),this._radius=isNaN(Pt)?0:it.x-f.project([bt,r-Pt]).x,this._radiusY=it.y-H.y}else{var te=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(te).x}this._updateBounds()}});function np(r,l,f){return new dc(r,l,f)}s(np,"circle");var xr=is.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,l){M(this,l),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var l=1/0,f=null,g=Gs,x,C,H=0,J=this._parts.length;H<J;H++)for(var it=this._parts[H],bt=1,Pt=it.length;bt<Pt;bt++){x=it[bt-1],C=it[bt];var te=g(r,x,C,!0);te<l&&(l=te,f=g(r,x,C))}return f&&(f.distance=Math.sqrt(l)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ac(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,l){return l=l||this._defaultShape(),r=Dt(r),l.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ut,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Si(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var l=[],f=Si(r),g=0,x=r.length;g<x;g++)f?(l[g]=Dt(r[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(r[g]);return l},_project:function(){var r=new nt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),l=new q(r,r);this._rawPxBounds&&(this._pxBounds=new nt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(r,l,f){var g=r[0]instanceof _t,x=r.length,C,H;if(g){for(H=[],C=0;C<x;C++)H[C]=this._map.latLngToLayerPoint(r[C]),f.extend(H[C]);l.push(H)}else for(C=0;C<x;C++)this._projectLatlngs(r[C],l,f)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,f,g,x,C,H,J,it;for(f=0,x=0,C=this._rings.length;f<C;f++)for(it=this._rings[f],g=0,H=it.length;g<H-1;g++)J=oh(it[g],it[g+1],r,g,!0),J&&(l[x]=l[x]||[],l[x].push(J[0]),(J[1]!==it[g+1]||g===H-2)&&(l[x].push(J[1]),x++))}},_simplifyPoints:function(){for(var r=this._parts,l=this.options.smoothFactor,f=0,g=r.length;f<g;f++)r[f]=rh(r[f],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,l){var f,g,x,C,H,J,it=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(f=0,C=this._parts.length;f<C;f++)for(J=this._parts[f],g=0,H=J.length,x=H-1;g<H;x=g++)if(!(!l&&g===0)&&sh(r,J[x],J[g])<=it)return!0;return!1}});function hh(r,l){return new xr(r,l)}s(hh,"polyline"),xr._flat=ah;var Js=xr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var l=xr.prototype._convertLatLngs.call(this,r),f=l.length;return f>=2&&l[0]instanceof _t&&l[0].equals(l[f-1])&&l.pop(),l},_setLatLngs:function(r){xr.prototype._setLatLngs.call(this,r),Si(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Si(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,l=this.options.weight,f=new q(l,l);if(r=new nt(r.min.subtract(f),r.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,x=this._rings.length,C;g<x;g++)C=Ho(this._rings[g],r,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var l=!1,f,g,x,C,H,J,it,bt;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(C=0,it=this._parts.length;C<it;C++)for(f=this._parts[C],H=0,bt=f.length,J=bt-1;H<bt;J=H++)g=f[H],x=f[J],g.y>r.y!=x.y>r.y&&r.x<(x.x-g.x)*(r.y-g.y)/(x.y-g.y)+g.x&&(l=!l);return l||xr.prototype._containsPoint.call(this,r,!0)}});function ip(r,l){return new Js(r,l)}s(ip,"polygon");var qr=_r.extend({initialize:function(r,l){M(this,l),this._layers={},r&&this.addData(r)},addData:function(r){var l=B(r)?r:r.features,f,g,x;if(l){for(f=0,g=l.length;f<g;f++)x=l[f],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var C=this.options;if(C.filter&&!C.filter(r))return this;var H=Zo(r,C);return H?(H.feature=Yo(r),H.defaultOptions=H.options,this.resetStyle(H),C.onEachFeature&&C.onEachFeature(r,H),this.addLayer(H)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=t({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(l){this._setLayerStyle(l,r)},this)},_setLayerStyle:function(r,l){r.setStyle&&(typeof l=="function"&&(l=l(r.feature)),r.setStyle(l))}});function Zo(r,l){var f=r.type==="Feature"?r.geometry:r,g=f?f.coordinates:null,x=[],C=l&&l.pointToLayer,H=l&&l.coordsToLatLng||fc,J,it,bt,Pt;if(!g&&!f)return null;switch(f.type){case"Point":return J=H(g),dh(C,r,J,l);case"MultiPoint":for(bt=0,Pt=g.length;bt<Pt;bt++)J=H(g[bt]),x.push(dh(C,r,J,l));return new _r(x);case"LineString":case"MultiLineString":return it=$o(g,f.type==="LineString"?0:1,H),new xr(it,l);case"Polygon":case"MultiPolygon":return it=$o(g,f.type==="Polygon"?1:2,H),new Js(it,l);case"GeometryCollection":for(bt=0,Pt=f.geometries.length;bt<Pt;bt++){var te=Zo({geometry:f.geometries[bt],type:"Feature",properties:r.properties},l);te&&x.push(te)}return new _r(x);case"FeatureCollection":for(bt=0,Pt=f.features.length;bt<Pt;bt++){var de=Zo(f.features[bt],l);de&&x.push(de)}return new _r(x);default:throw new Error("Invalid GeoJSON object.")}}s(Zo,"geometryToLayer");function dh(r,l,f,g){return r?r(l,f):new wr(f,g&&g.markersInheritOptions&&g)}s(dh,"_pointToLayer");function fc(r){return new _t(r[1],r[0],r[2])}s(fc,"coordsToLatLng");function $o(r,l,f){for(var g=[],x=0,C=r.length,H;x<C;x++)H=l?$o(r[x],l-1,f):(f||fc)(r[x]),g.push(H);return g}s($o,"coordsToLatLngs");function pc(r,l){return r=Dt(r),r.alt!==void 0?[T(r.lng,l),T(r.lat,l),T(r.alt,l)]:[T(r.lng,l),T(r.lat,l)]}s(pc,"latLngToCoords");function Ko(r,l,f,g){for(var x=[],C=0,H=r.length;C<H;C++)x.push(l?Ko(r[C],Si(r[C])?0:l-1,f,g):pc(r[C],g));return!l&&f&&x.length>0&&x.push(x[0].slice()),x}s(Ko,"latLngsToCoords");function ys(r,l){return r.feature?t({},r.feature,{geometry:l}):Yo(l)}s(ys,"getFeature");function Yo(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}s(Yo,"asFeature");var Ze={toGeoJSON:function(r){return ys(this,{type:"Point",coordinates:pc(this.getLatLng(),r)})}};wr.include(Ze),dc.include(Ze),Ba.include(Ze),xr.include({toGeoJSON:function(r){var l=!Si(this._latlngs),f=Ko(this._latlngs,l?1:0,!1,r);return ys(this,{type:(l?"Multi":"")+"LineString",coordinates:f})}}),Js.include({toGeoJSON:function(r){var l=!Si(this._latlngs),f=l&&!Si(this._latlngs[0]),g=Ko(this._latlngs,f?2:l?1:0,!0,r);return l||(g=[g]),ys(this,{type:(f?"Multi":"")+"Polygon",coordinates:g})}}),bs.include({toMultiPoint:function(r){var l=[];return this.eachLayer(function(f){l.push(f.toGeoJSON(r).geometry.coordinates)}),ys(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(r){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(r);var f=l==="GeometryCollection",g=[];return this.eachLayer(function(x){if(x.toGeoJSON){var C=x.toGeoJSON(r);if(f)g.push(C.geometry);else{var H=Yo(C);H.type==="FeatureCollection"?g.push.apply(g,H.features):g.push(H)}}}),f?ys(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function fh(r,l){return new qr(r,l)}s(fh,"geoJSON");var Qs=fh,ja=Fi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,l,f){this._url=r,this._bounds=Lt(l),M(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(gt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Oe(this._image),this},bringToBack:function(){return this._map&&nn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Lt(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",l=this._image=r?this._url:wt("img");if(gt(l,"leaflet-image-layer"),this._zoomAnimated&&gt(l,"leaflet-zoom-animated"),this.options.className&&gt(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=o(this.fire,this,"load"),l.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(r){var l=this._map.getZoomScale(r.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;je(this._image,f,l)},_reset:function(){var r=this._image,l=new nt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=l.getSize();be(r,l.min),r.style.width=f.x+"px",r.style.height=f.y+"px"},_updateOpacity:function(){Ve(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),rp=s(function(r,l,f){return new ja(r,l,f)},"imageOverlay"),Go=ja.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",l=this._image=r?this._url:wt("video");if(gt(l,"leaflet-image-layer"),this._zoomAnimated&&gt(l,"leaflet-zoom-animated"),this.options.className&&gt(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=o(this.fire,this,"load"),r){for(var f=l.getElementsByTagName("source"),g=[],x=0;x<f.length;x++)g.push(f[x].src);this._url=f.length>0?g:[l.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var H=wt("source");H.src=this._url[C],l.appendChild(H)}}});function sp(r,l,f){return new Go(r,l,f)}s(sp,"videoOverlay");var ph=ja.extend({_initImage:function(){var r=this._image=this._url;gt(r,"leaflet-image-layer"),this._zoomAnimated&&gt(r,"leaflet-zoom-animated"),this.options.className&&gt(r,this.options.className),r.onselectstart=_,r.onmousemove=_}});function op(r,l,f){return new ph(r,l,f)}s(op,"svgOverlay");var lr=Fi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,l){r&&(r instanceof _t||B(r))?(this._latlng=Dt(r),M(this,l)):(M(this,r),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Ve(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Ve(this._container,1),this.bringToFront(),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Ve(this._container,0),this._removeTimeout=setTimeout(o(qt,void 0,this._container),200)):qt(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=Dt(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Oe(this._container),this},bringToBack:function(){return this._map&&nn(this._container),this},_prepareOpen:function(r){var l=this._source;if(!l._map)return!1;if(l instanceof _r){l=null;var f=this._source._layers;for(var g in f)if(f[g]._map){l=f[g];break}if(!l)return!1;this._source=l}if(!r)if(l.getCenter)r=l.getCenter();else if(l.getLatLng)r=l.getLatLng();else if(l.getBounds)r=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")r.innerHTML=l;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),l=P(this.options.offset),f=this._getAnchor();this._zoomAnimated?be(this._container,r.add(f)):l=l.add(r).add(f);var g=this._containerBottom=-l.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});xe.include({_initOverlay:function(r,l,f,g){var x=l;return x instanceof r||(x=new r(g).setContent(l)),f&&x.setLatLng(f),x}}),Fi.include({_initOverlay:function(r,l,f,g){var x=f;return x instanceof r?(M(x,g),x._source=this):(x=l&&!g?l:new r(g,this),x.setContent(f)),x}});var Fa=lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,lr.prototype.openOn.call(this,r)},onAdd:function(r){lr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof is||this._source.on("preclick",Ft))},onRemove:function(r){lr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof is||this._source.off("preclick",Ft))},getEvents:function(){var r=lr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",l=this._container=wt("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=wt("div",r+"-content-wrapper",l);if(this._contentNode=wt("div",r+"-content",f),ii(l),jn(this._contentNode),ee(l,"contextmenu",Ft),this._tipContainer=wt("div",r+"-tip-container",l),this._tip=wt("div",r+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=wt("a",r+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',ee(g,"click",function(x){Nn(x),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,l=r.style;l.width="",l.whiteSpace="nowrap";var f=r.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),l.width=f+1+"px",l.whiteSpace="",l.height="";var g=r.offsetHeight,x=this.options.maxHeight,C="leaflet-popup-scrolled";x&&g>x?(l.height=x+"px",gt(r,C)):zt(r,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),f=this._getAnchor();be(this._container,l.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,l=parseInt(Nt(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+l,g=this._containerWidth,x=new q(this._containerLeft,-f-this._containerBottom);x._add(Bn(this._container));var C=r.layerPointToContainerPoint(x),H=P(this.options.autoPanPadding),J=P(this.options.autoPanPaddingTopLeft||H),it=P(this.options.autoPanPaddingBottomRight||H),bt=r.getSize(),Pt=0,te=0;C.x+g+it.x>bt.x&&(Pt=C.x+g-bt.x+it.x),C.x-Pt-J.x<0&&(Pt=C.x-J.x),C.y+f+it.y>bt.y&&(te=C.y+f-bt.y+it.y),C.y-te-J.y<0&&(te=C.y-J.y),(Pt||te)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([Pt,te]))}},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ap=s(function(r,l){return new Fa(r,l)},"popup");xe.mergeOptions({closePopupOnClick:!0}),xe.include({openPopup:function(r,l,f){return this._initOverlay(Fa,r,l,f).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Fi.include({bindPopup:function(r,l){return this._popup=this._initOverlay(Fa,this._popup,r,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof _r||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Bi(r);var l=r.layer||r.target;if(this._popup._source===l&&!(l instanceof is)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=l,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Xo=lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){lr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){lr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=lr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",l=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wt("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var l,f,g=this._map,x=this._container,C=g.latLngToContainerPoint(g.getCenter()),H=g.layerPointToContainerPoint(r),J=this.options.direction,it=x.offsetWidth,bt=x.offsetHeight,Pt=P(this.options.offset),te=this._getAnchor();J==="top"?(l=it/2,f=bt):J==="bottom"?(l=it/2,f=0):J==="center"?(l=it/2,f=bt/2):J==="right"?(l=0,f=bt/2):J==="left"?(l=it,f=bt/2):H.x<C.x?(J="right",l=0,f=bt/2):(J="left",l=it+(Pt.x+te.x)*2,f=bt/2),r=r.subtract(P(l,f,!0)).add(Pt).add(te),zt(x,"leaflet-tooltip-right"),zt(x,"leaflet-tooltip-left"),zt(x,"leaflet-tooltip-top"),zt(x,"leaflet-tooltip-bottom"),gt(x,"leaflet-tooltip-"+J),be(x,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Ve(this._container,r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(l)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mc=s(function(r,l){return new Xo(r,l)},"tooltip");xe.include({openTooltip:function(r,l,f){return this._initOverlay(Xo,r,l,f).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Fi.include({bindTooltip:function(r,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xo,this._tooltip,r,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var l=r?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[l](f),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof _r||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&(ee(l,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var l=r.latlng,f,g;this._tooltip.options.sticky&&r.originalEvent&&(f=this._map.mouseEventToContainerPoint(r.originalEvent),g=this._map.containerPointToLayerPoint(f),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var mh=Xs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var l=r&&r.tagName==="DIV"?r:document.createElement("div"),f=this.options;if(f.html instanceof Element?(pe(l),l.appendChild(f.html)):l.innerHTML=f.html!==!1?f.html:"",f.bgPos){var g=P(f.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function lp(r){return new mh(r)}s(lp,"divIcon"),Xs.Default=Wo;var Jo=Fi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){M(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),qt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(nn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof q?r:new q(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var l=this.getPane().children,f=-r(-1/0,1/0),g=0,x=l.length,C;g<x;g++)C=l[g].style.zIndex,l[g]!==this._container&&C&&(f=r(f,+C));isFinite(f)&&(this.options.zIndex=f+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$.ielt9){Ve(this._container,this.options.opacity);var r=+new Date,l=!1,f=!1;for(var g in this._tiles){var x=this._tiles[g];if(!(!x.current||!x.loaded)){var C=Math.min(1,(r-x.loaded)/200);Ve(x.el,C),C<1?l=!0:(x.active?f=!0:this._onOpaqueTile(x),x.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),l&&(At(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,l=this.options.maxZoom;if(r!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===r?(this._levels[f].el.style.zIndex=l-Math.abs(r-f),this._onUpdateLevel(f)):(qt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var g=this._levels[r],x=this._map;return g||(g=this._levels[r]={},g.el=wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=x.project(x.unproject(x.getPixelOrigin()),r).round(),g.zoom=r,this._setZoomTransform(g,x.getCenter(),x.getZoom()),_(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var r,l,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)l=this._tiles[r],l.retain=l.current;for(r in this._tiles)if(l=this._tiles[r],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var l in this._tiles)this._tiles[l].coords.z===r&&this._removeTile(l)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)qt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,l,f,g){var x=Math.floor(r/2),C=Math.floor(l/2),H=f-1,J=new q(+x,+C);J.z=+H;var it=this._tileCoordsToKey(J),bt=this._tiles[it];return bt&&bt.active?(bt.retain=!0,!0):(bt&&bt.loaded&&(bt.retain=!0),H>g?this._retainParent(x,C,H,g):!1)},_retainChildren:function(r,l,f,g){for(var x=2*r;x<2*r+2;x++)for(var C=2*l;C<2*l+2;C++){var H=new q(x,C);H.z=f+1;var J=this._tileCoordsToKey(H),it=this._tiles[J];if(it&&it.active){it.retain=!0;continue}else it&&it.loaded&&(it.retain=!0);f+1<g&&this._retainChildren(x,C,f+1,g)}},_resetView:function(r){var l=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var l=this.options;return l.minNativeZoom!==void 0&&r<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<r?l.maxNativeZoom:r},_setView:function(r,l,f,g){var x=Math.round(l);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var C=this.options.updateWhenZooming&&x!==this._tileZoom;(!g||C)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(r),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(r,l)},_setZoomTransforms:function(r,l){for(var f in this._levels)this._setZoomTransform(this._levels[f],r,l)},_setZoomTransform:function(r,l,f){var g=this._map.getZoomScale(f,r.zoom),x=r.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,f)).round();$.any3d?je(r.el,x,g):be(r.el,x)},_resetGrid:function(){var r=this._map,l=r.options.crs,f=this._tileSize=this.getTileSize(),g=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,l.wrapLng[0]],g).x/f.x),Math.ceil(r.project([0,l.wrapLng[1]],g).x/f.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([l.wrapLat[0],0],g).y/f.x),Math.ceil(r.project([l.wrapLat[1],0],g).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var l=this._map,f=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(f,this._tileZoom),x=l.project(r,this._tileZoom).floor(),C=l.getSize().divideBy(g*2);return new nt(x.subtract(C),x.add(C))},_update:function(r){var l=this._map;if(l){var f=this._clampZoom(l.getZoom());if(r===void 0&&(r=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(r),x=this._pxBoundsToTileRange(g),C=x.getCenter(),H=[],J=this.options.keepBuffer,it=new nt(x.getBottomLeft().subtract([J,-J]),x.getTopRight().add([J,-J]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var bt in this._tiles){var Pt=this._tiles[bt].coords;(Pt.z!==this._tileZoom||!it.contains(new q(Pt.x,Pt.y)))&&(this._tiles[bt].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(r,f);return}for(var te=x.min.y;te<=x.max.y;te++)for(var de=x.min.x;de<=x.max.x;de++){var Xn=new q(de,te);if(Xn.z=this._tileZoom,!!this._isValidTile(Xn)){var Sn=this._tiles[this._tileCoordsToKey(Xn)];Sn?Sn.current=!0:H.push(Xn)}}if(H.sort(function(on,Hr){return on.distanceTo(C)-Hr.distanceTo(C)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ui=document.createDocumentFragment();for(de=0;de<H.length;de++)this._addTile(H[de],Ui);this._level.el.appendChild(Ui)}}}},_isValidTile:function(r){var l=this._map.options.crs;if(!l.infinite){var f=this._globalTileRange;if(!l.wrapLng&&(r.x<f.min.x||r.x>f.max.x)||!l.wrapLat&&(r.y<f.min.y||r.y>f.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(r);return Lt(this.options.bounds).overlaps(g)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var l=this._map,f=this.getTileSize(),g=r.scaleBy(f),x=g.add(f),C=l.unproject(g,r.z),H=l.unproject(x,r.z);return[C,H]},_tileCoordsToBounds:function(r){var l=this._tileCoordsToNwSe(r),f=new ut(l[0],l[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var l=r.split(":"),f=new q(+l[0],+l[1]);return f.z=+l[2],f},_removeTile:function(r){var l=this._tiles[r];l&&(qt(l.el),delete this._tiles[r],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){gt(r,"leaflet-tile");var l=this.getTileSize();r.style.width=l.x+"px",r.style.height=l.y+"px",r.onselectstart=_,r.onmousemove=_,$.ielt9&&this.options.opacity<1&&Ve(r,this.options.opacity)},_addTile:function(r,l){var f=this._getTilePos(r),g=this._tileCoordsToKey(r),x=this.createTile(this._wrapCoords(r),o(this._tileReady,this,r));this._initTile(x),this.createTile.length<2&&ot(o(this._tileReady,this,r,null,x)),be(x,f),this._tiles[g]={el:x,coords:r,current:!0},l.appendChild(x),this.fire("tileloadstart",{tile:x,coords:r})},_tileReady:function(r,l,f){l&&this.fire("tileerror",{error:l,tile:f,coords:r});var g=this._tileCoordsToKey(r);f=this._tiles[g],f&&(f.loaded=+new Date,this._map._fadeAnimated?(Ve(f.el,0),At(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),l||(gt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$.ielt9||!this._map._fadeAnimated?ot(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var l=new q(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return l.z=r.z,l},_pxBoundsToTileRange:function(r){var l=this.getTileSize();return new nt(r.min.unscaleBy(l).floor(),r.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function gh(r){return new Jo(r)}s(gh,"gridLayer");var _s=Jo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,l){this._url=r,l=M(this,l),l.detectRetina&&$.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,l){return this._url===r&&l===void 0&&(l=!0),this._url=r,l||this.redraw(),this},createTile:function(r,l){var f=document.createElement("img");return ee(f,"load",o(this._tileOnLoad,this,l,f)),ee(f,"error",o(this._tileOnError,this,l,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(r),f},getTileUrl:function(r){var l={r:$.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-r.y;this.options.tms&&(l.y=f),l["-y"]=f}return I(this._url,t(l,this.options))},_tileOnLoad:function(r,l){$.ielt9?setTimeout(o(r,this,null,l),0):r(null,l)},_tileOnError:function(r,l,f){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),r(f,l)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,l=this.options.maxZoom,f=this.options.zoomReverse,g=this.options.zoomOffset;return f&&(r=l-r),r+g},_getSubdomain:function(r){var l=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var r,l;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(l=this._tiles[r].el,l.onload=_,l.onerror=_,!l.complete)){l.src=G;var f=this._tiles[r].coords;qt(l),delete this._tiles[r],this.fire("tileabort",{tile:l,coords:f})}},_removeTile:function(r){var l=this._tiles[r];if(l)return l.el.setAttribute("src",G),Jo.prototype._removeTile.call(this,r)},_tileReady:function(r,l,f){if(!(!this._map||f&&f.getAttribute("src")===G))return Jo.prototype._tileReady.call(this,r,l,f)}});function Qo(r,l){return new _s(r,l)}s(Qo,"tileLayer");var gc=_s.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,l){this._url=r;var f=t({},this.defaultWmsParams);for(var g in l)g in this.options||(f[g]=l[g]);l=M(this,l);var x=l.detectRetina&&$.retina?2:1,C=this.getTileSize();f.width=C.x*x,f.height=C.y*x,this.wmsParams=f},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,_s.prototype.onAdd.call(this,r)},getTileUrl:function(r){var l=this._tileCoordsToNwSe(r),f=this._crs,g=rt(f.project(l[0]),f.project(l[1])),x=g.min,C=g.max,H=(this._wmsVersion>=1.3&&this._crs===qa?[x.y,x.x,C.y,C.x]:[x.x,x.y,C.x,C.y]).join(","),J=_s.prototype.getTileUrl.call(this,r);return J+D(this.wmsParams,J,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(r,l){return t(this.wmsParams,r),l||this.redraw(),this}});function cp(r,l){return new gc(r,l)}s(cp,"tileLayerWMS"),_s.WMS=gc,Qo.wms=cp;var Br=Fi.extend({options:{padding:.1},initialize:function(r){M(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),gt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,l){var f=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,l),C=g.multiplyBy(-f).add(x).subtract(this._map._getNewPixelOrigin(r,l));$.any3d?je(this._container,C,f):be(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,l=this._map.getSize(),f=this._map.containerPointToLayerPoint(l.multiplyBy(-r)).round();this._bounds=new nt(f,f.add(l.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ha=Br.extend({options:{tolerance:0},getEvents:function(){var r=Br.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Br.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ee(r,"mousemove",this._onMouseMove,this),ee(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ee(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){At(this._redrawRequest),delete this._ctx,qt(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var l in this._layers)r=this._layers[l],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var r=this._bounds,l=this._container,f=r.getSize(),g=$.retina?2:1;be(l,r.min),l.width=g*f.x,l.height=g*f.y,l.style.width=f.x+"px",l.style.height=f.y+"px",$.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Br.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var l=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var l=r._order,f=l.next,g=l.prev;f?f.prev=g:this._drawLast=g,g?g.next=f:this._drawFirst=f,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var l=r.options.dashArray.split(/[, ]+/),f=[],g,x;for(x=0;x<l.length;x++){if(g=Number(l[x]),isNaN(g))return;f.push(g)}r.options._dashArray=f}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||ot(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var l=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new nt,this._redrawBounds.extend(r._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(r._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var l=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,l=this._redrawBounds;if(this._ctx.save(),l){var f=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)r=g.layer,(!l||r._pxBounds&&r._pxBounds.intersects(l))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,l){if(this._drawing){var f,g,x,C,H=r._parts,J=H.length,it=this._ctx;if(J){for(it.beginPath(),f=0;f<J;f++){for(g=0,x=H[f].length;g<x;g++)C=H[f][g],it[g?"lineTo":"moveTo"](C.x,C.y);l&&it.closePath()}this._fillStroke(it,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var l=r._point,f=this._ctx,g=Math.max(Math.round(r._radius),1),x=(Math.max(Math.round(r._radiusY),1)||g)/g;x!==1&&(f.save(),f.scale(1,x)),f.beginPath(),f.arc(l.x,l.y/x,g,0,Math.PI*2,!1),x!==1&&f.restore(),this._fillStroke(f,r)}},_fillStroke:function(r,l){var f=l.options;f.fill&&(r.globalAlpha=f.fillOpacity,r.fillStyle=f.fillColor||f.color,r.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(r.setLineDash&&r.setLineDash(l.options&&l.options._dashArray||[]),r.globalAlpha=f.opacity,r.lineWidth=f.weight,r.strokeStyle=f.color,r.lineCap=f.lineCap,r.lineJoin=f.lineJoin,r.stroke())},_onClick:function(r){for(var l=this._map.mouseEventToLayerPoint(r),f,g,x=this._drawFirst;x;x=x.next)f=x.layer,f.options.interactive&&f._containsPoint(l)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(f))&&(g=f);this._fireEvent(g?[g]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,l)}},_handleMouseOut:function(r){var l=this._hoveredLayer;l&&(zt(this._container,"leaflet-interactive"),this._fireEvent([l],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,l){if(!this._mouseHoverThrottled){for(var f,g,x=this._drawFirst;x;x=x.next)f=x.layer,f.options.interactive&&f._containsPoint(l)&&(g=f);g!==this._hoveredLayer&&(this._handleMouseOut(r),g&&(gt(this._container,"leaflet-interactive"),this._fireEvent([g],r,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,l,f){this._map._fireDOMEvent(l,f||l.type,r)},_bringToFront:function(r){var l=r._order;if(l){var f=l.next,g=l.prev;if(f)f.prev=g;else return;g?g.next=f:f&&(this._drawFirst=f),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(r)}},_bringToBack:function(r){var l=r._order;if(l){var f=l.next,g=l.prev;if(g)g.next=f;else return;f?f.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(r)}}});function za(r){return $.canvas?new Ha(r):null}s(za,"canvas");var Ai=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),cr={_initContainer:function(){this._container=wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Br.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var l=r._container=Ai("shape");gt(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",r._path=Ai("path"),l.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var l=r._container;this._container.appendChild(l),r.options.interactive&&r.addInteractiveTarget(l)},_removePath:function(r){var l=r._container;qt(l),r.removeInteractiveTarget(l),delete this._layers[d(r)]},_updateStyle:function(r){var l=r._stroke,f=r._fill,g=r.options,x=r._container;x.stroked=!!g.stroke,x.filled=!!g.fill,g.stroke?(l||(l=r._stroke=Ai("stroke")),x.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=B(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(x.removeChild(l),r._stroke=null),g.fill?(f||(f=r._fill=Ai("fill")),x.appendChild(f),f.color=g.fillColor||g.color,f.opacity=g.fillOpacity):f&&(x.removeChild(f),r._fill=null)},_updateCircle:function(r){var l=r._point.round(),f=Math.round(r._radius),g=Math.round(r._radiusY||f);this._setPath(r,r._empty()?"M0 0":"AL "+l.x+","+l.y+" "+f+","+g+" 0,"+65535*360)},_setPath:function(r,l){r._path.v=l},_bringToFront:function(r){Oe(r._container)},_bringToBack:function(r){nn(r._container)}},ws=$.vml?Ai:ve,Hi=Br.extend({_initContainer:function(){this._container=ws("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ws("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qt(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var r=this._bounds,l=r.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,f.setAttribute("width",l.x),f.setAttribute("height",l.y)),be(f,r.min),f.setAttribute("viewBox",[r.min.x,r.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(r){var l=r._path=ws("path");r.options.className&&gt(l,r.options.className),r.options.interactive&&gt(l,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){qt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var l=r._path,f=r.options;l&&(f.stroke?(l.setAttribute("stroke",f.color),l.setAttribute("stroke-opacity",f.opacity),l.setAttribute("stroke-width",f.weight),l.setAttribute("stroke-linecap",f.lineCap),l.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?l.setAttribute("stroke-dasharray",f.dashArray):l.removeAttribute("stroke-dasharray"),f.dashOffset?l.setAttribute("stroke-dashoffset",f.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),f.fill?(l.setAttribute("fill",f.fillColor||f.color),l.setAttribute("fill-opacity",f.fillOpacity),l.setAttribute("fill-rule",f.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(r,l){this._setPath(r,Zt(r._parts,l))},_updateCircle:function(r){var l=r._point,f=Math.max(Math.round(r._radius),1),g=Math.max(Math.round(r._radiusY),1)||f,x="a"+f+","+g+" 0 1,0 ",C=r._empty()?"M0 0":"M"+(l.x-f)+","+l.y+x+f*2+",0 "+x+-f*2+",0 ";this._setPath(r,C)},_setPath:function(r,l){r._path.setAttribute("d",l)},_bringToFront:function(r){Oe(r._path)},_bringToBack:function(r){nn(r._path)}});$.vml&&Hi.include(cr);function jr(r){return $.svg||$.vml?new Hi(r):null}s(jr,"svg"),xe.include({getRenderer:function(r){var l=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var l=this._paneRenderers[r];return l===void 0&&(l=this._createRenderer({pane:r}),this._paneRenderers[r]=l),l},_createRenderer:function(r){return this.options.preferCanvas&&za(r)||jr(r)}});var On=Js.extend({initialize:function(r,l){Js.prototype.initialize.call(this,this._boundsToLatLngs(r),l)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Lt(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function zi(r,l){return new On(r,l)}s(zi,"rectangle"),Hi.create=ws,Hi.pointsToPath=Zt,qr.geometryToLayer=Zo,qr.coordsToLatLng=fc,qr.coordsToLatLngs=$o,qr.latLngToCoords=pc,qr.latLngsToCoords=Ko,qr.getFeature=ys,qr.asFeature=Yo,xe.mergeOptions({boxZoom:!0});var vc=br.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ps(),Jr(),this._startPoint=this._map.mouseEventToContainerPoint(r),ee(document,{contextmenu:Bi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=wt("div","leaflet-zoom-box",this._container),gt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var l=new nt(this._point,this._startPoint),f=l.getSize();be(this._box,l.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(qt(this._box),zt(this._container,"leaflet-crosshair")),Xr(),Kn(),Fe(document,{contextmenu:Bi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var l=new ut(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xe.addInitHook("addHandler","boxZoom",vc),xe.mergeOptions({doubleClickZoom:!0});var Ci=br.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var l=this._map,f=l.getZoom(),g=l.options.zoomDelta,x=r.originalEvent.shiftKey?f-g:f+g;l.options.doubleClickZoom==="center"?l.setZoom(x):l.setZoomAround(r.containerPoint,x)}});xe.addInitHook("addHandler","doubleClickZoom",Ci),xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fr=br.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new yr(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}gt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Lt(this._map.options.maxBounds);this._offsetLimit=rt(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var l=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(l),this._prunePositions(l)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,l){return r-(r-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;r.x<l.min.x&&(r.x=this._viscousLimit(r.x,l.min.x)),r.y<l.min.y&&(r.y=this._viscousLimit(r.y,l.min.y)),r.x>l.max.x&&(r.x=this._viscousLimit(r.x,l.max.x)),r.y>l.max.y&&(r.y=this._viscousLimit(r.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,l=Math.round(r/2),f=this._initialWorldOffset,g=this._draggable._newPos.x,x=(g-l+f)%r+l-f,C=(g+l+f)%r-l-f,H=Math.abs(x+f)<Math.abs(C+f)?x:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(r){var l=this._map,f=l.options,g=!f.inertia||r.noInertia||this._times.length<2;if(l.fire("dragend",r),g)l.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,H=f.easeLinearity,J=x.multiplyBy(H/C),it=J.distanceTo([0,0]),bt=Math.min(f.inertiaMaxSpeed,it),Pt=J.multiplyBy(bt/it),te=bt/(f.inertiaDeceleration*H),de=Pt.multiplyBy(-te/2).round();!de.x&&!de.y?l.fire("moveend"):(de=l._limitOffset(de,l.options.maxBounds),ot(function(){l.panBy(de,{duration:te,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});xe.addInitHook("addHandler","dragging",Fr),xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ta=br.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ee(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,l=document.documentElement,f=r.scrollTop||l.scrollTop,g=r.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var l=this._panKeys={},f=this.keyCodes,g,x;for(g=0,x=f.left.length;g<x;g++)l[f.left[g]]=[-1*r,0];for(g=0,x=f.right.length;g<x;g++)l[f.right[g]]=[r,0];for(g=0,x=f.down.length;g<x;g++)l[f.down[g]]=[0,r];for(g=0,x=f.up.length;g<x;g++)l[f.up[g]]=[0,-1*r]},_setZoomDelta:function(r){var l=this._zoomKeys={},f=this.keyCodes,g,x;for(g=0,x=f.zoomIn.length;g<x;g++)l[f.zoomIn[g]]=r;for(g=0,x=f.zoomOut.length;g<x;g++)l[f.zoomOut[g]]=-r},_addHooks:function(){ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var l=r.keyCode,f=this._map,g;if(l in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(g=this._panKeys[l],r.shiftKey&&(g=P(g).multiplyBy(3)),f.options.maxBounds&&(g=f._limitOffset(P(g),f.options.maxBounds)),f.options.worldCopyJump){var x=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(g)));f.panTo(x)}else f.panBy(g)}else if(l in this._zoomKeys)f.setZoom(f.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Bi(r)}}});xe.addInitHook("addHandler","keyboard",ta),xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vh=br.extend({addHooks:function(){ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var l=Pr(r),f=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var g=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),g),Bi(r)},_performZoom:function(){var r=this._map,l=r.getZoom(),f=this._map.options.zoomSnap||0;r._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,C=f?Math.ceil(x/f)*f:x,H=r._limitZoom(l+(this._delta>0?C:-C))-l;this._delta=0,this._startTime=null,H&&(r.options.scrollWheelZoom==="center"?r.setZoom(l+H):r.setZoomAround(this._lastMousePos,l+H))}});xe.addInitHook("addHandler","scrollWheelZoom",vh);var bc=600;xe.mergeOptions({tapHold:$.touchNative&&$.safari&&$.mobile,tapTolerance:15});var Ua=br.extend({addHooks:function(){ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var l=r.touches[0];this._startPos=this._newPos=new q(l.clientX,l.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ee(document,"touchend",Nn),ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),bc),ee(document,"touchend touchcancel contextmenu",this._cancel,this),ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:s(function r(){Fe(document,"touchend",Nn),Fe(document,"touchend touchcancel",r)},"cancelClickPrevent"),_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(r){var l=r.touches[0];this._newPos=new q(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,l){var f=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});f._simulated=!0,l.target.dispatchEvent(f)}});xe.addInitHook("addHandler","tapHold",Ua),xe.mergeOptions({touchZoom:$.touch,bounceAtZoomLimits:!0});var Wa=br.extend({addHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var l=this._map;if(!(!r.touches||r.touches.length!==2||l._animatingZoom||this._zooming)){var f=l.mouseEventToContainerPoint(r.touches[0]),g=l.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(f.add(g)._divideBy(2))),this._startDist=f.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ee(document,"touchmove",this._onTouchMove,this),ee(document,"touchend touchcancel",this._onTouchEnd,this),Nn(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var l=this._map,f=l.mouseEventToContainerPoint(r.touches[0]),g=l.mouseEventToContainerPoint(r.touches[1]),x=f.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(x,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&x<1||this._zoom>l.getMaxZoom()&&x>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var C=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(x===1&&C.x===0&&C.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),At(this._animRequest);var H=o(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ot(H,this,!0),Nn(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,At(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xe.addInitHook("addHandler","touchZoom",Wa),xe.BoxZoom=vc,xe.DoubleClickZoom=Ci,xe.Drag=Fr,xe.Keyboard=ta,xe.ScrollWheelZoom=vh,xe.TapHold=Ua,xe.TouchZoom=Wa,n.Bounds=nt,n.Browser=$,n.CRS=Kt,n.Canvas=Ha,n.Circle=dc,n.CircleMarker=Ba,n.Class=tt,n.Control=or,n.DivIcon=mh,n.DivOverlay=lr,n.DomEvent=ih,n.DomUtil=jo,n.Draggable=yr,n.Evented=Tt,n.FeatureGroup=_r,n.GeoJSON=qr,n.GridLayer=Jo,n.Handler=br,n.Icon=Xs,n.ImageOverlay=ja,n.LatLng=_t,n.LatLngBounds=ut,n.Layer=Fi,n.LayerGroup=bs,n.LineUtil=lc,n.Map=xe,n.Marker=wr,n.Mixin=Ys,n.Path=is,n.Point=q,n.PolyUtil=Yf,n.Polygon=Js,n.Polyline=xr,n.Popup=Fa,n.PosAnimation=Ql,n.Projection=uc,n.Rectangle=On,n.Renderer=Br,n.SVG=Hi,n.SVGOverlay=ph,n.TileLayer=_s,n.Tooltip=Xo,n.Transformation=le,n.Util=V,n.VideoOverlay=Go,n.bind=o,n.bounds=rt,n.canvas=za,n.circle=np,n.circleMarker=ep,n.control=$s,n.divIcon=lp,n.extend=t,n.featureGroup=Qf,n.geoJSON=fh,n.geoJson=Qs,n.gridLayer=gh,n.icon=tp,n.imageOverlay=rp,n.latLng=Dt,n.latLngBounds=Lt,n.layerGroup=ch,n.map=Gn,n.marker=Vo,n.point=P,n.polygon=ip,n.polyline=hh,n.popup=ap,n.rectangle=zi,n.setOptions=M,n.stamp=d,n.svg=jr,n.svgOverlay=op,n.tileLayer=Qo,n.tooltip=mc,n.transformation=Se,n.version=e,n.videoOverlay=sp;var bh=window.L;n.noConflict=function(){return window.L=bh,this},window.L=n})});var Z_=Tr((Cz,V_)=>{var fr=-1,Mi=1,zn=0;function Au(n,e,t,i,o){if(n===e)return n?[[zn,n]]:[];if(t!=null){var c=wk(n,e,t);if(c)return c}var d=sg(n,e),m=n.substring(0,d);n=n.substring(d),e=e.substring(d),d=tf(n,e);var v=n.substring(n.length-d);n=n.substring(0,n.length-d),e=e.substring(0,e.length-d);var _=fk(n,e);return m&&_.unshift([zn,m]),v&&_.push([zn,v]),og(_,o),i&&gk(_),_}s(Au,"diff_main");function fk(n,e){var t;if(!n)return[[Mi,e]];if(!e)return[[fr,n]];var i=n.length>e.length?n:e,o=n.length>e.length?e:n,c=i.indexOf(o);if(c!==-1)return t=[[Mi,i.substring(0,c)],[zn,o],[Mi,i.substring(c+o.length)]],n.length>e.length&&(t[0][0]=t[2][0]=fr),t;if(o.length===1)return[[fr,n],[Mi,e]];var d=mk(n,e);if(d){var m=d[0],v=d[1],_=d[2],T=d[3],S=d[4],O=Au(m,_),M=Au(v,T);return O.concat([[zn,S]],M)}return pk(n,e)}s(fk,"diff_compute_");function pk(n,e){for(var t=n.length,i=e.length,o=Math.ceil((t+i)/2),c=o,d=2*o,m=new Array(d),v=new Array(d),_=0;_<d;_++)m[_]=-1,v[_]=-1;m[c+1]=0,v[c+1]=0;for(var T=t-i,S=T%2!==0,O=0,M=0,D=0,j=0,I=0;I<o;I++){for(var B=-I+O;B<=I-M;B+=2){var W=c+B,G;B===-I||B!==I&&m[W-1]<m[W+1]?G=m[W+1]:G=m[W-1]+1;for(var X=G-B;G<t&&X<i&&n.charAt(G)===e.charAt(X);)G++,X++;if(m[W]=G,G>t)M+=2;else if(X>i)O+=2;else if(S){var ct=c+T-B;if(ct>=0&&ct<d&&v[ct]!==-1){var vt=t-v[ct];if(G>=vt)return R_(n,e,G,X)}}}for(var ht=-I+D;ht<=I-j;ht+=2){var ct=c+ht,vt;ht===-I||ht!==I&&v[ct-1]<v[ct+1]?vt=v[ct+1]:vt=v[ct-1]+1;for(var z=vt-ht;vt<t&&z<i&&n.charAt(t-vt-1)===e.charAt(i-z-1);)vt++,z++;if(v[ct]=vt,vt>t)j+=2;else if(z>i)D+=2;else if(!S){var W=c+T-ht;if(W>=0&&W<d&&m[W]!==-1){var G=m[W],X=c+G-W;if(vt=t-vt,G>=vt)return R_(n,e,G,X)}}}}return[[fr,n],[Mi,e]]}s(pk,"diff_bisect_");function R_(n,e,t,i){var o=n.substring(0,t),c=e.substring(0,i),d=n.substring(t),m=e.substring(i),v=Au(o,c),_=Au(d,m);return v.concat(_)}s(R_,"diff_bisectSplit_");function sg(n,e){if(!n||!e||n.charAt(0)!==e.charAt(0))return 0;for(var t=0,i=Math.min(n.length,e.length),o=i,c=0;t<o;)n.substring(c,o)==e.substring(c,o)?(t=o,c=t):i=o,o=Math.floor((i-t)/2+t);return H_(n.charCodeAt(o-1))&&o--,o}s(sg,"diff_commonPrefix");function q_(n,e){var t=n.length,i=e.length;if(t==0||i==0)return 0;t>i?n=n.substring(t-i):t<i&&(e=e.substring(0,t));var o=Math.min(t,i);if(n==e)return o;for(var c=0,d=1;;){var m=n.substring(o-d),v=e.indexOf(m);if(v==-1)return c;d+=v,(v==0||n.substring(o-d)==e.substring(0,d))&&(c=d,d++)}}s(q_,"diff_commonOverlap_");function tf(n,e){if(!n||!e||n.slice(-1)!==e.slice(-1))return 0;for(var t=0,i=Math.min(n.length,e.length),o=i,c=0;t<o;)n.substring(n.length-o,n.length-c)==e.substring(e.length-o,e.length-c)?(t=o,c=t):i=o,o=Math.floor((i-t)/2+t);return z_(n.charCodeAt(n.length-o))&&o--,o}s(tf,"diff_commonSuffix");function mk(n,e){var t=n.length>e.length?n:e,i=n.length>e.length?e:n;if(t.length<4||i.length*2<t.length)return null;function o(M,D,j){for(var I=M.substring(j,j+Math.floor(M.length/4)),B=-1,W="",G,X,ct,vt;(B=D.indexOf(I,B+1))!==-1;){var ht=sg(M.substring(j),D.substring(B)),z=tf(M.substring(0,j),D.substring(0,B));W.length<z+ht&&(W=D.substring(B-z,B)+D.substring(B,B+ht),G=M.substring(0,j-z),X=M.substring(j+ht),ct=D.substring(0,B-z),vt=D.substring(B+ht))}return W.length*2>=M.length?[G,X,ct,vt,W]:null}s(o,"diff_halfMatchI_");var c=o(t,i,Math.ceil(t.length/4)),d=o(t,i,Math.ceil(t.length/2)),m;if(!c&&!d)return null;d?c?m=c[4].length>d[4].length?c:d:m=d:m=c;var v,_,T,S;n.length>e.length?(v=m[0],_=m[1],T=m[2],S=m[3]):(T=m[0],S=m[1],v=m[2],_=m[3]);var O=m[4];return[v,_,T,S,O]}s(mk,"diff_halfMatch_");function gk(n){for(var e=!1,t=[],i=0,o=null,c=0,d=0,m=0,v=0,_=0;c<n.length;)n[c][0]==zn?(t[i++]=c,d=v,m=_,v=0,_=0,o=n[c][1]):(n[c][0]==Mi?v+=n[c][1].length:_+=n[c][1].length,o&&o.length<=Math.max(d,m)&&o.length<=Math.max(v,_)&&(n.splice(t[i-1],0,[fr,o]),n[t[i-1]+1][0]=Mi,i--,i--,c=i>0?t[i-1]:-1,d=0,m=0,v=0,_=0,o=null,e=!0)),c++;for(e&&og(n),yk(n),c=1;c<n.length;){if(n[c-1][0]==fr&&n[c][0]==Mi){var T=n[c-1][1],S=n[c][1],O=q_(T,S),M=q_(S,T);O>=M?(O>=T.length/2||O>=S.length/2)&&(n.splice(c,0,[zn,S.substring(0,O)]),n[c-1][1]=T.substring(0,T.length-O),n[c+1][1]=S.substring(O),c++):(M>=T.length/2||M>=S.length/2)&&(n.splice(c,0,[zn,T.substring(0,M)]),n[c-1][0]=Mi,n[c-1][1]=S.substring(0,S.length-M),n[c+1][0]=fr,n[c+1][1]=T.substring(M),c++),c++}c++}}s(gk,"diff_cleanupSemantic");var B_=/[^a-zA-Z0-9]/,j_=/\s/,F_=/[\r\n]/,vk=/\n\r?\n$/,bk=/^\r?\n\r?\n/;function yk(n){function e(M,D){if(!M||!D)return 6;var j=M.charAt(M.length-1),I=D.charAt(0),B=j.match(B_),W=I.match(B_),G=B&&j.match(j_),X=W&&I.match(j_),ct=G&&j.match(F_),vt=X&&I.match(F_),ht=ct&&M.match(vk),z=vt&&D.match(bk);return ht||z?5:ct||vt?4:B&&!G&&X?3:G||X?2:B||W?1:0}s(e,"diff_cleanupSemanticScore_");for(var t=1;t<n.length-1;){if(n[t-1][0]==zn&&n[t+1][0]==zn){var i=n[t-1][1],o=n[t][1],c=n[t+1][1],d=tf(i,o);if(d){var m=o.substring(o.length-d);i=i.substring(0,i.length-d),o=m+o.substring(0,o.length-d),c=m+c}for(var v=i,_=o,T=c,S=e(i,o)+e(o,c);o.charAt(0)===c.charAt(0);){i+=o.charAt(0),o=o.substring(1)+c.charAt(0),c=c.substring(1);var O=e(i,o)+e(o,c);O>=S&&(S=O,v=i,_=o,T=c)}n[t-1][1]!=v&&(v?n[t-1][1]=v:(n.splice(t-1,1),t--),n[t][1]=_,T?n[t+1][1]=T:(n.splice(t+1,1),t--))}t++}}s(yk,"diff_cleanupSemanticLossless");function og(n,e){n.push([zn,""]);for(var t=0,i=0,o=0,c="",d="",m;t<n.length;){if(t<n.length-1&&!n[t][1]){n.splice(t,1);continue}switch(n[t][0]){case Mi:o++,d+=n[t][1],t++;break;case fr:i++,c+=n[t][1],t++;break;case zn:var v=t-o-i-1;if(e){if(v>=0&&W_(n[v][1])){var _=n[v][1].slice(-1);if(n[v][1]=n[v][1].slice(0,-1),c=_+c,d=_+d,!n[v][1]){n.splice(v,1),t--;var T=v-1;n[T]&&n[T][0]===Mi&&(o++,d=n[T][1]+d,T--),n[T]&&n[T][0]===fr&&(i++,c=n[T][1]+c,T--),v=T}}if(U_(n[t][1])){var _=n[t][1].charAt(0);n[t][1]=n[t][1].slice(1),c+=_,d+=_}}if(t<n.length-1&&!n[t][1]){n.splice(t,1);break}if(c.length>0||d.length>0){c.length>0&&d.length>0&&(m=sg(d,c),m!==0&&(v>=0?n[v][1]+=d.substring(0,m):(n.splice(0,0,[zn,d.substring(0,m)]),t++),d=d.substring(m),c=c.substring(m)),m=tf(d,c),m!==0&&(n[t][1]=d.substring(d.length-m)+n[t][1],d=d.substring(0,d.length-m),c=c.substring(0,c.length-m)));var S=o+i;c.length===0&&d.length===0?(n.splice(t-S,S),t=t-S):c.length===0?(n.splice(t-S,S,[Mi,d]),t=t-S+1):d.length===0?(n.splice(t-S,S,[fr,c]),t=t-S+1):(n.splice(t-S,S,[fr,c],[Mi,d]),t=t-S+2)}t!==0&&n[t-1][0]===zn?(n[t-1][1]+=n[t][1],n.splice(t,1)):t++,o=0,i=0,c="",d="";break}}n[n.length-1][1]===""&&n.pop();var O=!1;for(t=1;t<n.length-1;)n[t-1][0]===zn&&n[t+1][0]===zn&&(n[t][1].substring(n[t][1].length-n[t-1][1].length)===n[t-1][1]?(n[t][1]=n[t-1][1]+n[t][1].substring(0,n[t][1].length-n[t-1][1].length),n[t+1][1]=n[t-1][1]+n[t+1][1],n.splice(t-1,1),O=!0):n[t][1].substring(0,n[t+1][1].length)==n[t+1][1]&&(n[t-1][1]+=n[t+1][1],n[t][1]=n[t][1].substring(n[t+1][1].length)+n[t+1][1],n.splice(t+1,1),O=!0)),t++;O&&og(n,e)}s(og,"diff_cleanupMerge");function H_(n){return n>=55296&&n<=56319}s(H_,"is_surrogate_pair_start");function z_(n){return n>=56320&&n<=57343}s(z_,"is_surrogate_pair_end");function U_(n){return z_(n.charCodeAt(0))}s(U_,"starts_with_pair_end");function W_(n){return H_(n.charCodeAt(n.length-1))}s(W_,"ends_with_pair_start");function _k(n){for(var e=[],t=0;t<n.length;t++)n[t][1].length>0&&e.push(n[t]);return e}s(_k,"remove_empty_tuples");function rg(n,e,t,i){return W_(n)||U_(i)?null:_k([[zn,n],[fr,e],[Mi,t],[zn,i]])}s(rg,"make_edit_splice");function wk(n,e,t){var i=typeof t=="number"?{index:t,length:0}:t.oldRange,o=typeof t=="number"?null:t.newRange,c=n.length,d=e.length;if(i.length===0&&(o===null||o.length===0)){var m=i.index,v=n.slice(0,m),_=n.slice(m),T=o?o.index:null;t:{var S=m+d-c;if(T!==null&&T!==S||S<0||S>d)break t;var O=e.slice(0,S),M=e.slice(S);if(M!==_)break t;var D=Math.min(m,S),j=v.slice(0,D),I=O.slice(0,D);if(j!==I)break t;var B=v.slice(D),W=O.slice(D);return rg(j,B,W,_)}t:{if(T!==null&&T!==m)break t;var G=m,O=e.slice(0,G),M=e.slice(G);if(O!==v)break t;var X=Math.min(c-G,d-G),ct=_.slice(_.length-X),vt=M.slice(M.length-X);if(ct!==vt)break t;var B=_.slice(0,_.length-X),W=M.slice(0,M.length-X);return rg(v,B,W,ct)}}if(i.length>0&&o&&o.length===0)t:{var j=n.slice(0,i.index),ct=n.slice(i.index+i.length),D=j.length,X=ct.length;if(d<D+X)break t;var I=e.slice(0,D),vt=e.slice(d-X);if(j!==I||ct!==vt)break t;var B=n.slice(D,c-X),W=e.slice(D,d-X);return rg(j,B,W,ct)}return null}s(wk,"find_cursor_edit_diff");function ef(n,e,t,i){return Au(n,e,t,i,!0)}s(ef,"diff");ef.INSERT=Mi;ef.DELETE=fr;ef.EQUAL=zn;V_.exports=ef});var wg=Tr((Cu,Il)=>{var xk=200,rw="__lodash_hash_undefined__",sw=9007199254740991,pg="[object Arguments]",Ek="[object Array]",ow="[object Boolean]",aw="[object Date]",Tk="[object Error]",mg="[object Function]",lw="[object GeneratorFunction]",nf="[object Map]",cw="[object Number]",gg="[object Object]",$_="[object Promise]",uw="[object RegExp]",rf="[object Set]",hw="[object String]",dw="[object Symbol]",lg="[object WeakMap]",fw="[object ArrayBuffer]",sf="[object DataView]",pw="[object Float32Array]",mw="[object Float64Array]",gw="[object Int8Array]",vw="[object Int16Array]",bw="[object Int32Array]",yw="[object Uint8Array]",_w="[object Uint8ClampedArray]",ww="[object Uint16Array]",xw="[object Uint32Array]",Sk=/[\\^$.*+?()[\]{}|]/g,Ak=/\w*$/,Ck=/^\[object .+?Constructor\]$/,Lk=/^(?:0|[1-9]\d*)$/,cn={};cn[pg]=cn[Ek]=cn[fw]=cn[sf]=cn[ow]=cn[aw]=cn[pw]=cn[mw]=cn[gw]=cn[vw]=cn[bw]=cn[nf]=cn[cw]=cn[gg]=cn[uw]=cn[rf]=cn[hw]=cn[dw]=cn[yw]=cn[_w]=cn[ww]=cn[xw]=!0;cn[Tk]=cn[mg]=cn[lg]=!1;var Nk=typeof global=="object"&&global&&global.Object===Object&&global,Ok=typeof self=="object"&&self&&self.Object===Object&&self,Is=Nk||Ok||Function("return this")(),Ew=typeof Cu=="object"&&Cu&&!Cu.nodeType&&Cu,K_=Ew&&typeof Il=="object"&&Il&&!Il.nodeType&&Il,Mk=K_&&K_.exports===Ew;function kk(n,e){return n.set(e[0],e[1]),n}s(kk,"addMapEntry");function Dk(n,e){return n.add(e),n}s(Dk,"addSetEntry");function Ik(n,e){for(var t=-1,i=n?n.length:0;++t<i&&e(n[t],t,n)!==!1;);return n}s(Ik,"arrayEach");function Pk(n,e){for(var t=-1,i=e.length,o=n.length;++t<i;)n[o+t]=e[t];return n}s(Pk,"arrayPush");function Tw(n,e,t,i){var o=-1,c=n?n.length:0;for(i&&c&&(t=n[++o]);++o<c;)t=e(t,n[o],o,n);return t}s(Tw,"arrayReduce");function Rk(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}s(Rk,"baseTimes");function qk(n,e){return n?.[e]}s(qk,"getValue");function Sw(n){var e=!1;if(n!=null&&typeof n.toString!="function")try{e=!!(n+"")}catch{}return e}s(Sw,"isHostObject");function Y_(n){var e=-1,t=Array(n.size);return n.forEach(function(i,o){t[++e]=[o,i]}),t}s(Y_,"mapToArray");function vg(n,e){return function(t){return n(e(t))}}s(vg,"overArg");function G_(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}s(G_,"setToArray");var Bk=Array.prototype,jk=Function.prototype,of=Object.prototype,ag=Is["__core-js_shared__"],X_=function(){var n=/[^.]+$/.exec(ag&&ag.keys&&ag.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Aw=jk.toString,Co=of.hasOwnProperty,af=of.toString,Fk=RegExp("^"+Aw.call(Co).replace(Sk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J_=Mk?Is.Buffer:void 0,Q_=Is.Symbol,tw=Is.Uint8Array,Hk=vg(Object.getPrototypeOf,Object),zk=Object.create,Uk=of.propertyIsEnumerable,Wk=Bk.splice,ew=Object.getOwnPropertySymbols,Vk=J_?J_.isBuffer:void 0,Zk=vg(Object.keys,Object),cg=ql(Is,"DataView"),Lu=ql(Is,"Map"),ug=ql(Is,"Promise"),hg=ql(Is,"Set"),dg=ql(Is,"WeakMap"),Nu=ql(Object,"create"),$k=xa(cg),Kk=xa(Lu),Yk=xa(ug),Gk=xa(hg),Xk=xa(dg),nw=Q_?Q_.prototype:void 0,iw=nw?nw.valueOf:void 0;function wa(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(wa,"Hash");function Jk(){this.__data__=Nu?Nu(null):{}}s(Jk,"hashClear");function Qk(n){return this.has(n)&&delete this.__data__[n]}s(Qk,"hashDelete");function tD(n){var e=this.__data__;if(Nu){var t=e[n];return t===rw?void 0:t}return Co.call(e,n)?e[n]:void 0}s(tD,"hashGet");function eD(n){var e=this.__data__;return Nu?e[n]!==void 0:Co.call(e,n)}s(eD,"hashHas");function nD(n,e){var t=this.__data__;return t[n]=Nu&&e===void 0?rw:e,this}s(nD,"hashSet");wa.prototype.clear=Jk;wa.prototype.delete=Qk;wa.prototype.get=tD;wa.prototype.has=eD;wa.prototype.set=nD;function Ps(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(Ps,"ListCache");function iD(){this.__data__=[]}s(iD,"listCacheClear");function rD(n){var e=this.__data__,t=lf(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():Wk.call(e,t,1),!0}s(rD,"listCacheDelete");function sD(n){var e=this.__data__,t=lf(e,n);return t<0?void 0:e[t][1]}s(sD,"listCacheGet");function oD(n){return lf(this.__data__,n)>-1}s(oD,"listCacheHas");function aD(n,e){var t=this.__data__,i=lf(t,n);return i<0?t.push([n,e]):t[i][1]=e,this}s(aD,"listCacheSet");Ps.prototype.clear=iD;Ps.prototype.delete=rD;Ps.prototype.get=sD;Ps.prototype.has=oD;Ps.prototype.set=aD;function Pl(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(Pl,"MapCache");function lD(){this.__data__={hash:new wa,map:new(Lu||Ps),string:new wa}}s(lD,"mapCacheClear");function cD(n){return cf(this,n).delete(n)}s(cD,"mapCacheDelete");function uD(n){return cf(this,n).get(n)}s(uD,"mapCacheGet");function hD(n){return cf(this,n).has(n)}s(hD,"mapCacheHas");function dD(n,e){return cf(this,n).set(n,e),this}s(dD,"mapCacheSet");Pl.prototype.clear=lD;Pl.prototype.delete=cD;Pl.prototype.get=uD;Pl.prototype.has=hD;Pl.prototype.set=dD;function Rl(n){this.__data__=new Ps(n)}s(Rl,"Stack");function fD(){this.__data__=new Ps}s(fD,"stackClear");function pD(n){return this.__data__.delete(n)}s(pD,"stackDelete");function mD(n){return this.__data__.get(n)}s(mD,"stackGet");function gD(n){return this.__data__.has(n)}s(gD,"stackHas");function vD(n,e){var t=this.__data__;if(t instanceof Ps){var i=t.__data__;if(!Lu||i.length<xk-1)return i.push([n,e]),this;t=this.__data__=new Pl(i)}return t.set(n,e),this}s(vD,"stackSet");Rl.prototype.clear=fD;Rl.prototype.delete=pD;Rl.prototype.get=mD;Rl.prototype.has=gD;Rl.prototype.set=vD;function bD(n,e){var t=yg(n)||zD(n)?Rk(n.length,String):[],i=t.length,o=!!i;for(var c in n)(e||Co.call(n,c))&&!(o&&(c=="length"||BD(c,i)))&&t.push(c);return t}s(bD,"arrayLikeKeys");function Cw(n,e,t){var i=n[e];(!(Co.call(n,e)&&Mw(i,t))||t===void 0&&!(e in n))&&(n[e]=t)}s(Cw,"assignValue");function lf(n,e){for(var t=n.length;t--;)if(Mw(n[t][0],e))return t;return-1}s(lf,"assocIndexOf");function yD(n,e){return n&&Lw(e,_g(e),n)}s(yD,"baseAssign");function fg(n,e,t,i,o,c,d){var m;if(i&&(m=c?i(n,o,c,d):i(n)),m!==void 0)return m;if(!uf(n))return n;var v=yg(n);if(v){if(m=PD(n),!e)return kD(n,m)}else{var _=_a(n),T=_==mg||_==lw;if(WD(n))return SD(n,e);if(_==gg||_==pg||T&&!c){if(Sw(n))return c?n:{};if(m=RD(T?{}:n),!e)return DD(n,yD(m,n))}else{if(!cn[_])return c?n:{};m=qD(n,_,fg,e)}}d||(d=new Rl);var S=d.get(n);if(S)return S;if(d.set(n,m),!v)var O=t?ID(n):_g(n);return Ik(O||n,function(M,D){O&&(D=M,M=n[D]),Cw(m,D,fg(M,e,t,i,D,n,d))}),m}s(fg,"baseClone");function _D(n){return uf(n)?zk(n):{}}s(_D,"baseCreate");function wD(n,e,t){var i=e(n);return yg(n)?i:Pk(i,t(n))}s(wD,"baseGetAllKeys");function xD(n){return af.call(n)}s(xD,"baseGetTag");function ED(n){if(!uf(n)||FD(n))return!1;var e=Dw(n)||Sw(n)?Fk:Ck;return e.test(xa(n))}s(ED,"baseIsNative");function TD(n){if(!Ow(n))return Zk(n);var e=[];for(var t in Object(n))Co.call(n,t)&&t!="constructor"&&e.push(t);return e}s(TD,"baseKeys");function SD(n,e){if(e)return n.slice();var t=new n.constructor(n.length);return n.copy(t),t}s(SD,"cloneBuffer");function bg(n){var e=new n.constructor(n.byteLength);return new tw(e).set(new tw(n)),e}s(bg,"cloneArrayBuffer");function AD(n,e){var t=e?bg(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}s(AD,"cloneDataView");function CD(n,e,t){var i=e?t(Y_(n),!0):Y_(n);return Tw(i,kk,new n.constructor)}s(CD,"cloneMap");function LD(n){var e=new n.constructor(n.source,Ak.exec(n));return e.lastIndex=n.lastIndex,e}s(LD,"cloneRegExp");function ND(n,e,t){var i=e?t(G_(n),!0):G_(n);return Tw(i,Dk,new n.constructor)}s(ND,"cloneSet");function OD(n){return iw?Object(iw.call(n)):{}}s(OD,"cloneSymbol");function MD(n,e){var t=e?bg(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}s(MD,"cloneTypedArray");function kD(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}s(kD,"copyArray");function Lw(n,e,t,i){t||(t={});for(var o=-1,c=e.length;++o<c;){var d=e[o],m=i?i(t[d],n[d],d,t,n):void 0;Cw(t,d,m===void 0?n[d]:m)}return t}s(Lw,"copyObject");function DD(n,e){return Lw(n,Nw(n),e)}s(DD,"copySymbols");function ID(n){return wD(n,_g,Nw)}s(ID,"getAllKeys");function cf(n,e){var t=n.__data__;return jD(e)?t[typeof e=="string"?"string":"hash"]:t.map}s(cf,"getMapData");function ql(n,e){var t=qk(n,e);return ED(t)?t:void 0}s(ql,"getNative");var Nw=ew?vg(ew,Object):$D,_a=xD;(cg&&_a(new cg(new ArrayBuffer(1)))!=sf||Lu&&_a(new Lu)!=nf||ug&&_a(ug.resolve())!=$_||hg&&_a(new hg)!=rf||dg&&_a(new dg)!=lg)&&(_a=s(function(n){var e=af.call(n),t=e==gg?n.constructor:void 0,i=t?xa(t):void 0;if(i)switch(i){case $k:return sf;case Kk:return nf;case Yk:return $_;case Gk:return rf;case Xk:return lg}return e},"getTag"));function PD(n){var e=n.length,t=n.constructor(e);return e&&typeof n[0]=="string"&&Co.call(n,"index")&&(t.index=n.index,t.input=n.input),t}s(PD,"initCloneArray");function RD(n){return typeof n.constructor=="function"&&!Ow(n)?_D(Hk(n)):{}}s(RD,"initCloneObject");function qD(n,e,t,i){var o=n.constructor;switch(e){case fw:return bg(n);case ow:case aw:return new o(+n);case sf:return AD(n,i);case pw:case mw:case gw:case vw:case bw:case yw:case _w:case ww:case xw:return MD(n,i);case nf:return CD(n,i,t);case cw:case hw:return new o(n);case uw:return LD(n);case rf:return ND(n,i,t);case dw:return OD(n)}}s(qD,"initCloneByTag");function BD(n,e){return e=e??sw,!!e&&(typeof n=="number"||Lk.test(n))&&n>-1&&n%1==0&&n<e}s(BD,"isIndex");function jD(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}s(jD,"isKeyable");function FD(n){return!!X_&&X_ in n}s(FD,"isMasked");function Ow(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||of;return n===t}s(Ow,"isPrototype");function xa(n){if(n!=null){try{return Aw.call(n)}catch{}try{return n+""}catch{}}return""}s(xa,"toSource");function HD(n){return fg(n,!0,!0)}s(HD,"cloneDeep");function Mw(n,e){return n===e||n!==n&&e!==e}s(Mw,"eq");function zD(n){return UD(n)&&Co.call(n,"callee")&&(!Uk.call(n,"callee")||af.call(n)==pg)}s(zD,"isArguments");var yg=Array.isArray;function kw(n){return n!=null&&VD(n.length)&&!Dw(n)}s(kw,"isArrayLike");function UD(n){return ZD(n)&&kw(n)}s(UD,"isArrayLikeObject");var WD=Vk||KD;function Dw(n){var e=uf(n)?af.call(n):"";return e==mg||e==lw}s(Dw,"isFunction");function VD(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=sw}s(VD,"isLength");function uf(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}s(uf,"isObject");function ZD(n){return!!n&&typeof n=="object"}s(ZD,"isObjectLike");function _g(n){return kw(n)?bD(n):TD(n)}s(_g,"keys");function $D(){return[]}s($D,"stubArray");function KD(){return!1}s(KD,"stubFalse");Il.exports=HD});var Dg=Tr((Ou,jl)=>{var YD=200,kg="__lodash_hash_undefined__",bf=1,Vw=2,Zw=9007199254740991,hf="[object Arguments]",Sg="[object Array]",GD="[object AsyncFunction]",$w="[object Boolean]",Kw="[object Date]",Yw="[object Error]",Gw="[object Function]",XD="[object GeneratorFunction]",df="[object Map]",Xw="[object Number]",JD="[object Null]",Bl="[object Object]",Iw="[object Promise]",QD="[object Proxy]",Jw="[object RegExp]",ff="[object Set]",Qw="[object String]",tI="[object Symbol]",eI="[object Undefined]",Ag="[object WeakMap]",tx="[object ArrayBuffer]",pf="[object DataView]",nI="[object Float32Array]",iI="[object Float64Array]",rI="[object Int8Array]",sI="[object Int16Array]",oI="[object Int32Array]",aI="[object Uint8Array]",lI="[object Uint8ClampedArray]",cI="[object Uint16Array]",uI="[object Uint32Array]",hI=/[\\^$.*+?()[\]{}|]/g,dI=/^\[object .+?Constructor\]$/,fI=/^(?:0|[1-9]\d*)$/,fn={};fn[nI]=fn[iI]=fn[rI]=fn[sI]=fn[oI]=fn[aI]=fn[lI]=fn[cI]=fn[uI]=!0;fn[hf]=fn[Sg]=fn[tx]=fn[$w]=fn[pf]=fn[Kw]=fn[Yw]=fn[Gw]=fn[df]=fn[Xw]=fn[Bl]=fn[Jw]=fn[ff]=fn[Qw]=fn[Ag]=!1;var ex=typeof global=="object"&&global&&global.Object===Object&&global,pI=typeof self=="object"&&self&&self.Object===Object&&self,Rs=ex||pI||Function("return this")(),nx=typeof Ou=="object"&&Ou&&!Ou.nodeType&&Ou,Pw=nx&&typeof jl=="object"&&jl&&!jl.nodeType&&jl,ix=Pw&&Pw.exports===nx,xg=ix&&ex.process,Rw=function(){try{return xg&&xg.binding&&xg.binding("util")}catch{}}(),qw=Rw&&Rw.isTypedArray;function mI(n,e){for(var t=-1,i=n==null?0:n.length,o=0,c=[];++t<i;){var d=n[t];e(d,t,n)&&(c[o++]=d)}return c}s(mI,"arrayFilter");function gI(n,e){for(var t=-1,i=e.length,o=n.length;++t<i;)n[o+t]=e[t];return n}s(gI,"arrayPush");function vI(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}s(vI,"arraySome");function bI(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}s(bI,"baseTimes");function yI(n){return function(e){return n(e)}}s(yI,"baseUnary");function _I(n,e){return n.has(e)}s(_I,"cacheHas");function wI(n,e){return n?.[e]}s(wI,"getValue");function xI(n){var e=-1,t=Array(n.size);return n.forEach(function(i,o){t[++e]=[o,i]}),t}s(xI,"mapToArray");function EI(n,e){return function(t){return n(e(t))}}s(EI,"overArg");function TI(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}s(TI,"setToArray");var SI=Array.prototype,AI=Function.prototype,yf=Object.prototype,Eg=Rs["__core-js_shared__"],rx=AI.toString,us=yf.hasOwnProperty,Bw=function(){var n=/[^.]+$/.exec(Eg&&Eg.keys&&Eg.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),sx=yf.toString,CI=RegExp("^"+rx.call(us).replace(hI,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jw=ix?Rs.Buffer:void 0,mf=Rs.Symbol,Fw=Rs.Uint8Array,ox=yf.propertyIsEnumerable,LI=SI.splice,Ea=mf?mf.toStringTag:void 0,Hw=Object.getOwnPropertySymbols,NI=jw?jw.isBuffer:void 0,OI=EI(Object.keys,Object),Cg=Fl(Rs,"DataView"),Mu=Fl(Rs,"Map"),Lg=Fl(Rs,"Promise"),Ng=Fl(Rs,"Set"),Og=Fl(Rs,"WeakMap"),ku=Fl(Object,"create"),MI=Aa(Cg),kI=Aa(Mu),DI=Aa(Lg),II=Aa(Ng),PI=Aa(Og),zw=mf?mf.prototype:void 0,Tg=zw?zw.valueOf:void 0;function Ta(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(Ta,"Hash");function RI(){this.__data__=ku?ku(null):{},this.size=0}s(RI,"hashClear");function qI(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}s(qI,"hashDelete");function BI(n){var e=this.__data__;if(ku){var t=e[n];return t===kg?void 0:t}return us.call(e,n)?e[n]:void 0}s(BI,"hashGet");function jI(n){var e=this.__data__;return ku?e[n]!==void 0:us.call(e,n)}s(jI,"hashHas");function FI(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=ku&&e===void 0?kg:e,this}s(FI,"hashSet");Ta.prototype.clear=RI;Ta.prototype.delete=qI;Ta.prototype.get=BI;Ta.prototype.has=jI;Ta.prototype.set=FI;function qs(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(qs,"ListCache");function HI(){this.__data__=[],this.size=0}s(HI,"listCacheClear");function zI(n){var e=this.__data__,t=_f(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():LI.call(e,t,1),--this.size,!0}s(zI,"listCacheDelete");function UI(n){var e=this.__data__,t=_f(e,n);return t<0?void 0:e[t][1]}s(UI,"listCacheGet");function WI(n){return _f(this.__data__,n)>-1}s(WI,"listCacheHas");function VI(n,e){var t=this.__data__,i=_f(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}s(VI,"listCacheSet");qs.prototype.clear=HI;qs.prototype.delete=zI;qs.prototype.get=UI;qs.prototype.has=WI;qs.prototype.set=VI;function Sa(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(Sa,"MapCache");function ZI(){this.size=0,this.__data__={hash:new Ta,map:new(Mu||qs),string:new Ta}}s(ZI,"mapCacheClear");function $I(n){var e=wf(this,n).delete(n);return this.size-=e?1:0,e}s($I,"mapCacheDelete");function KI(n){return wf(this,n).get(n)}s(KI,"mapCacheGet");function YI(n){return wf(this,n).has(n)}s(YI,"mapCacheHas");function GI(n,e){var t=wf(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}s(GI,"mapCacheSet");Sa.prototype.clear=ZI;Sa.prototype.delete=$I;Sa.prototype.get=KI;Sa.prototype.has=YI;Sa.prototype.set=GI;function gf(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Sa;++e<t;)this.add(n[e])}s(gf,"SetCache");function XI(n){return this.__data__.set(n,kg),this}s(XI,"setCacheAdd");function JI(n){return this.__data__.has(n)}s(JI,"setCacheHas");gf.prototype.add=gf.prototype.push=XI;gf.prototype.has=JI;function No(n){var e=this.__data__=new qs(n);this.size=e.size}s(No,"Stack");function QI(){this.__data__=new qs,this.size=0}s(QI,"stackClear");function tP(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}s(tP,"stackDelete");function eP(n){return this.__data__.get(n)}s(eP,"stackGet");function nP(n){return this.__data__.has(n)}s(nP,"stackHas");function iP(n,e){var t=this.__data__;if(t instanceof qs){var i=t.__data__;if(!Mu||i.length<YD-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Sa(i)}return t.set(n,e),this.size=t.size,this}s(iP,"stackSet");No.prototype.clear=QI;No.prototype.delete=tP;No.prototype.get=eP;No.prototype.has=nP;No.prototype.set=iP;function rP(n,e){var t=vf(n),i=!t&&yP(n),o=!t&&!i&&Mg(n),c=!t&&!i&&!o&&fx(n),d=t||i||o||c,m=d?bI(n.length,String):[],v=m.length;for(var _ in n)(e||us.call(n,_))&&!(d&&(_=="length"||o&&(_=="offset"||_=="parent")||c&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||pP(_,v)))&&m.push(_);return m}s(rP,"arrayLikeKeys");function _f(n,e){for(var t=n.length;t--;)if(cx(n[t][0],e))return t;return-1}s(_f,"assocIndexOf");function sP(n,e,t){var i=e(n);return vf(n)?i:gI(i,t(n))}s(sP,"baseGetAllKeys");function Iu(n){return n==null?n===void 0?eI:JD:Ea&&Ea in Object(n)?dP(n):bP(n)}s(Iu,"baseGetTag");function Uw(n){return Du(n)&&Iu(n)==hf}s(Uw,"baseIsArguments");function ax(n,e,t,i,o){return n===e?!0:n==null||e==null||!Du(n)&&!Du(e)?n!==n&&e!==e:oP(n,e,t,i,ax,o)}s(ax,"baseIsEqual");function oP(n,e,t,i,o,c){var d=vf(n),m=vf(e),v=d?Sg:Lo(n),_=m?Sg:Lo(e);v=v==hf?Bl:v,_=_==hf?Bl:_;var T=v==Bl,S=_==Bl,O=v==_;if(O&&Mg(n)){if(!Mg(e))return!1;d=!0,T=!1}if(O&&!T)return c||(c=new No),d||fx(n)?lx(n,e,t,i,o,c):uP(n,e,v,t,i,o,c);if(!(t&bf)){var M=T&&us.call(n,"__wrapped__"),D=S&&us.call(e,"__wrapped__");if(M||D){var j=M?n.value():n,I=D?e.value():e;return c||(c=new No),o(j,I,t,i,c)}}return O?(c||(c=new No),hP(n,e,t,i,o,c)):!1}s(oP,"baseIsEqualDeep");function aP(n){if(!dx(n)||gP(n))return!1;var e=ux(n)?CI:dI;return e.test(Aa(n))}s(aP,"baseIsNative");function lP(n){return Du(n)&&hx(n.length)&&!!fn[Iu(n)]}s(lP,"baseIsTypedArray");function cP(n){if(!vP(n))return OI(n);var e=[];for(var t in Object(n))us.call(n,t)&&t!="constructor"&&e.push(t);return e}s(cP,"baseKeys");function lx(n,e,t,i,o,c){var d=t&bf,m=n.length,v=e.length;if(m!=v&&!(d&&v>m))return!1;var _=c.get(n);if(_&&c.get(e))return _==e;var T=-1,S=!0,O=t&Vw?new gf:void 0;for(c.set(n,e),c.set(e,n);++T<m;){var M=n[T],D=e[T];if(i)var j=d?i(D,M,T,e,n,c):i(M,D,T,n,e,c);if(j!==void 0){if(j)continue;S=!1;break}if(O){if(!vI(e,function(I,B){if(!_I(O,B)&&(M===I||o(M,I,t,i,c)))return O.push(B)})){S=!1;break}}else if(!(M===D||o(M,D,t,i,c))){S=!1;break}}return c.delete(n),c.delete(e),S}s(lx,"equalArrays");function uP(n,e,t,i,o,c,d){switch(t){case pf:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case tx:return!(n.byteLength!=e.byteLength||!c(new Fw(n),new Fw(e)));case $w:case Kw:case Xw:return cx(+n,+e);case Yw:return n.name==e.name&&n.message==e.message;case Jw:case Qw:return n==e+"";case df:var m=xI;case ff:var v=i&bf;if(m||(m=TI),n.size!=e.size&&!v)return!1;var _=d.get(n);if(_)return _==e;i|=Vw,d.set(n,e);var T=lx(m(n),m(e),i,o,c,d);return d.delete(n),T;case tI:if(Tg)return Tg.call(n)==Tg.call(e)}return!1}s(uP,"equalByTag");function hP(n,e,t,i,o,c){var d=t&bf,m=Ww(n),v=m.length,_=Ww(e),T=_.length;if(v!=T&&!d)return!1;for(var S=v;S--;){var O=m[S];if(!(d?O in e:us.call(e,O)))return!1}var M=c.get(n);if(M&&c.get(e))return M==e;var D=!0;c.set(n,e),c.set(e,n);for(var j=d;++S<v;){O=m[S];var I=n[O],B=e[O];if(i)var W=d?i(B,I,O,e,n,c):i(I,B,O,n,e,c);if(!(W===void 0?I===B||o(I,B,t,i,c):W)){D=!1;break}j||(j=O=="constructor")}if(D&&!j){var G=n.constructor,X=e.constructor;G!=X&&"constructor"in n&&"constructor"in e&&!(typeof G=="function"&&G instanceof G&&typeof X=="function"&&X instanceof X)&&(D=!1)}return c.delete(n),c.delete(e),D}s(hP,"equalObjects");function Ww(n){return sP(n,xP,fP)}s(Ww,"getAllKeys");function wf(n,e){var t=n.__data__;return mP(e)?t[typeof e=="string"?"string":"hash"]:t.map}s(wf,"getMapData");function Fl(n,e){var t=wI(n,e);return aP(t)?t:void 0}s(Fl,"getNative");function dP(n){var e=us.call(n,Ea),t=n[Ea];try{n[Ea]=void 0;var i=!0}catch{}var o=sx.call(n);return i&&(e?n[Ea]=t:delete n[Ea]),o}s(dP,"getRawTag");var fP=Hw?function(n){return n==null?[]:(n=Object(n),mI(Hw(n),function(e){return ox.call(n,e)}))}:EP,Lo=Iu;(Cg&&Lo(new Cg(new ArrayBuffer(1)))!=pf||Mu&&Lo(new Mu)!=df||Lg&&Lo(Lg.resolve())!=Iw||Ng&&Lo(new Ng)!=ff||Og&&Lo(new Og)!=Ag)&&(Lo=s(function(n){var e=Iu(n),t=e==Bl?n.constructor:void 0,i=t?Aa(t):"";if(i)switch(i){case MI:return pf;case kI:return df;case DI:return Iw;case II:return ff;case PI:return Ag}return e},"getTag"));function pP(n,e){return e=e??Zw,!!e&&(typeof n=="number"||fI.test(n))&&n>-1&&n%1==0&&n<e}s(pP,"isIndex");function mP(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}s(mP,"isKeyable");function gP(n){return!!Bw&&Bw in n}s(gP,"isMasked");function vP(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||yf;return n===t}s(vP,"isPrototype");function bP(n){return sx.call(n)}s(bP,"objectToString");function Aa(n){if(n!=null){try{return rx.call(n)}catch{}try{return n+""}catch{}}return""}s(Aa,"toSource");function cx(n,e){return n===e||n!==n&&e!==e}s(cx,"eq");var yP=Uw(function(){return arguments}())?Uw:function(n){return Du(n)&&us.call(n,"callee")&&!ox.call(n,"callee")},vf=Array.isArray;function _P(n){return n!=null&&hx(n.length)&&!ux(n)}s(_P,"isArrayLike");var Mg=NI||TP;function wP(n,e){return ax(n,e)}s(wP,"isEqual");function ux(n){if(!dx(n))return!1;var e=Iu(n);return e==Gw||e==XD||e==GD||e==QD}s(ux,"isFunction");function hx(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Zw}s(hx,"isLength");function dx(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}s(dx,"isObject");function Du(n){return n!=null&&typeof n=="object"}s(Du,"isObjectLike");var fx=qw?yI(qw):lP;function xP(n){return _P(n)?rP(n):cP(n)}s(xP,"keys");function EP(){return[]}s(EP,"stubArray");function TP(){return!1}s(TP,"stubFalse");jl.exports=wP});var px=Tr(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});var SP=wg(),AP=Dg(),Ig;(function(n){function e(c={},d={},m=!1){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});let v=SP(d);m||(v=Object.keys(v).reduce((_,T)=>(v[T]!=null&&(_[T]=v[T]),_),{}));for(let _ in c)c[_]!==void 0&&d[_]===void 0&&(v[_]=c[_]);return Object.keys(v).length>0?v:void 0}s(e,"compose"),n.compose=e;function t(c={},d={}){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});let m=Object.keys(c).concat(Object.keys(d)).reduce((v,_)=>(AP(c[_],d[_])||(v[_]=d[_]===void 0?null:d[_]),v),{});return Object.keys(m).length>0?m:void 0}s(t,"diff"),n.diff=t;function i(c={},d={}){c=c||{};let m=Object.keys(d).reduce((v,_)=>(d[_]!==c[_]&&c[_]!==void 0&&(v[_]=d[_]),v),{});return Object.keys(c).reduce((v,_)=>(c[_]!==d[_]&&d[_]===void 0&&(v[_]=null),v),m)}s(i,"invert"),n.invert=i;function o(c,d,m=!1){if(typeof c!="object")return d;if(typeof d!="object")return;if(!m)return d;let v=Object.keys(d).reduce((_,T)=>(c[T]===void 0&&(_[T]=d[T]),_),{});return Object.keys(v).length>0?v:void 0}s(o,"transform"),n.transform=o})(Ig||(Ig={}));Pg.default=Ig});var Bg=Tr(qg=>{"use strict";Object.defineProperty(qg,"__esModule",{value:!0});var Rg;(function(n){function e(t){return typeof t.delete=="number"?t.delete:typeof t.retain=="number"?t.retain:typeof t.retain=="object"&&t.retain!==null?1:typeof t.insert=="string"?t.insert.length:1}s(e,"length"),n.length=e})(Rg||(Rg={}));qg.default=Rg});var gx=Tr(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});var mx=Bg(),jg=class{static{s(this,"Iterator")}constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);let t=this.ops[this.index];if(t){let i=this.offset,o=mx.default.length(t);if(e>=o-i?(e=o-i,this.index+=1,this.offset=0):this.offset+=e,typeof t.delete=="number")return{delete:e};{let c={};return t.attributes&&(c.attributes=t.attributes),typeof t.retain=="number"?c.retain=e:typeof t.retain=="object"&&t.retain!==null?c.retain=t.retain:typeof t.insert=="string"?c.insert=t.insert.substr(i,e):c.insert=t.insert,c}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?mx.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let e=this.offset,t=this.index,i=this.next(),o=this.ops.slice(this.index);return this.offset=e,this.index=t,[i].concat(o)}}else return[]}};Fg.default=jg});var pr=Tr((js,Ef)=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.AttributeMap=js.OpIterator=js.Op=void 0;var xf=Z_(),CP=wg(),Hg=Dg(),Ca=px();js.AttributeMap=Ca.default;var Bs=Bg();js.Op=Bs.default;var Nr=gx();js.OpIterator=Nr.default;var LP="\0",vx=s((n,e)=>{if(typeof n!="object"||n===null)throw new Error(`cannot retain a ${typeof n}`);if(typeof e!="object"||e===null)throw new Error(`cannot retain a ${typeof e}`);let t=Object.keys(n)[0];if(!t||t!==Object.keys(e)[0])throw new Error(`embed types not matched: ${t} != ${Object.keys(e)[0]}`);return[t,n[t],e[t]]},"getEmbedTypeAndData"),Fs=class n{static{s(this,"Delta")}constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}static registerEmbed(e,t){this.handlers[e]=t}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let t=this.handlers[e];if(!t)throw new Error(`no handlers for embed type "${e}"`);return t}insert(e,t){let i={};return typeof e=="string"&&e.length===0?this:(i.insert=e,t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(i.attributes=t),this.push(i))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if(typeof e=="number"&&e<=0)return this;let i={retain:e};return t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(i.attributes=t),this.push(i)}push(e){let t=this.ops.length,i=this.ops[t-1];if(e=CP(e),typeof i=="object"){if(typeof e.delete=="number"&&typeof i.delete=="number")return this.ops[t-1]={delete:i.delete+e.delete},this;if(typeof i.delete=="number"&&e.insert!=null&&(t-=1,i=this.ops[t-1],typeof i!="object"))return this.ops.unshift(e),this;if(Hg(e.attributes,i.attributes)){if(typeof e.insert=="string"&&typeof i.insert=="string")return this.ops[t-1]={insert:i.insert+e.insert},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof i.retain=="number")return this.ops[t-1]={retain:i.retain+e.retain},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain=="number"&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let t=[],i=[];return this.forEach(o=>{(e(o)?t:i).push(o)}),[t,i]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce((e,t)=>t.insert?e+Bs.default.length(t):t.delete?e-t.delete:e,0)}length(){return this.reduce((e,t)=>e+Bs.default.length(t),0)}slice(e=0,t=1/0){let i=[],o=new Nr.default(this.ops),c=0;for(;c<t&&o.hasNext();){let d;c<e?d=o.next(e-c):(d=o.next(t-c),i.push(d)),c+=Bs.default.length(d)}return new n(i)}compose(e){let t=new Nr.default(this.ops),i=new Nr.default(e.ops),o=[],c=i.peek();if(c!=null&&typeof c.retain=="number"&&c.attributes==null){let m=c.retain;for(;t.peekType()==="insert"&&t.peekLength()<=m;)m-=t.peekLength(),o.push(t.next());c.retain-m>0&&i.next(c.retain-m)}let d=new n(o);for(;t.hasNext()||i.hasNext();)if(i.peekType()==="insert")d.push(i.next());else if(t.peekType()==="delete")d.push(t.next());else{let m=Math.min(t.peekLength(),i.peekLength()),v=t.next(m),_=i.next(m);if(_.retain){let T={};if(typeof v.retain=="number")T.retain=typeof _.retain=="number"?m:_.retain;else if(typeof _.retain=="number")v.retain==null?T.insert=v.insert:T.retain=v.retain;else{let O=v.retain==null?"insert":"retain",[M,D,j]=vx(v[O],_.retain),I=n.getHandler(M);T[O]={[M]:I.compose(D,j,O==="retain")}}let S=Ca.default.compose(v.attributes,_.attributes,typeof v.retain=="number");if(S&&(T.attributes=S),d.push(T),!i.hasNext()&&Hg(d.ops[d.ops.length-1],T)){let O=new n(t.rest());return d.concat(O).chop()}}else typeof _.delete=="number"&&(typeof v.retain=="number"||typeof v.retain=="object"&&v.retain!==null)&&d.push(_)}return d.chop()}concat(e){let t=new n(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t}diff(e,t){if(this.ops===e.ops)return new n;let i=[this,e].map(v=>v.map(_=>{if(_.insert!=null)return typeof _.insert=="string"?_.insert:LP;let T=v===e?"on":"with";throw new Error("diff() called "+T+" non-document")}).join("")),o=new n,c=xf(i[0],i[1],t,!0),d=new Nr.default(this.ops),m=new Nr.default(e.ops);return c.forEach(v=>{let _=v[1].length;for(;_>0;){let T=0;switch(v[0]){case xf.INSERT:T=Math.min(m.peekLength(),_),o.push(m.next(T));break;case xf.DELETE:T=Math.min(_,d.peekLength()),d.next(T),o.delete(T);break;case xf.EQUAL:T=Math.min(d.peekLength(),m.peekLength(),_);let S=d.next(T),O=m.next(T);Hg(S.insert,O.insert)?o.retain(T,Ca.default.diff(S.attributes,O.attributes)):o.push(O).delete(T);break}_-=T}}),o.chop()}eachLine(e,t=`
`){let i=new Nr.default(this.ops),o=new n,c=0;for(;i.hasNext();){if(i.peekType()!=="insert")return;let d=i.peek(),m=Bs.default.length(d)-i.peekLength(),v=typeof d.insert=="string"?d.insert.indexOf(t,m)-m:-1;if(v<0)o.push(i.next());else if(v>0)o.push(i.next(v));else{if(e(o,i.next(1).attributes||{},c)===!1)return;c+=1,o=new n}}o.length()>0&&e(o,{},c)}invert(e){let t=new n;return this.reduce((i,o)=>{if(o.insert)t.delete(Bs.default.length(o));else{if(typeof o.retain=="number"&&o.attributes==null)return t.retain(o.retain),i+o.retain;if(o.delete||typeof o.retain=="number"){let c=o.delete||o.retain;return e.slice(i,i+c).forEach(m=>{o.delete?t.push(m):o.retain&&o.attributes&&t.retain(Bs.default.length(m),Ca.default.invert(o.attributes,m.attributes))}),i+c}else if(typeof o.retain=="object"&&o.retain!==null){let c=e.slice(i,i+1),d=new Nr.default(c.ops).next(),[m,v,_]=vx(o.retain,d.insert),T=n.getHandler(m);return t.retain({[m]:T.invert(v,_)},Ca.default.invert(o.attributes,d.attributes)),i+1}}return i},0),t.chop()}transform(e,t=!1){if(t=!!t,typeof e=="number")return this.transformPosition(e,t);let i=e,o=new Nr.default(this.ops),c=new Nr.default(i.ops),d=new n;for(;o.hasNext()||c.hasNext();)if(o.peekType()==="insert"&&(t||c.peekType()!=="insert"))d.retain(Bs.default.length(o.next()));else if(c.peekType()==="insert")d.push(c.next());else{let m=Math.min(o.peekLength(),c.peekLength()),v=o.next(m),_=c.next(m);if(v.delete)continue;if(_.delete)d.push(_);else{let T=v.retain,S=_.retain,O=typeof S=="object"&&S!==null?S:m;if(typeof T=="object"&&T!==null&&typeof S=="object"&&S!==null){let M=Object.keys(T)[0];if(M===Object.keys(S)[0]){let D=n.getHandler(M);D&&(O={[M]:D.transform(T[M],S[M],t)})}}d.retain(O,Ca.default.transform(v.attributes,_.attributes,t))}}return d.chop()}transformPosition(e,t=!1){t=!!t;let i=new Nr.default(this.ops),o=0;for(;i.hasNext()&&o<=e;){let c=i.peekLength(),d=i.peekType();if(i.next(),d==="delete"){e-=Math.min(c,e-o);continue}else d==="insert"&&(o<e||!t)&&(e+=c);o+=c}return e}};Fs.Op=Bs.default;Fs.OpIterator=Nr.default;Fs.AttributeMap=Ca.default;Fs.handlers={};js.default=Fs;typeof Ef=="object"&&(Ef.exports=Fs,Ef.exports.default=Fs)});var _x=Tr((sU,Zg)=>{"use strict";var NP=Object.prototype.hasOwnProperty,ki="~";function Ru(){}s(Ru,"Events");Object.create&&(Ru.prototype=Object.create(null),new Ru().__proto__||(ki=!1));function OP(n,e,t){this.fn=n,this.context=e,this.once=t||!1}s(OP,"EE");function yx(n,e,t,i,o){if(typeof t!="function")throw new TypeError("The listener must be a function");var c=new OP(t,i||n,o),d=ki?ki+e:e;return n._events[d]?n._events[d].fn?n._events[d]=[n._events[d],c]:n._events[d].push(c):(n._events[d]=c,n._eventsCount++),n}s(yx,"addListener");function Tf(n,e){--n._eventsCount===0?n._events=new Ru:delete n._events[e]}s(Tf,"clearEvent");function yi(){this._events=new Ru,this._eventsCount=0}s(yi,"EventEmitter");yi.prototype.eventNames=s(function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)NP.call(t,i)&&e.push(ki?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},"eventNames");yi.prototype.listeners=s(function(e){var t=ki?ki+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,c=i.length,d=new Array(c);o<c;o++)d[o]=i[o].fn;return d},"listeners");yi.prototype.listenerCount=s(function(e){var t=ki?ki+e:e,i=this._events[t];return i?i.fn?1:i.length:0},"listenerCount");yi.prototype.emit=s(function(e,t,i,o,c,d){var m=ki?ki+e:e;if(!this._events[m])return!1;var v=this._events[m],_=arguments.length,T,S;if(v.fn){switch(v.once&&this.removeListener(e,v.fn,void 0,!0),_){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,t),!0;case 3:return v.fn.call(v.context,t,i),!0;case 4:return v.fn.call(v.context,t,i,o),!0;case 5:return v.fn.call(v.context,t,i,o,c),!0;case 6:return v.fn.call(v.context,t,i,o,c,d),!0}for(S=1,T=new Array(_-1);S<_;S++)T[S-1]=arguments[S];v.fn.apply(v.context,T)}else{var O=v.length,M;for(S=0;S<O;S++)switch(v[S].once&&this.removeListener(e,v[S].fn,void 0,!0),_){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,t);break;case 3:v[S].fn.call(v[S].context,t,i);break;case 4:v[S].fn.call(v[S].context,t,i,o);break;default:if(!T)for(M=1,T=new Array(_-1);M<_;M++)T[M-1]=arguments[M];v[S].fn.apply(v[S].context,T)}}return!0},"emit");yi.prototype.on=s(function(e,t,i){return yx(this,e,t,i,!1)},"on");yi.prototype.once=s(function(e,t,i){return yx(this,e,t,i,!0)},"once");yi.prototype.removeListener=s(function(e,t,i,o){var c=ki?ki+e:e;if(!this._events[c])return this;if(!t)return Tf(this,c),this;var d=this._events[c];if(d.fn)d.fn===t&&(!o||d.once)&&(!i||d.context===i)&&Tf(this,c);else{for(var m=0,v=[],_=d.length;m<_;m++)(d[m].fn!==t||o&&!d[m].once||i&&d[m].context!==i)&&v.push(d[m]);v.length?this._events[c]=v.length===1?v[0]:v:Tf(this,c)}return this},"removeListener");yi.prototype.removeAllListeners=s(function(e){var t;return e?(t=ki?ki+e:e,this._events[t]&&Tf(this,t)):(this._events=new Ru,this._eventsCount=0),this},"removeAllListeners");yi.prototype.off=yi.prototype.removeListener;yi.prototype.addListener=yi.prototype.on;yi.prefixed=ki;yi.EventEmitter=yi;typeof Zg<"u"&&(Zg.exports=yi)});var wE=Tr((wi,Ii)=>{(function(n,e){if(typeof wi=="object"&&typeof Ii=="object")Ii.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t=e();for(var i in t)(typeof wi=="object"?wi:n)[i]=t[i]}})(self,()=>(()=>{var n={64:(i,o,c)=>{(i.exports=c(765)(!1)).push([i.id,`.ql-html-overlayContainer {
  background: #0000007d;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
}

.ql-html-popupContainer {
  background: #ddd;
  position: absolute;
  top: 5%;
  left: 5%;
  right: 5%;
  bottom: 5%;
  border-radius: 10px;
}

.ql-html-textContainer {
  position: relative;
  height: calc(100% - 40px);
  padding: 20px;
}

.ql-html-textArea {
  background: #fff;
  position: absolute;
  left: 15px;
  width: calc(100% - 30px);
  height: calc(100% - 60px) !important;
}

.ql-html-textArea .ql-syntax {
  word-break: break-all;
  white-space: pre-wrap;
}

.ql-html-buttonCancel {
  margin-right: 20px;
}

.ql-html-popupTitle {
  margin: 0;
  display: block;
  font-style: italic;
}

.ql-html-buttonGroup {
  position: absolute;
  bottom: 20px;
  transform: scale(1.5);
  left: calc(50% - 60px);
}
`,""])},765:i=>{i.exports=function(o){var c=[];return c.toString=function(){return this.map(function(d){var m=function(v,_){var T=v[1]||"",S=v[3];if(!S)return T;if(_&&typeof btoa=="function"){var O=(D=S,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(D))))+" */"),M=S.sources.map(function(j){return"/*# sourceURL="+S.sourceRoot+j+" */"});return[T].concat(M).concat([O]).join(`
`)}var D;return[T].join(`
`)}(d,o);return d[2]?"@media "+d[2]+"{"+m+"}":m}).join("")},c.i=function(d,m){typeof d=="string"&&(d=[[null,d,""]]);for(var v={},_=0;_<this.length;_++){var T=this[_][0];typeof T=="number"&&(v[T]=!0)}for(_=0;_<d.length;_++){var S=d[_];typeof S[0]=="number"&&v[S[0]]||(m&&!S[2]?S[2]=m:m&&(S[2]="("+S[2]+") and ("+m+")"),c.push(S))}},c}},228:i=>{"use strict";var o=Object.prototype.hasOwnProperty,c="~";function d(){}s(d,"r");function m(S,O,M){this.fn=S,this.context=O,this.once=M||!1}s(m,"s");function v(S,O,M,D,j){if(typeof M!="function")throw new TypeError("The listener must be a function");var I=new m(M,D||S,j),B=c?c+O:O;return S._events[B]?S._events[B].fn?S._events[B]=[S._events[B],I]:S._events[B].push(I):(S._events[B]=I,S._eventsCount++),S}s(v,"i");function _(S,O){--S._eventsCount==0?S._events=new d:delete S._events[O]}s(_,"o");function T(){this._events=new d,this._eventsCount=0}s(T,"l"),Object.create&&(d.prototype=Object.create(null),new d().__proto__||(c=!1)),T.prototype.eventNames=function(){var S,O,M=[];if(this._eventsCount===0)return M;for(O in S=this._events)o.call(S,O)&&M.push(c?O.slice(1):O);return Object.getOwnPropertySymbols?M.concat(Object.getOwnPropertySymbols(S)):M},T.prototype.listeners=function(S){var O=c?c+S:S,M=this._events[O];if(!M)return[];if(M.fn)return[M.fn];for(var D=0,j=M.length,I=new Array(j);D<j;D++)I[D]=M[D].fn;return I},T.prototype.listenerCount=function(S){var O=c?c+S:S,M=this._events[O];return M?M.fn?1:M.length:0},T.prototype.emit=function(S,O,M,D,j,I){var B=c?c+S:S;if(!this._events[B])return!1;var W,G,X=this._events[B],ct=arguments.length;if(X.fn){switch(X.once&&this.removeListener(S,X.fn,void 0,!0),ct){case 1:return X.fn.call(X.context),!0;case 2:return X.fn.call(X.context,O),!0;case 3:return X.fn.call(X.context,O,M),!0;case 4:return X.fn.call(X.context,O,M,D),!0;case 5:return X.fn.call(X.context,O,M,D,j),!0;case 6:return X.fn.call(X.context,O,M,D,j,I),!0}for(G=1,W=new Array(ct-1);G<ct;G++)W[G-1]=arguments[G];X.fn.apply(X.context,W)}else{var vt,ht=X.length;for(G=0;G<ht;G++)switch(X[G].once&&this.removeListener(S,X[G].fn,void 0,!0),ct){case 1:X[G].fn.call(X[G].context);break;case 2:X[G].fn.call(X[G].context,O);break;case 3:X[G].fn.call(X[G].context,O,M);break;case 4:X[G].fn.call(X[G].context,O,M,D);break;default:if(!W)for(vt=1,W=new Array(ct-1);vt<ct;vt++)W[vt-1]=arguments[vt];X[G].fn.apply(X[G].context,W)}}return!0},T.prototype.on=function(S,O,M){return v(this,S,O,M,!1)},T.prototype.once=function(S,O,M){return v(this,S,O,M,!0)},T.prototype.removeListener=function(S,O,M,D){var j=c?c+S:S;if(!this._events[j])return this;if(!O)return _(this,j),this;var I=this._events[j];if(I.fn)I.fn!==O||D&&!I.once||M&&I.context!==M||_(this,j);else{for(var B=0,W=[],G=I.length;B<G;B++)(I[B].fn!==O||D&&!I[B].once||M&&I[B].context!==M)&&W.push(I[B]);W.length?this._events[j]=W.length===1?W[0]:W:_(this,j)}return this},T.prototype.removeAllListeners=function(S){var O;return S?(O=c?c+S:S,this._events[O]&&_(this,O)):(this._events=new d,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prefixed=c,T.EventEmitter=T,i.exports=T},606:i=>{var o=-1,c=1,d=0;function m(z,ot,At,V,tt){if(z===ot)return z?[[d,z]]:[];if(At!=null){var ft=function(P,nt,rt){var ut=typeof rt=="number"?{index:rt,length:0}:rt.oldRange,Lt=typeof rt=="number"?null:rt.newRange,_t=P.length,Dt=nt.length;if(ut.length===0&&(Lt===null||Lt.length===0)){var Kt=ut.index,Vt=P.slice(0,Kt),Gt=P.slice(Kt),Xt=Lt?Lt.index:null,le=Kt+Dt-_t;if((Xt===null||Xt===le)&&!(le<0||le>Dt)){var Se=nt.slice(0,le);if((ve=nt.slice(le))===Gt){var fe=Math.min(Kt,le);if((ie=Vt.slice(0,fe))===(Qt=Se.slice(0,fe)))return vt(ie,Vt.slice(fe),Se.slice(fe),Gt)}}if(Xt===null||Xt===Kt){var Yt=Kt,ve=(Se=nt.slice(0,Yt),nt.slice(Yt));if(Se===Vt){var Zt=Math.min(_t-Yt,Dt-Yt);if((Jt=Gt.slice(Gt.length-Zt))===(Te=ve.slice(ve.length-Zt)))return vt(Vt,Gt.slice(0,Gt.length-Zt),ve.slice(0,ve.length-Zt),Jt)}}}if(ut.length>0&&Lt&&Lt.length===0){var ie=P.slice(0,ut.index),Jt=P.slice(ut.index+ut.length);if(!(Dt<(fe=ie.length)+(Zt=Jt.length))){var Qt=nt.slice(0,fe),Te=nt.slice(Dt-Zt);if(ie===Qt&&Jt===Te)return vt(ie,P.slice(fe,_t-Zt),nt.slice(fe,Dt-Zt),Jt)}}return null}(z,ot,At);if(ft)return ft}var lt=_(z,ot),Tt=z.substring(0,lt);lt=S(z=z.substring(lt),ot=ot.substring(lt));var q=z.substring(z.length-lt),Z=function(P,nt){var rt;if(!P)return[[c,nt]];if(!nt)return[[o,P]];var ut=P.length>nt.length?P:nt,Lt=P.length>nt.length?nt:P,_t=ut.indexOf(Lt);if(_t!==-1)return rt=[[c,ut.substring(0,_t)],[d,Lt],[c,ut.substring(_t+Lt.length)]],P.length>nt.length&&(rt[0][0]=rt[2][0]=o),rt;if(Lt.length===1)return[[o,P],[c,nt]];var Dt=function(Yt,ve){var Zt=Yt.length>ve.length?Yt:ve,ie=Yt.length>ve.length?ve:Yt;if(Zt.length<4||2*ie.length<Zt.length)return null;function Jt(ye,$e,tn){for(var me,Ue,Xe,Je,qe=ye.substring(tn,tn+Math.floor(ye.length/4)),oe=-1,Ae="";(oe=$e.indexOf(qe,oe+1))!==-1;){var It=_(ye.substring(tn),$e.substring(oe)),ue=S(ye.substring(0,tn),$e.substring(0,oe));Ae.length<ue+It&&(Ae=$e.substring(oe-ue,oe)+$e.substring(oe,oe+It),me=ye.substring(0,tn-ue),Ue=ye.substring(tn+It),Xe=$e.substring(0,oe-ue),Je=$e.substring(oe+It))}return 2*Ae.length>=ye.length?[me,Ue,Xe,Je,Ae]:null}s(Jt,"s");var Qt,Te,re,Le,ke,ze=Jt(Zt,ie,Math.ceil(Zt.length/4)),Qe=Jt(Zt,ie,Math.ceil(Zt.length/2));if(!ze&&!Qe)return null;Qt=Qe?ze&&ze[4].length>Qe[4].length?ze:Qe:ze,Yt.length>ve.length?(Te=Qt[0],re=Qt[1],Le=Qt[2],ke=Qt[3]):(Le=Qt[0],ke=Qt[1],Te=Qt[2],re=Qt[3]);var De=Qt[4];return[Te,re,Le,ke,De]}(P,nt);if(Dt){var Kt=Dt[0],Vt=Dt[1],Gt=Dt[2],Xt=Dt[3],le=Dt[4],Se=m(Kt,Gt),fe=m(Vt,Xt);return Se.concat([[d,le]],fe)}return function(Yt,ve){for(var Zt=Yt.length,ie=ve.length,Jt=Math.ceil((Zt+ie)/2),Qt=Jt,Te=2*Jt,re=new Array(Te),Le=new Array(Te),ke=0;ke<Te;ke++)re[ke]=-1,Le[ke]=-1;re[Qt+1]=0,Le[Qt+1]=0;for(var ze=Zt-ie,Qe=ze%2!=0,De=0,ye=0,$e=0,tn=0,me=0;me<Jt;me++){for(var Ue=-me+De;Ue<=me-ye;Ue+=2){for(var Xe=Qt+Ue,Je=(ue=Ue===-me||Ue!==me&&re[Xe-1]<re[Xe+1]?re[Xe+1]:re[Xe-1]+1)-Ue;ue<Zt&&Je<ie&&Yt.charAt(ue)===ve.charAt(Je);)ue++,Je++;if(re[Xe]=ue,ue>Zt)ye+=2;else if(Je>ie)De+=2;else if(Qe&&(Ae=Qt+ze-Ue)>=0&&Ae<Te&&Le[Ae]!==-1&&ue>=(oe=Zt-Le[Ae]))return v(Yt,ve,ue,Je)}for(var qe=-me+$e;qe<=me-tn;qe+=2){for(var oe,Ae=Qt+qe,It=(oe=qe===-me||qe!==me&&Le[Ae-1]<Le[Ae+1]?Le[Ae+1]:Le[Ae-1]+1)-qe;oe<Zt&&It<ie&&Yt.charAt(Zt-oe-1)===ve.charAt(ie-It-1);)oe++,It++;if(Le[Ae]=oe,oe>Zt)tn+=2;else if(It>ie)$e+=2;else if(!Qe&&(Xe=Qt+ze-qe)>=0&&Xe<Te&&re[Xe]!==-1){var ue;if(Je=Qt+(ue=re[Xe])-Xe,ue>=(oe=Zt-oe))return v(Yt,ve,ue,Je)}}}return[[o,Yt],[c,ve]]}(P,nt)}(z=z.substring(0,z.length-lt),ot=ot.substring(0,ot.length-lt));return Tt&&Z.unshift([d,Tt]),q&&Z.push([d,q]),B(Z,tt),V&&function(P){for(var nt=!1,rt=[],ut=0,Lt=null,_t=0,Dt=0,Kt=0,Vt=0,Gt=0;_t<P.length;)P[_t][0]==d?(rt[ut++]=_t,Dt=Vt,Kt=Gt,Vt=0,Gt=0,Lt=P[_t][1]):(P[_t][0]==c?Vt+=P[_t][1].length:Gt+=P[_t][1].length,Lt&&Lt.length<=Math.max(Dt,Kt)&&Lt.length<=Math.max(Vt,Gt)&&(P.splice(rt[ut-1],0,[o,Lt]),P[rt[ut-1]+1][0]=c,ut--,_t=--ut>0?rt[ut-1]:-1,Dt=0,Kt=0,Vt=0,Gt=0,Lt=null,nt=!0)),_t++;for(nt&&B(P),function(Yt){function ve(ye,$e){if(!ye||!$e)return 6;var tn=ye.charAt(ye.length-1),me=$e.charAt(0),Ue=tn.match(O),Xe=me.match(O),Je=Ue&&tn.match(M),qe=Xe&&me.match(M),oe=Je&&tn.match(D),Ae=qe&&me.match(D),It=oe&&ye.match(j),ue=Ae&&$e.match(I);return It||ue?5:oe||Ae?4:Ue&&!Je&&qe?3:Je||qe?2:Ue||Xe?1:0}s(ve,"e");for(var Zt=1;Zt<Yt.length-1;){if(Yt[Zt-1][0]==d&&Yt[Zt+1][0]==d){var ie=Yt[Zt-1][1],Jt=Yt[Zt][1],Qt=Yt[Zt+1][1],Te=S(ie,Jt);if(Te){var re=Jt.substring(Jt.length-Te);ie=ie.substring(0,ie.length-Te),Jt=re+Jt.substring(0,Jt.length-Te),Qt=re+Qt}for(var Le=ie,ke=Jt,ze=Qt,Qe=ve(ie,Jt)+ve(Jt,Qt);Jt.charAt(0)===Qt.charAt(0);){ie+=Jt.charAt(0),Jt=Jt.substring(1)+Qt.charAt(0),Qt=Qt.substring(1);var De=ve(ie,Jt)+ve(Jt,Qt);De>=Qe&&(Qe=De,Le=ie,ke=Jt,ze=Qt)}Yt[Zt-1][1]!=Le&&(Le?Yt[Zt-1][1]=Le:(Yt.splice(Zt-1,1),Zt--),Yt[Zt][1]=ke,ze?Yt[Zt+1][1]=ze:(Yt.splice(Zt+1,1),Zt--))}Zt++}}(P),_t=1;_t<P.length;){if(P[_t-1][0]==o&&P[_t][0]==c){var Xt=P[_t-1][1],le=P[_t][1],Se=T(Xt,le),fe=T(le,Xt);Se>=fe?(Se>=Xt.length/2||Se>=le.length/2)&&(P.splice(_t,0,[d,le.substring(0,Se)]),P[_t-1][1]=Xt.substring(0,Xt.length-Se),P[_t+1][1]=le.substring(Se),_t++):(fe>=Xt.length/2||fe>=le.length/2)&&(P.splice(_t,0,[d,Xt.substring(0,fe)]),P[_t-1][0]=c,P[_t-1][1]=le.substring(0,le.length-fe),P[_t+1][0]=o,P[_t+1][1]=Xt.substring(fe),_t++),_t++}_t++}}(Z),Z}s(m,"s");function v(z,ot,At,V){var tt=z.substring(0,At),ft=ot.substring(0,V),lt=z.substring(At),Tt=ot.substring(V),q=m(tt,ft),Z=m(lt,Tt);return q.concat(Z)}s(v,"i");function _(z,ot){if(!z||!ot||z.charAt(0)!==ot.charAt(0))return 0;for(var At=0,V=Math.min(z.length,ot.length),tt=V,ft=0;At<tt;)z.substring(ft,tt)==ot.substring(ft,tt)?ft=At=tt:V=tt,tt=Math.floor((V-At)/2+At);return W(z.charCodeAt(tt-1))&&tt--,tt}s(_,"o");function T(z,ot){var At=z.length,V=ot.length;if(At==0||V==0)return 0;At>V?z=z.substring(At-V):At<V&&(ot=ot.substring(0,At));var tt=Math.min(At,V);if(z==ot)return tt;for(var ft=0,lt=1;;){var Tt=z.substring(tt-lt),q=ot.indexOf(Tt);if(q==-1)return ft;lt+=q,q!=0&&z.substring(tt-lt)!=ot.substring(0,lt)||(ft=lt,lt++)}}s(T,"l");function S(z,ot){if(!z||!ot||z.slice(-1)!==ot.slice(-1))return 0;for(var At=0,V=Math.min(z.length,ot.length),tt=V,ft=0;At<tt;)z.substring(z.length-tt,z.length-ft)==ot.substring(ot.length-tt,ot.length-ft)?ft=At=tt:V=tt,tt=Math.floor((V-At)/2+At);return G(z.charCodeAt(z.length-tt))&&tt--,tt}s(S,"a");var O=/[^a-zA-Z0-9]/,M=/\s/,D=/[\r\n]/,j=/\n\r?\n$/,I=/^\r?\n\r?\n/;function B(z,ot){z.push([d,""]);for(var At,V=0,tt=0,ft=0,lt="",Tt="";V<z.length;)if(V<z.length-1&&!z[V][1])z.splice(V,1);else switch(z[V][0]){case c:ft++,Tt+=z[V][1],V++;break;case o:tt++,lt+=z[V][1],V++;break;case d:var q=V-ft-tt-1;if(ot){if(q>=0&&ct(z[q][1])){var Z=z[q][1].slice(-1);if(z[q][1]=z[q][1].slice(0,-1),lt=Z+lt,Tt=Z+Tt,!z[q][1]){z.splice(q,1),V--;var P=q-1;z[P]&&z[P][0]===c&&(ft++,Tt=z[P][1]+Tt,P--),z[P]&&z[P][0]===o&&(tt++,lt=z[P][1]+lt,P--),q=P}}X(z[V][1])&&(Z=z[V][1].charAt(0),z[V][1]=z[V][1].slice(1),lt+=Z,Tt+=Z)}if(V<z.length-1&&!z[V][1]){z.splice(V,1);break}if(lt.length>0||Tt.length>0){lt.length>0&&Tt.length>0&&((At=_(Tt,lt))!==0&&(q>=0?z[q][1]+=Tt.substring(0,At):(z.splice(0,0,[d,Tt.substring(0,At)]),V++),Tt=Tt.substring(At),lt=lt.substring(At)),(At=S(Tt,lt))!==0&&(z[V][1]=Tt.substring(Tt.length-At)+z[V][1],Tt=Tt.substring(0,Tt.length-At),lt=lt.substring(0,lt.length-At)));var nt=ft+tt;lt.length===0&&Tt.length===0?(z.splice(V-nt,nt),V-=nt):lt.length===0?(z.splice(V-nt,nt,[c,Tt]),V=V-nt+1):Tt.length===0?(z.splice(V-nt,nt,[o,lt]),V=V-nt+1):(z.splice(V-nt,nt,[o,lt],[c,Tt]),V=V-nt+2)}V!==0&&z[V-1][0]===d?(z[V-1][1]+=z[V][1],z.splice(V,1)):V++,ft=0,tt=0,lt="",Tt=""}z[z.length-1][1]===""&&z.pop();var rt=!1;for(V=1;V<z.length-1;)z[V-1][0]===d&&z[V+1][0]===d&&(z[V][1].substring(z[V][1].length-z[V-1][1].length)===z[V-1][1]?(z[V][1]=z[V-1][1]+z[V][1].substring(0,z[V][1].length-z[V-1][1].length),z[V+1][1]=z[V-1][1]+z[V+1][1],z.splice(V-1,1),rt=!0):z[V][1].substring(0,z[V+1][1].length)==z[V+1][1]&&(z[V-1][1]+=z[V+1][1],z[V][1]=z[V][1].substring(z[V+1][1].length)+z[V+1][1],z.splice(V+1,1),rt=!0)),V++;rt&&B(z,ot)}s(B,"p");function W(z){return z>=55296&&z<=56319}s(W,"g");function G(z){return z>=56320&&z<=57343}s(G,"m");function X(z){return G(z.charCodeAt(0))}s(X,"b");function ct(z){return W(z.charCodeAt(z.length-1))}s(ct,"y");function vt(z,ot,At,V){return ct(z)||X(V)?null:function(tt){for(var ft=[],lt=0;lt<tt.length;lt++)tt[lt][1].length>0&&ft.push(tt[lt]);return ft}([[d,z],[o,ot],[c,At],[d,V]])}s(vt,"v");function ht(z,ot,At,V){return m(z,ot,At,V,!0)}s(ht,"x"),ht.INSERT=c,ht.DELETE=o,ht.EQUAL=d,i.exports=ht},193:(i,o,c)=>{i=c.nmd(i);var d="__lodash_hash_undefined__",m=9007199254740991,v="[object Arguments]",_="[object Boolean]",T="[object Date]",S="[object Function]",O="[object GeneratorFunction]",M="[object Map]",D="[object Number]",j="[object Object]",I="[object Promise]",B="[object RegExp]",W="[object Set]",G="[object String]",X="[object Symbol]",ct="[object WeakMap]",vt="[object ArrayBuffer]",ht="[object DataView]",z="[object Float32Array]",ot="[object Float64Array]",At="[object Int8Array]",V="[object Int16Array]",tt="[object Int32Array]",ft="[object Uint8Array]",lt="[object Uint8ClampedArray]",Tt="[object Uint16Array]",q="[object Uint32Array]",Z=/\w*$/,P=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,rt={};rt[v]=rt["[object Array]"]=rt[vt]=rt[ht]=rt[_]=rt[T]=rt[z]=rt[ot]=rt[At]=rt[V]=rt[tt]=rt[M]=rt[D]=rt[j]=rt[B]=rt[W]=rt[G]=rt[X]=rt[ft]=rt[lt]=rt[Tt]=rt[q]=!0,rt["[object Error]"]=rt[S]=rt[ct]=!1;var ut=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,Lt=typeof self=="object"&&self&&self.Object===Object&&self,_t=ut||Lt||Function("return this")(),Dt=o&&!o.nodeType&&o,Kt=Dt&&i&&!i.nodeType&&i,Vt=Kt&&Kt.exports===Dt;function Gt(K,pt){return K.set(pt[0],pt[1]),K}s(Gt,"P");function Xt(K,pt){return K.add(pt),K}s(Xt,"z");function le(K,pt,Mt,F){var et=-1,xt=K?K.length:0;for(F&&xt&&(Mt=K[++et]);++et<xt;)Mt=pt(Mt,K[et],et,K);return Mt}s(le,"H");function Se(K){var pt=!1;if(K!=null&&typeof K.toString!="function")try{pt=!!(K+"")}catch{}return pt}s(Se,"F");function fe(K){var pt=-1,Mt=Array(K.size);return K.forEach(function(F,et){Mt[++pt]=[et,F]}),Mt}s(fe,"$");function Yt(K,pt){return function(Mt){return K(pt(Mt))}}s(Yt,"V");function ve(K){var pt=-1,Mt=Array(K.size);return K.forEach(function(F){Mt[++pt]=F}),Mt}s(ve,"K");var Zt,ie=Array.prototype,Jt=Function.prototype,Qt=Object.prototype,Te=_t["__core-js_shared__"],re=(Zt=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||""))?"Symbol(src)_1."+Zt:"",Le=Jt.toString,ke=Qt.hasOwnProperty,ze=Qt.toString,Qe=RegExp("^"+Le.call(ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),De=Vt?_t.Buffer:void 0,ye=_t.Symbol,$e=_t.Uint8Array,tn=Yt(Object.getPrototypeOf,Object),me=Object.create,Ue=Qt.propertyIsEnumerable,Xe=ie.splice,Je=Object.getOwnPropertySymbols,qe=De?De.isBuffer:void 0,oe=Yt(Object.keys,Object),Ae=Be(_t,"DataView"),It=Be(_t,"Map"),ue=Be(_t,"Promise"),hn=Be(_t,"Set"),ti=Be(_t,"WeakMap"),pn=Be(Object,"create"),Vn=Ke(Ae),en=Ke(It),gr=Ke(ue),sr=Ke(hn),y=Ke(ti),w=ye?ye.prototype:void 0,N=w?w.valueOf:void 0;function R(K){var pt=-1,Mt=K?K.length:0;for(this.clear();++pt<Mt;){var F=K[pt];this.set(F[0],F[1])}}s(R,"kt");function Y(K){var pt=-1,Mt=K?K.length:0;for(this.clear();++pt<Mt;){var F=K[pt];this.set(F[0],F[1])}}s(Y,"_t");function Q(K){var pt=-1,Mt=K?K.length:0;for(this.clear();++pt<Mt;){var F=K[pt];this.set(F[0],F[1])}}s(Q,"Lt");function Ct(K){this.__data__=new Y(K)}s(Ct,"Ot");function at(K,pt){var Mt=ei(K)||function(Nt){return function(wt){return function(qt){return!!qt&&typeof qt=="object"}(wt)&&xi(wt)}(Nt)&&ke.call(Nt,"callee")&&(!Ue.call(Nt,"callee")||ze.call(Nt)==v)}(K)?function(Nt,wt){for(var qt=-1,pe=Array(Nt);++qt<Nt;)pe[qt]=wt(qt);return pe}(K.length,String):[],F=Mt.length,et=!!F;for(var xt in K)!pt&&!ke.call(K,xt)||et&&(xt=="length"||Zn(xt,F))||Mt.push(xt);return Mt}s(at,"Tt");function St(K,pt,Mt){var F=K[pt];ke.call(K,pt)&&Ri(F,Mt)&&(Mt!==void 0||pt in K)||(K[pt]=Mt)}s(St,"St");function $(K,pt){for(var Mt=K.length;Mt--;)if(Ri(K[Mt][0],pt))return Mt;return-1}s($,"Ct");function yt(K,pt,Mt,F,et,xt,Nt){var wt;if(F&&(wt=xt?F(K,et,xt,Nt):F(K)),wt!==void 0)return wt;if(!vr(K))return K;var qt=ei(K);if(qt){if(wt=function(gt){var zt=gt.length,_e=gt.constructor(zt);return zt&&typeof gt[0]=="string"&&ke.call(gt,"index")&&(_e.index=gt.index,_e.input=gt.input),_e}(K),!pt)return function(gt,zt){var _e=-1,Ee=gt.length;for(zt||(zt=Array(Ee));++_e<Ee;)zt[_e]=gt[_e];return zt}(K,wt)}else{var pe=En(K),Oe=pe==S||pe==O;if(ai(K))return function(gt,zt){if(zt)return gt.slice();var _e=new gt.constructor(gt.length);return gt.copy(_e),_e}(K,pt);if(pe==j||pe==v||Oe&&!xt){if(Se(K))return xt?K:{};if(wt=function(gt){return typeof gt.constructor!="function"||Pi(gt)?{}:(zt=tn(gt),vr(zt)?me(zt):{});var zt}(Oe?{}:K),!pt)return function(gt,zt){return ge(gt,vn(gt),zt)}(K,function(gt,zt){return gt&&ge(zt,Dr(zt),gt)}(wt,K))}else{if(!rt[pe])return xt?K:{};wt=function(gt,zt,_e,Ee){var Ve=gt.constructor;switch(zt){case vt:return Ce(gt);case _:case T:return new Ve(+gt);case ht:return function(he,je){var be=je?Ce(he.buffer):he.buffer;return new he.constructor(be,he.byteOffset,he.byteLength)}(gt,Ee);case z:case ot:case At:case V:case tt:case ft:case lt:case Tt:case q:return function(he,je){var be=je?Ce(he.buffer):he.buffer;return new he.constructor(be,he.byteOffset,he.length)}(gt,Ee);case M:return function(he,je,be){var Bn=je?be(fe(he),!0):fe(he);return le(Bn,Gt,new he.constructor)}(gt,Ee,_e);case D:case G:return new Ve(gt);case B:return function(he){var je=new he.constructor(he.source,Z.exec(he));return je.lastIndex=he.lastIndex,je}(gt);case W:return function(he,je,be){var Bn=je?be(ve(he),!0):ve(he);return le(Bn,Xt,new he.constructor)}(gt,Ee,_e);case X:return $n=gt,N?Object(N.call($n)):{}}var $n}(K,pe,yt,pt)}}Nt||(Nt=new Ct);var nn=Nt.get(K);if(nn)return nn;if(Nt.set(K,wt),!qt)var We=Mt?function(gt){return function(zt,_e,Ee){var Ve=_e(zt);return ei(zt)?Ve:function($n,he){for(var je=-1,be=he.length,Bn=$n.length;++je<be;)$n[Bn+je]=he[je];return $n}(Ve,Ee(zt))}(gt,Dr,vn)}(K):Dr(K);return function(gt,zt){for(var _e=-1,Ee=gt?gt.length:0;++_e<Ee&&zt(gt[_e],_e,gt)!==!1;);}(We||K,function(gt,zt){We&&(gt=K[zt=gt]),St(wt,zt,yt(gt,pt,Mt,F,zt,K,Nt))}),wt}s(yt,"jt");function Ut(K){return!(!vr(K)||(pt=K,re&&re in pt))&&(qi(K)||Se(K)?Qe:P).test(Ke(K));var pt}s(Ut,"Rt");function Ce(K){var pt=new K.constructor(K.byteLength);return new $e(pt).set(new $e(K)),pt}s(Ce,"It");function ge(K,pt,Mt,F){Mt||(Mt={});for(var et=-1,xt=pt.length;++et<xt;){var Nt=pt[et],wt=F?F(Mt[Nt],K[Nt],Nt,Mt,K):void 0;St(Mt,Nt,wt===void 0?K[Nt]:wt)}return Mt}s(ge,"Mt");function Ne(K,pt){var Mt,F,et=K.__data__;return((F=typeof(Mt=pt))=="string"||F=="number"||F=="symbol"||F=="boolean"?Mt!=="__proto__":Mt===null)?et[typeof pt=="string"?"string":"hash"]:et.map}s(Ne,"Bt");function Be(K,pt){var Mt=function(F,et){return F?.[et]}(K,pt);return Ut(Mt)?Mt:void 0}s(Be,"Ut"),R.prototype.clear=function(){this.__data__=pn?pn(null):{}},R.prototype.delete=function(K){return this.has(K)&&delete this.__data__[K]},R.prototype.get=function(K){var pt=this.__data__;if(pn){var Mt=pt[K];return Mt===d?void 0:Mt}return ke.call(pt,K)?pt[K]:void 0},R.prototype.has=function(K){var pt=this.__data__;return pn?pt[K]!==void 0:ke.call(pt,K)},R.prototype.set=function(K,pt){return this.__data__[K]=pn&&pt===void 0?d:pt,this},Y.prototype.clear=function(){this.__data__=[]},Y.prototype.delete=function(K){var pt=this.__data__,Mt=$(pt,K);return!(Mt<0)&&(Mt==pt.length-1?pt.pop():Xe.call(pt,Mt,1),!0)},Y.prototype.get=function(K){var pt=this.__data__,Mt=$(pt,K);return Mt<0?void 0:pt[Mt][1]},Y.prototype.has=function(K){return $(this.__data__,K)>-1},Y.prototype.set=function(K,pt){var Mt=this.__data__,F=$(Mt,K);return F<0?Mt.push([K,pt]):Mt[F][1]=pt,this},Q.prototype.clear=function(){this.__data__={hash:new R,map:new(It||Y),string:new R}},Q.prototype.delete=function(K){return Ne(this,K).delete(K)},Q.prototype.get=function(K){return Ne(this,K).get(K)},Q.prototype.has=function(K){return Ne(this,K).has(K)},Q.prototype.set=function(K,pt){return Ne(this,K).set(K,pt),this},Ct.prototype.clear=function(){this.__data__=new Y},Ct.prototype.delete=function(K){return this.__data__.delete(K)},Ct.prototype.get=function(K){return this.__data__.get(K)},Ct.prototype.has=function(K){return this.__data__.has(K)},Ct.prototype.set=function(K,pt){var Mt=this.__data__;if(Mt instanceof Y){var F=Mt.__data__;if(!It||F.length<199)return F.push([K,pt]),this;Mt=this.__data__=new Q(F)}return Mt.set(K,pt),this};var vn=Je?Yt(Je,Object):function(){return[]},En=s(function(K){return ze.call(K)},"Pt");function Zn(K,pt){return!!(pt=pt??m)&&(typeof K=="number"||nt.test(K))&&K>-1&&K%1==0&&K<pt}s(Zn,"zt");function Pi(K){var pt=K&&K.constructor;return K===(typeof pt=="function"&&pt.prototype||Qt)}s(Pi,"Ht");function Ke(K){if(K!=null){try{return Le.call(K)}catch{}try{return K+""}catch{}}return""}s(Ke,"Ft");function Ri(K,pt){return K===pt||K!=K&&pt!=pt}s(Ri,"$t"),(Ae&&En(new Ae(new ArrayBuffer(1)))!=ht||It&&En(new It)!=M||ue&&En(ue.resolve())!=I||hn&&En(new hn)!=W||ti&&En(new ti)!=ct)&&(En=s(function(K){var pt=ze.call(K),Mt=pt==j?K.constructor:void 0,F=Mt?Ke(Mt):void 0;if(F)switch(F){case Vn:return ht;case en:return M;case gr:return I;case sr:return W;case y:return ct}return pt},"Pt"));var ei=Array.isArray;function xi(K){return K!=null&&function(pt){return typeof pt=="number"&&pt>-1&&pt%1==0&&pt<=m}(K.length)&&!qi(K)}s(xi,"Kt");var ai=qe||function(){return!1};function qi(K){var pt=vr(K)?ze.call(K):"";return pt==S||pt==O}s(qi,"Zt");function vr(K){var pt=typeof K;return!!K&&(pt=="object"||pt=="function")}s(vr,"Gt");function Dr(K){return xi(K)?at(K):function(pt){if(!Pi(pt))return oe(pt);var Mt=[];for(var F in Object(pt))ke.call(pt,F)&&F!="constructor"&&Mt.push(F);return Mt}(K)}s(Dr,"Xt"),i.exports=function(K){return yt(K,!0,!0)}},142:(i,o,c)=>{i=c.nmd(i);var d="__lodash_hash_undefined__",m=1,v=2,_=9007199254740991,T="[object Arguments]",S="[object Array]",O="[object AsyncFunction]",M="[object Boolean]",D="[object Date]",j="[object Error]",I="[object Function]",B="[object GeneratorFunction]",W="[object Map]",G="[object Number]",X="[object Null]",ct="[object Object]",vt="[object Promise]",ht="[object Proxy]",z="[object RegExp]",ot="[object Set]",At="[object String]",V="[object Symbol]",tt="[object Undefined]",ft="[object WeakMap]",lt="[object ArrayBuffer]",Tt="[object DataView]",q=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P[T]=P[S]=P[lt]=P[M]=P[Tt]=P[D]=P[j]=P[I]=P[W]=P[G]=P[ct]=P[z]=P[ot]=P[At]=P[ft]=!1;var nt=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,rt=typeof self=="object"&&self&&self.Object===Object&&self,ut=nt||rt||Function("return this")(),Lt=o&&!o.nodeType&&o,_t=Lt&&i&&!i.nodeType&&i,Dt=_t&&_t.exports===Lt,Kt=Dt&&nt.process,Vt=function(){try{return Kt&&Kt.binding&&Kt.binding("util")}catch{}}(),Gt=Vt&&Vt.isTypedArray;function Xt(F,et){for(var xt=-1,Nt=F==null?0:F.length;++xt<Nt;)if(et(F[xt],xt,F))return!0;return!1}s(Xt,"z");function le(F){var et=-1,xt=Array(F.size);return F.forEach(function(Nt,wt){xt[++et]=[wt,Nt]}),xt}s(le,"H");function Se(F){var et=-1,xt=Array(F.size);return F.forEach(function(Nt){xt[++et]=Nt}),xt}s(Se,"F");var fe,Yt,ve,Zt=Array.prototype,ie=Function.prototype,Jt=Object.prototype,Qt=ut["__core-js_shared__"],Te=ie.toString,re=Jt.hasOwnProperty,Le=(fe=/[^.]+$/.exec(Qt&&Qt.keys&&Qt.keys.IE_PROTO||""))?"Symbol(src)_1."+fe:"",ke=Jt.toString,ze=RegExp("^"+Te.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=Dt?ut.Buffer:void 0,De=ut.Symbol,ye=ut.Uint8Array,$e=Jt.propertyIsEnumerable,tn=Zt.splice,me=De?De.toStringTag:void 0,Ue=Object.getOwnPropertySymbols,Xe=Qe?Qe.isBuffer:void 0,Je=(Yt=Object.keys,ve=Object,function(F){return Yt(ve(F))}),qe=vn(ut,"DataView"),oe=vn(ut,"Map"),Ae=vn(ut,"Promise"),It=vn(ut,"Set"),ue=vn(ut,"WeakMap"),hn=vn(Object,"create"),ti=Ke(qe),pn=Ke(oe),Vn=Ke(Ae),en=Ke(It),gr=Ke(ue),sr=De?De.prototype:void 0,y=sr?sr.valueOf:void 0;function w(F){var et=-1,xt=F==null?0:F.length;for(this.clear();++et<xt;){var Nt=F[et];this.set(Nt[0],Nt[1])}}s(w,"At");function N(F){var et=-1,xt=F==null?0:F.length;for(this.clear();++et<xt;){var Nt=F[et];this.set(Nt[0],Nt[1])}}s(N,"qt");function R(F){var et=-1,xt=F==null?0:F.length;for(this.clear();++et<xt;){var Nt=F[et];this.set(Nt[0],Nt[1])}}s(R,"kt");function Y(F){var et=-1,xt=F==null?0:F.length;for(this.__data__=new R;++et<xt;)this.add(F[et])}s(Y,"_t");function Q(F){var et=this.__data__=new N(F);this.size=et.size}s(Q,"Lt");function Ct(F,et){var xt=xi(F),Nt=!xt&&ei(F),wt=!xt&&!Nt&&ai(F),qt=!xt&&!Nt&&!wt&&pt(F),pe=xt||Nt||wt||qt,Oe=pe?function(gt,zt){for(var _e=-1,Ee=Array(gt);++_e<gt;)Ee[_e]=zt(_e);return Ee}(F.length,String):[],nn=Oe.length;for(var We in F)!et&&!re.call(F,We)||pe&&(We=="length"||wt&&(We=="offset"||We=="parent")||qt&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Pi(We,nn))||Oe.push(We);return Oe}s(Ct,"Ot");function at(F,et){for(var xt=F.length;xt--;)if(Ri(F[xt][0],et))return xt;return-1}s(at,"Tt");function St(F){return F==null?F===void 0?tt:X:me&&me in Object(F)?function(et){var xt=re.call(et,me),Nt=et[me];try{et[me]=void 0;var wt=!0}catch{}var qt=ke.call(et);return wt&&(xt?et[me]=Nt:delete et[me]),qt}(F):function(et){return ke.call(et)}(F)}s(St,"St");function $(F){return K(F)&&St(F)==T}s($,"Ct");function yt(F,et,xt,Nt,wt){return F===et||(F==null||et==null||!K(F)&&!K(et)?F!=F&&et!=et:function(qt,pe,Oe,nn,We,gt){var zt=xi(qt),_e=xi(pe),Ee=zt?S:Zn(qt),Ve=_e?S:Zn(pe),$n=(Ee=Ee==T?ct:Ee)==ct,he=(Ve=Ve==T?ct:Ve)==ct,je=Ee==Ve;if(je&&ai(qt)){if(!ai(pe))return!1;zt=!0,$n=!1}if(je&&!$n)return gt||(gt=new Q),zt||pt(qt)?ge(qt,pe,Oe,nn,We,gt):function(Me,we,Jr,Kn,Qr,Yn,Ei){switch(Jr){case Tt:if(Me.byteLength!=we.byteLength||Me.byteOffset!=we.byteOffset)return!1;Me=Me.buffer,we=we.buffer;case lt:return!(Me.byteLength!=we.byteLength||!Yn(new ye(Me),new ye(we)));case M:case D:case G:return Ri(+Me,+we);case j:return Me.name==we.name&&Me.message==we.message;case z:case At:return Me==we+"";case W:var li=le;case ot:var ts=Kn&m;if(li||(li=Se),Me.size!=we.size&&!ts)return!1;var Ir=Ei.get(Me);if(Ir)return Ir==we;Kn|=v,Ei.set(Me,we);var jo=ge(li(Me),li(we),Kn,Qr,Yn,Ei);return Ei.delete(Me),jo;case V:if(y)return y.call(Me)==y.call(we)}return!1}(qt,pe,Ee,Oe,nn,We,gt);if(!(Oe&m)){var be=$n&&re.call(qt,"__wrapped__"),Bn=he&&re.call(pe,"__wrapped__");if(be||Bn){var ps=be?qt.value():qt,Xr=Bn?pe.value():pe;return gt||(gt=new Q),We(ps,Xr,Oe,nn,gt)}}return je?(gt||(gt=new Q),function(Me,we,Jr,Kn,Qr,Yn){var Ei=Jr&m,li=Ne(Me),ts=li.length,Ir=Ne(we),jo=Ir.length;if(ts!=jo&&!Ei)return!1;for(var ee=ts;ee--;){var Ln=li[ee];if(!(Ei?Ln in we:re.call(we,Ln)))return!1}var Fe=Yn.get(Me);if(Fe&&Yn.get(we))return Fe==we;var ms=!0;Yn.set(Me,we),Yn.set(we,Me);for(var gs=Ei;++ee<ts;){var es=Me[Ln=li[ee]],ni=we[Ln];if(Kn)var Ft=Ei?Kn(ni,es,Ln,we,Me,Yn):Kn(es,ni,Ln,Me,we,Yn);if(!(Ft===void 0?es===ni||Qr(es,ni,Jr,Kn,Yn):Ft)){ms=!1;break}gs||(gs=Ln=="constructor")}if(ms&&!gs){var jn=Me.constructor,ii=we.constructor;jn==ii||!("constructor"in Me)||!("constructor"in we)||typeof jn=="function"&&jn instanceof jn&&typeof ii=="function"&&ii instanceof ii||(ms=!1)}return Yn.delete(Me),Yn.delete(we),ms}(qt,pe,Oe,nn,We,gt)):!1}(F,et,xt,Nt,yt,wt))}s(yt,"jt");function Ut(F){return!(!Dr(F)||function(et){return!!Le&&Le in et}(F))&&(qi(F)?ze:q).test(Ke(F))}s(Ut,"Rt");function Ce(F){if(xt=(et=F)&&et.constructor,Nt=typeof xt=="function"&&xt.prototype||Jt,et!==Nt)return Je(F);var et,xt,Nt,wt=[];for(var qt in Object(F))re.call(F,qt)&&qt!="constructor"&&wt.push(qt);return wt}s(Ce,"It");function ge(F,et,xt,Nt,wt,qt){var pe=xt&m,Oe=F.length,nn=et.length;if(Oe!=nn&&!(pe&&nn>Oe))return!1;var We=qt.get(F);if(We&&qt.get(et))return We==et;var gt=-1,zt=!0,_e=xt&v?new Y:void 0;for(qt.set(F,et),qt.set(et,F);++gt<Oe;){var Ee=F[gt],Ve=et[gt];if(Nt)var $n=pe?Nt(Ve,Ee,gt,et,F,qt):Nt(Ee,Ve,gt,F,et,qt);if($n!==void 0){if($n)continue;zt=!1;break}if(_e){if(!Xt(et,function(he,je){if(be=je,!_e.has(be)&&(Ee===he||wt(Ee,he,xt,Nt,qt)))return _e.push(je);var be})){zt=!1;break}}else if(Ee!==Ve&&!wt(Ee,Ve,xt,Nt,qt)){zt=!1;break}}return qt.delete(F),qt.delete(et),zt}s(ge,"Mt");function Ne(F){return function(et,xt,Nt){var wt=xt(et);return xi(et)?wt:function(qt,pe){for(var Oe=-1,nn=pe.length,We=qt.length;++Oe<nn;)qt[We+Oe]=pe[Oe];return qt}(wt,Nt(et))}(F,Mt,En)}s(Ne,"Bt");function Be(F,et){var xt,Nt,wt=F.__data__;return((Nt=typeof(xt=et))=="string"||Nt=="number"||Nt=="symbol"||Nt=="boolean"?xt!=="__proto__":xt===null)?wt[typeof et=="string"?"string":"hash"]:wt.map}s(Be,"Ut");function vn(F,et){var xt=function(Nt,wt){return Nt?.[wt]}(F,et);return Ut(xt)?xt:void 0}s(vn,"Dt"),w.prototype.clear=function(){this.__data__=hn?hn(null):{},this.size=0},w.prototype.delete=function(F){var et=this.has(F)&&delete this.__data__[F];return this.size-=et?1:0,et},w.prototype.get=function(F){var et=this.__data__;if(hn){var xt=et[F];return xt===d?void 0:xt}return re.call(et,F)?et[F]:void 0},w.prototype.has=function(F){var et=this.__data__;return hn?et[F]!==void 0:re.call(et,F)},w.prototype.set=function(F,et){var xt=this.__data__;return this.size+=this.has(F)?0:1,xt[F]=hn&&et===void 0?d:et,this},N.prototype.clear=function(){this.__data__=[],this.size=0},N.prototype.delete=function(F){var et=this.__data__,xt=at(et,F);return!(xt<0)&&(xt==et.length-1?et.pop():tn.call(et,xt,1),--this.size,!0)},N.prototype.get=function(F){var et=this.__data__,xt=at(et,F);return xt<0?void 0:et[xt][1]},N.prototype.has=function(F){return at(this.__data__,F)>-1},N.prototype.set=function(F,et){var xt=this.__data__,Nt=at(xt,F);return Nt<0?(++this.size,xt.push([F,et])):xt[Nt][1]=et,this},R.prototype.clear=function(){this.size=0,this.__data__={hash:new w,map:new(oe||N),string:new w}},R.prototype.delete=function(F){var et=Be(this,F).delete(F);return this.size-=et?1:0,et},R.prototype.get=function(F){return Be(this,F).get(F)},R.prototype.has=function(F){return Be(this,F).has(F)},R.prototype.set=function(F,et){var xt=Be(this,F),Nt=xt.size;return xt.set(F,et),this.size+=xt.size==Nt?0:1,this},Y.prototype.add=Y.prototype.push=function(F){return this.__data__.set(F,d),this},Y.prototype.has=function(F){return this.__data__.has(F)},Q.prototype.clear=function(){this.__data__=new N,this.size=0},Q.prototype.delete=function(F){var et=this.__data__,xt=et.delete(F);return this.size=et.size,xt},Q.prototype.get=function(F){return this.__data__.get(F)},Q.prototype.has=function(F){return this.__data__.has(F)},Q.prototype.set=function(F,et){var xt=this.__data__;if(xt instanceof N){var Nt=xt.__data__;if(!oe||Nt.length<199)return Nt.push([F,et]),this.size=++xt.size,this;xt=this.__data__=new R(Nt)}return xt.set(F,et),this.size=xt.size,this};var En=Ue?function(F){return F==null?[]:(F=Object(F),function(et,xt){for(var Nt=-1,wt=et==null?0:et.length,qt=0,pe=[];++Nt<wt;){var Oe=et[Nt];xt(Oe,Nt,et)&&(pe[qt++]=Oe)}return pe}(Ue(F),function(et){return $e.call(F,et)}))}:function(){return[]},Zn=St;function Pi(F,et){return!!(et=et??_)&&(typeof F=="number"||Z.test(F))&&F>-1&&F%1==0&&F<et}s(Pi,"Ht");function Ke(F){if(F!=null){try{return Te.call(F)}catch{}try{return F+""}catch{}}return""}s(Ke,"Ft");function Ri(F,et){return F===et||F!=F&&et!=et}s(Ri,"$t"),(qe&&Zn(new qe(new ArrayBuffer(1)))!=Tt||oe&&Zn(new oe)!=W||Ae&&Zn(Ae.resolve())!=vt||It&&Zn(new It)!=ot||ue&&Zn(new ue)!=ft)&&(Zn=s(function(F){var et=St(F),xt=et==ct?F.constructor:void 0,Nt=xt?Ke(xt):"";if(Nt)switch(Nt){case ti:return Tt;case pn:return W;case Vn:return vt;case en:return ot;case gr:return ft}return et},"zt"));var ei=$(function(){return arguments}())?$:function(F){return K(F)&&re.call(F,"callee")&&!$e.call(F,"callee")},xi=Array.isArray,ai=Xe||function(){return!1};function qi(F){if(!Dr(F))return!1;var et=St(F);return et==I||et==B||et==O||et==ht}s(qi,"Zt");function vr(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=_}s(vr,"Gt");function Dr(F){var et=typeof F;return F!=null&&(et=="object"||et=="function")}s(Dr,"Xt");function K(F){return F!=null&&typeof F=="object"}s(K,"Qt");var pt=Gt?function(F){return function(et){return F(et)}}(Gt):function(F){return K(F)&&vr(F.length)&&!!P[St(F)]};function Mt(F){return(et=F)!=null&&vr(et.length)&&!qi(et)?Ct(F):Ce(F);var et}s(Mt,"Jt"),i.exports=function(F,et){return yt(F,et)}},106:(i,o,c)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let d=c(193),m=c(142);var v;(function(_){_.compose=function(T={},S={},O=!1){typeof T!="object"&&(T={}),typeof S!="object"&&(S={});let M=d(S);O||(M=Object.keys(M).reduce((D,j)=>(M[j]!=null&&(D[j]=M[j]),D),{}));for(let D in T)T[D]!==void 0&&S[D]===void 0&&(M[D]=T[D]);return Object.keys(M).length>0?M:void 0},_.diff=function(T={},S={}){typeof T!="object"&&(T={}),typeof S!="object"&&(S={});let O=Object.keys(T).concat(Object.keys(S)).reduce((M,D)=>(m(T[D],S[D])||(M[D]=S[D]===void 0?null:S[D]),M),{});return Object.keys(O).length>0?O:void 0},_.invert=function(T={},S={}){T=T||{};let O=Object.keys(S).reduce((M,D)=>(S[D]!==T[D]&&T[D]!==void 0&&(M[D]=S[D]),M),{});return Object.keys(T).reduce((M,D)=>(T[D]!==S[D]&&S[D]===void 0&&(M[D]=null),M),O)},_.transform=function(T,S,O=!1){if(typeof T!="object")return S;if(typeof S!="object")return;if(!O)return S;let M=Object.keys(S).reduce((D,j)=>(T[j]===void 0&&(D[j]=S[j]),D),{});return Object.keys(M).length>0?M:void 0}})(v||(v={})),o.default=v},660:(i,o,c)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.AttributeMap=o.OpIterator=o.Op=void 0;let d=c(606),m=c(193),v=c(142),_=c(106);o.AttributeMap=_.default;let T=c(759);o.Op=T.default;let S=c(317);o.OpIterator=S.default;let O="\0",M=s((j,I)=>{if(typeof j!="object"||j===null)throw new Error("cannot retain a "+typeof j);if(typeof I!="object"||I===null)throw new Error("cannot retain a "+typeof I);let B=Object.keys(j)[0];if(!B||B!==Object.keys(I)[0])throw new Error(`embed types not matched: ${B} != ${Object.keys(I)[0]}`);return[B,j[B],I[B]]},"u");class D{static{s(this,"h")}constructor(I){Array.isArray(I)?this.ops=I:I!=null&&Array.isArray(I.ops)?this.ops=I.ops:this.ops=[]}static registerEmbed(I,B){this.handlers[I]=B}static unregisterEmbed(I){delete this.handlers[I]}static getHandler(I){let B=this.handlers[I];if(!B)throw new Error(`no handlers for embed type "${I}"`);return B}insert(I,B){let W={};return typeof I=="string"&&I.length===0?this:(W.insert=I,B!=null&&typeof B=="object"&&Object.keys(B).length>0&&(W.attributes=B),this.push(W))}delete(I){return I<=0?this:this.push({delete:I})}retain(I,B){if(typeof I=="number"&&I<=0)return this;let W={retain:I};return B!=null&&typeof B=="object"&&Object.keys(B).length>0&&(W.attributes=B),this.push(W)}push(I){let B=this.ops.length,W=this.ops[B-1];if(I=m(I),typeof W=="object"){if(typeof I.delete=="number"&&typeof W.delete=="number")return this.ops[B-1]={delete:W.delete+I.delete},this;if(typeof W.delete=="number"&&I.insert!=null&&(B-=1,W=this.ops[B-1],typeof W!="object"))return this.ops.unshift(I),this;if(v(I.attributes,W.attributes)){if(typeof I.insert=="string"&&typeof W.insert=="string")return this.ops[B-1]={insert:W.insert+I.insert},typeof I.attributes=="object"&&(this.ops[B-1].attributes=I.attributes),this;if(typeof I.retain=="number"&&typeof W.retain=="number")return this.ops[B-1]={retain:W.retain+I.retain},typeof I.attributes=="object"&&(this.ops[B-1].attributes=I.attributes),this}}return B===this.ops.length?this.ops.push(I):this.ops.splice(B,0,I),this}chop(){let I=this.ops[this.ops.length-1];return I&&typeof I.retain=="number"&&!I.attributes&&this.ops.pop(),this}filter(I){return this.ops.filter(I)}forEach(I){this.ops.forEach(I)}map(I){return this.ops.map(I)}partition(I){let B=[],W=[];return this.forEach(G=>{(I(G)?B:W).push(G)}),[B,W]}reduce(I,B){return this.ops.reduce(I,B)}changeLength(){return this.reduce((I,B)=>B.insert?I+T.default.length(B):B.delete?I-B.delete:I,0)}length(){return this.reduce((I,B)=>I+T.default.length(B),0)}slice(I=0,B=1/0){let W=[],G=new S.default(this.ops),X=0;for(;X<B&&G.hasNext();){let ct;X<I?ct=G.next(I-X):(ct=G.next(B-X),W.push(ct)),X+=T.default.length(ct)}return new D(W)}compose(I){let B=new S.default(this.ops),W=new S.default(I.ops),G=[],X=W.peek();if(X!=null&&typeof X.retain=="number"&&X.attributes==null){let vt=X.retain;for(;B.peekType()==="insert"&&B.peekLength()<=vt;)vt-=B.peekLength(),G.push(B.next());X.retain-vt>0&&W.next(X.retain-vt)}let ct=new D(G);for(;B.hasNext()||W.hasNext();)if(W.peekType()==="insert")ct.push(W.next());else if(B.peekType()==="delete")ct.push(B.next());else{let vt=Math.min(B.peekLength(),W.peekLength()),ht=B.next(vt),z=W.next(vt);if(z.retain){let ot={};if(typeof ht.retain=="number")ot.retain=typeof z.retain=="number"?vt:z.retain;else if(typeof z.retain=="number")ht.retain==null?ot.insert=ht.insert:ot.retain=ht.retain;else{let V=ht.retain==null?"insert":"retain",[tt,ft,lt]=M(ht[V],z.retain),Tt=D.getHandler(tt);ot[V]={[tt]:Tt.compose(ft,lt,V==="retain")}}let At=_.default.compose(ht.attributes,z.attributes,typeof ht.retain=="number");if(At&&(ot.attributes=At),ct.push(ot),!W.hasNext()&&v(ct.ops[ct.ops.length-1],ot)){let V=new D(B.rest());return ct.concat(V).chop()}}else typeof z.delete=="number"&&(typeof ht.retain=="number"||typeof ht.retain=="object"&&ht.retain!==null)&&ct.push(z)}return ct.chop()}concat(I){let B=new D(this.ops.slice());return I.ops.length>0&&(B.push(I.ops[0]),B.ops=B.ops.concat(I.ops.slice(1))),B}diff(I,B){if(this.ops===I.ops)return new D;let W=[this,I].map(ht=>ht.map(z=>{if(z.insert!=null)return typeof z.insert=="string"?z.insert:O;throw new Error("diff() called "+(ht===I?"on":"with")+" non-document")}).join("")),G=new D,X=d(W[0],W[1],B,!0),ct=new S.default(this.ops),vt=new S.default(I.ops);return X.forEach(ht=>{let z=ht[1].length;for(;z>0;){let ot=0;switch(ht[0]){case d.INSERT:ot=Math.min(vt.peekLength(),z),G.push(vt.next(ot));break;case d.DELETE:ot=Math.min(z,ct.peekLength()),ct.next(ot),G.delete(ot);break;case d.EQUAL:ot=Math.min(ct.peekLength(),vt.peekLength(),z);let At=ct.next(ot),V=vt.next(ot);v(At.insert,V.insert)?G.retain(ot,_.default.diff(At.attributes,V.attributes)):G.push(V).delete(ot)}z-=ot}}),G.chop()}eachLine(I,B=`
`){let W=new S.default(this.ops),G=new D,X=0;for(;W.hasNext();){if(W.peekType()!=="insert")return;let ct=W.peek(),vt=T.default.length(ct)-W.peekLength(),ht=typeof ct.insert=="string"?ct.insert.indexOf(B,vt)-vt:-1;if(ht<0)G.push(W.next());else if(ht>0)G.push(W.next(ht));else{if(I(G,W.next(1).attributes||{},X)===!1)return;X+=1,G=new D}}G.length()>0&&I(G,{},X)}invert(I){let B=new D;return this.reduce((W,G)=>{if(G.insert)B.delete(T.default.length(G));else{if(typeof G.retain=="number"&&G.attributes==null)return B.retain(G.retain),W+G.retain;if(G.delete||typeof G.retain=="number"){let X=G.delete||G.retain;return I.slice(W,W+X).forEach(ct=>{G.delete?B.push(ct):G.retain&&G.attributes&&B.retain(T.default.length(ct),_.default.invert(G.attributes,ct.attributes))}),W+X}if(typeof G.retain=="object"&&G.retain!==null){let X=I.slice(W,W+1),ct=new S.default(X.ops).next(),[vt,ht,z]=M(G.retain,ct.insert),ot=D.getHandler(vt);return B.retain({[vt]:ot.invert(ht,z)},_.default.invert(G.attributes,ct.attributes)),W+1}}return W},0),B.chop()}transform(I,B=!1){if(B=!!B,typeof I=="number")return this.transformPosition(I,B);let W=I,G=new S.default(this.ops),X=new S.default(W.ops),ct=new D;for(;G.hasNext()||X.hasNext();)if(G.peekType()!=="insert"||!B&&X.peekType()==="insert")if(X.peekType()==="insert")ct.push(X.next());else{let vt=Math.min(G.peekLength(),X.peekLength()),ht=G.next(vt),z=X.next(vt);if(ht.delete)continue;if(z.delete)ct.push(z);else{let ot=ht.retain,At=z.retain,V=typeof At=="object"&&At!==null?At:vt;if(typeof ot=="object"&&ot!==null&&typeof At=="object"&&At!==null){let tt=Object.keys(ot)[0];if(tt===Object.keys(At)[0]){let ft=D.getHandler(tt);ft&&(V={[tt]:ft.transform(ot[tt],At[tt],B)})}}ct.retain(V,_.default.transform(ht.attributes,z.attributes,B))}}else ct.retain(T.default.length(G.next()));return ct.chop()}transformPosition(I,B=!1){B=!!B;let W=new S.default(this.ops),G=0;for(;W.hasNext()&&G<=I;){let X=W.peekLength(),ct=W.peekType();W.next(),ct!=="delete"?(ct==="insert"&&(G<I||!B)&&(I+=X),G+=X):I-=Math.min(X,I-G)}return I}}D.Op=T.default,D.OpIterator=S.default,D.AttributeMap=_.default,D.handlers={},o.default=D,i.exports=D,i.exports.default=D},759:(i,o)=>{"use strict";var c;Object.defineProperty(o,"__esModule",{value:!0}),function(d){d.length=function(m){return typeof m.delete=="number"?m.delete:typeof m.retain=="number"?m.retain:typeof m.retain=="object"&&m.retain!==null?1:typeof m.insert=="string"?m.insert.length:1}}(c||(c={})),o.default=c},317:(i,o,c)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});let d=c(759);o.default=class{constructor(m){this.ops=m,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(m){m||(m=1/0);let v=this.ops[this.index];if(v){let _=this.offset,T=d.default.length(v);if(m>=T-_?(m=T-_,this.index+=1,this.offset=0):this.offset+=m,typeof v.delete=="number")return{delete:m};{let S={};return v.attributes&&(S.attributes=v.attributes),typeof v.retain=="number"?S.retain=m:typeof v.retain=="object"&&v.retain!==null?S.retain=v.retain:typeof v.insert=="string"?S.insert=v.insert.substr(_,m):S.insert=v.insert,S}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?d.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let m=this.ops[this.index];return m?typeof m.delete=="number"?"delete":typeof m.retain=="number"||typeof m.retain=="object"&&m.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let m=this.offset,v=this.index,_=this.next(),T=this.ops.slice(this.index);return this.offset=m,this.index=v,[_].concat(T)}}return[]}}},968:(i,o,c)=>{var d=c(64);typeof d=="string"&&(d=[[i.id,d,""]]);var m={hmr:!0,transform:void 0};c(27)(d,m),d.locals&&(i.exports=d.locals)},27:(i,o,c)=>{var d,m,v={},_=(d=s(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return m===void 0&&(m=d.apply(this,arguments)),m}),T=function(V){var tt={};return function(ft){if(tt[ft]===void 0){var lt=V.call(this,ft);if(lt instanceof window.HTMLIFrameElement)try{lt=lt.contentDocument.head}catch{lt=null}tt[ft]=lt}return tt[ft]}}(function(V){return document.querySelector(V)}),S=null,O=0,M=[],D=c(874);function j(V,tt){for(var ft=0;ft<V.length;ft++){var lt=V[ft],Tt=v[lt.id];if(Tt){Tt.refs++;for(var q=0;q<Tt.parts.length;q++)Tt.parts[q](lt.parts[q]);for(;q<lt.parts.length;q++)Tt.parts.push(ct(lt.parts[q],tt))}else{var Z=[];for(q=0;q<lt.parts.length;q++)Z.push(ct(lt.parts[q],tt));v[lt.id]={id:lt.id,refs:1,parts:Z}}}}s(j,"d");function I(V,tt){for(var ft=[],lt={},Tt=0;Tt<V.length;Tt++){var q=V[Tt],Z=tt.base?q[0]+tt.base:q[0],P={css:q[1],media:q[2],sourceMap:q[3]};lt[Z]?lt[Z].parts.push(P):ft.push(lt[Z]={id:Z,parts:[P]})}return ft}s(I,"f");function B(V,tt){var ft=T(V.insertInto);if(!ft)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lt=M[M.length-1];if(V.insertAt==="top")lt?lt.nextSibling?ft.insertBefore(tt,lt.nextSibling):ft.appendChild(tt):ft.insertBefore(tt,ft.firstChild),M.push(tt);else if(V.insertAt==="bottom")ft.appendChild(tt);else{if(typeof V.insertAt!="object"||!V.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var Tt=T(V.insertInto+" "+V.insertAt.before);ft.insertBefore(tt,Tt)}}s(B,"p");function W(V){if(V.parentNode===null)return!1;V.parentNode.removeChild(V);var tt=M.indexOf(V);tt>=0&&M.splice(tt,1)}s(W,"g");function G(V){var tt=document.createElement("style");return V.attrs.type="text/css",X(tt,V.attrs),B(V,tt),tt}s(G,"m");function X(V,tt){Object.keys(tt).forEach(function(ft){V.setAttribute(ft,tt[ft])})}s(X,"b");function ct(V,tt){var ft,lt,Tt,q;if(tt.transform&&V.css){if(!(q=tt.transform(V.css)))return function(){};V.css=q}if(tt.singleton){var Z=O++;ft=S||(S=G(tt)),lt=z.bind(null,ft,Z,!1),Tt=z.bind(null,ft,Z,!0)}else V.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(ft=function(P){var nt=document.createElement("link");return P.attrs.type="text/css",P.attrs.rel="stylesheet",X(nt,P.attrs),B(P,nt),nt}(tt),lt=At.bind(null,ft,tt),Tt=s(function(){W(ft),ft.href&&URL.revokeObjectURL(ft.href)},"s")):(ft=G(tt),lt=ot.bind(null,ft),Tt=s(function(){W(ft)},"s"));return lt(V),function(P){if(P){if(P.css===V.css&&P.media===V.media&&P.sourceMap===V.sourceMap)return;lt(V=P)}else Tt()}}s(ct,"y"),i.exports=function(V,tt){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(tt=tt||{}).attrs=typeof tt.attrs=="object"?tt.attrs:{},tt.singleton||typeof tt.singleton=="boolean"||(tt.singleton=_()),tt.insertInto||(tt.insertInto="head"),tt.insertAt||(tt.insertAt="bottom");var ft=I(V,tt);return j(ft,tt),function(lt){for(var Tt=[],q=0;q<ft.length;q++){var Z=ft[q];(P=v[Z.id]).refs--,Tt.push(P)}for(lt&&j(I(lt,tt),tt),q=0;q<Tt.length;q++){var P;if((P=Tt[q]).refs===0){for(var nt=0;nt<P.parts.length;nt++)P.parts[nt]();delete v[P.id]}}}};var vt,ht=(vt=[],function(V,tt){return vt[V]=tt,vt.filter(Boolean).join(`
`)});function z(V,tt,ft,lt){var Tt=ft?"":lt.css;if(V.styleSheet)V.styleSheet.cssText=ht(tt,Tt);else{var q=document.createTextNode(Tt),Z=V.childNodes;Z[tt]&&V.removeChild(Z[tt]),Z.length?V.insertBefore(q,Z[tt]):V.appendChild(q)}}s(z,"N");function ot(V,tt){var ft=tt.css,lt=tt.media;if(lt&&V.setAttribute("media",lt),V.styleSheet)V.styleSheet.cssText=ft;else{for(;V.firstChild;)V.removeChild(V.firstChild);V.appendChild(document.createTextNode(ft))}}s(ot,"w");function At(V,tt,ft){var lt=ft.css,Tt=ft.sourceMap,q=tt.convertToAbsoluteUrls===void 0&&Tt;(tt.convertToAbsoluteUrls||q)&&(lt=D(lt)),Tt&&(lt+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Tt))))+" */");var Z=new Blob([lt],{type:"text/css"}),P=V.href;V.href=URL.createObjectURL(Z),P&&URL.revokeObjectURL(P)}s(At,"E")},874:i=>{i.exports=function(o){var c=typeof window<"u"&&window.location;if(!c)throw new Error("fixUrls requires window.location");if(!o||typeof o!="string")return o;var d=c.protocol+"//"+c.host,m=d+c.pathname.replace(/\/[^\/]*$/,"/");return o.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(v,_){var T,S=_.trim().replace(/^"(.*)"$/,function(O,M){return M}).replace(/^'(.*)'$/,function(O,M){return M});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(S)?v:(T=S.indexOf("//")===0?S:S.indexOf("/")===0?d+S:m+S.replace(/^\.\//,""),"url("+JSON.stringify(T)+")")})}},676:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FormatHTMLStringIndentation=function(c,d){for(var m=" ".repeat(2),v=0,_=`
`,T=null,S=null,O=null,M="",D=0;D<=c.length;D++){T=S,S=c.substr(D,1),O=c.substr(D+1,1);var j=c.substr(D,4)==="<br>",I=S==="<"&&O!=="/"&&!j,B=S==="<"&&O==="/"&&!j,W=T===">"&&S!=="<"&&v>0,G=!j&&!I&&!B&&W&&c.substr(D,c.substr(D).indexOf("<")).trim()==="";j&&(M+=_,v--,D+=4),I?(M+=_+m.repeat(v),v++):B?(--v<0&&(v=0),M+=_+m.repeat(v)):(S===" "&&O===" "||S===_&&c.substr(D,c.substr(D).indexOf("<")).trim()==="")&&(S=""),W&&!G&&(M+=_+m.repeat(v)),M+=S}return d.log("formatHTML",{before:c,after:M}),M}},795:(i,o)=>{"use strict";function c(S){return S.replace(/\s+/g," ").trim()}s(c,"n");function d(S){return S.replace(/<br([\s]*[\/]?>)/g,"<p> </p>")}s(d,"r");function m(S){return S.replace(/<p><\/p>/g,"<p> </p>")}s(m,"s");function v(S){return S.replace(/(<(?!\/)[\w=\."'\s]*>) /g,"$1")}s(v,"i");function _(S){return S.replace(/ (<\/[\w]+>)/g,"$1")}s(_,"o");function T(S,O){return S.reduce(function(M,D){return D(M)},O)}s(T,"l"),Object.defineProperty(o,"__esModule",{value:!0}),o.OutputHTMLParser=function(S){return T([c,v,_,d,m],S)},o.ConvertMultipleSpacesToSingle=c,o.PreserveNewlinesBr=d,o.PreserveNewlinesPTags=m,o.FixTagSpaceOpenTag=v,o.FixTagSpaceCloseTag=_,o.Compose=T},614:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.QuillHtmlLogger=void 0;var c=function(){function d(){this.debug=!1}return s(d,"t"),d.prototype.setDebug=function(m){this.debug=m},d.prototype.prefixString=function(){return"</> quill-html-edit-button: "},Object.defineProperty(d.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v]}},enumerable:!1,configurable:!0}),d}();o.QuillHtmlLogger=c},190:function(i,o,c){"use strict";var d=this&&this.__assign||function(){return d=Object.assign||function(I){for(var B,W=1,G=arguments.length;W<G;W++)for(var X in B=arguments[W])Object.prototype.hasOwnProperty.call(B,X)&&(I[X]=B[X]);return I},d.apply(this,arguments)},m=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(o,"__esModule",{value:!0}),o.htmlEditButton=void 0;var v=c(614);c(968);var _=m(c(429)),T=c(795),S=c(676);function O(I){return document.createElement(I)}s(O,"c");function M(I,B,W){return I.setAttribute(B,W)}s(M,"u");var D=new v.QuillHtmlLogger,j=s(function(I,B){var W=B||{},G=!(!W||!W.debug);D.setDebug(G),D.log("logging enabled");var X=I.getModule("toolbar");if(!X)throw new Error('quill.htmlEditButton requires the "toolbar" module to be included too');var ct=X.container,vt=O("span");M(vt,"class","ql-formats");var ht=O("button");ht.innerHTML=W.buttonHTML||"&lt;&gt;",ht.title=W.buttonTitle||"Show HTML source",ht.type="button";var z=s(function(ot){I.clipboard.dangerouslyPasteHTML(ot)},"g");ht.onclick=function(ot){ot.preventDefault(),function(At,V,tt){var ft=At.container.querySelector(".ql-editor").innerHTML,lt=O("div"),Tt=O("div"),q=V.msg||`Edit HTML here, when you click "OK" the quill editor's contents will be replaced`,Z=V.cancelText||"Cancel",P=V.okText||"Ok",nt=V.closeOnClickOverlay!==!1;M(Tt,"class","ql-html-overlayContainer"),M(lt,"class","ql-html-popupContainer");var rt=O("span");M(rt,"class","ql-html-popupTitle"),rt.innerText=q;var ut=O("div");ut.appendChild(rt),M(ut,"class","ql-html-textContainer");var Lt=O("pre");M(Lt,"data-language","xml"),Lt.innerText=(0,S.FormatHTMLStringIndentation)(ft,D);var _t=O("div");M(_t,"class","ql-html-textArea");var Dt=O("button");Dt.innerHTML=Z,M(Dt,"class","ql-html-buttonCancel");var Kt=O("button");Kt.innerHTML=P,M(Kt,"class","ql-html-buttonOk");var Vt=O("div");M(Vt,"class","ql-html-buttonGroup");var Gt=document.querySelector(V.prependSelector);Vt.appendChild(Dt),Vt.appendChild(Kt),_t.appendChild(Lt),ut.appendChild(_t),ut.appendChild(Vt),lt.appendChild(ut),Tt.appendChild(lt),Gt?Gt.prepend(Tt):document.body.appendChild(Tt);var Xt=V&&V.editorModules,le=Xt&&Object.keys(Xt).length?Xt:{},Se=new _.default(_t,{modules:d({syntax:V.syntax},le)});Dt.onclick=function(){Gt?Gt.removeChild(Tt):document.body.removeChild(Tt)},nt&&(Tt.onclick=Dt.onclick),lt.onclick=function(fe){fe.preventDefault(),fe.stopPropagation()},Kt.onclick=function(){var fe=Se.container.querySelector(".ql-editor").innerText,Yt=(0,T.OutputHTMLParser)(fe);D.log("OutputHTMLParser",{htmlInputFromPopup:fe,htmlOutputFormatted:Yt}),tt(Yt),Gt?Gt.removeChild(Tt):document.body.removeChild(Tt)}}(I,W,z)},vt.appendChild(ht),ct?.appendChild(vt)},"d");o.htmlEditButton=j,window.htmlEditButton=j,o.default=j},429:(i,o,c)=>{"use strict";c.r(o),c.d(o,{Module:()=>on,Parchment:()=>d,Range:()=>C,default:()=>OT});var d={};c.r(d),c.d(d,{Attributor:()=>jn,AttributorStore:()=>Zs,BlockBlot:()=>Fo,ClassAttributor:()=>ji,ContainerBlot:()=>Ks,EmbedBlot:()=>Ti,InlineBlot:()=>ec,LeafBlot:()=>Gn,ParentBlot:()=>ar,Registry:()=>Bi,Scope:()=>Ft,ScrollBlot:()=>Ra,StyleAttributor:()=>Pr,TextBlot:()=>Ho});let m=s(function(){this.__data__=[],this.size=0},"s"),v=s(function(u,a){return u===a||u!=u&&a!=a},"i"),_=s(function(u,a){for(var h=u.length;h--;)if(v(u[h][0],a))return h;return-1},"o");var T=Array.prototype.splice;let S=s(function(u){var a=this.__data__,h=_(a,u);return!(h<0)&&(h==a.length-1?a.pop():T.call(a,h,1),--this.size,!0)},"a"),O=s(function(u){var a=this.__data__,h=_(a,u);return h<0?void 0:a[h][1]},"c"),M=s(function(u){return _(this.__data__,u)>-1},"u"),D=s(function(u,a){var h=this.__data__,p=_(h,u);return p<0?(++this.size,h.push([u,a])):h[p][1]=a,this},"h");function j(u){var a=-1,h=u==null?0:u.length;for(this.clear();++a<h;){var p=u[a];this.set(p[0],p[1])}}s(j,"d"),j.prototype.clear=m,j.prototype.delete=S,j.prototype.get=O,j.prototype.has=M,j.prototype.set=D;let I=j,B=s(function(){this.__data__=new I,this.size=0},"p"),W=s(function(u){var a=this.__data__,h=a.delete(u);return this.size=a.size,h},"g"),G=s(function(u){return this.__data__.get(u)},"m"),X=s(function(u){return this.__data__.has(u)},"b"),ct=typeof global=="object"&&global&&global.Object===Object&&global;var vt=typeof self=="object"&&self&&self.Object===Object&&self;let ht=ct||vt||Function("return this")(),z=ht.Symbol;var ot=Object.prototype,At=ot.hasOwnProperty,V=ot.toString,tt=z?z.toStringTag:void 0;let ft=s(function(u){var a=At.call(u,tt),h=u[tt];try{u[tt]=void 0;var p=!0}catch{}var b=V.call(u);return p&&(a?u[tt]=h:delete u[tt]),b},"k");var lt=Object.prototype.toString;let Tt=s(function(u){return lt.call(u)},"L");var q=z?z.toStringTag:void 0;let Z=s(function(u){return u==null?u===void 0?"[object Undefined]":"[object Null]":q&&q in Object(u)?ft(u):Tt(u)},"T"),P=s(function(u){var a=typeof u;return u!=null&&(a=="object"||a=="function")},"S"),nt=s(function(u){if(!P(u))return!1;var a=Z(u);return a=="[object Function]"||a=="[object GeneratorFunction]"||a=="[object AsyncFunction]"||a=="[object Proxy]"},"C"),rt=ht["__core-js_shared__"];var ut,Lt=(ut=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||""))?"Symbol(src)_1."+ut:"";let _t=s(function(u){return!!Lt&&Lt in u},"M");var Dt=Function.prototype.toString;let Kt=s(function(u){if(u!=null){try{return Dt.call(u)}catch{}try{return u+""}catch{}}return""},"U");var Vt=/^\[object .+?Constructor\]$/,Gt=Function.prototype,Xt=Object.prototype,le=Gt.toString,Se=Xt.hasOwnProperty,fe=RegExp("^"+le.call(Se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let Yt=s(function(u){return!(!P(u)||_t(u))&&(nt(u)?fe:Vt).test(Kt(u))},"V"),ve=s(function(u,a){return u?.[a]},"K"),Zt=s(function(u,a){var h=ve(u,a);return Yt(h)?h:void 0},"W"),ie=Zt(ht,"Map"),Jt=Zt(Object,"create"),Qt=s(function(){this.__data__=Jt?Jt(null):{},this.size=0},"X"),Te=s(function(u){var a=this.has(u)&&delete this.__data__[u];return this.size-=a?1:0,a},"Q");var re=Object.prototype.hasOwnProperty;let Le=s(function(u){var a=this.__data__;if(Jt){var h=a[u];return h==="__lodash_hash_undefined__"?void 0:h}return re.call(a,u)?a[u]:void 0},"J");var ke=Object.prototype.hasOwnProperty;let ze=s(function(u){var a=this.__data__;return Jt?a[u]!==void 0:ke.call(a,u)},"et"),Qe=s(function(u,a){var h=this.__data__;return this.size+=this.has(u)?0:1,h[u]=Jt&&a===void 0?"__lodash_hash_undefined__":a,this},"nt");function De(u){var a=-1,h=u==null?0:u.length;for(this.clear();++a<h;){var p=u[a];this.set(p[0],p[1])}}s(De,"rt"),De.prototype.clear=Qt,De.prototype.delete=Te,De.prototype.get=Le,De.prototype.has=ze,De.prototype.set=Qe;let ye=De,$e=s(function(){this.size=0,this.__data__={hash:new ye,map:new(ie||I),string:new ye}},"it"),tn=s(function(u){var a=typeof u;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?u!=="__proto__":u===null},"ot"),me=s(function(u,a){var h=u.__data__;return tn(a)?h[typeof a=="string"?"string":"hash"]:h.map},"lt"),Ue=s(function(u){var a=me(this,u).delete(u);return this.size-=a?1:0,a},"at"),Xe=s(function(u){return me(this,u).get(u)},"ct"),Je=s(function(u){return me(this,u).has(u)},"ut"),qe=s(function(u,a){var h=me(this,u),p=h.size;return h.set(u,a),this.size+=h.size==p?0:1,this},"ht");function oe(u){var a=-1,h=u==null?0:u.length;for(this.clear();++a<h;){var p=u[a];this.set(p[0],p[1])}}s(oe,"dt"),oe.prototype.clear=$e,oe.prototype.delete=Ue,oe.prototype.get=Xe,oe.prototype.has=Je,oe.prototype.set=qe;let Ae=oe,It=s(function(u,a){var h=this.__data__;if(h instanceof I){var p=h.__data__;if(!ie||p.length<199)return p.push([u,a]),this.size=++h.size,this;h=this.__data__=new Ae(p)}return h.set(u,a),this.size=h.size,this},"pt");function ue(u){var a=this.__data__=new I(u);this.size=a.size}s(ue,"gt"),ue.prototype.clear=B,ue.prototype.delete=W,ue.prototype.get=G,ue.prototype.has=X,ue.prototype.set=It;let hn=ue,ti=function(){try{var u=Zt(Object,"defineProperty");return u({},"",{}),u}catch{}}(),pn=s(function(u,a,h){a=="__proto__"&&ti?ti(u,a,{configurable:!0,enumerable:!0,value:h,writable:!0}):u[a]=h},"yt"),Vn=s(function(u,a,h){(h!==void 0&&!v(u[a],h)||h===void 0&&!(a in u))&&pn(u,a,h)},"vt"),en=function(u){return function(a,h,p){for(var b=-1,E=Object(a),A=p(a),k=A.length;k--;){var U=A[u?k:++b];if(h(E[U],U,E)===!1)break}return a}}();var gr=typeof wi=="object"&&wi&&!wi.nodeType&&wi,sr=gr&&typeof Ii=="object"&&Ii&&!Ii.nodeType&&Ii,y=sr&&sr.exports===gr?ht.Buffer:void 0,w=y?y.allocUnsafe:void 0;let N=s(function(u,a){if(a)return u.slice();var h=u.length,p=w?w(h):new u.constructor(h);return u.copy(p),p},"qt"),R=ht.Uint8Array,Y=s(function(u){var a=new u.constructor(u.byteLength);return new R(a).set(new R(u)),a},"_t"),Q=s(function(u,a){var h=a?Y(u.buffer):u.buffer;return new u.constructor(h,u.byteOffset,u.length)},"Lt"),Ct=s(function(u,a){var h=-1,p=u.length;for(a||(a=Array(p));++h<p;)a[h]=u[h];return a},"Ot");var at=Object.create;let St=function(){function u(){}return s(u,"t"),function(a){if(!P(a))return{};if(at)return at(a);u.prototype=a;var h=new u;return u.prototype=void 0,h}}(),$=s(function(u,a){return function(h){return u(a(h))}},"Ct"),yt=$(Object.getPrototypeOf,Object);var Ut=Object.prototype;let Ce=s(function(u){var a=u&&u.constructor;return u===(typeof a=="function"&&a.prototype||Ut)},"It"),ge=s(function(u){return typeof u.constructor!="function"||Ce(u)?{}:St(yt(u))},"Mt"),Ne=s(function(u){return u!=null&&typeof u=="object"},"Bt"),Be=s(function(u){return Ne(u)&&Z(u)=="[object Arguments]"},"Ut");var vn=Object.prototype,En=vn.hasOwnProperty,Zn=vn.propertyIsEnumerable;let Pi=Be(function(){return arguments}())?Be:function(u){return Ne(u)&&En.call(u,"callee")&&!Zn.call(u,"callee")},Ke=Array.isArray,Ri=s(function(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=9007199254740991},"$t"),ei=s(function(u){return u!=null&&Ri(u.length)&&!nt(u)},"Vt"),xi=s(function(u){return Ne(u)&&ei(u)},"Kt"),ai=s(function(){return!1},"Wt");var qi=typeof wi=="object"&&wi&&!wi.nodeType&&wi,vr=qi&&typeof Ii=="object"&&Ii&&!Ii.nodeType&&Ii,Dr=vr&&vr.exports===qi?ht.Buffer:void 0;let K=(Dr?Dr.isBuffer:void 0)||ai;var pt=Function.prototype,Mt=Object.prototype,F=pt.toString,et=Mt.hasOwnProperty,xt=F.call(Object);let Nt=s(function(u){if(!Ne(u)||Z(u)!="[object Object]")return!1;var a=yt(u);if(a===null)return!0;var h=et.call(a,"constructor")&&a.constructor;return typeof h=="function"&&h instanceof h&&F.call(h)==xt},"re");var wt={};wt["[object Float32Array]"]=wt["[object Float64Array]"]=wt["[object Int8Array]"]=wt["[object Int16Array]"]=wt["[object Int32Array]"]=wt["[object Uint8Array]"]=wt["[object Uint8ClampedArray]"]=wt["[object Uint16Array]"]=wt["[object Uint32Array]"]=!0,wt["[object Arguments]"]=wt["[object Array]"]=wt["[object ArrayBuffer]"]=wt["[object Boolean]"]=wt["[object DataView]"]=wt["[object Date]"]=wt["[object Error]"]=wt["[object Function]"]=wt["[object Map]"]=wt["[object Number]"]=wt["[object Object]"]=wt["[object RegExp]"]=wt["[object Set]"]=wt["[object String]"]=wt["[object WeakMap]"]=!1;let qt=s(function(u){return Ne(u)&&Ri(u.length)&&!!wt[Z(u)]},"ie"),pe=s(function(u){return function(a){return u(a)}},"oe");var Oe=typeof wi=="object"&&wi&&!wi.nodeType&&wi,nn=Oe&&typeof Ii=="object"&&Ii&&!Ii.nodeType&&Ii,We=nn&&nn.exports===Oe&&ct.process;let gt=function(){try{var u=nn&&nn.require&&nn.require("util").types;return u||We&&We.binding&&We.binding("util")}catch{}}();var zt=gt&&gt.isTypedArray;let _e=zt?pe(zt):qt,Ee=s(function(u,a){if((a!=="constructor"||typeof u[a]!="function")&&a!="__proto__")return u[a]},"fe");var Ve=Object.prototype.hasOwnProperty;let $n=s(function(u,a,h){var p=u[a];Ve.call(u,a)&&v(p,h)&&(h!==void 0||a in u)||pn(u,a,h)},"ge"),he=s(function(u,a,h,p){var b=!h;h||(h={});for(var E=-1,A=a.length;++E<A;){var k=a[E],U=p?p(h[k],u[k],k,h,u):void 0;U===void 0&&(U=u[k]),b?pn(h,k,U):$n(h,k,U)}return h},"me"),je=s(function(u,a){for(var h=-1,p=Array(u);++h<u;)p[h]=a(h);return p},"be");var be=/^(?:0|[1-9]\d*)$/;let Bn=s(function(u,a){var h=typeof u;return!!(a=a??9007199254740991)&&(h=="number"||h!="symbol"&&be.test(u))&&u>-1&&u%1==0&&u<a},"ve");var ps=Object.prototype.hasOwnProperty;let Xr=s(function(u,a){var h=Ke(u),p=!h&&Pi(u),b=!h&&!p&&K(u),E=!h&&!p&&!b&&_e(u),A=h||p||b||E,k=A?je(u.length,String):[],U=k.length;for(var st in u)!a&&!ps.call(u,st)||A&&(st=="length"||b&&(st=="offset"||st=="parent")||E&&(st=="buffer"||st=="byteLength"||st=="byteOffset")||Bn(st,U))||k.push(st);return k},"Ne"),Me=s(function(u){var a=[];if(u!=null)for(var h in Object(u))a.push(h);return a},"we");var we=Object.prototype.hasOwnProperty;let Jr=s(function(u){if(!P(u))return Me(u);var a=Ce(u),h=[];for(var p in u)(p!="constructor"||!a&&we.call(u,p))&&h.push(p);return h},"Ae"),Kn=s(function(u){return ei(u)?Xr(u,!0):Jr(u)},"qe"),Qr=s(function(u){return he(u,Kn(u))},"ke"),Yn=s(function(u,a,h,p,b,E,A){var k=Ee(u,h),U=Ee(a,h),st=A.get(U);if(st)Vn(u,h,st);else{var Et=E?E(k,U,h+"",u,a,A):void 0,Bt=Et===void 0;if(Bt){var jt=Ke(U),$t=!jt&&K(U),Wt=!jt&&!$t&&_e(U);Et=U,jt||$t||Wt?Ke(k)?Et=k:xi(k)?Et=Ct(k):$t?(Bt=!1,Et=N(U,!0)):Wt?(Bt=!1,Et=Q(U,!0)):Et=[]:Nt(U)||Pi(U)?(Et=k,Pi(k)?Et=Qr(k):P(k)&&!nt(k)||(Et=ge(U))):Bt=!1}Bt&&(A.set(U,Et),b(Et,U,p,E,A),A.delete(U)),Vn(u,h,Et)}},"_e"),Ei=s(function u(a,h,p,b,E){a!==h&&en(h,function(A,k){if(E||(E=new hn),P(A))Yn(a,h,k,p,u,b,E);else{var U=b?b(Ee(a,k),A,k+"",a,h,E):void 0;U===void 0&&(U=A),Vn(a,k,U)}},Kn)},"t"),li=s(function(u){return u},"Oe"),ts=s(function(u,a,h){switch(h.length){case 0:return u.call(a);case 1:return u.call(a,h[0]);case 2:return u.call(a,h[0],h[1]);case 3:return u.call(a,h[0],h[1],h[2])}return u.apply(a,h)},"Te");var Ir=Math.max;let jo=s(function(u,a,h){return a=Ir(a===void 0?u.length-1:a,0),function(){for(var p=arguments,b=-1,E=Ir(p.length-a,0),A=Array(E);++b<E;)A[b]=p[a+b];b=-1;for(var k=Array(a+1);++b<a;)k[b]=p[b];return k[a]=h(A),ts(u,this,k)}},"Ce"),ee=s(function(u){return function(){return u}},"je"),Ln=ti?function(u,a){return ti(u,"toString",{configurable:!0,enumerable:!1,value:ee(a),writable:!0})}:li;var Fe=Date.now;let ms=function(u){var a=0,h=0;return function(){var p=Fe(),b=16-(p-h);if(h=p,b>0){if(++a>=800)return arguments[0]}else a=0;return u.apply(void 0,arguments)}}(Ln),gs=s(function(u,a){return ms(jo(u,a,li),u+"")},"Be"),es=s(function(u,a,h){if(!P(h))return!1;var p=typeof a;return!!(p=="number"?ei(h)&&Bn(a,h.length):p=="string"&&a in h)&&v(h[a],u)},"Ue"),ni=function(u){return gs(function(a,h){var p=-1,b=h.length,E=b>1?h[b-1]:void 0,A=b>2?h[2]:void 0;for(E=u.length>3&&typeof E=="function"?(b--,E):void 0,A&&es(h[0],h[1],A)&&(E=b<3?void 0:E,b=1),a=Object(a);++p<b;){var k=h[p];k&&u(a,k,p,E)}return a})}(function(u,a,h){Ei(u,a,h)});var Ft=(u=>(u[u.TYPE=3]="TYPE",u[u.LEVEL=12]="LEVEL",u[u.ATTRIBUTE=13]="ATTRIBUTE",u[u.BLOT=14]="BLOT",u[u.INLINE=7]="INLINE",u[u.BLOCK=11]="BLOCK",u[u.BLOCK_BLOT=10]="BLOCK_BLOT",u[u.INLINE_BLOT=6]="INLINE_BLOT",u[u.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",u[u.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",u[u.ANY=15]="ANY",u))(Ft||{});class jn{static{s(this,"ze")}constructor(a,h,p={}){this.attrName=a,this.keyName=h;let b=Ft.TYPE&Ft.ATTRIBUTE;this.scope=p.scope!=null?p.scope&Ft.LEVEL|b:Ft.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}static keys(a){return Array.from(a.attributes).map(h=>h.name)}add(a,h){return!!this.canAdd(a,h)&&(a.setAttribute(this.keyName,h),!0)}canAdd(a,h){return this.whitelist==null||(typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1)}remove(a){a.removeAttribute(this.keyName)}value(a){let h=a.getAttribute(this.keyName);return this.canAdd(a,h)&&h?h:""}}class ii extends Error{static{s(this,"He")}constructor(a){super(a="[Parchment] "+a),this.message=a,this.name=this.constructor.name}}let Nn=class Zv{static{s(this,"t")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(a,h=!1){if(a==null)return null;if(this.blots.has(a))return this.blots.get(a)||null;if(h){let p=null;try{p=a.parentNode}catch{return null}return this.find(p,h)}return null}create(a,h,p){let b=this.query(h);if(b==null)throw new ii(`Unable to create ${h} blot`);let E=b,A=h instanceof Node||h.nodeType===Node.TEXT_NODE?h:E.create(p),k=new E(a,A,p);return Zv.blots.set(k.domNode,k),k}find(a,h=!1){return Zv.find(a,h)}query(a,h=Ft.ANY){let p;return typeof a=="string"?p=this.types[a]||this.attributes[a]:a instanceof Text||a.nodeType===Node.TEXT_NODE?p=this.types.text:typeof a=="number"?a&Ft.LEVEL&Ft.BLOCK?p=this.types.block:a&Ft.LEVEL&Ft.INLINE&&(p=this.types.inline):a instanceof Element&&((a.getAttribute("class")||"").split(/\s+/).some(b=>(p=this.classes[b],!!p)),p=p||this.tags[a.tagName]),p==null?null:"scope"in p&&h&Ft.LEVEL&p.scope&&h&Ft.TYPE&p.scope?p:null}register(...a){return a.map(h=>{let p="blotName"in h,b="attrName"in h;if(!p&&!b)throw new ii("Invalid definition");if(p&&h.blotName==="abstract")throw new ii("Cannot register abstract class");let E=p?h.blotName:b?h.attrName:void 0;return this.types[E]=h,b?typeof h.keyName=="string"&&(this.attributes[h.keyName]=h):p&&(h.className&&(this.classes[h.className]=h),h.tagName&&(Array.isArray(h.tagName)?h.tagName=h.tagName.map(A=>A.toUpperCase()):h.tagName=h.tagName.toUpperCase(),(Array.isArray(h.tagName)?h.tagName:[h.tagName]).forEach(A=>{(this.tags[A]==null||h.className==null)&&(this.tags[A]=h)}))),h})}};Nn.blots=new WeakMap;let Bi=Nn;function Xl(u,a){return(u.getAttribute("class")||"").split(/\s+/).filter(h=>h.indexOf(`${a}-`)===0)}s(Xl,"Ve");let ji=class extends jn{static{s(this,"Ke")}static keys(u){return(u.getAttribute("class")||"").split(/\s+/).map(a=>a.split("-").slice(0,-1).join("-"))}add(u,a){return!!this.canAdd(u,a)&&(this.remove(u),u.classList.add(`${this.keyName}-${a}`),!0)}remove(u){Xl(u,this.keyName).forEach(a=>{u.classList.remove(a)}),u.classList.length===0&&u.removeAttribute("class")}value(u){let a=(Xl(u,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(u,a)?a:""}};function Jl(u){let a=u.split("-"),h=a.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("");return a[0]+h}s(Jl,"We");let Pr=class extends jn{static{s(this,"Ze")}static keys(u){return(u.getAttribute("style")||"").split(";").map(a=>a.split(":")[0].trim())}add(u,a){return!!this.canAdd(u,a)&&(u.style[Jl(this.keyName)]=a,!0)}remove(u){u.style[Jl(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")}value(u){let a=u.style[Jl(this.keyName)];return this.canAdd(u,a)?a:""}},Zs=class{static{s(this,"Ge")}constructor(u){this.attributes={},this.domNode=u,this.build()}attribute(u,a){a?u.add(this.domNode,a)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])}build(){this.attributes={};let u=Bi.find(this.domNode);if(u==null)return;let a=jn.keys(this.domNode),h=ji.keys(this.domNode),p=Pr.keys(this.domNode);a.concat(h).concat(p).forEach(b=>{let E=u.scroll.query(b,Ft.ATTRIBUTE);E instanceof jn&&(this.attributes[E.attrName]=E)})}copy(u){Object.keys(this.attributes).forEach(a=>{let h=this.attributes[a].value(this.domNode);u.format(a,h)})}move(u){this.copy(u),Object.keys(this.attributes).forEach(a=>{this.attributes[a].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((u,a)=>(u[a]=this.attributes[a].value(this.domNode),u),{})}},ih=class{static{s(this,"Xe")}constructor(u,a){this.scroll=u,this.domNode=a,Bi.blots.set(a,this),this.prev=null,this.next=null}static create(u){if(this.tagName==null)throw new ii("Blot definition missing tagName");let a,h;return Array.isArray(this.tagName)?(typeof u=="string"?(h=u.toUpperCase(),parseInt(h,10).toString()===h&&(h=parseInt(h,10))):typeof u=="number"&&(h=u),a=typeof h=="number"?document.createElement(this.tagName[h-1]):h&&this.tagName.indexOf(h)>-1?document.createElement(h):document.createElement(this.tagName[0])):a=document.createElement(this.tagName),this.className&&a.classList.add(this.className),a}get statics(){return this.constructor}attach(){}clone(){let u=this.domNode.cloneNode(!1);return this.scroll.create(u)}detach(){this.parent!=null&&this.parent.removeChild(this),Bi.blots.delete(this.domNode)}deleteAt(u,a){this.isolate(u,a).remove()}formatAt(u,a,h,p){let b=this.isolate(u,a);if(this.scroll.query(h,Ft.BLOT)!=null&&p)b.wrap(h,p);else if(this.scroll.query(h,Ft.ATTRIBUTE)!=null){let E=this.scroll.create(this.statics.scope);b.wrap(E),E.format(h,p)}}insertAt(u,a,h){let p=h==null?this.scroll.create("text",a):this.scroll.create(a,h),b=this.split(u);this.parent.insertBefore(p,b||void 0)}isolate(u,a){let h=this.split(u);if(h==null)throw new Error("Attempt to isolate at end");return h.split(a),h}length(){return 1}offset(u=this.parent){return this.parent==null||this===u?0:this.parent.children.offset(this)+this.parent.offset(u)}optimize(u){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(u,a){let h=typeof u=="string"?this.scroll.create(u,a):u;return this.parent!=null&&(this.parent.insertBefore(h,this.next||void 0),this.remove()),h}split(u,a){return u===0?this:this.next}update(u,a){}wrap(u,a){let h=typeof u=="string"?this.scroll.create(u,a):u;if(this.parent!=null&&this.parent.insertBefore(h,this.next||void 0),typeof h.appendChild!="function")throw new ii(`Cannot wrap ${u}`);return h.appendChild(this),h}};ih.blotName="abstract";let Ql=ih,xe=class extends Ql{static{s(this,"Ye")}static value(u){return!0}index(u,a){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(a,1):-1}position(u,a){let h=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return u>0&&(h+=1),[this.parent.domNode,h]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};xe.scope=Ft.INLINE_BLOT;let Gn=xe;class or{static{s(this,"tn")}constructor(){this.head=null,this.tail=null,this.length=0}append(...a){if(this.insertBefore(a[0],null),a.length>1){let h=a.slice(1);this.append(...h)}}at(a){let h=this.iterator(),p=h();for(;p&&a>0;)a-=1,p=h();return p}contains(a){let h=this.iterator(),p=h();for(;p;){if(p===a)return!0;p=h()}return!1}indexOf(a){let h=this.iterator(),p=h(),b=0;for(;p;){if(p===a)return b;b+=1,p=h()}return-1}insertBefore(a,h){a!=null&&(this.remove(a),a.next=h,h!=null?(a.prev=h.prev,h.prev!=null&&(h.prev.next=a),h.prev=a,h===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)}offset(a){let h=0,p=this.head;for(;p!=null;){if(p===a)return h;h+=p.length(),p=p.next}return-1}remove(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)}iterator(a=this.head){return()=>{let h=a;return a!=null&&(a=a.next),h}}find(a,h=!1){let p=this.iterator(),b=p();for(;b;){let E=b.length();if(a<E||h&&a===E&&(b.next==null||b.next.length()!==0))return[b,a];a-=E,b=p()}return[null,0]}forEach(a){let h=this.iterator(),p=h();for(;p;)a(p),p=h()}forEachAt(a,h,p){if(h<=0)return;let[b,E]=this.find(a),A=a-E,k=this.iterator(b),U=k();for(;U&&A<a+h;){let st=U.length();a>A?p(U,a-A,Math.min(h,A+st-a)):p(U,0,Math.min(st,a+h-A)),A+=st,U=k()}}map(a){return this.reduce((h,p)=>(h.push(a(p)),h),[])}reduce(a,h){let p=this.iterator(),b=p();for(;b;)h=a(h,b),b=p();return h}}function $s(u,a){let h=a.find(u);if(h)return h;try{return a.create(u)}catch{let p=a.create(Ft.INLINE);return Array.from(u.childNodes).forEach(b=>{p.domNode.appendChild(b)}),u.parentNode&&u.parentNode.replaceChild(p.domNode,u),p.attach(),p}}s($s,"en");let tc=class Ro extends Ql{static{s(this,"t")}constructor(a,h){super(a,h),this.uiNode=null,this.build()}appendChild(a){this.insertBefore(a)}attach(){super.attach(),this.children.forEach(a=>{a.attach()})}attachUI(a){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=a,Ro.uiClass&&this.uiNode.classList.add(Ro.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new or,Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).reverse().forEach(a=>{try{let h=$s(a,this.scroll);this.insertBefore(h,this.children.head||void 0)}catch(h){if(h instanceof ii)return;throw h}})}deleteAt(a,h){if(a===0&&h===this.length())return this.remove();this.children.forEachAt(a,h,(p,b,E)=>{p.deleteAt(b,E)})}descendant(a,h=0){let[p,b]=this.children.find(h);return a.blotName==null&&a(p)||a.blotName!=null&&p instanceof a?[p,b]:p instanceof Ro?p.descendant(a,b):[null,-1]}descendants(a,h=0,p=Number.MAX_VALUE){let b=[],E=p;return this.children.forEachAt(h,p,(A,k,U)=>{(a.blotName==null&&a(A)||a.blotName!=null&&A instanceof a)&&b.push(A),A instanceof Ro&&(b=b.concat(A.descendants(a,k,E))),E-=U}),b}detach(){this.children.forEach(a=>{a.detach()}),super.detach()}enforceAllowedChildren(){let a=!1;this.children.forEach(h=>{a||this.statics.allowedChildren.some(p=>h instanceof p)||(h.statics.scope===Ft.BLOCK_BLOT?(h.next!=null&&this.splitAfter(h),h.prev!=null&&this.splitAfter(h.prev),h.parent.unwrap(),a=!0):h instanceof Ro?h.unwrap():h.remove())})}formatAt(a,h,p,b){this.children.forEachAt(a,h,(E,A,k)=>{E.formatAt(A,k,p,b)})}insertAt(a,h,p){let[b,E]=this.children.find(a);if(b)b.insertAt(E,h,p);else{let A=p==null?this.scroll.create("text",h):this.scroll.create(h,p);this.appendChild(A)}}insertBefore(a,h){a.parent!=null&&a.parent.children.remove(a);let p=null;this.children.insertBefore(a,h||null),a.parent=this,h!=null&&(p=h.domNode),(this.domNode.parentNode!==a.domNode||this.domNode.nextSibling!==p)&&this.domNode.insertBefore(a.domNode,p),a.attach()}length(){return this.children.reduce((a,h)=>a+h.length(),0)}moveChildren(a,h){this.children.forEach(p=>{a.insertBefore(p,h)})}optimize(a){if(super.optimize(a),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let h=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(h)}else this.remove()}path(a,h=!1){let[p,b]=this.children.find(a,h),E=[[this,a]];return p instanceof Ro?E.concat(p.path(b,h)):(p!=null&&E.push([p,b]),E)}removeChild(a){this.children.remove(a)}replaceWith(a,h){let p=typeof a=="string"?this.scroll.create(a,h):a;return p instanceof Ro&&this.moveChildren(p),super.replaceWith(p)}split(a,h=!1){if(!h){if(a===0)return this;if(a===this.length())return this.next}let p=this.clone();return this.parent&&this.parent.insertBefore(p,this.next||void 0),this.children.forEachAt(a,this.length(),(b,E,A)=>{let k=b.split(E,h);k!=null&&p.appendChild(k)}),p}splitAfter(a){let h=this.clone();for(;a.next!=null;)h.appendChild(a.next);return this.parent&&this.parent.insertBefore(h,this.next||void 0),h}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(a,h){let p=[],b=[];a.forEach(E=>{E.target===this.domNode&&E.type==="childList"&&(p.push(...E.addedNodes),b.push(...E.removedNodes))}),b.forEach(E=>{if(E.parentNode!=null&&E.tagName!=="IFRAME"&&document.body.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let A=this.scroll.find(E);A!=null&&(A.domNode.parentNode==null||A.domNode.parentNode===this.domNode)&&A.detach()}),p.filter(E=>E.parentNode===this.domNode&&E!==this.uiNode).sort((E,A)=>E===A?0:E.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(E=>{let A=null;E.nextSibling!=null&&(A=this.scroll.find(E.nextSibling));let k=$s(E,this.scroll);(k.next!==A||k.next==null)&&(k.parent!=null&&k.parent.removeChild(this),this.insertBefore(k,A||void 0))}),this.enforceAllowedChildren()}};tc.uiClass="";let ar=tc,ns=class Yl extends ar{static{s(this,"t")}static create(a){return super.create(a)}static formats(a,h){let p=h.query(Yl.blotName);if(p==null||a.tagName!==p.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,h){super(a,h),this.attributes=new Zs(this.domNode)}format(a,h){if(a!==this.statics.blotName||h){let p=this.scroll.query(a,Ft.INLINE);if(p==null)return;p instanceof jn?this.attributes.attribute(p,h):h&&(a!==this.statics.blotName||this.formats()[a]!==h)&&this.replaceWith(a,h)}else this.children.forEach(p=>{p instanceof Yl||(p=p.wrap(Yl.blotName,!0)),this.attributes.copy(p)}),this.unwrap()}formats(){let a=this.attributes.values(),h=this.statics.formats(this.domNode,this.scroll);return h!=null&&(a[this.statics.blotName]=h),a}formatAt(a,h,p,b){this.formats()[p]!=null||this.scroll.query(p,Ft.ATTRIBUTE)?this.isolate(a,h).format(p,b):super.formatAt(a,h,p,b)}optimize(a){super.optimize(a);let h=this.formats();if(Object.keys(h).length===0)return this.unwrap();let p=this.next;p instanceof Yl&&p.prev===this&&function(b,E){if(Object.keys(b).length!==Object.keys(E).length)return!1;for(let A in b)if(b[A]!==E[A])return!1;return!0}(h,p.formats())&&(p.moveChildren(this),p.remove())}replaceWith(a,h){let p=super.replaceWith(a,h);return this.attributes.copy(p),p}update(a,h){super.update(a,h),a.some(p=>p.target===this.domNode&&p.type==="attributes")&&this.attributes.build()}wrap(a,h){let p=super.wrap(a,h);return p instanceof Yl&&this.attributes.move(p),p}};ns.allowedChildren=[ns,Gn],ns.blotName="inline",ns.scope=Ft.INLINE_BLOT,ns.tagName="SPAN";let ec=ns,vs=class $v extends ar{static{s(this,"t")}static create(a){return super.create(a)}static formats(a,h){let p=h.query($v.blotName);if(p==null||a.tagName!==p.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,h){super(a,h),this.attributes=new Zs(this.domNode)}format(a,h){let p=this.scroll.query(a,Ft.BLOCK);p!=null&&(p instanceof jn?this.attributes.attribute(p,h):a!==this.statics.blotName||h?h&&(a!==this.statics.blotName||this.formats()[a]!==h)&&this.replaceWith(a,h):this.replaceWith($v.blotName))}formats(){let a=this.attributes.values(),h=this.statics.formats(this.domNode,this.scroll);return h!=null&&(a[this.statics.blotName]=h),a}formatAt(a,h,p,b){this.scroll.query(p,Ft.BLOCK)!=null?this.format(p,b):super.formatAt(a,h,p,b)}insertAt(a,h,p){if(p==null||this.scroll.query(h,Ft.INLINE)!=null)super.insertAt(a,h,p);else{let b=this.split(a);if(b==null)throw new Error("Attempt to insertAt after block boundaries");{let E=this.scroll.create(h,p);b.parent.insertBefore(E,b)}}}replaceWith(a,h){let p=super.replaceWith(a,h);return this.attributes.copy(p),p}update(a,h){super.update(a,h),a.some(p=>p.target===this.domNode&&p.type==="attributes")&&this.attributes.build()}};vs.blotName="block",vs.scope=Ft.BLOCK_BLOT,vs.tagName="P",vs.allowedChildren=[ec,vs,Gn];let Fo=vs,nc=class extends ar{static{s(this,"cn")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(u,a){super.deleteAt(u,a),this.enforceAllowedChildren()}formatAt(u,a,h,p){super.formatAt(u,a,h,p),this.enforceAllowedChildren()}insertAt(u,a,h){super.insertAt(u,a,h),this.enforceAllowedChildren()}optimize(u){super.optimize(u),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};nc.blotName="container",nc.scope=Ft.BLOCK_BLOT;let Ks=nc,Ti=class extends Gn{static{s(this,"hn")}static formats(u,a){}format(u,a){super.formatAt(0,this.length(),u,a)}formatAt(u,a,h,p){u===0&&a===this.length()?this.format(h,p):super.formatAt(u,a,h,p)}formats(){return this.statics.formats(this.domNode,this.scroll)}},br={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Ys=class extends ar{static{s(this,"fn")}constructor(u,a){super(null,a),this.registry=u,this.scroll=this,this.build(),this.observer=new MutationObserver(h=>{this.update(h)}),this.observer.observe(this.domNode,br),this.attach()}create(u,a){return this.registry.create(this,u,a)}find(u,a=!1){let h=this.registry.find(u,a);return h?h.scroll===this?h:a?this.find(h.scroll.domNode.parentNode,!0):null:null}query(u,a=Ft.ANY){return this.registry.query(u,a)}register(...u){return this.registry.register(...u)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(u,a){this.update(),u===0&&a===this.length()?this.children.forEach(h=>{h.remove()}):super.deleteAt(u,a)}formatAt(u,a,h,p){this.update(),super.formatAt(u,a,h,p)}insertAt(u,a,h){this.update(),super.insertAt(u,a,h)}optimize(u=[],a={}){super.optimize(a);let h=a.mutationsMap||new WeakMap,p=Array.from(this.observer.takeRecords());for(;p.length>0;)u.push(p.pop());let b=s((k,U=!0)=>{k==null||k===this||k.domNode.parentNode!=null&&(h.has(k.domNode)||h.set(k.domNode,[]),U&&b(k.parent))},"s"),E=s(k=>{h.has(k.domNode)&&(k instanceof ar&&k.children.forEach(E),h.delete(k.domNode),k.optimize(a))},"i"),A=u;for(let k=0;A.length>0;k+=1){if(k>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(A.forEach(U=>{let st=this.find(U.target,!0);st!=null&&(st.domNode===U.target&&(U.type==="childList"?(b(this.find(U.previousSibling,!1)),Array.from(U.addedNodes).forEach(Et=>{let Bt=this.find(Et,!1);b(Bt,!1),Bt instanceof ar&&Bt.children.forEach(jt=>{b(jt,!1)})})):U.type==="attributes"&&b(st.prev)),b(st))}),this.children.forEach(E),A=Array.from(this.observer.takeRecords()),p=A.slice();p.length>0;)u.push(p.pop())}}update(u,a={}){u=u||this.observer.takeRecords();let h=new WeakMap;u.map(p=>{let b=this.find(p.target,!0);return b==null?null:h.has(b.domNode)?(h.get(b.domNode).push(p),null):(h.set(b.domNode,[p]),b)}).forEach(p=>{p!=null&&p!==this&&h.has(p.domNode)&&p.update(h.get(p.domNode)||[],a)}),a.mutationsMap=h,h.has(this.domNode)&&super.update(h.get(this.domNode),a),this.optimize(u,a)}};Ys.blotName="scroll",Ys.defaultChild=Fo,Ys.allowedChildren=[Fo,Ks],Ys.scope=Ft.BLOCK_BLOT,Ys.tagName="DIV";let Ra=Ys,yr=class _E extends Gn{static{s(this,"t")}static create(a){return document.createTextNode(a)}static value(a){return a.data}constructor(a,h){super(a,h),this.text=this.statics.value(this.domNode)}deleteAt(a,h){this.domNode.data=this.text=this.text.slice(0,a)+this.text.slice(a+h)}index(a,h){return this.domNode===a?h:-1}insertAt(a,h,p){p==null?(this.text=this.text.slice(0,a)+h+this.text.slice(a),this.domNode.data=this.text):super.insertAt(a,h,p)}length(){return this.text.length}optimize(a){super.optimize(a),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof _E&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(a,h=!1){return[this.domNode,a]}split(a,h=!1){if(!h){if(a===0)return this;if(a===this.length())return this.next}let p=this.scroll.create(this.domNode.splitText(a));return this.parent.insertBefore(p,this.next||void 0),this.text=this.statics.value(this.domNode),p}update(a,h){a.some(p=>p.type==="characterData"&&p.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};yr.blotName="text",yr.scope=Ft.INLINE_BLOT;let Ho=yr;var Rt=c(660);let ic=s(function(u,a){for(var h=-1,p=u==null?0:u.length;++h<p&&a(u[h],h,u)!==!1;);return u},"yn"),Yf=$(Object.keys,Object);var rh=Object.prototype.hasOwnProperty;let sh=s(function(u){if(!Ce(u))return Yf(u);var a=[];for(var h in Object(u))rh.call(u,h)&&h!="constructor"&&a.push(h);return a},"Nn"),rc=s(function(u){return ei(u)?Xr(u):sh(u)},"wn"),Gf=s(function(u,a){return u&&he(a,rc(a),u)},"En"),sc=s(function(u,a){return u&&he(a,Kn(a),u)},"An"),Xf=s(function(u,a){for(var h=-1,p=u==null?0:u.length,b=0,E=[];++h<p;){var A=u[h];a(A,h,u)&&(E[b++]=A)}return E},"qn"),oc=s(function(){return[]},"kn");var oh=Object.prototype.propertyIsEnumerable,zo=Object.getOwnPropertySymbols;let Rr=zo?function(u){return u==null?[]:(u=Object(u),Xf(zo(u),function(a){return oh.call(u,a)}))}:oc,Jf=s(function(u,a){return he(u,Rr(u),a)},"Tn"),Gs=s(function(u,a){for(var h=-1,p=a.length,b=u.length;++h<p;)u[b+h]=a[h];return u},"Sn"),Si=Object.getOwnPropertySymbols?function(u){for(var a=[];u;)Gs(a,Rr(u)),u=yt(u);return a}:oc,ah=s(function(u,a){return he(u,Si(u),a)},"jn"),ac=s(function(u,a,h){var p=a(u);return Ke(u)?p:Gs(p,h(u))},"Rn"),lc=s(function(u){return ac(u,rc,Rr)},"In"),cc=s(function(u){return ac(u,Kn,Si)},"Mn"),Uo=Zt(ht,"DataView"),uc=Zt(ht,"Promise"),hc=Zt(ht,"Set"),qa=Zt(ht,"WeakMap");var lh="[object Map]",Fi="[object Promise]",bs="[object Set]",ch="[object WeakMap]",_r="[object DataView]",Qf=Kt(Uo),Xs=Kt(ie),tp=Kt(uc),Wo=Kt(hc),uh=Kt(qa),wr=Z;(Uo&&wr(new Uo(new ArrayBuffer(1)))!=_r||ie&&wr(new ie)!=lh||uc&&wr(uc.resolve())!=Fi||hc&&wr(new hc)!=bs||qa&&wr(new qa)!=ch)&&(wr=s(function(u){var a=Z(u),h=a=="[object Object]"?u.constructor:void 0,p=h?Kt(h):"";if(p)switch(p){case Qf:return _r;case Xs:return lh;case tp:return Fi;case Wo:return bs;case uh:return ch}return a},"Qn"));let Vo=wr;var is=Object.prototype.hasOwnProperty;let Ba=s(function(u){var a=u.length,h=new u.constructor(a);return a&&typeof u[0]=="string"&&is.call(u,"index")&&(h.index=u.index,h.input=u.input),h},"tr"),ep=s(function(u,a){var h=a?Y(u.buffer):u.buffer;return new u.constructor(h,u.byteOffset,u.byteLength)},"er");var dc=/\w*$/;let np=s(function(u){var a=new u.constructor(u.source,dc.exec(u));return a.lastIndex=u.lastIndex,a},"rr");var xr=z?z.prototype:void 0,hh=xr?xr.valueOf:void 0;let Js=s(function(u){return hh?Object(hh.call(u)):{}},"or"),ip=s(function(u,a,h){var p=u.constructor;switch(a){case"[object ArrayBuffer]":return Y(u);case"[object Boolean]":case"[object Date]":return new p(+u);case"[object DataView]":return ep(u,h);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Q(u,h);case"[object Map]":case"[object Set]":return new p;case"[object Number]":case"[object String]":return new p(u);case"[object RegExp]":return np(u);case"[object Symbol]":return Js(u)}},"lr"),qr=s(function(u){return Ne(u)&&Vo(u)=="[object Map]"},"ar");var Zo=gt&&gt.isMap;let dh=Zo?pe(Zo):qr,fc=s(function(u){return Ne(u)&&Vo(u)=="[object Set]"},"hr");var $o=gt&&gt.isSet;let pc=$o?pe($o):fc;var Ko="[object Arguments]",ys="[object Function]",Yo="[object Object]",Ze={};Ze[Ko]=Ze["[object Array]"]=Ze["[object ArrayBuffer]"]=Ze["[object DataView]"]=Ze["[object Boolean]"]=Ze["[object Date]"]=Ze["[object Float32Array]"]=Ze["[object Float64Array]"]=Ze["[object Int8Array]"]=Ze["[object Int16Array]"]=Ze["[object Int32Array]"]=Ze["[object Map]"]=Ze["[object Number]"]=Ze[Yo]=Ze["[object RegExp]"]=Ze["[object Set]"]=Ze["[object String]"]=Ze["[object Symbol]"]=Ze["[object Uint8Array]"]=Ze["[object Uint8ClampedArray]"]=Ze["[object Uint16Array]"]=Ze["[object Uint32Array]"]=!0,Ze["[object Error]"]=Ze[ys]=Ze["[object WeakMap]"]=!1;let fh=s(function u(a,h,p,b,E,A){var k,U=1&h,st=2&h,Et=4&h;if(p&&(k=E?p(a,b,E,A):p(a)),k!==void 0)return k;if(!P(a))return a;var Bt=Ke(a);if(Bt){if(k=Ba(a),!U)return Ct(a,k)}else{var jt=Vo(a),$t=jt==ys||jt=="[object GeneratorFunction]";if(K(a))return N(a,U);if(jt==Yo||jt==Ko||$t&&!E){if(k=st||$t?{}:ge(a),!U)return st?ah(a,sc(k,a)):Jf(a,Gf(k,a))}else{if(!Ze[jt])return E?a:{};k=ip(a,jt,U)}}A||(A=new hn);var Wt=A.get(a);if(Wt)return Wt;A.set(a,k),pc(a)?a.forEach(function(rn){k.add(u(rn,h,p,rn,a,A))}):dh(a)&&a.forEach(function(rn,ri){k.set(ri,u(rn,h,p,ri,a,A))});var ae=Bt?void 0:(Et?st?cc:lc:st?Kn:rc)(a);return ic(ae||a,function(rn,ri){ae&&(rn=a[ri=rn]),$n(k,ri,u(rn,h,p,ri,a,A))}),k},"t"),Qs=s(function(u){return fh(u,5)},"vr"),ja=s(function(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this},"xr"),rp=s(function(u){return this.__data__.has(u)},"Nr");function Go(u){var a=-1,h=u==null?0:u.length;for(this.__data__=new Ae;++a<h;)this.add(u[a])}s(Go,"wr"),Go.prototype.add=Go.prototype.push=ja,Go.prototype.has=rp;let sp=Go,ph=s(function(u,a){for(var h=-1,p=u==null?0:u.length;++h<p;)if(a(u[h],h,u))return!0;return!1},"Ar"),op=s(function(u,a){return u.has(a)},"qr"),lr=s(function(u,a,h,p,b,E){var A=1&h,k=u.length,U=a.length;if(k!=U&&!(A&&U>k))return!1;var st=E.get(u),Et=E.get(a);if(st&&Et)return st==a&&Et==u;var Bt=-1,jt=!0,$t=2&h?new sp:void 0;for(E.set(u,a),E.set(a,u);++Bt<k;){var Wt=u[Bt],ae=a[Bt];if(p)var rn=A?p(ae,Wt,Bt,a,u,E):p(Wt,ae,Bt,u,a,E);if(rn!==void 0){if(rn)continue;jt=!1;break}if($t){if(!ph(a,function(ri,Wr){if(!op($t,Wr)&&(Wt===ri||b(Wt,ri,h,p,E)))return $t.push(Wr)})){jt=!1;break}}else if(Wt!==ae&&!b(Wt,ae,h,p,E)){jt=!1;break}}return E.delete(u),E.delete(a),jt},"kr"),Fa=s(function(u){var a=-1,h=Array(u.size);return u.forEach(function(p,b){h[++a]=[b,p]}),h},"_r"),ap=s(function(u){var a=-1,h=Array(u.size);return u.forEach(function(p){h[++a]=p}),h},"Lr");var Xo=z?z.prototype:void 0,mc=Xo?Xo.valueOf:void 0;let mh=s(function(u,a,h,p,b,E,A){switch(h){case"[object DataView]":if(u.byteLength!=a.byteLength||u.byteOffset!=a.byteOffset)return!1;u=u.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(u.byteLength!=a.byteLength||!E(new R(u),new R(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return v(+u,+a);case"[object Error]":return u.name==a.name&&u.message==a.message;case"[object RegExp]":case"[object String]":return u==a+"";case"[object Map]":var k=Fa;case"[object Set]":var U=1&p;if(k||(k=ap),u.size!=a.size&&!U)return!1;var st=A.get(u);if(st)return st==a;p|=2,A.set(u,a);var Et=lr(k(u),k(a),p,b,E,A);return A.delete(u),Et;case"[object Symbol]":if(mc)return mc.call(u)==mc.call(a)}return!1},"Sr");var lp=Object.prototype.hasOwnProperty;let Jo=s(function(u,a,h,p,b,E){var A=1&h,k=lc(u),U=k.length;if(U!=lc(a).length&&!A)return!1;for(var st=U;st--;){var Et=k[st];if(!(A?Et in a:lp.call(a,Et)))return!1}var Bt=E.get(u),jt=E.get(a);if(Bt&&jt)return Bt==a&&jt==u;var $t=!0;E.set(u,a),E.set(a,u);for(var Wt=A;++st<U;){var ae=u[Et=k[st]],rn=a[Et];if(p)var ri=A?p(rn,ae,Et,a,u,E):p(ae,rn,Et,u,a,E);if(!(ri===void 0?ae===rn||b(ae,rn,h,p,E):ri)){$t=!1;break}Wt||(Wt=Et=="constructor")}if($t&&!Wt){var Wr=u.constructor,ro=a.constructor;Wr==ro||!("constructor"in u)||!("constructor"in a)||typeof Wr=="function"&&Wr instanceof Wr&&typeof ro=="function"&&ro instanceof ro||($t=!1)}return E.delete(u),E.delete(a),$t},"jr");var gh="[object Arguments]",_s="[object Array]",Qo="[object Object]",gc=Object.prototype.hasOwnProperty;let cp=s(function(u,a,h,p,b,E){var A=Ke(u),k=Ke(a),U=A?_s:Vo(u),st=k?_s:Vo(a),Et=(U=U==gh?Qo:U)==Qo,Bt=(st=st==gh?Qo:st)==Qo,jt=U==st;if(jt&&K(u)){if(!K(a))return!1;A=!0,Et=!1}if(jt&&!Et)return E||(E=new hn),A||_e(u)?lr(u,a,h,p,b,E):mh(u,a,U,h,p,b,E);if(!(1&h)){var $t=Et&&gc.call(u,"__wrapped__"),Wt=Bt&&gc.call(a,"__wrapped__");if($t||Wt){var ae=$t?u.value():u,rn=Wt?a.value():a;return E||(E=new hn),b(ae,rn,h,p,E)}}return!!jt&&(E||(E=new hn),Jo(u,a,h,p,b,E))},"Ur"),Br=s(function u(a,h,p,b,E){return a===h||(a==null||h==null||!Ne(a)&&!Ne(h)?a!=a&&h!=h:cp(a,h,p,b,u,E))},"t"),Ha=s(function(u,a){return Br(u,a)},"Pr");class za extends Ti{static{s(this,"zr")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}za.blotName="break",za.tagName="BR";let Ai=za;class cr extends Ho{static{s(this,"Fr")}}function ws(u){return u.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a])}s(ws,"$r");class Hi extends ec{static{s(this,"Vr")}static allowedChildren=[Hi,Ai,Ti,cr];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(a,h){let p=Hi.order.indexOf(a),b=Hi.order.indexOf(h);return p>=0||b>=0?p-b:a===h?0:a<h?-1:1}formatAt(a,h,p,b){if(Hi.compare(this.statics.blotName,p)<0&&this.scroll.query(p,Ft.BLOT)){let E=this.isolate(a,h);b&&E.wrap(p,b)}else super.formatAt(a,h,p,b)}optimize(a){if(super.optimize(a),this.parent instanceof Hi&&Hi.compare(this.statics.blotName,this.parent.statics.blotName)>0){let h=this.parent.isolate(this.offset(),this.length());this.moveChildren(h),h.wrap(this)}}}let jr=Hi;class On extends Fo{static{s(this,"Wr")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=vc(this)),this.cache.delta}deleteAt(a,h){super.deleteAt(a,h),this.cache={}}formatAt(a,h,p,b){h<=0||(this.scroll.query(p,Ft.BLOCK)?a+h===this.length()&&this.format(p,b):super.formatAt(a,Math.min(h,this.length()-a-1),p,b),this.cache={})}insertAt(a,h,p){if(p!=null)return super.insertAt(a,h,p),void(this.cache={});if(h.length===0)return;let b=h.split(`
`),E=b.shift();E.length>0&&(a<this.length()-1||this.children.tail==null?super.insertAt(Math.min(a,this.length()-1),E):this.children.tail.insertAt(this.children.tail.length(),E),this.cache={});let A=this;b.reduce((k,U)=>(A=A.split(k,!0),A.insertAt(0,U),U.length),a+E.length)}insertBefore(a,h){let{head:p}=this.children;super.insertBefore(a,h),p instanceof Ai&&p.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(a,h){super.moveChildren(a,h),this.cache={}}optimize(a){super.optimize(a),this.cache={}}path(a){return super.path(a,!0)}removeChild(a){super.removeChild(a),this.cache={}}split(a){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(h&&(a===0||a>=this.length()-1)){let b=this.clone();return a===0?(this.parent.insertBefore(b,this),this):(this.parent.insertBefore(b,this.next),b)}let p=super.split(a,h);return this.cache={},p}}On.blotName="block",On.tagName="P",On.defaultChild=Ai,On.allowedChildren=[Ai,jr,Ti,cr];class zi extends Ti{static{s(this,"Zr")}attach(){super.attach(),this.attributes=new Zs(this.domNode)}delta(){return new Rt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(a,h){let p=this.scroll.query(a,Ft.BLOCK_ATTRIBUTE);p!=null&&this.attributes.attribute(p,h)}formatAt(a,h,p,b){this.format(p,b)}insertAt(a,h,p){if(p!=null)return void super.insertAt(a,h,p);let b=h.split(`
`),E=b.pop(),A=b.map(U=>{let st=this.scroll.create(On.blotName);return st.insertAt(0,U),st}),k=this.split(a);A.forEach(U=>{this.parent.insertBefore(U,k)}),E&&this.parent.insertBefore(this.scroll.create("text",E),k)}}function vc(u){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return u.descendants(Gn).reduce((h,p)=>p.length()===0?h:h.insert(p.value(),Ci(p,{},a)),new Rt).insert(`
`,Ci(u))}s(vc,"Gr");function Ci(u){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return u==null?a:("formats"in u&&typeof u.formats=="function"&&(a={...a,...u.formats()},h&&delete a["code-token"]),u.parent==null||u.parent.statics.blotName==="scroll"||u.parent.statics.scope!==u.statics.scope?a:Ci(u.parent,a,h))}s(Ci,"Xr"),zi.scope=Ft.BLOCK_BLOT;class Fr extends Ti{static{s(this,"Qr")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(a,h,p){super(a,h),this.selection=p,this.textNode=document.createTextNode(Fr.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(a,h){if(this.savedLength!==0)return void super.format(a,h);let p=this,b=0;for(;p!=null&&p.statics.scope!==Ft.BLOCK_BLOT;)b+=p.offset(p.parent),p=p.parent;p!=null&&(this.savedLength=Fr.CONTENTS.length,p.optimize(),p.formatAt(b,Fr.CONTENTS.length,a,h),this.savedLength=0)}index(a,h){return a===this.textNode?0:super.index(a,h)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let a=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let h=this.prev instanceof cr?this.prev:null,p=h?h.length():0,b=this.next instanceof cr?this.next:null,E=b?b.text:"",{textNode:A}=this,k=A.data.split(Fr.CONTENTS).join(""),U;if(A.data=Fr.CONTENTS,h)U=h,(k||b)&&(h.insertAt(h.length(),k+E),b&&b.remove());else if(b)U=b,b.insertAt(0,k);else{let st=document.createTextNode(k);U=this.scroll.create(st),this.parent.insertBefore(U,this)}if(this.remove(),a){let st=s((jt,$t)=>h&&jt===h.domNode?$t:jt===A?p+$t-1:b&&jt===b.domNode?p+k.length+$t:null,"s"),Et=st(a.start.node,a.start.offset),Bt=st(a.end.node,a.end.offset);if(Et!==null&&Bt!==null)return{startNode:U.domNode,startOffset:Et,endNode:U.domNode,endOffset:Bt}}return null}update(a,h){if(a.some(p=>p.type==="characterData"&&p.target===this.textNode)){let p=this.restore();p&&(h.range=p)}}optimize(a){super.optimize(a);let{parent:h}=this;for(;h;){if(h.domNode.tagName==="A"){this.savedLength=Fr.CONTENTS.length,h.isolate(this.offset(h),this.length()).unwrap(),this.savedLength=0;break}h=h.parent}}value(){return""}}let ta=Fr;var vh=c(228);let bc=new WeakMap,Ua=["error","warn","log","info"],Wa="warn";function bh(u){if(Wa&&Ua.indexOf(u)<=Ua.indexOf(Wa)){for(var a=arguments.length,h=new Array(a>1?a-1:0),p=1;p<a;p++)h[p-1]=arguments[p];console[u](...h)}}s(bh,"rs");function r(u){return Ua.reduce((a,h)=>(a[h]=bh.bind(console,h,u),a),{})}s(r,"ss"),r.level=u=>{Wa=u},bh.level=r.level;let l=r,f=l("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(u=>{document.addEventListener(u,function(){for(var a=arguments.length,h=new Array(a),p=0;p<a;p++)h[p]=arguments[p];Array.from(document.querySelectorAll(".ql-container")).forEach(b=>{let E=bc.get(b);E&&E.emitter&&E.emitter.handleDOM(...h)})})});let g=class extends vh{static{s(this,"ls")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",f.error)}emit(){for(var u=arguments.length,a=new Array(u),h=0;h<u;h++)a[h]=arguments[h];return f.log.call(f,...a),super.emit(...a)}handleDOM(u){for(var a=arguments.length,h=new Array(a>1?a-1:0),p=1;p<a;p++)h[p-1]=arguments[p];(this.domListeners[u.type]||[]).forEach(b=>{let{node:E,handler:A}=b;(u.target===E||E.contains(u.target))&&A(u,...h)})}listenDOM(u,a,h){this.domListeners[u]||(this.domListeners[u]=[]),this.domListeners[u].push({node:a,handler:h})}},x=l("quill:selection");class C{static{s(this,"cs")}constructor(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=a,this.length=h}}function H(u,a){try{a.parentNode}catch{return!1}return u.contains(a)}s(H,"us");let J=class{static{s(this,"hs")}constructor(u,a){this.emitter=a,this.scroll=u,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new C(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,g.sources.USER),1)}),this.emitter.on(g.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let h=this.getNativeRange();h!=null&&h.start.node!==this.cursor.textNode&&this.emitter.once(g.events.SCROLL_UPDATE,(p,b)=>{try{this.root.contains(h.start.node)&&this.root.contains(h.end.node)&&this.setNativeRange(h.start.node,h.start.offset,h.end.node,h.end.offset);let E=b.some(A=>A.type==="characterData"||A.type==="childList"||A.type==="attributes"&&A.target===this.root);this.update(E?g.sources.SILENT:p)}catch{}})}),this.emitter.on(g.events.SCROLL_OPTIMIZE,(h,p)=>{if(p.range){let{startNode:b,startOffset:E,endNode:A,endOffset:k}=p.range;this.setNativeRange(b,E,A,k),this.update(g.sources.SILENT)}}),this.update(g.sources.SILENT)}handleComposition(){this.emitter.on(g.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(g.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let u=this.cursor.restore();if(!u)return;setTimeout(()=>{this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(g.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(u,a){this.scroll.update();let h=this.getNativeRange();if(h!=null&&h.native.collapsed&&!this.scroll.query(u,Ft.BLOCK)){if(h.start.node!==this.cursor.textNode){let p=this.scroll.find(h.start.node,!1);if(p==null)return;if(p instanceof Gn){let b=p.split(h.start.offset);p.parent.insertBefore(this.cursor,b)}else p.insertBefore(this.cursor,h.start.node);this.cursor.attach()}this.cursor.format(u,a),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(u){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=this.scroll.length(),p;u=Math.min(u,h-1),a=Math.min(u+a,h-1)-u;let[b,E]=this.scroll.leaf(u);if(b==null)return null;if(a>0&&E===b.length()){let[st]=this.scroll.leaf(u+1);if(st){let[Et]=this.scroll.line(u),[Bt]=this.scroll.line(u+1);Et===Bt&&(b=st,E=0)}}[p,E]=b.position(E,!0);let A=document.createRange();if(a>0)return A.setStart(p,E),[b,E]=this.scroll.leaf(u+a),b==null?null:([p,E]=b.position(E,!0),A.setEnd(p,E),A.getBoundingClientRect());let k,U="left";if(p instanceof Text){if(!p.data.length)return null;E<p.data.length?(A.setStart(p,E),A.setEnd(p,E+1)):(A.setStart(p,E-1),A.setEnd(p,E),U="right"),k=A.getBoundingClientRect()}else{if(!(b.domNode instanceof Element))return null;k=b.domNode.getBoundingClientRect(),E>0&&(U="right")}return{bottom:k.top+k.height,height:k.height,left:k[U],right:k[U],top:k.top,width:0}}getNativeRange(){let u=document.getSelection();if(u==null||u.rangeCount<=0)return null;let a=u.getRangeAt(0);if(a==null)return null;let h=this.normalizeNative(a);return x.info("getNativeRange",h),h}getRange(){let u=this.scroll.domNode;if("isConnected"in u&&!u.isConnected)return[null,null];let a=this.getNativeRange();return a==null?[null,null]:[this.normalizedToRange(a),a]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&H(this.root,document.activeElement)}normalizedToRange(u){let a=[[u.start.node,u.start.offset]];u.native.collapsed||a.push([u.end.node,u.end.offset]);let h=a.map(E=>{let[A,k]=E,U=this.scroll.find(A,!0),st=U.offset(this.scroll);return k===0?st:U instanceof Gn?st+U.index(A,k):st+U.length()}),p=Math.min(Math.max(...h),this.scroll.length()-1),b=Math.min(p,...h);return new C(b,p-b)}normalizeNative(u){if(!H(this.root,u.startContainer)||!u.collapsed&&!H(this.root,u.endContainer))return null;let a={start:{node:u.startContainer,offset:u.startOffset},end:{node:u.endContainer,offset:u.endOffset},native:u};return[a.start,a.end].forEach(h=>{let{node:p,offset:b}=h;for(;!(p instanceof Text)&&p.childNodes.length>0;)if(p.childNodes.length>b)p=p.childNodes[b],b=0;else{if(p.childNodes.length!==b)break;p=p.lastChild,b=p instanceof Text?p.data.length:p.childNodes.length>0?p.childNodes.length:p.childNodes.length+1}h.node=p,h.offset=b}),a}rangeToNative(u){let a=this.scroll.length(),h=s((p,b)=>{p=Math.min(a-1,p);let[E,A]=this.scroll.leaf(p);return E?E.position(A,b):[null,-1]},"n");return[...h(u.index,!1),...h(u.index+u.length,!0)]}setNativeRange(u,a){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a,b=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(x.info("setNativeRange",u,a,h,p),u!=null&&(this.root.parentNode==null||u.parentNode==null||h.parentNode==null))return;let E=document.getSelection();if(E!=null)if(u!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:A}=this.getNativeRange()||{};if(A==null||b||u!==A.startContainer||a!==A.startOffset||h!==A.endContainer||p!==A.endOffset){u instanceof Element&&u.tagName==="BR"&&(a=Array.from(u.parentNode.childNodes).indexOf(u),u=u.parentNode),h instanceof Element&&h.tagName==="BR"&&(p=Array.from(h.parentNode.childNodes).indexOf(h),h=h.parentNode);let k=document.createRange();k.setStart(u,a),k.setEnd(h,p),E.removeAllRanges(),E.addRange(k)}}else E.removeAllRanges(),this.root.blur()}setRange(u){let a=arguments.length>1&&arguments[1]!==void 0&&arguments[1],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.sources.API;if(typeof a=="string"&&(h=a,a=!1),x.info("setRange",u),u!=null){let p=this.rangeToNative(u);this.setNativeRange(...p,a)}else this.setNativeRange(null);this.update(h)}update(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.sources.USER,a=this.lastRange,[h,p]=this.getRange();if(this.lastRange=h,this.lastNative=p,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ha(a,this.lastRange)){if(!this.composing&&p!=null&&p.native.collapsed&&p.start.node!==this.cursor.textNode){let E=this.cursor.restore();E&&this.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)}let b=[g.events.SELECTION_CHANGE,Qs(this.lastRange),Qs(a),u];this.emitter.emit(g.events.EDITOR_CHANGE,...b),u!==g.sources.SILENT&&this.emitter.emit(...b)}}},it=/^[ -~]*$/;function bt(u,a,h){if(u.length===0){let[$t]=de(h.pop());return a<=0?`</li></${$t}>`:`</li></${$t}>${bt([],a-1,h)}`}let[{child:p,offset:b,length:E,indent:A,type:k},...U]=u,[st,Et]=de(k);if(A>a)return h.push(k),A===a+1?`<${st}><li${Et}>${Pt(p,b,E)}${bt(U,A,h)}`:`<${st}><li>${bt(u,a+1,h)}`;let Bt=h[h.length-1];if(A===a&&k===Bt)return`</li><li${Et}>${Pt(p,b,E)}${bt(U,A,h)}`;let[jt]=de(h.pop());return`</li></${jt}>${bt(u,a-1,h)}`}s(bt,"fs");function Pt(u,a,h){let p=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if("html"in u&&typeof u.html=="function")return u.html(a,h);if(u instanceof cr)return ws(u.value().slice(a,a+h));if(u instanceof ar){if(u.statics.blotName==="list-container"){let st=[];return u.children.forEachAt(a,h,(Et,Bt,jt)=>{let $t="formats"in Et&&typeof Et.formats=="function"?Et.formats():{};st.push({child:Et,offset:Bt,length:jt,indent:$t.indent||0,type:$t.list})}),bt(st,-1,[])}let b=[];if(u.children.forEachAt(a,h,(st,Et,Bt)=>{b.push(Pt(st,Et,Bt))}),p||u.statics.blotName==="list")return b.join("");let{outerHTML:E,innerHTML:A}=u.domNode,[k,U]=E.split(`>${A}<`);return k==="<table"?`<table style="border: 1px solid #000;">${b.join("")}<${U}`:`${k}>${b.join("")}<${U}`}return u.domNode instanceof Element?u.domNode.outerHTML:""}s(Pt,"ps");function te(u,a){return Object.keys(a).reduce((h,p)=>{if(u[p]==null)return h;let b=a[p];return b===u[p]?h[p]=b:Array.isArray(b)?b.indexOf(u[p])<0?h[p]=b.concat([u[p]]):h[p]=b:h[p]=[b,u[p]],h},{})}s(te,"gs");function de(u){let a=u==="ordered"?"ol":"ul";switch(u){case"checked":return[a,' data-list="checked"'];case"unchecked":return[a,' data-list="unchecked"'];default:return[a,""]}}s(de,"ms");function Xn(u){return u.reduce((a,h)=>{if(typeof h.insert=="string"){let p=h.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return a.insert(p,h.attributes)}return a.push(h)},new Rt)}s(Xn,"bs");function Sn(u,a){let{index:h,length:p}=u;return new C(h+a,p)}s(Sn,"ys");let Ui=class{static{s(this,"vs")}constructor(u){this.scroll=u,this.delta=this.getDelta()}applyDelta(u){this.scroll.update();let a=this.scroll.length();this.scroll.batchStart();let h=Xn(u),p=new Rt;return function(b){let E=[];return b.forEach(A=>{typeof A.insert=="string"?A.insert.split(`
`).forEach((k,U)=>{U&&E.push({insert:`
`,attributes:A.attributes}),k&&E.push({insert:k,attributes:A.attributes})}):E.push(A)}),E}(h.ops.slice()).reduce((b,E)=>{let A=Rt.Op.length(E),k=E.attributes||{},U=!1,st=!1;if(E.insert!=null){if(p.retain(A),typeof E.insert=="string"){let jt=E.insert;st=!jt.endsWith(`
`)&&(a<=b||!!this.scroll.descendant(zi,b)[0]),this.scroll.insertAt(b,jt);let[$t,Wt]=this.scroll.line(b),ae=ni({},Ci($t));if($t instanceof On){let[rn]=$t.descendant(Gn,Wt);rn&&(ae=ni(ae,Ci(rn)))}k=Rt.AttributeMap.diff(ae,k)||{}}else if(typeof E.insert=="object"){let jt=Object.keys(E.insert)[0];if(jt==null)return b;let $t=this.scroll.query(jt,Ft.INLINE)!=null;if($t)(a<=b||this.scroll.descendant(zi,b)[0])&&(st=!0);else if(b>0){let[Wt,ae]=this.scroll.descendant(Gn,b-1);Wt instanceof cr?Wt.value()[ae]!==`
`&&(U=!0):Wt instanceof Ti&&Wt.statics.scope===Ft.INLINE_BLOT&&(U=!0)}if(this.scroll.insertAt(b,jt,E.insert[jt]),$t){let[Wt]=this.scroll.descendant(Gn,b);if(Wt){let ae=ni({},Ci(Wt));k=Rt.AttributeMap.diff(ae,k)||{}}}}a+=A}else if(p.push(E),E.retain!==null&&typeof E.retain=="object"){let jt=Object.keys(E.retain)[0];if(jt==null)return b;this.scroll.updateEmbedAt(b,jt,E.retain[jt])}Object.keys(k).forEach(jt=>{this.scroll.formatAt(b,A,jt,k[jt])});let Et=U?1:0,Bt=st?1:0;return a+=Et+Bt,p.retain(Et),p.delete(Bt),b+A+Et+Bt},0),p.reduce((b,E)=>typeof E.delete=="number"?(this.scroll.deleteAt(b,E.delete),b):b+Rt.Op.length(E),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(h)}deleteText(u,a){return this.scroll.deleteAt(u,a),this.update(new Rt().retain(u).delete(a))}formatLine(u,a){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(h).forEach(b=>{this.scroll.lines(u,Math.max(a,1)).forEach(E=>{E.format(b,h[b])})}),this.scroll.optimize();let p=new Rt().retain(u).retain(a,Qs(h));return this.update(p)}formatText(u,a){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(h).forEach(b=>{this.scroll.formatAt(u,a,b,h[b])});let p=new Rt().retain(u).retain(a,Qs(h));return this.update(p)}getContents(u,a){return this.delta.slice(u,u+a)}getDelta(){return this.scroll.lines().reduce((u,a)=>u.concat(a.delta()),new Rt)}getFormat(u){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=[],p=[];a===0?this.scroll.path(u).forEach(A=>{let[k]=A;k instanceof On?h.push(k):k instanceof Gn&&p.push(k)}):(h=this.scroll.lines(u,a),p=this.scroll.descendants(Gn,u,a));let[b,E]=[h,p].map(A=>{let k=A.shift();if(k==null)return{};let U=Ci(k);for(;Object.keys(U).length>0;){let st=A.shift();if(st==null)return U;U=te(Ci(st),U)}return U});return{...b,...E}}getHTML(u,a){let[h,p]=this.scroll.line(u);if(h){let b=h.length();return!(h.length()>=p+a)||p===0&&a===b?Pt(this.scroll,u,a,!0):Pt(h,p,a,!0)}return""}getText(u,a){return this.getContents(u,a).filter(h=>typeof h.insert=="string").map(h=>h.insert).join("")}insertContents(u,a){let h=Xn(a),p=new Rt().retain(u).concat(h);return this.scroll.insertContents(u,h),this.update(p)}insertEmbed(u,a,h){return this.scroll.insertAt(u,a,h),this.update(new Rt().retain(u).insert({[a]:h}))}insertText(u,a){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a=a.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(u,a),Object.keys(h).forEach(p=>{this.scroll.formatAt(u,a.length,p,h[p])}),this.update(new Rt().retain(u).insert(a,Qs(h)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let u=this.scroll.children.head;if(u?.statics.blotName!==On.blotName)return!1;let a=u;return!(a.children.length>1)&&a.children.head instanceof Ai}removeFormat(u,a){let h=this.getText(u,a),[p,b]=this.scroll.line(u+a),E=0,A=new Rt;p!=null&&(E=p.length()-b,A=p.delta().slice(b,b+E-1).insert(`
`));let k=this.getContents(u,a+E).diff(new Rt().insert(h).concat(A)),U=new Rt().retain(u).concat(k);return this.applyDelta(U)}update(u){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,p=this.delta;if(a.length===1&&a[0].type==="characterData"&&a[0].target.data.match(it)&&this.scroll.find(a[0].target)){let b=this.scroll.find(a[0].target),E=Ci(b),A=b.offset(this.scroll),k=a[0].oldValue.replace(ta.CONTENTS,""),U=new Rt().insert(k),st=new Rt().insert(b.value()),Et=h&&{oldRange:Sn(h.oldRange,-A),newRange:Sn(h.newRange,-A)};u=new Rt().retain(A).concat(U.diff(st,Et)).reduce((Bt,jt)=>jt.insert?Bt.insert(jt.insert,E):Bt.push(jt),new Rt),this.delta=p.compose(u)}else this.delta=this.getDelta(),u&&Ha(p.compose(u),this.delta)||(u=p.diff(this.delta,h));return u}},on=class{static{s(this,"xs")}static DEFAULTS={};constructor(u){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=u,this.options=a}},Hr="\uFEFF",yc=class extends Ti{static{s(this,"ws")}constructor(u,a){super(u,a),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(h=>{this.contentNode.appendChild(h)}),this.leftGuard=document.createTextNode(Hr),this.rightGuard=document.createTextNode(Hr),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(u,a){return u===this.leftGuard?0:u===this.rightGuard?1:super.index(u,a)}restore(u){let a,h=null,p=u.data.split(Hr).join("");if(u===this.leftGuard)if(this.prev instanceof cr){let b=this.prev.length();this.prev.insertAt(b,p),h={startNode:this.prev.domNode,startOffset:b+p.length}}else a=document.createTextNode(p),this.parent.insertBefore(this.scroll.create(a),this),h={startNode:a,startOffset:p.length};else u===this.rightGuard&&(this.next instanceof cr?(this.next.insertAt(0,p),h={startNode:this.next.domNode,startOffset:p.length}):(a=document.createTextNode(p),this.parent.insertBefore(this.scroll.create(a),this.next),h={startNode:a,startOffset:p.length}));return u.data=Hr,h}update(u,a){u.forEach(h=>{if(h.type==="characterData"&&(h.target===this.leftGuard||h.target===this.rightGuard)){let p=this.restore(h.target);p&&(a.range=p)}})}},up=class{static{s(this,"Es")}isComposing=!1;constructor(u,a){this.scroll=u,this.emitter=a,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",u=>{this.isComposing||this.handleCompositionStart(u)}),this.scroll.domNode.addEventListener("compositionend",u=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(u)})})}handleCompositionStart(u){let a=u.target instanceof Node?this.scroll.find(u.target,!0):null;!a||a instanceof yc||(this.emitter.emit(g.events.COMPOSITION_BEFORE_START,u),this.scroll.batchStart(),this.emitter.emit(g.events.COMPOSITION_START,u),this.isComposing=!0)}handleCompositionEnd(u){this.emitter.emit(g.events.COMPOSITION_BEFORE_END,u),this.scroll.batchEnd(),this.emitter.emit(g.events.COMPOSITION_END,u),this.isComposing=!1}};class _c{static{s(this,"As")}static DEFAULTS={modules:{}};static themes={default:_c};modules={};constructor(a,h){this.quill=a,this.options=h}init(){Object.keys(this.options.modules).forEach(a=>{this.modules[a]==null&&this.addModule(a)})}addModule(a){let h=this.quill.constructor.import(`modules/${a}`);return this.modules[a]=new h(this.quill,this.options.modules[a]||{}),this.modules[a]}}let ea=_c,hp=s(u=>{let a=u.getBoundingClientRect(),h="offsetWidth"in u&&Math.abs(a.width)/u.offsetWidth||1,p="offsetHeight"in u&&Math.abs(a.height)/u.offsetHeight||1;return{top:a.top,right:a.left+u.clientWidth*h,bottom:a.top+u.clientHeight*p,left:a.left}},"ks"),na=s(u=>{let a=parseInt(u,10);return Number.isNaN(a)?0:a},"_s"),bn=s((u,a,h,p,b,E)=>u<h&&a>p?0:u<h?-(h-u+b):a>p?a-u>p-h?u+b-h:a-p+E:0,"Ls"),Va=s((u,a)=>{let h=u.ownerDocument,p=a,b=u;for(;b;){let A=b===h.body,k=A?{top:0,right:window.visualViewport?.width??h.documentElement.clientWidth,bottom:window.visualViewport?.height??h.documentElement.clientHeight,left:0}:hp(b),U=getComputedStyle(b),st=bn(p.left,p.right,k.left,k.right,na(U.scrollPaddingLeft),na(U.scrollPaddingRight)),Et=bn(p.top,p.bottom,k.top,k.bottom,na(U.scrollPaddingTop),na(U.scrollPaddingBottom));if(st||Et)if(A)h.defaultView?.scrollBy(st,Et);else{let{scrollLeft:Bt,scrollTop:jt}=b;Et&&(b.scrollTop+=Et),st&&(b.scrollLeft+=st);let $t=b.scrollLeft-Bt,Wt=b.scrollTop-jt;p={left:p.left-$t,top:p.top-Wt,right:p.right-$t,bottom:p.bottom-Wt}}b=A||U.position==="fixed"?null:(E=b).parentElement||E.getRootNode().host||null}var E},"Os"),dp=["block","break","cursor","inline","scroll","text"],fp=s((u,a,h)=>{let p=new Bi;return dp.forEach(b=>{let E=a.query(b);E&&p.register(E)}),u.forEach(b=>{let E=a.query(b);E||h.error(`Cannot register "${b}" specified in "formats" config. Are you sure it was registered?`);let A=0;for(;E;)if(p.register(E),E="blotName"in E?E.requiredContainer??null:null,A+=1,A>100){h.error(`Cycle detected in registering blot requiredContainer: "${b}"`);break}}),p},"Ss"),to=l("quill"),eo=new Bi;ar.uiClass="ql-ui";class mt{static{s(this,"Rs")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:eo,theme:"default"};static events=g.events;static sources=g.sources;static version="2.0.2";static imports={delta:Rt,parchment:d,"core/module":on,"core/theme":ea};static debug(a){a===!0&&(a="log"),l.level(a)}static find(a){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return bc.get(a)||eo.find(a,h)}static import(a){return this.imports[a]==null&&to.error(`Cannot import ${a}. Are you sure it was registered?`),this.imports[a]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let a=arguments.length<=0?void 0:arguments[0],h=!!(!(arguments.length<=1)&&arguments[1]),p="attrName"in a?a.attrName:a.blotName;typeof p=="string"?this.register(`formats/${p}`,a,h):Object.keys(a).forEach(b=>{this.register(b,a[b],h)})}else{let a=arguments.length<=0?void 0:arguments[0],h=arguments.length<=1?void 0:arguments[1],p=!!(!(arguments.length<=2)&&arguments[2]);this.imports[a]==null||p||to.warn(`Overwriting ${a} with`,h),this.imports[a]=h,(a.startsWith("blots/")||a.startsWith("formats/"))&&h&&typeof h!="boolean"&&h.blotName!=="abstract"&&eo.register(h),typeof h.register=="function"&&h.register(eo)}}constructor(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=function(A,k){let U=yh(A);if(!U)throw new Error("Invalid Quill container");let st=!k.theme||k.theme===mt.DEFAULTS.theme,Et=st?ea:mt.import(`themes/${k.theme}`);if(!Et)throw new Error(`Invalid theme ${k.theme}. Did you register it?`);let{modules:Bt,...jt}=mt.DEFAULTS,{modules:$t,...Wt}=Et.DEFAULTS,ae=pp(k.modules);ae!=null&&ae.toolbar&&ae.toolbar.constructor!==Object&&(ae={...ae,toolbar:{container:ae.toolbar}});let rn=ni({},pp(Bt),pp($t),ae),ri={...jt,...rb(Wt),...rb(k)},Wr=k.registry;return Wr?k.formats&&to.warn('Ignoring "formats" option because "registry" is specified'):Wr=k.formats?fp(k.formats,ri.registry,to):ri.registry,{...ri,registry:Wr,container:U,theme:Et,modules:Object.entries(rn).reduce((ro,MT)=>{let[Op,zb]=MT;if(!zb)return ro;let Ub=mt.import(`modules/${Op}`);return Ub==null?(to.error(`Cannot load ${Op} module. Are you sure you registered it?`),ro):{...ro,[Op]:ni({},Ub.DEFAULTS||{},zb)}},{}),bounds:yh(ri.bounds)}}(a,h),this.container=this.options.container,this.container==null)return void to.error("Invalid Quill container",a);this.options.debug&&mt.debug(this.options.debug);let p=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",bc.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new g;let b=Ra.blotName,E=this.options.registry.query(b);if(!E||!("blotName"in E))throw new Error(`Cannot initialize Quill without "${b}" blot`);if(this.scroll=new E(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Ui(this.scroll),this.selection=new J(this.scroll,this.emitter),this.composition=new up(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(g.events.EDITOR_CHANGE,A=>{A===g.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(g.events.SCROLL_UPDATE,(A,k)=>{let U=this.selection.lastRange,[st]=this.selection.getRange(),Et=U&&st?{oldRange:U,newRange:st}:void 0;zr.call(this,()=>this.editor.update(null,k,Et),A)}),this.emitter.on(g.events.SCROLL_EMBED_UPDATE,(A,k)=>{let U=this.selection.lastRange,[st]=this.selection.getRange(),Et=U&&st?{oldRange:U,newRange:st}:void 0;zr.call(this,()=>{let Bt=new Rt().retain(A.offset(this)).retain({[A.statics.blotName]:k});return this.editor.update(Bt,[],Et)},mt.sources.USER)}),p){let A=this.clipboard.convert({html:`${p}<p><br></p>`,text:`
`});this.setContents(A)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof a=="string"){let p=a;(a=document.createElement("div")).classList.add(p)}return this.container.insertBefore(a,h),a}blur(){this.selection.setRange(null)}deleteText(a,h,p){return[a,h,,p]=xs(a,h,p),zr.call(this,()=>this.editor.deleteText(a,h),p,a,-1*h)}disable(){this.enable(!1)}editReadOnly(a){this.allowReadOnlyEdits=!0;let h=a();return this.allowReadOnlyEdits=!1,h}enable(){let a=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.scroll.enable(a),this.container.classList.toggle("ql-disabled",!a)}focus(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),a.preventScroll||this.scrollSelectionIntoView()}format(a,h){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.sources.API;return zr.call(this,()=>{let b=this.getSelection(!0),E=new Rt;if(b==null)return E;if(this.scroll.query(a,Ft.BLOCK))E=this.editor.formatLine(b.index,b.length,{[a]:h});else{if(b.length===0)return this.selection.format(a,h),E;E=this.editor.formatText(b.index,b.length,{[a]:h})}return this.setSelection(b,g.sources.SILENT),E},p)}formatLine(a,h,p,b,E){let A;return[a,h,A,E]=xs(a,h,p,b,E),zr.call(this,()=>this.editor.formatLine(a,h,A),E,a,0)}formatText(a,h,p,b,E){let A;return[a,h,A,E]=xs(a,h,p,b,E),zr.call(this,()=>this.editor.formatText(a,h,A),E,a,0)}getBounds(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,p=null;if(p=typeof a=="number"?this.selection.getBounds(a,h):this.selection.getBounds(a.index,a.length),!p)return null;let b=this.container.getBoundingClientRect();return{bottom:p.bottom-b.top,height:p.height,left:p.left-b.left,right:p.right-b.left,top:p.top-b.top,width:p.width}}getContents(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-a;return[a,h]=xs(a,h),this.editor.getContents(a,h)}getFormat(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof a=="number"?this.editor.getFormat(a,h):this.editor.getFormat(a.index,a.length)}getIndex(a){return a.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(a){return this.scroll.leaf(a)}getLine(a){return this.scroll.line(a)}getLines(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof a!="number"?this.scroll.lines(a.index,a.length):this.scroll.lines(a,h)}getModule(a){return this.theme.modules[a]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(h=h??this.getLength()-a),[a,h]=xs(a,h),this.editor.getHTML(a,h)}getText(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(h=h??this.getLength()-a),[a,h]=xs(a,h),this.editor.getText(a,h)}hasFocus(){return this.selection.hasFocus()}insertEmbed(a,h,p){let b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:mt.sources.API;return zr.call(this,()=>this.editor.insertEmbed(a,h,p),b,a)}insertText(a,h,p,b,E){let A;return[a,,A,E]=xs(a,0,p,b,E),zr.call(this,()=>this.editor.insertText(a,h,A),E,a,h.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(a,h,p){return[a,h,,p]=xs(a,h,p),zr.call(this,()=>this.editor.removeFormat(a,h),p,a)}scrollRectIntoView(a){Va(this.root,a)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let a=this.selection.lastRange,h=a&&this.selection.getBounds(a.index,a.length);h&&this.scrollRectIntoView(h)}setContents(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.sources.API;return zr.call(this,()=>{a=new Rt(a);let p=this.getLength(),b=this.editor.deleteText(0,p),E=this.editor.insertContents(0,a),A=this.editor.deleteText(this.getLength()-1,1);return b.compose(E).compose(A)},h)}setSelection(a,h,p){a==null?this.selection.setRange(null,h||mt.sources.API):([a,h,,p]=xs(a,h,p),this.selection.setRange(new C(Math.max(0,a),h),p),p!==g.sources.SILENT&&this.scrollSelectionIntoView())}setText(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.sources.API,p=new Rt().insert(a);return this.setContents(p,h)}update(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.sources.USER,h=this.scroll.update(a);return this.selection.update(a),h}updateContents(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.sources.API;return zr.call(this,()=>(a=new Rt(a),this.editor.applyDelta(a)),h,!0)}}function yh(u){return typeof u=="string"?document.querySelector(u):u}s(yh,"Is");function pp(u){return Object.entries(u??{}).reduce((a,h)=>{let[p,b]=h;return{...a,[p]:b===!0?{}:b}},{})}s(pp,"Ms");function rb(u){return Object.fromEntries(Object.entries(u).filter(a=>a[1]!==void 0))}s(rb,"Bs");function zr(u,a,h,p){if(!this.isEnabled()&&a===g.sources.USER&&!this.allowReadOnlyEdits)return new Rt;let b=h==null?null:this.getSelection(),E=this.editor.delta,A=u();if(b!=null&&(h===!0&&(h=b.index),p==null?b=sb(b,A,a):p!==0&&(b=sb(b,h,p,a)),this.setSelection(b,g.sources.SILENT)),A.length()>0){let k=[g.events.TEXT_CHANGE,A,E,a];this.emitter.emit(g.events.EDITOR_CHANGE,...k),a!==g.sources.SILENT&&this.emitter.emit(...k)}return A}s(zr,"Us");function xs(u,a,h,p,b){let E={};return typeof u.index=="number"&&typeof u.length=="number"?typeof a!="number"?(b=p,p=h,h=a,a=u.length,u=u.index):(a=u.length,u=u.index):typeof a!="number"&&(b=p,p=h,h=a,a=0),typeof h=="object"?(E=h,b=p):typeof h=="string"&&(p!=null?E[h]=p:b=h),[u,a,E,b=b||g.sources.API]}s(xs,"Ds");function sb(u,a,h,p){let b=typeof h=="number"?h:0;if(u==null)return null;let E,A;return a&&typeof a.transformPosition=="function"?[E,A]=[u.index,u.index+u.length].map(k=>a.transformPosition(k,p!==g.sources.USER)):[E,A]=[u.index,u.index+u.length].map(k=>k<a||k===a&&p===g.sources.USER?k:b>=0?k+b:Math.max(a,k+b)),new C(E,A-E)}s(sb,"Ps");let ia=class extends Ks{static{s(this,"zs")}};function ob(u){return u instanceof On||u instanceof zi}s(ob,"Hs");function ab(u){return typeof u.updateContent=="function"}s(ab,"Fs");function mp(u,a,h){h.reduce((p,b)=>{let E=Rt.Op.length(b),A=b.attributes||{};if(b.insert!=null){if(typeof b.insert=="string"){let k=b.insert;u.insertAt(p,k);let[U]=u.descendant(Gn,p),st=Ci(U);A=Rt.AttributeMap.diff(st,A)||{}}else if(typeof b.insert=="object"){let k=Object.keys(b.insert)[0];if(k==null)return p;if(u.insertAt(p,k,b.insert[k]),u.scroll.query(k,Ft.INLINE)!=null){let[U]=u.descendant(Gn,p),st=Ci(U);A=Rt.AttributeMap.diff(st,A)||{}}}}return Object.keys(A).forEach(k=>{u.formatAt(p,E,k,A[k])}),p+E},a)}s(mp,"$s");let jE=class extends Ra{static{s(this,"Vs")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=On;static allowedChildren=[On,zi,ia];constructor(u,a,h){let{emitter:p}=h;super(u,a),this.emitter=p,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",b=>this.handleDragStart(b))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let u=this.batch;this.batch=!1,this.update(u)}emitMount(u){this.emitter.emit(g.events.SCROLL_BLOT_MOUNT,u)}emitUnmount(u){this.emitter.emit(g.events.SCROLL_BLOT_UNMOUNT,u)}emitEmbedUpdate(u,a){this.emitter.emit(g.events.SCROLL_EMBED_UPDATE,u,a)}deleteAt(u,a){let[h,p]=this.line(u),[b]=this.line(u+a);if(super.deleteAt(u,a),b!=null&&h!==b&&p>0){if(h instanceof zi||b instanceof zi)return void this.optimize();let E=b.children.head instanceof Ai?null:b.children.head;h.moveChildren(b,E),h.remove()}this.optimize()}enable(){let u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.domNode.setAttribute("contenteditable",u?"true":"false")}formatAt(u,a,h,p){super.formatAt(u,a,h,p),this.optimize()}insertAt(u,a,h){if(u>=this.length())if(h==null||this.scroll.query(a,Ft.BLOCK)==null){let p=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(p),h==null&&a.endsWith(`
`)?p.insertAt(0,a.slice(0,-1),h):p.insertAt(0,a,h)}else{let p=this.scroll.create(a,h);this.appendChild(p)}else super.insertAt(u,a,h);this.optimize()}insertBefore(u,a){if(u.statics.scope===Ft.INLINE_BLOT){let h=this.scroll.create(this.statics.defaultChild.blotName);h.appendChild(u),super.insertBefore(h,a)}else super.insertBefore(u,a)}insertContents(u,a){let h=this.deltaToRenderBlocks(a.concat(new Rt().insert(`
`))),p=h.pop();if(p==null)return;this.batchStart();let b=h.shift();if(b){let k=b.type==="block"&&(b.delta.length()===0||!this.descendant(zi,u)[0]&&u<this.length()),U=b.type==="block"?b.delta:new Rt().insert({[b.key]:b.value});mp(this,u,U);let st=b.type==="block"?1:0,Et=u+U.length()+st;k&&this.insertAt(Et-1,`
`);let Bt=Ci(this.line(u)[0]),jt=Rt.AttributeMap.diff(Bt,b.attributes)||{};Object.keys(jt).forEach($t=>{this.formatAt(Et-1,1,$t,jt[$t])}),u=Et}let[E,A]=this.children.find(u);h.length&&(E&&(E=E.split(A),A=0),h.forEach(k=>{if(k.type==="block")mp(this.createBlock(k.attributes,E||void 0),0,k.delta);else{let U=this.create(k.key,k.value);this.insertBefore(U,E||void 0),Object.keys(k.attributes).forEach(st=>{U.format(st,k.attributes[st])})}})),p.type==="block"&&p.delta.length()&&mp(this,E?E.offset(E.scroll)+A:this.length(),p.delta),this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(u){let a=this.path(u).pop();if(!a)return[null,-1];let[h,p]=a;return h instanceof Gn?[h,p]:[null,-1]}line(u){return u===this.length()?this.line(u-1):this.descendant(ob,u)}lines(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,h=s((p,b,E)=>{let A=[],k=E;return p.children.forEachAt(b,E,(U,st,Et)=>{ob(U)?A.push(U):U instanceof Ks&&(A=A.concat(h(U,st,k))),k-=Et}),A},"n");return h(this,u,a)}optimize(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(u,a),u.length>0&&this.emitter.emit(g.events.SCROLL_OPTIMIZE,u,a))}path(u){return super.path(u).slice(1)}remove(){}update(u){if(this.batch)return void(Array.isArray(u)&&(this.batch=this.batch.concat(u)));let a=g.sources.USER;typeof u=="string"&&(a=u),Array.isArray(u)||(u=this.observer.takeRecords()),(u=u.filter(h=>{let{target:p}=h,b=this.find(p,!0);return b&&!ab(b)})).length>0&&this.emitter.emit(g.events.SCROLL_BEFORE_UPDATE,a,u),super.update(u.concat([])),u.length>0&&this.emitter.emit(g.events.SCROLL_UPDATE,a,u)}updateEmbedAt(u,a,h){let[p]=this.descendant(b=>b instanceof zi,u);p&&p.statics.blotName===a&&ab(p)&&p.updateContent(h)}handleDragStart(u){u.preventDefault()}deltaToRenderBlocks(u){let a=[],h=new Rt;return u.forEach(p=>{let b=p?.insert;if(b)if(typeof b=="string"){let E=b.split(`
`);E.slice(0,-1).forEach(k=>{h.insert(k,p.attributes),a.push({type:"block",delta:h,attributes:p.attributes??{}}),h=new Rt});let A=E[E.length-1];A&&h.insert(A,p.attributes)}else{let E=Object.keys(b)[0];if(!E)return;this.query(E,Ft.INLINE)?h.push(p):(h.length()&&a.push({type:"block",delta:h,attributes:{}}),h=new Rt,a.push({type:"blockEmbed",key:E,value:b[E],attributes:p.attributes??{}}))}}),h.length()&&a.push({type:"block",delta:h,attributes:{}}),a}createBlock(u,a){let h,p={};Object.entries(u).forEach(A=>{let[k,U]=A;this.query(k,Ft.BLOCK&Ft.BLOT)!=null?h=k:p[k]=U});let b=this.create(h||this.statics.defaultChild.blotName,h?u[h]:void 0);this.insertBefore(b,a||void 0);let E=b.length();return Object.entries(p).forEach(A=>{let[k,U]=A;b.formatAt(0,E,k,U)}),b}},gp={scope:Ft.BLOCK,whitelist:["right","center","justify"]},FE=new jn("align","align",gp),lb=new ji("align","ql-align",gp),cb=new Pr("align","text-align",gp);class ub extends Pr{static{s(this,"Xs")}value(a){let h=super.value(a);return h.startsWith("rgb(")?(h=h.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${h.split(",").map(p=>`00${parseInt(p,10).toString(16)}`.slice(-2)).join("")}`):h}}let HE=new ji("color","ql-color",{scope:Ft.INLINE}),vp=new ub("color","color",{scope:Ft.INLINE}),zE=new ji("background","ql-bg",{scope:Ft.INLINE}),bp=new ub("background","background-color",{scope:Ft.INLINE});class ra extends ia{static{s(this,"ei")}static create(a){let h=super.create(a);return h.setAttribute("spellcheck","false"),h}code(a,h){return this.children.map(p=>p.length()<=1?"":p.domNode.innerText).join(`
`).slice(a,a+h)}html(a,h){return`<pre>
${ws(this.code(a,h))}
</pre>`}}class Li extends On{static{s(this,"ni")}static TAB="  ";static register(){mt.register(ra)}}class yp extends jr{static{s(this,"ri")}}yp.blotName="code",yp.tagName="CODE",Li.blotName="code-block",Li.className="ql-code-block",Li.tagName="DIV",ra.blotName="code-block-container",ra.className="ql-code-block-container",ra.tagName="DIV",ra.allowedChildren=[Li],Li.allowedChildren=[cr,Ai,ta],Li.requiredContainer=ra;let _p={scope:Ft.BLOCK,whitelist:["rtl"]},hb=new jn("direction","dir",_p),db=new ji("direction","ql-direction",_p),fb=new Pr("direction","direction",_p),pb={scope:Ft.INLINE,whitelist:["serif","monospace"]},mb=new ji("font","ql-font",pb),gb=new class extends Pr{value(u){return super.value(u).replace(/["']/g,"")}}("font","font-family",pb),vb=new ji("size","ql-size",{scope:Ft.INLINE,whitelist:["small","large","huge"]}),bb=new Pr("size","font-size",{scope:Ft.INLINE,whitelist:["10px","18px","32px"]}),UE=l("quill:keyboard"),WE=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class _h extends on{static{s(this,"gi")}static match(a,h){return!["altKey","ctrlKey","metaKey","shiftKey"].some(p=>!!h[p]!==a[p]&&h[p]!==null)&&(h.key===a.key||h.key===a.which)}constructor(a,h){super(a,h),this.bindings={},Object.keys(this.options.bindings).forEach(p=>{this.options.bindings[p]&&this.addBinding(this.options.bindings[p])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=function(E){if(typeof E=="string"||typeof E=="number")E={key:E};else{if(typeof E!="object")return null;E=Qs(E)}return E.shortKey&&(E[WE]=E.shortKey,delete E.shortKey),E}(a);if(b==null)return void UE.warn("Attempted to add invalid keyboard binding",b);typeof h=="function"&&(h={handler:h}),typeof p=="function"&&(p={handler:p}),(Array.isArray(b.key)?b.key:[b.key]).forEach(E=>{let A={...b,key:E,...h,...p};this.bindings[A.key]=this.bindings[A.key]||[],this.bindings[A.key].push(A)})}listen(){this.quill.root.addEventListener("keydown",a=>{if(a.defaultPrevented||a.isComposing||a.keyCode===229&&(a.key==="Enter"||a.key==="Backspace"))return;let h=(this.bindings[a.key]||[]).concat(this.bindings[a.which]||[]).filter(Wt=>_h.match(a,Wt));if(h.length===0)return;let p=mt.find(a.target,!0);if(p&&p.scroll!==this.quill.scroll)return;let b=this.quill.getSelection();if(b==null||!this.quill.hasFocus())return;let[E,A]=this.quill.getLine(b.index),[k,U]=this.quill.getLeaf(b.index),[st,Et]=b.length===0?[k,U]:this.quill.getLeaf(b.index+b.length),Bt=k instanceof Ho?k.value().slice(0,U):"",jt=st instanceof Ho?st.value().slice(Et):"",$t={collapsed:b.length===0,empty:b.length===0&&E.length()<=1,format:this.quill.getFormat(b),line:E,offset:A,prefix:Bt,suffix:jt,event:a};h.some(Wt=>{if(Wt.collapsed!=null&&Wt.collapsed!==$t.collapsed||Wt.empty!=null&&Wt.empty!==$t.empty||Wt.offset!=null&&Wt.offset!==$t.offset)return!1;if(Array.isArray(Wt.format)){if(Wt.format.every(ae=>$t.format[ae]==null))return!1}else if(typeof Wt.format=="object"&&!Object.keys(Wt.format).every(ae=>Wt.format[ae]===!0?$t.format[ae]!=null:Wt.format[ae]===!1?$t.format[ae]==null:Ha(Wt.format[ae],$t.format[ae])))return!1;return!(Wt.prefix!=null&&!Wt.prefix.test($t.prefix))&&!(Wt.suffix!=null&&!Wt.suffix.test($t.suffix))&&Wt.handler.call(this,b,$t,Wt)!==!0})&&a.preventDefault()})}handleBackspace(a,h){let p=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(h.prefix)?2:1;if(a.index===0||this.quill.getLength()<=1)return;let b={},[E]=this.quill.getLine(a.index),A=new Rt().retain(a.index-p).delete(p);if(h.offset===0){let[k]=this.quill.getLine(a.index-1);if(k&&!(k.statics.blotName==="block"&&k.length()<=1)){let U=E.formats(),st=this.quill.getFormat(a.index-1,1);if(b=Rt.AttributeMap.diff(U,st)||{},Object.keys(b).length>0){let Et=new Rt().retain(a.index+E.length()-2).retain(1,b);A=A.compose(Et)}}}this.quill.updateContents(A,mt.sources.USER),this.quill.focus()}handleDelete(a,h){let p=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(h.suffix)?2:1;if(a.index>=this.quill.getLength()-p)return;let b={},[E]=this.quill.getLine(a.index),A=new Rt().retain(a.index).delete(p);if(h.offset>=E.length()-1){let[k]=this.quill.getLine(a.index+1);if(k){let U=E.formats(),st=this.quill.getFormat(a.index,1);b=Rt.AttributeMap.diff(U,st)||{},Object.keys(b).length>0&&(A=A.retain(k.length()-1).retain(1,b))}}this.quill.updateContents(A,mt.sources.USER),this.quill.focus()}handleDeleteRange(a){xp({range:a,quill:this.quill}),this.quill.focus()}handleEnter(a,h){let p=Object.keys(h.format).reduce((E,A)=>(this.quill.scroll.query(A,Ft.BLOCK)&&!Array.isArray(h.format[A])&&(E[A]=h.format[A]),E),{}),b=new Rt().retain(a.index).delete(a.length).insert(`
`,p);this.quill.updateContents(b,mt.sources.USER),this.quill.setSelection(a.index+1,mt.sources.SILENT),this.quill.focus()}}let VE={bindings:{bold:wp("bold"),italic:wp("italic"),underline:wp("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(u,a){return!(!a.collapsed||a.offset===0)||(this.quill.format("indent","+1",mt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(u,a){return!(!a.collapsed||a.offset===0)||(this.quill.format("indent","-1",mt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(u,a){a.format.indent!=null?this.quill.format("indent","-1",mt.sources.USER):a.format.list!=null&&this.quill.format("list",!1,mt.sources.USER)}},"indent code-block":yb(!0),"outdent code-block":yb(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(u){this.quill.deleteText(u.index-1,1,mt.sources.USER)}},tab:{key:"Tab",handler(u,a){if(a.format.table)return!0;this.quill.history.cutoff();let h=new Rt().retain(u.index).delete(u.length).insert("	");return this.quill.updateContents(h,mt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(u.index+1,mt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,mt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(u,a){let h={list:!1};a.format.indent&&(h.indent=!1),this.quill.formatLine(u.index,u.length,h,mt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(u){let[a,h]=this.quill.getLine(u.index),p={...a.formats(),list:"checked"},b=new Rt().retain(u.index).insert(`
`,p).retain(a.length()-h-1).retain(1,{list:"unchecked"});this.quill.updateContents(b,mt.sources.USER),this.quill.setSelection(u.index+1,mt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(u,a){let[h,p]=this.quill.getLine(u.index),b=new Rt().retain(u.index).insert(`
`,a.format).retain(h.length()-p-1).retain(1,{header:null});this.quill.updateContents(b,mt.sources.USER),this.quill.setSelection(u.index+1,mt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(u){let a=this.quill.getModule("table");if(a){let[h,p,b,E]=a.getTable(u),A=function(U,st,Et,Bt){return st.prev==null&&st.next==null?Et.prev==null&&Et.next==null?Bt===0?-1:1:Et.prev==null?-1:1:st.prev==null?-1:st.next==null?1:null}(0,p,b,E);if(A==null)return;let k=h.offset();if(A<0){let U=new Rt().retain(k).insert(`
`);this.quill.updateContents(U,mt.sources.USER),this.quill.setSelection(u.index+1,u.length,mt.sources.SILENT)}else if(A>0){k+=h.length();let U=new Rt().retain(k).insert(`
`);this.quill.updateContents(U,mt.sources.USER),this.quill.setSelection(k,mt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(u,a){let{event:h,line:p}=a,b=p.offset(this.quill.scroll);h.shiftKey?this.quill.setSelection(b-1,mt.sources.USER):this.quill.setSelection(b+p.length(),mt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(u,a){if(this.quill.scroll.query("list")==null)return!0;let{length:h}=a.prefix,[p,b]=this.quill.getLine(u.index);if(b>h)return!0;let E;switch(a.prefix.trim()){case"[]":case"[ ]":E="unchecked";break;case"[x]":E="checked";break;case"-":case"*":E="bullet";break;default:E="ordered"}this.quill.insertText(u.index," ",mt.sources.USER),this.quill.history.cutoff();let A=new Rt().retain(u.index-b).delete(h+1).retain(p.length()-2-b).retain(1,{list:E});return this.quill.updateContents(A,mt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(u.index-h,mt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(u){let[a,h]=this.quill.getLine(u.index),p=2,b=a;for(;b!=null&&b.length()<=1&&b.formats()["code-block"];)if(b=b.prev,p-=1,p<=0){let E=new Rt().retain(u.index+a.length()-h-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(E,mt.sources.USER),this.quill.setSelection(u.index-1,mt.sources.SILENT),!1}return!0}},"embed left":wh("ArrowLeft",!1),"embed left shift":wh("ArrowLeft",!0),"embed right":wh("ArrowRight",!1),"embed right shift":wh("ArrowRight",!0),"table down":_b(!1),"table up":_b(!0)}};function yb(u){return{key:"Tab",shiftKey:!u,format:{"code-block":!0},handler(a,h){let{event:p}=h,b=this.quill.scroll.query("code-block"),{TAB:E}=b;if(a.length===0&&!p.shiftKey)return this.quill.insertText(a.index,E,mt.sources.USER),void this.quill.setSelection(a.index+E.length,mt.sources.SILENT);let A=a.length===0?this.quill.getLines(a.index,1):this.quill.getLines(a),{index:k,length:U}=a;A.forEach((st,Et)=>{u?(st.insertAt(0,E),Et===0?k+=E.length:U+=E.length):st.domNode.textContent.startsWith(E)&&(st.deleteAt(0,E.length),Et===0?k-=E.length:U-=E.length)}),this.quill.update(mt.sources.USER),this.quill.setSelection(k,U,mt.sources.SILENT)}}}s(yb,"bi");function wh(u,a){return{key:u,shiftKey:a,altKey:null,[u==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(p){let{index:b}=p;u==="ArrowRight"&&(b+=p.length+1);let[E]=this.quill.getLeaf(b);return!(E instanceof Ti)||(u==="ArrowLeft"?a?this.quill.setSelection(p.index-1,p.length+1,mt.sources.USER):this.quill.setSelection(p.index-1,mt.sources.USER):a?this.quill.setSelection(p.index,p.length+1,mt.sources.USER):this.quill.setSelection(p.index+p.length+1,mt.sources.USER),!1)}}}s(wh,"yi");function wp(u){return{key:u[0],shortKey:!0,handler(a,h){this.quill.format(u,!h.format[u],mt.sources.USER)}}}s(wp,"vi");function _b(u){return{key:u?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(a,h){let p=u?"prev":"next",b=h.line,E=b.parent[p];if(E!=null){if(E.statics.blotName==="table-row"){let A=E.children.head,k=b;for(;k.prev!=null;)k=k.prev,A=A.next;let U=A.offset(this.quill.scroll)+Math.min(h.offset,A.length()-1);this.quill.setSelection(U,0,mt.sources.USER)}}else{let A=b.table()[p];A!=null&&(u?this.quill.setSelection(A.offset(this.quill.scroll)+A.length()-1,0,mt.sources.USER):this.quill.setSelection(A.offset(this.quill.scroll),0,mt.sources.USER))}return!1}}}s(_b,"xi");function xp(u){let{quill:a,range:h}=u,p=a.getLines(h),b={};if(p.length>1){let E=p[0].formats(),A=p[p.length-1].formats();b=Rt.AttributeMap.diff(A,E)||{}}a.deleteText(h,mt.sources.USER),Object.keys(b).length>0&&a.formatLine(h.index,1,b,mt.sources.USER),a.setSelection(h.index,mt.sources.SILENT)}s(xp,"Ni"),_h.DEFAULTS=VE;let ZE=/font-weight:\s*normal/,$E=["P","OL","UL"],wb=s(u=>u&&$E.includes(u.tagName),"Ai"),KE=/\bmso-list:[^;]*ignore/i,YE=/\bmso-list:[^;]*\bl(\d+)/i,GE=/\bmso-list:[^;]*\blevel(\d+)/i,XE=s(u=>{let a=Array.from(u.querySelectorAll("[style*=mso-list]")),h=[],p=[];a.forEach(A=>{(A.getAttribute("style")||"").match(KE)?h.push(A):p.push(A)}),h.forEach(A=>A.parentNode?.removeChild(A));let b=u.documentElement.innerHTML,E=p.map(A=>((k,U)=>{let st=k.getAttribute("style"),Et=st?.match(YE);if(!Et)return null;let Bt=Number(Et[1]),jt=st?.match(GE),$t=jt?Number(jt[1]):1,Wt=new RegExp(`@list l${Bt}:level${$t}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),ae=U.match(Wt);return{id:Bt,indent:$t,type:ae&&ae[1]==="bullet"?"bullet":"ordered",element:k}})(A,b)).filter(A=>A);for(;E.length;){let A=[],k=E.shift();for(;k;)A.push(k),k=E.length&&E[0]?.element===k.element.nextElementSibling&&E[0].id===k.id?E.shift():null;let U=document.createElement("ul");A.forEach(Bt=>{let jt=document.createElement("li");jt.setAttribute("data-list",Bt.type),Bt.indent>1&&jt.setAttribute("class","ql-indent-"+(Bt.indent-1)),jt.innerHTML=Bt.element.innerHTML,U.appendChild(jt)});let st=A[0]?.element,{parentNode:Et}=st??{};st&&Et?.replaceChild(U,st),A.slice(1).forEach(Bt=>{let{element:jt}=Bt;Et?.removeChild(jt)})}},"Li"),JE=[function(u){u.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&XE(u)},function(u){u.querySelector('[id^="docs-internal-guid-"]')&&((a=>{Array.from(a.querySelectorAll('b[style*="font-weight"]')).filter(h=>h.getAttribute("style")?.match(ZE)).forEach(h=>{let p=a.createDocumentFragment();p.append(...h.childNodes),h.parentNode?.replaceChild(p,h)})})(u),(a=>{Array.from(a.querySelectorAll("br")).filter(h=>wb(h.previousElementSibling)&&wb(h.nextElementSibling)).forEach(h=>{h.parentNode?.removeChild(h)})})(u))}],QE=s(u=>{u.documentElement&&JE.forEach(a=>{a(u)})},"Ti"),tT=l("quill:clipboard"),eT=[[Node.TEXT_NODE,function(u,a,h){let p=u.data;if(u.parentElement?.tagName==="O:P")return a.insert(p.trim());if(!Eb(u)){if(p.trim().length===0&&p.includes(`
`)&&!function(E,A){return E.previousElementSibling&&E.nextElementSibling&&!no(E.previousElementSibling,A)&&!no(E.nextElementSibling,A)}(u,h))return a;let b=s((E,A)=>{let k=A.replace(/[^\u00a0]/g,"");return k.length<1&&E?" ":k},"s");p=p.replace(/\r\n/g," ").replace(/\n/g," "),p=p.replace(/\s\s+/g,b.bind(b,!0)),(u.previousSibling==null&&u.parentElement!=null&&no(u.parentElement,h)||u.previousSibling instanceof Element&&no(u.previousSibling,h))&&(p=p.replace(/^\s+/,b.bind(b,!1))),(u.nextSibling==null&&u.parentElement!=null&&no(u.parentElement,h)||u.nextSibling instanceof Element&&no(u.nextSibling,h))&&(p=p.replace(/\s+$/,b.bind(b,!1)))}return a.insert(p)}],[Node.TEXT_NODE,Tb],["br",function(u,a){return wc(a,`
`)||a.insert(`
`),a}],[Node.ELEMENT_NODE,Tb],[Node.ELEMENT_NODE,function(u,a,h){let p=h.query(u);if(p==null)return a;if(p.prototype instanceof Ti){let b={},E=p.value(u);if(E!=null)return b[p.blotName]=E,new Rt().insert(b,p.formats(u,h))}else if(p.prototype instanceof Fo&&!wc(a,`
`)&&a.insert(`
`),"blotName"in p&&"formats"in p&&typeof p.formats=="function")return sa(a,p.blotName,p.formats(u,h),h);return a}],[Node.ELEMENT_NODE,function(u,a,h){let p=jn.keys(u),b=ji.keys(u),E=Pr.keys(u),A={};return p.concat(b).concat(E).forEach(k=>{let U=h.query(k,Ft.ATTRIBUTE);U!=null&&(A[U.attrName]=U.value(u),A[U.attrName])||(U=nT[k],U==null||U.attrName!==k&&U.keyName!==k||(A[U.attrName]=U.value(u)||void 0),U=xb[k],U==null||U.attrName!==k&&U.keyName!==k||(U=xb[k],A[U.attrName]=U.value(u)||void 0))}),Object.entries(A).reduce((k,U)=>{let[st,Et]=U;return sa(k,st,Et,h)},a)}],[Node.ELEMENT_NODE,function(u,a,h){let p={},b=u.style||{};return b.fontStyle==="italic"&&(p.italic=!0),b.textDecoration==="underline"&&(p.underline=!0),b.textDecoration==="line-through"&&(p.strike=!0),(b.fontWeight?.startsWith("bold")||parseInt(b.fontWeight,10)>=700)&&(p.bold=!0),a=Object.entries(p).reduce((E,A)=>{let[k,U]=A;return sa(E,k,U,h)},a),parseFloat(b.textIndent||0)>0?new Rt().insert("	").concat(a):a}],["li",function(u,a,h){let p=h.query(u);if(p==null||p.blotName!=="list"||!wc(a,`
`))return a;let b=-1,E=u.parentNode;for(;E!=null;)["OL","UL"].includes(E.tagName)&&(b+=1),E=E.parentNode;return b<=0?a:a.reduce((A,k)=>k.insert?k.attributes&&typeof k.attributes.indent=="number"?A.push(k):A.insert(k.insert,{indent:b,...k.attributes||{}}):A,new Rt)}],["ol, ul",function(u,a,h){let p=u,b=p.tagName==="OL"?"ordered":"bullet",E=p.getAttribute("data-checked");return E&&(b=E==="true"?"checked":"unchecked"),sa(a,"list",b,h)}],["pre",function(u,a,h){let p=h.query("code-block"),b=!p||!("formats"in p)||typeof p.formats!="function"||p.formats(u,h);return sa(a,"code-block",b,h)}],["tr",function(u,a,h){let p=u.parentElement?.tagName==="TABLE"?u.parentElement:u.parentElement?.parentElement;return p!=null?sa(a,"table",Array.from(p.querySelectorAll("tr")).indexOf(u)+1,h):a}],["b",Tp("bold")],["i",Tp("italic")],["strike",Tp("strike")],["style",function(){return new Rt}]],nT=[FE,hb].reduce((u,a)=>(u[a.keyName]=a,u),{}),xb=[cb,bp,vp,fb,gb,bb].reduce((u,a)=>(u[a.keyName]=a,u),{});function sa(u,a,h,p){return p.query(a)?u.reduce((b,E)=>{if(!E.insert)return b;if(E.attributes&&E.attributes[a])return b.push(E);let A=h?{[a]:h}:{};return b.insert(E.insert,{...A,...E.attributes})},new Rt):u}s(sa,"Ii");function wc(u,a){let h="";for(let p=u.ops.length-1;p>=0&&h.length<a.length;--p){let b=u.ops[p];if(typeof b.insert!="string")break;h=b.insert+h}return h.slice(-1*a.length)===a}s(wc,"Mi");function no(u,a){if(!(u instanceof Element))return!1;let h=a.query(u);return!(h&&h.prototype instanceof Ti)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(u.tagName.toLowerCase())}s(no,"Bi");let xh=new WeakMap;function Eb(u){return u!=null&&(xh.has(u)||(u.tagName==="PRE"?xh.set(u,!0):xh.set(u,Eb(u.parentNode))),xh.get(u))}s(Eb,"Di");function Ep(u,a,h,p,b){return a.nodeType===a.TEXT_NODE?p.reduce((E,A)=>A(a,E,u),new Rt):a.nodeType===a.ELEMENT_NODE?Array.from(a.childNodes||[]).reduce((E,A)=>{let k=Ep(u,A,h,p,b);return A.nodeType===a.ELEMENT_NODE&&(k=h.reduce((U,st)=>st(A,U,u),k),k=(b.get(A)||[]).reduce((U,st)=>st(A,U,u),k)),E.concat(k)},new Rt):new Rt}s(Ep,"Pi");function Tp(u){return(a,h,p)=>sa(h,u,!0,p)}s(Tp,"zi");function Tb(u,a,h){if(!wc(a,`
`)){if(no(u,h)&&(u.childNodes.length>0||u instanceof HTMLParagraphElement))return a.insert(`
`);if(a.length()>0&&u.nextSibling){let p=u.nextSibling;for(;p!=null;){if(no(p,h))return a.insert(`
`);let b=h.query(p);if(b&&b.prototype instanceof zi)return a.insert(`
`);p=p.firstChild}}}return a}s(Tb,"Hi");function Sb(u,a){let h=a;for(let p=u.length-1;p>=0;p-=1){let b=u[p];u[p]={delta:h.transform(b.delta,!0),range:b.range&&Sp(b.range,h)},h=b.delta.transform(h),u[p].delta.length()===0&&u.splice(p,1)}}s(Sb,"Fi");function Sp(u,a){if(!u)return u;let h=a.transformPosition(u.index);return{index:h,length:a.transformPosition(u.index+u.length)-h}}s(Sp,"$i");class Ab extends on{static{s(this,"Vi")}constructor(a,h){super(a,h),a.root.addEventListener("drop",p=>{p.preventDefault();let b=null;if(document.caretRangeFromPoint)b=document.caretRangeFromPoint(p.clientX,p.clientY);else if(document.caretPositionFromPoint){let A=document.caretPositionFromPoint(p.clientX,p.clientY);b=document.createRange(),b.setStart(A.offsetNode,A.offset),b.setEnd(A.offsetNode,A.offset)}let E=b&&a.selection.normalizeNative(b);if(E){let A=a.selection.normalizedToRange(E);p.dataTransfer?.files&&this.upload(A,p.dataTransfer.files)}})}upload(a,h){let p=[];Array.from(h).forEach(b=>{b&&this.options.mimetypes?.includes(b.type)&&p.push(b)}),p.length>0&&this.options.handler.call(this,a,p)}}Ab.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(u,a){if(!this.quill.scroll.query("image"))return;let h=a.map(p=>new Promise(b=>{let E=new FileReader;E.onload=()=>{b(E.result)},E.readAsDataURL(p)}));Promise.all(h).then(p=>{let b=p.reduce((E,A)=>E.insert({image:A}),new Rt().retain(u.index).delete(u.length));this.quill.updateContents(b,g.sources.USER),this.quill.setSelection(u.index+p.length,g.sources.SILENT)})}};let iT=Ab,rT=["insertText","insertReplacementText"],sT=class extends on{static{s(this,"Zi")}constructor(u,a){super(u,a),u.root.addEventListener("beforeinput",h=>{this.handleBeforeInput(h)}),/Android/i.test(navigator.userAgent)||u.on(mt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(u){xp({range:u,quill:this.quill})}replaceText(u){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(u.length===0)return!1;if(a){let h=this.quill.getFormat(u.index,1);this.deleteRange(u),this.quill.updateContents(new Rt().retain(u.index).insert(a,h),mt.sources.USER)}else this.deleteRange(u);return this.quill.setSelection(u.index+a.length,0,mt.sources.SILENT),!0}handleBeforeInput(u){if(this.quill.composition.isComposing||u.defaultPrevented||!rT.includes(u.inputType))return;let a=u.getTargetRanges?u.getTargetRanges()[0]:null;if(!a||a.collapsed===!0)return;let h=function(E){return typeof E.data=="string"?E.data:E.dataTransfer?.types.includes("text/plain")?E.dataTransfer.getData("text/plain"):null}(u);if(h==null)return;let p=this.quill.selection.normalizeNative(a),b=p?this.quill.selection.normalizedToRange(p):null;b&&this.replaceText(b,h)&&u.preventDefault()}handleCompositionStart(){let u=this.quill.getSelection();u&&this.replaceText(u)}},oT=/Mac/i.test(navigator.platform),aT=class extends on{static{s(this,"Xi")}isListening=!1;selectionChangeDeadline=0;constructor(u,a){super(u,a),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(u,a){let{line:h,event:p}=a;if(!(h instanceof ar&&h.uiNode))return!0;let b=getComputedStyle(h.domNode).direction==="rtl";return!!(b&&p.key!=="ArrowRight"||!b&&p.key!=="ArrowLeft")||(this.quill.setSelection(u.index-1,u.length+(p.shiftKey?1:0),mt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",u=>{!u.defaultPrevented&&(a=>a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="Home"||!(!oT||a.key!=="a"||a.ctrlKey!==!0))(u)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,!this.isListening&&(this.isListening=!0,document.addEventListener("selectionchange",()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){let u=document.getSelection();if(!u)return;let a=u.getRangeAt(0);if(a.collapsed!==!0||a.startOffset!==0)return;let h=this.quill.scroll.find(a.startContainer);if(!(h instanceof ar&&h.uiNode))return;let p=document.createRange();p.setStartAfter(h.uiNode),p.setEndAfter(h.uiNode),u.removeAllRanges(),u.addRange(p)}};mt.register({"blots/block":On,"blots/block/embed":zi,"blots/break":Ai,"blots/container":ia,"blots/cursor":ta,"blots/embed":yc,"blots/inline":jr,"blots/scroll":jE,"blots/text":cr,"modules/clipboard":class extends on{static DEFAULTS={matchers:[]};constructor(u,a){super(u,a),this.quill.root.addEventListener("copy",h=>this.onCaptureCopy(h,!1)),this.quill.root.addEventListener("cut",h=>this.onCaptureCopy(h,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],eT.concat(this.options.matchers??[]).forEach(h=>{let[p,b]=h;this.addMatcher(p,b)})}addMatcher(u,a){this.matchers.push([u,a])}convert(u){let{html:a,text:h}=u,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(p[Li.blotName])return new Rt().insert(h||"",{[Li.blotName]:p[Li.blotName]});if(!a)return new Rt().insert(h||"",p);let b=this.convertHTML(a);return wc(b,`
`)&&(b.ops[b.ops.length-1].attributes==null||p.table)?b.compose(new Rt().retain(b.length()-1).delete(1)):b}normalizeHTML(u){QE(u)}convertHTML(u){let a=new DOMParser().parseFromString(u,"text/html");this.normalizeHTML(a);let h=a.body,p=new WeakMap,[b,E]=this.prepareMatching(h,p);return Ep(this.quill.scroll,h,b,E,p)}dangerouslyPasteHTML(u,a){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mt.sources.API;if(typeof u=="string"){let p=this.convert({html:u,text:""});this.quill.setContents(p,a),this.quill.setSelection(0,mt.sources.SILENT)}else{let p=this.convert({html:a,text:""});this.quill.updateContents(new Rt().retain(u).concat(p),h),this.quill.setSelection(u+p.length(),mt.sources.SILENT)}}onCaptureCopy(u){let a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(u.defaultPrevented)return;u.preventDefault();let[h]=this.quill.selection.getRange();if(h==null)return;let{html:p,text:b}=this.onCopy(h,a);u.clipboardData?.setData("text/plain",b),u.clipboardData?.setData("text/html",p),a&&xp({range:h,quill:this.quill})}normalizeURIList(u){return u.split(/\r?\n/).filter(a=>a[0]!=="#").join(`
`)}onCapturePaste(u){if(u.defaultPrevented||!this.quill.isEnabled())return;u.preventDefault();let a=this.quill.getSelection(!0);if(a==null)return;let h=u.clipboardData?.getData("text/html"),p=u.clipboardData?.getData("text/plain");if(!h&&!p){let E=u.clipboardData?.getData("text/uri-list");E&&(p=this.normalizeURIList(E))}let b=Array.from(u.clipboardData?.files||[]);if(!h&&b.length>0)this.quill.uploader.upload(a,b);else{if(h&&b.length>0){let E=new DOMParser().parseFromString(h,"text/html");if(E.body.childElementCount===1&&E.body.firstElementChild?.tagName==="IMG")return void this.quill.uploader.upload(a,b)}this.onPaste(a,{html:h,text:p})}}onCopy(u){let a=this.quill.getText(u);return{html:this.quill.getSemanticHTML(u),text:a}}onPaste(u,a){let{text:h,html:p}=a,b=this.quill.getFormat(u.index),E=this.convert({text:h,html:p},b);tT.log("onPaste",E,{text:h,html:p});let A=new Rt().retain(u.index).delete(u.length).concat(E);this.quill.updateContents(A,mt.sources.USER),this.quill.setSelection(A.length()-u.length,mt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(u,a){let h=[],p=[];return this.matchers.forEach(b=>{let[E,A]=b;switch(E){case Node.TEXT_NODE:p.push(A);break;case Node.ELEMENT_NODE:h.push(A);break;default:Array.from(u.querySelectorAll(E)).forEach(k=>{a.has(k)?a.get(k)?.push(A):a.set(k,[A])})}}),[h,p]}},"modules/history":class extends on{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(u,a){super(u,a),this.quill.on(mt.events.EDITOR_CHANGE,(h,p,b,E)=>{h===mt.events.SELECTION_CHANGE?p&&E!==mt.sources.SILENT&&(this.currentRange=p):h===mt.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&E!==mt.sources.USER?this.transform(p):this.record(p,b)),this.currentRange=Sp(this.currentRange,p))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",h=>{h.inputType==="historyUndo"?(this.undo(),h.preventDefault()):h.inputType==="historyRedo"&&(this.redo(),h.preventDefault())})}change(u,a){if(this.stack[u].length===0)return;let h=this.stack[u].pop();if(!h)return;let p=this.quill.getContents(),b=h.delta.invert(p);this.stack[a].push({delta:b,range:Sp(h.range,b)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(h.delta,mt.sources.USER),this.ignoreChange=!1,this.restoreSelection(h)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(u,a){if(u.ops.length===0)return;this.stack.redo=[];let h=u.invert(a),p=this.currentRange,b=Date.now();if(this.lastRecorded+this.options.delay>b&&this.stack.undo.length>0){let E=this.stack.undo.pop();E&&(h=h.compose(E.delta),p=E.range)}else this.lastRecorded=b;h.length()!==0&&(this.stack.undo.push({delta:h,range:p}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(u){Sb(this.stack.undo,u),Sb(this.stack.redo,u)}undo(){this.change("undo","redo")}restoreSelection(u){if(u.range)this.quill.setSelection(u.range,mt.sources.USER);else{let a=function(h,p){let b=p.reduce((A,k)=>A+(k.delete||0),0),E=p.length()-b;return function(A,k){let U=k.ops[k.ops.length-1];return U==null?!1:U.insert!=null?typeof U.insert=="string"&&U.insert.endsWith(`
`):U.attributes!=null?Object.keys(U.attributes).some(st=>A.query(st,Ft.BLOCK)!=null):!1}(h,p)&&(E-=1),E}(this.quill.scroll,u.delta);this.quill.setSelection(a,mt.sources.USER)}}},"modules/keyboard":_h,"modules/uploader":iT,"modules/input":sT,"modules/uiNode":aT});let Ap=mt,lT=new class extends ji{add(u,a){let h=0;if(a==="+1"||a==="-1"){let p=this.value(u)||0;h=a==="+1"?p+1:p-1}else typeof a=="number"&&(h=a);return h===0?(this.remove(u),!0):super.add(u,h.toString())}canAdd(u,a){return super.canAdd(u,a)||super.canAdd(u,parseInt(a,10))}value(u){return parseInt(super.value(u),10)||void 0}}("indent","ql-indent",{scope:Ft.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),cT=lT,uT=class extends On{static{s(this,"to")}static blotName="blockquote";static tagName="blockquote"},hT=class extends On{static{s(this,"eo")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(u){return this.tagName.indexOf(u.tagName)+1}};class xc extends ia{static{s(this,"no")}}xc.blotName="list-container",xc.tagName="OL";class Ec extends On{static{s(this,"ro")}static create(a){let h=super.create();return h.setAttribute("data-list",a),h}static formats(a){return a.getAttribute("data-list")||void 0}static register(){mt.register(xc)}constructor(a,h){super(a,h);let p=h.ownerDocument.createElement("span"),b=s(E=>{if(!a.isEnabled())return;let A=this.statics.formats(h,a);A==="checked"?(this.format("list","unchecked"),E.preventDefault()):A==="unchecked"&&(this.format("list","checked"),E.preventDefault())},"r");p.addEventListener("mousedown",b),p.addEventListener("touchstart",b),this.attachUI(p)}format(a,h){a===this.statics.blotName&&h?this.domNode.setAttribute("data-list",h):super.format(a,h)}}Ec.blotName="list",Ec.tagName="LI",xc.allowedChildren=[Ec],Ec.requiredContainer=xc;let Cp=class extends jr{static{s(this,"so")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(u){super.optimize(u),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},dT=class extends Cp{static{s(this,"io")}static blotName="italic";static tagName=["EM","I"]};class Eh extends jr{static{s(this,"oo")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(a){let h=super.create(a);return h.setAttribute("href",this.sanitize(a)),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}static formats(a){return a.getAttribute("href")}static sanitize(a){return Cb(a,this.PROTOCOL_WHITELIST)?a:this.SANITIZED_URL}format(a,h){a===this.statics.blotName&&h?this.domNode.setAttribute("href",this.constructor.sanitize(h)):super.format(a,h)}}function Cb(u,a){let h=document.createElement("a");h.href=u;let p=h.href.slice(0,h.href.indexOf(":"));return a.indexOf(p)>-1}s(Cb,"lo");let fT=class extends jr{static{s(this,"ao")}static blotName="script";static tagName=["SUB","SUP"];static create(u){return u==="super"?document.createElement("sup"):u==="sub"?document.createElement("sub"):super.create(u)}static formats(u){return u.tagName==="SUB"?"sub":u.tagName==="SUP"?"super":void 0}},pT=class extends Cp{static{s(this,"co")}static blotName="strike";static tagName=["S","STRIKE"]},mT=class extends jr{static{s(this,"uo")}static blotName="underline";static tagName="U"},gT=class extends yc{static{s(this,"ho")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(u){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let a=super.create(u);return typeof u=="string"&&(window.katex.render(u,a,{throwOnError:!1,errorColor:"#f00"}),a.setAttribute("data-value",u)),a}static value(u){return u.getAttribute("data-value")}html(){let{formula:u}=this.value();return`<span>${u}</span>`}},Lb=["alt","height","width"],vT=class extends Ti{static{s(this,"po")}static blotName="image";static tagName="IMG";static create(u){let a=super.create(u);return typeof u=="string"&&a.setAttribute("src",this.sanitize(u)),a}static formats(u){return Lb.reduce((a,h)=>(u.hasAttribute(h)&&(a[h]=u.getAttribute(h)),a),{})}static match(u){return/\.(jpe?g|gif|png)$/.test(u)||/^data:image\/.+;base64/.test(u)}static sanitize(u){return Cb(u,["http","https","data"])?u:"//:0"}static value(u){return u.getAttribute("src")}format(u,a){Lb.indexOf(u)>-1?a?this.domNode.setAttribute(u,a):this.domNode.removeAttribute(u):super.format(u,a)}},Nb=["height","width"],bT=class extends zi{static{s(this,"mo")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(u){let a=super.create(u);return a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen","true"),a.setAttribute("src",this.sanitize(u)),a}static formats(u){return Nb.reduce((a,h)=>(u.hasAttribute(h)&&(a[h]=u.getAttribute(h)),a),{})}static sanitize(u){return Eh.sanitize(u)}static value(u){return u.getAttribute("src")}format(u,a){Nb.indexOf(u)>-1?a?this.domNode.setAttribute(u,a):this.domNode.removeAttribute(u):super.format(u,a)}html(){let{video:u}=this.value();return`<a href="${u}">${u}</a>`}},Tc=new ji("code-token","hljs",{scope:Ft.INLINE});class Es extends jr{static{s(this,"yo")}static formats(a,h){for(;a!=null&&a!==h.domNode;){if(a.classList&&a.classList.contains(Li.className))return super.formats(a,h);a=a.parentNode}}constructor(a,h,p){super(a,h,p),Tc.add(this.domNode,p)}format(a,h){a!==Es.blotName?super.format(a,h):h?Tc.add(this.domNode,h):(Tc.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Tc.value(this.domNode)||this.unwrap()}}Es.blotName="code-token",Es.className="ql-token";class Er extends Li{static{s(this,"vo")}static create(a){let h=super.create(a);return typeof a=="string"&&h.setAttribute("data-language",a),h}static formats(a){return a.getAttribute("data-language")||"plain"}static register(){}format(a,h){a===this.statics.blotName&&h?this.domNode.setAttribute("data-language",h):super.format(a,h)}replaceWith(a,h){return this.formatAt(0,this.length(),Es.blotName,!1),super.replaceWith(a,h)}}class Sc extends ra{static{s(this,"xo")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(a,h){a===Er.blotName&&(this.forceNext=!0,this.children.forEach(p=>{p.format(a,h)}))}formatAt(a,h,p,b){p===Er.blotName&&(this.forceNext=!0),super.formatAt(a,h,p,b)}highlight(a){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.children.head==null)return;let p=`${Array.from(this.domNode.childNodes).filter(E=>E!==this.uiNode).map(E=>E.textContent).join(`
`)}
`,b=Er.formats(this.children.head.domNode);if(h||this.forceNext||this.cachedText!==p){if(p.trim().length>0||this.cachedText==null){let E=this.children.reduce((k,U)=>k.concat(vc(U,!1)),new Rt),A=a(p,b);E.diff(A).reduce((k,U)=>{let{retain:st,attributes:Et}=U;return st?(Et&&Object.keys(Et).forEach(Bt=>{[Er.blotName,Es.blotName].includes(Bt)&&this.formatAt(k,st,Bt,Et[Bt])}),k+st):k},0)}this.cachedText=p,this.forceNext=!1}}html(a,h){let[p]=this.children.find(a);return`<pre data-language="${p?Er.formats(p.domNode):"plain"}">
${ws(this.code(a,h))}
</pre>`}optimize(a){if(super.optimize(a),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let h=Er.formats(this.children.head.domNode);h!==this.uiNode.value&&(this.uiNode.value=h)}}}Sc.allowedChildren=[Er],Er.requiredContainer=Sc,Er.allowedChildren=[Es,ta,cr,Ai];class Ob extends on{static{s(this,"No")}static register(){mt.register(Es,!0),mt.register(Er,!0),mt.register(Sc,!0)}constructor(a,h){if(super(a,h),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((p,b)=>{let{key:E}=b;return p[E]=!0,p},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(mt.events.SCROLL_BLOT_MOUNT,a=>{if(!(a instanceof Sc))return;let h=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(p=>{let{key:b,label:E}=p,A=h.ownerDocument.createElement("option");A.textContent=E,A.setAttribute("value",b),h.appendChild(A)}),h.addEventListener("change",()=>{a.format(Er.blotName,h.value),this.quill.root.focus(),this.highlight(a,!0)}),a.uiNode==null&&(a.attachUI(h),a.children.head&&(h.value=Er.formats(a.children.head.domNode)))})}initTimer(){let a=null;this.quill.on(mt.events.SCROLL_OPTIMIZE,()=>{a&&clearTimeout(a),a=setTimeout(()=>{this.highlight(),a=null},this.options.interval)})}highlight(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(mt.sources.USER);let p=this.quill.getSelection();(a==null?this.quill.scroll.descendants(Sc):[a]).forEach(b=>{b.highlight(this.highlightBlot,h)}),this.quill.update(mt.sources.SILENT),p!=null&&this.quill.setSelection(p,mt.sources.SILENT)}highlightBlot(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(h=this.languages[h]?h:"plain",h==="plain")return ws(a).split(`
`).reduce((b,E,A)=>(A!==0&&b.insert(`
`,{[Li.blotName]:h}),b.insert(E)),new Rt);let p=this.quill.root.ownerDocument.createElement("div");return p.classList.add(Li.className),p.innerHTML=((b,E,A)=>{if(typeof b.versionString=="string"){let k=b.versionString.split(".")[0];if(parseInt(k,10)>=11)return b.highlight(A,{language:E}).value}return b.highlight(E,A).value})(this.options.hljs,h,a),Ep(this.quill.scroll,p,[(b,E)=>{let A=Tc.value(b);return A?E.compose(new Rt().retain(E.length(),{[Es.blotName]:A})):E}],[(b,E)=>b.data.split(`
`).reduce((A,k,U)=>(U!==0&&A.insert(`
`,{[Li.blotName]:h}),A.insert(k)),E)],new WeakMap)}}Ob.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Ur extends On{static{s(this,"wo")}static blotName="table";static tagName="TD";static create(a){let h=super.create();return a?h.setAttribute("data-row",a):h.setAttribute("data-row",Lp()),h}static formats(a){if(a.hasAttribute("data-row"))return a.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(a,h){a===Ur.blotName&&h?this.domNode.setAttribute("data-row",h):super.format(a,h)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class oa extends ia{static{s(this,"Eo")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let a=this.children.head.formats(),h=this.children.tail.formats(),p=this.next.children.head.formats(),b=this.next.children.tail.formats();return a.table===h.table&&a.table===p.table&&a.table===b.table}return!1}optimize(a){super.optimize(a),this.children.forEach(h=>{if(h.next==null)return;let p=h.formats(),b=h.next.formats();if(p.table!==b.table){let E=this.splitAfter(h);E&&E.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class io extends ia{static{s(this,"Ao")}static blotName="table-body";static tagName="TBODY"}class Th extends ia{static{s(this,"qo")}static blotName="table-container";static tagName="TABLE";balanceCells(){let a=this.descendants(oa),h=a.reduce((p,b)=>Math.max(b.children.length,p),0);a.forEach(p=>{new Array(h-p.children.length).fill(0).forEach(()=>{let b;p.children.head!=null&&(b=Ur.formats(p.children.head.domNode));let E=this.scroll.create(Ur.blotName,b);p.appendChild(E),E.optimize()})})}cells(a){return this.rows().map(h=>h.children.at(a))}deleteColumn(a){let[h]=this.descendant(io);h!=null&&h.children.head!=null&&h.children.forEach(p=>{let b=p.children.at(a);b?.remove()})}insertColumn(a){let[h]=this.descendant(io);h!=null&&h.children.head!=null&&h.children.forEach(p=>{let b=p.children.at(a),E=Ur.formats(p.children.head.domNode),A=this.scroll.create(Ur.blotName,E);p.insertBefore(A,b)})}insertRow(a){let[h]=this.descendant(io);if(h==null||h.children.head==null)return;let p=Lp(),b=this.scroll.create(oa.blotName);h.children.head.children.forEach(()=>{let A=this.scroll.create(Ur.blotName,p);b.appendChild(A)});let E=h.children.at(a);h.insertBefore(b,E)}rows(){let a=this.children.head;return a==null?[]:a.children.map(h=>h)}}function Lp(){return`row-${Math.random().toString(36).slice(2,6)}`}s(Lp,"ko"),Th.allowedChildren=[io],io.requiredContainer=Th,io.allowedChildren=[oa],oa.requiredContainer=io,oa.allowedChildren=[Ur],Ur.requiredContainer=oa;let yT=class extends on{static{s(this,"_o")}static register(){mt.register(Ur),mt.register(oa),mt.register(io),mt.register(Th)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Th).forEach(u=>{u.balanceCells()})}deleteColumn(){let[u,,a]=this.getTable();a!=null&&(u.deleteColumn(a.cellOffset()),this.quill.update(mt.sources.USER))}deleteRow(){let[,u]=this.getTable();u!=null&&(u.remove(),this.quill.update(mt.sources.USER))}deleteTable(){let[u]=this.getTable();if(u==null)return;let a=u.offset();u.remove(),this.quill.update(mt.sources.USER),this.quill.setSelection(a,mt.sources.SILENT)}getTable(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(u==null)return[null,null,null,-1];let[a,h]=this.quill.getLine(u.index);if(a==null||a.statics.blotName!==Ur.blotName)return[null,null,null,-1];let p=a.parent;return[p.parent.parent,p,a,h]}insertColumn(u){let a=this.quill.getSelection();if(!a)return;let[h,p,b]=this.getTable(a);if(b==null)return;let E=b.cellOffset();h.insertColumn(E+u),this.quill.update(mt.sources.USER);let A=p.rowOffset();u===0&&(A+=1),this.quill.setSelection(a.index+A,a.length,mt.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(u){let a=this.quill.getSelection();if(!a)return;let[h,p,b]=this.getTable(a);if(b==null)return;let E=p.rowOffset();h.insertRow(E+u),this.quill.update(mt.sources.USER),u>0?this.quill.setSelection(a,mt.sources.SILENT):this.quill.setSelection(a.index+p.children.length,a.length,mt.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(u,a){let h=this.quill.getSelection();if(h==null)return;let p=new Array(u).fill(0).reduce(b=>{let E=new Array(a).fill(`
`).join("");return b.insert(E,{table:Lp()})},new Rt().retain(h.index));this.quill.updateContents(p,mt.sources.USER),this.quill.setSelection(h.index,mt.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(mt.events.SCROLL_OPTIMIZE,u=>{u.some(a=>!!["TD","TR","TBODY","TABLE"].includes(a.target.tagName)&&(this.quill.once(mt.events.TEXT_CHANGE,(h,p,b)=>{b===mt.sources.USER&&this.balanceTables()}),!0))})}},Mb=l("quill:toolbar");class Np extends on{static{s(this,"Oo")}constructor(a,h){if(super(a,h),Array.isArray(this.options.container)){let p=document.createElement("div");p.setAttribute("role","toolbar"),function(b,E){Array.isArray(E[0])||(E=[E]),E.forEach(A=>{let k=document.createElement("span");k.classList.add("ql-formats"),A.forEach(U=>{if(typeof U=="string")kb(k,U);else{let st=Object.keys(U)[0],Et=U[st];Array.isArray(Et)?function(Bt,jt,$t){let Wt=document.createElement("select");Wt.classList.add(`ql-${jt}`),$t.forEach(ae=>{let rn=document.createElement("option");ae!==!1?rn.setAttribute("value",String(ae)):rn.setAttribute("selected","selected"),Wt.appendChild(rn)}),Bt.appendChild(Wt)}(k,st,Et):kb(k,st,Et)}}),b.appendChild(k)})}(p,this.options.container),a.container?.parentNode?.insertBefore(p,a.container),this.container=p}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(p=>{let b=this.options.handlers?.[p];b&&this.addHandler(p,b)}),Array.from(this.container.querySelectorAll("button, select")).forEach(p=>{this.attach(p)}),this.quill.on(mt.events.EDITOR_CHANGE,()=>{let[p]=this.quill.selection.getRange();this.update(p)})):Mb.error("Container required for toolbar",this.options)}addHandler(a,h){this.handlers[a]=h}attach(a){let h=Array.from(a.classList).find(b=>b.indexOf("ql-")===0);if(!h)return;if(h=h.slice(3),a.tagName==="BUTTON"&&a.setAttribute("type","button"),this.handlers[h]==null&&this.quill.scroll.query(h)==null)return void Mb.warn("ignoring attaching to nonexistent format",h,a);let p=a.tagName==="SELECT"?"change":"click";a.addEventListener(p,b=>{let E;if(a.tagName==="SELECT"){if(a.selectedIndex<0)return;let k=a.options[a.selectedIndex];E=!k.hasAttribute("selected")&&(k.value||!1)}else E=!a.classList.contains("ql-active")&&(a.value||!a.hasAttribute("value")),b.preventDefault();this.quill.focus();let[A]=this.quill.selection.getRange();if(this.handlers[h]!=null)this.handlers[h].call(this,E);else if(this.quill.scroll.query(h).prototype instanceof Ti){if(E=prompt(`Enter ${h}`),!E)return;this.quill.updateContents(new Rt().retain(A.index).delete(A.length).insert({[h]:E}),mt.sources.USER)}else this.quill.format(h,E,mt.sources.USER);this.update(A)}),this.controls.push([h,a])}update(a){let h=a==null?{}:this.quill.getFormat(a);this.controls.forEach(p=>{let[b,E]=p;if(E.tagName==="SELECT"){let A=null;if(a==null)A=null;else if(h[b]==null)A=E.querySelector("option[selected]");else if(!Array.isArray(h[b])){let k=h[b];typeof k=="string"&&(k=k.replace(/"/g,'\\"')),A=E.querySelector(`option[value="${k}"]`)}A==null?(E.value="",E.selectedIndex=-1):A.selected=!0}else if(a==null)E.classList.remove("ql-active"),E.setAttribute("aria-pressed","false");else if(E.hasAttribute("value")){let A=h[b],k=A===E.getAttribute("value")||A!=null&&A.toString()===E.getAttribute("value")||A==null&&!E.getAttribute("value");E.classList.toggle("ql-active",k),E.setAttribute("aria-pressed",k.toString())}else{let A=h[b]!=null;E.classList.toggle("ql-active",A),E.setAttribute("aria-pressed",A.toString())}})}}function kb(u,a,h){let p=document.createElement("button");p.setAttribute("type","button"),p.classList.add(`ql-${a}`),p.setAttribute("aria-pressed","false"),h!=null?(p.value=h,p.setAttribute("aria-label",`${a}: ${h}`)):p.setAttribute("aria-label",a),u.appendChild(p)}s(kb,"To"),Np.DEFAULTS={},Np.DEFAULTS={container:null,handlers:{clean(){let u=this.quill.getSelection();if(u!=null)if(u.length===0){let a=this.quill.getFormat();Object.keys(a).forEach(h=>{this.quill.scroll.query(h,Ft.INLINE)!=null&&this.quill.format(h,!1,mt.sources.USER)})}else this.quill.removeFormat(u.index,u.length,mt.sources.USER)},direction(u){let{align:a}=this.quill.getFormat();u==="rtl"&&a==null?this.quill.format("align","right",mt.sources.USER):u||a!=="right"||this.quill.format("align",!1,mt.sources.USER),this.quill.format("direction",u,mt.sources.USER)},indent(u){let a=this.quill.getSelection(),h=this.quill.getFormat(a),p=parseInt(h.indent||0,10);if(u==="+1"||u==="-1"){let b=u==="+1"?1:-1;h.direction==="rtl"&&(b*=-1),this.quill.format("indent",p+b,mt.sources.USER)}},link(u){u===!0&&(u=prompt("Enter link URL:")),this.quill.format("link",u,mt.sources.USER)},list(u){let a=this.quill.getSelection(),h=this.quill.getFormat(a);u==="check"?h.list==="checked"||h.list==="unchecked"?this.quill.format("list",!1,mt.sources.USER):this.quill.format("list","unchecked",mt.sources.USER):this.quill.format("list",u,mt.sources.USER)}}};let Db='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Ac={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:Db,"code-block":Db,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},Ib=0;function Pb(u,a){u.setAttribute(a,`${u.getAttribute(a)!=="true"}`)}s(Pb,"Ro");let Sh=class{static{s(this,"Io")}constructor(u){this.select=u,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),a.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Pb(this.label,"aria-expanded"),Pb(this.options,"aria-hidden")}buildItem(u){let a=document.createElement("span");a.tabIndex="0",a.setAttribute("role","button"),a.classList.add("ql-picker-item");let h=u.getAttribute("value");return h&&a.setAttribute("data-value",h),u.textContent&&a.setAttribute("data-label",u.textContent),a.addEventListener("click",()=>{this.selectItem(a,!0)}),a.addEventListener("keydown",p=>{switch(p.key){case"Enter":this.selectItem(a,!0),p.preventDefault();break;case"Escape":this.escape(),p.preventDefault()}}),a}buildLabel(){let u=document.createElement("span");return u.classList.add("ql-picker-label"),u.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',u.tabIndex="0",u.setAttribute("role","button"),u.setAttribute("aria-expanded","false"),this.container.appendChild(u),u}buildOptions(){let u=document.createElement("span");u.classList.add("ql-picker-options"),u.setAttribute("aria-hidden","true"),u.tabIndex="-1",u.id=`ql-picker-options-${Ib}`,Ib+=1,this.label.setAttribute("aria-controls",u.id),this.options=u,Array.from(this.select.options).forEach(a=>{let h=this.buildItem(a);u.appendChild(h),a.selected===!0&&this.selectItem(h)}),this.container.appendChild(u)}buildPicker(){Array.from(this.select.attributes).forEach(u=>{this.container.setAttribute(u.name,u.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(u){let a=arguments.length>1&&arguments[1]!==void 0&&arguments[1],h=this.container.querySelector(".ql-selected");u!==h&&(h?.classList.remove("ql-selected"),u!=null&&(u.classList.add("ql-selected"),this.select.selectedIndex=Array.from(u.parentNode.children).indexOf(u),u.hasAttribute("data-value")?this.label.setAttribute("data-value",u.getAttribute("data-value")):this.label.removeAttribute("data-value"),u.hasAttribute("data-label")?this.label.setAttribute("data-label",u.getAttribute("data-label")):this.label.removeAttribute("data-label"),a&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let u;if(this.select.selectedIndex>-1){let h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];u=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);let a=u!=null&&u!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",a)}},Rb=class extends Sh{static{s(this,"Mo")}constructor(u,a){super(u),this.label.innerHTML=a,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(h=>{h.classList.add("ql-primary")})}buildItem(u){let a=super.buildItem(u);return a.style.backgroundColor=u.getAttribute("value")||"",a}selectItem(u,a){super.selectItem(u,a);let h=this.label.querySelector(".ql-color-label"),p=u&&u.getAttribute("data-value")||"";h&&(h.tagName==="line"?h.style.stroke=p:h.style.fill=p)}},qb=class extends Sh{static{s(this,"Bo")}constructor(u,a){super(u),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(h=>{h.innerHTML=a[h.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(u,a){super.selectItem(u,a);let h=u||this.defaultItem;if(h!=null){if(this.label.innerHTML===h.innerHTML)return;this.label.innerHTML=h.innerHTML}}},Bb=class{static{s(this,"Uo")}constructor(u,a){this.quill=u,this.boundsContainer=a||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(h=>{let{overflowY:p}=getComputedStyle(h,null);return p!=="visible"&&p!=="clip"})(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(u){let a=u.left+u.width/2-this.root.offsetWidth/2,h=u.bottom+this.quill.root.scrollTop;this.root.style.left=`${a}px`,this.root.style.top=`${h}px`,this.root.classList.remove("ql-flip");let p=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),E=0;if(b.right>p.right&&(E=p.right-b.right,this.root.style.left=`${a+E}px`),b.left<p.left&&(E=p.left-b.left,this.root.style.left=`${a+E}px`),b.bottom>p.bottom){let A=b.bottom-b.top,k=u.bottom-u.top+A;this.root.style.top=h-k+"px",this.root.classList.add("ql-flip")}return E}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},_T=[!1,"center","right","justify"],wT=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],xT=[!1,"serif","monospace"],ET=["1","2","3",!1],TT=["small",!1,"large","huge"];class Cc extends ea{static{s(this,"$o")}constructor(a,h){super(a,h);let p=s(b=>{document.body.contains(a.root)?(this.tooltip==null||this.tooltip.root.contains(b.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(E=>{E.container.contains(b.target)||E.close()})):document.body.removeEventListener("click",p)},"n");a.emitter.listenDOM("click",document.body,p)}addModule(a){let h=super.addModule(a);return a==="toolbar"&&this.extendToolbar(h),h}buildButtons(a,h){Array.from(a).forEach(p=>{(p.getAttribute("class")||"").split(/\s+/).forEach(b=>{if(b.startsWith("ql-")&&(b=b.slice(3),h[b]!=null))if(b==="direction")p.innerHTML=h[b][""]+h[b].rtl;else if(typeof h[b]=="string")p.innerHTML=h[b];else{let E=p.value||"";E!=null&&h[b][E]&&(p.innerHTML=h[b][E])}})})}buildPickers(a,h){this.pickers=Array.from(a).map(p=>{if(p.classList.contains("ql-align")&&(p.querySelector("option")==null&&Lc(p,_T),typeof h.align=="object"))return new qb(p,h.align);if(p.classList.contains("ql-background")||p.classList.contains("ql-color")){let b=p.classList.contains("ql-background")?"background":"color";return p.querySelector("option")==null&&Lc(p,wT,b==="background"?"#ffffff":"#000000"),new Rb(p,h[b])}return p.querySelector("option")==null&&(p.classList.contains("ql-font")?Lc(p,xT):p.classList.contains("ql-header")?Lc(p,ET):p.classList.contains("ql-size")&&Lc(p,TT)),new Sh(p)}),this.quill.on(g.events.EDITOR_CHANGE,()=>{this.pickers.forEach(p=>{p.update()})})}}Cc.DEFAULTS=ni({},ea.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let u=this.container.querySelector("input.ql-image[type=file]");u==null&&(u=document.createElement("input"),u.setAttribute("type","file"),u.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),u.classList.add("ql-image"),u.addEventListener("change",()=>{let a=this.quill.getSelection(!0);this.quill.uploader.upload(a,u.files),u.value=""}),this.container.appendChild(u)),u.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class jb extends Bb{static{s(this,"Vo")}constructor(a,h){super(a,h),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",a=>{a.key==="Enter"?(this.save(),a.preventDefault()):a.key==="Escape"&&(this.cancel(),a.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;h!=null?this.textbox.value=h:a!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let p=this.quill.getBounds(this.quill.selection.savedRange);p!=null&&this.position(p),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${a}`)||""),this.root.setAttribute("data-mode",a)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:a}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:h}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",a,g.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",a,g.sources.USER)),this.quill.root.scrollTop=h;break}case"video":a=function(h){let p=h.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||h.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return p?`${p[1]||"https"}://www.youtube.com/embed/${p[2]}?showinfo=0`:(p=h.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${p[1]||"https"}://player.vimeo.com/video/${p[2]}/`:h}(a);case"formula":{if(!a)break;let h=this.quill.getSelection(!0);if(h!=null){let p=h.index+h.length;this.quill.insertEmbed(p,this.root.getAttribute("data-mode"),a,g.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(p+1," ",g.sources.USER),this.quill.setSelection(p+2,g.sources.USER)}break}}this.textbox.value="",this.hide()}}function Lc(u,a){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];a.forEach(p=>{let b=document.createElement("option");p===h?b.setAttribute("selected","selected"):b.setAttribute("value",String(p)),u.appendChild(b)})}s(Lc,"Ko");let ST=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class AT extends jb{static{s(this,"Zo")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(a,h){super(a,h),this.quill.on(g.events.EDITOR_CHANGE,(p,b,E,A)=>{if(p===g.events.SELECTION_CHANGE)if(b!=null&&b.length>0&&A===g.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let k=this.quill.getLines(b.index,b.length);if(k.length===1){let U=this.quill.getBounds(b);U!=null&&this.position(U)}else{let U=k[k.length-1],st=this.quill.getIndex(U),Et=Math.min(U.length()-1,b.index+b.length-st),Bt=this.quill.getBounds(new C(st,Et));Bt!=null&&this.position(Bt)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(g.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let a=this.quill.getSelection();if(a!=null){let h=this.quill.getBounds(a);h!=null&&this.position(h)}},1)})}cancel(){this.show()}position(a){let h=super.position(a),p=this.root.querySelector(".ql-tooltip-arrow");return p.style.marginLeft="",h!==0&&(p.style.marginLeft=-1*h-p.offsetWidth/2+"px"),h}}class Fb extends Cc{static{s(this,"Go")}constructor(a,h){h.modules.toolbar!=null&&h.modules.toolbar.container==null&&(h.modules.toolbar.container=ST),super(a,h),this.quill.container.classList.add("ql-bubble")}extendToolbar(a){this.tooltip=new AT(this.quill,this.options.bounds),a.container!=null&&(this.tooltip.root.appendChild(a.container),this.buildButtons(a.container.querySelectorAll("button"),Ac),this.buildPickers(a.container.querySelectorAll("select"),Ac))}}Fb.DEFAULTS=ni({},Cc.DEFAULTS,{modules:{toolbar:{handlers:{link(u){u?this.quill.theme.tooltip.edit():this.quill.format("link",!1,mt.sources.USER)}}}}});let CT=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class LT extends jb{static{s(this,"Qo")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",a=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),a.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",a=>{if(this.linkRange!=null){let h=this.linkRange;this.restoreFocus(),this.quill.formatText(h,"link",!1,g.sources.USER),delete this.linkRange}a.preventDefault(),this.hide()}),this.quill.on(g.events.SELECTION_CHANGE,(a,h,p)=>{if(a!=null){if(a.length===0&&p===g.sources.USER){let[b,E]=this.quill.scroll.descendant(Eh,a.index);if(b!=null){this.linkRange=new C(a.index-E,b.length());let A=Eh.formats(b.domNode);this.preview.textContent=A,this.preview.setAttribute("href",A),this.show();let k=this.quill.getBounds(this.linkRange);return void(k!=null&&this.position(k))}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class Hb extends Cc{static{s(this,"Yo")}constructor(a,h){h.modules.toolbar!=null&&h.modules.toolbar.container==null&&(h.modules.toolbar.container=CT),super(a,h),this.quill.container.classList.add("ql-snow")}extendToolbar(a){a.container!=null&&(a.container.classList.add("ql-snow"),this.buildButtons(a.container.querySelectorAll("button"),Ac),this.buildPickers(a.container.querySelectorAll("select"),Ac),this.tooltip=new LT(this.quill,this.options.bounds),a.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(h,p)=>{a.handlers.link.call(a,!p.format.link)}))}}Hb.DEFAULTS=ni({},Cc.DEFAULTS,{modules:{toolbar:{handlers:{link(u){if(u){let a=this.quill.getSelection();if(a==null||a.length===0)return;let h=this.quill.getText(a);/^\S+@\S+\.\S+$/.test(h)&&h.indexOf("mailto:")!==0&&(h=`mailto:${h}`);let{tooltip:p}=this.quill.theme;p.edit("link",h)}else this.quill.format("link",!1,mt.sources.USER)}}}}});let NT=Hb;Ap.register({"attributors/attribute/direction":hb,"attributors/class/align":lb,"attributors/class/background":zE,"attributors/class/color":HE,"attributors/class/direction":db,"attributors/class/font":mb,"attributors/class/size":vb,"attributors/style/align":cb,"attributors/style/background":bp,"attributors/style/color":vp,"attributors/style/direction":fb,"attributors/style/font":gb,"attributors/style/size":bb},!0),Ap.register({"formats/align":lb,"formats/direction":db,"formats/indent":cT,"formats/background":bp,"formats/color":vp,"formats/font":mb,"formats/size":vb,"formats/blockquote":uT,"formats/code-block":Li,"formats/header":hT,"formats/list":Ec,"formats/bold":Cp,"formats/code":yp,"formats/italic":dT,"formats/link":Eh,"formats/script":fT,"formats/strike":pT,"formats/underline":mT,"formats/formula":gT,"formats/image":vT,"formats/video":bT,"modules/syntax":Ob,"modules/table":yT,"modules/toolbar":Np,"themes/bubble":Fb,"themes/snow":NT,"ui/icons":Ac,"ui/picker":Sh,"ui/icon-picker":qb,"ui/color-picker":Rb,"ui/tooltip":Bb},!0);let OT=Ap}},e={};function t(i){var o=e[i];if(o!==void 0)return o.exports;var c=e[i]={id:i,loaded:!1,exports:{}};return n[i].call(c.exports,c,c.exports,t),c.loaded=!0,c.exports}return s(t,"n"),t.d=(i,o)=>{for(var c in o)t.o(o,c)&&!t.o(i,c)&&Object.defineProperty(i,c,{enumerable:!0,get:o[c]})},t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),t.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.nmd=i=>(i.paths=[],i.children||(i.children=[]),i),t(190)})())});var um={};Mp(um,{FetchEnctype:()=>oo,FetchMethod:()=>ur,FetchRequest:()=>lo,FetchResponse:()=>Xa,FrameElement:()=>Vr,FrameLoadingStyle:()=>la,FrameRenderer:()=>tl,PageRenderer:()=>ha,PageSnapshot:()=>Sr,StreamActions:()=>cm,StreamElement:()=>Bh,StreamSourceElement:()=>jh,cache:()=>cy,clearCache:()=>py,connectStreamSource:()=>Dc,disconnectStreamSource:()=>Ic,fetch:()=>am,fetchEnctypeFromString:()=>sy,fetchMethodFromString:()=>Fh,isSafe:()=>Hh,navigator:()=>uy,registerAdapter:()=>hy,renderStreamMessage:()=>fy,session:()=>mn,setConfirmMethod:()=>gy,setFormMode:()=>vy,setProgressBarDelay:()=>my,start:()=>lm,visit:()=>dy});(function(n){if(typeof n.requestSubmit=="function")return;n.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,o){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==o||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}s(e,"validateSubmitter");function t(i,o,c){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+o+".",c)}s(t,"raise")})(HTMLFormElement.prototype);var Yb=new WeakMap;function BT(n){let e=n instanceof Element?n:n instanceof Node?n.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}s(BT,"findSubmitterFromClickTarget");function jT(n){let e=BT(n.target);e&&e.form&&Yb.set(e.form,e)}s(jT,"clickCaptured");(function(){if("submitter"in Event.prototype)return;let n=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))n=e;else return}addEventListener("click",jT,!0),Object.defineProperty(n,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Yb.get(this.target)}})})();var la={eager:"eager",lazy:"lazy"},Vr=class n extends HTMLElement{static{s(this,"FrameElement")}static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new n.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get loading(){return FT(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function FT(n){switch(n.toLowerCase()){case"lazy":return la.lazy;default:return la.eager}}s(FT,"frameLoadingStyleFromString");function Qn(n){return new URL(n.toString(),document.baseURI)}s(Qn,"expandURL");function ca(n){let e;if(n.hash)return n.hash.slice(1);if(e=n.href.match(/#(.*)$/))return e[1]}s(ca,"getAnchor");function sm(n,e){let t=e?.getAttribute("formaction")||n.getAttribute("action")||n.action;return Qn(t)}s(sm,"getAction$1");function HT(n){return(ZT(n).match(/\.[^.]*$/)||[])[0]||""}s(HT,"getExtension");function zT(n){return!!HT(n).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}s(zT,"isHTML");function UT(n,e){let t=$T(e);return n.href===Qn(t).href||n.href.startsWith(t)}s(UT,"isPrefixedBy");function so(n,e){return UT(n,e)&&zT(n)}s(so,"locationIsVisitable");function kp(n){let e=ca(n);return e!=null?n.href.slice(0,-(e.length+1)):n.href}s(kp,"getRequestURL");function Ch(n){return kp(n)}s(Ch,"toCacheKey");function WT(n,e){return Qn(n).href==Qn(e).href}s(WT,"urlsAreEqual");function VT(n){return n.pathname.split("/").slice(1)}s(VT,"getPathComponents");function ZT(n){return VT(n).slice(-1)[0]}s(ZT,"getLastPathComponent");function $T(n){return KT(n.origin+n.pathname)}s($T,"getPrefix");function KT(n){return n.endsWith("/")?n:n+"/"}s(KT,"addTrailingSlash");var Xa=class{static{s(this,"FetchResponse")}constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Qn(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function Nc(n){if(n.getAttribute("data-turbo-eval")=="false")return n;{let e=document.createElement("script"),t=Ja("csp-nonce");return t&&(e.nonce=t),e.textContent=n.textContent,e.async=!1,YT(e,n),e}}s(Nc,"activateScriptElement");function YT(n,e){for(let{name:t,value:i}of e.attributes)n.setAttribute(t,i)}s(YT,"copyElementAttributes");function GT(n){let e=document.createElement("template");return e.innerHTML=n,e.content}s(GT,"createDocumentFragment");function yn(n,{target:e,cancelable:t,detail:i}={}){let o=new CustomEvent(n,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(o):document.documentElement.dispatchEvent(o),o}s(yn,"dispatch");function Ka(){return document.visibilityState==="hidden"?Xb():Gb()}s(Ka,"nextRepaint");function Gb(){return new Promise(n=>requestAnimationFrame(()=>n()))}s(Gb,"nextAnimationFrame");function Xb(){return new Promise(n=>setTimeout(()=>n(),0))}s(Xb,"nextEventLoopTick");function XT(){return Promise.resolve()}s(XT,"nextMicrotask");function Jb(n=""){return new DOMParser().parseFromString(n,"text/html")}s(Jb,"parseHTMLDocument");function Qb(n,...e){let t=JT(n,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),o=i?i[0].length:0;return t.map(c=>c.slice(o)).join(`
`)}s(Qb,"unindent");function JT(n,e){return n.reduce((t,i,o)=>{let c=e[o]==null?"":e[o];return t+i+c},"")}s(JT,"interpolate");function ao(){return Array.from({length:36}).map((n,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}s(ao,"uuid");function Nh(n,...e){for(let t of e.map(i=>i?.getAttribute(n)))if(typeof t=="string")return t;return null}s(Nh,"getAttribute");function QT(n,...e){return e.some(t=>t&&t.hasAttribute(n))}s(QT,"hasAttribute");function Oh(...n){for(let e of n)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}s(Oh,"markAsBusy");function Mh(...n){for(let e of n)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}s(Mh,"clearBusyState");function tS(n,e=2e3){return new Promise(t=>{let i=s(()=>{n.removeEventListener("error",i),n.removeEventListener("load",i),t()},"onComplete");n.addEventListener("load",i,{once:!0}),n.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}s(tS,"waitForLoad");function ty(n){switch(n){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}s(ty,"getHistoryMethodForAction");function eS(n){return n=="advance"||n=="replace"||n=="restore"}s(eS,"isAction");function ua(...n){let e=Nh("data-turbo-action",...n);return eS(e)?e:null}s(ua,"getVisitAction");function ey(n){return document.querySelector(`meta[name="${n}"]`)}s(ey,"getMetaElement");function Ja(n){let e=ey(n);return e&&e.content}s(Ja,"getMetaContent");function nS(n,e){let t=ey(n);return t||(t=document.createElement("meta"),t.setAttribute("name",n),document.head.appendChild(t)),t.setAttribute("content",e),t}s(nS,"setMetaContent");function Ya(n,e){if(n instanceof Element)return n.closest(e)||Ya(n.assignedSlot||n.getRootNode()?.host,e)}s(Ya,"findClosestRecursively");function om(n){return!!n&&n.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof n.focus=="function"}s(om,"elementIsFocusable");function ny(n){return Array.from(n.querySelectorAll("[autofocus]")).find(om)}s(ny,"queryAutofocusableElement");async function iS(n,e){let t=e();n(),await Gb();let i=e();return[t,i]}s(iS,"around");function rS(n){if(n.hasAttribute("target")){for(let e of document.getElementsByName(n.target))if(e instanceof HTMLIFrameElement)return!1}return!0}s(rS,"doesNotTargetIFrame");function sS(n){return Ya(n,"a[href]:not([target^=_]):not([download])")}s(sS,"findLinkFromClickTarget");function iy(n){return Qn(n.getAttribute("href")||"")}s(iy,"getLocationForLink");function oS(n,e){let t=null;return(...i)=>{let o=s(()=>n.apply(this,i),"callback");clearTimeout(t),t=setTimeout(o,e)}}s(oS,"debounce");var Dp=class extends Set{static{s(this,"LimitedSet")}constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let i=this.values().next().value;this.delete(i)}super.add(e)}},ry=new Dp(20),aS=window.fetch;function am(n,e={}){let t=new Headers(e.headers||{}),i=ao();return ry.add(i),t.append("X-Turbo-Request-Id",i),aS(n,{...e,headers:t})}s(am,"fetchWithTurboHeaders");function Fh(n){switch(n.toLowerCase()){case"get":return ur.get;case"post":return ur.post;case"put":return ur.put;case"patch":return ur.patch;case"delete":return ur.delete}}s(Fh,"fetchMethodFromString");var ur={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function sy(n){switch(n.toLowerCase()){case oo.multipart:return oo.multipart;case oo.plain:return oo.plain;default:return oo.urlEncoded}}s(sy,"fetchEnctypeFromString");var oo={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},lo=class{static{s(this,"FetchRequest")}abortController=new AbortController;#t=e=>{};constructor(e,t,i,o=new URLSearchParams,c=null,d=oo.urlEncoded){let[m,v]=Wb(Qn(i),t,o,d);this.delegate=e,this.url=m,this.target=c,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t,headers:{...this.defaultHeaders},body:v,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=d}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=Fh(e)||ur.get;this.url.search="";let[o,c]=Wb(this.url,i,t,this.enctype);this.url=o,this.fetchOptions.body=c,this.fetchOptions.method=i}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#e(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=am(this.url.href,e);let i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw this.#n(i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new Xa(e);return yn("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Hh(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#e(e){let t=new Promise(o=>this.#t=o),i=yn("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#t},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await t,i}#n(e){return!yn("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function Hh(n){return Fh(n)==ur.get}s(Hh,"isSafe");function Wb(n,e,t,i){let o=Array.from(t).length>0?new URLSearchParams(oy(t)):n.searchParams;return Hh(e)?[lS(n,o),null]:i==oo.urlEncoded?[n,o]:[n,t]}s(Wb,"buildResourceAndBody");function oy(n){let e=[];for(let[t,i]of n)i instanceof File||e.push([t,i]);return e}s(oy,"entriesExcludingFiles");function lS(n,e){let t=new URLSearchParams(oy(e));return n.search=t.toString(),n}s(lS,"mergeIntoURLSearchParams");var Ip=class{static{s(this,"AppearanceObserver")}started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},co=class{static{s(this,"StreamMessage")}static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(GT(e)):e}constructor(e){this.fragment=cS(e)}};function cS(n){for(let e of n.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let i of t.templateElement.content.querySelectorAll("script"))i.replaceWith(Nc(i));e.replaceWith(t)}return n}s(cS,"importStreamElements");var uS=100,Pp=class{static{s(this,"PrefetchCache")}#t=null;#e=null;get(e){if(this.#e&&this.#e.url===e&&this.#e.expire>Date.now())return this.#e.request}setLater(e,t,i){this.clear(),this.#t=setTimeout(()=>{t.perform(),this.set(e,t,i),this.#t=null},uS)}set(e,t,i){this.#e={url:e,request:t,expire:new Date(new Date().getTime()+i)}}clear(){this.#t&&clearTimeout(this.#t),this.#e=null}},hS=10*1e3,$a=new Pp,Za={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},Oc=class n{static{s(this,"FormSubmission")}state=Za.initialized;static confirmMethod(e,t,i){return Promise.resolve(confirm(e))}constructor(e,t,i,o=!1){let c=vS(t,i),d=gS(mS(t,i),c),m=dS(t,i),v=bS(t,i);this.delegate=e,this.formElement=t,this.submitter=i,this.fetchRequest=new lo(this,c,d,m,t,v),this.mustRedirect=o}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=Qn(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=Za,i=Nh("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await n.confirmMethod(i,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=Za;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=fS(Ja("csrf-param"))||Ja("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(co.contentType)}requestStarted(e){this.state=Za.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),Oh(this.formElement),yn("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){$a.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if($a.clear(),this.requestMustRedirect(e)&&pS(t)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=Za.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=Za.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),Mh(this.formElement),yn("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||QT("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function dS(n,e){let t=new FormData(n),i=e?.getAttribute("name"),o=e?.getAttribute("value");return i&&t.append(i,o||""),t}s(dS,"buildFormData");function fS(n){if(n!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(n));if(t){let i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}s(fS,"getCookieValue");function pS(n){return n.statusCode==200&&!n.redirected}s(pS,"responseSucceededWithoutRedirect");function mS(n,e){let t=typeof n.action=="string"?n.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":n.getAttribute("action")||t||""}s(mS,"getFormAction");function gS(n,e){let t=Qn(n);return Hh(e)&&(t.search=""),t}s(gS,"getAction");function vS(n,e){let t=e?.getAttribute("formmethod")||n.getAttribute("method")||"";return Fh(t.toLowerCase())||ur.get}s(vS,"getMethod");function bS(n,e){return sy(e?.getAttribute("formenctype")||n.enctype)}s(bS,"getEnctype");var Qa=class{static{s(this,"Snapshot")}constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return ny(this.element)}get permanentElements(){return ly(this.element)}getPermanentElementById(e){return ay(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let i of this.permanentElements){let{id:o}=i,c=e.getPermanentElementById(o);c&&(t[o]=[i,c])}return t}};function ay(n,e){return n.querySelector(`#${e}[data-turbo-permanent]`)}s(ay,"getPermanentElementById");function ly(n){return n.querySelectorAll("[id][data-turbo-permanent]")}s(ly,"queryPermanentElementsAll");var Mc=class{static{s(this,"FormSubmitObserver")}started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,i=e.submitter||void 0;t&&yS(t,i)&&_S(t,i)&&this.delegate.willSubmitForm(t,i)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,i))}}};function yS(n,e){return(e?.getAttribute("formmethod")||n.getAttribute("method"))!="dialog"}s(yS,"submissionDoesNotDismissDialog");function _S(n,e){if(e?.hasAttribute("formtarget")||n.hasAttribute("target")){let t=e?.getAttribute("formtarget")||n.target;for(let i of document.getElementsByName(t))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}s(_S,"submissionDoesNotTargetIFrame");var kh=class{static{s(this,"View")}#t=e=>{};#e=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(ca(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:i,willRender:o,newSnapshot:c}=e,d=o;if(i)try{this.renderPromise=new Promise(T=>this.#t=T),this.renderer=e,await this.prepareToRenderSnapshot(e);let m=new Promise(T=>this.#e=T),v={resume:this.#e,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(c,v)||await m,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(c,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#t(void 0),delete this.renderPromise}else d&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},Rp=class extends kh{static{s(this,"FrameView")}missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Qa(this.element)}},Dh=class{static{s(this,"LinkInterceptor")}constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};respondsToEventTarget(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}},Ih=class{static{s(this,"LinkClickObserver")}started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,i=sS(t);if(i&&rS(i)){let o=iy(i);this.delegate.willFollowLinkToLocation(i,o,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(i,o))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},Ph=class{static{s(this,"FormLinkClickObserver")}constructor(e,t){this.delegate=e,this.linkInterceptor=new Ih(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let i=document.createElement("form"),o="hidden";for(let[S,O]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:o,name:S,value:O}));let c=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",c.href),i.setAttribute("hidden","");let d=e.getAttribute("data-turbo-method");d&&i.setAttribute("method",d);let m=e.getAttribute("data-turbo-frame");m&&i.setAttribute("data-turbo-frame",m);let v=ua(e);v&&i.setAttribute("data-turbo-action",v);let _=e.getAttribute("data-turbo-confirm");_&&i.setAttribute("data-turbo-confirm",_),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},Rh=class{static{s(this,"Bardo")}static async preservingPermanentElements(e,t,i){let o=new this(e,t);o.enter(),await i(),o.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=wS(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function wS(n){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",n.id),e}s(wS,"createPlaceholderForPermanentElement");var kc=class{static{s(this,"Renderer")}#t=null;constructor(e,t,i,o,c=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=o,this.willRender=c,this.renderElement=i,this.promise=new Promise((d,m)=>this.resolvingFunctions={resolve:d,reject:m})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await Rh.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}enteringBardo(e){this.#t||e.contains(this.currentSnapshot.activeElement)&&(this.#t=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#t)&&this.#t instanceof HTMLElement&&(this.#t.focus(),this.#t=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},tl=class extends kc{static{s(this,"FrameRenderer")}static renderElement(e,t){let i=document.createRange();i.selectNodeContents(e),i.deleteContents();let o=t,c=o.ownerDocument?.createRange();c&&(c.selectNodeContents(o),e.appendChild(c.extractContents()))}constructor(e,t,i,o,c,d=!0){super(t,i,o,c,d),this.delegate=e}get shouldRender(){return!0}async render(){await Ka(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Ka(),this.focusFirstAutofocusableElement(),await Ka(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=xS(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=ES(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=Nc(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function xS(n,e){return n=="end"||n=="start"||n=="center"||n=="nearest"?n:e}s(xS,"readScrollLogicalPosition");function ES(n,e){return n=="auto"||n=="smooth"?n:e}s(ES,"readScrollBehavior");var qp=class n{static{s(this,"ProgressBar")}static animationDuration=300;static get defaultCSS(){return Qb`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${n.animationDuration}ms ease-out,
          opacity ${n.animationDuration/2}ms ${n.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,n.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,n.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=n.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return Ja("csp-nonce")}},Bp=class extends Qa{static{s(this,"HeadSnapshot")}detailsByOuterHTML=this.children.filter(e=>!CS(e)).map(e=>OS(e)).reduce((e,t)=>{let{outerHTML:i}=t,o=i in e?e[i]:{type:TS(t),tracked:SS(t),elements:[]};return{...e,[i]:{...o,elements:[...o.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in t.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==e).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:i,tracked:o,elements:c}=this.detailsByOuterHTML[t];return i==null&&!o?[...e,...c]:c.length>1?[...e,...c.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{let{elements:[o]}=this.detailsByOuterHTML[i];return NS(o,e)?o:t},void 0|void 0)}};function TS(n){if(AS(n))return"script";if(LS(n))return"stylesheet"}s(TS,"elementType");function SS(n){return n.getAttribute("data-turbo-track")=="reload"}s(SS,"elementIsTracked");function AS(n){return n.localName=="script"}s(AS,"elementIsScript");function CS(n){return n.localName=="noscript"}s(CS,"elementIsNoscript");function LS(n){let e=n.localName;return e=="style"||e=="link"&&n.getAttribute("rel")=="stylesheet"}s(LS,"elementIsStylesheet");function NS(n,e){return n.localName=="meta"&&n.getAttribute("name")==e}s(NS,"elementIsMetaElementWithName");function OS(n){return n.hasAttribute("nonce")&&n.setAttribute("nonce",""),n}s(OS,"elementWithoutNonce");var Sr=class n extends Qa{static{s(this,"PageSnapshot")}static fromHTMLString(e=""){return this.fromDocument(Jb(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:i}){return new this(e,t,new Bp(i))}constructor(e,t,i){super(t),this.documentElement=e,this.headSnapshot=i}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(let[o,c]of t.entries()){let d=i[o];for(let m of d.selectedOptions)m.selected=!1;for(let m of c.selectedOptions)d.options[m.index].selected=!0}for(let o of e.querySelectorAll('input[type="password"]'))o.value="";return new n(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return Qn(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},jp=class{static{s(this,"ViewTransitioner")}#t=!1;#e=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#t?(this.#t=!0,this.#e=this.#e.then(async()=>{await document.startViewTransition(t).finished})):this.#e=this.#e.then(t),this.#e}get viewTransitionsAvailable(){return document.startViewTransition}},MS={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},Lh={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},Ts={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Ga={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},kS={advance:"forward",restore:"back",replace:"none"},Fp=class{static{s(this,"Visit")}identifier=ao();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=Ts.initialized;viewTransitioner=new jp;constructor(e,t,i,o={}){this.delegate=e,this.location=t,this.restorationIdentifier=i||ao();let{action:c,historyChanged:d,referrer:m,snapshot:v,snapshotHTML:_,response:T,visitCachedSnapshot:S,willRender:O,updateHistory:M,shouldCacheSnapshot:D,acceptsStreamResponse:j,direction:I}={...MS,...o};this.action=c,this.historyChanged=d,this.referrer=m,this.snapshot=v,this.snapshotHTML=_,this.response=T,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=S,this.willRender=O,this.updateHistory=M,this.scrolled=!O,this.shouldCacheSnapshot=D,this.acceptsStreamResponse=j,this.direction=I||kS[c]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==Ts.initialized&&(this.recordTimingMetric(Lh.visitStart),this.state=Ts.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==Ts.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=Ts.canceled)}complete(){this.state==Ts.started&&(this.recordTimingMetric(Lh.visitEnd),this.adapter.visitCompleted(this),this.state=Ts.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==Ts.started&&(this.state=Ts.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=ty(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new lo(this,ur.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Lh.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;Vb(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(Lh.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,Vb(e)&&t!=null){let i=Sr.fromHTMLString(t);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Sr.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!ca(this.location)||e.hasAnchor(ca(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Sr.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(co.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let i=await t.responseHTML,{redirected:o,statusCode:c}=t;i==null?this.recordResponse({statusCode:Ga.contentTypeMismatch,redirected:o}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:c,responseHTML:i,redirected:o}))}async requestFailedWithResponse(e,t){let i=await t.responseHTML,{redirected:o,statusCode:c}=t;i==null?this.recordResponse({statusCode:Ga.contentTypeMismatch,redirected:o}):this.recordResponse({statusCode:c,responseHTML:i,redirected:o})}requestErrored(e,t){this.recordResponse({statusCode:Ga.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=ca(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),this.frame=await Ka(),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function Vb(n){return n>=200&&n<300}s(Vb,"isSuccessful");var Hp=class{static{s(this,"BrowserAdapter")}progressBar=new qp;constructor(e){this.session=e}visitProposedToLocation(e,t){so(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||ao(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Ga.networkFailure:case Ga.timeoutFailure:case Ga.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){yn("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},zp=class{static{s(this,"CacheObserver")}selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},Up=class{static{s(this,"FrameRedirector")}constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new Dh(this,t),this.formSubmitObserver=new Mc(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return this.#e(e)}linkClickIntercepted(e,t,i){let o=this.#n(e);o&&o.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#t(e,t)&&this.#e(e,t)}formSubmitted(e,t){let i=this.#n(e,t);i&&i.delegate.formSubmitted(e,t)}#t(e,t){let i=sm(e,t),o=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),c=Qn(o?.content??"/");return this.#e(e,t)&&so(i,c)}#e(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let o=this.#n(e,t);return o?o!=e.closest("turbo-frame"):!1}else return!1}#n(e,t){let i=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){let o=this.element.querySelector(`#${i}:not([disabled])`);if(o instanceof Vr)return o}}},Wp=class{static{s(this,"History")}location;restorationIdentifier=ao();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=ao()){e===history.pushState&&++this.currentIndex;let o={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};e.call(history,o,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]={...i,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);let{restorationIdentifier:i,restorationIndex:o}=t;this.restorationIdentifier=i;let c=o>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,c),this.currentIndex=o}}};onPageLoad=async e=>{await XT(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Vp=class{static{s(this,"LinkPrefetchObserver")}started=!1;#t=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#e,{once:!0}):this.#e())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!1)}#e=()=>{this.eventTarget.addEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!0};#n=e=>{if(Ja("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#a(t)){let o=t,c=iy(o);if(this.delegate.canPrefetchRequestToLocation(o,c)){this.#t=o;let d=new lo(this,ur.get,c,new URLSearchParams,t);$a.setLater(c.toString(),d,this.#o)}}};#r=e=>{e.target===this.#t&&this.#s()};#s=()=>{$a.clear(),this.#t=null};#i=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="get"){let t=$a.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),$a.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let i=t.closest("turbo-frame"),o=t.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;o&&o!=="_top"&&(e.headers["Turbo-Frame"]=o)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#o(){return Number(Ja("turbo-prefetch-cache-time"))||hS}#a(e){return!(!e.getAttribute("href")||DS(e)||IS(e)||PS(e)||RS(e)||BS(e))}},DS=s(n=>n.origin!==document.location.origin||!["http:","https:"].includes(n.protocol)||n.hasAttribute("target"),"unfetchableLink"),IS=s(n=>n.pathname+n.search===document.location.pathname+document.location.search||n.href.startsWith("#"),"linkToTheSamePage"),PS=s(n=>{if(n.getAttribute("data-turbo-prefetch")==="false"||n.getAttribute("data-turbo")==="false")return!0;let e=Ya(n,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},"linkOptsOut"),RS=s(n=>{let e=n.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||qS(n)||n.hasAttribute("data-turbo-confirm")||n.hasAttribute("data-turbo-stream"))},"nonSafeLink"),qS=s(n=>n.hasAttribute("data-remote")||n.hasAttribute("data-behavior")||n.hasAttribute("data-confirm")||n.hasAttribute("data-method"),"isUJS"),BS=s(n=>yn("turbo:before-prefetch",{target:n,cancelable:!0}).defaultPrevented,"eventPrevented"),Zp=class{static{s(this,"Navigator")}constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,i={}){this.stop(),this.currentVisit=new Fp(this,Qn(e),t,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new Oc(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let i=await t.responseHTML;if(i){let o=e.isSafe;o||this.view.clearSnapshotCache();let{statusCode:c,redirected:d}=t,v={action:this.#t(e,t),shouldCacheSnapshot:o,response:{statusCode:c,responseHTML:i,redirected:d}};this.proposeVisit(t.location,v)}}}async formSubmissionFailedWithResponse(e,t){let i=await t.responseHTML;if(i){let o=Sr.fromHTMLString(i);t.serverError?await this.view.renderError(o,this.currentVisit):await this.view.renderPage(o,!1,!0,this.currentVisit),o.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){let i=ca(e),o=ca(this.view.lastRenderedLocation),c=t==="restore"&&typeof i>"u";return t!=="replace"&&kp(e)===kp(this.view.lastRenderedLocation)&&(c||i!=null&&i!==o)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#t(e,t){let{submitter:i,formElement:o}=e;return ua(i,o)||this.#e(t)}#e(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},aa={initial:0,loading:1,interactive:2,complete:3},$p=class{static{s(this,"PageObserver")}stage=aa.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==aa.initial&&(this.stage=aa.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==aa.loading&&(this.stage=aa.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==aa.interactive&&(this.stage=aa.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Kp=class{static{s(this,"ScrollObserver")}started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Yp=class{static{s(this,"StreamMessageRenderer")}render({fragment:e}){Rh.preservingPermanentElements(this,jS(e),()=>{FS(e,()=>{HS(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function jS(n){let e=ly(document.documentElement),t={};for(let i of e){let{id:o}=i;for(let c of n.querySelectorAll("turbo-stream")){let d=ay(c.templateElement.content,o);d&&(t[o]=[i,d])}}return t}s(jS,"getPermanentElementMapForFragment");async function FS(n,e){let t=`turbo-stream-autofocus-${ao()}`,i=n.querySelectorAll("turbo-stream"),o=zS(i),c=null;if(o&&(o.id?c=o.id:c=t,o.id=c),e(),await Ka(),(document.activeElement==null||document.activeElement==document.body)&&c){let m=document.getElementById(c);om(m)&&m.focus(),m&&m.id==t&&m.removeAttribute("id")}}s(FS,"withAutofocusFromFragment");async function HS(n){let[e,t]=await iS(n,()=>document.activeElement),i=e&&e.id;if(i){let o=document.getElementById(i);om(o)&&o!=t&&o.focus()}}s(HS,"withPreservedFocus");function zS(n){for(let e of n){let t=ny(e.templateElement.content);if(t)return t}return null}s(zS,"firstAutofocusableElementInStreams");var Gp=class{static{s(this,"StreamObserver")}sources=new Set;#t=!1;constructor(e){this.delegate=e}start(){this.#t||(this.#t=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#t&&(this.#t=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=US(e);t&&WS(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#t&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(co.wrap(e))}};function US(n){let e=n.detail?.fetchResponse;if(e instanceof Xa)return e}s(US,"fetchResponseFromEvent");function WS(n){return(n.contentType??"").startsWith(co.contentType)}s(WS,"fetchResponseIsStream");var qh=class extends kc{static{s(this,"ErrorRenderer")}static renderElement(e,t){let{documentElement:i,body:o}=document;i.replaceChild(t,o)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let i=Nc(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},VS=function(){let n=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:O,afterNodeAdded:O,beforeNodeMorphed:O,afterNodeMorphed:O,beforeNodeRemoved:O,afterNodeRemoved:O,beforeAttributeUpdated:O},head:{style:"merge",shouldPreserve:function(q){return q.getAttribute("im-preserve")==="true"},shouldReAppend:function(q){return q.getAttribute("im-re-append")==="true"},shouldRemove:O,afterHeadMorphed:O}};function t(q,Z,P={}){q instanceof Document&&(q=q.documentElement),typeof Z=="string"&&(Z=X(Z));let nt=ct(Z),rt=D(q,nt,P);return i(q,nt,rt)}s(t,"morph");function i(q,Z,P){if(P.head.block){let nt=q.querySelector("head"),rt=Z.querySelector("head");if(nt&&rt){let ut=S(rt,nt,P);Promise.all(ut).then(function(){i(q,Z,Object.assign(P,{head:{block:!1,ignore:!0}}))});return}}if(P.morphStyle==="innerHTML")return d(Z,q,P),q.children;if(P.morphStyle==="outerHTML"||P.morphStyle==null){let nt=ht(Z,q,P),rt=nt?.previousSibling,ut=nt?.nextSibling,Lt=c(q,nt,P);return nt?vt(rt,Lt,ut):[]}else throw"Do not understand how to morph style "+P.morphStyle}s(i,"morphNormalizedContent");function o(q,Z){return Z.ignoreActiveValue&&q===document.activeElement&&q!==document.body}s(o,"ignoreValueOfActiveElement");function c(q,Z,P){if(!(P.ignoreActive&&q===document.activeElement))return Z==null?P.callbacks.beforeNodeRemoved(q)===!1?q:(q.remove(),P.callbacks.afterNodeRemoved(q),null):I(q,Z)?(P.callbacks.beforeNodeMorphed(q,Z)===!1||(q instanceof HTMLHeadElement&&P.head.ignore||(q instanceof HTMLHeadElement&&P.head.style!=="morph"?S(Z,q,P):(v(Z,q,P),o(q,P)||d(Z,q,P))),P.callbacks.afterNodeMorphed(q,Z)),q):P.callbacks.beforeNodeRemoved(q)===!1||P.callbacks.beforeNodeAdded(Z)===!1?q:(q.parentElement.replaceChild(Z,q),P.callbacks.afterNodeAdded(Z),P.callbacks.afterNodeRemoved(q),Z)}s(c,"morphOldNodeTo");function d(q,Z,P){let nt=q.firstChild,rt=Z.firstChild,ut;for(;nt;){if(ut=nt,nt=ut.nextSibling,rt==null){if(P.callbacks.beforeNodeAdded(ut)===!1)return;Z.appendChild(ut),P.callbacks.afterNodeAdded(ut),tt(P,ut);continue}if(j(ut,rt,P)){c(rt,ut,P),rt=rt.nextSibling,tt(P,ut);continue}let Lt=W(q,Z,ut,rt,P);if(Lt){rt=B(rt,Lt,P),c(Lt,ut,P),tt(P,ut);continue}let _t=G(q,Z,ut,rt,P);if(_t){rt=B(rt,_t,P),c(_t,ut,P),tt(P,ut);continue}if(P.callbacks.beforeNodeAdded(ut)===!1)return;Z.insertBefore(ut,rt),P.callbacks.afterNodeAdded(ut),tt(P,ut)}for(;rt!==null;){let Lt=rt;rt=rt.nextSibling,ot(Lt,P)}}s(d,"morphChildren");function m(q,Z,P,nt){return q==="value"&&nt.ignoreActiveValue&&Z===document.activeElement?!0:nt.callbacks.beforeAttributeUpdated(q,Z,P)===!1}s(m,"ignoreAttribute");function v(q,Z,P){let nt=q.nodeType;if(nt===1){let rt=q.attributes,ut=Z.attributes;for(let Lt of rt)m(Lt.name,Z,"update",P)||Z.getAttribute(Lt.name)!==Lt.value&&Z.setAttribute(Lt.name,Lt.value);for(let Lt=ut.length-1;0<=Lt;Lt--){let _t=ut[Lt];m(_t.name,Z,"remove",P)||q.hasAttribute(_t.name)||Z.removeAttribute(_t.name)}}(nt===8||nt===3)&&Z.nodeValue!==q.nodeValue&&(Z.nodeValue=q.nodeValue),o(Z,P)||T(q,Z,P)}s(v,"syncNodeFrom");function _(q,Z,P,nt){if(q[P]!==Z[P]){let rt=m(P,Z,"update",nt);rt||(Z[P]=q[P]),q[P]?rt||Z.setAttribute(P,q[P]):m(P,Z,"remove",nt)||Z.removeAttribute(P)}}s(_,"syncBooleanAttribute");function T(q,Z,P){if(q instanceof HTMLInputElement&&Z instanceof HTMLInputElement&&q.type!=="file"){let nt=q.value,rt=Z.value;_(q,Z,"checked",P),_(q,Z,"disabled",P),q.hasAttribute("value")?nt!==rt&&(m("value",Z,"update",P)||(Z.setAttribute("value",nt),Z.value=nt)):m("value",Z,"remove",P)||(Z.value="",Z.removeAttribute("value"))}else if(q instanceof HTMLOptionElement)_(q,Z,"selected",P);else if(q instanceof HTMLTextAreaElement&&Z instanceof HTMLTextAreaElement){let nt=q.value,rt=Z.value;if(m("value",Z,"update",P))return;nt!==rt&&(Z.value=nt),Z.firstChild&&Z.firstChild.nodeValue!==nt&&(Z.firstChild.nodeValue=nt)}}s(T,"syncInputValue");function S(q,Z,P){let nt=[],rt=[],ut=[],Lt=[],_t=P.head.style,Dt=new Map;for(let Vt of q.children)Dt.set(Vt.outerHTML,Vt);for(let Vt of Z.children){let Gt=Dt.has(Vt.outerHTML),Xt=P.head.shouldReAppend(Vt),le=P.head.shouldPreserve(Vt);Gt||le?Xt?rt.push(Vt):(Dt.delete(Vt.outerHTML),ut.push(Vt)):_t==="append"?Xt&&(rt.push(Vt),Lt.push(Vt)):P.head.shouldRemove(Vt)!==!1&&rt.push(Vt)}Lt.push(...Dt.values());let Kt=[];for(let Vt of Lt){let Gt=document.createRange().createContextualFragment(Vt.outerHTML).firstChild;if(P.callbacks.beforeNodeAdded(Gt)!==!1){if(Gt.href||Gt.src){let Xt=null,le=new Promise(function(Se){Xt=Se});Gt.addEventListener("load",function(){Xt()}),Kt.push(le)}Z.appendChild(Gt),P.callbacks.afterNodeAdded(Gt),nt.push(Gt)}}for(let Vt of rt)P.callbacks.beforeNodeRemoved(Vt)!==!1&&(Z.removeChild(Vt),P.callbacks.afterNodeRemoved(Vt));return P.head.afterHeadMorphed(Z,{added:nt,kept:ut,removed:rt}),Kt}s(S,"handleHeadElement");function O(){}s(O,"noOp");function M(q){let Z={};return Object.assign(Z,e),Object.assign(Z,q),Z.callbacks={},Object.assign(Z.callbacks,e.callbacks),Object.assign(Z.callbacks,q.callbacks),Z.head={},Object.assign(Z.head,e.head),Object.assign(Z.head,q.head),Z}s(M,"mergeDefaults");function D(q,Z,P){return P=M(P),{target:q,newContent:Z,config:P,morphStyle:P.morphStyle,ignoreActive:P.ignoreActive,ignoreActiveValue:P.ignoreActiveValue,idMap:Tt(q,Z),deadIds:new Set,callbacks:P.callbacks,head:P.head}}s(D,"createMorphContext");function j(q,Z,P){return q==null||Z==null?!1:q.nodeType===Z.nodeType&&q.tagName===Z.tagName?q.id!==""&&q.id===Z.id?!0:ft(P,q,Z)>0:!1}s(j,"isIdSetMatch");function I(q,Z){return q==null||Z==null?!1:q.nodeType===Z.nodeType&&q.tagName===Z.tagName}s(I,"isSoftMatch");function B(q,Z,P){for(;q!==Z;){let nt=q;q=q.nextSibling,ot(nt,P)}return tt(P,Z),Z.nextSibling}s(B,"removeNodesBetween");function W(q,Z,P,nt,rt){let ut=ft(rt,P,Z),Lt=null;if(ut>0){let _t=nt,Dt=0;for(;_t!=null;){if(j(P,_t,rt))return _t;if(Dt+=ft(rt,_t,q),Dt>ut)return null;_t=_t.nextSibling}}return Lt}s(W,"findIdSetMatch");function G(q,Z,P,nt,rt){let ut=nt,Lt=P.nextSibling,_t=0;for(;ut!=null;){if(ft(rt,ut,q)>0)return null;if(I(P,ut))return ut;if(I(Lt,ut)&&(_t++,Lt=Lt.nextSibling,_t>=2))return null;ut=ut.nextSibling}return ut}s(G,"findSoftMatch");function X(q){let Z=new DOMParser,P=q.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(P.match(/<\/html>/)||P.match(/<\/head>/)||P.match(/<\/body>/)){let nt=Z.parseFromString(q,"text/html");if(P.match(/<\/html>/))return nt.generatedByIdiomorph=!0,nt;{let rt=nt.firstChild;return rt?(rt.generatedByIdiomorph=!0,rt):null}}else{let rt=Z.parseFromString("<body><template>"+q+"</template></body>","text/html").body.querySelector("template").content;return rt.generatedByIdiomorph=!0,rt}}s(X,"parseContent");function ct(q){if(q==null)return document.createElement("div");if(q.generatedByIdiomorph)return q;if(q instanceof Node){let Z=document.createElement("div");return Z.append(q),Z}else{let Z=document.createElement("div");for(let P of[...q])Z.append(P);return Z}}s(ct,"normalizeContent");function vt(q,Z,P){let nt=[],rt=[];for(;q!=null;)nt.push(q),q=q.previousSibling;for(;nt.length>0;){let ut=nt.pop();rt.push(ut),Z.parentElement.insertBefore(ut,Z)}for(rt.push(Z);P!=null;)nt.push(P),rt.push(P),P=P.nextSibling;for(;nt.length>0;)Z.parentElement.insertBefore(nt.pop(),Z.nextSibling);return rt}s(vt,"insertSiblings");function ht(q,Z,P){let nt;nt=q.firstChild;let rt=nt,ut=0;for(;nt;){let Lt=z(nt,Z,P);Lt>ut&&(rt=nt,ut=Lt),nt=nt.nextSibling}return rt}s(ht,"findBestNodeMatch");function z(q,Z,P){return I(q,Z)?.5+ft(P,q,Z):0}s(z,"scoreElement");function ot(q,Z){tt(Z,q),Z.callbacks.beforeNodeRemoved(q)!==!1&&(q.remove(),Z.callbacks.afterNodeRemoved(q))}s(ot,"removeNode");function At(q,Z){return!q.deadIds.has(Z)}s(At,"isIdInConsideration");function V(q,Z,P){return(q.idMap.get(P)||n).has(Z)}s(V,"idIsWithinNode");function tt(q,Z){let P=q.idMap.get(Z)||n;for(let nt of P)q.deadIds.add(nt)}s(tt,"removeIdsFromConsideration");function ft(q,Z,P){let nt=q.idMap.get(Z)||n,rt=0;for(let ut of nt)At(q,ut)&&V(q,ut,P)&&++rt;return rt}s(ft,"getIdIntersectionCount");function lt(q,Z){let P=q.parentElement,nt=q.querySelectorAll("[id]");for(let rt of nt){let ut=rt;for(;ut!==P&&ut!=null;){let Lt=Z.get(ut);Lt==null&&(Lt=new Set,Z.set(ut,Lt)),Lt.add(rt.id),ut=ut.parentElement}}}s(lt,"populateIdMapForNode");function Tt(q,Z){let P=new Map;return lt(q,P),lt(Z,P),P}return s(Tt,"createIdMap"),{morph:t,defaults:e}}(),ha=class extends kc{static{s(this,"PageRenderer")}static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#t(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#t(){let{documentElement:e}=this.currentSnapshot,{lang:t}=this.newSnapshot;t?e.setAttribute("lang",t):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(tS(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(Nc(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[i,o]of t.entries()){if(e.tagName=="TITLE"){if(o.tagName!="TITLE")continue;if(e.innerHTML==o.innerHTML)return t.splice(i,1),!0}if(o.isEqualNode(e))return t.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=Nc(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Xp=class extends ha{static{s(this,"MorphRenderer")}async render(){this.willRender&&await this.#t()}get renderMethod(){return"morph"}async#t(){this.#e(this.currentElement,this.newElement),this.#a(),yn("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#e(e,t,i="outerHTML"){this.isMorphingTurboFrame=this.#l(e),VS.morph(e,t,{morphStyle:i,callbacks:{beforeNodeAdded:this.#n,beforeNodeMorphed:this.#r,beforeAttributeUpdated:this.#s,beforeNodeRemoved:this.#o,afterNodeMorphed:this.#i}})}#n=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));#r=(e,t)=>{if(e instanceof HTMLElement)return!e.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#l(e))?!yn("turbo:before-morph-element",{cancelable:!0,target:e,detail:{newElement:t}}).defaultPrevented:!1};#s=(e,t,i)=>!yn("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:i}}).defaultPrevented;#i=(e,t)=>{t instanceof HTMLElement&&yn("turbo:morph-element",{target:e,detail:{newElement:t}})};#o=e=>this.#r(e);#a(){this.#d().forEach(e=>{this.#l(e)&&(this.#u(e),e.reload())})}#u(e){e.addEventListener("turbo:before-frame-render",t=>{t.detail.render=this.#h},{once:!0})}#h=(e,t)=>{yn("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),this.#e(e,t.children,"innerHTML")};#l(e){return e.src&&e.refresh==="morph"}#d(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(e=>!e.closest("[data-turbo-permanent]"))}},Jp=class{static{s(this,"SnapshotCache")}keys=[];snapshots={};constructor(e){this.size=e}has(e){return Ch(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[Ch(e)]}write(e,t){this.snapshots[Ch(e)]=t}touch(e){let t=Ch(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},Qp=class extends kh{static{s(this,"PageView")}snapshotCache=new Jp(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,i=!0,o){let d=this.isPageRefresh(o)&&this.snapshot.shouldMorphPage?Xp:ha,m=new d(this.snapshot,e,ha.renderElement,t,i);return m.shouldRender?o?.changeHistory():this.forceReloaded=!0,this.render(m)}renderError(e,t){t?.changeHistory();let i=new qh(this.snapshot,e,qh.renderElement,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await Xb();let i=e.clone();return this.snapshotCache.put(t,i),i}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return Sr.fromElement(this.element)}},tm=class{static{s(this,"Preloader")}selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#t):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#t)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new lo(this,ur.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let i=await t.responseHTML,o=Sr.fromHTMLString(i);this.snapshotCache.put(e.url,o)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#t=()=>{this.preloadOnLoadLinksForView(document.body)}},em=class{static{s(this,"Cache")}constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#t("")}exemptPageFromCache(){this.#t("no-cache")}exemptPageFromPreview(){this.#t("no-preview")}#t(e){nS("turbo-cache-control",e)}},nm=class{static{s(this,"Session")}navigator=new Zp(this);history=new Wp(this);view=new Qp(this,document.documentElement);adapter=new Hp(this);pageObserver=new $p(this);cacheObserver=new zp;linkPrefetchObserver=new Vp(this,document);linkClickObserver=new Ih(this,window);formSubmitObserver=new Mc(this,document);scrollObserver=new Kp(this);streamObserver=new Gp(this);formLinkClickObserver=new Ph(this,document.documentElement);frameRedirector=new Up(this,document.documentElement);streamMessageRenderer=new Yp;cache=new em(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#t=150;constructor(e){this.recentRequests=e,this.preloader=new tm(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let i=t.frame?document.getElementById(t.frame):null;if(i instanceof Vr){let o=t.action||ua(i);i.delegate.proposeVisitIfNavigatedWithAction(i,o),i.src=e.toString()}else this.navigator.proposeVisit(Qn(e),t)}refresh(e,t){t&&this.recentRequests.has(t)||this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(co.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#t}set pageRefreshDebouncePeriod(e){this.refresh=oS(this.debouncedRefresh.bind(this),e),this.#t=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),i=e.hasAttribute("data-turbo-stream"),o=e.getAttribute("data-turbo-frame"),c=o=="_top"?null:document.getElementById(o)||Ya(e,"turbo-frame:not([disabled])");if(t||i||c instanceof Vr)return!1;{let d=new URL(e.href);return this.elementIsNavigatable(e)&&so(d,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,i){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&so(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&so(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&so(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){let i=this.getActionForLink(e),o=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:o})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Zb(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(Oh(document.documentElement),this.view.markVisitDirection(e.direction)),Zb(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),Mh(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let i=sm(e,t);return this.submissionIsNavigatable(e,t)&&so(Qn(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:o,detail:{render:c}}=i;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!o}viewRenderedSnapshot(e,t,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return yn("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return yn("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return yn("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return yn("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return yn("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return yn("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return yn("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return yn("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return yn("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{let i=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Ya(e,"[data-turbo]"),i=Ya(e,"turbo-frame");return this.drive||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return ua(e)||"advance"}get snapshot(){return this.view.snapshot}};function Zb(n){Object.defineProperties(n,ZS)}s(Zb,"extendURLWithDeprecatedProperties");var ZS={absoluteURL:{get(){return this.toString()}}},mn=new nm(ry),{cache:cy,navigator:uy}=mn;function lm(){mn.start()}s(lm,"start");function hy(n){mn.registerAdapter(n)}s(hy,"registerAdapter");function dy(n,e){mn.visit(n,e)}s(dy,"visit");function Dc(n){mn.connectStreamSource(n)}s(Dc,"connectStreamSource");function Ic(n){mn.disconnectStreamSource(n)}s(Ic,"disconnectStreamSource");function fy(n){mn.renderStreamMessage(n)}s(fy,"renderStreamMessage");function py(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),mn.clearCache()}s(py,"clearCache");function my(n){mn.setProgressBarDelay(n)}s(my,"setProgressBarDelay");function gy(n){Oc.confirmMethod=n}s(gy,"setConfirmMethod");function vy(n){mn.setFormMode(n)}s(vy,"setFormMode");var $S=Object.freeze({__proto__:null,navigator:uy,session:mn,cache:cy,PageRenderer:ha,PageSnapshot:Sr,FrameRenderer:tl,fetch:am,start:lm,registerAdapter:hy,visit:dy,connectStreamSource:Dc,disconnectStreamSource:Ic,renderStreamMessage:fy,clearCache:py,setProgressBarDelay:my,setConfirmMethod:gy,setFormMode:vy}),im=class extends Error{static{s(this,"TurboFrameMissingError")}},rm=class{static{s(this,"FrameController")}fetchResponseLoaded=e=>Promise.resolve();#t=null;#e=()=>{};#n=!1;#r=!1;#s=new Set;action=null;constructor(e){this.element=e,this.view=new Rp(this,this.element),this.appearanceObserver=new Ip(this,this.element),this.formLinkClickObserver=new Ph(this,this.element),this.linkInterceptor=new Dh(this,this.element),this.restorationIdentifier=ao(),this.formSubmitObserver=new Mc(this,this.element)}connect(){this.#n||(this.#n=!0,this.loadingStyle==la.lazy?this.appearanceObserver.start():this.#i(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#n&&(this.#n=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==la.eager&&this.#i()}sourceURLChanged(){this.#v("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==la.eager||this.#r)&&this.#i())}sourceURLReloaded(){let{src:e}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==la.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#i())}async#i(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#a(Qn(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#r=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let i=Jb(t);Sr.fromDocument(i).isVisitable?await this.#o(e,i):await this.#h(e)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,ua(e)),this.#i()}willSubmitFormLinkToLocation(e){return this.#f(e)}submittedFormLinkToLocation(e,t,i){let o=this.#c(e);o&&i.setAttribute("data-turbo-frame",o.id)}shouldInterceptLinkClick(e,t,i){return this.#f(e)}linkClickIntercepted(e,t){this.#u(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#f(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Oc(this,e,t);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(co.contentType)}requestStarted(e){Oh(this.element)}requestPreventedHandlingResponse(e,t){this.#e()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#e()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#e()}requestErrored(e,t){console.error(t),this.#e()}requestFinished(e){Mh(this.element)}formSubmissionStarted({formElement:e}){Oh(e,this.#c(e))}formSubmissionSucceededWithResponse(e,t){let i=this.#c(e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,ua(e.submitter,e.formElement,i)),i.delegate.loadResponse(t),e.isSafe||mn.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),mn.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){Mh(e,this.#c(e))}allowsImmediateRender({element:e},t){let i=yn("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:o,detail:{render:c}}=i;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!o}viewRenderedSnapshot(e,t,i){}preloadOnLoadLinksForView(e){mn.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#o(e,t){let i=await this.extractForeignFrameElement(t.body);if(i){let o=new Qa(i),c=new tl(this,this.view.snapshot,o,tl.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(c),this.complete=!0,mn.frameRendered(e,this.element),mn.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#l(e)&&this.#d(e)}async#a(e){let t=new lo(this,ur.get,e,new URLSearchParams,this.element);return this.#t?.cancel(),this.#t=t,new Promise(i=>{this.#e=()=>{this.#e=()=>{},this.#t=null,i()},t.perform()})}#u(e,t,i){let o=this.#c(e,i);o.delegate.proposeVisitIfNavigatedWithAction(o,ua(i,e,o)),this.#y(e,()=>{o.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let i=Sr.fromElement(e).clone(),{visitCachedSnapshot:o}=e.delegate;e.delegate.fetchResponseLoaded=async c=>{if(e.src){let{statusCode:d,redirected:m}=c,v=await c.responseHTML,T={response:{statusCode:d,redirected:m,responseHTML:v},visitCachedSnapshot:o,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(T.action=this.action),mn.visit(e.src,T)}}}}changeHistory(){if(this.action){let e=ty(this.action);mn.history.update(e,Qn(this.element.src||""),this.restorationIdentifier)}}async#h(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#p(e.response)}#l(e){this.element.setAttribute("complete","");let t=e.response,i=s(async(c,d)=>{c instanceof Response?this.#p(c):mn.visit(c,d)},"visit");return!yn("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented}#d(e){this.view.missing(),this.#m(e)}#m(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new im(t)}async#p(e){let t=new Xa(e),i=await t.responseHTML,{location:o,redirected:c,statusCode:d}=t;return mn.visit(o,{response:{redirected:c,statusCode:d,responseHTML:i}})}#c(e,t){let i=Nh("data-turbo-frame",t,e)||this.element.getAttribute("target");return $b(i)??this.element}async extractForeignFrameElement(e){let t,i=CSS.escape(this.id);try{if(t=Kb(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=Kb(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(o){return console.error(o),new Vr}return null}#g(e,t){let i=sm(e,t);return so(Qn(i),this.rootLocation)}#f(e,t){let i=Nh("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#g(e,t)||!this.enabled||i=="_top")return!1;if(i){let o=$b(i);if(o)return!o.disabled}return!(!mn.elementIsNavigatable(e)||t&&!mn.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#b("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#e()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#n}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return Qn(t)}#v(e){return this.#s.has(e)}#b(e,t){this.#s.add(e),t(),this.#s.delete(e)}#y(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function $b(n){if(n!=null){let e=document.getElementById(n);if(e instanceof Vr)return e}}s($b,"getFrameElementById");function Kb(n,e){if(n){let t=n.getAttribute("src");if(t!=null&&e!=null&&WT(t,e))throw new Error(`Matching <turbo-frame id="${n.id}"> element has a source URL which references itself`);if(n.ownerDocument!==document&&(n=document.importNode(n,!0)),n instanceof Vr)return n.connectedCallback(),n.disconnectedCallback(),n}}s(Kb,"activateElement");var cm={after(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.append(this.templateContent))},before(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.prepend(this.templateContent))},remove(){this.targetElements.forEach(n=>n.remove())},replace(){this.targetElements.forEach(n=>n.replaceWith(this.templateContent))},update(){this.targetElements.forEach(n=>{n.innerHTML="",n.append(this.templateContent)})},refresh(){mn.refresh(this.baseURI,this.requestId)}},Bh=class n extends HTMLElement{static{s(this,"StreamElement")}static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Ka(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.id),t=[...this.templateContent?.children||[]].filter(i=>!!i.id).map(i=>i.id);return e.filter(i=>t.includes(i.id))}get performAction(){if(this.action){let e=cm[this.action];if(e)return e;this.#t("unknown action")}this.#t("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#t("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#t("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#t(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:n.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},jh=class extends HTMLElement{static{s(this,"StreamSourceElement")}streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Dc(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Ic(this.streamSource))}get src(){return this.getAttribute("src")||""}};Vr.delegateConstructor=rm;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Vr);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Bh);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",jh);(()=>{let n=document.currentScript;if(n&&!n.hasAttribute("data-turbo-suppress-warning"))for(n=n.parentElement;n;){if(n==document.body)return console.warn(Qb`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,n.outerHTML);n=n.parentElement}})();window.Turbo={...$S,StreamActions:cm};lm();var Ty;async function XS(){return Ty||Ey(JS().then(Ey))}s(XS,"getConsumer");function Ey(n){return Ty=n}s(Ey,"setConsumer");async function JS(){let{createConsumer:n}=await Promise.resolve().then(()=>(xy(),wy));return n()}s(JS,"createConsumer");async function Sy(n,e){let{subscriptions:t}=await XS();return t.create(n,e)}s(Sy,"subscribeTo");function Fc(n){return!n||typeof n!="object"||n instanceof Date||n instanceof RegExp?n:Array.isArray(n)?n.map(Fc):Object.keys(n).reduce(function(e,t){var i=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(o,c){return"_"+c.toLowerCase()});return e[i]=Fc(n[t]),e},{})}s(Fc,"walk");var _m=class extends HTMLElement{static{s(this,"TurboCableStreamSourceElement")}async connectedCallback(){Dc(this),this.subscription=await Sy(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){Ic(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:t,...Fc({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",_m);function Ay(n){if(n.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=n;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let o=nA(t.body)?t.body:new URLSearchParams,c=tA(i,o,e);/get/i.test(c)||(/post/i.test(c)?o.delete("_method"):o.set("_method",c),t.method="post")},{once:!0})}}s(Ay,"encodeMethodIntoRequestBody");function tA(n,e,t){let i=eA(n),o=e.get("_method"),c=t.getAttribute("method")||"get";return typeof i=="string"?i:typeof o=="string"?o:c}s(tA,"determineFetchMethod");function eA(n){return n instanceof HTMLButtonElement||n instanceof HTMLInputElement?n.name==="_method"?n.value:n.hasAttribute("formmethod")?n.formMethod:null:null}s(eA,"determineFormMethod");function nA(n){return n instanceof FormData||n instanceof URLSearchParams}s(nA,"isBodyInit");window.Turbo=um;addEventListener("turbo:before-fetch-request",Ay);var Cy={camelize:function(n){return n.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())},dasherize:function(n){let e=n.replace(/([A-Z])/g,(t,i)=>`-${i.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}},Ly=class{static{s(this,"Application")}constructor(){this.controllers={}}start(n){this.window=window,this.document=document,this.connect()}connect(){for(let n in this.controllers)this.window.customElements.define(n,this.controllers[n])}register(n){let e=this.dasherize(n.name.replace("Default",""));this.controllers[e]=n}};Object.assign(Ly.prototype,Cy);var an=new Ly,Ge=class extends window.HTMLElement{static{s(this,"Controller")}constructor(){super(),this.element=this,this.descriptorPattern=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/}bindAction(n){n.identifier==this.name&&(n.boundFn=this[n.methodName].bind(this),n.listener=n.eventTarget.addEventListener(n.eventName||this.defaultEventName(n.eventTarget),n.boundFn,!1))}parseAction(n){return n.dataset.action.split(" ").map(this.parseActionDescriptorString(n).bind(this))}parseActionDescriptorString(n){return function(e){let i=e.trim().match(this.descriptorPattern)||[],o=i[1],c=i[2];return c&&!["keydown","keyup","keypress"].includes(o)&&(o+=`.${c}`,c=""),{eventTarget:this.parseEventTarget(i[3])||n,eventName:o,eventOptions:i[6]?this.parseEventOptions(i[6]):{},identifier:i[4],methodName:i[5],keyFilter:c}}}parseEventTarget(n){if(n=="window")return window;if(n=="document")return document}parseEventOptions(n){return n.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}defineTargets(){this.constructor.targets!=null&&this.constructor.targets.forEach(this.mapTargets.bind(this))}mapTargets(n){let e=this.querySelectorAll(`[data-${this.name}-target="${n}"]`);this[n+"Targets"]=Array.from(e),this[n+"Target"]=e[0]}defineValues(){if(this.constructor.values==null)return;Object.keys(this.constructor.values).forEach(this.mapValues(this.constructor.values).bind(this))}mapValues(n){return function(e){this[e+"Value"]=this.parseValue(e,n[e])}}parseValue(n,e){let t=this.camelize(`${this.name}-${n}-value`),i=this.dataset[t];if(i!=null)switch(e){case Array:return JSON.parse(i);case Boolean:return!(i=="0"||i=="false");case Number:return Number(i);case Object:return JSON.parse(i);default:return i}}attachActions(){let n=Array.from(this.querySelectorAll("[data-action]"));this.dataset.action&&n.push(this),this.actions=n.flatMap(this.parseAction.bind(this)),this.actions.forEach(this.bindAction.bind(this))}connectedCallback(){this.name=this.dasherize(this.constructor.name).replace("-controller-default","").replace("-controller",""),this.attachActions(),this.defineValues(),this.defineTargets(),this.connect&&this.connect()}disconnectedCallback(){this.disconnect&&this.disconnect()}dasherize(n){let e=n.replace(/([A-Z])/g,(t,i)=>`-${i.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}defaultEventName(n){switch(n.nodeName){case"DETAILS":return"toggle";case"FORM":return"submit";case"INPUT":return n.type.toLowerCase()=="submit"?"click":"input";case"SELECT":return"change";case"TEXTAREA":return"change";default:return"click"}}};Object.assign(Ge.prototype,Cy);var Hc=class extends Ge{static{s(this,"AdminCleaveController")}connect(){let e=this.querySelector("input");e.autocomplete=="cc-number"?this.cc({target:e}):this.cleave({target:e})}cleave(e){let t=parseInt(e.target.value.replaceAll(" ",""));isNaN(t)||(e.target.value=parseInt(t).toLocaleString("en").replaceAll(","," "))}cc(e){let t=e.target.value.replaceAll(" ",""),i=[];for(let o=0;o<t.length;o+=4)i.push(t.slice(o,o+4));e.target.value=i.join(" ")}};var zc=class extends Ge{static{s(this,"AdminTabController")}connect(){document.querySelectorAll("admin-tab-controller label").forEach(this.setCurrent.bind(this))}mark(e){document.querySelectorAll("admin-tab-controller label").forEach(this.unselect),this.select(e.target)}setCurrent(e){document.getElementById(e.getAttribute("for")).checked?this.select(e):this.unselect(e)}unselect(e){e.classList.add("bg-neutral-200","hover:bg-neutral-300"),e.classList.remove("bg-cyan-200")}select(e){e.classList.remove("bg-neutral-200","hover:bg-neutral-300"),e.classList.add("bg-cyan-200")}};function $h(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}s($h,"assign");var iA={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function wm(n,e){function t(o,c,d){if(!(typeof document>"u")){d=$h({},e,d),typeof d.expires=="number"&&(d.expires=new Date(Date.now()+d.expires*864e5)),d.expires&&(d.expires=d.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var m="";for(var v in d)d[v]&&(m+="; "+v,d[v]!==!0&&(m+="="+d[v].split(";")[0]));return document.cookie=o+"="+n.write(c,o)+m}}s(t,"set");function i(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var c=document.cookie?document.cookie.split("; "):[],d={},m=0;m<c.length;m++){var v=c[m].split("="),_=v.slice(1).join("=");try{var T=decodeURIComponent(v[0]);if(d[T]=n.read(_,T),o===T)break}catch{}}return o?d[o]:d}}return s(i,"get"),Object.create({set:t,get:i,remove:function(o,c){t(o,"",$h({},c,{expires:-1}))},withAttributes:function(o){return wm(this.converter,$h({},this.attributes,o))},withConverter:function(o){return wm($h({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}s(wm,"init");var Ny=wm(iA,{path:"/"});var Uc=class extends Ge{static{s(this,"BackToScopeController")}click(e){let t=this.dataset.resource,i=Ny.get(`return_to_${t}_tab`);i&&(e.preventDefault(),window.Turbo.visit(e.target.href+"?scope="+i))}};var Wc=class extends Ge{static{s(this,"BatchActionController")}static targets=["actionbar","all","checkbox"];checkbox(e){this.checkboxTargets.some(this.isChecked)?this.showActions():this.hideActions()}isChecked(e){return e.checked}showActions(){this.actionbarTarget.classList.remove("hidden"),this.allTarget.checked=!0}hideActions(){this.actionbarTarget.classList.add("hidden"),this.allTarget.checked=!1}};var Vc=class extends Ge{static{s(this,"ClickableRowController")}connect(){this.querySelectorAll("[data-link]").forEach(this.addHoverClasses)}addHoverClasses(e){e.classList.add("cursor-pointer","hover:bg-neutral-200")}click(e){if(e.target.tagName=="A"||e.target.tagName=="INPUT")return!0;let t=e.target.closest("tr").dataset.link;e.which==2||e.which==4||e.metaKey||e.ctrlKey?window.open(t,"_blank"):(e.preventDefault(),window.Turbo.visit(t))}};var Oy={camelize:function(n){return n.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())},dasherize:function(n){let e=n.replace(/([A-Z])/g,(t,i)=>`-${i.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}},My=class{static{s(this,"Application")}constructor(){this.controllers={}}start(n){this.window=window,this.document=document,this.connect()}connect(){for(let n in this.controllers)this.window.customElements.define(n,this.controllers[n])}register(n){let e=this.dasherize(n.name.replace("Default",""));this.controllers[e]=n}};Object.assign(My.prototype,Oy);var Wq=new My,An=class extends window.HTMLElement{static{s(this,"Controller")}constructor(){super(),this.element=this,this.descriptorPattern=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/}bindAction(n){n.identifier==this.name&&(n.boundFn=this[n.methodName].bind(this),n.listener=n.eventTarget.addEventListener(n.eventName||this.defaultEventName(n.eventTarget),n.boundFn,!1))}parseAction(n){return n.dataset.action.split(" ").map(this.parseActionDescriptorString(n).bind(this))}parseActionDescriptorString(n){return function(e){let i=e.trim().match(this.descriptorPattern)||[],o=i[1],c=i[2];return c&&!["keydown","keyup","keypress"].includes(o)&&(o+=`.${c}`,c=""),{eventTarget:this.parseEventTarget(i[3])||n,eventName:o,eventOptions:i[6]?this.parseEventOptions(i[6]):{},identifier:i[4],methodName:i[5],keyFilter:c}}}parseEventTarget(n){if(n=="window")return window;if(n=="document")return document}parseEventOptions(n){return n.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}defineTargets(){this.constructor.targets!=null&&this.constructor.targets.forEach(this.mapTargets.bind(this))}mapTargets(n){let e=this.querySelectorAll(`[data-${this.name}-target="${n}"]`);this[n+"Targets"]=Array.from(e),this[n+"Target"]=e[0]}defineValues(){if(this.constructor.values==null)return;Object.keys(this.constructor.values).forEach(this.mapValues(this.constructor.values).bind(this))}mapValues(n){return function(e){this[e+"Value"]=this.parseValue(e,n[e])}}parseValue(n,e){let t=this.camelize(`${this.name}-${n}-value`),i=this.dataset[t];if(i!=null)switch(e){case Array:return JSON.parse(i);case Boolean:return!(i=="0"||i=="false");case Number:return Number(i);case Object:return JSON.parse(i);default:return i}}attachActions(){let n=Array.from(this.querySelectorAll("[data-action]"));this.dataset.action&&n.push(this),this.actions=n.flatMap(this.parseAction.bind(this)),this.actions.forEach(this.bindAction.bind(this))}connectedCallback(){this.name=this.dasherize(this.constructor.name).replace("-controller-default","").replace("-controller",""),this.attachActions(),this.defineValues(),this.defineTargets(),this.connect&&this.connect()}disconnectedCallback(){this.disconnect&&this.disconnect()}dasherize(n){let e=n.replace(/([A-Z])/g,(t,i)=>`-${i.toLowerCase()}`);return e.startsWith("-")?e.substr(1):e}defaultEventName(n){switch(n.nodeName){case"DETAILS":return"toggle";case"FORM":return"submit";case"INPUT":return n.type.toLowerCase()=="submit"?"click":"input";case"SELECT":return"change";case"TEXTAREA":return"change";default:return"click"}}};Object.assign(An.prototype,Oy);var Zc=class extends An{static{s(this,"CommissionCalculatorController")}static targets=["salePrice","commission","vat","totalCommission"];priceChanged(e){let t=this.parseInt(this.salePriceTarget.value),i=Math.round(t*.06);this.commissionTarget.value=this.clamp(i,4e3,6e4),this.updateTotalCommission()}updateTotalCommission(e){let t=this.parseInt(this.commissionTarget.value),i=this.parseFloat(this.vatTarget.value);this.totalCommissionTarget.value=t*i}updateVat(e){let t=this.parseInt(this.totalCommissionTarget.value),i=this.parseFloat(this.vatTarget.value);this.commissionTarget.value=t/i}clamp(e,t,i){return Math.min(Math.max(e,t),i)}parseInt(e){return parseInt(e.replaceAll(" ",""))}parseFloat(e){return parseFloat(e.replaceAll(" ",""))}};var $c=class extends Ge{static{s(this,"HamburgerMenuController")}connect(){this.classList.add("cursor-pointer")}toggle(e){document.getElementById("left-menu").classList.toggle("-translate-x-full"),document.getElementById("main").classList.toggle("blur-sm")}};function ky(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}s(ky,"ownKeys");function ss(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ky(Object(t),!0).forEach(function(i){rA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ky(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}s(ss,"_objectSpread2");function Qh(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qh=s(function(e){return typeof e},"_typeof"):Qh=s(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),Qh(n)}s(Qh,"_typeof");function rA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(rA,"_defineProperty");function po(){return po=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},po.apply(this,arguments)}s(po,"_extends");function sA(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,c;for(c=0;c<i.length;c++)o=i[c],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}s(sA,"_objectWithoutPropertiesLoose");function oA(n,e){if(n==null)return{};var t=sA(n,e),i,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(o=0;o<c.length;o++)i=c[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}s(oA,"_objectWithoutProperties");var aA="1.15.6";function Ss(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}s(Ss,"userAgent");var mo=Ss(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),cd=Ss(/Edge/i),Dy=Ss(/firefox/i),td=Ss(/safari/i)&&!Ss(/chrome/i)&&!Ss(/android/i),Mm=Ss(/iP(ad|od|hone)/i),zy=Ss(/chrome/i)&&Ss(/android/i),Uy={capture:!1,passive:!1};function He(n,e,t){n.addEventListener(e,t,!mo&&Uy)}s(He,"on");function Ie(n,e,t){n.removeEventListener(e,t,!mo&&Uy)}s(Ie,"off");function rd(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}s(rd,"matches");function Wy(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}s(Wy,"getParentOrHost");function $r(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&rd(n,e):rd(n,e))||i&&n===t)return n;if(n===t)break}while(n=Wy(n))}return null}s($r,"closest");var Iy=/\s+/g;function hr(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(Iy," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(Iy," ")}}s(hr,"toggleClass");function ne(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}s(ne,"css");function al(n,e){var t="";if(typeof n=="string")t=n;else do{var i=ne(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(t)}s(al,"matrix");function Vy(n,e,t){if(n){var i=n.getElementsByTagName(e),o=0,c=i.length;if(t)for(;o<c;o++)t(i[o],o);return i}return[]}s(Vy,"find");function As(){var n=document.scrollingElement;return n||document.documentElement}s(As,"getWindowScrollingElement");function Mn(n,e,t,i,o){if(!(!n.getBoundingClientRect&&n!==window)){var c,d,m,v,_,T,S;if(n!==window&&n.parentNode&&n!==As()?(c=n.getBoundingClientRect(),d=c.top,m=c.left,v=c.bottom,_=c.right,T=c.height,S=c.width):(d=0,m=0,v=window.innerHeight,_=window.innerWidth,T=window.innerHeight,S=window.innerWidth),(e||t)&&n!==window&&(o=o||n.parentNode,!mo))do if(o&&o.getBoundingClientRect&&(ne(o,"transform")!=="none"||t&&ne(o,"position")!=="static")){var O=o.getBoundingClientRect();d-=O.top+parseInt(ne(o,"border-top-width")),m-=O.left+parseInt(ne(o,"border-left-width")),v=d+c.height,_=m+c.width;break}while(o=o.parentNode);if(i&&n!==window){var M=al(o||n),D=M&&M.a,j=M&&M.d;M&&(d/=j,m/=D,S/=D,T/=j,v=d+T,_=m+S)}return{top:d,left:m,bottom:v,right:_,width:S,height:T}}}s(Mn,"getRect");function Py(n,e,t){for(var i=sd(n,!0),o=Mn(n)[e];i;){var c=Mn(i)[t],d=void 0;if(t==="top"||t==="left"?d=o>=c:d=o<=c,!d)return i;if(i===As())break;i=sd(i,!1)}return!1}s(Py,"isScrolledPast");function ll(n,e,t,i){for(var o=0,c=0,d=n.children;c<d.length;){if(d[c].style.display!=="none"&&d[c]!==se.ghost&&(i||d[c]!==se.dragged)&&$r(d[c],t.draggable,n,!1)){if(o===e)return d[c];o++}c++}return null}s(ll,"getChild");function km(n,e){for(var t=n.lastElementChild;t&&(t===se.ghost||ne(t,"display")==="none"||e&&!rd(t,e));)t=t.previousElementSibling;return t||null}s(km,"lastChild");function Ar(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==se.clone&&(!e||rd(n,e))&&t++;return t}s(Ar,"index");function Ry(n){var e=0,t=0,i=As();if(n)do{var o=al(n),c=o.a,d=o.d;e+=n.scrollLeft*c,t+=n.scrollTop*d}while(n!==i&&(n=n.parentNode));return[e,t]}s(Ry,"getRelativeScrollOffset");function lA(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}s(lA,"indexOfObject");function sd(n,e){if(!n||!n.getBoundingClientRect)return As();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var o=ne(t);if(t.clientWidth<t.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return As();if(i||e)return t;i=!0}}while(t=t.parentNode);return As()}s(sd,"getParentAutoScrollElement");function cA(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}s(cA,"extend");function xm(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}s(xm,"isRectEqual");var Em;function Zy(n,e){return function(){if(!Em){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),Em=setTimeout(function(){Em=void 0},e)}}}s(Zy,"throttle");function $y(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}s($y,"scrollBy");function Ky(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}s(Ky,"clone");function Yy(n,e,t){var i={};return Array.from(n.children).forEach(function(o){var c,d,m,v;if(!(!$r(o,e.draggable,n,!1)||o.animated||o===t)){var _=Mn(o);i.left=Math.min((c=i.left)!==null&&c!==void 0?c:1/0,_.left),i.top=Math.min((d=i.top)!==null&&d!==void 0?d:1/0,_.top),i.right=Math.max((m=i.right)!==null&&m!==void 0?m:-1/0,_.right),i.bottom=Math.max((v=i.bottom)!==null&&v!==void 0?v:-1/0,_.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}s(Yy,"getChildContainingRectFromElement");var Vi="Sortable"+new Date().getTime();function uA(){var n=[],e;return{captureAnimationState:s(function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(ne(o,"display")==="none"||o===se.ghost)){n.push({target:o,rect:Mn(o)});var c=ss({},n[n.length-1].rect);if(o.thisAnimationDuration){var d=al(o,!0);d&&(c.top-=d.f,c.left-=d.e)}o.fromRect=c}})}},"captureAnimationState"),addAnimationState:s(function(i){n.push(i)},"addAnimationState"),removeAnimationState:s(function(i){n.splice(lA(n,{target:i}),1)},"removeAnimationState"),animateAll:s(function(i){var o=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var c=!1,d=0;n.forEach(function(m){var v=0,_=m.target,T=_.fromRect,S=Mn(_),O=_.prevFromRect,M=_.prevToRect,D=m.rect,j=al(_,!0);j&&(S.top-=j.f,S.left-=j.e),_.toRect=S,_.thisAnimationDuration&&xm(O,S)&&!xm(T,S)&&(D.top-S.top)/(D.left-S.left)===(T.top-S.top)/(T.left-S.left)&&(v=dA(D,O,M,o.options)),xm(S,T)||(_.prevFromRect=T,_.prevToRect=S,v||(v=o.options.animation),o.animate(_,D,S,v)),v&&(c=!0,d=Math.max(d,v),clearTimeout(_.animationResetTimer),_.animationResetTimer=setTimeout(function(){_.animationTime=0,_.prevFromRect=null,_.fromRect=null,_.prevToRect=null,_.thisAnimationDuration=null},v),_.thisAnimationDuration=v)}),clearTimeout(e),c?e=setTimeout(function(){typeof i=="function"&&i()},d):typeof i=="function"&&i(),n=[]},"animateAll"),animate:s(function(i,o,c,d){if(d){ne(i,"transition",""),ne(i,"transform","");var m=al(this.el),v=m&&m.a,_=m&&m.d,T=(o.left-c.left)/(v||1),S=(o.top-c.top)/(_||1);i.animatingX=!!T,i.animatingY=!!S,ne(i,"transform","translate3d("+T+"px,"+S+"px,0)"),this.forRepaintDummy=hA(i),ne(i,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),ne(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){ne(i,"transition",""),ne(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},d)}},"animate")}}s(uA,"AnimationStateManager");function hA(n){return n.offsetWidth}s(hA,"repaint");function dA(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}s(dA,"calculateRealTime");var il=[],Tm={initializeByDefault:!0},Jc={mount:s(function(e){for(var t in Tm)Tm.hasOwnProperty(t)&&!(t in e)&&(e[t]=Tm[t]);il.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),il.push(e)},"mount"),pluginEvent:s(function(e,t,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var c=e+"Global";il.forEach(function(d){t[d.pluginName]&&(t[d.pluginName][c]&&t[d.pluginName][c](ss({sortable:t},i)),t.options[d.pluginName]&&t[d.pluginName][e]&&t[d.pluginName][e](ss({sortable:t},i)))})},"pluginEvent"),initializePlugins:s(function(e,t,i,o){il.forEach(function(m){var v=m.pluginName;if(!(!e.options[v]&&!m.initializeByDefault)){var _=new m(e,t,e.options);_.sortable=e,_.options=e.options,e[v]=_,po(i,_.defaults)}});for(var c in e.options)if(e.options.hasOwnProperty(c)){var d=this.modifyOption(e,c,e.options[c]);typeof d<"u"&&(e.options[c]=d)}},"initializePlugins"),getEventProperties:s(function(e,t){var i={};return il.forEach(function(o){typeof o.eventProperties=="function"&&po(i,o.eventProperties.call(t[o.pluginName],e))}),i},"getEventProperties"),modifyOption:s(function(e,t,i){var o;return il.forEach(function(c){e[c.pluginName]&&c.optionListeners&&typeof c.optionListeners[t]=="function"&&(o=c.optionListeners[t].call(e[c.pluginName],i))}),o},"modifyOption")};function fA(n){var e=n.sortable,t=n.rootEl,i=n.name,o=n.targetEl,c=n.cloneEl,d=n.toEl,m=n.fromEl,v=n.oldIndex,_=n.newIndex,T=n.oldDraggableIndex,S=n.newDraggableIndex,O=n.originalEvent,M=n.putSortable,D=n.extraEventProperties;if(e=e||t&&t[Vi],!!e){var j,I=e.options,B="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!mo&&!cd?j=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(j=document.createEvent("Event"),j.initEvent(i,!0,!0)),j.to=d||t,j.from=m||t,j.item=o||t,j.clone=c,j.oldIndex=v,j.newIndex=_,j.oldDraggableIndex=T,j.newDraggableIndex=S,j.originalEvent=O,j.pullMode=M?M.lastPutMode:void 0;var W=ss(ss({},D),Jc.getEventProperties(i,e));for(var G in W)j[G]=W[G];t&&t.dispatchEvent(j),I[B]&&I[B].call(e,j)}}s(fA,"dispatchEvent");var pA=["evt"],Wi=s(function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,c=oA(i,pA);Jc.pluginEvent.bind(se)(e,t,ss({dragEl:Ot,parentEl:Tn,ghostEl:ce,rootEl:gn,nextEl:ga,lastDownEl:ed,cloneEl:_n,cloneHidden:fo,dragStarted:Kc,putSortable:si,activeSortable:se.active,originalEvent:o,oldIndex:ol,oldDraggableIndex:Yc,newIndex:dr,newDraggableIndex:ho,hideGhostForTarget:Qy,unhideGhostForTarget:t0,cloneNowHidden:s(function(){fo=!0},"cloneNowHidden"),cloneNowShown:s(function(){fo=!1},"cloneNowShown"),dispatchSortableEvent:s(function(m){Ni({sortable:t,name:m,originalEvent:o})},"dispatchSortableEvent")},c))},"pluginEvent");function Ni(n){fA(ss({putSortable:si,cloneEl:_n,targetEl:Ot,rootEl:gn,oldIndex:ol,oldDraggableIndex:Yc,newIndex:dr,newDraggableIndex:ho},n))}s(Ni,"_dispatchEvent");var Ot,Tn,ce,gn,ga,ed,_n,fo,ol,dr,Yc,ho,Kh,si,sl=!1,od=!1,ad=[],pa,Zr,Sm,Am,qy,By,Kc,rl,Gc,Xc=!1,Yh=!1,nd,ci,Cm=[],Nm=!1,ld=[],ud=typeof document<"u",Gh=Mm,jy=cd||mo?"cssFloat":"float",mA=ud&&!zy&&!Mm&&"draggable"in document.createElement("div"),Gy=function(){if(ud){if(mo)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Xy=s(function(e,t){var i=ne(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),c=ll(e,0,t),d=ll(e,1,t),m=c&&ne(c),v=d&&ne(d),_=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Mn(c).width,T=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Mn(d).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(c&&m.float&&m.float!=="none"){var S=m.float==="left"?"left":"right";return d&&(v.clear==="both"||v.clear===S)?"vertical":"horizontal"}return c&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||_>=o&&i[jy]==="none"||d&&i[jy]==="none"&&_+T>o)?"vertical":"horizontal"},"_detectDirection"),gA=s(function(e,t,i){var o=i?e.left:e.top,c=i?e.right:e.bottom,d=i?e.width:e.height,m=i?t.left:t.top,v=i?t.right:t.bottom,_=i?t.width:t.height;return o===m||c===v||o+d/2===m+_/2},"_dragElInRowColumn"),vA=s(function(e,t){var i;return ad.some(function(o){var c=o[Vi].options.emptyInsertThreshold;if(!(!c||km(o))){var d=Mn(o),m=e>=d.left-c&&e<=d.right+c,v=t>=d.top-c&&t<=d.bottom+c;if(m&&v)return i=o}}),i},"_detectNearestEmptySortable"),Jy=s(function(e){function t(c,d){return function(m,v,_,T){var S=m.options.group.name&&v.options.group.name&&m.options.group.name===v.options.group.name;if(c==null&&(d||S))return!0;if(c==null||c===!1)return!1;if(d&&c==="clone")return c;if(typeof c=="function")return t(c(m,v,_,T),d)(m,v,_,T);var O=(d?m:v).options.group.name;return c===!0||typeof c=="string"&&c===O||c.join&&c.indexOf(O)>-1}}s(t,"toFn");var i={},o=e.group;(!o||Qh(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=t(o.pull,!0),i.checkPut=t(o.put),i.revertClone=o.revertClone,e.group=i},"_prepareGroup"),Qy=s(function(){!Gy&&ce&&ne(ce,"display","none")},"_hideGhostForTarget"),t0=s(function(){!Gy&&ce&&ne(ce,"display","")},"_unhideGhostForTarget");ud&&!zy&&document.addEventListener("click",function(n){if(od)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),od=!1,!1},!0);var ma=s(function(e){if(Ot){e=e.touches?e.touches[0]:e;var t=vA(e.clientX,e.clientY);if(t){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Vi]._onDragOver(i)}}},"nearestEmptyInsertDetectEvent"),bA=s(function(e){Ot&&Ot.parentNode[Vi]._isOutsideThisEl(e.target)},"_checkOutsideTargetEl");function se(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=po({},e),n[Vi]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:s(function(){return Xy(n,this.options)},"direction"),ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:s(function(d,m){d.setData("Text",m.textContent)},"setData"),dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:se.supportPointer!==!1&&"PointerEvent"in window&&(!td||Mm),emptyInsertThreshold:5};Jc.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);Jy(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:mA,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?He(n,"pointerdown",this._onTapStart):(He(n,"mousedown",this._onTapStart),He(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(He(n,"dragover",this),He(n,"dragenter",this)),ad.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),po(this,uA())}s(se,"Sortable");se.prototype={constructor:se,_isOutsideThisEl:s(function(e){!this.el.contains(e)&&e!==this.el&&(rl=null)},"_isOutsideThisEl"),_getDirection:s(function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,Ot):this.options.direction},"_getDirection"),_onTapStart:s(function(e){if(e.cancelable){var t=this,i=this.el,o=this.options,c=o.preventOnFilter,d=e.type,m=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(m||e).target,_=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,T=o.filter;if(AA(i),!Ot&&!(/mousedown|pointerdown/.test(d)&&e.button!==0||o.disabled)&&!_.isContentEditable&&!(!this.nativeDraggable&&td&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=$r(v,o.draggable,i,!1),!(v&&v.animated)&&ed!==v)){if(ol=Ar(v),Yc=Ar(v,o.draggable),typeof T=="function"){if(T.call(this,e,v,this)){Ni({sortable:t,rootEl:_,name:"filter",targetEl:v,toEl:i,fromEl:i}),Wi("filter",t,{evt:e}),c&&e.preventDefault();return}}else if(T&&(T=T.split(",").some(function(S){if(S=$r(_,S.trim(),i,!1),S)return Ni({sortable:t,rootEl:S,name:"filter",targetEl:v,fromEl:i,toEl:i}),Wi("filter",t,{evt:e}),!0}),T)){c&&e.preventDefault();return}o.handle&&!$r(_,o.handle,i,!1)||this._prepareDragStart(e,m,v)}}},"_onTapStart"),_prepareDragStart:s(function(e,t,i){var o=this,c=o.el,d=o.options,m=c.ownerDocument,v;if(i&&!Ot&&i.parentNode===c){var _=Mn(i);if(gn=c,Ot=i,Tn=Ot.parentNode,ga=Ot.nextSibling,ed=i,Kh=d.group,se.dragged=Ot,pa={target:Ot,clientX:(t||e).clientX,clientY:(t||e).clientY},qy=pa.clientX-_.left,By=pa.clientY-_.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Ot.style["will-change"]="all",v=s(function(){if(Wi("delayEnded",o,{evt:e}),se.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Dy&&o.nativeDraggable&&(Ot.draggable=!0),o._triggerDragStart(e,t),Ni({sortable:o,name:"choose",originalEvent:e}),hr(Ot,d.chosenClass,!0)},"dragStartFn"),d.ignore.split(",").forEach(function(T){Vy(Ot,T.trim(),Lm)}),He(m,"dragover",ma),He(m,"mousemove",ma),He(m,"touchmove",ma),d.supportPointer?(He(m,"pointerup",o._onDrop),!this.nativeDraggable&&He(m,"pointercancel",o._onDrop)):(He(m,"mouseup",o._onDrop),He(m,"touchend",o._onDrop),He(m,"touchcancel",o._onDrop)),Dy&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ot.draggable=!0),Wi("delayStart",this,{evt:e}),d.delay&&(!d.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(cd||mo))){if(se.eventCanceled){this._onDrop();return}d.supportPointer?(He(m,"pointerup",o._disableDelayedDrag),He(m,"pointercancel",o._disableDelayedDrag)):(He(m,"mouseup",o._disableDelayedDrag),He(m,"touchend",o._disableDelayedDrag),He(m,"touchcancel",o._disableDelayedDrag)),He(m,"mousemove",o._delayedDragTouchMoveHandler),He(m,"touchmove",o._delayedDragTouchMoveHandler),d.supportPointer&&He(m,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(v,d.delay)}else v()}},"_prepareDragStart"),_delayedDragTouchMoveHandler:s(function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},"_delayedDragTouchMoveHandler"),_disableDelayedDrag:s(function(){Ot&&Lm(Ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},"_disableDelayedDrag"),_disableDelayedDragEvents:s(function(){var e=this.el.ownerDocument;Ie(e,"mouseup",this._disableDelayedDrag),Ie(e,"touchend",this._disableDelayedDrag),Ie(e,"touchcancel",this._disableDelayedDrag),Ie(e,"pointerup",this._disableDelayedDrag),Ie(e,"pointercancel",this._disableDelayedDrag),Ie(e,"mousemove",this._delayedDragTouchMoveHandler),Ie(e,"touchmove",this._delayedDragTouchMoveHandler),Ie(e,"pointermove",this._delayedDragTouchMoveHandler)},"_disableDelayedDragEvents"),_triggerDragStart:s(function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?He(document,"pointermove",this._onTouchMove):t?He(document,"touchmove",this._onTouchMove):He(document,"mousemove",this._onTouchMove):(He(Ot,"dragend",this),He(gn,"dragstart",this._onDragStart));try{document.selection?id(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},"_triggerDragStart"),_dragStarted:s(function(e,t){if(sl=!1,gn&&Ot){Wi("dragStarted",this,{evt:t}),this.nativeDraggable&&He(document,"dragover",bA);var i=this.options;!e&&hr(Ot,i.dragClass,!1),hr(Ot,i.ghostClass,!0),se.active=this,e&&this._appendGhost(),Ni({sortable:this,name:"start",originalEvent:t})}else this._nulling()},"_dragStarted"),_emulateDragOver:s(function(){if(Zr){this._lastX=Zr.clientX,this._lastY=Zr.clientY,Qy();for(var e=document.elementFromPoint(Zr.clientX,Zr.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Zr.clientX,Zr.clientY),e!==t);)t=e;if(Ot.parentNode[Vi]._isOutsideThisEl(e),t)do{if(t[Vi]){var i=void 0;if(i=t[Vi]._onDragOver({clientX:Zr.clientX,clientY:Zr.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=Wy(t));t0()}},"_emulateDragOver"),_onTouchMove:s(function(e){if(pa){var t=this.options,i=t.fallbackTolerance,o=t.fallbackOffset,c=e.touches?e.touches[0]:e,d=ce&&al(ce,!0),m=ce&&d&&d.a,v=ce&&d&&d.d,_=Gh&&ci&&Ry(ci),T=(c.clientX-pa.clientX+o.x)/(m||1)+(_?_[0]-Cm[0]:0)/(m||1),S=(c.clientY-pa.clientY+o.y)/(v||1)+(_?_[1]-Cm[1]:0)/(v||1);if(!se.active&&!sl){if(i&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ce){d?(d.e+=T-(Sm||0),d.f+=S-(Am||0)):d={a:1,b:0,c:0,d:1,e:T,f:S};var O="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");ne(ce,"webkitTransform",O),ne(ce,"mozTransform",O),ne(ce,"msTransform",O),ne(ce,"transform",O),Sm=T,Am=S,Zr=c}e.cancelable&&e.preventDefault()}},"_onTouchMove"),_appendGhost:s(function(){if(!ce){var e=this.options.fallbackOnBody?document.body:gn,t=Mn(Ot,!0,Gh,!0,e),i=this.options;if(Gh){for(ci=e;ne(ci,"position")==="static"&&ne(ci,"transform")==="none"&&ci!==document;)ci=ci.parentNode;ci!==document.body&&ci!==document.documentElement?(ci===document&&(ci=As()),t.top+=ci.scrollTop,t.left+=ci.scrollLeft):ci=As(),Cm=Ry(ci)}ce=Ot.cloneNode(!0),hr(ce,i.ghostClass,!1),hr(ce,i.fallbackClass,!0),hr(ce,i.dragClass,!0),ne(ce,"transition",""),ne(ce,"transform",""),ne(ce,"box-sizing","border-box"),ne(ce,"margin",0),ne(ce,"top",t.top),ne(ce,"left",t.left),ne(ce,"width",t.width),ne(ce,"height",t.height),ne(ce,"opacity","0.8"),ne(ce,"position",Gh?"absolute":"fixed"),ne(ce,"zIndex","100000"),ne(ce,"pointerEvents","none"),se.ghost=ce,e.appendChild(ce),ne(ce,"transform-origin",qy/parseInt(ce.style.width)*100+"% "+By/parseInt(ce.style.height)*100+"%")}},"_appendGhost"),_onDragStart:s(function(e,t){var i=this,o=e.dataTransfer,c=i.options;if(Wi("dragStart",this,{evt:e}),se.eventCanceled){this._onDrop();return}Wi("setupClone",this),se.eventCanceled||(_n=Ky(Ot),_n.removeAttribute("id"),_n.draggable=!1,_n.style["will-change"]="",this._hideClone(),hr(_n,this.options.chosenClass,!1),se.clone=_n),i.cloneId=id(function(){Wi("clone",i),!se.eventCanceled&&(i.options.removeCloneOnHide||gn.insertBefore(_n,Ot),i._hideClone(),Ni({sortable:i,name:"clone"}))}),!t&&hr(Ot,c.dragClass,!0),t?(od=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Ie(document,"mouseup",i._onDrop),Ie(document,"touchend",i._onDrop),Ie(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",c.setData&&c.setData.call(i,o,Ot)),He(document,"drop",i),ne(Ot,"transform","translateZ(0)")),sl=!0,i._dragStartId=id(i._dragStarted.bind(i,t,e)),He(document,"selectstart",i),Kc=!0,window.getSelection().removeAllRanges(),td&&ne(document.body,"user-select","none")},"_onDragStart"),_onDragOver:s(function(e){var t=this.el,i=e.target,o,c,d,m=this.options,v=m.group,_=se.active,T=Kh===v,S=m.sort,O=si||_,M,D=this,j=!1;if(Nm)return;function I(P,nt){Wi(P,D,ss({evt:e,isOwner:T,axis:M?"vertical":"horizontal",revert:d,dragRect:o,targetRect:c,canSort:S,fromSortable:O,target:i,completed:W,onMove:s(function(ut,Lt){return Xh(gn,t,Ot,o,ut,Mn(ut),e,Lt)},"onMove"),changed:G},nt))}s(I,"dragOverEvent");function B(){I("dragOverAnimationCapture"),D.captureAnimationState(),D!==O&&O.captureAnimationState()}s(B,"capture");function W(P){return I("dragOverCompleted",{insertion:P}),P&&(T?_._hideClone():_._showClone(D),D!==O&&(hr(Ot,si?si.options.ghostClass:_.options.ghostClass,!1),hr(Ot,m.ghostClass,!0)),si!==D&&D!==se.active?si=D:D===se.active&&si&&(si=null),O===D&&(D._ignoreWhileAnimating=i),D.animateAll(function(){I("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==O&&(O.animateAll(),O._ignoreWhileAnimating=null)),(i===Ot&&!Ot.animated||i===t&&!i.animated)&&(rl=null),!m.dragoverBubble&&!e.rootEl&&i!==document&&(Ot.parentNode[Vi]._isOutsideThisEl(e.target),!P&&ma(e)),!m.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),j=!0}s(W,"completed");function G(){dr=Ar(Ot),ho=Ar(Ot,m.draggable),Ni({sortable:D,name:"change",toEl:t,newIndex:dr,newDraggableIndex:ho,originalEvent:e})}if(s(G,"changed"),e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=$r(i,m.draggable,t,!0),I("dragOver"),se.eventCanceled)return j;if(Ot.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||D._ignoreWhileAnimating===i)return W(!1);if(od=!1,_&&!m.disabled&&(T?S||(d=Tn!==gn):si===this||(this.lastPutMode=Kh.checkPull(this,_,Ot,e))&&v.checkPut(this,_,Ot,e))){if(M=this._getDirection(e,i)==="vertical",o=Mn(Ot),I("dragOverValid"),se.eventCanceled)return j;if(d)return Tn=gn,B(),this._hideClone(),I("revert"),se.eventCanceled||(ga?gn.insertBefore(Ot,ga):gn.appendChild(Ot)),W(!0);var X=km(t,m.draggable);if(!X||xA(e,M,this)&&!X.animated){if(X===Ot)return W(!1);if(X&&t===e.target&&(i=X),i&&(c=Mn(i)),Xh(gn,t,Ot,o,i,c,e,!!i)!==!1)return B(),X&&X.nextSibling?t.insertBefore(Ot,X.nextSibling):t.appendChild(Ot),Tn=t,G(),W(!0)}else if(X&&wA(e,M,this)){var ct=ll(t,0,m,!0);if(ct===Ot)return W(!1);if(i=ct,c=Mn(i),Xh(gn,t,Ot,o,i,c,e,!1)!==!1)return B(),t.insertBefore(Ot,ct),Tn=t,G(),W(!0)}else if(i.parentNode===t){c=Mn(i);var vt=0,ht,z=Ot.parentNode!==t,ot=!gA(Ot.animated&&Ot.toRect||o,i.animated&&i.toRect||c,M),At=M?"top":"left",V=Py(i,"top","top")||Py(Ot,"top","top"),tt=V?V.scrollTop:void 0;rl!==i&&(ht=c[At],Xc=!1,Yh=!ot&&m.invertSwap||z),vt=EA(e,i,c,M,ot?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,Yh,rl===i);var ft;if(vt!==0){var lt=Ar(Ot);do lt-=vt,ft=Tn.children[lt];while(ft&&(ne(ft,"display")==="none"||ft===ce))}if(vt===0||ft===i)return W(!1);rl=i,Gc=vt;var Tt=i.nextElementSibling,q=!1;q=vt===1;var Z=Xh(gn,t,Ot,o,i,c,e,q);if(Z!==!1)return(Z===1||Z===-1)&&(q=Z===1),Nm=!0,setTimeout(_A,30),B(),q&&!Tt?t.appendChild(Ot):i.parentNode.insertBefore(Ot,q?Tt:i),V&&$y(V,0,tt-V.scrollTop),Tn=Ot.parentNode,ht!==void 0&&!Yh&&(nd=Math.abs(ht-Mn(i)[At])),G(),W(!0)}if(t.contains(Ot))return W(!1)}return!1},"_onDragOver"),_ignoreWhileAnimating:null,_offMoveEvents:s(function(){Ie(document,"mousemove",this._onTouchMove),Ie(document,"touchmove",this._onTouchMove),Ie(document,"pointermove",this._onTouchMove),Ie(document,"dragover",ma),Ie(document,"mousemove",ma),Ie(document,"touchmove",ma)},"_offMoveEvents"),_offUpEvents:s(function(){var e=this.el.ownerDocument;Ie(e,"mouseup",this._onDrop),Ie(e,"touchend",this._onDrop),Ie(e,"pointerup",this._onDrop),Ie(e,"pointercancel",this._onDrop),Ie(e,"touchcancel",this._onDrop),Ie(document,"selectstart",this)},"_offUpEvents"),_onDrop:s(function(e){var t=this.el,i=this.options;if(dr=Ar(Ot),ho=Ar(Ot,i.draggable),Wi("drop",this,{evt:e}),Tn=Ot&&Ot.parentNode,dr=Ar(Ot),ho=Ar(Ot,i.draggable),se.eventCanceled){this._nulling();return}sl=!1,Yh=!1,Xc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Om(this.cloneId),Om(this._dragStartId),this.nativeDraggable&&(Ie(document,"drop",this),Ie(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),td&&ne(document.body,"user-select",""),ne(Ot,"transform",""),e&&(Kc&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ce&&ce.parentNode&&ce.parentNode.removeChild(ce),(gn===Tn||si&&si.lastPutMode!=="clone")&&_n&&_n.parentNode&&_n.parentNode.removeChild(_n),Ot&&(this.nativeDraggable&&Ie(Ot,"dragend",this),Lm(Ot),Ot.style["will-change"]="",Kc&&!sl&&hr(Ot,si?si.options.ghostClass:this.options.ghostClass,!1),hr(Ot,this.options.chosenClass,!1),Ni({sortable:this,name:"unchoose",toEl:Tn,newIndex:null,newDraggableIndex:null,originalEvent:e}),gn!==Tn?(dr>=0&&(Ni({rootEl:Tn,name:"add",toEl:Tn,fromEl:gn,originalEvent:e}),Ni({sortable:this,name:"remove",toEl:Tn,originalEvent:e}),Ni({rootEl:Tn,name:"sort",toEl:Tn,fromEl:gn,originalEvent:e}),Ni({sortable:this,name:"sort",toEl:Tn,originalEvent:e})),si&&si.save()):dr!==ol&&dr>=0&&(Ni({sortable:this,name:"update",toEl:Tn,originalEvent:e}),Ni({sortable:this,name:"sort",toEl:Tn,originalEvent:e})),se.active&&((dr==null||dr===-1)&&(dr=ol,ho=Yc),Ni({sortable:this,name:"end",toEl:Tn,originalEvent:e}),this.save()))),this._nulling()},"_onDrop"),_nulling:s(function(){Wi("nulling",this),gn=Ot=Tn=ce=ga=_n=ed=fo=pa=Zr=Kc=dr=ho=ol=Yc=rl=Gc=si=Kh=se.dragged=se.ghost=se.clone=se.active=null,ld.forEach(function(e){e.checked=!0}),ld.length=Sm=Am=0},"_nulling"),handleEvent:s(function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ot&&(this._onDragOver(e),yA(e));break;case"selectstart":e.preventDefault();break}},"handleEvent"),toArray:s(function(){for(var e=[],t,i=this.el.children,o=0,c=i.length,d=this.options;o<c;o++)t=i[o],$r(t,d.draggable,this.el,!1)&&e.push(t.getAttribute(d.dataIdAttr)||SA(t));return e},"toArray"),sort:s(function(e,t){var i={},o=this.el;this.toArray().forEach(function(c,d){var m=o.children[d];$r(m,this.options.draggable,o,!1)&&(i[c]=m)},this),t&&this.captureAnimationState(),e.forEach(function(c){i[c]&&(o.removeChild(i[c]),o.appendChild(i[c]))}),t&&this.animateAll()},"sort"),save:s(function(){var e=this.options.store;e&&e.set&&e.set(this)},"save"),closest:s(function(e,t){return $r(e,t||this.options.draggable,this.el,!1)},"closest$1"),option:s(function(e,t){var i=this.options;if(t===void 0)return i[e];var o=Jc.modifyOption(this,e,t);typeof o<"u"?i[e]=o:i[e]=t,e==="group"&&Jy(i)},"option"),destroy:s(function(){Wi("destroy",this);var e=this.el;e[Vi]=null,Ie(e,"mousedown",this._onTapStart),Ie(e,"touchstart",this._onTapStart),Ie(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ie(e,"dragover",this),Ie(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ad.splice(ad.indexOf(this.el),1),this.el=e=null},"destroy"),_hideClone:s(function(){if(!fo){if(Wi("hideClone",this),se.eventCanceled)return;ne(_n,"display","none"),this.options.removeCloneOnHide&&_n.parentNode&&_n.parentNode.removeChild(_n),fo=!0}},"_hideClone"),_showClone:s(function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(fo){if(Wi("showClone",this),se.eventCanceled)return;Ot.parentNode==gn&&!this.options.group.revertClone?gn.insertBefore(_n,Ot):ga?gn.insertBefore(_n,ga):gn.appendChild(_n),this.options.group.revertClone&&this.animate(Ot,_n),ne(_n,"display",""),fo=!1}},"_showClone")};function yA(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}s(yA,"_globalDragOver");function Xh(n,e,t,i,o,c,d,m){var v,_=n[Vi],T=_.options.onMove,S;return window.CustomEvent&&!mo&&!cd?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=e,v.from=n,v.dragged=t,v.draggedRect=i,v.related=o||e,v.relatedRect=c||Mn(e),v.willInsertAfter=m,v.originalEvent=d,n.dispatchEvent(v),T&&(S=T.call(_,v,d)),S}s(Xh,"_onMove");function Lm(n){n.draggable=!1}s(Lm,"_disableDraggable");function _A(){Nm=!1}s(_A,"_unsilent");function wA(n,e,t){var i=Mn(ll(t.el,0,t.options,!0)),o=Yy(t.el,t.options,ce),c=10;return e?n.clientX<o.left-c||n.clientY<i.top&&n.clientX<i.right:n.clientY<o.top-c||n.clientY<i.bottom&&n.clientX<i.left}s(wA,"_ghostIsFirst");function xA(n,e,t){var i=Mn(km(t.el,t.options.draggable)),o=Yy(t.el,t.options,ce),c=10;return e?n.clientX>o.right+c||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>o.bottom+c||n.clientX>i.right&&n.clientY>i.top}s(xA,"_ghostIsLast");function EA(n,e,t,i,o,c,d,m){var v=i?n.clientY:n.clientX,_=i?t.height:t.width,T=i?t.top:t.left,S=i?t.bottom:t.right,O=!1;if(!d){if(m&&nd<_*o){if(!Xc&&(Gc===1?v>T+_*c/2:v<S-_*c/2)&&(Xc=!0),Xc)O=!0;else if(Gc===1?v<T+nd:v>S-nd)return-Gc}else if(v>T+_*(1-o)/2&&v<S-_*(1-o)/2)return TA(e)}return O=O||d,O&&(v<T+_*c/2||v>S-_*c/2)?v>T+_/2?1:-1:0}s(EA,"_getSwapDirection");function TA(n){return Ar(Ot)<Ar(n)?1:-1}s(TA,"_getInsertDirection");function SA(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}s(SA,"_generateId");function AA(n){ld.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&ld.push(i)}}s(AA,"_saveInputCheckedState");function id(n){return setTimeout(n,0)}s(id,"_nextTick");function Om(n){return clearTimeout(n)}s(Om,"_cancelNextTick");ud&&He(document,"touchmove",function(n){(se.active||sl)&&n.cancelable&&n.preventDefault()});se.utils={on:He,off:Ie,css:ne,find:Vy,is:s(function(e,t){return!!$r(e,t,e,!1)},"is"),extend:cA,throttle:Zy,closest:$r,toggleClass:hr,clone:Ky,index:Ar,nextTick:id,cancelNextTick:Om,detectDirection:Xy,getChild:ll,expando:Vi};se.get=function(n){return n[Vi]};se.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(se.utils=ss(ss({},se.utils),i.utils)),Jc.mount(i)})};se.create=function(n,e){return new se(n,e)};se.version=aA;var Fn=[],Jh,Fy,CA=!1;var Hy;function LA(){Fn.forEach(function(n){clearInterval(n.pid)}),Fn=[]}s(LA,"clearAutoScrolls");var e5=Zy(function(n,e,t,i){if(e.scroll){var o=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,d=e.scrollSensitivity,m=e.scrollSpeed,v=As(),_=!1,T;Fy!==t&&(Fy=t,LA(),Jh=e.scroll,T=e.scrollFn,Jh===!0&&(Jh=sd(t,!0)));var S=0,O=Jh;do{var M=O,D=Mn(M),j=D.top,I=D.bottom,B=D.left,W=D.right,G=D.width,X=D.height,ct=void 0,vt=void 0,ht=M.scrollWidth,z=M.scrollHeight,ot=ne(M),At=M.scrollLeft,V=M.scrollTop;M===v?(ct=G<ht&&(ot.overflowX==="auto"||ot.overflowX==="scroll"||ot.overflowX==="visible"),vt=X<z&&(ot.overflowY==="auto"||ot.overflowY==="scroll"||ot.overflowY==="visible")):(ct=G<ht&&(ot.overflowX==="auto"||ot.overflowX==="scroll"),vt=X<z&&(ot.overflowY==="auto"||ot.overflowY==="scroll"));var tt=ct&&(Math.abs(W-o)<=d&&At+G<ht)-(Math.abs(B-o)<=d&&!!At),ft=vt&&(Math.abs(I-c)<=d&&V+X<z)-(Math.abs(j-c)<=d&&!!V);if(!Fn[S])for(var lt=0;lt<=S;lt++)Fn[lt]||(Fn[lt]={});(Fn[S].vx!=tt||Fn[S].vy!=ft||Fn[S].el!==M)&&(Fn[S].el=M,Fn[S].vx=tt,Fn[S].vy=ft,clearInterval(Fn[S].pid),(tt!=0||ft!=0)&&(_=!0,Fn[S].pid=setInterval(function(){i&&this.layer===0&&se.active._onTouchMove(Hy);var Tt=Fn[this.layer].vy?Fn[this.layer].vy*m:0,q=Fn[this.layer].vx?Fn[this.layer].vx*m:0;typeof T=="function"&&T.call(se.dragged.parentNode[Vi],q,Tt,n,Hy,Fn[this.layer].el)!=="continue"||$y(Fn[this.layer].el,q,Tt)}.bind({layer:S}),24))),S++}while(e.bubbleScroll&&O!==v&&(O=sd(O,!1)));CA=_}},30),e0=s(function(e){var t=e.originalEvent,i=e.putSortable,o=e.dragEl,c=e.activeSortable,d=e.dispatchSortableEvent,m=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(t){var _=i||c;m();var T=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,S=document.elementFromPoint(T.clientX,T.clientY);v(),_&&!_.el.contains(S)&&(d("spill"),this.onSpill({dragEl:o,putSortable:i}))}},"drop");function n0(){}s(n0,"Revert");n0.prototype={startIndex:null,dragStart:s(function(e){var t=e.oldDraggableIndex;this.startIndex=t},"dragStart"),onSpill:s(function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=ll(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},"onSpill"),drop:e0};po(n0,{pluginName:"revertOnSpill"});function i0(){}s(i0,"Remove");i0.prototype={onSpill:s(function(e){var t=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},"onSpill"),drop:e0};po(i0,{pluginName:"removeOnSpill"});var hd=se;var Qc=class extends An{static{s(this,"DraggableController")}connect(){this.sortable=hd.create(this,{animation:150,draggable:".js-draggable-item",handle:".js-handle",onEnd:this.onReorder.bind(this)})}onReorder(e){document.querySelectorAll(".js-draggable-item").forEach(function(t,i){let o=t.querySelector(".js-position");o.value=i+1})}};var s0=Jn(Im());var tu=class extends Ge{static{s(this,"GeoSearchController")}static targets=["lat","lng","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,s0.default)(this.fetchData.bind(this),500)}change(e){this.debouncedFetchData(e.target.value)}fetchData(e,t){fetch("https://nominatim.openstreetmap.org/search?"+new URLSearchParams({q:e,format:"jsonv2"})).then(i=>i.json()).then(i=>this.display(i))}buildMarkup(e){return e.map(function(t){return`
        <div>
          <span
            class="block p-2 cursor-pointer hover:bg-neutral-100"
            data-info='${JSON.stringify(t)}'
            data-action="click->geo-search#select"
          >${t.display_name}</span>
        </div>`}).join("")}display(e){this.resultsTarget.innerHTML=this.buildMarkup(e),this.bindNewActions(this.resultsTarget)}bindNewActions(e){Array.from(e.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(e){let t=JSON.parse(e.currentTarget.dataset.info);this.visibleFieldTarget.value=t.name||t.display_name,this.latTarget.value=t.lat,this.lngTarget.value=t.lon,this.resultsTarget.innerHTML=""}};var l0=Jn(a0());var eu=class extends An{static{s(this,"GlobalSearchController")}connect(){this.selectedResult=-1,this.debouncedSubmit=(0,l0.default)(this.submit,500),this.form=this.querySelector("form")}resultsTarget(){return this.querySelector("#global-results")}items(){return this.resultsTarget().querySelectorAll("a")}closeList(){this.selectedResult=-1,this.resultsTarget().innerHTML=""}prevItem(){this.selectedResult=Math.max(this.selectedResult-1,0)}nextItem(){this.selectedResult=Math.min(this.selectedResult+1,this.items().length-1)}markSelectedResult(){this.resultsTarget().innerHTML!=""&&this.items().forEach(this.markAsSelected.bind(this))}markAsSelected(e,t){t==this.selectedResult?(e.classList.add("bg-neutral-100"),e.scrollIntoView({block:"end"})):e.classList.remove("bg-neutral-100")}submit(){this.form.requestSubmit()}selectedLink(){return this.items()[this.selectedResult].href}keydown(e){switch(e.keyCode){case 13:location.href=this.selectedLink();break;case 38:e.preventDefault(),this.prevItem(),this.markSelectedResult();break;case 40:e.preventDefault(),this.nextItem(),this.markSelectedResult();break;case 27:e.preventDefault(),this.closeList();break;default:String.fromCharCode(e.keyCode).match(/(\w|\s)/g)&&this.debouncedSubmit()}}};var dd=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],go={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var fd={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},pd=fd;var ui=s(function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},"pad"),Zi=s(function(n){return n===!0?1:0},"int");function Rm(n,e){var t;return function(){var i=this,o=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(i,o)},e)}}s(Rm,"debounce");var md=s(function(n){return n instanceof Array?n:[n]},"arrayify");function hi(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}s(hi,"toggleClass");function Pe(n,e,t){var i=window.document.createElement(n);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}s(Pe,"createElement");function nu(n){for(;n.firstChild;)n.removeChild(n.firstChild)}s(nu,"clearNode");function qm(n,e){if(e(n))return n;if(n.parentNode)return qm(n.parentNode,e)}s(qm,"findParent");function iu(n,e){var t=Pe("div","numInputWrapper"),i=Pe("input","numInput "+n),o=Pe("span","arrowUp"),c=Pe("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var d in e)i.setAttribute(d,e[d]);return t.appendChild(i),t.appendChild(o),t.appendChild(c),t}s(iu,"createNumberInput");function $i(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}s($i,"getEventTarget");var Bm=s(function(){},"doNothing"),ru=s(function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},"monthToStr"),c0={D:Bm,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Zi(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var i=parseInt(e),o=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return o.setDate(o.getDate()-o.getDay()+t.firstDayOfWeek),o},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:Bm,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:Bm,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Cs={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},cl={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[cl.w(n,e,t)]},F:function(n,e,t){return ru(cl.n(n,e,t)-1,!1,e)},G:function(n,e,t){return ui(cl.h(n,e,t))},H:function(n){return ui(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Zi(n.getHours()>11)]},M:function(n,e){return ru(n.getMonth(),!0,e)},S:function(n){return ui(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return ui(n.getFullYear(),4)},d:function(n){return ui(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ui(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return ui(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}};var jm=s(function(n){var e=n.config,t=e===void 0?go:e,i=n.l10n,o=i===void 0?fd:i,c=n.isMobile,d=c===void 0?!1:c;return function(m,v,_){var T=_||o;return t.formatDate!==void 0&&!d?t.formatDate(m,v,T):v.split("").map(function(S,O,M){return cl[S]&&M[O-1]!=="\\"?cl[S](m,T,t):S!=="\\"?S:""}).join("")}},"createDateFormatter"),gd=s(function(n){var e=n.config,t=e===void 0?go:e,i=n.l10n,o=i===void 0?fd:i;return function(c,d,m,v){if(!(c!==0&&!c)){var _=v||o,T,S=c;if(c instanceof Date)T=new Date(c.getTime());else if(typeof c!="string"&&c.toFixed!==void 0)T=new Date(c);else if(typeof c=="string"){var O=d||(t||go).dateFormat,M=String(c).trim();if(M==="today")T=new Date,m=!0;else if(t&&t.parseDate)T=t.parseDate(c,O);else if(/Z$/.test(M)||/GMT$/.test(M))T=new Date(c);else{for(var D=void 0,j=[],I=0,B=0,W="";I<O.length;I++){var G=O[I],X=G==="\\",ct=O[I-1]==="\\"||X;if(Cs[G]&&!ct){W+=Cs[G];var vt=new RegExp(W).exec(c);vt&&(D=!0)&&j[G!=="Y"?"push":"unshift"]({fn:c0[G],val:vt[++B]})}else X||(W+=".")}T=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),j.forEach(function(ht){var z=ht.fn,ot=ht.val;return T=z(T,ot,_)||T}),T=D?T:void 0}}if(!(T instanceof Date&&!isNaN(T.getTime()))){t.errorHandler(new Error("Invalid date provided: "+S));return}return m===!0&&T.setHours(0,0,0,0),T}}},"createDateParser");function Ki(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}s(Ki,"compareDates");var u0=s(function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},"isBetween"),vd=s(function(n,e,t){return n*3600+e*60+t},"calculateSecondsSinceMidnight"),h0=s(function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},"parseSeconds"),d0={DAY:864e5};function bd(n){var e=n.defaultHour,t=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var o=n.minDate.getHours(),c=n.minDate.getMinutes(),d=n.minDate.getSeconds();e<o&&(e=o),e===o&&t<c&&(t=c),e===o&&t===c&&i<d&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var m=n.maxDate.getHours(),v=n.maxDate.getMinutes();e=Math.min(e,m),e===m&&(t=Math.min(v,t)),e===m&&t===v&&(i=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}s(bd,"getDefaultHours");typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=s(function(m){m&&Object.keys(m).forEach(function(v){return n[v]=m[v]})},"_loop_1"),o=0,c=e;o<c.length;o++){var d=c[o];i(d)}return n});var di=function(){return di=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},di.apply(this,arguments)},f0=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],d=0,m=c.length;d<m;d++,o++)i[o]=c[d];return i},NA=300;function OA(n,e){var t={config:di(di({},go),kn.defaultConfig),l10n:pd};t.parseDate=gd({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=j,t._setHoursFromDate=O,t._positionCalendar=re,t.changeMonth=ut,t.changeYear=Gt,t.clear=Lt,t.close=_t,t.onMouseOver=Yt,t._createElement=Pe,t.createDay=vt,t.destroy=Dt,t.isEnabled=Xt,t.jumpToDate=W,t.updateValue=en,t.open=Zt,t.redraw=ze,t.set=$e,t.setDate=me,t.toggle=Ae;function i(){t.utils={getDaysInMonth:function(y,w){return y===void 0&&(y=t.currentMonth),w===void 0&&(w=t.currentYear),y===1&&(w%4===0&&w%100!==0||w%400===0)?29:t.l10n.daysInMonth[y]}}}s(i,"setupHelperFunctions");function o(){t.element=t.input=n,t.isOpen=!1,Jt(),Te(),Je(),Xe(),i(),t.isMobile||ct(),B(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&O(t.config.noCalendar?t.latestSelectedDateObj:void 0),en(!1)),m();var y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&y&&re(),It("onReady")}s(o,"init");function c(){var y;return((y=t.calendarContainer)===null||y===void 0?void 0:y.getRootNode()).activeElement||document.activeElement}s(c,"getClosestActiveElement");function d(y){return y.bind(t)}s(d,"bindToInstance");function m(){var y=t.config;y.weekNumbers===!1&&y.showMonths===1||y.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var w=(t.days.offsetWidth+1)*y.showMonths;t.daysContainer.style.width=w+"px",t.calendarContainer.style.width=w+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}s(m,"setCalendarWidth");function v(y){if(t.selectedDates.length===0){var w=t.config.minDate===void 0||Ki(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),N=bd(t.config);w.setHours(N.hours,N.minutes,N.seconds,w.getMilliseconds()),t.selectedDates=[w],t.latestSelectedDateObj=w}y!==void 0&&y.type!=="blur"&&sr(y);var R=t._input.value;S(),en(),t._input.value!==R&&t._debouncedChange()}s(v,"updateTime");function _(y,w){return y%12+12*Zi(w===t.l10n.amPM[1])}s(_,"ampm2military");function T(y){switch(y%24){case 0:case 12:return 12;default:return y%12}}s(T,"military2ampm");function S(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var y=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,w=(parseInt(t.minuteElement.value,10)||0)%60,N=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(y=_(y,t.amPM.textContent));var R=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Ki(t.latestSelectedDateObj,t.config.minDate,!0)===0,Y=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Ki(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var Q=vd(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Ct=vd(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),at=vd(y,w,N);if(at>Ct&&at<Q){var St=h0(Q);y=St[0],w=St[1],N=St[2]}}else{if(Y){var $=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;y=Math.min(y,$.getHours()),y===$.getHours()&&(w=Math.min(w,$.getMinutes())),w===$.getMinutes()&&(N=Math.min(N,$.getSeconds()))}if(R){var yt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;y=Math.max(y,yt.getHours()),y===yt.getHours()&&w<yt.getMinutes()&&(w=yt.getMinutes()),w===yt.getMinutes()&&(N=Math.max(N,yt.getSeconds()))}}M(y,w,N)}}s(S,"setHoursFromInputs");function O(y){var w=y||t.latestSelectedDateObj;w&&w instanceof Date&&M(w.getHours(),w.getMinutes(),w.getSeconds())}s(O,"setHoursFromDate");function M(y,w,N){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(y%24,w,N||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=ui(t.config.time_24hr?y:(12+y)%12+12*Zi(y%12===0)),t.minuteElement.value=ui(w),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Zi(y>=12)]),t.secondElement!==void 0&&(t.secondElement.value=ui(N)))}s(M,"setHours");function D(y){var w=$i(y),N=parseInt(w.value)+(y.delta||0);(N/1e3>1||y.key==="Enter"&&!/[^\d]/.test(N.toString()))&&Gt(N)}s(D,"onYearInput");function j(y,w,N,R){if(w instanceof Array)return w.forEach(function(Y){return j(y,Y,N,R)});if(y instanceof Array)return y.forEach(function(Y){return j(Y,w,N,R)});y.addEventListener(w,N,R),t._handlers.push({remove:function(){return y.removeEventListener(w,N,R)}})}s(j,"bind");function I(){It("onChange")}s(I,"triggerChange");function B(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(N){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+N+"]"),function(R){return j(R,"click",t[N])})}),t.isMobile){oe();return}var y=Rm(ve,50);if(t._debouncedChange=Rm(I,NA),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&j(t.daysContainer,"mouseover",function(N){t.config.mode==="range"&&Yt($i(N))}),j(t._input,"keydown",fe),t.calendarContainer!==void 0&&j(t.calendarContainer,"keydown",fe),!t.config.inline&&!t.config.static&&j(window,"resize",y),window.ontouchstart!==void 0?j(window.document,"touchstart",Vt):j(window.document,"mousedown",Vt),j(window.document,"focus",Vt,{capture:!0}),t.config.clickOpens===!0&&(j(t._input,"focus",t.open),j(t._input,"click",t.open)),t.daysContainer!==void 0&&(j(t.monthNav,"click",gr),j(t.monthNav,["keyup","increment"],D),j(t.daysContainer,"click",De)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var w=s(function(N){return $i(N).select()},"selText");j(t.timeContainer,["increment"],v),j(t.timeContainer,"blur",v,{capture:!0}),j(t.timeContainer,"click",G),j([t.hourElement,t.minuteElement],["focus","click"],w),t.secondElement!==void 0&&j(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&j(t.amPM,"click",function(N){v(N)})}t.config.allowInput&&j(t._input,"blur",Se)}s(B,"bindEvents");function W(y,w){var N=y!==void 0?t.parseDate(y):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),R=t.currentYear,Y=t.currentMonth;try{N!==void 0&&(t.currentYear=N.getFullYear(),t.currentMonth=N.getMonth())}catch(Q){Q.message="Invalid date supplied: "+N,t.config.errorHandler(Q)}w&&t.currentYear!==R&&(It("onYearChange"),ft()),w&&(t.currentYear!==R||t.currentMonth!==Y)&&It("onMonthChange"),t.redraw()}s(W,"jumpToDate");function G(y){var w=$i(y);~w.className.indexOf("arrow")&&X(y,w.classList.contains("arrowUp")?1:-1)}s(G,"timeIncrement");function X(y,w,N){var R=y&&$i(y),Y=N||R&&R.parentNode&&R.parentNode.firstChild,Q=ue("increment");Q.delta=w,Y&&Y.dispatchEvent(Q)}s(X,"incrementNumInput");function ct(){var y=window.document.createDocumentFragment();if(t.calendarContainer=Pe("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(y.appendChild(q()),t.innerContainer=Pe("div","flatpickr-innerContainer"),t.config.weekNumbers){var w=rt(),N=w.weekWrapper,R=w.weekNumbers;t.innerContainer.appendChild(N),t.weekNumbers=R,t.weekWrapper=N}t.rContainer=Pe("div","flatpickr-rContainer"),t.rContainer.appendChild(P()),t.daysContainer||(t.daysContainer=Pe("div","flatpickr-days"),t.daysContainer.tabIndex=-1),tt(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),y.appendChild(t.innerContainer)}t.config.enableTime&&y.appendChild(Z()),hi(t.calendarContainer,"rangeMode",t.config.mode==="range"),hi(t.calendarContainer,"animate",t.config.animate===!0),hi(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(y);var Y=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!Y&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var Q=Pe("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(Q,t.element),Q.appendChild(t.element),t.altInput&&Q.appendChild(t.altInput),Q.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}s(ct,"build");function vt(y,w,N,R){var Y=Xt(w,!0),Q=Pe("span",y,w.getDate().toString());return Q.dateObj=w,Q.$i=R,Q.setAttribute("aria-label",t.formatDate(w,t.config.ariaDateFormat)),y.indexOf("hidden")===-1&&Ki(w,t.now)===0&&(t.todayDateElem=Q,Q.classList.add("today"),Q.setAttribute("aria-current","date")),Y?(Q.tabIndex=-1,hn(w)&&(Q.classList.add("selected"),t.selectedDateElem=Q,t.config.mode==="range"&&(hi(Q,"startRange",t.selectedDates[0]&&Ki(w,t.selectedDates[0],!0)===0),hi(Q,"endRange",t.selectedDates[1]&&Ki(w,t.selectedDates[1],!0)===0),y==="nextMonthDay"&&Q.classList.add("inRange")))):Q.classList.add("flatpickr-disabled"),t.config.mode==="range"&&ti(w)&&!hn(w)&&Q.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&y!=="prevMonthDay"&&R%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(w)+"</span>"),It("onDayCreate",Q),Q}s(vt,"createDay");function ht(y){y.focus(),t.config.mode==="range"&&Yt(y)}s(ht,"focusOnDayElem");function z(y){for(var w=y>0?0:t.config.showMonths-1,N=y>0?t.config.showMonths:-1,R=w;R!=N;R+=y)for(var Y=t.daysContainer.children[R],Q=y>0?0:Y.children.length-1,Ct=y>0?Y.children.length:-1,at=Q;at!=Ct;at+=y){var St=Y.children[at];if(St.className.indexOf("hidden")===-1&&Xt(St.dateObj))return St}}s(z,"getFirstAvailableDay");function ot(y,w){for(var N=y.className.indexOf("Month")===-1?y.dateObj.getMonth():t.currentMonth,R=w>0?t.config.showMonths:-1,Y=w>0?1:-1,Q=N-t.currentMonth;Q!=R;Q+=Y)for(var Ct=t.daysContainer.children[Q],at=N-t.currentMonth===Q?y.$i+w:w<0?Ct.children.length-1:0,St=Ct.children.length,$=at;$>=0&&$<St&&$!=(w>0?St:-1);$+=Y){var yt=Ct.children[$];if(yt.className.indexOf("hidden")===-1&&Xt(yt.dateObj)&&Math.abs(y.$i-$)>=Math.abs(w))return ht(yt)}t.changeMonth(Y),At(z(Y),0)}s(ot,"getNextAvailableDay");function At(y,w){var N=c(),R=le(N||document.body),Y=y!==void 0?y:R?N:t.selectedDateElem!==void 0&&le(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&le(t.todayDateElem)?t.todayDateElem:z(w>0?1:-1);Y===void 0?t._input.focus():R?ot(Y,w):ht(Y)}s(At,"focusOnDay");function V(y,w){for(var N=(new Date(y,w,1).getDay()-t.l10n.firstDayOfWeek+7)%7,R=t.utils.getDaysInMonth((w-1+12)%12,y),Y=t.utils.getDaysInMonth(w,y),Q=window.document.createDocumentFragment(),Ct=t.config.showMonths>1,at=Ct?"prevMonthDay hidden":"prevMonthDay",St=Ct?"nextMonthDay hidden":"nextMonthDay",$=R+1-N,yt=0;$<=R;$++,yt++)Q.appendChild(vt("flatpickr-day "+at,new Date(y,w-1,$),$,yt));for($=1;$<=Y;$++,yt++)Q.appendChild(vt("flatpickr-day",new Date(y,w,$),$,yt));for(var Ut=Y+1;Ut<=42-N&&(t.config.showMonths===1||yt%7!==0);Ut++,yt++)Q.appendChild(vt("flatpickr-day "+St,new Date(y,w+1,Ut%Y),Ut,yt));var Ce=Pe("div","dayContainer");return Ce.appendChild(Q),Ce}s(V,"buildMonthDays");function tt(){if(t.daysContainer!==void 0){nu(t.daysContainer),t.weekNumbers&&nu(t.weekNumbers);for(var y=document.createDocumentFragment(),w=0;w<t.config.showMonths;w++){var N=new Date(t.currentYear,t.currentMonth,1);N.setMonth(t.currentMonth+w),y.appendChild(V(N.getFullYear(),N.getMonth()))}t.daysContainer.appendChild(y),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Yt()}}s(tt,"buildDays");function ft(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var y=s(function(R){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&R<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&R>t.config.maxDate.getMonth())},"shouldBuildMonth");t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var w=0;w<12;w++)if(y(w)){var N=Pe("option","flatpickr-monthDropdown-month");N.value=new Date(t.currentYear,w).getMonth().toString(),N.textContent=ru(w,t.config.shorthandCurrentMonth,t.l10n),N.tabIndex=-1,t.currentMonth===w&&(N.selected=!0),t.monthsDropdownContainer.appendChild(N)}}}s(ft,"buildMonthSwitch");function lt(){var y=Pe("div","flatpickr-month"),w=window.document.createDocumentFragment(),N;t.config.showMonths>1||t.config.monthSelectorType==="static"?N=Pe("span","cur-month"):(t.monthsDropdownContainer=Pe("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),j(t.monthsDropdownContainer,"change",function(Ct){var at=$i(Ct),St=parseInt(at.value,10);t.changeMonth(St-t.currentMonth),It("onMonthChange")}),ft(),N=t.monthsDropdownContainer);var R=iu("cur-year",{tabindex:"-1"}),Y=R.getElementsByTagName("input")[0];Y.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&Y.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(Y.setAttribute("max",t.config.maxDate.getFullYear().toString()),Y.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var Q=Pe("div","flatpickr-current-month");return Q.appendChild(N),Q.appendChild(R),w.appendChild(Q),y.appendChild(w),{container:y,yearElement:Y,monthElement:N}}s(lt,"buildMonth");function Tt(){nu(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var y=t.config.showMonths;y--;){var w=lt();t.yearElements.push(w.yearElement),t.monthElements.push(w.monthElement),t.monthNav.appendChild(w.container)}t.monthNav.appendChild(t.nextMonthNav)}s(Tt,"buildMonths");function q(){return t.monthNav=Pe("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Pe("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Pe("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Tt(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(y){t.__hidePrevMonthArrow!==y&&(hi(t.prevMonthNav,"flatpickr-disabled",y),t.__hidePrevMonthArrow=y)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(y){t.__hideNextMonthArrow!==y&&(hi(t.nextMonthNav,"flatpickr-disabled",y),t.__hideNextMonthArrow=y)}}),t.currentYearElement=t.yearElements[0],pn(),t.monthNav}s(q,"buildMonthNav");function Z(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var y=bd(t.config);t.timeContainer=Pe("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var w=Pe("span","flatpickr-time-separator",":"),N=iu("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=N.getElementsByTagName("input")[0];var R=iu("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=R.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=ui(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?y.hours:T(y.hours)),t.minuteElement.value=ui(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():y.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(N),t.timeContainer.appendChild(w),t.timeContainer.appendChild(R),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var Y=iu("flatpickr-second");t.secondElement=Y.getElementsByTagName("input")[0],t.secondElement.value=ui(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():y.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Pe("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(Y)}return t.config.time_24hr||(t.amPM=Pe("span","flatpickr-am-pm",t.l10n.amPM[Zi((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}s(Z,"buildTime");function P(){t.weekdayContainer?nu(t.weekdayContainer):t.weekdayContainer=Pe("div","flatpickr-weekdays");for(var y=t.config.showMonths;y--;){var w=Pe("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(w)}return nt(),t.weekdayContainer}s(P,"buildWeekdays");function nt(){if(t.weekdayContainer){var y=t.l10n.firstDayOfWeek,w=f0(t.l10n.weekdays.shorthand);y>0&&y<w.length&&(w=f0(w.splice(y,w.length),w.splice(0,y)));for(var N=t.config.showMonths;N--;)t.weekdayContainer.children[N].innerHTML=`
      <span class='flatpickr-weekday'>
        `+w.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}s(nt,"updateWeekdays");function rt(){t.calendarContainer.classList.add("hasWeeks");var y=Pe("div","flatpickr-weekwrapper");y.appendChild(Pe("span","flatpickr-weekday",t.l10n.weekAbbreviation));var w=Pe("div","flatpickr-weeks");return y.appendChild(w),{weekWrapper:y,weekNumbers:w}}s(rt,"buildWeeks");function ut(y,w){w===void 0&&(w=!0);var N=w?y:y-t.currentMonth;N<0&&t._hidePrevMonthArrow===!0||N>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=N,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,It("onYearChange"),ft()),tt(),It("onMonthChange"),pn())}s(ut,"changeMonth");function Lt(y,w){if(y===void 0&&(y=!0),w===void 0&&(w=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,w===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var N=bd(t.config),R=N.hours,Y=N.minutes,Q=N.seconds;M(R,Y,Q)}t.redraw(),y&&It("onChange")}s(Lt,"clear");function _t(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),It("onClose")}s(_t,"close");function Dt(){t.config!==void 0&&It("onDestroy");for(var y=t._handlers.length;y--;)t._handlers[y].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var w=t.calendarContainer.parentNode;if(w.lastChild&&w.removeChild(w.lastChild),w.parentNode){for(;w.firstChild;)w.parentNode.insertBefore(w.firstChild,w);w.parentNode.removeChild(w)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(N){try{delete t[N]}catch{}})}s(Dt,"destroy");function Kt(y){return t.calendarContainer.contains(y)}s(Kt,"isCalendarElem");function Vt(y){if(t.isOpen&&!t.config.inline){var w=$i(y),N=Kt(w),R=w===t.input||w===t.altInput||t.element.contains(w)||y.path&&y.path.indexOf&&(~y.path.indexOf(t.input)||~y.path.indexOf(t.altInput)),Y=!R&&!N&&!Kt(y.relatedTarget),Q=!t.config.ignoredFocusElements.some(function(Ct){return Ct.contains(w)});Y&&Q&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&v(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}s(Vt,"documentClick");function Gt(y){if(!(!y||t.config.minDate&&y<t.config.minDate.getFullYear()||t.config.maxDate&&y>t.config.maxDate.getFullYear())){var w=y,N=t.currentYear!==w;t.currentYear=w||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),N&&(t.redraw(),It("onYearChange"),ft())}}s(Gt,"changeYear");function Xt(y,w){var N;w===void 0&&(w=!0);var R=t.parseDate(y,void 0,w);if(t.config.minDate&&R&&Ki(R,t.config.minDate,w!==void 0?w:!t.minDateHasTime)<0||t.config.maxDate&&R&&Ki(R,t.config.maxDate,w!==void 0?w:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(R===void 0)return!1;for(var Y=!!t.config.enable,Q=(N=t.config.enable)!==null&&N!==void 0?N:t.config.disable,Ct=0,at=void 0;Ct<Q.length;Ct++){if(at=Q[Ct],typeof at=="function"&&at(R))return Y;if(at instanceof Date&&R!==void 0&&at.getTime()===R.getTime())return Y;if(typeof at=="string"){var St=t.parseDate(at,void 0,!0);return St&&St.getTime()===R.getTime()?Y:!Y}else if(typeof at=="object"&&R!==void 0&&at.from&&at.to&&R.getTime()>=at.from.getTime()&&R.getTime()<=at.to.getTime())return Y}return!Y}s(Xt,"isEnabled");function le(y){return t.daysContainer!==void 0?y.className.indexOf("hidden")===-1&&y.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(y):!1}s(le,"isInView");function Se(y){var w=y.target===t._input,N=t._input.value.trimEnd()!==Vn();w&&N&&!(y.relatedTarget&&Kt(y.relatedTarget))&&t.setDate(t._input.value,!0,y.target===t.altInput?t.config.altFormat:t.config.dateFormat)}s(Se,"onBlur");function fe(y){var w=$i(y),N=t.config.wrap?n.contains(w):w===t._input,R=t.config.allowInput,Y=t.isOpen&&(!R||!N),Q=t.config.inline&&N&&!R;if(y.keyCode===13&&N){if(R)return t.setDate(t._input.value,!0,w===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),w.blur();t.open()}else if(Kt(w)||Y||Q){var Ct=!!t.timeContainer&&t.timeContainer.contains(w);switch(y.keyCode){case 13:Ct?(y.preventDefault(),v(),Qe()):De(y);break;case 27:y.preventDefault(),Qe();break;case 8:case 46:N&&!t.config.allowInput&&(y.preventDefault(),t.clear());break;case 37:case 39:if(!Ct&&!N){y.preventDefault();var at=c();if(t.daysContainer!==void 0&&(R===!1||at&&le(at))){var St=y.keyCode===39?1:-1;y.ctrlKey?(y.stopPropagation(),ut(St),At(z(1),0)):At(void 0,St)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:y.preventDefault();var $=y.keyCode===40?1:-1;t.daysContainer&&w.$i!==void 0||w===t.input||w===t.altInput?y.ctrlKey?(y.stopPropagation(),Gt(t.currentYear-$),At(z(1),0)):Ct||At(void 0,$*7):w===t.currentYearElement?Gt(t.currentYear-$):t.config.enableTime&&(!Ct&&t.hourElement&&t.hourElement.focus(),v(y),t._debouncedChange());break;case 9:if(Ct){var yt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(ge){return ge}),Ut=yt.indexOf(w);if(Ut!==-1){var Ce=yt[Ut+(y.shiftKey?-1:1)];y.preventDefault(),(Ce||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(w)&&y.shiftKey&&(y.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&w===t.amPM)switch(y.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],S(),en();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],S(),en();break}(N||Kt(w))&&It("onKeyDown",y)}s(fe,"onKeyDown");function Yt(y,w){if(w===void 0&&(w="flatpickr-day"),!(t.selectedDates.length!==1||y&&(!y.classList.contains(w)||y.classList.contains("flatpickr-disabled")))){for(var N=y?y.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),R=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),Y=Math.min(N,t.selectedDates[0].getTime()),Q=Math.max(N,t.selectedDates[0].getTime()),Ct=!1,at=0,St=0,$=Y;$<Q;$+=d0.DAY)Xt(new Date($),!0)||(Ct=Ct||$>Y&&$<Q,$<R&&(!at||$>at)?at=$:$>R&&(!St||$<St)&&(St=$));var yt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+w));yt.forEach(function(Ut){var Ce=Ut.dateObj,ge=Ce.getTime(),Ne=at>0&&ge<at||St>0&&ge>St;if(Ne){Ut.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Be){Ut.classList.remove(Be)});return}else if(Ct&&!Ne)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Be){Ut.classList.remove(Be)}),y!==void 0&&(y.classList.add(N<=t.selectedDates[0].getTime()?"startRange":"endRange"),R<N&&ge===R?Ut.classList.add("startRange"):R>N&&ge===R&&Ut.classList.add("endRange"),ge>=at&&(St===0||ge<=St)&&u0(ge,R,N)&&Ut.classList.add("inRange"))})}}s(Yt,"onMouseOver");function ve(){t.isOpen&&!t.config.static&&!t.config.inline&&re()}s(ve,"onResize");function Zt(y,w){if(w===void 0&&(w=t._positionElement),t.isMobile===!0){if(y){y.preventDefault();var N=$i(y);N&&N.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),It("onOpen");return}else if(t._input.disabled||t.config.inline)return;var R=t.isOpen;t.isOpen=!0,R||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),It("onOpen"),re(w)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(y===void 0||!t.timeContainer.contains(y.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}s(Zt,"open");function ie(y){return function(w){var N=t.config["_"+y+"Date"]=t.parseDate(w,t.config.dateFormat),R=t.config["_"+(y==="min"?"max":"min")+"Date"];N!==void 0&&(t[y==="min"?"minDateHasTime":"maxDateHasTime"]=N.getHours()>0||N.getMinutes()>0||N.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(Y){return Xt(Y)}),!t.selectedDates.length&&y==="min"&&O(N),en()),t.daysContainer&&(ze(),N!==void 0?t.currentYearElement[y]=N.getFullYear().toString():t.currentYearElement.removeAttribute(y),t.currentYearElement.disabled=!!R&&N!==void 0&&R.getFullYear()===N.getFullYear())}}s(ie,"minMaxDateSetter");function Jt(){var y=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],w=di(di({},JSON.parse(JSON.stringify(n.dataset||{}))),e),N={};t.config.parseDate=w.parseDate,t.config.formatDate=w.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(yt){t.config._enable=Ue(yt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(yt){t.config._disable=Ue(yt)}});var R=w.mode==="time";if(!w.dateFormat&&(w.enableTime||R)){var Y=kn.defaultConfig.dateFormat||go.dateFormat;N.dateFormat=w.noCalendar||R?"H:i"+(w.enableSeconds?":S":""):Y+" H:i"+(w.enableSeconds?":S":"")}if(w.altInput&&(w.enableTime||R)&&!w.altFormat){var Q=kn.defaultConfig.altFormat||go.altFormat;N.altFormat=w.noCalendar||R?"h:i"+(w.enableSeconds?":S K":" K"):Q+(" h:i"+(w.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:ie("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:ie("max")});var Ct=s(function(yt){return function(Ut){t.config[yt==="min"?"_minTime":"_maxTime"]=t.parseDate(Ut,"H:i:S")}},"minMaxTimeSetter");Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Ct("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Ct("max")}),w.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,N,w);for(var at=0;at<y.length;at++)t.config[y[at]]=t.config[y[at]]===!0||t.config[y[at]]==="true";dd.filter(function(yt){return t.config[yt]!==void 0}).forEach(function(yt){t.config[yt]=md(t.config[yt]||[]).map(d)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var at=0;at<t.config.plugins.length;at++){var St=t.config.plugins[at](t)||{};for(var $ in St)dd.indexOf($)>-1?t.config[$]=md(St[$]).map(d).concat(t.config[$]):typeof w[$]>"u"&&(t.config[$]=St[$])}w.altInputClass||(t.config.altInputClass=Qt().className+" "+t.config.altInputClass),It("onParseConfig")}s(Jt,"parseConfig");function Qt(){return t.config.wrap?n.querySelector("[data-input]"):n}s(Qt,"getInputElem");function Te(){typeof t.config.locale!="object"&&typeof kn.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=di(di({},kn.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?kn.l10ns[t.config.locale]:void 0),Cs.D="("+t.l10n.weekdays.shorthand.join("|")+")",Cs.l="("+t.l10n.weekdays.longhand.join("|")+")",Cs.M="("+t.l10n.months.shorthand.join("|")+")",Cs.F="("+t.l10n.months.longhand.join("|")+")",Cs.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var y=di(di({},e),JSON.parse(JSON.stringify(n.dataset||{})));y.time_24hr===void 0&&kn.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=jm(t),t.parseDate=gd({config:t.config,l10n:t.l10n})}s(Te,"setupLocale");function re(y){if(typeof t.config.position=="function")return void t.config.position(t,y);if(t.calendarContainer!==void 0){It("onPreCalendarPosition");var w=y||t._positionElement,N=Array.prototype.reduce.call(t.calendarContainer.children,function(ai,qi){return ai+qi.offsetHeight},0),R=t.calendarContainer.offsetWidth,Y=t.config.position.split(" "),Q=Y[0],Ct=Y.length>1?Y[1]:null,at=w.getBoundingClientRect(),St=window.innerHeight-at.bottom,$=Q==="above"||Q!=="below"&&St<N&&at.top>N,yt=window.pageYOffset+at.top+($?-N-2:w.offsetHeight+2);if(hi(t.calendarContainer,"arrowTop",!$),hi(t.calendarContainer,"arrowBottom",$),!t.config.inline){var Ut=window.pageXOffset+at.left,Ce=!1,ge=!1;Ct==="center"?(Ut-=(R-at.width)/2,Ce=!0):Ct==="right"&&(Ut-=R-at.width,ge=!0),hi(t.calendarContainer,"arrowLeft",!Ce&&!ge),hi(t.calendarContainer,"arrowCenter",Ce),hi(t.calendarContainer,"arrowRight",ge);var Ne=window.document.body.offsetWidth-(window.pageXOffset+at.right),Be=Ut+R>window.document.body.offsetWidth,vn=Ne+R>window.document.body.offsetWidth;if(hi(t.calendarContainer,"rightMost",Be),!t.config.static)if(t.calendarContainer.style.top=yt+"px",!Be)t.calendarContainer.style.left=Ut+"px",t.calendarContainer.style.right="auto";else if(!vn)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Ne+"px";else{var En=Le();if(En===void 0)return;var Zn=window.document.body.offsetWidth,Pi=Math.max(0,Zn/2-R/2),Ke=".flatpickr-calendar.centerMost:before",Ri=".flatpickr-calendar.centerMost:after",ei=En.cssRules.length,xi="{left:"+at.left+"px;right:auto;}";hi(t.calendarContainer,"rightMost",!1),hi(t.calendarContainer,"centerMost",!0),En.insertRule(Ke+","+Ri+xi,ei),t.calendarContainer.style.left=Pi+"px",t.calendarContainer.style.right="auto"}}}}s(re,"positionCalendar");function Le(){for(var y=null,w=0;w<document.styleSheets.length;w++){var N=document.styleSheets[w];if(N.cssRules){try{N.cssRules}catch{continue}y=N;break}}return y??ke()}s(Le,"getDocumentStyleSheet");function ke(){var y=document.createElement("style");return document.head.appendChild(y),y.sheet}s(ke,"createStyleSheet");function ze(){t.config.noCalendar||t.isMobile||(ft(),pn(),tt())}s(ze,"redraw");function Qe(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}s(Qe,"focusAndClose");function De(y){y.preventDefault(),y.stopPropagation();var w=s(function(yt){return yt.classList&&yt.classList.contains("flatpickr-day")&&!yt.classList.contains("flatpickr-disabled")&&!yt.classList.contains("notAllowed")},"isSelectable"),N=qm($i(y),w);if(N!==void 0){var R=N,Y=t.latestSelectedDateObj=new Date(R.dateObj.getTime()),Q=(Y.getMonth()<t.currentMonth||Y.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=R,t.config.mode==="single")t.selectedDates=[Y];else if(t.config.mode==="multiple"){var Ct=hn(Y);Ct?t.selectedDates.splice(parseInt(Ct),1):t.selectedDates.push(Y)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=Y,t.selectedDates.push(Y),Ki(Y,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(yt,Ut){return yt.getTime()-Ut.getTime()}));if(S(),Q){var at=t.currentYear!==Y.getFullYear();t.currentYear=Y.getFullYear(),t.currentMonth=Y.getMonth(),at&&(It("onYearChange"),ft()),It("onMonthChange")}if(pn(),tt(),en(),!Q&&t.config.mode!=="range"&&t.config.showMonths===1?ht(R):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var St=t.config.mode==="single"&&!t.config.enableTime,$=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(St||$)&&Qe()}I()}}s(De,"selectDate");var ye={locale:[Te,nt],showMonths:[Tt,m,P],minDate:[W],maxDate:[W],positionElement:[qe],clickOpens:[function(){t.config.clickOpens===!0?(j(t._input,"focus",t.open),j(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function $e(y,w){if(y!==null&&typeof y=="object"){Object.assign(t.config,y);for(var N in y)ye[N]!==void 0&&ye[N].forEach(function(R){return R()})}else t.config[y]=w,ye[y]!==void 0?ye[y].forEach(function(R){return R()}):dd.indexOf(y)>-1&&(t.config[y]=md(w));t.redraw(),en(!0)}s($e,"set");function tn(y,w){var N=[];if(y instanceof Array)N=y.map(function(R){return t.parseDate(R,w)});else if(y instanceof Date||typeof y=="number")N=[t.parseDate(y,w)];else if(typeof y=="string")switch(t.config.mode){case"single":case"time":N=[t.parseDate(y,w)];break;case"multiple":N=y.split(t.config.conjunction).map(function(R){return t.parseDate(R,w)});break;case"range":N=y.split(t.l10n.rangeSeparator).map(function(R){return t.parseDate(R,w)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(y)));t.selectedDates=t.config.allowInvalidPreload?N:N.filter(function(R){return R instanceof Date&&Xt(R,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(R,Y){return R.getTime()-Y.getTime()})}s(tn,"setSelectedDate");function me(y,w,N){if(w===void 0&&(w=!1),N===void 0&&(N=t.config.dateFormat),y!==0&&!y||y instanceof Array&&y.length===0)return t.clear(w);tn(y,N),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),W(void 0,w),O(),t.selectedDates.length===0&&t.clear(!1),en(w),w&&It("onChange")}s(me,"setDate");function Ue(y){return y.slice().map(function(w){return typeof w=="string"||typeof w=="number"||w instanceof Date?t.parseDate(w,void 0,!0):w&&typeof w=="object"&&w.from&&w.to?{from:t.parseDate(w.from,void 0),to:t.parseDate(w.to,void 0)}:w}).filter(function(w){return w})}s(Ue,"parseDateRules");function Xe(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var y=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);y&&tn(y,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}s(Xe,"setupDates");function Je(){if(t.input=Qt(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Pe(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),qe()}s(Je,"setupInputs");function qe(){t._positionElement=t.config.positionElement||t._input}s(qe,"updatePositionElement");function oe(){var y=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Pe("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=y,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=y==="datetime-local"?"Y-m-d\\TH:i:S":y==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}j(t.mobileInput,"change",function(w){t.setDate($i(w).value,!1,t.mobileFormatStr),It("onChange"),It("onClose")})}s(oe,"setupMobile");function Ae(y){if(t.isOpen===!0)return t.close();t.open(y)}s(Ae,"toggle");function It(y,w){if(t.config!==void 0){var N=t.config[y];if(N!==void 0&&N.length>0)for(var R=0;N[R]&&R<N.length;R++)N[R](t.selectedDates,t.input.value,t,w);y==="onChange"&&(t.input.dispatchEvent(ue("change")),t.input.dispatchEvent(ue("input")))}}s(It,"triggerEvent");function ue(y){var w=document.createEvent("Event");return w.initEvent(y,!0,!0),w}s(ue,"createEvent");function hn(y){for(var w=0;w<t.selectedDates.length;w++){var N=t.selectedDates[w];if(N instanceof Date&&Ki(N,y)===0)return""+w}return!1}s(hn,"isDateSelected");function ti(y){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Ki(y,t.selectedDates[0])>=0&&Ki(y,t.selectedDates[1])<=0}s(ti,"isDateInRange");function pn(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(y,w){var N=new Date(t.currentYear,t.currentMonth,1);N.setMonth(t.currentMonth+w),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[w].textContent=ru(N.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=N.getMonth().toString(),y.value=N.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}s(pn,"updateNavigationCurrentMonth");function Vn(y){var w=y||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(N){return t.formatDate(N,w)}).filter(function(N,R,Y){return t.config.mode!=="range"||t.config.enableTime||Y.indexOf(N)===R}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}s(Vn,"getDateStr");function en(y){y===void 0&&(y=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Vn(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Vn(t.config.altFormat)),y!==!1&&It("onValueUpdate")}s(en,"updateValue");function gr(y){var w=$i(y),N=t.prevMonthNav.contains(w),R=t.nextMonthNav.contains(w);N||R?ut(N?-1:1):t.yearElements.indexOf(w)>=0?w.select():w.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):w.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}s(gr,"onMonthNavClick");function sr(y){y.preventDefault();var w=y.type==="keydown",N=$i(y),R=N;t.amPM!==void 0&&N===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Zi(t.amPM.textContent===t.l10n.amPM[0])]);var Y=parseFloat(R.getAttribute("min")),Q=parseFloat(R.getAttribute("max")),Ct=parseFloat(R.getAttribute("step")),at=parseInt(R.value,10),St=y.delta||(w?y.which===38?1:-1:0),$=at+Ct*St;if(typeof R.value<"u"&&R.value.length===2){var yt=R===t.hourElement,Ut=R===t.minuteElement;$<Y?($=Q+$+Zi(!yt)+(Zi(yt)&&Zi(!t.amPM)),Ut&&X(void 0,-1,t.hourElement)):$>Q&&($=R===t.hourElement?$-Q-Zi(!t.amPM):Y,Ut&&X(void 0,1,t.hourElement)),t.amPM&&yt&&(Ct===1?$+at===23:Math.abs($-at)>Ct)&&(t.amPM.textContent=t.l10n.amPM[Zi(t.amPM.textContent===t.l10n.amPM[0])]),R.value=ui($)}}return s(sr,"timeWrapper"),o(),t}s(OA,"FlatpickrInstance");function ul(n,e){for(var t=Array.prototype.slice.call(n).filter(function(d){return d instanceof HTMLElement}),i=[],o=0;o<t.length;o++){var c=t[o];try{if(c.getAttribute("data-fp-omit")!==null)continue;c._flatpickr!==void 0&&(c._flatpickr.destroy(),c._flatpickr=void 0),c._flatpickr=OA(c,e||{}),i.push(c._flatpickr)}catch(d){console.error(d)}}return i.length===1?i[0]:i}s(ul,"_flatpickr");typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return ul(this,n)},HTMLElement.prototype.flatpickr=function(n){return ul([this],n)});var kn=s(function(n,e){return typeof n=="string"?ul(window.document.querySelectorAll(n),e):n instanceof Node?ul([n],e):ul(n,e)},"flatpickr");kn.defaultConfig={};kn.l10ns={en:di({},pd),default:di({},pd)};kn.localize=function(n){kn.l10ns.default=di(di({},kn.l10ns.default),n)};kn.setDefaults=function(n){kn.defaultConfig=di(di({},kn.defaultConfig),n)};kn.parseDate=gd({});kn.formatDate=jm({});kn.compareDates=Ki;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return ul(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=kn);var p0=kn;var su=class extends Ge{static{s(this,"DatetimeSelectController")}connect(){let e={enableTime:!0,time_24hr:!0,defaultMinute:0},t=p0(this.querySelector("input"),Object.assign(e,this.appendage()))}appendage(){return this.dataset.inline?{inline:!0}:{}}};var ou=class extends Ge{static{s(this,"ImagePreviewController")}static targets=["container"];preview(e){let t=e.currentTarget.files[0];if(!t.type.startsWith("image/"))return;let i=this.imageElement(t);this.containerTarget.innerHTML="",this.containerTarget.appendChild(i),this.generatePreview(t,i)}generatePreview(e,t){let i=new FileReader;i.onload=function(o){return function(c){o.src=c.target.result}}(t),i.readAsDataURL(e)}imageElement(e){let t=document.createElement("img");return t.file=e,t}};var yd=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],vo={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var _d={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},wd=_d;var fi=s(function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},"pad"),Yi=s(function(n){return n===!0?1:0},"int");function Fm(n,e){var t;return function(){var i=this,o=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(i,o)},e)}}s(Fm,"debounce");var xd=s(function(n){return n instanceof Array?n:[n]},"arrayify");function pi(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}s(pi,"toggleClass");function Re(n,e,t){var i=window.document.createElement(n);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}s(Re,"createElement");function au(n){for(;n.firstChild;)n.removeChild(n.firstChild)}s(au,"clearNode");function Hm(n,e){if(e(n))return n;if(n.parentNode)return Hm(n.parentNode,e)}s(Hm,"findParent");function lu(n,e){var t=Re("div","numInputWrapper"),i=Re("input","numInput "+n),o=Re("span","arrowUp"),c=Re("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var d in e)i.setAttribute(d,e[d]);return t.appendChild(i),t.appendChild(o),t.appendChild(c),t}s(lu,"createNumberInput");function Gi(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}s(Gi,"getEventTarget");var zm=s(function(){},"doNothing"),cu=s(function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},"monthToStr"),m0={D:zm,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Yi(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var i=parseInt(e),o=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return o.setDate(o.getDate()-o.getDay()+t.firstDayOfWeek),o},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:zm,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:zm,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Ls={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},hl={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[hl.w(n,e,t)]},F:function(n,e,t){return cu(hl.n(n,e,t)-1,!1,e)},G:function(n,e,t){return fi(hl.h(n,e,t))},H:function(n){return fi(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Yi(n.getHours()>11)]},M:function(n,e){return cu(n.getMonth(),!0,e)},S:function(n){return fi(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return fi(n.getFullYear(),4)},d:function(n){return fi(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return fi(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return fi(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}};var Um=s(function(n){var e=n.config,t=e===void 0?vo:e,i=n.l10n,o=i===void 0?_d:i,c=n.isMobile,d=c===void 0?!1:c;return function(m,v,_){var T=_||o;return t.formatDate!==void 0&&!d?t.formatDate(m,v,T):v.split("").map(function(S,O,M){return hl[S]&&M[O-1]!=="\\"?hl[S](m,T,t):S!=="\\"?S:""}).join("")}},"createDateFormatter"),Ed=s(function(n){var e=n.config,t=e===void 0?vo:e,i=n.l10n,o=i===void 0?_d:i;return function(c,d,m,v){if(!(c!==0&&!c)){var _=v||o,T,S=c;if(c instanceof Date)T=new Date(c.getTime());else if(typeof c!="string"&&c.toFixed!==void 0)T=new Date(c);else if(typeof c=="string"){var O=d||(t||vo).dateFormat,M=String(c).trim();if(M==="today")T=new Date,m=!0;else if(t&&t.parseDate)T=t.parseDate(c,O);else if(/Z$/.test(M)||/GMT$/.test(M))T=new Date(c);else{for(var D=void 0,j=[],I=0,B=0,W="";I<O.length;I++){var G=O[I],X=G==="\\",ct=O[I-1]==="\\"||X;if(Ls[G]&&!ct){W+=Ls[G];var vt=new RegExp(W).exec(c);vt&&(D=!0)&&j[G!=="Y"?"push":"unshift"]({fn:m0[G],val:vt[++B]})}else X||(W+=".")}T=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),j.forEach(function(ht){var z=ht.fn,ot=ht.val;return T=z(T,ot,_)||T}),T=D?T:void 0}}if(!(T instanceof Date&&!isNaN(T.getTime()))){t.errorHandler(new Error("Invalid date provided: "+S));return}return m===!0&&T.setHours(0,0,0,0),T}}},"createDateParser");function Xi(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}s(Xi,"compareDates");var g0=s(function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},"isBetween"),Td=s(function(n,e,t){return n*3600+e*60+t},"calculateSecondsSinceMidnight"),v0=s(function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},"parseSeconds"),b0={DAY:864e5};function Sd(n){var e=n.defaultHour,t=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var o=n.minDate.getHours(),c=n.minDate.getMinutes(),d=n.minDate.getSeconds();e<o&&(e=o),e===o&&t<c&&(t=c),e===o&&t===c&&i<d&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var m=n.maxDate.getHours(),v=n.maxDate.getMinutes();e=Math.min(e,m),e===m&&(t=Math.min(v,t)),e===m&&t===v&&(i=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}s(Sd,"getDefaultHours");typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=s(function(m){m&&Object.keys(m).forEach(function(v){return n[v]=m[v]})},"_loop_1"),o=0,c=e;o<c.length;o++){var d=c[o];i(d)}return n});var mi=function(){return mi=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},mi.apply(this,arguments)},y0=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],d=0,m=c.length;d<m;d++,o++)i[o]=c[d];return i},MA=300;function kA(n,e){var t={config:mi(mi({},vo),Hn.defaultConfig),l10n:wd};t.parseDate=Ed({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=j,t._setHoursFromDate=O,t._positionCalendar=re,t.changeMonth=ut,t.changeYear=Gt,t.clear=Lt,t.close=_t,t.onMouseOver=Yt,t._createElement=Re,t.createDay=vt,t.destroy=Dt,t.isEnabled=Xt,t.jumpToDate=W,t.updateValue=en,t.open=Zt,t.redraw=ze,t.set=$e,t.setDate=me,t.toggle=Ae;function i(){t.utils={getDaysInMonth:function(y,w){return y===void 0&&(y=t.currentMonth),w===void 0&&(w=t.currentYear),y===1&&(w%4===0&&w%100!==0||w%400===0)?29:t.l10n.daysInMonth[y]}}}s(i,"setupHelperFunctions");function o(){t.element=t.input=n,t.isOpen=!1,Jt(),Te(),Je(),Xe(),i(),t.isMobile||ct(),B(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&O(t.config.noCalendar?t.latestSelectedDateObj:void 0),en(!1)),m();var y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&y&&re(),It("onReady")}s(o,"init");function c(){var y;return((y=t.calendarContainer)===null||y===void 0?void 0:y.getRootNode()).activeElement||document.activeElement}s(c,"getClosestActiveElement");function d(y){return y.bind(t)}s(d,"bindToInstance");function m(){var y=t.config;y.weekNumbers===!1&&y.showMonths===1||y.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var w=(t.days.offsetWidth+1)*y.showMonths;t.daysContainer.style.width=w+"px",t.calendarContainer.style.width=w+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}s(m,"setCalendarWidth");function v(y){if(t.selectedDates.length===0){var w=t.config.minDate===void 0||Xi(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),N=Sd(t.config);w.setHours(N.hours,N.minutes,N.seconds,w.getMilliseconds()),t.selectedDates=[w],t.latestSelectedDateObj=w}y!==void 0&&y.type!=="blur"&&sr(y);var R=t._input.value;S(),en(),t._input.value!==R&&t._debouncedChange()}s(v,"updateTime");function _(y,w){return y%12+12*Yi(w===t.l10n.amPM[1])}s(_,"ampm2military");function T(y){switch(y%24){case 0:case 12:return 12;default:return y%12}}s(T,"military2ampm");function S(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var y=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,w=(parseInt(t.minuteElement.value,10)||0)%60,N=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(y=_(y,t.amPM.textContent));var R=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Xi(t.latestSelectedDateObj,t.config.minDate,!0)===0,Y=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Xi(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var Q=Td(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Ct=Td(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),at=Td(y,w,N);if(at>Ct&&at<Q){var St=v0(Q);y=St[0],w=St[1],N=St[2]}}else{if(Y){var $=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;y=Math.min(y,$.getHours()),y===$.getHours()&&(w=Math.min(w,$.getMinutes())),w===$.getMinutes()&&(N=Math.min(N,$.getSeconds()))}if(R){var yt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;y=Math.max(y,yt.getHours()),y===yt.getHours()&&w<yt.getMinutes()&&(w=yt.getMinutes()),w===yt.getMinutes()&&(N=Math.max(N,yt.getSeconds()))}}M(y,w,N)}}s(S,"setHoursFromInputs");function O(y){var w=y||t.latestSelectedDateObj;w&&w instanceof Date&&M(w.getHours(),w.getMinutes(),w.getSeconds())}s(O,"setHoursFromDate");function M(y,w,N){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(y%24,w,N||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=fi(t.config.time_24hr?y:(12+y)%12+12*Yi(y%12===0)),t.minuteElement.value=fi(w),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Yi(y>=12)]),t.secondElement!==void 0&&(t.secondElement.value=fi(N)))}s(M,"setHours");function D(y){var w=Gi(y),N=parseInt(w.value)+(y.delta||0);(N/1e3>1||y.key==="Enter"&&!/[^\d]/.test(N.toString()))&&Gt(N)}s(D,"onYearInput");function j(y,w,N,R){if(w instanceof Array)return w.forEach(function(Y){return j(y,Y,N,R)});if(y instanceof Array)return y.forEach(function(Y){return j(Y,w,N,R)});y.addEventListener(w,N,R),t._handlers.push({remove:function(){return y.removeEventListener(w,N,R)}})}s(j,"bind");function I(){It("onChange")}s(I,"triggerChange");function B(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(N){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+N+"]"),function(R){return j(R,"click",t[N])})}),t.isMobile){oe();return}var y=Fm(ve,50);if(t._debouncedChange=Fm(I,MA),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&j(t.daysContainer,"mouseover",function(N){t.config.mode==="range"&&Yt(Gi(N))}),j(t._input,"keydown",fe),t.calendarContainer!==void 0&&j(t.calendarContainer,"keydown",fe),!t.config.inline&&!t.config.static&&j(window,"resize",y),window.ontouchstart!==void 0?j(window.document,"touchstart",Vt):j(window.document,"mousedown",Vt),j(window.document,"focus",Vt,{capture:!0}),t.config.clickOpens===!0&&(j(t._input,"focus",t.open),j(t._input,"click",t.open)),t.daysContainer!==void 0&&(j(t.monthNav,"click",gr),j(t.monthNav,["keyup","increment"],D),j(t.daysContainer,"click",De)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var w=s(function(N){return Gi(N).select()},"selText");j(t.timeContainer,["increment"],v),j(t.timeContainer,"blur",v,{capture:!0}),j(t.timeContainer,"click",G),j([t.hourElement,t.minuteElement],["focus","click"],w),t.secondElement!==void 0&&j(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&j(t.amPM,"click",function(N){v(N)})}t.config.allowInput&&j(t._input,"blur",Se)}s(B,"bindEvents");function W(y,w){var N=y!==void 0?t.parseDate(y):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),R=t.currentYear,Y=t.currentMonth;try{N!==void 0&&(t.currentYear=N.getFullYear(),t.currentMonth=N.getMonth())}catch(Q){Q.message="Invalid date supplied: "+N,t.config.errorHandler(Q)}w&&t.currentYear!==R&&(It("onYearChange"),ft()),w&&(t.currentYear!==R||t.currentMonth!==Y)&&It("onMonthChange"),t.redraw()}s(W,"jumpToDate");function G(y){var w=Gi(y);~w.className.indexOf("arrow")&&X(y,w.classList.contains("arrowUp")?1:-1)}s(G,"timeIncrement");function X(y,w,N){var R=y&&Gi(y),Y=N||R&&R.parentNode&&R.parentNode.firstChild,Q=ue("increment");Q.delta=w,Y&&Y.dispatchEvent(Q)}s(X,"incrementNumInput");function ct(){var y=window.document.createDocumentFragment();if(t.calendarContainer=Re("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(y.appendChild(q()),t.innerContainer=Re("div","flatpickr-innerContainer"),t.config.weekNumbers){var w=rt(),N=w.weekWrapper,R=w.weekNumbers;t.innerContainer.appendChild(N),t.weekNumbers=R,t.weekWrapper=N}t.rContainer=Re("div","flatpickr-rContainer"),t.rContainer.appendChild(P()),t.daysContainer||(t.daysContainer=Re("div","flatpickr-days"),t.daysContainer.tabIndex=-1),tt(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),y.appendChild(t.innerContainer)}t.config.enableTime&&y.appendChild(Z()),pi(t.calendarContainer,"rangeMode",t.config.mode==="range"),pi(t.calendarContainer,"animate",t.config.animate===!0),pi(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(y);var Y=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!Y&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var Q=Re("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(Q,t.element),Q.appendChild(t.element),t.altInput&&Q.appendChild(t.altInput),Q.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}s(ct,"build");function vt(y,w,N,R){var Y=Xt(w,!0),Q=Re("span",y,w.getDate().toString());return Q.dateObj=w,Q.$i=R,Q.setAttribute("aria-label",t.formatDate(w,t.config.ariaDateFormat)),y.indexOf("hidden")===-1&&Xi(w,t.now)===0&&(t.todayDateElem=Q,Q.classList.add("today"),Q.setAttribute("aria-current","date")),Y?(Q.tabIndex=-1,hn(w)&&(Q.classList.add("selected"),t.selectedDateElem=Q,t.config.mode==="range"&&(pi(Q,"startRange",t.selectedDates[0]&&Xi(w,t.selectedDates[0],!0)===0),pi(Q,"endRange",t.selectedDates[1]&&Xi(w,t.selectedDates[1],!0)===0),y==="nextMonthDay"&&Q.classList.add("inRange")))):Q.classList.add("flatpickr-disabled"),t.config.mode==="range"&&ti(w)&&!hn(w)&&Q.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&y!=="prevMonthDay"&&R%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(w)+"</span>"),It("onDayCreate",Q),Q}s(vt,"createDay");function ht(y){y.focus(),t.config.mode==="range"&&Yt(y)}s(ht,"focusOnDayElem");function z(y){for(var w=y>0?0:t.config.showMonths-1,N=y>0?t.config.showMonths:-1,R=w;R!=N;R+=y)for(var Y=t.daysContainer.children[R],Q=y>0?0:Y.children.length-1,Ct=y>0?Y.children.length:-1,at=Q;at!=Ct;at+=y){var St=Y.children[at];if(St.className.indexOf("hidden")===-1&&Xt(St.dateObj))return St}}s(z,"getFirstAvailableDay");function ot(y,w){for(var N=y.className.indexOf("Month")===-1?y.dateObj.getMonth():t.currentMonth,R=w>0?t.config.showMonths:-1,Y=w>0?1:-1,Q=N-t.currentMonth;Q!=R;Q+=Y)for(var Ct=t.daysContainer.children[Q],at=N-t.currentMonth===Q?y.$i+w:w<0?Ct.children.length-1:0,St=Ct.children.length,$=at;$>=0&&$<St&&$!=(w>0?St:-1);$+=Y){var yt=Ct.children[$];if(yt.className.indexOf("hidden")===-1&&Xt(yt.dateObj)&&Math.abs(y.$i-$)>=Math.abs(w))return ht(yt)}t.changeMonth(Y),At(z(Y),0)}s(ot,"getNextAvailableDay");function At(y,w){var N=c(),R=le(N||document.body),Y=y!==void 0?y:R?N:t.selectedDateElem!==void 0&&le(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&le(t.todayDateElem)?t.todayDateElem:z(w>0?1:-1);Y===void 0?t._input.focus():R?ot(Y,w):ht(Y)}s(At,"focusOnDay");function V(y,w){for(var N=(new Date(y,w,1).getDay()-t.l10n.firstDayOfWeek+7)%7,R=t.utils.getDaysInMonth((w-1+12)%12,y),Y=t.utils.getDaysInMonth(w,y),Q=window.document.createDocumentFragment(),Ct=t.config.showMonths>1,at=Ct?"prevMonthDay hidden":"prevMonthDay",St=Ct?"nextMonthDay hidden":"nextMonthDay",$=R+1-N,yt=0;$<=R;$++,yt++)Q.appendChild(vt("flatpickr-day "+at,new Date(y,w-1,$),$,yt));for($=1;$<=Y;$++,yt++)Q.appendChild(vt("flatpickr-day",new Date(y,w,$),$,yt));for(var Ut=Y+1;Ut<=42-N&&(t.config.showMonths===1||yt%7!==0);Ut++,yt++)Q.appendChild(vt("flatpickr-day "+St,new Date(y,w+1,Ut%Y),Ut,yt));var Ce=Re("div","dayContainer");return Ce.appendChild(Q),Ce}s(V,"buildMonthDays");function tt(){if(t.daysContainer!==void 0){au(t.daysContainer),t.weekNumbers&&au(t.weekNumbers);for(var y=document.createDocumentFragment(),w=0;w<t.config.showMonths;w++){var N=new Date(t.currentYear,t.currentMonth,1);N.setMonth(t.currentMonth+w),y.appendChild(V(N.getFullYear(),N.getMonth()))}t.daysContainer.appendChild(y),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Yt()}}s(tt,"buildDays");function ft(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var y=s(function(R){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&R<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&R>t.config.maxDate.getMonth())},"shouldBuildMonth");t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var w=0;w<12;w++)if(y(w)){var N=Re("option","flatpickr-monthDropdown-month");N.value=new Date(t.currentYear,w).getMonth().toString(),N.textContent=cu(w,t.config.shorthandCurrentMonth,t.l10n),N.tabIndex=-1,t.currentMonth===w&&(N.selected=!0),t.monthsDropdownContainer.appendChild(N)}}}s(ft,"buildMonthSwitch");function lt(){var y=Re("div","flatpickr-month"),w=window.document.createDocumentFragment(),N;t.config.showMonths>1||t.config.monthSelectorType==="static"?N=Re("span","cur-month"):(t.monthsDropdownContainer=Re("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),j(t.monthsDropdownContainer,"change",function(Ct){var at=Gi(Ct),St=parseInt(at.value,10);t.changeMonth(St-t.currentMonth),It("onMonthChange")}),ft(),N=t.monthsDropdownContainer);var R=lu("cur-year",{tabindex:"-1"}),Y=R.getElementsByTagName("input")[0];Y.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&Y.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(Y.setAttribute("max",t.config.maxDate.getFullYear().toString()),Y.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var Q=Re("div","flatpickr-current-month");return Q.appendChild(N),Q.appendChild(R),w.appendChild(Q),y.appendChild(w),{container:y,yearElement:Y,monthElement:N}}s(lt,"buildMonth");function Tt(){au(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var y=t.config.showMonths;y--;){var w=lt();t.yearElements.push(w.yearElement),t.monthElements.push(w.monthElement),t.monthNav.appendChild(w.container)}t.monthNav.appendChild(t.nextMonthNav)}s(Tt,"buildMonths");function q(){return t.monthNav=Re("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Re("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Re("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Tt(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(y){t.__hidePrevMonthArrow!==y&&(pi(t.prevMonthNav,"flatpickr-disabled",y),t.__hidePrevMonthArrow=y)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(y){t.__hideNextMonthArrow!==y&&(pi(t.nextMonthNav,"flatpickr-disabled",y),t.__hideNextMonthArrow=y)}}),t.currentYearElement=t.yearElements[0],pn(),t.monthNav}s(q,"buildMonthNav");function Z(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var y=Sd(t.config);t.timeContainer=Re("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var w=Re("span","flatpickr-time-separator",":"),N=lu("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=N.getElementsByTagName("input")[0];var R=lu("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=R.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=fi(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?y.hours:T(y.hours)),t.minuteElement.value=fi(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():y.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(N),t.timeContainer.appendChild(w),t.timeContainer.appendChild(R),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var Y=lu("flatpickr-second");t.secondElement=Y.getElementsByTagName("input")[0],t.secondElement.value=fi(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():y.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Re("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(Y)}return t.config.time_24hr||(t.amPM=Re("span","flatpickr-am-pm",t.l10n.amPM[Yi((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}s(Z,"buildTime");function P(){t.weekdayContainer?au(t.weekdayContainer):t.weekdayContainer=Re("div","flatpickr-weekdays");for(var y=t.config.showMonths;y--;){var w=Re("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(w)}return nt(),t.weekdayContainer}s(P,"buildWeekdays");function nt(){if(t.weekdayContainer){var y=t.l10n.firstDayOfWeek,w=y0(t.l10n.weekdays.shorthand);y>0&&y<w.length&&(w=y0(w.splice(y,w.length),w.splice(0,y)));for(var N=t.config.showMonths;N--;)t.weekdayContainer.children[N].innerHTML=`
      <span class='flatpickr-weekday'>
        `+w.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}s(nt,"updateWeekdays");function rt(){t.calendarContainer.classList.add("hasWeeks");var y=Re("div","flatpickr-weekwrapper");y.appendChild(Re("span","flatpickr-weekday",t.l10n.weekAbbreviation));var w=Re("div","flatpickr-weeks");return y.appendChild(w),{weekWrapper:y,weekNumbers:w}}s(rt,"buildWeeks");function ut(y,w){w===void 0&&(w=!0);var N=w?y:y-t.currentMonth;N<0&&t._hidePrevMonthArrow===!0||N>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=N,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,It("onYearChange"),ft()),tt(),It("onMonthChange"),pn())}s(ut,"changeMonth");function Lt(y,w){if(y===void 0&&(y=!0),w===void 0&&(w=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,w===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var N=Sd(t.config),R=N.hours,Y=N.minutes,Q=N.seconds;M(R,Y,Q)}t.redraw(),y&&It("onChange")}s(Lt,"clear");function _t(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),It("onClose")}s(_t,"close");function Dt(){t.config!==void 0&&It("onDestroy");for(var y=t._handlers.length;y--;)t._handlers[y].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var w=t.calendarContainer.parentNode;if(w.lastChild&&w.removeChild(w.lastChild),w.parentNode){for(;w.firstChild;)w.parentNode.insertBefore(w.firstChild,w);w.parentNode.removeChild(w)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(N){try{delete t[N]}catch{}})}s(Dt,"destroy");function Kt(y){return t.calendarContainer.contains(y)}s(Kt,"isCalendarElem");function Vt(y){if(t.isOpen&&!t.config.inline){var w=Gi(y),N=Kt(w),R=w===t.input||w===t.altInput||t.element.contains(w)||y.path&&y.path.indexOf&&(~y.path.indexOf(t.input)||~y.path.indexOf(t.altInput)),Y=!R&&!N&&!Kt(y.relatedTarget),Q=!t.config.ignoredFocusElements.some(function(Ct){return Ct.contains(w)});Y&&Q&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&v(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}s(Vt,"documentClick");function Gt(y){if(!(!y||t.config.minDate&&y<t.config.minDate.getFullYear()||t.config.maxDate&&y>t.config.maxDate.getFullYear())){var w=y,N=t.currentYear!==w;t.currentYear=w||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),N&&(t.redraw(),It("onYearChange"),ft())}}s(Gt,"changeYear");function Xt(y,w){var N;w===void 0&&(w=!0);var R=t.parseDate(y,void 0,w);if(t.config.minDate&&R&&Xi(R,t.config.minDate,w!==void 0?w:!t.minDateHasTime)<0||t.config.maxDate&&R&&Xi(R,t.config.maxDate,w!==void 0?w:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(R===void 0)return!1;for(var Y=!!t.config.enable,Q=(N=t.config.enable)!==null&&N!==void 0?N:t.config.disable,Ct=0,at=void 0;Ct<Q.length;Ct++){if(at=Q[Ct],typeof at=="function"&&at(R))return Y;if(at instanceof Date&&R!==void 0&&at.getTime()===R.getTime())return Y;if(typeof at=="string"){var St=t.parseDate(at,void 0,!0);return St&&St.getTime()===R.getTime()?Y:!Y}else if(typeof at=="object"&&R!==void 0&&at.from&&at.to&&R.getTime()>=at.from.getTime()&&R.getTime()<=at.to.getTime())return Y}return!Y}s(Xt,"isEnabled");function le(y){return t.daysContainer!==void 0?y.className.indexOf("hidden")===-1&&y.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(y):!1}s(le,"isInView");function Se(y){var w=y.target===t._input,N=t._input.value.trimEnd()!==Vn();w&&N&&!(y.relatedTarget&&Kt(y.relatedTarget))&&t.setDate(t._input.value,!0,y.target===t.altInput?t.config.altFormat:t.config.dateFormat)}s(Se,"onBlur");function fe(y){var w=Gi(y),N=t.config.wrap?n.contains(w):w===t._input,R=t.config.allowInput,Y=t.isOpen&&(!R||!N),Q=t.config.inline&&N&&!R;if(y.keyCode===13&&N){if(R)return t.setDate(t._input.value,!0,w===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),w.blur();t.open()}else if(Kt(w)||Y||Q){var Ct=!!t.timeContainer&&t.timeContainer.contains(w);switch(y.keyCode){case 13:Ct?(y.preventDefault(),v(),Qe()):De(y);break;case 27:y.preventDefault(),Qe();break;case 8:case 46:N&&!t.config.allowInput&&(y.preventDefault(),t.clear());break;case 37:case 39:if(!Ct&&!N){y.preventDefault();var at=c();if(t.daysContainer!==void 0&&(R===!1||at&&le(at))){var St=y.keyCode===39?1:-1;y.ctrlKey?(y.stopPropagation(),ut(St),At(z(1),0)):At(void 0,St)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:y.preventDefault();var $=y.keyCode===40?1:-1;t.daysContainer&&w.$i!==void 0||w===t.input||w===t.altInput?y.ctrlKey?(y.stopPropagation(),Gt(t.currentYear-$),At(z(1),0)):Ct||At(void 0,$*7):w===t.currentYearElement?Gt(t.currentYear-$):t.config.enableTime&&(!Ct&&t.hourElement&&t.hourElement.focus(),v(y),t._debouncedChange());break;case 9:if(Ct){var yt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(ge){return ge}),Ut=yt.indexOf(w);if(Ut!==-1){var Ce=yt[Ut+(y.shiftKey?-1:1)];y.preventDefault(),(Ce||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(w)&&y.shiftKey&&(y.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&w===t.amPM)switch(y.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],S(),en();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],S(),en();break}(N||Kt(w))&&It("onKeyDown",y)}s(fe,"onKeyDown");function Yt(y,w){if(w===void 0&&(w="flatpickr-day"),!(t.selectedDates.length!==1||y&&(!y.classList.contains(w)||y.classList.contains("flatpickr-disabled")))){for(var N=y?y.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),R=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),Y=Math.min(N,t.selectedDates[0].getTime()),Q=Math.max(N,t.selectedDates[0].getTime()),Ct=!1,at=0,St=0,$=Y;$<Q;$+=b0.DAY)Xt(new Date($),!0)||(Ct=Ct||$>Y&&$<Q,$<R&&(!at||$>at)?at=$:$>R&&(!St||$<St)&&(St=$));var yt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+w));yt.forEach(function(Ut){var Ce=Ut.dateObj,ge=Ce.getTime(),Ne=at>0&&ge<at||St>0&&ge>St;if(Ne){Ut.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Be){Ut.classList.remove(Be)});return}else if(Ct&&!Ne)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Be){Ut.classList.remove(Be)}),y!==void 0&&(y.classList.add(N<=t.selectedDates[0].getTime()?"startRange":"endRange"),R<N&&ge===R?Ut.classList.add("startRange"):R>N&&ge===R&&Ut.classList.add("endRange"),ge>=at&&(St===0||ge<=St)&&g0(ge,R,N)&&Ut.classList.add("inRange"))})}}s(Yt,"onMouseOver");function ve(){t.isOpen&&!t.config.static&&!t.config.inline&&re()}s(ve,"onResize");function Zt(y,w){if(w===void 0&&(w=t._positionElement),t.isMobile===!0){if(y){y.preventDefault();var N=Gi(y);N&&N.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),It("onOpen");return}else if(t._input.disabled||t.config.inline)return;var R=t.isOpen;t.isOpen=!0,R||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),It("onOpen"),re(w)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(y===void 0||!t.timeContainer.contains(y.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}s(Zt,"open");function ie(y){return function(w){var N=t.config["_"+y+"Date"]=t.parseDate(w,t.config.dateFormat),R=t.config["_"+(y==="min"?"max":"min")+"Date"];N!==void 0&&(t[y==="min"?"minDateHasTime":"maxDateHasTime"]=N.getHours()>0||N.getMinutes()>0||N.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(Y){return Xt(Y)}),!t.selectedDates.length&&y==="min"&&O(N),en()),t.daysContainer&&(ze(),N!==void 0?t.currentYearElement[y]=N.getFullYear().toString():t.currentYearElement.removeAttribute(y),t.currentYearElement.disabled=!!R&&N!==void 0&&R.getFullYear()===N.getFullYear())}}s(ie,"minMaxDateSetter");function Jt(){var y=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],w=mi(mi({},JSON.parse(JSON.stringify(n.dataset||{}))),e),N={};t.config.parseDate=w.parseDate,t.config.formatDate=w.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(yt){t.config._enable=Ue(yt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(yt){t.config._disable=Ue(yt)}});var R=w.mode==="time";if(!w.dateFormat&&(w.enableTime||R)){var Y=Hn.defaultConfig.dateFormat||vo.dateFormat;N.dateFormat=w.noCalendar||R?"H:i"+(w.enableSeconds?":S":""):Y+" H:i"+(w.enableSeconds?":S":"")}if(w.altInput&&(w.enableTime||R)&&!w.altFormat){var Q=Hn.defaultConfig.altFormat||vo.altFormat;N.altFormat=w.noCalendar||R?"h:i"+(w.enableSeconds?":S K":" K"):Q+(" h:i"+(w.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:ie("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:ie("max")});var Ct=s(function(yt){return function(Ut){t.config[yt==="min"?"_minTime":"_maxTime"]=t.parseDate(Ut,"H:i:S")}},"minMaxTimeSetter");Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Ct("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Ct("max")}),w.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,N,w);for(var at=0;at<y.length;at++)t.config[y[at]]=t.config[y[at]]===!0||t.config[y[at]]==="true";yd.filter(function(yt){return t.config[yt]!==void 0}).forEach(function(yt){t.config[yt]=xd(t.config[yt]||[]).map(d)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var at=0;at<t.config.plugins.length;at++){var St=t.config.plugins[at](t)||{};for(var $ in St)yd.indexOf($)>-1?t.config[$]=xd(St[$]).map(d).concat(t.config[$]):typeof w[$]>"u"&&(t.config[$]=St[$])}w.altInputClass||(t.config.altInputClass=Qt().className+" "+t.config.altInputClass),It("onParseConfig")}s(Jt,"parseConfig");function Qt(){return t.config.wrap?n.querySelector("[data-input]"):n}s(Qt,"getInputElem");function Te(){typeof t.config.locale!="object"&&typeof Hn.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=mi(mi({},Hn.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Hn.l10ns[t.config.locale]:void 0),Ls.D="("+t.l10n.weekdays.shorthand.join("|")+")",Ls.l="("+t.l10n.weekdays.longhand.join("|")+")",Ls.M="("+t.l10n.months.shorthand.join("|")+")",Ls.F="("+t.l10n.months.longhand.join("|")+")",Ls.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var y=mi(mi({},e),JSON.parse(JSON.stringify(n.dataset||{})));y.time_24hr===void 0&&Hn.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Um(t),t.parseDate=Ed({config:t.config,l10n:t.l10n})}s(Te,"setupLocale");function re(y){if(typeof t.config.position=="function")return void t.config.position(t,y);if(t.calendarContainer!==void 0){It("onPreCalendarPosition");var w=y||t._positionElement,N=Array.prototype.reduce.call(t.calendarContainer.children,function(ai,qi){return ai+qi.offsetHeight},0),R=t.calendarContainer.offsetWidth,Y=t.config.position.split(" "),Q=Y[0],Ct=Y.length>1?Y[1]:null,at=w.getBoundingClientRect(),St=window.innerHeight-at.bottom,$=Q==="above"||Q!=="below"&&St<N&&at.top>N,yt=window.pageYOffset+at.top+($?-N-2:w.offsetHeight+2);if(pi(t.calendarContainer,"arrowTop",!$),pi(t.calendarContainer,"arrowBottom",$),!t.config.inline){var Ut=window.pageXOffset+at.left,Ce=!1,ge=!1;Ct==="center"?(Ut-=(R-at.width)/2,Ce=!0):Ct==="right"&&(Ut-=R-at.width,ge=!0),pi(t.calendarContainer,"arrowLeft",!Ce&&!ge),pi(t.calendarContainer,"arrowCenter",Ce),pi(t.calendarContainer,"arrowRight",ge);var Ne=window.document.body.offsetWidth-(window.pageXOffset+at.right),Be=Ut+R>window.document.body.offsetWidth,vn=Ne+R>window.document.body.offsetWidth;if(pi(t.calendarContainer,"rightMost",Be),!t.config.static)if(t.calendarContainer.style.top=yt+"px",!Be)t.calendarContainer.style.left=Ut+"px",t.calendarContainer.style.right="auto";else if(!vn)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Ne+"px";else{var En=Le();if(En===void 0)return;var Zn=window.document.body.offsetWidth,Pi=Math.max(0,Zn/2-R/2),Ke=".flatpickr-calendar.centerMost:before",Ri=".flatpickr-calendar.centerMost:after",ei=En.cssRules.length,xi="{left:"+at.left+"px;right:auto;}";pi(t.calendarContainer,"rightMost",!1),pi(t.calendarContainer,"centerMost",!0),En.insertRule(Ke+","+Ri+xi,ei),t.calendarContainer.style.left=Pi+"px",t.calendarContainer.style.right="auto"}}}}s(re,"positionCalendar");function Le(){for(var y=null,w=0;w<document.styleSheets.length;w++){var N=document.styleSheets[w];if(N.cssRules){try{N.cssRules}catch{continue}y=N;break}}return y??ke()}s(Le,"getDocumentStyleSheet");function ke(){var y=document.createElement("style");return document.head.appendChild(y),y.sheet}s(ke,"createStyleSheet");function ze(){t.config.noCalendar||t.isMobile||(ft(),pn(),tt())}s(ze,"redraw");function Qe(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}s(Qe,"focusAndClose");function De(y){y.preventDefault(),y.stopPropagation();var w=s(function(yt){return yt.classList&&yt.classList.contains("flatpickr-day")&&!yt.classList.contains("flatpickr-disabled")&&!yt.classList.contains("notAllowed")},"isSelectable"),N=Hm(Gi(y),w);if(N!==void 0){var R=N,Y=t.latestSelectedDateObj=new Date(R.dateObj.getTime()),Q=(Y.getMonth()<t.currentMonth||Y.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=R,t.config.mode==="single")t.selectedDates=[Y];else if(t.config.mode==="multiple"){var Ct=hn(Y);Ct?t.selectedDates.splice(parseInt(Ct),1):t.selectedDates.push(Y)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=Y,t.selectedDates.push(Y),Xi(Y,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(yt,Ut){return yt.getTime()-Ut.getTime()}));if(S(),Q){var at=t.currentYear!==Y.getFullYear();t.currentYear=Y.getFullYear(),t.currentMonth=Y.getMonth(),at&&(It("onYearChange"),ft()),It("onMonthChange")}if(pn(),tt(),en(),!Q&&t.config.mode!=="range"&&t.config.showMonths===1?ht(R):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var St=t.config.mode==="single"&&!t.config.enableTime,$=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(St||$)&&Qe()}I()}}s(De,"selectDate");var ye={locale:[Te,nt],showMonths:[Tt,m,P],minDate:[W],maxDate:[W],positionElement:[qe],clickOpens:[function(){t.config.clickOpens===!0?(j(t._input,"focus",t.open),j(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function $e(y,w){if(y!==null&&typeof y=="object"){Object.assign(t.config,y);for(var N in y)ye[N]!==void 0&&ye[N].forEach(function(R){return R()})}else t.config[y]=w,ye[y]!==void 0?ye[y].forEach(function(R){return R()}):yd.indexOf(y)>-1&&(t.config[y]=xd(w));t.redraw(),en(!0)}s($e,"set");function tn(y,w){var N=[];if(y instanceof Array)N=y.map(function(R){return t.parseDate(R,w)});else if(y instanceof Date||typeof y=="number")N=[t.parseDate(y,w)];else if(typeof y=="string")switch(t.config.mode){case"single":case"time":N=[t.parseDate(y,w)];break;case"multiple":N=y.split(t.config.conjunction).map(function(R){return t.parseDate(R,w)});break;case"range":N=y.split(t.l10n.rangeSeparator).map(function(R){return t.parseDate(R,w)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(y)));t.selectedDates=t.config.allowInvalidPreload?N:N.filter(function(R){return R instanceof Date&&Xt(R,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(R,Y){return R.getTime()-Y.getTime()})}s(tn,"setSelectedDate");function me(y,w,N){if(w===void 0&&(w=!1),N===void 0&&(N=t.config.dateFormat),y!==0&&!y||y instanceof Array&&y.length===0)return t.clear(w);tn(y,N),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),W(void 0,w),O(),t.selectedDates.length===0&&t.clear(!1),en(w),w&&It("onChange")}s(me,"setDate");function Ue(y){return y.slice().map(function(w){return typeof w=="string"||typeof w=="number"||w instanceof Date?t.parseDate(w,void 0,!0):w&&typeof w=="object"&&w.from&&w.to?{from:t.parseDate(w.from,void 0),to:t.parseDate(w.to,void 0)}:w}).filter(function(w){return w})}s(Ue,"parseDateRules");function Xe(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var y=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);y&&tn(y,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}s(Xe,"setupDates");function Je(){if(t.input=Qt(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Re(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),qe()}s(Je,"setupInputs");function qe(){t._positionElement=t.config.positionElement||t._input}s(qe,"updatePositionElement");function oe(){var y=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Re("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=y,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=y==="datetime-local"?"Y-m-d\\TH:i:S":y==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}j(t.mobileInput,"change",function(w){t.setDate(Gi(w).value,!1,t.mobileFormatStr),It("onChange"),It("onClose")})}s(oe,"setupMobile");function Ae(y){if(t.isOpen===!0)return t.close();t.open(y)}s(Ae,"toggle");function It(y,w){if(t.config!==void 0){var N=t.config[y];if(N!==void 0&&N.length>0)for(var R=0;N[R]&&R<N.length;R++)N[R](t.selectedDates,t.input.value,t,w);y==="onChange"&&(t.input.dispatchEvent(ue("change")),t.input.dispatchEvent(ue("input")))}}s(It,"triggerEvent");function ue(y){var w=document.createEvent("Event");return w.initEvent(y,!0,!0),w}s(ue,"createEvent");function hn(y){for(var w=0;w<t.selectedDates.length;w++){var N=t.selectedDates[w];if(N instanceof Date&&Xi(N,y)===0)return""+w}return!1}s(hn,"isDateSelected");function ti(y){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Xi(y,t.selectedDates[0])>=0&&Xi(y,t.selectedDates[1])<=0}s(ti,"isDateInRange");function pn(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(y,w){var N=new Date(t.currentYear,t.currentMonth,1);N.setMonth(t.currentMonth+w),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[w].textContent=cu(N.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=N.getMonth().toString(),y.value=N.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}s(pn,"updateNavigationCurrentMonth");function Vn(y){var w=y||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(N){return t.formatDate(N,w)}).filter(function(N,R,Y){return t.config.mode!=="range"||t.config.enableTime||Y.indexOf(N)===R}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}s(Vn,"getDateStr");function en(y){y===void 0&&(y=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Vn(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Vn(t.config.altFormat)),y!==!1&&It("onValueUpdate")}s(en,"updateValue");function gr(y){var w=Gi(y),N=t.prevMonthNav.contains(w),R=t.nextMonthNav.contains(w);N||R?ut(N?-1:1):t.yearElements.indexOf(w)>=0?w.select():w.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):w.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}s(gr,"onMonthNavClick");function sr(y){y.preventDefault();var w=y.type==="keydown",N=Gi(y),R=N;t.amPM!==void 0&&N===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Yi(t.amPM.textContent===t.l10n.amPM[0])]);var Y=parseFloat(R.getAttribute("min")),Q=parseFloat(R.getAttribute("max")),Ct=parseFloat(R.getAttribute("step")),at=parseInt(R.value,10),St=y.delta||(w?y.which===38?1:-1:0),$=at+Ct*St;if(typeof R.value<"u"&&R.value.length===2){var yt=R===t.hourElement,Ut=R===t.minuteElement;$<Y?($=Q+$+Yi(!yt)+(Yi(yt)&&Yi(!t.amPM)),Ut&&X(void 0,-1,t.hourElement)):$>Q&&($=R===t.hourElement?$-Q-Yi(!t.amPM):Y,Ut&&X(void 0,1,t.hourElement)),t.amPM&&yt&&(Ct===1?$+at===23:Math.abs($-at)>Ct)&&(t.amPM.textContent=t.l10n.amPM[Yi(t.amPM.textContent===t.l10n.amPM[0])]),R.value=fi($)}}return s(sr,"timeWrapper"),o(),t}s(kA,"FlatpickrInstance");function dl(n,e){for(var t=Array.prototype.slice.call(n).filter(function(d){return d instanceof HTMLElement}),i=[],o=0;o<t.length;o++){var c=t[o];try{if(c.getAttribute("data-fp-omit")!==null)continue;c._flatpickr!==void 0&&(c._flatpickr.destroy(),c._flatpickr=void 0),c._flatpickr=kA(c,e||{}),i.push(c._flatpickr)}catch(d){console.error(d)}}return i.length===1?i[0]:i}s(dl,"_flatpickr");typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return dl(this,n)},HTMLElement.prototype.flatpickr=function(n){return dl([this],n)});var Hn=s(function(n,e){return typeof n=="string"?dl(window.document.querySelectorAll(n),e):n instanceof Node?dl([n],e):dl(n,e)},"flatpickr");Hn.defaultConfig={};Hn.l10ns={en:mi({},wd),default:mi({},wd)};Hn.localize=function(n){Hn.l10ns.default=mi(mi({},Hn.l10ns.default),n)};Hn.setDefaults=function(n){Hn.defaultConfig=mi(mi({},Hn.defaultConfig),n)};Hn.parseDate=Ed({});Hn.formatDate=Um({});Hn.compareDates=Xi;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return dl(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=Hn);var uu=class extends An{static{s(this,"LeadDialogController")}static targets=["dialog"];openDialog(){this.dialogTarget.showModal()}closeDialog(){this.dialogTarget.close()}};var hu=class extends An{static{s(this,"LeadFiltersController")}static targets=["filter"];connect(){console.log(this.filterTargets)}};var du=class extends An{static{s(this,"LeadGroupController")}connect(){this.sortable=hd.create(this,{animation:150,group:"lead_groups",onEnd:this.onReorder.bind(this)})}createPatchForm(e){let t="";for(var i in e)t+=`<input type="hidden" name="lead[${i}]" value="${e[i]}">`;let o=`<form><input type="hidden" name="_method" value="PATCH" />${t}</form>`;return new DOMParser().parseFromString(o,"text/html").querySelector("form")}getCookieValue(e){if(e!=null){let i=(document.cookie?document.cookie.split("; "):[]).find(o=>o.startsWith(e));if(i){let o=i.split("=").slice(1).join("=");return o?decodeURIComponent(o):void 0}}}getMetaContent(e){let t=document.querySelector(`meta[name="${e}"]`);return t&&t.content}async performSubmit(e,t){let i=this.getCookieValue(this.getMetaContent("csrf-param"))||this.getMetaContent("csrf-token"),o=new FormData(e),c=t.replace("lead_","");return fetch(`/admin/my_leads/${c}`,{method:"POST",headers:{Accept:"application/json","X-CSRF-Token":i},body:o})}alertErrorResponse(e){return async function(t){if(t.status==200)window.Turbo.renderStreamMessage(await t.text());else{let i=await t.json();alert(`Ett fel uppstod!
`+i.errors)}}}async onReorder(e){let t=this.createPatchForm({status:e.to.dataset.groupName,position:e.newIndex+1});await this.performSubmit(t,e.item.id).then(this.alertErrorResponse(e.item))}};var Cd=Jn(w0());var fu=class extends An{static{s(this,"LeafletController")}connect(){this.markers=JSON.parse(this.dataset.markers),this.markers.length&&(this.initializeMap(),this.addMarkers(),this.setZoomLevel())}initializeMap(){this.map=Cd.default.map(this.firstElementChild),Cd.default.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map)}addMarkers(){this.markers.forEach(this.addMarker.bind(this))}addMarker(e){Cd.default.marker(e).addTo(this.map)}setZoomLevel(){this.markers.length>1?this.map.fitBounds(this.markers):this.map.setView(this.markers[0],7)}};var pu=class extends An{static{s(this,"PastClosedAtController")}onSubmit(e){this.closedAtDate()-Date.now()<=0&&confirm("Vill du verkligen spara auktionen med ett st\xE4ngningsdatum som passerats?")==!1&&e.preventDefault()}closedAtDate(){return Date.parse(document.getElementById("auction_closed_at").value)}};var x0=Jn(Im());var mu=class extends Ge{static{s(this,"RelationSearchController")}static targets=["field","visibleField","results"];static values={model:String};connect(){this.debouncedFetchData=(0,x0.default)(this.fetchData.bind(this),500)}change(e){this.debouncedFetchData(e.target.value)}fetchData(e,t){fetch("/admin/relations?"+new URLSearchParams({m:this.modelValue,q:e})).then(i=>i.text()).then(i=>this.display(i))}display(e){this.resultsTarget.innerHTML=e,this.bindNewActions(this.resultsTarget)}bindNewActions(e){Array.from(e.querySelectorAll("[data-action]")).flatMap(this.parseAction.bind(this)).forEach(this.bindAction.bind(this))}select(e){let t=e.currentTarget;this.visibleFieldTarget.value=t.getAttribute("name"),this.fieldTarget.value=t.id,this.resultsTarget.innerHTML=""}};var gu=class extends An{static{s(this,"ReserveGuardController")}onSubmit(e){let t=document.getElementById("auction_reserve_price_without_cents");parseInt(t.value.replace(" ",""))<1e5&&confirm("Reserv f\xF6r den h\xE4r auktionen \xE4r l\xE4gre \xE4n 100.000SEK. Vill du fortfarande spara?")==!1&&e.preventDefault()}};var DA=typeof global=="object"&&global&&global.Object===Object&&global,Ld=DA;var IA=typeof self=="object"&&self&&self.Object===Object&&self,PA=Ld||IA||Function("return this")(),Dn=PA;var RA=Dn.Symbol,Cr=RA;var E0=Object.prototype,qA=E0.hasOwnProperty,BA=E0.toString,vu=Cr?Cr.toStringTag:void 0;function jA(n){var e=qA.call(n,vu),t=n[vu];try{n[vu]=void 0;var i=!0}catch{}var o=BA.call(n);return i&&(e?n[vu]=t:delete n[vu]),o}s(jA,"getRawTag");var T0=jA;var FA=Object.prototype,HA=FA.toString;function zA(n){return HA.call(n)}s(zA,"objectToString");var S0=zA;var UA="[object Null]",WA="[object Undefined]",A0=Cr?Cr.toStringTag:void 0;function VA(n){return n==null?n===void 0?WA:UA:A0&&A0 in Object(n)?T0(n):S0(n)}s(VA,"baseGetTag");var Kr=VA;function ZA(n){return n!=null&&typeof n=="object"}s(ZA,"isObjectLike");var oi=ZA;var $A=Array.isArray,Lr=$A;function KA(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}s(KA,"isObject");var gi=KA;function YA(n){return n}s(YA,"identity");var Nd=YA;var GA="[object AsyncFunction]",XA="[object Function]",JA="[object GeneratorFunction]",QA="[object Proxy]";function tC(n){if(!gi(n))return!1;var e=Kr(n);return e==XA||e==JA||e==GA||e==QA}s(tC,"isFunction");var fl=tC;var eC=Dn["__core-js_shared__"],Od=eC;var C0=function(){var n=/[^.]+$/.exec(Od&&Od.keys&&Od.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function nC(n){return!!C0&&C0 in n}s(nC,"isMasked");var L0=nC;var iC=Function.prototype,rC=iC.toString;function sC(n){if(n!=null){try{return rC.call(n)}catch{}try{return n+""}catch{}}return""}s(sC,"toSource");var Ns=sC;var oC=/[\\^$.*+?()[\]{}|]/g,aC=/^\[object .+?Constructor\]$/,lC=Function.prototype,cC=Object.prototype,uC=lC.toString,hC=cC.hasOwnProperty,dC=RegExp("^"+uC.call(hC).replace(oC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fC(n){if(!gi(n)||L0(n))return!1;var e=fl(n)?dC:aC;return e.test(Ns(n))}s(fC,"baseIsNative");var N0=fC;function pC(n,e){return n?.[e]}s(pC,"getValue");var O0=pC;function mC(n,e){var t=O0(n,e);return N0(t)?t:void 0}s(mC,"getNative");var Ji=mC;var gC=Ji(Dn,"WeakMap"),Md=gC;var M0=Object.create,vC=function(){function n(){}return s(n,"object"),function(e){if(!gi(e))return{};if(M0)return M0(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),k0=vC;function bC(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}s(bC,"apply");var D0=bC;function yC(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}s(yC,"copyArray");var kd=yC;var _C=800,wC=16,xC=Date.now;function EC(n){var e=0,t=0;return function(){var i=xC(),o=wC-(i-t);if(t=i,o>0){if(++e>=_C)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}s(EC,"shortOut");var I0=EC;function TC(n){return function(){return n}}s(TC,"constant");var P0=TC;var SC=function(){try{var n=Ji(Object,"defineProperty");return n({},"",{}),n}catch{}}(),pl=SC;var AC=pl?function(n,e){return pl(n,"toString",{configurable:!0,enumerable:!1,value:P0(e),writable:!0})}:Nd,R0=AC;var CC=I0(R0),q0=CC;function LC(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}s(LC,"arrayEach");var B0=LC;var NC=9007199254740991,OC=/^(?:0|[1-9]\d*)$/;function MC(n,e){var t=typeof n;return e=e??NC,!!e&&(t=="number"||t!="symbol"&&OC.test(n))&&n>-1&&n%1==0&&n<e}s(MC,"isIndex");var Dd=MC;function kC(n,e,t){e=="__proto__"&&pl?pl(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}s(kC,"baseAssignValue");var ml=kC;function DC(n,e){return n===e||n!==n&&e!==e}s(DC,"eq");var os=DC;var IC=Object.prototype,PC=IC.hasOwnProperty;function RC(n,e,t){var i=n[e];(!(PC.call(n,e)&&os(i,t))||t===void 0&&!(e in n))&&ml(n,e,t)}s(RC,"assignValue");var Id=RC;function qC(n,e,t,i){var o=!t;t||(t={});for(var c=-1,d=e.length;++c<d;){var m=e[c],v=i?i(t[m],n[m],m,t,n):void 0;v===void 0&&(v=n[m]),o?ml(t,m,v):Id(t,m,v)}return t}s(qC,"copyObject");var as=qC;var j0=Math.max;function BC(n,e,t){return e=j0(e===void 0?n.length-1:e,0),function(){for(var i=arguments,o=-1,c=j0(i.length-e,0),d=Array(c);++o<c;)d[o]=i[e+o];o=-1;for(var m=Array(e+1);++o<e;)m[o]=i[o];return m[e]=t(d),D0(n,this,m)}}s(BC,"overRest");var F0=BC;function jC(n,e){return q0(F0(n,e,Nd),n+"")}s(jC,"baseRest");var H0=jC;var FC=9007199254740991;function HC(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=FC}s(HC,"isLength");var Pd=HC;function zC(n){return n!=null&&Pd(n.length)&&!fl(n)}s(zC,"isArrayLike");var bo=zC;function UC(n,e,t){if(!gi(t))return!1;var i=typeof e;return(i=="number"?bo(t)&&Dd(e,t.length):i=="string"&&e in t)?os(t[e],n):!1}s(UC,"isIterateeCall");var z0=UC;function WC(n){return H0(function(e,t){var i=-1,o=t.length,c=o>1?t[o-1]:void 0,d=o>2?t[2]:void 0;for(c=n.length>3&&typeof c=="function"?(o--,c):void 0,d&&z0(t[0],t[1],d)&&(c=o<3?void 0:c,o=1),e=Object(e);++i<o;){var m=t[i];m&&n(e,m,i,c)}return e})}s(WC,"createAssigner");var U0=WC;var VC=Object.prototype;function ZC(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||VC;return n===t}s(ZC,"isPrototype");var gl=ZC;function $C(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}s($C,"baseTimes");var W0=$C;var KC="[object Arguments]";function YC(n){return oi(n)&&Kr(n)==KC}s(YC,"baseIsArguments");var Wm=YC;var V0=Object.prototype,GC=V0.hasOwnProperty,XC=V0.propertyIsEnumerable,JC=Wm(function(){return arguments}())?Wm:function(n){return oi(n)&&GC.call(n,"callee")&&!XC.call(n,"callee")},bu=JC;function QC(){return!1}s(QC,"stubFalse");var Z0=QC;var Y0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$0=Y0&&typeof module=="object"&&module&&!module.nodeType&&module,tL=$0&&$0.exports===Y0,K0=tL?Dn.Buffer:void 0,eL=K0?K0.isBuffer:void 0,nL=eL||Z0,Os=nL;var iL="[object Arguments]",rL="[object Array]",sL="[object Boolean]",oL="[object Date]",aL="[object Error]",lL="[object Function]",cL="[object Map]",uL="[object Number]",hL="[object Object]",dL="[object RegExp]",fL="[object Set]",pL="[object String]",mL="[object WeakMap]",gL="[object ArrayBuffer]",vL="[object DataView]",bL="[object Float32Array]",yL="[object Float64Array]",_L="[object Int8Array]",wL="[object Int16Array]",xL="[object Int32Array]",EL="[object Uint8Array]",TL="[object Uint8ClampedArray]",SL="[object Uint16Array]",AL="[object Uint32Array]",dn={};dn[bL]=dn[yL]=dn[_L]=dn[wL]=dn[xL]=dn[EL]=dn[TL]=dn[SL]=dn[AL]=!0;dn[iL]=dn[rL]=dn[gL]=dn[sL]=dn[vL]=dn[oL]=dn[aL]=dn[lL]=dn[cL]=dn[uL]=dn[hL]=dn[dL]=dn[fL]=dn[pL]=dn[mL]=!1;function CL(n){return oi(n)&&Pd(n.length)&&!!dn[Kr(n)]}s(CL,"baseIsTypedArray");var G0=CL;function LL(n){return function(e){return n(e)}}s(LL,"baseUnary");var vl=LL;var X0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yu=X0&&typeof module=="object"&&module&&!module.nodeType&&module,NL=yu&&yu.exports===X0,Vm=NL&&Ld.process,OL=function(){try{var n=yu&&yu.require&&yu.require("util").types;return n||Vm&&Vm.binding&&Vm.binding("util")}catch{}}(),Ms=OL;var J0=Ms&&Ms.isTypedArray,ML=J0?vl(J0):G0,bl=ML;var kL=Object.prototype,DL=kL.hasOwnProperty;function IL(n,e){var t=Lr(n),i=!t&&bu(n),o=!t&&!i&&Os(n),c=!t&&!i&&!o&&bl(n),d=t||i||o||c,m=d?W0(n.length,String):[],v=m.length;for(var _ in n)(e||DL.call(n,_))&&!(d&&(_=="length"||o&&(_=="offset"||_=="parent")||c&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||Dd(_,v)))&&m.push(_);return m}s(IL,"arrayLikeKeys");var Rd=IL;function PL(n,e){return function(t){return n(e(t))}}s(PL,"overArg");var qd=PL;var RL=qd(Object.keys,Object),Q0=RL;var qL=Object.prototype,BL=qL.hasOwnProperty;function jL(n){if(!gl(n))return Q0(n);var e=[];for(var t in Object(n))BL.call(n,t)&&t!="constructor"&&e.push(t);return e}s(jL,"baseKeys");var t1=jL;function FL(n){return bo(n)?Rd(n):t1(n)}s(FL,"keys");var yl=FL;function HL(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}s(HL,"nativeKeysIn");var e1=HL;var zL=Object.prototype,UL=zL.hasOwnProperty;function WL(n){if(!gi(n))return e1(n);var e=gl(n),t=[];for(var i in n)i=="constructor"&&(e||!UL.call(n,i))||t.push(i);return t}s(WL,"baseKeysIn");var n1=WL;function VL(n){return bo(n)?Rd(n,!0):n1(n)}s(VL,"keysIn");var ls=VL;var ZL=Ji(Object,"create"),ks=ZL;function $L(){this.__data__=ks?ks(null):{},this.size=0}s($L,"hashClear");var i1=$L;function KL(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}s(KL,"hashDelete");var r1=KL;var YL="__lodash_hash_undefined__",GL=Object.prototype,XL=GL.hasOwnProperty;function JL(n){var e=this.__data__;if(ks){var t=e[n];return t===YL?void 0:t}return XL.call(e,n)?e[n]:void 0}s(JL,"hashGet");var s1=JL;var QL=Object.prototype,tN=QL.hasOwnProperty;function eN(n){var e=this.__data__;return ks?e[n]!==void 0:tN.call(e,n)}s(eN,"hashHas");var o1=eN;var nN="__lodash_hash_undefined__";function iN(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=ks&&e===void 0?nN:e,this}s(iN,"hashSet");var a1=iN;function _l(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(_l,"Hash");_l.prototype.clear=i1;_l.prototype.delete=r1;_l.prototype.get=s1;_l.prototype.has=o1;_l.prototype.set=a1;var Zm=_l;function rN(){this.__data__=[],this.size=0}s(rN,"listCacheClear");var l1=rN;function sN(n,e){for(var t=n.length;t--;)if(os(n[t][0],e))return t;return-1}s(sN,"assocIndexOf");var yo=sN;var oN=Array.prototype,aN=oN.splice;function lN(n){var e=this.__data__,t=yo(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():aN.call(e,t,1),--this.size,!0}s(lN,"listCacheDelete");var c1=lN;function cN(n){var e=this.__data__,t=yo(e,n);return t<0?void 0:e[t][1]}s(cN,"listCacheGet");var u1=cN;function uN(n){return yo(this.__data__,n)>-1}s(uN,"listCacheHas");var h1=uN;function hN(n,e){var t=this.__data__,i=yo(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}s(hN,"listCacheSet");var d1=hN;function wl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(wl,"ListCache");wl.prototype.clear=l1;wl.prototype.delete=c1;wl.prototype.get=u1;wl.prototype.has=h1;wl.prototype.set=d1;var _o=wl;var dN=Ji(Dn,"Map"),wo=dN;function fN(){this.size=0,this.__data__={hash:new Zm,map:new(wo||_o),string:new Zm}}s(fN,"mapCacheClear");var f1=fN;function pN(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}s(pN,"isKeyable");var p1=pN;function mN(n,e){var t=n.__data__;return p1(e)?t[typeof e=="string"?"string":"hash"]:t.map}s(mN,"getMapData");var xo=mN;function gN(n){var e=xo(this,n).delete(n);return this.size-=e?1:0,e}s(gN,"mapCacheDelete");var m1=gN;function vN(n){return xo(this,n).get(n)}s(vN,"mapCacheGet");var g1=vN;function bN(n){return xo(this,n).has(n)}s(bN,"mapCacheHas");var v1=bN;function yN(n,e){var t=xo(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}s(yN,"mapCacheSet");var b1=yN;function xl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}s(xl,"MapCache");xl.prototype.clear=f1;xl.prototype.delete=m1;xl.prototype.get=g1;xl.prototype.has=v1;xl.prototype.set=b1;var Bd=xl;function _N(n,e){for(var t=-1,i=e.length,o=n.length;++t<i;)n[o+t]=e[t];return n}s(_N,"arrayPush");var jd=_N;var wN=qd(Object.getPrototypeOf,Object),El=wN;var xN="[object Object]",EN=Function.prototype,TN=Object.prototype,y1=EN.toString,SN=TN.hasOwnProperty,AN=y1.call(Object);function CN(n){if(!oi(n)||Kr(n)!=xN)return!1;var e=El(n);if(e===null)return!0;var t=SN.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&y1.call(t)==AN}s(CN,"isPlainObject");var _1=CN;function LN(){this.__data__=new _o,this.size=0}s(LN,"stackClear");var w1=LN;function NN(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}s(NN,"stackDelete");var x1=NN;function ON(n){return this.__data__.get(n)}s(ON,"stackGet");var E1=ON;function MN(n){return this.__data__.has(n)}s(MN,"stackHas");var T1=MN;var kN=200;function DN(n,e){var t=this.__data__;if(t instanceof _o){var i=t.__data__;if(!wo||i.length<kN-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Bd(i)}return t.set(n,e),this.size=t.size,this}s(DN,"stackSet");var S1=DN;function Tl(n){var e=this.__data__=new _o(n);this.size=e.size}s(Tl,"Stack");Tl.prototype.clear=w1;Tl.prototype.delete=x1;Tl.prototype.get=E1;Tl.prototype.has=T1;Tl.prototype.set=S1;var Eo=Tl;function IN(n,e){return n&&as(e,yl(e),n)}s(IN,"baseAssign");var A1=IN;function PN(n,e){return n&&as(e,ls(e),n)}s(PN,"baseAssignIn");var C1=PN;var M1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,L1=M1&&typeof module=="object"&&module&&!module.nodeType&&module,RN=L1&&L1.exports===M1,N1=RN?Dn.Buffer:void 0,O1=N1?N1.allocUnsafe:void 0;function qN(n,e){if(e)return n.slice();var t=n.length,i=O1?O1(t):new n.constructor(t);return n.copy(i),i}s(qN,"cloneBuffer");var Fd=qN;function BN(n,e){for(var t=-1,i=n==null?0:n.length,o=0,c=[];++t<i;){var d=n[t];e(d,t,n)&&(c[o++]=d)}return c}s(BN,"arrayFilter");var k1=BN;function jN(){return[]}s(jN,"stubArray");var Hd=jN;var FN=Object.prototype,HN=FN.propertyIsEnumerable,D1=Object.getOwnPropertySymbols,zN=D1?function(n){return n==null?[]:(n=Object(n),k1(D1(n),function(e){return HN.call(n,e)}))}:Hd,Sl=zN;function UN(n,e){return as(n,Sl(n),e)}s(UN,"copySymbols");var I1=UN;var WN=Object.getOwnPropertySymbols,VN=WN?function(n){for(var e=[];n;)jd(e,Sl(n)),n=El(n);return e}:Hd,zd=VN;function ZN(n,e){return as(n,zd(n),e)}s(ZN,"copySymbolsIn");var P1=ZN;function $N(n,e,t){var i=e(n);return Lr(n)?i:jd(i,t(n))}s($N,"baseGetAllKeys");var Ud=$N;function KN(n){return Ud(n,yl,Sl)}s(KN,"getAllKeys");var _u=KN;function YN(n){return Ud(n,ls,zd)}s(YN,"getAllKeysIn");var R1=YN;var GN=Ji(Dn,"DataView"),Wd=GN;var XN=Ji(Dn,"Promise"),Vd=XN;var JN=Ji(Dn,"Set"),Zd=JN;var q1="[object Map]",QN="[object Object]",B1="[object Promise]",j1="[object Set]",F1="[object WeakMap]",H1="[object DataView]",tO=Ns(Wd),eO=Ns(wo),nO=Ns(Vd),iO=Ns(Zd),rO=Ns(Md),va=Kr;(Wd&&va(new Wd(new ArrayBuffer(1)))!=H1||wo&&va(new wo)!=q1||Vd&&va(Vd.resolve())!=B1||Zd&&va(new Zd)!=j1||Md&&va(new Md)!=F1)&&(va=s(function(n){var e=Kr(n),t=e==QN?n.constructor:void 0,i=t?Ns(t):"";if(i)switch(i){case tO:return H1;case eO:return q1;case nO:return B1;case iO:return j1;case rO:return F1}return e},"getTag"));var Ds=va;var sO=Object.prototype,oO=sO.hasOwnProperty;function aO(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&oO.call(n,"index")&&(t.index=n.index,t.input=n.input),t}s(aO,"initCloneArray");var z1=aO;var lO=Dn.Uint8Array,Al=lO;function cO(n){var e=new n.constructor(n.byteLength);return new Al(e).set(new Al(n)),e}s(cO,"cloneArrayBuffer");var Cl=cO;function uO(n,e){var t=e?Cl(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}s(uO,"cloneDataView");var U1=uO;var hO=/\w*$/;function dO(n){var e=new n.constructor(n.source,hO.exec(n));return e.lastIndex=n.lastIndex,e}s(dO,"cloneRegExp");var W1=dO;var V1=Cr?Cr.prototype:void 0,Z1=V1?V1.valueOf:void 0;function fO(n){return Z1?Object(Z1.call(n)):{}}s(fO,"cloneSymbol");var $1=fO;function pO(n,e){var t=e?Cl(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}s(pO,"cloneTypedArray");var $d=pO;var mO="[object Boolean]",gO="[object Date]",vO="[object Map]",bO="[object Number]",yO="[object RegExp]",_O="[object Set]",wO="[object String]",xO="[object Symbol]",EO="[object ArrayBuffer]",TO="[object DataView]",SO="[object Float32Array]",AO="[object Float64Array]",CO="[object Int8Array]",LO="[object Int16Array]",NO="[object Int32Array]",OO="[object Uint8Array]",MO="[object Uint8ClampedArray]",kO="[object Uint16Array]",DO="[object Uint32Array]";function IO(n,e,t){var i=n.constructor;switch(e){case EO:return Cl(n);case mO:case gO:return new i(+n);case TO:return U1(n,t);case SO:case AO:case CO:case LO:case NO:case OO:case MO:case kO:case DO:return $d(n,t);case vO:return new i;case bO:case wO:return new i(n);case yO:return W1(n);case _O:return new i;case xO:return $1(n)}}s(IO,"initCloneByTag");var K1=IO;function PO(n){return typeof n.constructor=="function"&&!gl(n)?k0(El(n)):{}}s(PO,"initCloneObject");var Kd=PO;var RO="[object Map]";function qO(n){return oi(n)&&Ds(n)==RO}s(qO,"baseIsMap");var Y1=qO;var G1=Ms&&Ms.isMap,BO=G1?vl(G1):Y1,X1=BO;var jO="[object Set]";function FO(n){return oi(n)&&Ds(n)==jO}s(FO,"baseIsSet");var J1=FO;var Q1=Ms&&Ms.isSet,HO=Q1?vl(Q1):J1,t_=HO;var zO=1,UO=2,WO=4,e_="[object Arguments]",VO="[object Array]",ZO="[object Boolean]",$O="[object Date]",KO="[object Error]",n_="[object Function]",YO="[object GeneratorFunction]",GO="[object Map]",XO="[object Number]",i_="[object Object]",JO="[object RegExp]",QO="[object Set]",tM="[object String]",eM="[object Symbol]",nM="[object WeakMap]",iM="[object ArrayBuffer]",rM="[object DataView]",sM="[object Float32Array]",oM="[object Float64Array]",aM="[object Int8Array]",lM="[object Int16Array]",cM="[object Int32Array]",uM="[object Uint8Array]",hM="[object Uint8ClampedArray]",dM="[object Uint16Array]",fM="[object Uint32Array]",ln={};ln[e_]=ln[VO]=ln[iM]=ln[rM]=ln[ZO]=ln[$O]=ln[sM]=ln[oM]=ln[aM]=ln[lM]=ln[cM]=ln[GO]=ln[XO]=ln[i_]=ln[JO]=ln[QO]=ln[tM]=ln[eM]=ln[uM]=ln[hM]=ln[dM]=ln[fM]=!0;ln[KO]=ln[n_]=ln[nM]=!1;function Yd(n,e,t,i,o,c){var d,m=e&zO,v=e&UO,_=e&WO;if(t&&(d=o?t(n,i,o,c):t(n)),d!==void 0)return d;if(!gi(n))return n;var T=Lr(n);if(T){if(d=z1(n),!m)return kd(n,d)}else{var S=Ds(n),O=S==n_||S==YO;if(Os(n))return Fd(n,m);if(S==i_||S==e_||O&&!o){if(d=v||O?{}:Kd(n),!m)return v?P1(n,C1(d,n)):I1(n,A1(d,n))}else{if(!ln[S])return o?n:{};d=K1(n,S,m)}}c||(c=new Eo);var M=c.get(n);if(M)return M;c.set(n,d),t_(n)?n.forEach(function(I){d.add(Yd(I,e,t,I,n,c))}):X1(n)&&n.forEach(function(I,B){d.set(B,Yd(I,e,t,B,n,c))});var D=_?v?R1:_u:v?ls:yl,j=T?void 0:D(n);return B0(j||n,function(I,B){j&&(B=I,I=n[B]),Id(d,B,Yd(I,e,t,B,n,c))}),d}s(Yd,"baseClone");var r_=Yd;var pM=1,mM=4;function gM(n){return r_(n,pM|mM)}s(gM,"cloneDeep");var cs=gM;var vM="__lodash_hash_undefined__";function bM(n){return this.__data__.set(n,vM),this}s(bM,"setCacheAdd");var s_=bM;function yM(n){return this.__data__.has(n)}s(yM,"setCacheHas");var o_=yM;function Gd(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Bd;++e<t;)this.add(n[e])}s(Gd,"SetCache");Gd.prototype.add=Gd.prototype.push=s_;Gd.prototype.has=o_;var a_=Gd;function _M(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}s(_M,"arraySome");var l_=_M;function wM(n,e){return n.has(e)}s(wM,"cacheHas");var c_=wM;var xM=1,EM=2;function TM(n,e,t,i,o,c){var d=t&xM,m=n.length,v=e.length;if(m!=v&&!(d&&v>m))return!1;var _=c.get(n),T=c.get(e);if(_&&T)return _==e&&T==n;var S=-1,O=!0,M=t&EM?new a_:void 0;for(c.set(n,e),c.set(e,n);++S<m;){var D=n[S],j=e[S];if(i)var I=d?i(j,D,S,e,n,c):i(D,j,S,n,e,c);if(I!==void 0){if(I)continue;O=!1;break}if(M){if(!l_(e,function(B,W){if(!c_(M,W)&&(D===B||o(D,B,t,i,c)))return M.push(W)})){O=!1;break}}else if(!(D===j||o(D,j,t,i,c))){O=!1;break}}return c.delete(n),c.delete(e),O}s(TM,"equalArrays");var Xd=TM;function SM(n){var e=-1,t=Array(n.size);return n.forEach(function(i,o){t[++e]=[o,i]}),t}s(SM,"mapToArray");var u_=SM;function AM(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}s(AM,"setToArray");var h_=AM;var CM=1,LM=2,NM="[object Boolean]",OM="[object Date]",MM="[object Error]",kM="[object Map]",DM="[object Number]",IM="[object RegExp]",PM="[object Set]",RM="[object String]",qM="[object Symbol]",BM="[object ArrayBuffer]",jM="[object DataView]",d_=Cr?Cr.prototype:void 0,$m=d_?d_.valueOf:void 0;function FM(n,e,t,i,o,c,d){switch(t){case jM:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case BM:return!(n.byteLength!=e.byteLength||!c(new Al(n),new Al(e)));case NM:case OM:case DM:return os(+n,+e);case MM:return n.name==e.name&&n.message==e.message;case IM:case RM:return n==e+"";case kM:var m=u_;case PM:var v=i&CM;if(m||(m=h_),n.size!=e.size&&!v)return!1;var _=d.get(n);if(_)return _==e;i|=LM,d.set(n,e);var T=Xd(m(n),m(e),i,o,c,d);return d.delete(n),T;case qM:if($m)return $m.call(n)==$m.call(e)}return!1}s(FM,"equalByTag");var f_=FM;var HM=1,zM=Object.prototype,UM=zM.hasOwnProperty;function WM(n,e,t,i,o,c){var d=t&HM,m=_u(n),v=m.length,_=_u(e),T=_.length;if(v!=T&&!d)return!1;for(var S=v;S--;){var O=m[S];if(!(d?O in e:UM.call(e,O)))return!1}var M=c.get(n),D=c.get(e);if(M&&D)return M==e&&D==n;var j=!0;c.set(n,e),c.set(e,n);for(var I=d;++S<v;){O=m[S];var B=n[O],W=e[O];if(i)var G=d?i(W,B,O,e,n,c):i(B,W,O,n,e,c);if(!(G===void 0?B===W||o(B,W,t,i,c):G)){j=!1;break}I||(I=O=="constructor")}if(j&&!I){var X=n.constructor,ct=e.constructor;X!=ct&&"constructor"in n&&"constructor"in e&&!(typeof X=="function"&&X instanceof X&&typeof ct=="function"&&ct instanceof ct)&&(j=!1)}return c.delete(n),c.delete(e),j}s(WM,"equalObjects");var p_=WM;var VM=1,m_="[object Arguments]",g_="[object Array]",Jd="[object Object]",ZM=Object.prototype,v_=ZM.hasOwnProperty;function $M(n,e,t,i,o,c){var d=Lr(n),m=Lr(e),v=d?g_:Ds(n),_=m?g_:Ds(e);v=v==m_?Jd:v,_=_==m_?Jd:_;var T=v==Jd,S=_==Jd,O=v==_;if(O&&Os(n)){if(!Os(e))return!1;d=!0,T=!1}if(O&&!T)return c||(c=new Eo),d||bl(n)?Xd(n,e,t,i,o,c):f_(n,e,v,t,i,o,c);if(!(t&VM)){var M=T&&v_.call(n,"__wrapped__"),D=S&&v_.call(e,"__wrapped__");if(M||D){var j=M?n.value():n,I=D?e.value():e;return c||(c=new Eo),o(j,I,t,i,c)}}return O?(c||(c=new Eo),p_(n,e,t,i,o,c)):!1}s($M,"baseIsEqualDeep");var b_=$M;function y_(n,e,t,i,o){return n===e?!0:n==null||e==null||!oi(n)&&!oi(e)?n!==n&&e!==e:b_(n,e,t,i,y_,o)}s(y_,"baseIsEqual");var __=y_;function KM(n){return function(e,t,i){for(var o=-1,c=Object(e),d=i(e),m=d.length;m--;){var v=d[n?m:++o];if(t(c[v],v,c)===!1)break}return e}}s(KM,"createBaseFor");var w_=KM;var YM=w_(),x_=YM;function GM(n,e,t){(t!==void 0&&!os(n[e],t)||t===void 0&&!(e in n))&&ml(n,e,t)}s(GM,"assignMergeValue");var wu=GM;function XM(n){return oi(n)&&bo(n)}s(XM,"isArrayLikeObject");var E_=XM;function JM(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}s(JM,"safeGet");var xu=JM;function QM(n){return as(n,ls(n))}s(QM,"toPlainObject");var T_=QM;function tk(n,e,t,i,o,c,d){var m=xu(n,t),v=xu(e,t),_=d.get(v);if(_){wu(n,t,_);return}var T=c?c(m,v,t+"",n,e,d):void 0,S=T===void 0;if(S){var O=Lr(v),M=!O&&Os(v),D=!O&&!M&&bl(v);T=v,O||M||D?Lr(m)?T=m:E_(m)?T=kd(m):M?(S=!1,T=Fd(v,!0)):D?(S=!1,T=$d(v,!0)):T=[]:_1(v)||bu(v)?(T=m,bu(m)?T=T_(m):(!gi(m)||fl(m))&&(T=Kd(v))):S=!1}S&&(d.set(v,T),o(T,v,i,c,d),d.delete(v)),wu(n,t,T)}s(tk,"baseMergeDeep");var S_=tk;function A_(n,e,t,i,o){n!==e&&x_(e,function(c,d){if(o||(o=new Eo),gi(c))S_(n,e,d,t,A_,i,o);else{var m=i?i(xu(n,d),c,d+"",n,e,o):void 0;m===void 0&&(m=c),wu(n,d,m)}},ls)}s(A_,"baseMerge");var C_=A_;function ek(n,e){return __(n,e)}s(ek,"isEqual");var ba=ek;var nk=U0(function(n,e,t){C_(n,e,t)}),Qi=nk;var Su={};Mp(Su,{Attributor:()=>Oi,AttributorStore:()=>Eu,BlockBlot:()=>ya,ClassAttributor:()=>In,ContainerBlot:()=>kl,EmbedBlot:()=>wn,InlineBlot:()=>Qd,LeafBlot:()=>Pn,ParentBlot:()=>tr,Registry:()=>Ao,Scope:()=>kt,ScrollBlot:()=>Tu,StyleAttributor:()=>er,TextBlot:()=>Dl});var kt=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(kt||{}),Oi=class{static{s(this,"Attributor")}constructor(e,t,i={}){this.attrName=e,this.keyName=t;let o=kt.TYPE&kt.ATTRIBUTE;this.scope=i.scope!=null?i.scope&kt.LEVEL|o:kt.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){let t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}},So=class extends Error{static{s(this,"ParchmentError")}constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}},O_=class Ym{static{s(this,"_Registry")}constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let i=null;try{i=e.parentNode}catch{return null}return this.find(i,t)}return null}create(e,t,i){let o=this.query(t);if(o==null)throw new So(`Unable to create ${t} blot`);let c=o,d=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:c.create(i),m=new c(e,d,i);return Ym.blots.set(m.domNode,m),m}find(e,t=!1){return Ym.find(e,t)}query(e,t=kt.ANY){let i;return typeof e=="string"?i=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?i=this.types.text:typeof e=="number"?e&kt.LEVEL&kt.BLOCK?i=this.types.block:e&kt.LEVEL&kt.INLINE&&(i=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(o=>(i=this.classes[o],!!i)),i=i||this.tags[e.tagName]),i==null?null:"scope"in i&&t&kt.LEVEL&i.scope&&t&kt.TYPE&i.scope?i:null}register(...e){return e.map(t=>{let i="blotName"in t,o="attrName"in t;if(!i&&!o)throw new So("Invalid definition");if(i&&t.blotName==="abstract")throw new So("Cannot register abstract class");let c=i?t.blotName:o?t.attrName:void 0;return this.types[c]=t,o?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):i&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(d=>d.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(d=>{(this.tags[d]==null||t.className==null)&&(this.tags[d]=t)}))),t})}};O_.blots=new WeakMap;var Ao=O_;function L_(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}s(L_,"match");var Gm=class extends Oi{static{s(this,"ClassAttributor")}static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){L_(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){let t=(L_(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}},In=Gm;function Km(n){let e=n.split("-"),t=e.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return e[0]+t}s(Km,"camelize");var Xm=class extends Oi{static{s(this,"StyleAttributor")}static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Km(this.keyName)]=t,!0):!1}remove(e){e.style[Km(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){let t=e.style[Km(this.keyName)];return this.canAdd(e,t)?t:""}},er=Xm,Jm=class{static{s(this,"AttributorStore")}constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};let e=Ao.find(this.domNode);if(e==null)return;let t=Oi.keys(this.domNode),i=In.keys(this.domNode),o=er.keys(this.domNode);t.concat(i).concat(o).forEach(c=>{let d=e.scroll.query(c,kt.ATTRIBUTE);d instanceof Oi&&(this.attributes[d.attrName]=d)})}copy(e){Object.keys(this.attributes).forEach(t=>{let i=this.attributes[t].value(this.domNode);e.format(t,i)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}},Eu=Jm,M_=class{static{s(this,"_ShadowBlot")}constructor(e,t){this.scroll=e,this.domNode=t,Ao.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new So("Blot definition missing tagName");let t,i;return Array.isArray(this.tagName)?(typeof e=="string"?(i=e.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof e=="number"&&(i=e),typeof i=="number"?t=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?t=document.createElement(i):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){let e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Ao.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,i,o){let c=this.isolate(e,t);if(this.scroll.query(i,kt.BLOT)!=null&&o)c.wrap(i,o);else if(this.scroll.query(i,kt.ATTRIBUTE)!=null){let d=this.scroll.create(this.statics.scope);c.wrap(d),d.format(i,o)}}insertAt(e,t,i){let o=i==null?this.scroll.create("text",t):this.scroll.create(t,i),c=this.split(e);this.parent.insertBefore(o,c||void 0)}isolate(e,t){let i=this.split(e);if(i==null)throw new Error("Attempt to isolate at end");return i.split(t),i}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){let i=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){let i=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new So(`Cannot wrap ${e}`);return i.appendChild(this),i}};M_.blotName="abstract";var k_=M_,D_=class extends k_{static{s(this,"_LeafBlot")}static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};D_.scope=kt.INLINE_BLOT;var ik=D_,Pn=ik,Qm=class{static{s(this,"LinkedList")}constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){let t=e.slice(1);this.append(...t)}}at(e){let t=this.iterator(),i=t();for(;i&&e>0;)e-=1,i=t();return i}contains(e){let t=this.iterator(),i=t();for(;i;){if(i===e)return!0;i=t()}return!1}indexOf(e){let t=this.iterator(),i=t(),o=0;for(;i;){if(i===e)return o;o+=1,i=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,i=this.head;for(;i!=null;){if(i===e)return t;t+=i.length(),i=i.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{let t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){let i=this.iterator(),o=i();for(;o;){let c=o.length();if(e<c||t&&e===c&&(o.next==null||o.next.length()!==0))return[o,e];e-=c,o=i()}return[null,0]}forEach(e){let t=this.iterator(),i=t();for(;i;)e(i),i=t()}forEachAt(e,t,i){if(t<=0)return;let[o,c]=this.find(e),d=e-c,m=this.iterator(o),v=m();for(;v&&d<e+t;){let _=v.length();e>d?i(v,e-d,Math.min(t,d+_-e)):i(v,0,Math.min(_,e+t-d)),d+=_,v=m()}}map(e){return this.reduce((t,i)=>(t.push(e(i)),t),[])}reduce(e,t){let i=this.iterator(),o=i();for(;o;)t=e(t,o),o=i();return t}};function N_(n,e){let t=e.find(n);if(t)return t;try{return e.create(n)}catch{let i=e.create(kt.INLINE);return Array.from(n.childNodes).forEach(o=>{i.domNode.appendChild(o)}),n.parentNode&&n.parentNode.replaceChild(i.domNode,n),i.attach(),i}}s(N_,"makeAttachedBlot");var I_=class To extends k_{static{s(this,"_ParentBlot")}constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,To.uiClass&&this.uiNode.classList.add(To.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Qm,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{let t=N_(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof So)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(i,o,c)=>{i.deleteAt(o,c)})}descendant(e,t=0){let[i,o]=this.children.find(t);return e.blotName==null&&e(i)||e.blotName!=null&&i instanceof e?[i,o]:i instanceof To?i.descendant(e,o):[null,-1]}descendants(e,t=0,i=Number.MAX_VALUE){let o=[],c=i;return this.children.forEachAt(t,i,(d,m,v)=>{(e.blotName==null&&e(d)||e.blotName!=null&&d instanceof e)&&o.push(d),d instanceof To&&(o=o.concat(d.descendants(e,m,c))),c-=v}),o}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(i=>t instanceof i)||(t.statics.scope===kt.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof To?t.unwrap():t.remove())})}formatAt(e,t,i,o){this.children.forEachAt(e,t,(c,d,m)=>{c.formatAt(d,m,i,o)})}insertAt(e,t,i){let[o,c]=this.children.find(e);if(o)o.insertAt(c,t,i);else{let d=i==null?this.scroll.create("text",t):this.scroll.create(t,i);this.appendChild(d)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let i=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(i=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(e.domNode,i),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(i=>{e.insertBefore(i,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){let[i,o]=this.children.find(e,t),c=[[this,e]];return i instanceof To?c.concat(i.path(o,t)):(i!=null&&c.push([i,o]),c)}removeChild(e){this.children.remove(e)}replaceWith(e,t){let i=typeof e=="string"?this.scroll.create(e,t):e;return i instanceof To&&this.moveChildren(i),super.replaceWith(i)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(e,this.length(),(o,c,d)=>{let m=o.split(c,t);m!=null&&i.appendChild(m)}),i}splitAfter(e){let t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){let i=[],o=[];e.forEach(c=>{c.target===this.domNode&&c.type==="childList"&&(i.push(...c.addedNodes),o.push(...c.removedNodes))}),o.forEach(c=>{if(c.parentNode!=null&&c.tagName!=="IFRAME"&&document.body.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let d=this.scroll.find(c);d!=null&&(d.domNode.parentNode==null||d.domNode.parentNode===this.domNode)&&d.detach()}),i.filter(c=>c.parentNode===this.domNode&&c!==this.uiNode).sort((c,d)=>c===d?0:c.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(c=>{let d=null;c.nextSibling!=null&&(d=this.scroll.find(c.nextSibling));let m=N_(c,this.scroll);(m.next!==d||m.next==null)&&(m.parent!=null&&m.parent.removeChild(this),this.insertBefore(m,d||void 0))}),this.enforceAllowedChildren()}};I_.uiClass="";var rk=I_,tr=rk;function sk(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(let t in n)if(n[t]!==e[t])return!1;return!0}s(sk,"isEqual");var Ll=class Nl extends tr{static{s(this,"_InlineBlot")}static create(e){return super.create(e)}static formats(e,t){let i=t.query(Nl.blotName);if(!(i!=null&&e.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Eu(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(i=>{i instanceof Nl||(i=i.wrap(Nl.blotName,!0)),this.attributes.copy(i)}),this.unwrap();else{let i=this.scroll.query(e,kt.INLINE);if(i==null)return;i instanceof Oi?this.attributes.attribute(i,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,i,o){this.formats()[i]!=null||this.scroll.query(i,kt.ATTRIBUTE)?this.isolate(e,t).format(i,o):super.formatAt(e,t,i,o)}optimize(e){super.optimize(e);let t=this.formats();if(Object.keys(t).length===0)return this.unwrap();let i=this.next;i instanceof Nl&&i.prev===this&&sk(t,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(e,t){let i=super.replaceWith(e,t);return this.attributes.copy(i),i}update(e,t){super.update(e,t),e.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}wrap(e,t){let i=super.wrap(e,t);return i instanceof Nl&&this.attributes.move(i),i}};Ll.allowedChildren=[Ll,Pn],Ll.blotName="inline",Ll.scope=kt.INLINE_BLOT,Ll.tagName="SPAN";var ok=Ll,Qd=ok,Ol=class tg extends tr{static{s(this,"_BlockBlot")}static create(e){return super.create(e)}static formats(e,t){let i=t.query(tg.blotName);if(!(i!=null&&e.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Eu(this.domNode)}format(e,t){let i=this.scroll.query(e,kt.BLOCK);i!=null&&(i instanceof Oi?this.attributes.attribute(i,t):e===this.statics.blotName&&!t?this.replaceWith(tg.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,i,o){this.scroll.query(i,kt.BLOCK)!=null?this.format(i,o):super.formatAt(e,t,i,o)}insertAt(e,t,i){if(i==null||this.scroll.query(t,kt.INLINE)!=null)super.insertAt(e,t,i);else{let o=this.split(e);if(o!=null){let c=this.scroll.create(t,i);o.parent.insertBefore(c,o)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){let i=super.replaceWith(e,t);return this.attributes.copy(i),i}update(e,t){super.update(e,t),e.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}};Ol.blotName="block",Ol.scope=kt.BLOCK_BLOT,Ol.tagName="P",Ol.allowedChildren=[Qd,Ol,Pn];var ak=Ol,ya=ak,eg=class extends tr{static{s(this,"_ContainerBlot")}checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,i,o){super.formatAt(e,t,i,o),this.enforceAllowedChildren()}insertAt(e,t,i){super.insertAt(e,t,i),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};eg.blotName="container",eg.scope=kt.BLOCK_BLOT;var lk=eg,kl=lk,ng=class extends Pn{static{s(this,"EmbedBlot")}static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,i,o){e===0&&t===this.length()?this.format(i,o):super.formatAt(e,t,i,o)}formats(){return this.statics.formats(this.domNode,this.scroll)}},wn=ng,ck={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},uk=100,Ml=class extends tr{static{s(this,"_ScrollBlot")}constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,ck),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){let i=this.registry.find(e,t);return i?i.scroll===this?i:t?this.find(i.scroll.domNode.parentNode,!0):null:null}query(e,t=kt.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(e,t)}formatAt(e,t,i,o){this.update(),super.formatAt(e,t,i,o)}insertAt(e,t,i){this.update(),super.insertAt(e,t,i)}optimize(e=[],t={}){super.optimize(t);let i=t.mutationsMap||new WeakMap,o=Array.from(this.observer.takeRecords());for(;o.length>0;)e.push(o.pop());let c=s((v,_=!0)=>{v==null||v===this||v.domNode.parentNode!=null&&(i.has(v.domNode)||i.set(v.domNode,[]),_&&c(v.parent))},"mark"),d=s(v=>{i.has(v.domNode)&&(v instanceof tr&&v.children.forEach(d),i.delete(v.domNode),v.optimize(t))},"optimize"),m=e;for(let v=0;m.length>0;v+=1){if(v>=uk)throw new Error("[Parchment] Maximum optimize iterations reached");for(m.forEach(_=>{let T=this.find(_.target,!0);T!=null&&(T.domNode===_.target&&(_.type==="childList"?(c(this.find(_.previousSibling,!1)),Array.from(_.addedNodes).forEach(S=>{let O=this.find(S,!1);c(O,!1),O instanceof tr&&O.children.forEach(M=>{c(M,!1)})})):_.type==="attributes"&&c(T.prev)),c(T))}),this.children.forEach(d),m=Array.from(this.observer.takeRecords()),o=m.slice();o.length>0;)e.push(o.pop())}}update(e,t={}){e=e||this.observer.takeRecords();let i=new WeakMap;e.map(o=>{let c=this.find(o.target,!0);return c==null?null:i.has(c.domNode)?(i.get(c.domNode).push(o),null):(i.set(c.domNode,[o]),c)}).forEach(o=>{o!=null&&o!==this&&i.has(o.domNode)&&o.update(i.get(o.domNode)||[],t)}),t.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),t),this.optimize(e,t)}};Ml.blotName="scroll",Ml.defaultChild=ya,Ml.allowedChildren=[ya,kl],Ml.scope=kt.BLOCK_BLOT,Ml.tagName="DIV";var hk=Ml,Tu=hk,ig=class P_ extends Pn{static{s(this,"_TextBlot")}static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,i){i==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,i)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof P_&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let i=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(e,t){e.some(i=>i.type==="characterData"&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};ig.blotName="text",ig.scope=kt.INLINE_BLOT;var dk=ig,Dl=dk;var Mo=Jn(pr(),1);var xn=Jn(pr(),1);var Ug=Jn(pr(),1);var Pu=class extends wn{static{s(this,"Break")}static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};Pu.blotName="break";Pu.tagName="BR";var vi=Pu;var Cn=class extends Dl{static{s(this,"Text")}};function La(n){return n.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}s(La,"escapeText");var zg=class n extends Qd{static{s(this,"Inline")}static allowedChildren=[n,vi,wn,Cn];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){let i=n.order.indexOf(e),o=n.order.indexOf(t);return i>=0||o>=0?i-o:e===t?0:e<t?-1:1}formatAt(e,t,i,o){if(n.compare(this.statics.blotName,i)<0&&this.scroll.query(i,kt.BLOT)){let c=this.isolate(e,t);o&&c.wrap(i,o)}else super.formatAt(e,t,i,o)}optimize(e){if(super.optimize(e),this.parent instanceof n&&n.compare(this.statics.blotName,this.parent.statics.blotName)>0){let t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}},bi=zg;var bx=1,sn=class extends ya{static{s(this,"Block")}cache={};delta(){return this.cache.delta==null&&(this.cache.delta=Wg(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,i,o){t<=0||(this.scroll.query(i,kt.BLOCK)?e+t===this.length()&&this.format(i,o):super.formatAt(e,Math.min(t,this.length()-e-1),i,o),this.cache={})}insertAt(e,t,i){if(i!=null){super.insertAt(e,t,i),this.cache={};return}if(t.length===0)return;let o=t.split(`
`),c=o.shift();c.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),c):this.children.tail.insertAt(this.children.tail.length(),c),this.cache={});let d=this;o.reduce((m,v)=>(d=d.split(m,!0),d.insertAt(0,v),v.length),e+c.length)}insertBefore(e,t){let{head:i}=this.children;super.insertBefore(e,t),i instanceof vi&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+bx),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-bx)){let o=this.clone();return e===0?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}let i=super.split(e,t);return this.cache={},i}};sn.blotName="block";sn.tagName="P";sn.defaultChild=vi;sn.allowedChildren=[vi,bi,wn,Cn];var Un=class extends wn{static{s(this,"BlockEmbed")}attach(){super.attach(),this.attributes=new Eu(this.domNode)}delta(){return new Ug.default().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){let i=this.scroll.query(e,kt.BLOCK_ATTRIBUTE);i!=null&&this.attributes.attribute(i,t)}formatAt(e,t,i,o){this.format(i,o)}insertAt(e,t,i){if(i!=null){super.insertAt(e,t,i);return}let o=t.split(`
`),c=o.pop(),d=o.map(v=>{let _=this.scroll.create(sn.blotName);return _.insertAt(0,v),_}),m=this.split(e);d.forEach(v=>{this.parent.insertBefore(v,m)}),c&&this.parent.insertBefore(this.scroll.create("text",c),m)}};Un.scope=kt.BLOCK_BLOT;function Wg(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(Pn).reduce((t,i)=>i.length()===0?t:t.insert(i.value(),nr(i,{},e)),new Ug.default).insert(`
`,nr(n))}s(Wg,"blockDelta");function nr(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:nr(n.parent,e,t)}s(nr,"bubbleFormats");var Vg=class n extends wn{static{s(this,"Cursor")}static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,i){super(e,t),this.selection=i,this.textNode=document.createTextNode(n.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let i=this,o=0;for(;i!=null&&i.statics.scope!==kt.BLOCK_BLOT;)o+=i.offset(i.parent),i=i.parent;i!=null&&(this.savedLength=n.CONTENTS.length,i.optimize(),i.formatAt(o,n.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let t=this.prev instanceof Cn?this.prev:null,i=t?t.length():0,o=this.next instanceof Cn?this.next:null,c=o?o.text:"",{textNode:d}=this,m=d.data.split(n.CONTENTS).join("");d.data=n.CONTENTS;let v;if(t)v=t,(m||o)&&(t.insertAt(t.length(),m+c),o&&o.remove());else if(o)v=o,o.insertAt(0,m);else{let _=document.createTextNode(m);v=this.scroll.create(_),this.parent.insertBefore(v,this)}if(this.remove(),e){let _=s((O,M)=>t&&O===t.domNode?M:O===d?i+M-1:o&&O===o.domNode?i+m.length+M:null,"remapOffset"),T=_(e.start.node,e.start.offset),S=_(e.end.node,e.end.offset);if(T!==null&&S!==null)return{startNode:v.domNode,startOffset:T,endNode:v.domNode,endOffset:S}}return null}update(e,t){if(e.some(i=>i.type==="characterData"&&i.target===this.textNode)){let i=this.restore();i&&(t.range=i)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=n.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}},Oo=Vg;var $g=Jn(_x(),1);var qu=new WeakMap;var Kg=["error","warn","log","info"],Yg="warn";function wx(n){if(Yg&&Kg.indexOf(n)<=Kg.indexOf(Yg)){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];console[n](...t)}}s(wx,"debug");function Gg(n){return Kg.reduce((e,t)=>(e[t]=wx.bind(console,t,n),e),{})}s(Gg,"namespace");Gg.level=n=>{Yg=n};wx.level=Gg.level;var mr=Gg;var Xg=mr("quill:events"),MP=["selectionchange","mousedown","mouseup","click"];MP.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(o=>{let c=qu.get(o);c&&c.emitter&&c.emitter.handleDOM(...t)})})});var Jg=class extends $g.default{static{s(this,"Emitter")}static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Xg.error)}emit(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Xg.log.call(Xg,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];(this.domListeners[e.type]||[]).forEach(c=>{let{node:d,handler:m}=c;(e.target===d||d.contains(e.target))&&m(e,...i)})}listenDOM(e,t,i){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:i})}},Ht=Jg;var Qg=mr("quill:selection"),Di=class{static{s(this,"Range")}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}},ev=class{static{s(this,"Selection")}constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Di(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ht.sources.USER),1)}),this.emitter.on(Ht.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let i=this.getNativeRange();i!=null&&i.start.node!==this.cursor.textNode&&this.emitter.once(Ht.events.SCROLL_UPDATE,(o,c)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);let d=c.some(m=>m.type==="characterData"||m.type==="childList"||m.type==="attributes"&&m.target===this.root);this.update(d?Ht.sources.SILENT:o)}catch{}})}),this.emitter.on(Ht.events.SCROLL_OPTIMIZE,(i,o)=>{if(o.range){let{startNode:c,startOffset:d,endNode:m,endOffset:v}=o.range;this.setNativeRange(c,d,m,v),this.update(Ht.sources.SILENT)}}),this.update(Ht.sources.SILENT)}handleComposition(){this.emitter.on(Ht.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ht.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ht.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();let i=this.getNativeRange();if(!(i==null||!i.native.collapsed||this.scroll.query(e,kt.BLOCK))){if(i.start.node!==this.cursor.textNode){let o=this.scroll.find(i.start.node,!1);if(o==null)return;if(o instanceof Pn){let c=o.split(i.start.offset);o.parent.insertBefore(this.cursor,c)}else o.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.scroll.length();e=Math.min(e,i-1),t=Math.min(e+t,i-1)-e;let o,[c,d]=this.scroll.leaf(e);if(c==null)return null;if(t>0&&d===c.length()){let[T]=this.scroll.leaf(e+1);if(T){let[S]=this.scroll.line(e),[O]=this.scroll.line(e+1);S===O&&(c=T,d=0)}}[o,d]=c.position(d,!0);let m=document.createRange();if(t>0)return m.setStart(o,d),[c,d]=this.scroll.leaf(e+t),c==null?null:([o,d]=c.position(d,!0),m.setEnd(o,d),m.getBoundingClientRect());let v="left",_;if(o instanceof Text){if(!o.data.length)return null;d<o.data.length?(m.setStart(o,d),m.setEnd(o,d+1)):(m.setStart(o,d-1),m.setEnd(o,d),v="right"),_=m.getBoundingClientRect()}else{if(!(c.domNode instanceof Element))return null;_=c.domNode.getBoundingClientRect(),d>0&&(v="right")}return{bottom:_.top+_.height,height:_.height,left:_[v],right:_[v],top:_.top,width:0}}getNativeRange(){let e=document.getSelection();if(e==null||e.rangeCount<=0)return null;let t=e.getRangeAt(0);if(t==null)return null;let i=this.normalizeNative(t);return Qg.info("getNativeRange",i),i}getRange(){let e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];let t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&tv(this.root,document.activeElement)}normalizedToRange(e){let t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);let i=t.map(d=>{let[m,v]=d,_=this.scroll.find(m,!0),T=_.offset(this.scroll);return v===0?T:_ instanceof Pn?T+_.index(m,v):T+_.length()}),o=Math.min(Math.max(...i),this.scroll.length()-1),c=Math.min(o,...i);return new Di(c,o-c)}normalizeNative(e){if(!tv(this.root,e.startContainer)||!e.collapsed&&!tv(this.root,e.endContainer))return null;let t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(i=>{let{node:o,offset:c}=i;for(;!(o instanceof Text)&&o.childNodes.length>0;)if(o.childNodes.length>c)o=o.childNodes[c],c=0;else if(o.childNodes.length===c)o=o.lastChild,o instanceof Text?c=o.data.length:o.childNodes.length>0?c=o.childNodes.length:c=o.childNodes.length+1;else break;i.node=o,i.offset=c}),t}rangeToNative(e){let t=this.scroll.length(),i=s((o,c)=>{o=Math.min(t-1,o);let[d,m]=this.scroll.leaf(o);return d?d.position(m,c):[null,-1]},"getPosition");return[...i(e.index,!1),...i(e.index+e.length,!0)]}setNativeRange(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Qg.info("setNativeRange",e,t,i,o),e!=null&&(this.root.parentNode==null||e.parentNode==null||i.parentNode==null))return;let d=document.getSelection();if(d!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:m}=this.getNativeRange()||{};if(m==null||c||e!==m.startContainer||t!==m.startOffset||i!==m.endContainer||o!==m.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),i instanceof Element&&i.tagName==="BR"&&(o=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);let v=document.createRange();v.setStart(e,t),v.setEnd(i,o),d.removeAllRanges(),d.addRange(v)}}else d.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ht.sources.API;if(typeof t=="string"&&(i=t,t=!1),Qg.info("setRange",e),e!=null){let o=this.rangeToNative(e);this.setNativeRange(...o,t)}else this.setNativeRange(null);this.update(i)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ht.sources.USER,t=this.lastRange,[i,o]=this.getRange();if(this.lastRange=i,this.lastNative=o,this.lastRange!=null&&(this.savedRange=this.lastRange),!ba(t,this.lastRange)){if(!this.composing&&o!=null&&o.native.collapsed&&o.start.node!==this.cursor.textNode){let d=this.cursor.restore();d&&this.setNativeRange(d.startNode,d.startOffset,d.endNode,d.endOffset)}let c=[Ht.events.SELECTION_CHANGE,cs(this.lastRange),cs(t),e];this.emitter.emit(Ht.events.EDITOR_CHANGE,...c),e!==Ht.sources.SILENT&&this.emitter.emit(...c)}}};function tv(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}s(tv,"contains");var xx=ev;var kP=/^[ -~]*$/,iv=class{static{s(this,"Editor")}constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();let i=Ex(e),o=new xn.default;return IP(i.ops.slice()).reduce((d,m)=>{let v=xn.Op.length(m),_=m.attributes||{},T=!1,S=!1;if(m.insert!=null){if(o.retain(v),typeof m.insert=="string"){let D=m.insert;S=!D.endsWith(`
`)&&(t<=d||!!this.scroll.descendant(Un,d)[0]),this.scroll.insertAt(d,D);let[j,I]=this.scroll.line(d),B=Qi({},nr(j));if(j instanceof sn){let[W]=j.descendant(Pn,I);W&&(B=Qi(B,nr(W)))}_=xn.AttributeMap.diff(B,_)||{}}else if(typeof m.insert=="object"){let D=Object.keys(m.insert)[0];if(D==null)return d;let j=this.scroll.query(D,kt.INLINE)!=null;if(j)(t<=d||this.scroll.descendant(Un,d)[0])&&(S=!0);else if(d>0){let[I,B]=this.scroll.descendant(Pn,d-1);I instanceof Cn?I.value()[B]!==`
`&&(T=!0):I instanceof wn&&I.statics.scope===kt.INLINE_BLOT&&(T=!0)}if(this.scroll.insertAt(d,D,m.insert[D]),j){let[I]=this.scroll.descendant(Pn,d);if(I){let B=Qi({},nr(I));_=xn.AttributeMap.diff(B,_)||{}}}}t+=v}else if(o.push(m),m.retain!==null&&typeof m.retain=="object"){let D=Object.keys(m.retain)[0];if(D==null)return d;this.scroll.updateEmbedAt(d,D,m.retain[D])}Object.keys(_).forEach(D=>{this.scroll.formatAt(d,v,D,_[D])});let O=T?1:0,M=S?1:0;return t+=O+M,o.retain(O),o.delete(M),d+v+O+M},0),o.reduce((d,m)=>typeof m.delete=="number"?(this.scroll.deleteAt(d,m.delete),d):d+xn.Op.length(m),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new xn.default().retain(e).delete(t))}formatLine(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(c=>{this.scroll.lines(e,Math.max(t,1)).forEach(d=>{d.format(c,i[c])})}),this.scroll.optimize();let o=new xn.default().retain(e).retain(t,cs(i));return this.update(o)}formatText(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i).forEach(c=>{this.scroll.formatAt(e,t,c,i[c])});let o=new xn.default().retain(e).retain(t,cs(i));return this.update(o)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new xn.default)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],o=[];t===0?this.scroll.path(e).forEach(m=>{let[v]=m;v instanceof sn?i.push(v):v instanceof Pn&&o.push(v)}):(i=this.scroll.lines(e,t),o=this.scroll.descendants(Pn,e,t));let[c,d]=[i,o].map(m=>{let v=m.shift();if(v==null)return{};let _=nr(v);for(;Object.keys(_).length>0;){let T=m.shift();if(T==null)return _;_=DP(nr(T),_)}return _});return{...c,...d}}getHTML(e,t){let[i,o]=this.scroll.line(e);if(i){let c=i.length();return i.length()>=o+t&&!(o===0&&t===c)?Bu(i,o,t,!0):Bu(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(i=>typeof i.insert=="string").map(i=>i.insert).join("")}insertContents(e,t){let i=Ex(t),o=new xn.default().retain(e).concat(i);return this.scroll.insertContents(e,i),this.update(o)}insertEmbed(e,t,i){return this.scroll.insertAt(e,t,i),this.update(new xn.default().retain(e).insert({[t]:i}))}insertText(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(i).forEach(o=>{this.scroll.formatAt(e,t.length,o,i[o])}),this.update(new xn.default().retain(e).insert(t,cs(i)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let e=this.scroll.children.head;if(e?.statics.blotName!==sn.blotName)return!1;let t=e;return t.children.length>1?!1:t.children.head instanceof vi}removeFormat(e,t){let i=this.getText(e,t),[o,c]=this.scroll.line(e+t),d=0,m=new xn.default;o!=null&&(d=o.length()-c,m=o.delta().slice(c,c+d-1).insert(`
`));let _=this.getContents(e,t+d).diff(new xn.default().insert(i).concat(m)),T=new xn.default().retain(e).concat(_);return this.applyDelta(T)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,o=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(kP)&&this.scroll.find(t[0].target)){let c=this.scroll.find(t[0].target),d=nr(c),m=c.offset(this.scroll),v=t[0].oldValue.replace(Oo.CONTENTS,""),_=new xn.default().insert(v),T=new xn.default().insert(c.value()),S=i&&{oldRange:Tx(i.oldRange,-m),newRange:Tx(i.newRange,-m)};e=new xn.default().retain(m).concat(_.diff(T,S)).reduce((M,D)=>D.insert?M.insert(D.insert,d):M.push(D),new xn.default),this.delta=o.compose(e)}else this.delta=this.getDelta(),(!e||!ba(o.compose(e),this.delta))&&(e=o.diff(this.delta,i));return e}};function Hl(n,e,t){if(n.length===0){let[M]=nv(t.pop());return e<=0?`</li></${M}>`:`</li></${M}>${Hl([],e-1,t)}`}let[{child:i,offset:o,length:c,indent:d,type:m},...v]=n,[_,T]=nv(m);if(d>e)return t.push(m),d===e+1?`<${_}><li${T}>${Bu(i,o,c)}${Hl(v,d,t)}`:`<${_}><li>${Hl(n,e+1,t)}`;let S=t[t.length-1];if(d===e&&m===S)return`</li><li${T}>${Bu(i,o,c)}${Hl(v,d,t)}`;let[O]=nv(t.pop());return`</li></${O}>${Hl(n,e-1,t)}`}s(Hl,"convertListHTML");function Bu(n,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof Cn)return La(n.value().slice(e,e+t));if(n instanceof tr){if(n.statics.blotName==="list-container"){let _=[];return n.children.forEachAt(e,t,(T,S,O)=>{let M="formats"in T&&typeof T.formats=="function"?T.formats():{};_.push({child:T,offset:S,length:O,indent:M.indent||0,type:M.list})}),Hl(_,-1,[])}let o=[];if(n.children.forEachAt(e,t,(_,T,S)=>{o.push(Bu(_,T,S))}),i||n.statics.blotName==="list")return o.join("");let{outerHTML:c,innerHTML:d}=n.domNode,[m,v]=c.split(`>${d}<`);return m==="<table"?`<table style="border: 1px solid #000;">${o.join("")}<${v}`:`${m}>${o.join("")}<${v}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}s(Bu,"convertHTML");function DP(n,e){return Object.keys(e).reduce((t,i)=>{if(n[i]==null)return t;let o=e[i];return o===n[i]?t[i]=o:Array.isArray(o)?o.indexOf(n[i])<0?t[i]=o.concat([n[i]]):t[i]=o:t[i]=[o,n[i]],t},{})}s(DP,"combineFormats");function nv(n){let e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}s(nv,"getListType");function Ex(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){let i=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(i,t.attributes)}return e.push(t)},new xn.default)}s(Ex,"normalizeDelta");function Tx(n,e){let{index:t,length:i}=n;return new Di(t+e,i)}s(Tx,"shiftRange");function IP(n){let e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((o,c)=>{c&&e.push({insert:`
`,attributes:t.attributes}),o&&e.push({insert:o,attributes:t.attributes})}):e.push(t)}),e}s(IP,"splitOpLines");var Sx=iv;var rv=class{static{s(this,"Module")}static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}},Rn=rv;var Sf="\uFEFF",sv=class extends wn{static{s(this,"Embed")}constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode(Sf),this.rightGuard=document.createTextNode(Sf),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,i,o=e.data.split(Sf).join("");if(e===this.leftGuard)if(this.prev instanceof Cn){let c=this.prev.length();this.prev.insertAt(c,o),t={startNode:this.prev.domNode,startOffset:c+o.length}}else i=document.createTextNode(o),this.parent.insertBefore(this.scroll.create(i),this),t={startNode:i,startOffset:o.length};else e===this.rightGuard&&(this.next instanceof Cn?(this.next.insertAt(0,o),t={startNode:this.next.domNode,startOffset:o.length}):(i=document.createTextNode(o),this.parent.insertBefore(this.scroll.create(i),this.next),t={startNode:i,startOffset:o.length}));return e.data=Sf,t}update(e,t){e.forEach(i=>{if(i.type==="characterData"&&(i.target===this.leftGuard||i.target===this.rightGuard)){let o=this.restore(i.target);o&&(t.range=o)}})}},zl=sv;var ov=class{static{s(this,"Composition")}isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){let t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof zl)&&(this.emitter.emit(Ht.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ht.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ht.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ht.events.COMPOSITION_END,e),this.isComposing=!1}},Ax=ov;var av=class n{static{s(this,"Theme")}static DEFAULTS={modules:{}};static themes={default:n};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){let t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}},Ul=av;var PP=s(n=>n.parentElement||n.getRootNode().host||null,"getParentElement"),RP=s(n=>{let e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,i="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*i,left:e.left}},"getElementRect"),Af=s(n=>{let e=parseInt(n,10);return Number.isNaN(e)?0:e},"paddingValueToInt"),Cx=s((n,e,t,i,o,c)=>n<t&&e>i?0:n<t?-(t-n+o):e>i?e-n>i-t?n+o-t:e-i+c:0,"getScrollDistance"),qP=s((n,e)=>{let t=n.ownerDocument,i=e,o=n;for(;o;){let c=o===t.body,d=c?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:RP(o),m=getComputedStyle(o),v=Cx(i.left,i.right,d.left,d.right,Af(m.scrollPaddingLeft),Af(m.scrollPaddingRight)),_=Cx(i.top,i.bottom,d.top,d.bottom,Af(m.scrollPaddingTop),Af(m.scrollPaddingBottom));if(v||_)if(c)t.defaultView?.scrollBy(v,_);else{let{scrollLeft:T,scrollTop:S}=o;_&&(o.scrollTop+=_),v&&(o.scrollLeft+=v);let O=o.scrollLeft-T,M=o.scrollTop-S;i={left:i.left-O,top:i.top-M,right:i.right-O,bottom:i.bottom-M}}o=c||m.position==="fixed"?null:PP(o)}},"scrollRectIntoView"),Lx=qP;var BP=100,jP=["block","break","cursor","inline","scroll","text"],FP=s((n,e,t)=>{let i=new Ao;return jP.forEach(o=>{let c=e.query(o);c&&i.register(c)}),n.forEach(o=>{let c=e.query(o);c||t.error(`Cannot register "${o}" specified in "formats" config. Are you sure it was registered?`);let d=0;for(;c;)if(i.register(c),c="blotName"in c?c.requiredContainer??null:null,d+=1,d>BP){t.error(`Cycle detected in registering blot requiredContainer: "${o}"`);break}}),i},"createRegistryWithFormats"),Nx=FP;var Wl=mr("quill"),Cf=new Ao;tr.uiClass="ql-ui";var dt=class n{static{s(this,"Quill")}static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Cf,theme:"default"};static events=Ht.events;static sources=Ht.sources;static version="2.0.0";static imports={delta:Mo.default,parchment:Su,"core/module":Rn,"core/theme":Ul};static debug(e){e===!0&&(e="log"),mr.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return qu.get(e)||Cf.find(e,t)}static import(e){return this.imports[e]==null&&Wl.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof e!="string"){let o="attrName"in e?e.attrName:e.blotName;typeof o=="string"?this.register(`formats/${o}`,e,t):Object.keys(e).forEach(c=>{this.register(c,e[c],t)})}else this.imports[e]!=null&&!i&&Wl.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Cf.register(t),typeof t.register=="function"&&t.register(Cf)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=HP(e,t),this.container=this.options.container,this.container==null){Wl.error("Invalid Quill container",e);return}this.options.debug&&n.debug(this.options.debug);let i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",qu.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ht;let o=Tu.blotName,c=this.options.registry.query(o);if(!c||!("blotName"in c))throw new Error(`Cannot initialize Quill without "${o}" blot`);if(this.scroll=new c(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Sx(this.scroll),this.selection=new xx(this.scroll,this.emitter),this.composition=new Ax(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ht.events.EDITOR_CHANGE,d=>{d===Ht.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ht.events.SCROLL_UPDATE,(d,m)=>{let v=this.selection.lastRange,[_]=this.selection.getRange(),T=v&&_?{oldRange:v,newRange:_}:void 0;Yr.call(this,()=>this.editor.update(null,m,T),d)}),this.emitter.on(Ht.events.SCROLL_EMBED_UPDATE,(d,m)=>{let v=this.selection.lastRange,[_]=this.selection.getRange(),T=v&&_?{oldRange:v,newRange:_}:void 0;Yr.call(this,()=>{let S=new Mo.default().retain(d.offset(this)).retain({[d.statics.blotName]:m});return this.editor.update(S,[],T)},n.sources.USER)}),i){let d=this.clipboard.convert({html:`${i}<p><br></p>`,text:`
`});this.setContents(d)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){let i=e;e=document.createElement("div"),e.classList.add(i)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,i){return[e,t,,i]=Hs(e,t,i),Yr.call(this,()=>this.editor.deleteText(e,t),i,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;let t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ht.sources.API;return Yr.call(this,()=>{let o=this.getSelection(!0),c=new Mo.default;if(o==null)return c;if(this.scroll.query(e,kt.BLOCK))c=this.editor.formatLine(o.index,o.length,{[e]:t});else{if(o.length===0)return this.selection.format(e,t),c;c=this.editor.formatText(o.index,o.length,{[e]:t})}return this.setSelection(o,Ht.sources.SILENT),c},i)}formatLine(e,t,i,o,c){let d;return[e,t,d,c]=Hs(e,t,i,o,c),Yr.call(this,()=>this.editor.formatLine(e,t,d),c,e,0)}formatText(e,t,i,o,c){let d;return[e,t,d,c]=Hs(e,t,i,o,c),Yr.call(this,()=>this.editor.formatText(e,t,d),c,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=null;if(typeof e=="number"?i=this.selection.getBounds(e,t):i=this.selection.getBounds(e.index,e.length),!i)return null;let o=this.container.getBoundingClientRect();return{bottom:i.bottom-o.top,height:i.height,left:i.left-o.left,right:i.right-o.left,top:i.top-o.top,width:i.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=Hs(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=Hs(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=Hs(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n.sources.API;return Yr.call(this,()=>this.editor.insertEmbed(e,t,i),o,e)}insertText(e,t,i,o,c){let d;return[e,,d,c]=Hs(e,0,i,o,c),Yr.call(this,()=>this.editor.insertText(e,t,d),c,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,i){return[e,t,,i]=Hs(e,t,i),Yr.call(this,()=>this.editor.removeFormat(e,t),i,e)}scrollRectIntoView(e){Lx(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ht.sources.API;return Yr.call(this,()=>{e=new Mo.default(e);let i=this.getLength(),o=this.editor.deleteText(0,i),c=this.editor.insertContents(0,e),d=this.editor.deleteText(this.getLength()-1,1);return o.compose(c).compose(d)},t)}setSelection(e,t,i){e==null?this.selection.setRange(null,t||n.sources.API):([e,t,,i]=Hs(e,t,i),this.selection.setRange(new Di(Math.max(0,e),t),i),i!==Ht.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ht.sources.API,i=new Mo.default().insert(e);return this.setContents(i,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ht.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ht.sources.API;return Yr.call(this,()=>(e=new Mo.default(e),this.editor.applyDelta(e)),t,!0)}};function Ox(n){return typeof n=="string"?document.querySelector(n):n}s(Ox,"resolveSelector");function lv(n){return Object.entries(n??{}).reduce((e,t)=>{let[i,o]=t;return{...e,[i]:o===!0?{}:o}},{})}s(lv,"expandModuleConfig");function Mx(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}s(Mx,"omitUndefinedValuesFromOptions");function HP(n,e){let t=Ox(n);if(!t)throw new Error("Invalid Quill container");let o=!e.theme||e.theme===dt.DEFAULTS.theme?Ul:dt.import(`themes/${e.theme}`);if(!o)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);let{modules:c,...d}=dt.DEFAULTS,{modules:m,...v}=o.DEFAULTS,_=Qi({},lv(c),lv(m),lv(e.modules));_!=null&&_.toolbar&&_.toolbar.constructor!==Object&&(_.toolbar={container:_.toolbar});let T={...d,...Mx(v),...Mx(e)},S=e.registry;return S?e.formats&&Wl.warn('Ignoring "formats" option because "registry" is specified'):S=e.formats?Nx(e.formats,T.registry,Wl):T.registry,{...T,registry:S,container:t,theme:o,modules:Object.entries(_).reduce((O,M)=>{let[D,j]=M;if(!j)return O;let I=dt.import(`modules/${D}`);return I==null?(Wl.error(`Cannot load ${D} module. Are you sure you registered it?`),O):{...O,[D]:Qi({},I.DEFAULTS||{},j)}},{}),bounds:Ox(T.bounds)}}s(HP,"expandConfig");function Yr(n,e,t,i){if(!this.isEnabled()&&e===Ht.sources.USER&&!this.allowReadOnlyEdits)return new Mo.default;let o=t==null?null:this.getSelection(),c=this.editor.delta,d=n();if(o!=null&&(t===!0&&(t=o.index),i==null?o=kx(o,d,e):i!==0&&(o=kx(o,t,i,e)),this.setSelection(o,Ht.sources.SILENT)),d.length()>0){let m=[Ht.events.TEXT_CHANGE,d,c,e];this.emitter.emit(Ht.events.EDITOR_CHANGE,...m),e!==Ht.sources.SILENT&&this.emitter.emit(...m)}return d}s(Yr,"modify");function Hs(n,e,t,i,o){let c={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(o=i,i=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(o=i,i=t,t=e,e=0),typeof t=="object"?(c=t,o=i):typeof t=="string"&&(i!=null?c[t]=i:o=t),o=o||Ht.sources.API,[n,e,c,o]}s(Hs,"overload");function kx(n,e,t,i){let o=typeof t=="number"?t:0;if(n==null)return null;let c,d;return e&&typeof e.transformPosition=="function"?[c,d]=[n.index,n.index+n.length].map(m=>e.transformPosition(m,i!==Ht.sources.USER)):[c,d]=[n.index,n.index+n.length].map(m=>m<e||m===e&&i===Ht.sources.USER?m:o>=0?m+o:Math.max(e,m+o)),new Di(c,d-c)}s(kx,"shiftRange");var cv=class extends kl{static{s(this,"Container")}},Or=cv;var Mr=Jn(pr(),1);function Dx(n){return n instanceof sn||n instanceof Un}s(Dx,"isLine");function Ix(n){return typeof n.updateContent=="function"}s(Ix,"isUpdatable");var hv=class extends Tu{static{s(this,"Scroll")}static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=sn;static allowedChildren=[sn,Un,Or];constructor(e,t,i){let{emitter:o}=i;super(e,t),this.emitter=o,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",c=>this.handleDragStart(c))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ht.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ht.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Ht.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){let[i,o]=this.line(e),[c]=this.line(e+t);if(super.deleteAt(e,t),c!=null&&i!==c&&o>0){if(i instanceof Un||c instanceof Un){this.optimize();return}let d=c.children.head instanceof vi?null:c.children.head;i.moveChildren(c,d),i.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,i,o){super.formatAt(e,t,i,o),this.optimize()}insertAt(e,t,i){if(e>=this.length())if(i==null||this.scroll.query(t,kt.BLOCK)==null){let o=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(o),i==null&&t.endsWith(`
`)?o.insertAt(0,t.slice(0,-1),i):o.insertAt(0,t,i)}else{let o=this.scroll.create(t,i);this.appendChild(o)}else super.insertAt(e,t,i);this.optimize()}insertBefore(e,t){if(e.statics.scope===kt.INLINE_BLOT){let i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(e),super.insertBefore(i,t)}else super.insertBefore(e,t)}insertContents(e,t){let i=this.deltaToRenderBlocks(t.concat(new Mr.default().insert(`
`))),o=i.pop();if(o==null)return;this.batchStart();let c=i.shift();if(c){let v=c.type==="block"&&(c.delta.length()===0||!this.descendant(Un,e)[0]&&e<this.length()),_=c.type==="block"?c.delta:new Mr.default().insert({[c.key]:c.value});uv(this,e,_);let T=c.type==="block"?1:0,S=e+_.length()+T;v&&this.insertAt(S-1,`
`);let O=nr(this.line(e)[0]),M=Mr.AttributeMap.diff(O,c.attributes)||{};Object.keys(M).forEach(D=>{this.formatAt(S-1,1,D,M[D])}),e=S}let[d,m]=this.children.find(e);if(i.length&&(d&&(d=d.split(m),m=0),i.forEach(v=>{if(v.type==="block"){let _=this.createBlock(v.attributes,d||void 0);uv(_,0,v.delta)}else{let _=this.create(v.key,v.value);this.insertBefore(_,d||void 0),Object.keys(v.attributes).forEach(T=>{_.format(T,v.attributes[T])})}})),o.type==="block"&&o.delta.length()){let v=d?d.offset(d.scroll)+m:this.length();uv(this,v,o.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){let t=this.path(e).pop();if(!t)return[null,-1];let[i,o]=t;return i instanceof Pn?[i,o]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Dx,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=s((o,c,d)=>{let m=[],v=d;return o.children.forEachAt(c,d,(_,T,S)=>{Dx(_)?m.push(_):_ instanceof kl&&(m=m.concat(i(_,T,v))),v-=S}),m},"getLines");return i(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Ht.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Ht.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(i=>{let{target:o}=i,c=this.find(o,!0);return c&&!Ix(c)}),e.length>0&&this.emitter.emit(Ht.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ht.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,i){let[o]=this.descendant(c=>c instanceof Un,e);o&&o.statics.blotName===t&&Ix(o)&&o.updateContent(i)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){let t=[],i=new Mr.default;return e.forEach(o=>{let c=o?.insert;if(c)if(typeof c=="string"){let d=c.split(`
`);d.slice(0,-1).forEach(v=>{i.insert(v,o.attributes),t.push({type:"block",delta:i,attributes:o.attributes??{}}),i=new Mr.default});let m=d[d.length-1];m&&i.insert(m,o.attributes)}else{let d=Object.keys(c)[0];if(!d)return;this.query(d,kt.INLINE)?i.push(o):(i.length()&&t.push({type:"block",delta:i,attributes:{}}),i=new Mr.default,t.push({type:"blockEmbed",key:d,value:c[d],attributes:o.attributes??{}}))}}),i.length()&&t.push({type:"block",delta:i,attributes:{}}),t}createBlock(e,t){let i,o={};Object.entries(e).forEach(m=>{let[v,_]=m;this.query(v,kt.BLOCK&kt.BLOT)!=null?i=v:o[v]=_});let c=this.create(i||this.statics.defaultChild.blotName,i?e[i]:void 0);this.insertBefore(c,t||void 0);let d=c.length();return Object.entries(o).forEach(m=>{let[v,_]=m;c.formatAt(0,d,v,_)}),c}};function uv(n,e,t){t.reduce((i,o)=>{let c=Mr.Op.length(o),d=o.attributes||{};if(o.insert!=null){if(typeof o.insert=="string"){let m=o.insert;n.insertAt(i,m);let[v]=n.descendant(Pn,i),_=nr(v);d=Mr.AttributeMap.diff(_,d)||{}}else if(typeof o.insert=="object"){let m=Object.keys(o.insert)[0];if(m==null)return i;if(n.insertAt(i,m,o.insert[m]),n.scroll.query(m,kt.INLINE)!=null){let[_]=n.descendant(Pn,i),T=nr(_);d=Mr.AttributeMap.diff(T,d)||{}}}}return Object.keys(d).forEach(m=>{n.formatAt(i,c,m,d[m])}),i+c},e)}s(uv,"insertInlineContents");var Px=hv;var ir=Jn(pr(),1);var dv={scope:kt.BLOCK,whitelist:["right","center","justify"]},Rx=new Oi("align","align",dv),fv=new In("align","ql-align",dv),Lf=new er("align","text-align",dv);var ju=class extends er{static{s(this,"ColorAttributor")}value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(o=>`00${parseInt(o,10).toString(16)}`.slice(-2)).join("")}`):t}},qx=new In("color","ql-color",{scope:kt.INLINE}),Fu=new ju("color","color",{scope:kt.INLINE});var Bx=new In("background","ql-bg",{scope:kt.INLINE}),Hu=new ju("background","background-color",{scope:kt.INLINE});var hs=class extends Or{static{s(this,"CodeBlockContainer")}static create(e){let t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${La(this.code(e,t))}
</pre>`}},qn=class extends sn{static{s(this,"CodeBlock")}static TAB="  ";static register(){dt.register(hs)}},Vl=class extends bi{static{s(this,"Code")}};Vl.blotName="code";Vl.tagName="CODE";qn.blotName="code-block";qn.className="ql-code-block";qn.tagName="DIV";hs.blotName="code-block-container";hs.className="ql-code-block-container";hs.tagName="DIV";hs.allowedChildren=[qn];qn.allowedChildren=[Cn,vi,Oo];qn.requiredContainer=hs;var pv={scope:kt.BLOCK,whitelist:["rtl"]},Nf=new Oi("direction","dir",pv),mv=new In("direction","ql-direction",pv),Of=new er("direction","direction",pv);var jx={scope:kt.INLINE,whitelist:["serif","monospace"]},vv=new In("font","ql-font",jx),gv=class extends er{static{s(this,"FontStyleAttributor")}value(e){return super.value(e).replace(/["']/g,"")}},Mf=new gv("font","font-family",jx);var bv=new In("size","ql-size",{scope:kt.INLINE,whitelist:["small","large","huge"]}),kf=new er("size","font-size",{scope:kt.INLINE,whitelist:["10px","18px","32px"]});var _i=Jn(pr(),1);var zP=mr("quill:keyboard"),UP=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",zu=class n extends Rn{static{s(this,"Keyboard")}static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!t[i]!==e[i]&&t[i]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=VP(e);if(o==null){zP.warn("Attempted to add invalid keyboard binding",o);return}typeof t=="function"&&(t={handler:t}),typeof i=="function"&&(i={handler:i}),(Array.isArray(o.key)?o.key:[o.key]).forEach(d=>{let m={...o,key:d,...t,...i};this.bindings[m.key]=this.bindings[m.key]||[],this.bindings[m.key].push(m)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing)return;let i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(I=>n.match(e,I));if(i.length===0)return;let o=dt.find(e.target,!0);if(o&&o.scroll!==this.quill.scroll)return;let c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;let[d,m]=this.quill.getLine(c.index),[v,_]=this.quill.getLeaf(c.index),[T,S]=c.length===0?[v,_]:this.quill.getLeaf(c.index+c.length),O=v instanceof Dl?v.value().slice(0,_):"",M=T instanceof Dl?T.value().slice(S):"",D={collapsed:c.length===0,empty:c.length===0&&d.length()<=1,format:this.quill.getFormat(c),line:d,offset:m,prefix:O,suffix:M,event:e};i.some(I=>{if(I.collapsed!=null&&I.collapsed!==D.collapsed||I.empty!=null&&I.empty!==D.empty||I.offset!=null&&I.offset!==D.offset)return!1;if(Array.isArray(I.format)){if(I.format.every(B=>D.format[B]==null))return!1}else if(typeof I.format=="object"&&!Object.keys(I.format).every(B=>I.format[B]===!0?D.format[B]!=null:I.format[B]===!1?D.format[B]==null:ba(I.format[B],D.format[B])))return!1;return I.prefix!=null&&!I.prefix.test(D.prefix)||I.suffix!=null&&!I.suffix.test(D.suffix)?!1:I.handler.call(this,c,D,I)!==!0})&&e.preventDefault()})}handleBackspace(e,t){let i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let o={},[c]=this.quill.getLine(e.index),d=new _i.default().retain(e.index-i).delete(i);if(t.offset===0){let[m]=this.quill.getLine(e.index-1);if(m&&!(m.statics.blotName==="block"&&m.length()<=1)){let _=c.formats(),T=this.quill.getFormat(e.index-1,1);if(o=_i.AttributeMap.diff(_,T)||{},Object.keys(o).length>0){let S=new _i.default().retain(e.index+c.length()-2).retain(1,o);d=d.compose(S)}}}this.quill.updateContents(d,dt.sources.USER),this.quill.focus()}handleDelete(e,t){let i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-i)return;let o={},[c]=this.quill.getLine(e.index),d=new _i.default().retain(e.index).delete(i);if(t.offset>=c.length()-1){let[m]=this.quill.getLine(e.index+1);if(m){let v=c.formats(),_=this.quill.getFormat(e.index,1);o=_i.AttributeMap.diff(v,_)||{},Object.keys(o).length>0&&(d=d.retain(m.length()-1).retain(1,o))}}this.quill.updateContents(d,dt.sources.USER),this.quill.focus()}handleDeleteRange(e){Uu({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){let i=Object.keys(t.format).reduce((c,d)=>(this.quill.scroll.query(d,kt.BLOCK)&&!Array.isArray(t.format[d])&&(c[d]=t.format[d]),c),{}),o=new _i.default().retain(e.index).delete(e.length).insert(`
`,i);this.quill.updateContents(o,dt.sources.USER),this.quill.setSelection(e.index+1,dt.sources.SILENT),this.quill.focus()}},WP={bindings:{bold:yv("bold"),italic:yv("italic"),underline:yv("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",dt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",dt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",dt.sources.USER):e.format.list!=null&&this.quill.format("list",!1,dt.sources.USER)}},"indent code-block":Fx(!0),"outdent code-block":Fx(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,dt.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();let t=new _i.default().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,dt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,dt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,dt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){let t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,dt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){let[e,t]=this.quill.getLine(n.index),i={...e.formats(),list:"checked"},o=new _i.default().retain(n.index).insert(`
`,i).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,dt.sources.USER),this.quill.setSelection(n.index+1,dt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){let[t,i]=this.quill.getLine(n.index),o=new _i.default().retain(n.index).insert(`
`,e.format).retain(t.length()-i-1).retain(1,{header:null});this.quill.updateContents(o,dt.sources.USER),this.quill.setSelection(n.index+1,dt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){let e=this.quill.getModule("table");if(e){let[t,i,o,c]=e.getTable(n),d=ZP(t,i,o,c);if(d==null)return;let m=t.offset();if(d<0){let v=new _i.default().retain(m).insert(`
`);this.quill.updateContents(v,dt.sources.USER),this.quill.setSelection(n.index+1,n.length,dt.sources.SILENT)}else if(d>0){m+=t.length();let v=new _i.default().retain(m).insert(`
`);this.quill.updateContents(v,dt.sources.USER),this.quill.setSelection(m,dt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){let{event:t,line:i}=e,o=i.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(o-1,dt.sources.USER):this.quill.setSelection(o+i.length(),dt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;let{length:t}=e.prefix,[i,o]=this.quill.getLine(n.index);if(o>t)return!0;let c;switch(e.prefix.trim()){case"[]":case"[ ]":c="unchecked";break;case"[x]":c="checked";break;case"-":case"*":c="bullet";break;default:c="ordered"}this.quill.insertText(n.index," ",dt.sources.USER),this.quill.history.cutoff();let d=new _i.default().retain(n.index-o).delete(t+1).retain(i.length()-2-o).retain(1,{list:c});return this.quill.updateContents(d,dt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,dt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){let[e,t]=this.quill.getLine(n.index),i=2,o=e;for(;o!=null&&o.length()<=1&&o.formats()["code-block"];)if(o=o.prev,i-=1,i<=0){let c=new _i.default().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(c,dt.sources.USER),this.quill.setSelection(n.index-1,dt.sources.SILENT),!1}return!0}},"embed left":Df("ArrowLeft",!1),"embed left shift":Df("ArrowLeft",!0),"embed right":Df("ArrowRight",!1),"embed right shift":Df("ArrowRight",!0),"table down":Hx(!1),"table up":Hx(!0)}};zu.DEFAULTS=WP;function Fx(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:i}=t,o=this.quill.scroll.query("code-block"),{TAB:c}=o;if(e.length===0&&!i.shiftKey){this.quill.insertText(e.index,c,dt.sources.USER),this.quill.setSelection(e.index+c.length,dt.sources.SILENT);return}let d=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e),{index:m,length:v}=e;d.forEach((_,T)=>{n?(_.insertAt(0,c),T===0?m+=c.length:v+=c.length):_.domNode.textContent.startsWith(c)&&(_.deleteAt(0,c.length),T===0?m-=c.length:v-=c.length)}),this.quill.update(dt.sources.USER),this.quill.setSelection(m,v,dt.sources.SILENT)}}}s(Fx,"makeCodeBlockHandler");function Df(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(i){let{index:o}=i;n==="ArrowRight"&&(o+=i.length+1);let[c]=this.quill.getLeaf(o);return c instanceof wn?(n==="ArrowLeft"?e?this.quill.setSelection(i.index-1,i.length+1,dt.sources.USER):this.quill.setSelection(i.index-1,dt.sources.USER):e?this.quill.setSelection(i.index,i.length+1,dt.sources.USER):this.quill.setSelection(i.index+i.length+1,dt.sources.USER),!1):!0}}}s(Df,"makeEmbedArrowHandler");function yv(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],dt.sources.USER)}}}s(yv,"makeFormatHandler");function Hx(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){let i=n?"prev":"next",o=t.line,c=o.parent[i];if(c!=null){if(c.statics.blotName==="table-row"){let d=c.children.head,m=o;for(;m.prev!=null;)m=m.prev,d=d.next;let v=d.offset(this.quill.scroll)+Math.min(t.offset,d.length()-1);this.quill.setSelection(v,0,dt.sources.USER)}}else{let d=o.table()[i];d!=null&&(n?this.quill.setSelection(d.offset(this.quill.scroll)+d.length()-1,0,dt.sources.USER):this.quill.setSelection(d.offset(this.quill.scroll),0,dt.sources.USER))}return!1}}}s(Hx,"makeTableArrowHandler");function VP(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=cs(n);else return null;return n.shortKey&&(n[UP]=n.shortKey,delete n.shortKey),n}s(VP,"normalize");function Uu(n){let{quill:e,range:t}=n,i=e.getLines(t),o={};if(i.length>1){let c=i[0].formats(),d=i[i.length-1].formats();o=_i.AttributeMap.diff(d,c)||{}}e.deleteText(t,dt.sources.USER),Object.keys(o).length>0&&e.formatLine(t.index,1,o,dt.sources.USER),e.setSelection(t.index,dt.sources.SILENT)}s(Uu,"deleteRange");function ZP(n,e,t,i){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?i===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}s(ZP,"tableSide");var $P=/font-weight:\s*normal/,KP=["P","OL","UL"],zx=s(n=>n&&KP.includes(n.tagName),"isBlockElement"),YP=s(n=>{Array.from(n.querySelectorAll("br")).filter(e=>zx(e.previousElementSibling)&&zx(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},"normalizeEmptyLines"),GP=s(n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match($P)).forEach(e=>{let t=n.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})},"normalizeFontWeight");function _v(n){n.querySelector('[id^="docs-internal-guid-"]')&&(GP(n),YP(n))}s(_v,"normalize");var XP=/\bmso-list:[^;]*ignore/i,JP=/\bmso-list:[^;]*\bl(\d+)/i,QP=/\bmso-list:[^;]*\blevel(\d+)/i,t2=s((n,e)=>{let t=n.getAttribute("style"),i=t?.match(JP);if(!i)return null;let o=Number(i[1]),c=t?.match(QP),d=c?Number(c[1]):1,m=new RegExp(`@list l${o}:level${d}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),v=e.match(m),_=v&&v[1]==="bullet"?"bullet":"ordered";return{id:o,indent:d,type:_,element:n}},"parseListItem"),e2=s(n=>{let e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],i=[];e.forEach(d=>{(d.getAttribute("style")||"").match(XP)?t.push(d):i.push(d)}),t.forEach(d=>d.parentNode?.removeChild(d));let o=n.documentElement.innerHTML,c=i.map(d=>t2(d,o)).filter(d=>d);for(;c.length;){let d=[],m=c.shift();for(;m;)d.push(m),m=c.length&&c[0]?.element===m.element.nextElementSibling&&c[0].id===m.id?c.shift():null;let v=document.createElement("ul");d.forEach(S=>{let O=document.createElement("li");O.setAttribute("data-list",S.type),S.indent>1&&O.setAttribute("class",`ql-indent-${S.indent-1}`),O.innerHTML=S.element.innerHTML,v.appendChild(O)});let _=d[0]?.element,{parentNode:T}=_??{};_&&T?.replaceChild(v,_),d.slice(1).forEach(S=>{let{element:O}=S;T?.removeChild(O)})}},"normalizeListItem");function wv(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&e2(n)}s(wv,"normalize");var n2=[wv,_v],i2=s(n=>{n.documentElement&&n2.forEach(e=>{e(n)})},"normalizeExternalHTML"),Ux=i2;var r2=mr("quill:clipboard"),s2=[[Node.TEXT_NODE,v2],[Node.TEXT_NODE,Vx],["br",u2],[Node.ELEMENT_NODE,Vx],[Node.ELEMENT_NODE,c2],[Node.ELEMENT_NODE,l2],[Node.ELEMENT_NODE,m2],["li",f2],["ol, ul",p2],["pre",h2],["tr",g2],["b",xv("bold")],["i",xv("italic")],["strike",xv("strike")],["style",d2]],o2=[Rx,Nf].reduce((n,e)=>(n[e.keyName]=e,n),{}),Wx=[Lf,Hu,Fu,Of,Mf,kf].reduce((n,e)=>(n[e.keyName]=e,n),{}),Pf=class extends Rn{static{s(this,"Clipboard")}static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",i=>this.onCaptureCopy(i,!1)),this.quill.root.addEventListener("cut",i=>this.onCaptureCopy(i,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],s2.concat(this.options.matchers??[]).forEach(i=>{let[o,c]=i;this.addMatcher(o,c)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:i}=e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o[qn.blotName])return new ir.default().insert(i||"",{[qn.blotName]:o[qn.blotName]});if(!t)return new ir.default().insert(i||"",o);let c=this.convertHTML(t);return Wu(c,`
`)&&(c.ops[c.ops.length-1].attributes==null||o.table)?c.compose(new ir.default().retain(c.length()-1).delete(1)):c}normalizeHTML(e){Ux(e)}convertHTML(e){let t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);let i=t.body,o=new WeakMap,[c,d]=this.prepareMatching(i,o);return Rf(this.quill.scroll,i,c,d,o)}dangerouslyPasteHTML(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dt.sources.API;if(typeof e=="string"){let o=this.convert({html:e,text:""});this.quill.setContents(o,t),this.quill.setSelection(0,dt.sources.SILENT)}else{let o=this.convert({html:t,text:""});this.quill.updateContents(new ir.default().retain(e).concat(o),i),this.quill.setSelection(e+o.length(),dt.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();let[i]=this.quill.selection.getRange();if(i==null)return;let{html:o,text:c}=this.onCopy(i,t);e.clipboardData?.setData("text/plain",c),e.clipboardData?.setData("text/html",o),t&&Uu({range:i,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();let t=this.quill.getSelection(!0);if(t==null)return;let i=e.clipboardData?.getData("text/html"),o=e.clipboardData?.getData("text/plain");if(!i&&!o){let d=e.clipboardData?.getData("text/uri-list");d&&(o=this.normalizeURIList(d))}let c=Array.from(e.clipboardData?.files||[]);if(!i&&c.length>0){this.quill.uploader.upload(t,c);return}if(i&&c.length>0){let d=new DOMParser().parseFromString(i,"text/html");if(d.body.childElementCount===1&&d.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,c);return}}this.onPaste(t,{html:i,text:o})}onCopy(e){let t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:i,html:o}=t,c=this.quill.getFormat(e.index),d=this.convert({text:i,html:o},c);r2.log("onPaste",d,{text:i,html:o});let m=new ir.default().retain(e.index).delete(e.length).concat(d);this.quill.updateContents(m,dt.sources.USER),this.quill.setSelection(m.length()-e.length,dt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){let i=[],o=[];return this.matchers.forEach(c=>{let[d,m]=c;switch(d){case Node.TEXT_NODE:o.push(m);break;case Node.ELEMENT_NODE:i.push(m);break;default:Array.from(e.querySelectorAll(d)).forEach(v=>{t.has(v)?t.get(v)?.push(m):t.set(v,[m])});break}}),[i,o]}};function Na(n,e,t,i){return i.query(e)?n.reduce((o,c)=>{if(!c.insert)return o;if(c.attributes&&c.attributes[e])return o.push(c);let d=t?{[e]:t}:{};return o.insert(c.insert,{...d,...c.attributes})},new ir.default):n}s(Na,"applyFormat");function Wu(n,e){let t="";for(let i=n.ops.length-1;i>=0&&t.length<e.length;--i){let o=n.ops[i];if(typeof o.insert!="string")break;t=o.insert+t}return t.slice(-1*e.length)===e}s(Wu,"deltaEndsWith");function ko(n,e){if(!(n instanceof Element))return!1;let t=e.query(n);return t&&t.prototype instanceof wn?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}s(ko,"isLine");function a2(n,e){return n.previousElementSibling&&n.nextElementSibling&&!ko(n.previousElementSibling,e)&&!ko(n.nextElementSibling,e)}s(a2,"isBetweenInlineElements");var If=new WeakMap;function Zx(n){return n==null?!1:(If.has(n)||(n.tagName==="PRE"?If.set(n,!0):If.set(n,Zx(n.parentNode))),If.get(n))}s(Zx,"isPre");function Rf(n,e,t,i,o){return e.nodeType===e.TEXT_NODE?i.reduce((c,d)=>d(e,c,n),new ir.default):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((c,d)=>{let m=Rf(n,d,t,i,o);return d.nodeType===e.ELEMENT_NODE&&(m=t.reduce((v,_)=>_(d,v,n),m),m=(o.get(d)||[]).reduce((v,_)=>_(d,v,n),m)),c.concat(m)},new ir.default):new ir.default}s(Rf,"traverse");function xv(n){return(e,t,i)=>Na(t,n,!0,i)}s(xv,"createMatchAlias");function l2(n,e,t){let i=Oi.keys(n),o=In.keys(n),c=er.keys(n),d={};return i.concat(o).concat(c).forEach(m=>{let v=t.query(m,kt.ATTRIBUTE);v!=null&&(d[v.attrName]=v.value(n),d[v.attrName])||(v=o2[m],v!=null&&(v.attrName===m||v.keyName===m)&&(d[v.attrName]=v.value(n)||void 0),v=Wx[m],v!=null&&(v.attrName===m||v.keyName===m)&&(v=Wx[m],d[v.attrName]=v.value(n)||void 0))}),Object.entries(d).reduce((m,v)=>{let[_,T]=v;return Na(m,_,T,t)},e)}s(l2,"matchAttributor");function c2(n,e,t){let i=t.query(n);if(i==null)return e;if(i.prototype instanceof wn){let o={},c=i.value(n);if(c!=null)return o[i.blotName]=c,new ir.default().insert(o,i.formats(n,t))}else if(i.prototype instanceof ya&&!Wu(e,`
`)&&e.insert(`
`),"blotName"in i&&"formats"in i&&typeof i.formats=="function")return Na(e,i.blotName,i.formats(n,t),t);return e}s(c2,"matchBlot");function u2(n,e){return Wu(e,`
`)||e.insert(`
`),e}s(u2,"matchBreak");function h2(n,e,t){let i=t.query("code-block"),o=i&&"formats"in i&&typeof i.formats=="function"?i.formats(n,t):!0;return Na(e,"code-block",o,t)}s(h2,"matchCodeBlock");function d2(){return new ir.default}s(d2,"matchIgnore");function f2(n,e,t){let i=t.query(n);if(i==null||i.blotName!=="list"||!Wu(e,`
`))return e;let o=-1,c=n.parentNode;for(;c!=null;)["OL","UL"].includes(c.tagName)&&(o+=1),c=c.parentNode;return o<=0?e:e.reduce((d,m)=>m.insert?m.attributes&&typeof m.attributes.indent=="number"?d.push(m):d.insert(m.insert,{indent:o,...m.attributes||{}}):d,new ir.default)}s(f2,"matchIndent");function p2(n,e,t){let i=n,o=i.tagName==="OL"?"ordered":"bullet",c=i.getAttribute("data-checked");return c&&(o=c==="true"?"checked":"unchecked"),Na(e,"list",o,t)}s(p2,"matchList");function Vx(n,e,t){if(!Wu(e,`
`)){if(ko(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let i=n.nextSibling;for(;i!=null;){if(ko(i,t))return e.insert(`
`);let o=t.query(i);if(o&&o.prototype instanceof Un)return e.insert(`
`);i=i.firstChild}}}return e}s(Vx,"matchNewline");function m2(n,e,t){let i={},o=n.style||{};return o.fontStyle==="italic"&&(i.italic=!0),o.textDecoration==="underline"&&(i.underline=!0),o.textDecoration==="line-through"&&(i.strike=!0),(o.fontWeight?.startsWith("bold")||parseInt(o.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce((c,d)=>{let[m,v]=d;return Na(c,m,v,t)},e),parseFloat(o.textIndent||0)>0?new ir.default().insert("	").concat(e):e}s(m2,"matchStyles");function g2(n,e,t){let i=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(i!=null){let c=Array.from(i.querySelectorAll("tr")).indexOf(n)+1;return Na(e,"table",c,t)}return e}s(g2,"matchTable");function v2(n,e,t){let i=n.data;if(n.parentElement?.tagName==="O:P")return e.insert(i.trim());if(!Zx(n)){if(i.trim().length===0&&i.includes(`
`)&&!a2(n,t))return e;let o=s((c,d)=>{let m=d.replace(/[^\u00a0]/g,"");return m.length<1&&c?" ":m},"replacer");i=i.replace(/\r\n/g," ").replace(/\n/g," "),i=i.replace(/\s\s+/g,o.bind(o,!0)),(n.previousSibling==null&&n.parentElement!=null&&ko(n.parentElement,t)||n.previousSibling instanceof Element&&ko(n.previousSibling,t))&&(i=i.replace(/^\s+/,o.bind(o,!1))),(n.nextSibling==null&&n.parentElement!=null&&ko(n.parentElement,t)||n.nextSibling instanceof Element&&ko(n.nextSibling,t))&&(i=i.replace(/\s+$/,o.bind(o,!1)))}return e.insert(i)}s(v2,"matchText");var qf=class extends Rn{static{s(this,"History")}static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(dt.events.EDITOR_CHANGE,(i,o,c,d)=>{i===dt.events.SELECTION_CHANGE?o&&d!==dt.sources.SILENT&&(this.currentRange=o):i===dt.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||d===dt.sources.USER?this.record(o,c):this.transform(o)),this.currentRange=Ev(this.currentRange,o))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;let i=this.stack[e].pop();if(!i)return;let o=this.quill.getContents(),c=i.delta.invert(o);this.stack[t].push({delta:c,range:Ev(i.range,c)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,dt.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let i=e.invert(t),o=this.currentRange,c=Date.now();if(this.lastRecorded+this.options.delay>c&&this.stack.undo.length>0){let d=this.stack.undo.pop();d&&(i=i.compose(d.delta),o=d.range)}else this.lastRecorded=c;i.length()!==0&&(this.stack.undo.push({delta:i,range:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){$x(this.stack.undo,e),$x(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,dt.sources.USER);else{let t=y2(this.quill.scroll,e.delta);this.quill.setSelection(t,dt.sources.USER)}}};function $x(n,e){let t=e;for(let i=n.length-1;i>=0;i-=1){let o=n[i];n[i]={delta:t.transform(o.delta,!0),range:o.range&&Ev(o.range,t)},t=o.delta.transform(t),n[i].delta.length()===0&&n.splice(i,1)}}s($x,"transformStack");function b2(n,e){let t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(i=>n.query(i,kt.BLOCK)!=null):!1}s(b2,"endsWithNewlineChange");function y2(n,e){let t=e.reduce((o,c)=>o+(c.delete||0),0),i=e.length()-t;return b2(n,e)&&(i-=1),i}s(y2,"getLastChangeIndex");function Ev(n,e){if(!n)return n;let t=e.transformPosition(n.index),i=e.transformPosition(n.index+n.length);return{index:t,length:i-t}}s(Ev,"transformRange");var Kx=Jn(pr(),1);var Bf=class extends Rn{static{s(this,"Uploader")}constructor(e,t){super(e,t),e.root.addEventListener("drop",i=>{i.preventDefault();let o=null;if(document.caretRangeFromPoint)o=document.caretRangeFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint){let d=document.caretPositionFromPoint(i.clientX,i.clientY);o=document.createRange(),o.setStart(d.offsetNode,d.offset),o.setEnd(d.offsetNode,d.offset)}let c=o&&e.selection.normalizeNative(o);if(c){let d=e.selection.normalizedToRange(c);i.dataTransfer?.files&&this.upload(d,i.dataTransfer.files)}})}upload(e,t){let i=[];Array.from(t).forEach(o=>{o&&this.options.mimetypes?.includes(o.type)&&i.push(o)}),i.length>0&&this.options.handler.call(this,e,i)}};Bf.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){let t=e.map(i=>new Promise(o=>{let c=new FileReader;c.onload=d=>{o(d.target.result)},c.readAsDataURL(i)}));Promise.all(t).then(i=>{let o=i.reduce((c,d)=>c.insert({image:d}),new Kx.default().retain(n.index).delete(n.length));this.quill.updateContents(o,Ht.sources.USER),this.quill.setSelection(n.index+i.length,Ht.sources.SILENT)})}};var Yx=Bf;var jf=Jn(pr(),1);var Gx=Jn(pr(),1);var _2=["insertText","insertReplacementText"],Tv=class extends Rn{static{s(this,"Input")}constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||e.on(dt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Uu({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){let i=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Gx.default().retain(e.index).insert(t,i),dt.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,dt.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!_2.includes(e.inputType))return;let t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;let i=w2(e);if(i==null)return;let o=this.quill.selection.normalizeNative(t),c=o?this.quill.selection.normalizedToRange(o):null;c&&this.replaceText(c,i)&&e.preventDefault()}handleCompositionStart(){let e=this.quill.getSelection();e&&this.replaceText(e)}};function w2(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}s(w2,"getPlainTextFromInputEvent");var Xx=Tv;var x2=/Mac/i.test(navigator.platform),E2=100,T2=s(n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||x2&&n.key==="a"&&n.ctrlKey===!0),"canMoveCaretBeforeUINode"),Sv=class extends Rn{static{s(this,"UINode")}isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:i,event:o}=t;if(!(i instanceof tr)||!i.uiNode)return!0;let c=getComputedStyle(i.domNode).direction==="rtl";return c&&o.key!=="ArrowRight"||!c&&o.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(o.shiftKey?1:0),dt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&T2(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+E2,this.isListening)return;this.isListening=!0;let e=s(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},"listener");document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){let e=document.getSelection();if(!e)return;let t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;let i=this.quill.scroll.find(t.startContainer);if(!(i instanceof tr)||!i.uiNode)return;let o=document.createRange();o.setStartAfter(i.uiNode),o.setEndAfter(i.uiNode),e.removeAllRanges(),e.addRange(o)}},Jx=Sv;dt.register({"blots/block":sn,"blots/block/embed":Un,"blots/break":vi,"blots/container":Or,"blots/cursor":Oo,"blots/embed":zl,"blots/inline":bi,"blots/scroll":Px,"blots/text":Cn,"modules/clipboard":Pf,"modules/history":qf,"modules/keyboard":zu,"modules/uploader":Yx,"modules/input":Xx,"modules/uiNode":Jx});var Ff=dt;var Av=class extends In{static{s(this,"IndentAttributor")}add(e,t){let i=0;if(t==="+1"||t==="-1"){let o=this.value(e)||0;i=t==="+1"?o+1:o-1}else typeof t=="number"&&(i=t);return i===0?(this.remove(e),!0):super.add(e,i.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}},S2=new Av("indent","ql-indent",{scope:kt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),Qx=S2;var Cv=class extends sn{static{s(this,"Blockquote")}static blotName="blockquote";static tagName="blockquote"},tE=Cv;var Lv=class extends sn{static{s(this,"Header")}static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}},eE=Lv;var Oa=class extends Or{static{s(this,"ListContainer")}};Oa.blotName="list-container";Oa.tagName="OL";var Do=class extends sn{static{s(this,"ListItem")}static create(e){let t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){dt.register(Oa)}constructor(e,t){super(e,t);let i=t.ownerDocument.createElement("span"),o=s(c=>{if(!e.isEnabled())return;let d=this.statics.formats(t,e);d==="checked"?(this.format("list","unchecked"),c.preventDefault()):d==="unchecked"&&(this.format("list","checked"),c.preventDefault())},"listEventHandler");i.addEventListener("mousedown",o),i.addEventListener("touchstart",o),this.attachUI(i)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}};Do.blotName="list";Do.tagName="LI";Oa.allowedChildren=[Do];Do.requiredContainer=Oa;var Nv=class extends bi{static{s(this,"Bold")}static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},Zl=Nv;var Ov=class extends Zl{static{s(this,"Italic")}static blotName="italic";static tagName=["EM","I"]},nE=Ov;var zs=class extends bi{static{s(this,"Link")}static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){let t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return Mv(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}};function Mv(n,e){let t=document.createElement("a");t.href=n;let i=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(i)>-1}s(Mv,"sanitize");var kv=class extends bi{static{s(this,"Script")}static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}},iE=kv;var Dv=class extends Zl{static{s(this,"Strike")}static blotName="strike";static tagName=["S","STRIKE"]},rE=Dv;var Iv=class extends bi{static{s(this,"Underline")}static blotName="underline";static tagName="U"},sE=Iv;var Pv=class extends zl{static{s(this,"Formula")}static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){let{formula:e}=this.value();return`<span>${e}</span>`}},oE=Pv;var aE=["alt","height","width"],Rv=class extends wn{static{s(this,"Image")}static blotName="image";static tagName="IMG";static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return aE.reduce((t,i)=>(e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return Mv(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){aE.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}},lE=Rv;var cE=["height","width"],qv=class extends Un{static{s(this,"Video")}static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){let t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return cE.reduce((t,i)=>(e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t),{})}static sanitize(e){return zs.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){cE.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){let{video:e}=this.value();return`<a href="${e}">${e}</a>`}},uE=qv;var Hf=Jn(pr(),1);var Vu=new In("code-token","hljs",{scope:kt.INLINE}),Us=class n extends bi{static{s(this,"CodeToken")}static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(qn.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,i){super(e,t,i),Vu.add(this.domNode,i)}format(e,t){e!==n.blotName?super.format(e,t):t?Vu.add(this.domNode,t):(Vu.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Vu.value(this.domNode)||this.unwrap()}};Us.blotName="code-token";Us.className="ql-token";var rr=class extends qn{static{s(this,"SyntaxCodeBlock")}static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Us.blotName,!1),super.replaceWith(e,t)}},Ma=class extends hs{static{s(this,"SyntaxCodeBlockContainer")}attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===rr.blotName&&(this.forceNext=!0,this.children.forEach(i=>{i.format(e,t)}))}formatAt(e,t,i,o){i===rr.blotName&&(this.forceNext=!0),super.formatAt(e,t,i,o)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let o=`${Array.from(this.domNode.childNodes).filter(d=>d!==this.uiNode).map(d=>d.textContent).join(`
`)}
`,c=rr.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==o){if(o.trim().length>0||this.cachedText==null){let d=this.children.reduce((v,_)=>v.concat(Wg(_,!1)),new Hf.default),m=e(o,c);d.diff(m).reduce((v,_)=>{let{retain:T,attributes:S}=_;return T?(S&&Object.keys(S).forEach(O=>{[rr.blotName,Us.blotName].includes(O)&&this.formatAt(v,T,O,S[O])}),v+T):v},0)}this.cachedText=o,this.forceNext=!1}}html(e,t){let[i]=this.children.find(e);return`<pre data-language="${i?rr.formats(i.domNode):"plain"}">
${La(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let t=rr.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}};Ma.allowedChildren=[rr];rr.requiredContainer=Ma;rr.allowedChildren=[Us,Oo,Cn,vi];var A2=s((n,e,t)=>{if(typeof n.versionString=="string"){let i=n.versionString.split(".")[0];if(parseInt(i,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value},"highlight"),Zu=class extends Rn{static{s(this,"Syntax")}static register(){dt.register(Us,!0),dt.register(rr,!0),dt.register(Ma,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,o)=>{let{key:c}=o;return i[c]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(dt.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Ma))return;let t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:o,label:c}=i,d=t.ownerDocument.createElement("option");d.textContent=c,d.setAttribute("value",o),t.appendChild(d)}),t.addEventListener("change",()=>{e.format(rr.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=rr.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(dt.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(dt.sources.USER);let i=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Ma):[e]).forEach(c=>{c.highlight(this.highlightBlot,t)}),this.quill.update(dt.sources.SILENT),i!=null&&this.quill.setSelection(i,dt.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return La(e).split(`
`).reduce((o,c,d)=>(d!==0&&o.insert(`
`,{[qn.blotName]:t}),o.insert(c)),new Hf.default);let i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(qn.className),i.innerHTML=A2(this.options.hljs,t,e),Rf(this.quill.scroll,i,[(o,c)=>{let d=Vu.value(o);return d?c.compose(new Hf.default().retain(c.length(),{[Us.blotName]:d})):c}],[(o,c)=>o.data.split(`
`).reduce((d,m,v)=>(v!==0&&d.insert(`
`,{[qn.blotName]:t}),d.insert(m)),c)],new WeakMap)}};Zu.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var hE=Jn(pr(),1);var kr=class n extends sn{static{s(this,"TableCell")}static blotName="table";static tagName="TD";static create(e){let t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",zf()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===n.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},ds=class extends Or{static{s(this,"TableRow")}static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let e=this.children.head.formats(),t=this.children.tail.formats(),i=this.next.children.head.formats(),o=this.next.children.tail.formats();return e.table===t.table&&e.table===i.table&&e.table===o.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;let i=t.formats(),o=t.next.formats();if(i.table!==o.table){let c=this.splitAfter(t);c&&c.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}},Gr=class extends Or{static{s(this,"TableBody")}static blotName="table-body";static tagName="TBODY"},ka=class extends Or{static{s(this,"TableContainer")}static blotName="table-container";static tagName="TABLE";balanceCells(){let e=this.descendants(ds),t=e.reduce((i,o)=>Math.max(o.children.length,i),0);e.forEach(i=>{new Array(t-i.children.length).fill(0).forEach(()=>{let o;i.children.head!=null&&(o=kr.formats(i.children.head.domNode));let c=this.scroll.create(kr.blotName,o);i.appendChild(c),c.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){let[t]=this.descendant(Gr);t==null||t.children.head==null||t.children.forEach(i=>{let o=i.children.at(e);o?.remove()})}insertColumn(e){let[t]=this.descendant(Gr);t==null||t.children.head==null||t.children.forEach(i=>{let o=i.children.at(e),c=kr.formats(i.children.head.domNode),d=this.scroll.create(kr.blotName,c);i.insertBefore(d,o)})}insertRow(e){let[t]=this.descendant(Gr);if(t==null||t.children.head==null)return;let i=zf(),o=this.scroll.create(ds.blotName);t.children.head.children.forEach(()=>{let d=this.scroll.create(kr.blotName,i);o.appendChild(d)});let c=t.children.at(e);t.insertBefore(o,c)}rows(){let e=this.children.head;return e==null?[]:e.children.map(t=>t)}};ka.allowedChildren=[Gr];Gr.requiredContainer=ka;Gr.allowedChildren=[ds];ds.requiredContainer=Gr;ds.allowedChildren=[kr];kr.requiredContainer=ds;function zf(){return`row-${Math.random().toString(36).slice(2,6)}`}s(zf,"tableId");var Bv=class extends Rn{static{s(this,"Table")}static register(){dt.register(kr),dt.register(ds),dt.register(Gr),dt.register(ka)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ka).forEach(e=>{e.balanceCells()})}deleteColumn(){let[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(dt.sources.USER))}deleteRow(){let[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(dt.sources.USER))}deleteTable(){let[e]=this.getTable();if(e==null)return;let t=e.offset();e.remove(),this.quill.update(dt.sources.USER),this.quill.setSelection(t,dt.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];let[t,i]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==kr.blotName)return[null,null,null,-1];let o=t.parent;return[o.parent.parent,o,t,i]}insertColumn(e){let t=this.quill.getSelection();if(!t)return;let[i,o,c]=this.getTable(t);if(c==null)return;let d=c.cellOffset();i.insertColumn(d+e),this.quill.update(dt.sources.USER);let m=o.rowOffset();e===0&&(m+=1),this.quill.setSelection(t.index+m,t.length,dt.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection();if(!t)return;let[i,o,c]=this.getTable(t);if(c==null)return;let d=o.rowOffset();i.insertRow(d+e),this.quill.update(dt.sources.USER),e>0?this.quill.setSelection(t,dt.sources.SILENT):this.quill.setSelection(t.index+o.children.length,t.length,dt.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){let i=this.quill.getSelection();if(i==null)return;let o=new Array(e).fill(0).reduce(c=>{let d=new Array(t).fill(`
`).join("");return c.insert(d,{table:zf()})},new hE.default().retain(i.index));this.quill.updateContents(o,dt.sources.USER),this.quill.setSelection(i.index,dt.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(dt.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(dt.events.TEXT_CHANGE,(i,o,c)=>{c===dt.sources.USER&&this.balanceTables()}),!0):!1)})}},dE=Bv;var mE=Jn(pr(),1);var fE=mr("quill:toolbar"),$l=class extends Rn{static{s(this,"Toolbar")}constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){let i=document.createElement("div");i.setAttribute("role","toolbar"),C2(i,this.options.container),e.container?.parentNode?.insertBefore(i,e.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){fE.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{let o=this.options.handlers?.[i];o&&this.addHandler(i,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(dt.events.EDITOR_CHANGE,()=>{let[i]=this.quill.selection.getRange();this.update(i)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(o=>o.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){fE.warn("ignoring attaching to nonexistent format",t,e);return}let i=e.tagName==="SELECT"?"change":"click";e.addEventListener(i,o=>{let c;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;let m=e.options[e.selectedIndex];m.hasAttribute("selected")?c=!1:c=m.value||!1}else e.classList.contains("ql-active")?c=!1:c=e.value||!e.hasAttribute("value"),o.preventDefault();this.quill.focus();let[d]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,c);else if(this.quill.scroll.query(t).prototype instanceof wn){if(c=prompt(`Enter ${t}`),!c)return;this.quill.updateContents(new mE.default().retain(d.index).delete(d.length).insert({[t]:c}),dt.sources.USER)}else this.quill.format(t,c,dt.sources.USER);this.update(d)}),this.controls.push([t,e])}update(e){let t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(i=>{let[o,c]=i;if(c.tagName==="SELECT"){let d=null;if(e==null)d=null;else if(t[o]==null)d=c.querySelector("option[selected]");else if(!Array.isArray(t[o])){let m=t[o];typeof m=="string"&&(m=m.replace(/"/g,'\\"')),d=c.querySelector(`option[value="${m}"]`)}d==null?(c.value="",c.selectedIndex=-1):d.selected=!0}else if(e==null)c.classList.remove("ql-active"),c.setAttribute("aria-pressed","false");else if(c.hasAttribute("value")){let d=t[o],m=d===c.getAttribute("value")||d!=null&&d.toString()===c.getAttribute("value")||d==null&&!c.getAttribute("value");c.classList.toggle("ql-active",m),c.setAttribute("aria-pressed",m.toString())}else{let d=t[o]!=null;c.classList.toggle("ql-active",d),c.setAttribute("aria-pressed",d.toString())}})}};$l.DEFAULTS={};function pE(n,e,t){let i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${e}`),i.setAttribute("aria-pressed","false"),t!=null?(i.value=t,i.setAttribute("aria-label",`${e}: ${t}`)):i.setAttribute("aria-label",e),n.appendChild(i)}s(pE,"addButton");function C2(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{let i=document.createElement("span");i.classList.add("ql-formats"),t.forEach(o=>{if(typeof o=="string")pE(i,o);else{let c=Object.keys(o)[0],d=o[c];Array.isArray(d)?L2(i,c,d):pE(i,c,d)}}),n.appendChild(i)})}s(C2,"addControls");function L2(n,e,t){let i=document.createElement("select");i.classList.add(`ql-${e}`),t.forEach(o=>{let c=document.createElement("option");o!==!1?c.setAttribute("value",String(o)):c.setAttribute("selected","selected"),i.appendChild(c)}),n.appendChild(i)}s(L2,"addSelect");$l.DEFAULTS={container:null,handlers:{clean(){let n=this.quill.getSelection();if(n!=null)if(n.length===0){let e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,kt.INLINE)!=null&&this.quill.format(t,!1,dt.sources.USER)})}else this.quill.removeFormat(n,dt.sources.USER)},direction(n){let{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",dt.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,dt.sources.USER),this.quill.format("direction",n,dt.sources.USER)},indent(n){let e=this.quill.getSelection(),t=this.quill.getFormat(e),i=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let o=n==="+1"?1:-1;t.direction==="rtl"&&(o*=-1),this.quill.format("indent",i+o,dt.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,dt.sources.USER)},list(n){let e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,dt.sources.USER):this.quill.format("list","unchecked",dt.sources.USER):this.quill.format("list",n,dt.sources.USER)}}};var N2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',O2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',M2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',k2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',D2='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',I2='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',P2='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',R2='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',gE='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',q2='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',B2='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',j2='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',F2='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',H2='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',z2='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',U2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',W2='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',V2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Z2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',$2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',K2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Y2='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',G2='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',X2='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',J2='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Q2='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',tR='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',eR='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',nR='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Io={align:{"":N2,center:O2,right:M2,justify:k2},background:D2,blockquote:I2,bold:P2,clean:R2,code:gE,"code-block":gE,color:q2,direction:{"":B2,rtl:j2},formula:F2,header:{1:H2,2:z2},italic:U2,image:W2,indent:{"+1":V2,"-1":Z2},link:$2,list:{bullet:K2,check:Y2,ordered:G2},script:{sub:X2,super:J2},strike:Q2,table:tR,underline:eR,video:nR};var iR='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',vE=0;function bE(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}s(bE,"toggleAriaAttribute");var jv=class{static{s(this,"Picker")}constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),bE(this.label,"aria-expanded"),bE(this.options,"aria-hidden")}buildItem(e){let t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");let i=e.getAttribute("value");return i&&t.setAttribute("data-value",i),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",o=>{switch(o.key){case"Enter":this.selectItem(t,!0),o.preventDefault();break;case"Escape":this.escape(),o.preventDefault();break;default:}}),t}buildLabel(){let e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=iR,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){let e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${vE}`,vE+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{let i=this.buildItem(t);e.appendChild(i),t.selected===!0&&this.selectItem(i)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.container.querySelector(".ql-selected");e!==i&&(i?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){let i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);let t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}},Po=jv;var Fv=class extends Po{static{s(this,"ColorPicker")}constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(e){let t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);let i=this.label.querySelector(".ql-color-label"),o=e&&e.getAttribute("data-value")||"";i&&(i.tagName==="line"?i.style.stroke=o:i.style.fill=o)}},Uf=Fv;var Hv=class extends Po{static{s(this,"IconPicker")}constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=t[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);let i=e||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}},Wf=Hv;var rR=s(n=>{let{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"},"isScrollable"),zv=class{static{s(this,"Tooltip")}constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,rR(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){let t=e.left+e.width/2-this.root.offsetWidth/2,i=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");let o=this.boundsContainer.getBoundingClientRect(),c=this.root.getBoundingClientRect(),d=0;if(c.right>o.right&&(d=o.right-c.right,this.root.style.left=`${t+d}px`),c.left<o.left&&(d=o.left-c.left,this.root.style.left=`${t+d}px`),c.bottom>o.bottom){let m=c.bottom-c.top,v=e.bottom-e.top+m;this.root.style.top=`${i-v}px`,this.root.classList.add("ql-flip")}return d}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},Vf=zv;var sR=[!1,"center","right","justify"],oR=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],aR=[!1,"serif","monospace"],lR=["1","2","3",!1],cR=["small",!1,"large","huge"],Ws=class extends Ul{static{s(this,"BaseTheme")}constructor(e,t){super(e,t);let i=s(o=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",i);return}this.tooltip!=null&&!this.tooltip.root.contains(o.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(c=>{c.container.contains(o.target)||c.close()})},"listener");e.emitter.listenDOM("click",document.body,i)}addModule(e){let t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(c=>{if(c.startsWith("ql-")&&(c=c.slice(3),t[c]!=null))if(c==="direction")i.innerHTML=t[c][""]+t[c].rtl;else if(typeof t[c]=="string")i.innerHTML=t[c];else{let d=i.value||"";d!=null&&t[c][d]&&(i.innerHTML=t[c][d])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(o=>{if(o.classList.contains("ql-align")&&(o.querySelector("option")==null&&$u(o,sR),typeof t.align=="object"))return new Wf(o,t.align);if(o.classList.contains("ql-background")||o.classList.contains("ql-color")){let c=o.classList.contains("ql-background")?"background":"color";return o.querySelector("option")==null&&$u(o,oR,c==="background"?"#ffffff":"#000000"),new Uf(o,t[c])}return o.querySelector("option")==null&&(o.classList.contains("ql-font")?$u(o,aR):o.classList.contains("ql-header")?$u(o,lR):o.classList.contains("ql-size")&&$u(o,cR)),new Po(o)});let i=s(()=>{this.pickers.forEach(o=>{o.update()})},"update");this.quill.on(Ht.events.EDITOR_CHANGE,i)}};Ws.DEFAULTS=Qi({},Ul.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{let e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var Kl=class extends Vf{static{s(this,"BaseTooltip")}constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let i=this.quill.getBounds(this.quill.selection.savedRange);i!=null&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ht.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ht.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=uR(e);case"formula":{if(!e)break;let t=this.quill.getSelection(!0);if(t!=null){let i=t.index+t.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),e,Ht.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(i+1," ",Ht.sources.USER),this.quill.setSelection(i+2,Ht.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function uR(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}s(uR,"extractVideoUrl");function $u(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(i=>{let o=document.createElement("option");i===t?o.setAttribute("selected","selected"):o.setAttribute("value",String(i)),n.appendChild(o)})}s($u,"fillSelect");var hR=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Uv=class extends Kl{static{s(this,"BubbleTooltip")}static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(Ht.events.EDITOR_CHANGE,(i,o,c,d)=>{if(i===Ht.events.SELECTION_CHANGE)if(o!=null&&o.length>0&&d===Ht.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let m=this.quill.getLines(o.index,o.length);if(m.length===1){let v=this.quill.getBounds(o);v!=null&&this.position(v)}else{let v=m[m.length-1],_=this.quill.getIndex(v),T=Math.min(v.length()-1,o.index+o.length-_),S=this.quill.getBounds(new Di(_,T));S!=null&&this.position(S)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ht.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let e=this.quill.getSelection();if(e!=null){let t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){let t=super.position(e),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",t!==0&&(i.style.marginLeft=`${-1*t-i.offsetWidth/2}px`),t}},Ku=class extends Ws{static{s(this,"BubbleTheme")}constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=hR),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Uv(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Io),this.buildPickers(e.container.querySelectorAll("select"),Io))}};Ku.DEFAULTS=Qi({},Ws.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var dR=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Wv=class extends Kl{static{s(this,"SnowTooltip")}static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){let t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ht.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ht.events.SELECTION_CHANGE,(e,t,i)=>{if(e!=null){if(e.length===0&&i===Ht.sources.USER){let[o,c]=this.quill.scroll.descendant(zs,e.index);if(o!=null){this.linkRange=new Di(e.index-c,o.length());let d=zs.formats(o.domNode);this.preview.textContent=d,this.preview.setAttribute("href",d),this.show();let m=this.quill.getBounds(this.linkRange);m!=null&&this.position(m);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}},Zf=class extends Ws{static{s(this,"SnowTheme")}constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=dR),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Io),this.buildPickers(e.container.querySelectorAll("select"),Io),this.tooltip=new Wv(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,i)=>{e.handlers.link.call(e,!i.format.link)}))}};Zf.DEFAULTS=Qi({},Ws.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){let e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);let{tooltip:i}=this.quill.theme;i.edit("link",t)}else this.quill.format("link",!1)}}}}});var yE=Zf;Ff.register({"attributors/attribute/direction":Nf,"attributors/class/align":fv,"attributors/class/background":Bx,"attributors/class/color":qx,"attributors/class/direction":mv,"attributors/class/font":vv,"attributors/class/size":bv,"attributors/style/align":Lf,"attributors/style/background":Hu,"attributors/style/color":Fu,"attributors/style/direction":Of,"attributors/style/font":Mf,"attributors/style/size":kf},!0);Ff.register({"formats/align":fv,"formats/direction":mv,"formats/indent":Qx,"formats/background":Hu,"formats/color":Fu,"formats/font":vv,"formats/size":bv,"formats/blockquote":tE,"formats/code-block":qn,"formats/header":eE,"formats/list":Do,"formats/bold":Zl,"formats/code":Vl,"formats/italic":nE,"formats/link":zs,"formats/script":iE,"formats/strike":rE,"formats/underline":sE,"formats/formula":oE,"formats/image":lE,"formats/video":uE,"modules/syntax":Zu,"modules/table":dE,"modules/toolbar":$l,"themes/bubble":Ku,"themes/snow":yE,"ui/icons":Io,"ui/picker":Po,"ui/icon-picker":Wf,"ui/color-picker":Uf,"ui/tooltip":Vf},!0);var Vv=Ff;var xE=Jn(wE());Vv.register("modules/htmlEditButton",xE.default);var Yu=class extends Ge{static{s(this,"RichTextEditorController")}static targets=["field"];connect(){let e=this.fieldTarget;this.quill=new Vv(this.querySelector(".quill"),{theme:"snow",modules:{htmlEditButton:{}}}),this.quill.on("text-change",(t,i,o)=>{this.fieldTarget.value=this.quill.root.innerHTML})}disconnect(){delete this.quill}};var Gu=class extends Ge{static{s(this,"SelectAllController")}static targets=["resource"];change(e){let t=new Event("change");this.resourceTargets.forEach(i=>i.checked=e.target.checked),this.resourceTargets[0].dispatchEvent(t)}};var Xu=class extends Ge{static{s(this,"SlugonatorController")}static targets=["slug"];onChange(e){this.slugTarget.value=this.slugonate(e.target.value)}slugonate(e){return e.toLowerCase().normalize("NFD").replaceAll(/[\u0300-\u036f]/g,"").replaceAll(/[.,!@#$%^&*()]/g,"").replaceAll(" ","-")}};var EE="&#8203;";function Kv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}s(Kv,"e");function TE(n){return function(e){if(Array.isArray(e))return Kv(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return Kv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Kv(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(TE,"i");var Bo={isEnabled:function(){var n;return(n=window.TAGIFY_DEBUG)===null||n===void 0||n},log:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i;this.isEnabled()&&(i=console).log.apply(i,["[Tagify]:"].concat(TE(e)))},warn:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i;this.isEnabled()&&(i=console).warn.apply(i,["[Tagify]:"].concat(TE(e)))}},Qu=s(function(n,e,t,i){return n=""+n,e=""+e,i&&(n=n.trim(),e=e.trim()),t?n==e:n.toLowerCase()==e.toLowerCase()},"s"),SE=s(function(n,e){return n&&Array.isArray(n)&&n.map(function(t){return nb(t,e)})},"a");function nb(n,e){var t,i={};for(t in n)e.indexOf(t)<0&&(i[t]=n[t]);return i}s(nb,"o");function AE(n){var e=document.createElement("div");return n.replace(/\&#?[0-9a-z]+;/gi,function(t){return e.innerHTML=t,e.innerText})}s(AE,"r");function Yv(n){return new DOMParser().parseFromString(n.trim(),"text/html").body.firstElementChild}s(Yv,"l");function CE(n,e){for(e=e||"previous";n=n[e+"Sibling"];)if(n.nodeType==3)return n}s(CE,"d");function Ia(n){return typeof n=="string"?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):n}s(Ia,"c");function fs(n){var e=Object.prototype.toString.call(n).split(" ")[1].slice(0,-1);return n===Object(n)&&e!="Array"&&e!="Function"&&e!="RegExp"&&e!="HTMLUnknownElement"}s(fs,"u");function Wn(n,e,t){var i,o;function c(d,m){for(var v in m)if(m.hasOwnProperty(v)){if(fs(m[v])){fs(d[v])?c(d[v],m[v]):d[v]=Object.assign({},m[v]);continue}if(Array.isArray(m[v])){d[v]=Object.assign([],m[v]);continue}d[v]=m[v]}}return s(c,"a"),i=n,((o=Object)!=null&&typeof Symbol<"u"&&o[Symbol.hasInstance]?o[Symbol.hasInstance](i):i instanceof o)||(n={}),c(n,e),t&&c(n,t),n}s(Wn,"g");function LE(){var n=[],e={},t=!0,i=!1,o=void 0;try{for(var c,d=arguments[Symbol.iterator]();!(t=(c=d.next()).done);t=!0){var m=c.value,v=!0,_=!1,T=void 0;try{for(var S,O=m[Symbol.iterator]();!(v=(S=O.next()).done);v=!0){var M=S.value;fs(M)?e[M.value]||(n.push(M),e[M.value]=1):n.includes(M)||n.push(M)}}catch(D){_=!0,T=D}finally{try{v||O.return==null||O.return()}finally{if(_)throw T}}}}catch(D){i=!0,o=D}finally{try{t||d.return==null||d.return()}finally{if(i)throw o}}return n}s(LE,"h");function $f(n){return String.prototype.normalize?typeof n=="string"?n.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:n}s($f,"p");var NE=s(function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)},"f");function OE(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(n){return(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})}s(OE,"m");function Pa(n){return n&&n.classList&&n.classList.contains(this.settings.classNames.tag)}s(Pa,"v");function ME(n){return n&&n.closest(this.settings.classNames.tagSelector)}s(ME,"b");function qE(n,e){var t=window.getSelection();return e=e||t.getRangeAt(0),typeof n=="string"&&(n=document.createTextNode(n)),e&&(e.deleteContents(),e.insertNode(n)),n}s(qE,"w");function un(n,e,t){return n?(e&&(n.__tagifyTagData=t?e:Wn({},n.__tagifyTagData||{},e)),n.__tagifyTagData):(Bo.warn("tag element doesn't exist",{tagElm:n,data:e}),e)}s(un,"y");function qo(n){if(n&&n.parentNode){var e=n,t=window.getSelection(),i=t.getRangeAt(0);t.rangeCount&&(i.setStartAfter(e),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}s(qo,"T");function BE(n,e){n.forEach(function(t){if(un(t.previousSibling)||!t.previousSibling){var i=document.createTextNode("\u200B");t.before(i),e&&qo(i)}})}s(BE,"O");var Gv={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function fR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(fR,"D");function pR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),i.forEach(function(o){fR(n,o,t[o])})}return n}s(pR,"S");function mR(n,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);i&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),o.push.apply(o,c)}return o}(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n}s(mR,"I");function Xv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}s(Xv,"M");function gR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(gR,"E");function vR(n){return function(e){if(Array.isArray(e))return Xv(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return Xv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xv(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(vR,"N");function bR(){for(var n in this.dropdown={},this._dropdown)this.dropdown[n]=typeof this._dropdown[n]=="function"?this._dropdown[n].bind(this):this._dropdown[n];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}s(bR,"_");var Kf,Gl,kE,yR=(Kf=function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),i.forEach(function(o){gR(n,o,t[o])})}return n}({},{events:{binding:function(){var n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.dropdown.events.callbacks,t=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},i=n?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[i]("scroll",t.position,!0),window[i]("resize",t.position),window[i]("keydown",t.onKeyDown)),this.DOM.dropdown[i]("mouseover",t.onMouseOver),this.DOM.dropdown[i]("mouseleave",t.onMouseLeave),this.DOM.dropdown[i]("mousedown",t.onClick),this.DOM.dropdown.content[i]("scroll",t.onScroll)},callbacks:{onKeyDown:function(n){var e=this;if(this.state.hasFocus&&!this.state.composing){var t=this.settings,i=this.DOM.dropdown.querySelector(t.classNames.dropdownItemActiveSelector),o=this.dropdown.getSuggestionDataByNode(i),c=t.mode=="mix",d=t.mode=="select";t.hooks.beforeKeyDown(n,{tagify:this}).then(function(m){switch(n.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":n.preventDefault();var v=e.dropdown.getAllSuggestionsRefs(),_=n.key=="ArrowUp"||n.key=="Up";i&&(i=e.dropdown.getNextOrPrevOption(i,!_)),i&&i.matches(t.classNames.dropdownItemSelector)||(i=v[_?v.length-1:0]),e.dropdown.highlightOption(i,!0);break;case"Escape":case"Esc":e.dropdown.hide();break;case"ArrowRight":if(e.state.actions.ArrowLeft)return;case"Tab":var T=!t.autoComplete.rightKey||!t.autoComplete.tabKey;if(!c&&!d&&i&&T&&!e.state.editing){n.preventDefault();var S=e.dropdown.getMappedValue(o);return e.input.autocomplete.set.call(e,S),!1}return!0;case"Enter":n.preventDefault(),t.hooks.suggestionClick(n,{tagify:e,tagData:o,suggestionElm:i}).then(function(){if(i)return e.dropdown.selectOption(i),i=e.dropdown.getNextOrPrevOption(i,!_),void e.dropdown.highlightOption(i);e.dropdown.hide(),c||e.addTags(e.state.inputText.trim(),!0)}).catch(function(M){return Bo.warn(M)});break;case"Backspace":if(c||e.state.editing.scope)return;var O=e.input.raw.call(e);O!=""&&O.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0))}})}},onMouseOver:function(n){var e=n.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(e)},onMouseLeave:function(n){this.dropdown.highlightOption()},onClick:function(n){var e=this;if(n.button==0&&n.target!=this.DOM.dropdown&&n.target!=this.DOM.dropdown.content){var t=n.target.closest(this.settings.classNames.dropdownItemSelector),i=this.dropdown.getSuggestionDataByNode(t);this.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},50),this.settings.hooks.suggestionClick(n,{tagify:this,tagData:i,suggestionElm:t}).then(function(){t?e.dropdown.selectOption(t,n):e.dropdown.hide()}).catch(function(o){return Bo.warn(o)})}},onScroll:function(n){var e=n.target,t=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(t)})}}},refilter:function(n){n=n||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(n),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(n){var e=n&&n.getAttribute("value");return this.suggestedListItems.find(function(t){return t.value==e})||null},getNextOrPrevOption:function(n){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.dropdown.getAllSuggestionsRefs(),i=t.findIndex(function(o){return o===n});return e?t[i+1]:t[i-1]},highlightOption:function(n,e){var t,i=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(i),this.state.ddItemElm.removeAttribute("aria-selected")),!n)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);t=this.dropdown.getSuggestionDataByNode(n),this.state.ddItemData=t,this.state.ddItemElm=n,n.classList.add(i),n.setAttribute("aria-selected",!0),e&&(n.parentNode.scrollTop=n.clientHeight+n.offsetTop-n.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,t),this.dropdown.position())},selectOption:function(n,e){var t=this,i=this.settings,o=i.dropdown,c=o.clearOnSelect,d=o.closeOnSelect;if(!n)return this.addTags(this.state.inputText,!0),void(d&&this.dropdown.hide());e=e||{};var m=n.getAttribute("value"),v=m=="noMatch",_=i.mode=="mix",T=this.suggestedListItems.find(function(O){var M;return((M=O.value)!==null&&M!==void 0?M:O)==m});if(this.trigger("dropdown:select",{data:T,elm:n,event:e}),m&&(T||v)){if(this.state.editing){var S=this.normalizeTags([T])[0];T=i.transformTag.call(this,S)||S,this.onEditTagDone(null,Wn({__isValid:!0},T))}else this[_?"addMixTags":"addTags"]([T||this.input.raw.call(this)],c);(_||this.DOM.input.parentNode)&&(setTimeout(function(){t.DOM.input.focus(),t.toggleFocusClass(!0)}),d&&setTimeout(this.dropdown.hide.bind(this)),n.addEventListener("transitionend",function(){t.dropdown.fillHeaderFooter(),setTimeout(function(){n.remove(),t.dropdown.refilter()},100)},{once:!0}),n.classList.add(this.settings.classNames.dropdownItemHidden))}else d&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(n){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return n||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems:function(n,e){var t,i,o,c,d,m,v=s(function(){var W,G,X=void 0,ct=void 0;W=D[B],i=((G=Object)!=null&&typeof Symbol<"u"&&G[Symbol.hasInstance]?G[Symbol.hasInstance](W):W instanceof G)?D[B]:{value:D[B]};var vt,ht=Object.keys(i).some(function(z){return I.includes(z)})?I:["value"];S.fuzzySearch&&!e.exact?(c=ht.reduce(function(z,ot){return z+" "+(i[ot]||"")},"").toLowerCase().trim(),S.accentedSearch&&(c=$f(c),m=$f(m)),X=c.indexOf(m)==0,ct=c===m,vt=c,o=m.toLowerCase().split(" ").every(function(z){return vt.includes(z.toLowerCase())})):(X=!0,o=ht.some(function(z){var ot=""+(i[z]||"");return S.accentedSearch&&(ot=$f(ot),m=$f(m)),S.caseSensitive||(ot=ot.toLowerCase()),ct=ot===m,e.exact?ot===m:ot.indexOf(m)==0})),d=!S.includeSelectedTags&&t.isTagDuplicate(fs(i)?i.value:i),o&&!d&&(ct&&X?M.push(i):S.sortby=="startsWith"&&X?O.unshift(i):O.push(i))},"l"),_=this,T=this.settings,S=T.dropdown,O=(e=e||{},[]),M=[],D=T.whitelist,j=S.maxItems>=0?S.maxItems:1/0,I=S.searchKeys,B=0;if(!(n=T.mode=="select"&&this.value.length&&this.value[0][T.tagTextProp]==n?"":n)||!I.length)return O=S.includeSelectedTags?D:D.filter(function(W){return!_.isTagDuplicate(fs(W)?W.value:W)}),this.state.dropdown.suggestions=O,O.slice(0,j);for(m=S.caseSensitive?""+n:(""+n).toLowerCase();B<D.length;B++)t=this,v();return this.state.dropdown.suggestions=M.concat(O),typeof S.sortby=="function"?S.sortby(M.concat(O),m):M.concat(O).slice(0,j)},getMappedValue:function(n){var e=this.settings.dropdown.mapValueTo;return e?typeof e=="function"?e(n):n[e]||n.value:n.value},createListHTML:function(n){var e=this;return Wn([],n).map(function(t,i){typeof t!="string"&&typeof t!="number"||(t={value:t});var o=e.dropdown.getMappedValue(t);return o=typeof o=="string"&&e.settings.dropdown.escapeHTML?Ia(o):o,e.settings.templates.dropdownItem.apply(e,[mR(pR({},t),{mappedValue:o}),e])}).join("")}}),Gl=(Gl={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return vR(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(n){var e,t,i,o=this,c=this.settings,d=c.mode=="mix"&&!c.enforceWhitelist,m=!c.whitelist||!c.whitelist.length,v=c.dropdown.position=="manual";if(n=n===void 0?this.state.inputText:n,!(m&&!d&&!c.templates.dropdownItemNoMatch||c.dropdown.enable===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(n),n&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",n),c.templates.dropdownItemNoMatch&&(i=c.templates.dropdownItemNoMatch.call(this,{value:n}))),!i){if(this.suggestedListItems.length)n&&d&&!this.state.editing.scope&&!Qu(this.suggestedListItems[0].value,n)&&this.suggestedListItems.unshift({value:n});else{if(!n||!d||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:n}]}t=""+(fs(e=this.suggestedListItems[0])?e.value:e),c.autoComplete&&t&&t.indexOf(n)==0&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(i),c.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(c.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=n||!0,this.state.dropdown.query=n,this.setStateSelection(),v||setTimeout(function(){o.dropdown.position(),o.dropdown.render()}),setTimeout(function(){o.trigger("dropdown:show",o.DOM.dropdown)})}},hide:function(n){var e=this,t=this.DOM,i=t.scope,o=t.dropdown,c=this.settings.dropdown.position=="manual"&&!n;if(o&&document.body.contains(o)&&!c)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),i.setAttribute("aria-expanded",!1),o.parentNode.removeChild(o),setTimeout(function(){e.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",o),this},toggle:function(n){this.dropdown[this.state.dropdown.visible&&!n?"hide":"show"]()},getAppendTarget:function(){var n=this.settings.dropdown;return typeof n.appendTarget=="function"?n.appendTarget():n.appendTarget},render:function(){var n,e,t,i=this,o=(n=this.DOM.dropdown,(t=n.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(t),e=t.clientHeight,t.parentNode.removeChild(t),e),c=this.settings,d=typeof c.dropdown.enabled=="number"&&c.dropdown.enabled>=0,m=this.dropdown.getAppendTarget();return d?(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(c.classNames.dropdownInital),this.dropdown.position(o),m.appendChild(this.DOM.dropdown),setTimeout(function(){return i.DOM.dropdown.classList.remove(c.classNames.dropdownInital)})),this):this},fill:function(n){n=typeof n=="string"?n:this.dropdown.createListHTML(n||this.suggestedListItems);var e,t=this.settings.templates.dropdownContent.call(this,n);this.DOM.dropdown.content.innerHTML=(e=t)?e.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var n=this.dropdown.filterListItems(this.state.dropdown.query),e=this.parseTemplate("dropdownHeader",[n]),t=this.parseTemplate("dropdownFooter",[n]),i=this.dropdown.getHeaderRef(),o=this.dropdown.getFooterRef();e&&i?.parentNode.replaceChild(e,i),t&&o?.parentNode.replaceChild(t,o)},position:function(n){var e=this.settings.dropdown,t=this.dropdown.getAppendTarget();if(e.position!="manual"&&t){var i,o,c,d,m,v,_,T,S,O=this.DOM.dropdown,M=e.RTL,D=t===document.body,j=t===this.DOM.scope,I=D?window.pageYOffset:t.scrollTop,B=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,W=B.clientHeight,G=Math.max(B.clientWidth||0,window.innerWidth||0)>480?e.position:"all",X=this.DOM[G=="input"?"input":"scope"];if(n=n||O.clientHeight,this.state.dropdown.visible){if(G=="text"?(c=(i=function(){var ht=document.getSelection();if(ht.rangeCount){var z,ot,At=ht.getRangeAt(0),V=At.startContainer,tt=At.startOffset;if(tt>0)return(ot=document.createRange()).setStart(V,tt-1),ot.setEnd(V,tt),{left:(z=ot.getBoundingClientRect()).right,top:z.top,bottom:z.bottom};if(V.getBoundingClientRect)return V.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,o=i.top,d=i.left,m="auto"):(v=function(ht){var z=0,ot=0;for(ht=ht.parentNode;ht&&ht!=B;)z+=ht.offsetTop||0,ot+=ht.offsetLeft||0,ht=ht.parentNode;return{top:z,left:ot}}(t),i=X.getBoundingClientRect(),o=j?-1:i.top-v.top,c=(j?i.height:i.bottom-v.top)-1,d=j?-1:i.left-v.left,m=i.width+"px"),!D){var ct=function(){for(var ht=0,z=e.appendTarget.parentNode;z;)ht+=z.scrollTop||0,z=z.parentNode;return ht}();o+=ct,c+=ct}var vt;o=Math.floor(o),c=Math.ceil(c),T=((_=(vt=e.placeAbove)!==null&&vt!==void 0?vt:W-i.bottom<n)?o:c)+I,S="left: ".concat(d+(M&&i.width||0)+window.pageXOffset,"px;"),O.style.cssText="".concat(S,"; top: ").concat(T,"px; min-width: ").concat(m,"; max-width: ").concat(m),O.setAttribute("placement",_?"top":"bottom"),O.setAttribute("position",G)}}}})!=null?Gl:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Kf,Object.getOwnPropertyDescriptors(Gl)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}(Object(Gl)).forEach(function(n){Object.defineProperty(Kf,n,Object.getOwnPropertyDescriptor(Gl,n))}),Kf),Ju="@yaireo/tagify/",_R={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},wR={wrapper:function(n,e){return'<tags class="'.concat(e.classNames.namespace," ").concat(e.mode?"".concat(e.classNames[e.mode+"Mode"]):""," ").concat(n.className,`"
                    `).concat(e.readonly?"readonly":"",`
                    `).concat(e.disabled?"disabled":"",`
                    `).concat(e.required?"required":"",`
                    `).concat(e.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(EE,`
        </tags>`)},input:function(){var n=this.settings,e=n.placeholder||EE;return"<span ".concat(!n.readonly&&n.userInput?"contenteditable":"",' tabIndex="0" data-placeholder="').concat(e,'" aria-placeholder="').concat(n.placeholder||"",`"
                    class="`).concat(n.classNames.input,`"
                    role="textbox"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(n.mode=="mix",'"></span>')},tag:function(n,e){var t=e.settings;return'<tag title="'.concat(n.title||n.value,`"
                    contenteditable='false'
                    spellcheck='false'
                    tabIndex="`).concat(t.a11y.focusableTags?0:-1,`"
                    class="`).concat(t.classNames.tag," ").concat(n.class||"",`"
                    `).concat(this.getAttributes(n),`>
            <x title='' tabIndex="`).concat(t.a11y.focusableTags?0:-1,'" class="').concat(t.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(t.mode==="select"&&t.userInput?"contenteditable='true'":"",' class="').concat(t.classNames.tagText,'">').concat(n[t.tagTextProp]||n.value,`</span>
            </div>
        </tag>`)},dropdown:function(n){var e=n.dropdown,t=e.position=="manual";return'<div class="'.concat(t?"":n.classNames.dropdown," ").concat(e.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(e.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(n.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(n){var e=this.settings.templates,t=this.state.dropdown.suggestions;return`
            `.concat(e.dropdownHeader.call(this,t),`
            `).concat(n,`
            `).concat(e.dropdownFooter.call(this,t),`
        `)},dropdownItem:function(n){return"<div ".concat(this.getAttributes(n),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(n.class||"",`'
                    tabindex="0"
                    role="option">`).concat(n.mappedValue||n.value,"</div>")},dropdownHeader:function(n){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(n){var e=n.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(e,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function DE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}s(DE,"F");function IE(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}s(IE,"R");function xR(n,e){return function(t){if(Array.isArray(t))return t}(n)||function(t,i){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var c,d,m=[],v=!0,_=!1;try{for(o=o.call(t);!(v=(c=o.next()).done)&&(m.push(c.value),!i||m.length!==i);v=!0);}catch(T){_=!0,d=T}finally{try{v||o.return==null||o.return()}finally{if(_)throw d}}return m}}(n,e)||function(t,i){if(t){if(typeof t=="string")return DE(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(o);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return DE(t,i)}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(xR,"H");function Jv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}s(Jv,"B");function Da(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(Da,"W");function PE(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}s(PE,"U");function ER(n,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);i&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),o.push.apply(o,c)}return o}(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n}s(ER,"q");function Qv(n){return function(e){if(Array.isArray(e))return Jv(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return Jv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jv(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(Qv,"K");var TR={customBinding:function(){var n=this;this.customEventsList.forEach(function(e){n.on(e,n.settings.callbacks[e])})},binding:function(){var n,e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=this.settings,i=this.events.callbacks,o=e?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!e){for(var c in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),n=this.listeners.main=this.listeners.main||{keydown:["input",i.onKeydown.bind(this)],click:["scope",i.onClickScope.bind(this)],dblclick:t.mode!="select"&&["scope",i.onDoubleClickScope.bind(this)],paste:["input",i.onPaste.bind(this)],drop:["input",i.onDrop.bind(this)],compositionstart:["input",i.onCompositionStart.bind(this)],compositionend:["input",i.onCompositionEnd.bind(this)]})n[c]&&this.DOM[n[c][0]][o](c,n[c][1]);var d=this.listeners.main.inputMutationObserver||new MutationObserver(i.onInputDOMChange.bind(this));d.disconnect(),t.mode=="mix"&&d.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(n){var e=(n||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),e))},bindGlobal:function(n){var e,t=this.events.callbacks,i=n?"removeEventListener":"addEventListener";if(this.listeners&&(n||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:t[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:t.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"click",target:document,cb:t.onClickAnywhere.bind(this),useCapture:!0}];var o=!0,c=!1,d=void 0;try{for(var m,v=this.listeners.global[Symbol.iterator]();!(o=(m=v.next()).done);o=!0)(e=m.value).target[i](e.type,e.cb,!!e.useCapture)}catch(_){c=!0,d=_}finally{try{o||v.return==null||v.return()}finally{if(c)throw d}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(n){var e,t,i,o=ME.call(this,n.target),c=Pa.call(this,n.target),d=n.type=="focusin",m=n.type=="focusout";(e=n.target)===null||e===void 0||e.closest(this.settings.classNames.tagTextSelector),o&&d&&!c&&this.toggleFocusClass(this.state.hasFocus=+new Date);var v=this.settings,_=n.target?this.trim(this.DOM.input.textContent):"",T=(i=this.value)===null||i===void 0||(t=i[0])===null||t===void 0?void 0:t[v.tagTextProp],S=v.dropdown.enabled>=0,O={relatedTarget:n.relatedTarget},M=this.state.actions.selectOption&&(S||!v.dropdown.closeOnSelect),D=this.state.actions.addNew&&S;if(m){if(n.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate()}if(!M&&!D)if(d||o?(this.state.hasFocus=+new Date,this.toggleFocusClass(this.state.hasFocus)):this.state.hasFocus=!1,v.mode!="mix"){if(d){if(!v.focusable)return;var j=v.dropdown.enabled===0&&!this.state.dropdown.visible;return this.toggleFocusClass(!0),this.trigger("focus",O),void(!j||c&&v.mode!=="select"||this.dropdown.show(this.value.length?"":void 0))}if(m){if(this.trigger("blur",O),this.loading(!1),v.mode=="select"){if(this.value.length){var I=this.getTagElms()[0];_=this.trim(I.textContent)}T===_&&(_="")}_&&!this.state.actions.selectOption&&v.addTagOnBlur&&v.addTagOn.includes("blur")&&this.addTags(_,!0)}o||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else d?this.trigger("focus",O):m&&(this.trigger("blur",O),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(n){this.state.composing=!0},onCompositionEnd:function(n){this.state.composing=!1},onWindowKeyDown:function(n){var e,t=this.settings,i=document.activeElement,o=ME.call(this,i)&&this.DOM.scope.contains(document.activeElement),c=o&&i.hasAttribute("readonly");if(this.state.hasFocus||o&&!c){e=i.nextElementSibling;var d=n.target.classList.contains(t.classNames.tagX);switch(n.key){case"Backspace":t.readonly||this.state.editing||(this.removeTags(i),(e||this.DOM.input).focus());break;case"Enter":if(d)return void this.removeTags(n.target.parentNode);t.a11y.focusableTags&&Pa.call(this,i)&&setTimeout(this.editTag.bind(this),0,i);break;case"ArrowDown":this.state.dropdown.visible||t.mode=="mix"||this.dropdown.show()}}},onKeydown:function(n){var e=this,t=this.settings;if(!this.state.composing&&t.userInput){t.mode=="select"&&t.enforceWhitelist&&this.value.length&&n.key!="Tab"&&n.preventDefault();var i=this.trim(n.target.textContent);this.trigger("keydown",{event:n}),t.hooks.beforeKeyDown(n,{tagify:this}).then(function(o){if(t.mode=="mix"){switch(n.key){case"Left":case"ArrowLeft":e.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(e.state.editing)return;var c=document.getSelection(),d=n.key=="Delete"&&c.anchorOffset==(c.anchorNode.length||0),m=c.anchorNode.previousSibling,v=c.anchorNode.nodeType==1||!c.anchorOffset&&m&&m.nodeType==1&&c.anchorNode.previousSibling;AE(e.DOM.input.innerHTML);var _,T,S,O=e.getTagElms(),M=c.anchorNode.length===1&&c.anchorNode.nodeValue=="\u200B";if(t.backspace=="edit"&&v)return _=c.anchorNode.nodeType==1?null:c.anchorNode.previousElementSibling,setTimeout(e.editTag.bind(e),0,_),void n.preventDefault();if(NE()&&PE(v,Element))return S=CE(v),v.hasAttribute("readonly")||v.remove(),e.DOM.input.focus(),void setTimeout(function(){qo(S),e.DOM.input.click()});if(c.anchorNode.nodeName=="BR")return;if((d||v)&&c.anchorNode.nodeType==1?T=c.anchorOffset==0?d?O[0]:null:O[Math.min(O.length,c.anchorOffset)-1]:d?T=c.anchorNode.nextElementSibling:PE(v,Element)&&(T=v),c.anchorNode.nodeType==3&&!c.anchorNode.nodeValue&&c.anchorNode.previousElementSibling&&n.preventDefault(),(v||d)&&!t.backspace||c.type!="Range"&&!c.anchorOffset&&c.anchorNode==e.DOM.input&&n.key!="Delete")return void n.preventDefault();if(c.type!="Range"&&T&&T.hasAttribute("readonly"))return void qo(CE(T));n.key=="Delete"&&M&&un(c.anchorNode.nextSibling)&&e.removeTags(c.anchorNode.nextSibling),clearTimeout(kE),kE=setTimeout(function(){var B=document.getSelection();AE(e.DOM.input.innerHTML),!d&&B.anchorNode.previousSibling,e.value=[].map.call(O,function(W,G){var X=un(W);if(W.parentNode||X.readonly)return X;e.trigger("remove",{tag:W,index:G,data:X})}).filter(function(W){return W})},20)}return!0}var D=t.dropdown.position=="manual";switch(n.key){case"Backspace":t.mode=="select"&&t.enforceWhitelist&&e.value.length?e.removeTags():e.state.dropdown.visible&&t.dropdown.position!="manual"||n.target.textContent!=""&&i.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0));break;case"Esc":case"Escape":if(e.state.dropdown.visible)return;n.target.blur();break;case"Down":case"ArrowDown":e.state.dropdown.visible||e.dropdown.show();break;case"ArrowRight":var j=e.state.inputSuggestion||e.state.ddItemData;if(j&&t.autoComplete.rightKey)return void e.addTags([j],!0);break;case"Tab":var I=t.mode=="select";if(!i||I)return!0;n.preventDefault();case"Enter":if(e.state.dropdown.visible&&!D)return;n.preventDefault(),setTimeout(function(){e.state.dropdown.visible&&!D||e.state.actions.selectOption||!t.addTagOn.includes(n.key.toLowerCase())||e.addTags(i,!0)})}}).catch(function(o){return o})}},onInput:function(n){this.postUpdate();var e=this.settings;if(e.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,n);var t=this.input.normalize.call(this,void 0,{trim:!1}),i=t.length>=e.dropdown.enabled,o={value:t,inputElm:this.DOM.input},c=this.validateTag({value:t});e.mode=="select"&&this.toggleScopeValidation(c),o.isValid=c,this.state.inputText!=t&&(this.input.set.call(this,t,!1),t.search(e.delimiters)!=-1?this.addTags(t)&&this.input.set.call(this):e.dropdown.enabled>=0&&this.dropdown[i?"show":"hide"](t),this.trigger("input",o))},onMixTagsInput:function(n){var e,t,i,o,c,d,m,v,_=this,T=this.settings,S=this.value.length,O=this.getTagElms(),M=document.createDocumentFragment(),D=window.getSelection().getRangeAt(0),j=[].map.call(O,function(I){return un(I).value});if(n.inputType=="deleteContentBackward"&&NE()&&this.events.callbacks.onKeydown.call(this,{target:n.target,key:"Backspace"}),BE(this.getTagElms()),this.value.slice().forEach(function(I){I.readonly&&!j.includes(I.value)&&M.appendChild(_.createTagElem(I))}),M.childNodes.length&&(D.insertNode(M),this.setRangeAtStartEnd(!1,M.lastChild)),O.length!=S)return this.value=[].map.call(this.getTagElms(),function(I){return un(I)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(d=window.getSelection()).rangeCount>0&&d.anchorNode.nodeType==3){if((D=d.getRangeAt(0).cloneRange()).collapse(!0),D.setStart(d.focusNode,0),i=(e=D.toString().slice(0,D.endOffset)).split(T.pattern).length-1,(t=e.match(T.pattern))&&(o=e.slice(e.lastIndexOf(t[t.length-1]))),o){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:o.match(T.pattern)[0],value:o.replace(T.pattern,"")},this.state.tag.baseOffset=d.baseOffset-this.state.tag.value.length,v=this.state.tag.value.match(T.delimiters))return this.state.tag.value=this.state.tag.value.replace(T.delimiters,""),this.state.tag.delimiters=v[0],this.addTags(this.state.tag.value,T.dropdown.clearOnSelect),void this.dropdown.hide();c=this.state.tag.value.length>=T.dropdown.enabled;try{m=(m=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&m.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(m||i<this.state.mixMode.matchedPatternCount)&&(c=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=i}setTimeout(function(){_.update({withoutChangeEvent:!0}),_.trigger("input",Wn({},_.state.tag,{textContent:_.DOM.input.textContent})),_.state.tag&&_.dropdown[c?"show":"hide"](_.state.tag.value)},10)},onInputIE:function(n){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,n)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(n){n.target==this.DOM.scope||this.DOM.scope.contains(n.target)||(this.toggleFocusClass(!1),this.state.hasFocus=!1,n.target.closest(".tagify__dropdown")&&n.target.closest(".tagify__dropdown").__tagify!=this&&this.dropdown.hide())},onClickScope:function(n){var e=this.settings,t=n.target.closest("."+e.classNames.tag),i=n.target===this.DOM.scope,o=+new Date-this.state.hasFocus;if(i&&e.mode!="select")this.DOM.input.focus();else{if(!n.target.classList.contains(e.classNames.tagX))return t&&!this.state.editing?(this.trigger("click",{tag:t,index:this.getNodeIndex(t),data:un(t),event:n}),void(e.editTags!==1&&e.editTags.clicks!==1&&e.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,n))):void(n.target==this.DOM.input&&(e.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),o>500||!e.focusable)?this.state.dropdown.visible?this.dropdown.hide():e.dropdown.enabled===0&&e.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):e.mode!="select"||e.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,ER(function(c){for(var d=1;d<arguments.length;d++){var m=arguments[d]!=null?arguments[d]:{},v=Object.keys(m);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(m).filter(function(_){return Object.getOwnPropertyDescriptor(m,_).enumerable}))),v.forEach(function(_){Da(c,_,m[_])})}return c}({},n),{target:this.getTagElms()[0]})),!e.userInput&&this.dropdown.show()));this.removeTags(n.target.parentNode)}},onPaste:function(n){var e=this;n.preventDefault();var t,i,o,c=this.settings;if(c.mode=="select"&&c.enforceWhitelist||!c.userInput)return!1;c.readonly||(i=n.clipboardData||window.clipboardData,o=i.getData("Text"),c.hooks.beforePaste(n,{tagify:this,pastedText:o,clipboardData:i}).then(function(d){d===void 0&&(d=o),d&&(e.injectAtCaret(d,window.getSelection().getRangeAt(0)),e.settings.mode=="mix"?e.events.callbacks.onMixTagsInput.call(e,n):e.settings.pasteAsTags?t=e.addTags(e.state.inputText+d,!0):(e.state.inputText=d,e.dropdown.show(d))),e.trigger("paste",{event:n,pastedText:o,clipboardData:i,tagsElems:t})}).catch(function(d){return d}))},onDrop:function(n){n.preventDefault()},onEditTagInput:function(n,e){var t,i=n.closest("."+this.settings.classNames.tag),o=this.getNodeIndex(i),c=un(i),d=this.input.normalize.call(this,n),m=(Da(t={},this.settings.tagTextProp,d),Da(t,"__tagId",c.__tagId),t),v=this.validateTag(m);this.editTagChangeDetected(Wn(c,m))||n.originalIsValid!==!0||(v=!0),i.classList.toggle(this.settings.classNames.tagInvalid,v!==!0),c.__isValid=v,i.title=v===!0?c.title||c.value:v,d.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=d),this.dropdown.show(d)),this.trigger("edit:input",{tag:i,index:o,data:Wn({},this.value[o],{newValue:d}),event:e})},onEditTagPaste:function(n,e){var t=(e.clipboardData||window.clipboardData).getData("Text");e.preventDefault();var i=qE(t);this.setRangeAtStartEnd(!1,i)},onEditTagClick:function(n,e){this.events.callbacks.onClickScope.call(this,e)},onEditTagFocus:function(n){this.state.editing={scope:n,input:n.querySelector("[contenteditable]")}},onEditTagBlur:function(n,e){var t=Pa.call(this,e.relatedTarget);if(this.settings.mode=="select"&&t&&e.relatedTarget.contains(e.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(n))){var i,o,c,d=this.settings,m=n.closest("."+d.classNames.tag),v=un(m),_=this.input.normalize.call(this,n),T=(Da(i={},d.tagTextProp,_),Da(i,"__tagId",v.__tagId),i),S=v.__originalData,O=this.editTagChangeDetected(Wn(v,T)),M=this.validateTag(T);if(_)if(O){var D;if(o=this.hasMaxTags(),c=Wn({},S,(Da(D={},d.tagTextProp,this.trim(_)),Da(D,"__isValid",M),D)),d.transformTag.call(this,c,S),(M=(!o||S.__isValid===!0)&&this.validateTag(c))!==!0){if(this.trigger("invalid",{data:c,tag:m,message:M}),d.editTags.keepInvalid)return;d.keepInvalidTags?c.__isValid=M:c=S}else d.keepInvalidTags&&(delete c.title,delete c["aria-invalid"],delete c.class);this.onEditTagDone(m,c)}else this.onEditTagDone(m,S);else this.onEditTagDone(m)}},onEditTagkeydown:function(n,e){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:n}),n.key){case"Esc":case"Escape":this.state.editing=!1,e.__tagifyTagData.__originalData.value?e.parentNode.replaceChild(e.__tagifyTagData.__originalHTML,e):e.remove();break;case"Enter":case"Tab":n.preventDefault(),setTimeout(function(){return n.target.blur()},0)}},onDoubleClickScope:function(n){var e,t,i=n.target.closest("."+this.settings.classNames.tag),o=un(i),c=this.settings;i&&o.editable!==!1&&(e=i.classList.contains(this.settings.classNames.tagEditing),t=i.hasAttribute("readonly"),c.readonly||e||t||!this.settings.editTags||!c.userInput||(this.events.callbacks.onEditTagFocus.call(this,i),this.editTag(i)),this.toggleFocusClass(!0),c.mode!="select"&&this.trigger("dblclick",{tag:i,index:this.getNodeIndex(i),data:un(i)}))},onInputDOMChange:function(n){var e=this;n.forEach(function(i){i.addedNodes.forEach(function(o){if(o.outerHTML=="<div><br></div>")o.replaceWith(document.createElement("br"));else if(o.nodeType==1&&o.querySelector(e.settings.classNames.tagSelector)){var c,d=document.createTextNode("");o.childNodes[0].nodeType==3&&o.previousSibling.nodeName!="BR"&&(d=document.createTextNode(`
`)),(c=o).replaceWith.apply(c,Qv([d].concat(Qv(Qv(o.childNodes).slice(0,-1))))),qo(d)}else if(Pa.call(e,o)){var m;if(((m=o.previousSibling)===null||m===void 0?void 0:m.nodeType)!=3||o.previousSibling.textContent||o.previousSibling.remove(),o.previousSibling&&o.previousSibling.nodeName=="BR"){o.previousSibling.replaceWith(`
\u200B`);for(var v=o.nextSibling,_="";v;)_+=v.textContent,v=v.nextSibling;_.trim()&&qo(o.previousSibling)}else o.previousSibling&&!un(o.previousSibling)||o.before("\u200B")}}),i.removedNodes.forEach(function(o){o&&o.nodeName=="BR"&&Pa.call(e,t)&&(e.removeTags(t),e.fixFirefoxLastTagNoCaret())})});var t=this.DOM.input.lastChild;t&&t.nodeValue==""&&t.remove(),t&&t.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function tb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}s(tb,"X");function ib(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}s(ib,"J");function Vs(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}s(Vs,"G");function RE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),i.forEach(function(o){ib(n,o,t[o])})}return n}s(RE,"$");function eb(n){return function(e){if(Array.isArray(e))return tb(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return tb(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tb(e,t)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s(eb,"Q");function th(n,e){if(!n){Bo.warn("input element not found",n);var t=new Proxy(this,{get:function(){return function(){return t}}});return t}if(n.__tagify)return Bo.warn("input element is already Tagified - Same instance is returned.",n),n.__tagify;var i;Wn(this,function(o){var c=document.createTextNode(""),d={};function m(v,_,T){T&&_.split(/\s+/g).forEach(function(S){return c[v+"EventListener"].call(c,S,T)})}return s(m,"s"),{removeAllCustomListeners:function(){Object.entries(d).forEach(function(v){var _=xR(v,2),T=_[0];_[1].forEach(function(S){return m("remove",T,S)})}),d={}},off:function(v,_){return v&&(_?m("remove",v,_):v.split(/\s+/g).forEach(function(T){var S;(S=d[T])===null||S===void 0||S.forEach(function(O){return m("remove",T,O)}),delete d[T]})),this},on:function(v,_){return _&&typeof _=="function"&&(v.split(/\s+/g).forEach(function(T){Array.isArray(d[T])?d[T].push(_):d[T]=[_]}),m("add",v,_)),this},trigger:function(v,_,T){var S;if(T=T||{cloneData:!0},v)if(o.settings.isJQueryPlugin)v=="remove"&&(v="removeTag"),jQuery(o.DOM.originalInput).triggerHandler(v,[_]);else{try{var O=typeof _=="object"?_:{value:_};if((O=T.cloneData?Wn({},O):O).tagify=this,_.event&&(O.event=this.cloneEvent(_.event)),IE(_,Object))for(var M in _)IE(_[M],HTMLElement)&&(O[M]=_[M]);S=new CustomEvent(v,{detail:O})}catch(D){Bo.warn(D)}c.dispatchEvent(S)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(i=e.id,function(o){var c,d="/"+o;if(localStorage.getItem(Ju+i+"/v",1)==1)try{c=JSON.parse(localStorage[Ju+i+d])}catch{}return c}),this.setPersistedData=function(o){return o?(localStorage.setItem(Ju+o+"/v",1),function(c,d){var m="/"+d,v=JSON.stringify(c);c&&d&&(localStorage.setItem(Ju+o+m,v),dispatchEvent(new Event("storage")))}):function(){}}(e.id),this.clearPersistedData=function(o){return function(c){var d=Ju+"/"+o+"/";if(c)localStorage.removeItem(d+c);else for(var m in localStorage)m.includes(d)&&localStorage.removeItem(m)}}(e.id),this.applySettings(n,e),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(n),bR.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),n.autofocus&&this.DOM.input.focus(),n.__tagify=this}s(th,"Y");th.prototype={_dropdown:yR,placeCaretAfterNode:qo,getSetTagData:un,helpers:{sameStr:Qu,removeCollectionProp:SE,omit:nb,isObject:fs,parseHTML:Yv,escapeHTML:Ia,extend:Wn,concatWithoutDups:LE,getUID:OE,isNodeTag:Pa},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(n){return this.settings.trim&&n&&typeof n=="string"?n.trim():n},parseHTML:Yv,templates:wR,parseTemplate:function(n,e){return Yv((n=this.settings.templates[n]||n).apply(this,e))},set whitelist(n){var e=n&&Array.isArray(n);this.settings.whitelist=e?n:[],this.setPersistedData(e?n:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(n){this.settings.userInput=!!n,this.setContentEditable(!!n)},get userInput(){return this.settings.userInput},generateClassSelectors:function(n){var e=s(function(i){var o=i;Object.defineProperty(n,o+"Selector",{get:function(){return"."+this[o].split(" ")[0]}})},"e");for(var t in n)e(t)},applySettings:function(n,e){var t,i;Gv.templates=this.templates;var o=Wn({},Gv,e.mode=="mix"?{dropdown:{position:"text"}}:{}),c=this.settings=Wn({},o,e);if(c.disabled=n.hasAttribute("disabled"),c.readonly=c.readonly||n.hasAttribute("readonly"),c.placeholder=Ia(n.getAttribute("placeholder")||c.placeholder||""),c.required=n.hasAttribute("required"),this.generateClassSelectors(c.classNames),c.dropdown.includeSelectedTags===void 0&&(c.dropdown.includeSelectedTags=c.duplicates),this.isIE&&(c.autoComplete=!1),["whitelist","blacklist"].forEach(function(m){var v=n.getAttribute("data-"+m);v&&Vs(v=v.split(c.delimiters),Array)&&(c[m]=v)}),"autoComplete"in e&&!fs(e.autoComplete)&&(c.autoComplete=Gv.autoComplete,c.autoComplete.enabled=e.autoComplete),c.mode=="mix"&&(c.pattern=c.pattern||/@/,c.autoComplete.rightKey=!0,c.delimiters=e.delimiters||null,c.tagTextProp&&!c.dropdown.searchKeys.includes(c.tagTextProp)&&c.dropdown.searchKeys.push(c.tagTextProp)),n.pattern)try{c.pattern=new RegExp(n.pattern)}catch{}if(c.delimiters){c._delimiters=c.delimiters;try{c.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}c.disabled&&(c.userInput=!1),this.TEXTS=RE({},_R,c.texts||{}),(c.mode!="select"||!((t=e.dropdown)===null||t===void 0)&&t.enabled)&&c.userInput||(c.dropdown.enabled=0),c.dropdown.appendTarget=((i=e.dropdown)===null||i===void 0?void 0:i.appendTarget)||document.body;var d=this.getPersistedData("whitelist");Array.isArray(d)&&(this.whitelist=Array.isArray(c.whitelist)?LE(c.whitelist,d):d)},getAttributes:function(n){var e,t=this.getCustomAttributes(n),i="";for(e in t)i+=" "+e+(n[e]!==void 0?'="'.concat(t[e],'"'):"");return i},getCustomAttributes:function(n){if(!fs(n))return"";var e,t={};for(e in n)e.slice(0,2)!="__"&&e!="class"&&n.hasOwnProperty(e)&&n[e]!==void 0&&(t[e]=Ia(n[e]));return t},setStateSelection:function(){var n=window.getSelection(),e={anchorOffset:n.anchorOffset,anchorNode:n.anchorNode,range:n.getRangeAt&&n.rangeCount&&n.getRangeAt(0)};return this.state.selection=e,e},getCSSVars:function(){var n,e,t,i=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(n=function(o){if(!o)return{};var c=(o=o.trim().split(" ")[0]).split(/\d+/g).filter(function(d){return d}).pop().trim();return{value:+o.split(c).filter(function(d){return d})[0].trim(),unit:c}}((t="tag-hide-transition",i.getPropertyValue("--"+t))),e=n.value,n.unit=="s"?1e3*e:e)}},build:function(n){var e=this.DOM,t=n.closest("label");this.settings.mixMode.integrated?(e.originalInput=null,e.scope=n,e.input=n):(e.originalInput=n,e.originalInput_tabIndex=n.tabIndex,e.scope=this.parseTemplate("wrapper",[n,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),n.parentNode.insertBefore(e.scope,n),n.tabIndex=-1),t&&t.setAttribute("for","")},destroy:function(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(n){var e,t=this.settings;if(this.state.blockChangeEvent=!0,n===void 0){var i=this.getPersistedData("value");n=i&&!this.DOM.originalInput.value?i:t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),n)if(t.mode=="mix")this.parseMixTags(n),(e=this.DOM.input.lastChild)&&e.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{Vs(JSON.parse(n),Array)&&(n=JSON.parse(n))}catch{}this.addTags(n,!0).forEach(function(o){return o&&o.classList.add(t.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=t.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(n){var e={};for(var t in n)t!="path"&&(e[t]=n[t]);return e},loading:function(n){return this.state.isLoading=n,this.DOM.scope.classList[n?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(n,e){return n&&n.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(n,e){typeof n=="string"&&this.DOM.scope.classList.toggle(n,e)},toggleScopeValidation:function(n){var e=n===!0||n===void 0;!this.settings.required&&n&&n===this.TEXTS.empty&&(e=!0),this.toggleClass(this.settings.classNames.tagInvalid,!e),this.DOM.scope.title=e?"":n},toggleFocusClass:function(n){this.toggleClass(this.settings.classNames.focus,!!n)},setPlaceholder:function(n){var e=this;["data","aria"].forEach(function(t){return e.DOM.input.setAttribute("".concat(t,"-placeholder"),n)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var n=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==n.value,t=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=n.value,t.simulated=!0,n._valueTracker&&n._valueTracker.setValue(Math.random()),n.dispatchEvent(t),this.trigger("change",this.state.lastOriginalValueReported),n.value=this.state.lastOriginalValueReported)}},events:TR,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(n,e){if(e){n=typeof n=="number"?n:!!n,e=e.lastChild||e;var t=document.getSelection();if(Vs(t.focusNode,Element)&&!this.DOM.input.contains(t.focusNode))return!0;try{t.rangeCount>=1&&["Start","End"].forEach(function(i){return t.getRangeAt(0)["set"+i](e,n||e.length)})}catch(i){console.warn(i)}}},insertAfterTag:function(n,e){if(e=e||this.settings.mixMode.insertAfterTag,n&&n.parentNode&&e)return e=typeof e=="string"?document.createTextNode(e):e,n.parentNode.insertBefore(e,n.nextSibling),e},editTagChangeDetected:function(n){var e=n.__originalData;for(var t in e)if(!this.dataProps.includes(t)&&n[t]!=e[t])return!0;return!1},getTagTextNode:function(n){return n.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(n,e){this.getTagTextNode(n).innerHTML=Ia(e)},editTag:function(n,e){var t=this;n=n||this.getLastTag(),e=e||{};var i=this.settings,o=this.getTagTextNode(n),c=this.getNodeIndex(n),d=un(n),m=this.events.callbacks,v=!0,_=i.mode=="select";if(!_&&this.dropdown.hide(),o){if(!Vs(d,Object)||!("editable"in d)||d.editable)return d=un(n,{__originalData:Wn({},d),__originalHTML:n.cloneNode(!0)}),un(d.__originalHTML,d.__originalData),o.setAttribute("contenteditable",!0),n.classList.add(i.classNames.tagEditing),o.addEventListener("click",m.onEditTagClick.bind(this,n)),o.addEventListener("blur",m.onEditTagBlur.bind(this,this.getTagTextNode(n))),o.addEventListener("input",m.onEditTagInput.bind(this,o)),o.addEventListener("paste",m.onEditTagPaste.bind(this,o)),o.addEventListener("keydown",function(T){return m.onEditTagkeydown.call(t,T,n)}),o.addEventListener("compositionstart",m.onCompositionStart.bind(this)),o.addEventListener("compositionend",m.onCompositionEnd.bind(this)),e.skipValidation||(v=this.editTagToggleValidity(n)),o.originalIsValid=v,this.trigger("edit:start",{tag:n,index:c,data:d,isValid:v}),o.focus(),!_&&this.setRangeAtStartEnd(!1,o),i.dropdown.enabled===0&&!_&&this.dropdown.show(),this.state.hasFocus=!0,this}else Bo.warn("Cannot find element in Tag template: .",i.classNames.tagTextSelector)},editTagToggleValidity:function(n,e){var t;if(e=e||un(n))return(t=!("__isValid"in e)||e.__isValid===!0)||this.removeTagsFromValue(n),this.update(),n.classList.toggle(this.settings.classNames.tagNotAllowed,!t),e.__isValid=t,e.__isValid;Bo.warn("tag has no data: ",n,e)},onEditTagDone:function(n,e){n=n||this.state.editing.scope,e=e||{};var t,i,o={tag:n,index:this.getNodeIndex(n),previousData:un(n),data:e},c=this.settings;this.trigger("edit:beforeUpdate",o,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,n&&((i=e[c.tagTextProp])!==void 0?!((t=(i+="").trim)===null||t===void 0)&&t.call(i):!(c.tagTextProp in e)&&e.value)?(n=this.replaceTag(n,e),this.editTagToggleValidity(n,e),c.a11y.focusableTags?n.focus():c.mode!="select"&&qo(n)):n&&this.removeTags(n),this.trigger("edit:updated",o),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(n,e){e&&e.value!==""&&e.value!==void 0||(e=n.__tagifyTagData),e.__isValid&&e.__isValid!=1&&Wn(e,this.getInvalidTagAttrs(e,e.__isValid));var t=this.createTagElem(e);return n.parentNode.replaceChild(t,n),this.updateValueByDOMTags(),t},updateValueByDOMTags:function(){var n=this;this.value.length=0,[].forEach.call(this.getTagElms(),function(e){e.classList.contains(n.settings.classNames.tagNotAllowed.split(" ")[0])||n.value.push(un(e))}),this.update()},injectAtCaret:function(n,e){var t;if(!(e=e||((t=this.state.selection)===null||t===void 0?void 0:t.range))&&n)return this.appendMixTags(n),this;var i=qE(n,e);return this.setRangeAtStartEnd(!1,i),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.settings.dropdown.closeOnSelect;this.state.inputText=n,e&&(this.DOM.input.innerHTML=Ia(""+n)),!n&&t&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var n=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!n),n},normalize:function(n,e){var t=n||this.DOM.input,i=[];t.childNodes.forEach(function(o){return o.nodeType==3&&i.push(o.nodeValue)}),i=i.join(`
`);try{i=i.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return i=i.replace(/\s/g," "),e?.trim?this.trim(i):i},autocomplete:{suggest:function(n){if(this.settings.autoComplete.enabled){typeof(n=n||{value:""})!="object"&&(n={value:n});var e=this.dropdown.getMappedValue(n);if(typeof e!="number"){var t=this.state.inputText.toLowerCase(),i=e.substr(0,this.state.inputText.length).toLowerCase(),o=e.substring(this.state.inputText.length);e&&this.state.inputText&&i==t?(this.DOM.input.setAttribute("data-suggest",o),this.state.inputSuggestion=n):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(n){var e=this.DOM.input.getAttribute("data-suggest"),t=n||(e?this.state.inputText+e:null);return!!t&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+t)):(this.input.set.call(this,t),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(n){return this.value.findIndex(function(e){return e.__tagId==(n||{}).__tagId})},getNodeIndex:function(n){var e=0;if(n)for(;n=n.previousElementSibling;)e++;return e},getTagElms:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i="."+eb(this.settings.classNames.tag.split(" ")).concat(eb(e)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(i))},getLastTag:function(){var n=this.settings.classNames,e=this.DOM.scope.querySelectorAll("".concat(n.tagSelector,":not(.").concat(n.tagHide,"):not([readonly])"));return e[e.length-1]},isTagDuplicate:function(n,e,t){var i=0;if(this.settings.mode=="select")return!1;var o=!0,c=!1,d=void 0;try{for(var m,v=this.value[Symbol.iterator]();!(o=(m=v.next()).done);o=!0){var _=m.value;Qu(this.trim(""+n),_.value,e)&&t!=_.__tagId&&i++}}catch(T){c=!0,d=T}finally{try{o||v.return==null||v.return()}finally{if(c)throw d}}return i},getTagIndexByValue:function(n){var e=this,t=[],i=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(o,c){o.__tagifyTagData&&Qu(e.trim(o.__tagifyTagData.value),n,i)&&t.push(c)}),t},getTagElmByValue:function(n){var e=this.getTagIndexByValue(n)[0];return this.getTagElms()[e]},flashTag:function(n){var e=this;n&&(n.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){n.classList.remove(e.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(n){return n=this.trim(n.toLowerCase()),this.settings.blacklist.filter(function(e){return(""+e).toLowerCase()==n}).length},isTagWhitelisted:function(n){return!!this.getWhitelistItem(n)},getWhitelistItem:function(n,e,t){e=e||"value";var i,o=this.settings;return(t=t||o.whitelist).some(function(c){var d=typeof c=="object"?c[e]||c.value:c;if(Qu(d,n,o.dropdown.caseSensitive,o.trim))return i=typeof c=="object"?c:{value:c},!0}),i||e!="value"||o.tagTextProp=="value"||(i=this.getWhitelistItem(n,o.tagTextProp,t)),i},validateTag:function(n){var e=this.settings,t="value"in n?"value":e.tagTextProp,i=this.trim(n[t]+"");return(n[t]+"").trim()?e.mode!="mix"&&e.pattern&&Vs(e.pattern,RegExp)&&!e.pattern.test(i)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(i,e.dropdown.caseSensitive,n.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(i)||e.enforceWhitelist&&!this.isTagWhitelisted(i)?this.TEXTS.notAllowed:!e.validate||e.validate(n):this.TEXTS.empty},getInvalidTagAttrs:function(n,e){return{"aria-invalid":!0,class:"".concat(n.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:e}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(n,e){var t=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),t[e||"readonly"]=n,this.DOM.scope[(n?"set":"remove")+"Attribute"](e||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!n)},setContentEditable:function(n){this.DOM.input.contentEditable=n,this.DOM.input.tabIndex=n?0:-1},setDisabled:function(n){this.setReadonly(n,"disabled")},normalizeTags:function(n){var e=this,t=this.settings,i=t.whitelist,o=t.delimiters,c=t.mode,d=t.tagTextProp,m=[],v=!!i&&Vs(i[0],Object),_=Array.isArray(n),T=_&&n[0].value,S=s(function(O){return(O+"").split(o).reduce(function(M,D){var j,I=e.trim(D);return I&&M.push((ib(j={},d,I),ib(j,"value",I),j)),M},[])},"h");if(typeof n=="number"&&(n=n.toString()),typeof n=="string"){if(!n.trim())return[];n=S(n)}else _&&(n=n.reduce(function(O,M){if(fs(M)){var D=Wn({},M);D[d]=e.trim(D[d]),D[d]&&O.push(D)}else if(M){var j;(j=O).push.apply(j,eb(S(M)))}return O},[]));return v&&!T&&(n.forEach(function(O){var M=m.map(function(I){return I.value}),D=e.dropdown.filterListItems.call(e,O[d],{exact:!0});e.settings.duplicates||(D=D.filter(function(I){return!M.includes(I.value)}));var j=D.length>1?e.getWhitelistItem(O[d],d,D):D[0];j&&Vs(j,Object)?m.push(j):c!="mix"&&(O.value==null&&(O.value=O[d]),m.push(O))}),m.length&&(n=m)),n},parseMixTags:function(n){var e=this,t=this.settings,i=t.mixTagsInterpolator,o=t.duplicates,c=t.transformTag,d=t.enforceWhitelist,m=t.maxTags,v=t.tagTextProp,_=[];n=n.split(i[0]).map(function(S,O){var M,D,j,I=S.split(i[1]),B=I[0],W=_.length==m;try{if(B==+B)throw Error;D=JSON.parse(B)}catch{D=e.normalizeTags(B)[0]||{value:B}}if(c.call(e,D),W||!(I.length>1)||d&&!e.isTagWhitelisted(D.value)||!o&&e.isTagDuplicate(D.value)){if(S)return O?i[0]+S:S}else D[M=D[v]?v:"value"]=e.trim(D[M]),j=e.createTagElem(D),_.push(D),j.classList.add(e.settings.classNames.tagNoAnimation),I[0]=j.outerHTML,e.value.push(D);return I.join("")}).join(""),this.DOM.input.innerHTML=n,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var T=this.getTagElms();return T.forEach(function(S,O){return un(S,_[O])}),this.update({withoutChangeEvent:!0}),BE(T,this.state.hasFocus),n},replaceTextWithNode:function(n,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var t,i,o=this.state.selection||window.getSelection(),c=o.anchorNode,d=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return c.splitText(o.anchorOffset-d),(t=c.nodeValue.lastIndexOf(e))==-1||(i=c.splitText(t),n&&c.parentNode.replaceChild(n,i)),!0}},prepareNewTagNode:function(n,e){e=e||{};var t=this.settings,i=[],o={},c=Object.assign({},n,{value:n.value+""});if(n=Object.assign({},c),t.transformTag.call(this,n),n.__isValid=this.hasMaxTags()||this.validateTag(n),n.__isValid!==!0){if(e.skipInvalid)return;if(Wn(o,this.getInvalidTagAttrs(n,n.__isValid),{__preInvalidData:c}),n.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(n.value)),!t.createInvalidTags)return void i.push(n.value)}return"readonly"in n&&(n.readonly?o["aria-readonly"]=!0:delete n.readonly),{tagElm:this.createTagElem(n,o),tagData:n,aggregatedInvalidInput:i}},postProcessNewTagNode:function(n,e){var t=this,i=this.settings,o=e.__isValid;o&&o===!0?(this.value.push(e),this.trigger("add",{tag:n,index:this.value.length-1,data:e})):(this.trigger("invalid",{data:e,index:this.value.length,tag:n,message:o}),i.keepInvalidTags||setTimeout(function(){return t.removeTags(n,!0)},1e3)),this.dropdown.position()},selectTag:function(n,e){var t=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(e.value)){this.state.actions.selectOption&&setTimeout(function(){return t.setRangeAtStartEnd(!1,t.DOM.input)});var i=this.getLastTag();return i?this.replaceTag(i,e):this.appendTag(n),this.value[0]=e,this.update(),this.trigger("add",{tag:n,data:e}),[n]}},addEmptyTag:function(n){var e=Wn({value:""},n||{}),t=this.createTagElem(e);un(t,e),this.appendTag(t),this.editTag(t,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(n,e,t){var i=this,o=[],c=this.settings,d=[],m=document.createDocumentFragment();if(!n||n.length==0)return o;switch(n=this.normalizeTags(n),c.mode){case"mix":return this.addMixTags(n);case"select":e=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),n.forEach(function(v){var _=i.prepareNewTagNode(v,{skipInvalid:t||c.skipInvalid});if(_){var T=_.tagElm;if(v=_.tagData,d=_.aggregatedInvalidInput,o.push(T),c.mode=="select")return i.selectTag(T,v);m.appendChild(T),i.postProcessNewTagNode(T,v)}}),this.appendTag(m),this.update(),n.length&&e&&(this.input.set.call(this,c.createInvalidTags?"":d.join(c._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),c.dropdown.enabled&&this.dropdown.refilter(),o},addMixTags:function(n){var e=this;if((n=this.normalizeTags(n))[0].prefix||this.state.tag)return this.prefixedTextToTag(n[0]);var t=document.createDocumentFragment();return n.forEach(function(i){var o=e.prepareNewTagNode(i);t.appendChild(o.tagElm),e.insertAfterTag(o.tagElm),e.postProcessNewTagNode(o.tagElm,o.tagData)}),this.appendMixTags(t),t.children},appendMixTags:function(n){var e=!!this.state.selection;e?this.injectAtCaret(n):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(n),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(n){var e,t,i,o=this,c=this.settings,d=(e=this.state.tag)===null||e===void 0?void 0:e.delimiters;if(n.prefix=n.prefix||this.state.tag?this.state.tag.prefix:(c.pattern.source||c.pattern)[0],i=this.prepareNewTagNode(n),t=i.tagElm,this.replaceTextWithNode(t)||this.DOM.input.appendChild(t),setTimeout(function(){return t.classList.add(o.settings.classNames.tagNoAnimation)},300),this.value.push(i.tagData),this.update(),!d){var m=this.insertAfterTag(t)||t;setTimeout(qo,0,m)}return this.state.tag=null,this.postProcessNewTagNode(t,i.tagData),t},appendTag:function(n){var e=this.DOM,t=e.input;e.scope.insertBefore(n,t)},createTagElem:function(n,e){n.__tagId=OE();var t,i=Wn({},n,RE({value:Ia(n.value+"")},e));return function(o){for(var c,d=document.createNodeIterator(o,NodeFilter.SHOW_TEXT,null,!1);c=d.nextNode();)c.textContent.trim()||c.parentNode.removeChild(c)}(t=this.parseTemplate("tag",[i,this])),un(t,n),t},reCheckInvalidTags:function(){var n=this,e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(function(t,i){var o=un(t),c=n.hasMaxTags(),d=n.validateTag(o),m=d===!0&&!c;if(e.mode=="select"&&n.toggleScopeValidation(d),m)return o=o.__preInvalidData?o.__preInvalidData:{value:o.value},n.replaceTag(t,o);t.title=c||d})},removeTags:function(n,e,t){var i,o=this,c=this.settings;if(n=n&&Vs(n,HTMLElement)?[n]:Vs(n,Array)?n:n?[n]:[this.getLastTag()].filter(function(d){return d}),i=n.reduce(function(d,m){m&&typeof m=="string"&&(m=o.getTagElmByValue(m));var v=un(m);return m&&v&&!v.readonly&&d.push({node:m,idx:o.getTagIdx(v),data:un(m,{__removed:!0})}),d},[]),t=typeof t=="number"?t:this.CSSVars.tagHideTransition,c.mode=="select"&&(t=0,this.input.set.call(this)),i.length==1&&c.mode!="select"&&i[0].node.classList.contains(c.classNames.tagNotAllowed)&&(e=!0),i.length)return c.hooks.beforeRemoveTag(i,{tagify:this}).then(function(){var d=s(function(m){m.node.parentNode&&(m.node.parentNode.removeChild(m.node),e?c.keepInvalidTags&&this.trigger("remove",{tag:m.node,index:m.idx}):(this.trigger("remove",{tag:m.node,index:m.idx,data:m.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),c.keepInvalidTags&&this.reCheckInvalidTags()))},"t");t&&t>10&&i.length==1?function(m){m.node.style.width=parseFloat(window.getComputedStyle(m.node).width)+"px",document.body.clientTop,m.node.classList.add(c.classNames.tagHide),setTimeout(d.bind(this),t,m)}.call(o,i[0]):i.forEach(d.bind(o)),e||(o.removeTagsFromValue(i.map(function(m){return m.node})),o.update(),c.mode=="select"&&c.userInput&&o.setContentEditable(!0))}).catch(function(d){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(n){return n.remove()})},removeTagsFromValue:function(n){var e=this;(n=Array.isArray(n)?n:[n]).forEach(function(t){var i=un(t),o=e.getTagIdx(i);o>-1&&e.value.splice(o,1)})},removeAllTags:function(n){var e=this;n=n||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){e.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(n)},postUpdate:function(){this.state.blockChangeEvent=!1;var n,e,t=this.settings,i=t.classNames,o=t.mode=="mix"?t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(i.hasMaxTags,this.value.length>=t.maxTags),this.toggleClass(i.hasNoTags,!this.value.length),this.toggleClass(i.empty,!o),t.mode=="select"&&this.toggleScopeValidation((e=this.value)===null||e===void 0||(n=e[0])===null||n===void 0?void 0:n.__isValid)},setOriginalInputValue:function(n){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=n,e.tagifyValue=e.value,this.setPersistedData(n,"value"))},update:function(n){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var e=this.getInputValue();this.setOriginalInputValue(e),this.settings.onChangeAfterBlur&&(n||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var n=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(n):n.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(n):JSON.stringify(n):""},getCleanValue:function(n){return SE(n||this.value,this.dataProps)},getMixedTagsAsString:function(){var n="",e=this,t=this.settings,i=t.originalInputValueFormat||JSON.stringify,o=t.mixTagsInterpolator;return s(function c(d){d.childNodes.forEach(function(m){if(m.nodeType==1){var v=un(m);if(m.tagName=="BR"&&(n+=`\r
`),v&&Pa.call(e,m)){if(v.__removed)return;n+=o[0]+i(nb(v,e.dataProps))+o[1]}else m.getAttribute("style")||["B","I","U"].includes(m.tagName)?n+=m.textContent:m.tagName!="DIV"&&m.tagName!="P"||(n+=`\r
`,c(m))}else n+=m.textContent})},"i")(this.DOM.input),n}},th.prototype.removeTag=th.prototype.removeTags;var eh=class extends Ge{static{s(this,"TagFieldController")}connect(){this.tagify=new th(this.querySelector("textarea"),this.opticons())}opticons(){let e=JSON.parse(this.dataset.tagify||"{}");return Object.assign({originalInputValueFormat:this.mapValue},e)}mapValue(e){return e.map(t=>t.value).join(",")}};var nh=class extends An{static{s(this,"ToggleFormsController")}connect(){this.toggler=document.getElementById(this.dataset.toggler),this.toggleTarget=document.getElementById(this.dataset.toggleTarget),this.toggler.addEventListener("change",this.onChange.bind(this),!1)}onChange(e){console.log(this.toggler.value,this.dataset.toggleValue),this.toggler.value==this.dataset.toggleValue?this.toggleTarget.classList.remove("hidden"):this.toggleTarget.classList.add("hidden")}};an.register(Hc);an.register(zc);an.register(Uc);an.register(Wc);an.register(Vc);an.register(Zc);an.register($c);an.register(Qc);an.register(tu);an.register(eu);an.register(su);an.register(ou);an.register(uu);an.register(hu);an.register(du);an.register(fu);an.register(pu);an.register(mu);an.register(gu);an.register(Yu);an.register(Gu);an.register(Xu);an.register(eh);an.register(nh);an.start();})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.4
  Copyright  2024 37signals LLC
   *)

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)

sortablejs/modular/sortable.core.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
